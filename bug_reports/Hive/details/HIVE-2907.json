{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12548158","self":"https://issues.apache.org/jira/rest/api/2/issue/12548158","key":"HIVE-2907","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320745","id":"12320745","description":"released","name":"0.10.0","archived":false,"released":true,"releaseDate":"2013-01-11"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-03-26T19:00:27.424+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Oct 03 07:56:53 UTC 2015","customfield_12310420":"233255","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1291106326_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-04-10T16:56:37.432+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-2907/watchers","watchCount":11,"isWatching":false},"created":"2012-03-26T18:18:11.207+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":["TODOC10"],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"10.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":36000,"aggregatetimeoriginalestimate":36000,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317742","id":"12317742","description":"released","name":"0.9.0","archived":false,"released":true,"releaseDate":"2012-04-30"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mousom","name":"mousom","key":"mousom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mousom Dhar Gupta","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-10-03T07:56:53.820+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312584","id":"12312584","name":"Metastore","description":"Tracks issue dealing with metastore."}],"timeoriginalestimate":36000,"description":"Running into an \"Out Of Memory\" error when trying to drop a table with 128K partitions.\n\nThe methods dropTable in metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java \nand dropTable in ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java encounter out of memory errors \nwhen dropping tables with lots of partitions because they try to load the metadata for every partition into memory.","customfield_10010":null,"timetracking":{"originalEstimate":"10h","remainingEstimate":"10h","originalEstimateSeconds":36000,"remainingEstimateSeconds":36000},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12519994","id":"12519994","filename":"ASF.LICENSE.NOT.GRANTED--HIVE-2907.D2505.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-26T19:00:28.378+0000","size":28339,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12519994/ASF.LICENSE.NOT.GRANTED--HIVE-2907.D2505.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12520015","id":"12520015","filename":"ASF.LICENSE.NOT.GRANTED--HIVE-2907.D2505.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-26T21:32:24.194+0000","size":30860,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12520015/ASF.LICENSE.NOT.GRANTED--HIVE-2907.D2505.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12520017","id":"12520017","filename":"ASF.LICENSE.NOT.GRANTED--HIVE-2907.D2505.3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-26T21:38:26.374+0000","size":31124,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12520017/ASF.LICENSE.NOT.GRANTED--HIVE-2907.D2505.3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12520033","id":"12520033","filename":"ASF.LICENSE.NOT.GRANTED--HIVE-2907.D2505.4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-26T23:24:28.628+0000","size":31253,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12520033/ASF.LICENSE.NOT.GRANTED--HIVE-2907.D2505.4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12520161","id":"12520161","filename":"ASF.LICENSE.NOT.GRANTED--HIVE-2907.D2505.5.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-27T17:40:26.594+0000","size":31279,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12520161/ASF.LICENSE.NOT.GRANTED--HIVE-2907.D2505.5.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12520763","id":"12520763","filename":"ASF.LICENSE.NOT.GRANTED--HIVE-2907.D2505.6.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-31T04:34:48.571+0000","size":32736,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12520763/ASF.LICENSE.NOT.GRANTED--HIVE-2907.D2505.6.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12521170","id":"12521170","filename":"ASF.LICENSE.NOT.GRANTED--HIVE-2907.D2505.7.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-03T17:02:20.701+0000","size":32427,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12521170/ASF.LICENSE.NOT.GRANTED--HIVE-2907.D2505.7.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12519988","id":"12519988","filename":"HIVE-2907.1.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mousom","name":"mousom","key":"mousom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mousom Dhar Gupta","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-26T18:36:10.754+0000","size":28610,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12519988/HIVE-2907.1.patch.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12521167","id":"12521167","filename":"HIVE-2907.2.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mousom","name":"mousom","key":"mousom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mousom Dhar Gupta","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-03T16:46:15.483+0000","size":33240,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12521167/HIVE-2907.2.patch.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12521168","id":"12521168","filename":"HIVE-2907.3.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mousom","name":"mousom","key":"mousom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mousom Dhar Gupta","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-03T16:49:47.155+0000","size":32908,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12521168/HIVE-2907.3.patch.txt"}],"aggregatetimeestimate":36000,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"14585","customfield_12312823":null,"summary":"Hive error when dropping a table with large number of partitions","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mousom","name":"mousom","key":"mousom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mousom Dhar Gupta","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mousom","name":"mousom","key":"mousom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mousom Dhar Gupta","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":36000,"percent":0},"customfield_12311024":null,"environment":"General. Hive Metastore bug.","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":36000,"percent":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13238662","id":"13238662","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mousom","name":"mousom","key":"mousom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mousom Dhar Gupta","active":true,"timeZone":"Etc/UTC"},"body":"For ObjectStore::dropTable am dropping pratitions in batches. And for DDLTask::dropTable am\ngetting all partition names and then getting partition metadata from those names in batches.\n\nThe batch size is determined by a config parameter (set to 1000 to start with).\n\nThanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mousom","name":"mousom","key":"mousom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mousom Dhar Gupta","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-26T18:39:39.722+0000","updated":"2012-03-26T18:39:39.722+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13238681","id":"13238681","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"mousom requested code review of \"HIVE-2907 [jira] Hive error when dropping a table with large number of partitions\".\nReviewers: JIRA\n\n  https://issues.apache.org/jira/browse/HIVE-2907\n\n  Hive error when dropping a table with large number of partitions.\n\n  Running into an \"Out Of Memory\" error when trying to drop a table with 128K partitions.\n\n  The methods dropTable in metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java\n  and dropTable in ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java encounter out of memory errors\n  when dropping tables with lots of partitions because they try to load the metadata for every partition into memory.\n\nTEST PLAN\n  EMPTY\n\nREVISION DETAIL\n  https://reviews.facebook.net/D2505\n\nAFFECTED FILES\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java\n  metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java\n  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java\n  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java\n  ql/src/test/results/clientnegative/drop_table_failure3.q.out\n  ql/src/test/queries/clientnegative/drop_table_failure3.q\n  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java\n\nMANAGE HERALD DIFFERENTIAL RULES\n  https://reviews.facebook.net/herald/view/differential/\n\nWHY DID I GET THIS EMAIL?\n  https://reviews.facebook.net/herald/transcript/5595/\n\nTip: use the X-Herald-Rules header to filter Herald messages in your client.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-26T19:00:27.424+0000","updated":"2012-03-26T19:00:27.424+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13238791","id":"13238791","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"kevinwilfong has commented on the revision \"HIVE-2907 [jira] Hive error when dropping a table with large number of partitions\".\n\n  This looks really good, thanks for the code clean up, just some small comments.\n\nINLINE COMMENTS\n  metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java:164 It'd be great if we could use the same config here, otherwise alter table will face the same memory issues for tables with lots of partitions.\n\n  This could be a separate task too.\n  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java:1399-1401 If any client code already assumes that if 0 is max, it returns all partitions, which, given the code in HiveAlterHandler, seems possible, this will break that code.  Could we treat 0 as infinity as well?\n  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java:1565-1567 Same here regarding 0 => infinity\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java:1997 Can you remove this line if it's not needed.\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java:544 Shouldn't this be \"table should not have existed\"\n  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java:292 Could you add a testcase, where you set this really low, e.g. 1, and you drop a table with multiple partitions.\n\n  Also, could you add a similar test where you make one of the partitions NO_DROP, and make sure it fails.\n\nREVISION DETAIL\n  https://reviews.facebook.net/D2505\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-26T20:34:22.316+0000","updated":"2012-03-26T20:34:22.316+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13238866","id":"13238866","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"mousom updated the revision \"HIVE-2907 [jira] Hive error when dropping a table with large number of partitions\".\nReviewers: JIRA, kevinwilfong\n\n  Addressed code review comments.\n\nREVISION DETAIL\n  https://reviews.facebook.net/D2505\n\nAFFECTED FILES\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java\n  metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java\n  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java\n  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java\n  ql/src/test/results/clientnegative/drop_table_failure3.q.out\n  ql/src/test/results/clientpositive/drop_table2.q.out\n  ql/src/test/queries/clientnegative/drop_table_failure3.q\n  ql/src/test/queries/clientpositive/drop_table2.q\n  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-26T21:32:23.526+0000","updated":"2012-03-26T21:32:23.526+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13238875","id":"13238875","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"mousom updated the revision \"HIVE-2907 [jira] Hive error when dropping a table with large number of partitions\".\nReviewers: JIRA, kevinwilfong\n\n  Fixed drop_table2.q\n\nREVISION DETAIL\n  https://reviews.facebook.net/D2505\n\nAFFECTED FILES\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java\n  metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java\n  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java\n  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java\n  ql/src/test/results/clientnegative/drop_table_failure3.q.out\n  ql/src/test/results/clientpositive/drop_table2.q.out\n  ql/src/test/queries/clientnegative/drop_table_failure3.q\n  ql/src/test/queries/clientpositive/drop_table2.q\n  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-26T21:38:23.268+0000","updated":"2012-03-26T21:38:23.268+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13238894","id":"13238894","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"kevinwilfong has commented on the revision \"HIVE-2907 [jira] Hive error when dropping a table with large number of partitions\".\n\n  Could you add a negative test, in which hive.metastore.batch.retrieve.max=1; and otherwise the same as drop_table_failure3.q, this should check that you are not looping over the same partition to check for NO_DROP.\n\nREVISION DETAIL\n  https://reviews.facebook.net/D2505\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-26T22:02:26.238+0000","updated":"2012-03-26T22:02:26.238+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13238964","id":"13238964","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"mousom has commented on the revision \"HIVE-2907 [jira] Hive error when dropping a table with large number of partitions\".\n\n  May I modify the drop_table_failure3.q test itself to do that? That might serve both purposes.\n\nINLINE COMMENTS\n  metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java:164 Can you please make this a separate task Kevin?\n\n  Thanks\n  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java:292 like the *.q file I added?\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java:544 yup\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java:1997 my bad. done.\n  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java:292 i will add both in *.q files.\n  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java:1399 I thought about it but it's just intuitively does not make sense if we return 'ALL' when 0 is passed.And it might be a very difficult to catch bug for a client.But, on the other hand, you are right that this change might break existing clients and that has to be avoided, so I guess I will make this bug a feature :-)\n\nREVISION DETAIL\n  https://reviews.facebook.net/D2505\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-26T23:12:26.907+0000","updated":"2012-03-26T23:12:26.907+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13238975","id":"13238975","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"mousom updated the revision \"HIVE-2907 [jira] Hive error when dropping a table with large number of partitions\".\nReviewers: JIRA, kevinwilfong\n\n  Updated drop_table_failure3.q by setting\n  hive.metastore.batch.retrieve.max=1 so that it makes\n  sure that the code is not looping over the same partition to check for NO_DROP.\n\n\nREVISION DETAIL\n  https://reviews.facebook.net/D2505\n\nAFFECTED FILES\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java\n  metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java\n  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java\n  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java\n  ql/src/test/results/clientnegative/drop_table_failure3.q.out\n  ql/src/test/results/clientpositive/drop_table2.q.out\n  ql/src/test/queries/clientnegative/drop_table_failure3.q\n  ql/src/test/queries/clientpositive/drop_table2.q\n  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-26T23:24:25.475+0000","updated":"2012-03-26T23:24:25.475+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13239099","id":"13239099","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"kevinwilfong has commented on the revision \"HIVE-2907 [jira] Hive error when dropping a table with large number of partitions\".\n\nINLINE COMMENTS\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java:464-465 Why are you checking for values.size() / 2 here?  Admittedly, this works, but shouldn't it be just 2? Or shouldn't you use values.size() / 2 in line 461?\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java:463 sp returned\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java:506-507 Same here re values.size() / 2 vs. 2\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java:505 same here re returned sp\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java:512 sp returned\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java:470 sp returned\n\nREVISION DETAIL\n  https://reviews.facebook.net/D2505\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-27T01:27:23.459+0000","updated":"2012-03-27T01:27:23.459+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13239687","id":"13239687","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"mousom updated the revision \"HIVE-2907 [jira] Hive error when dropping a table with large number of partitions\".\nReviewers: JIRA, kevinwilfong\n\n  Fixed typo. reaturn => return\n\nREVISION DETAIL\n  https://reviews.facebook.net/D2505\n\nAFFECTED FILES\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java\n  metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java\n  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java\n  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java\n  ql/src/test/results/clientnegative/drop_table_failure3.q.out\n  ql/src/test/results/clientpositive/drop_table2.q.out\n  ql/src/test/queries/clientnegative/drop_table_failure3.q\n  ql/src/test/queries/clientpositive/drop_table2.q\n  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-27T17:40:25.719+0000","updated":"2012-03-27T17:40:25.719+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13239718","id":"13239718","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"kevinwilfong has accepted the revision \"HIVE-2907 [jira] Hive error when dropping a table with large number of partitions\".\n\n  +1 Will commit if tests pass.\n\nREVISION DETAIL\n  https://reviews.facebook.net/D2505\n\nBRANCH\n  svn\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-27T17:46:26.230+0000","updated":"2012-03-27T17:46:26.230+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13240846","id":"13240846","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"kevinwilfong has requested changes to the revision \"HIVE-2907 [jira] Hive error when dropping a table with large number of partitions\".\n\n  I'm seeing a lot of test failures in TestNegativeCliDriver.  They seem to work ok when run individually, but when I run ant test or ant test -Dtestcase=TestNegativeCliDriver they fail.  Could you take a look?\n\nREVISION DETAIL\n  https://reviews.facebook.net/D2505\n\nBRANCH\n  svn\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-28T23:59:27.037+0000","updated":"2012-03-28T23:59:27.037+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13243009","id":"13243009","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"mousom updated the revision \"HIVE-2907 [jira] Hive error when dropping a table with large number of partitions\".\nReviewers: JIRA, kevinwilfong\n\n  Fixed drop_table_failure3.q\n\nREVISION DETAIL\n  https://reviews.facebook.net/D2505\n\nAFFECTED FILES\n  conf/hive-default.xml.template\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java\n  metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java\n  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java\n  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java\n  ql/src/test/results/clientnegative/drop_table_failure3.q.out\n  ql/src/test/results/clientpositive/drop_table2.q.out\n  ql/src/test/queries/clientnegative/drop_table_failure3.q\n  ql/src/test/queries/clientpositive/drop_table2.q\n  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-31T04:34:45.189+0000","updated":"2012-03-31T04:34:45.189+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13245473","id":"13245473","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"kevinwilfong has commented on the revision \"HIVE-2907 [jira] Hive error when dropping a table with large number of partitions\".\n\n  I'm getting conflicts trying to apply the patch, could you update your checkout and post an updated diff.\n\nREVISION DETAIL\n  https://reviews.facebook.net/D2505\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-03T16:38:23.374+0000","updated":"2012-04-03T16:38:23.374+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13245481","id":"13245481","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mousom","name":"mousom","key":"mousom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mousom Dhar Gupta","active":true,"timeZone":"Etc/UTC"},"body":"Here is the new patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mousom","name":"mousom","key":"mousom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mousom Dhar Gupta","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-03T16:46:17.079+0000","updated":"2012-04-03T16:46:17.079+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13245498","id":"13245498","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"mousom updated the revision \"HIVE-2907 [jira] Hive error when dropping a table with large number of partitions\".\nReviewers: JIRA, kevinwilfong\n\nREVISION DETAIL\n  https://reviews.facebook.net/D2505\n\nAFFECTED FILES\n  conf/hive-default.xml.template\n  metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java\n  metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java\n  metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java\n  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java\n  ql/src/test/results/clientnegative/drop_table_failure3.q.out\n  ql/src/test/results/clientpositive/drop_table2.q.out\n  ql/src/test/queries/clientnegative/drop_table_failure3.q\n  ql/src/test/queries/clientpositive/drop_table2.q\n  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-03T17:02:20.010+0000","updated":"2012-04-03T17:02:20.010+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13250791","id":"13250791","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevinwilfong","name":"kevinwilfong","key":"kevinwilfong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin Wilfong","active":true,"timeZone":"America/Los_Angeles"},"body":"+1 tests passed, will commit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevinwilfong","name":"kevinwilfong","key":"kevinwilfong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin Wilfong","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-04-10T16:34:03.578+0000","updated":"2012-04-10T16:34:03.578+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13250814","id":"13250814","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevinwilfong","name":"kevinwilfong","key":"kevinwilfong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin Wilfong","active":true,"timeZone":"America/Los_Angeles"},"body":"Committed.  Thanks Mousom.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevinwilfong","name":"kevinwilfong","key":"kevinwilfong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin Wilfong","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-04-10T16:56:37.487+0000","updated":"2012-04-10T16:56:37.487+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13251235","id":"13251235","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-h0.21 #1367 (See [https://builds.apache.org/job/Hive-trunk-h0.21/1367/])\n    HIVE-2907. Hive error when dropping a table with large number of partitions. (mousom via kevinwilfong) (Revision 1311850)\n\n     Result = FAILURE\nkevinwilfong : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1311850\nFiles : \n* /hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java\n* /hive/trunk/conf/hive-default.xml.template\n* /hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java\n* /hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java\n* /hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java\n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java\n* /hive/trunk/ql/src/test/queries/clientnegative/drop_table_failure3.q\n* /hive/trunk/ql/src/test/queries/clientpositive/drop_table2.q\n* /hive/trunk/ql/src/test/results/clientnegative/drop_table_failure3.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/drop_table2.q.out\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-11T01:32:08.893+0000","updated":"2012-04-11T01:32:08.893+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13265285","id":"13265285","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-04-30T21:11:31.182+0000","updated":"2012-04-30T21:11:31.182+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13274818","id":"13274818","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"kevinwilfong has accepted the revision \"HIVE-2907 [jira] Hive error when dropping a table with large number of partitions\".\n\nREVISION DETAIL\n  https://reviews.facebook.net/D2505\n\nBRANCH\n  svn\n\nTo: JIRA, kevinwilfong, mousom\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2012-05-14T18:13:49.603+0000","updated":"2012-05-14T18:13:49.603+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13280304","id":"13280304","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=svemuri","name":"svemuri","key":"svemuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Srinivas","active":true,"timeZone":"Etc/UTC"},"body":"I downloaded the source code for Hive-0.9.1. However, it appears that \"ObjectStore.java\" is missing the fix that fetches partition-metadata in batches. So, it can still cause issues when trying to drop a table with a large number of partitions. \n\nProposed fix in method dropTable from ObjectStore.java\n==========================================================\n int partitionBatchSize = HiveConf.getIntVar(getConf(),\n\t\t\t\t\t\t     ConfVars.METASTORE_BATCH_RETRIEVE_MAX);\n\n        // call dropPartition on each of the table's partitions to follow the\n        // procedure for cleanly dropping partitions.\n        List<MPartition> partsToDelete = listMPartitions(dbName, tableName, partitionBatchSize);\n\twhile (true){\n\t  if (partsToDelete != null || partsToDelete.isEmpty()) {\n\t    break;\n\t  }\n\t  for (MPartition mpart : partsToDelete) {\n\t    dropPartitionCommon(mpart);\n\t  }\n        }","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=svemuri","name":"svemuri","key":"svemuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Srinivas","active":true,"timeZone":"Etc/UTC"},"created":"2012-05-21T17:44:19.281+0000","updated":"2012-05-21T17:44:19.281+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13280308","id":"13280308","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=svemuri","name":"svemuri","key":"svemuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Srinivas","active":true,"timeZone":"Etc/UTC"},"body":"Also, the method dropTable in \"DDLTask.java\"  appears to be missing the fix proposed in the JIRA. I am looking at the Hive-0.9.0 source code base. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=svemuri","name":"svemuri","key":"svemuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Srinivas","active":true,"timeZone":"Etc/UTC"},"created":"2012-05-21T17:51:04.748+0000","updated":"2012-05-21T17:51:04.748+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13280310","id":"13280310","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"@Srinivas: This patch was not backported to 0.9.0. The previous fixVersion was inaccurate. I have updated the field to make it clear that this patch will appear in 0.10.0. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-05-21T17:54:00.953+0000","updated":"2012-05-21T17:54:00.953+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13280317","id":"13280317","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=svemuri","name":"svemuri","key":"svemuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Srinivas","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for the timely clarification.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=svemuri","name":"svemuri","key":"svemuri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Srinivas","active":true,"timeZone":"Etc/UTC"},"created":"2012-05-21T18:00:37.942+0000","updated":"2012-05-21T18:00:37.942+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/13548066","id":"13548066","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-hadoop2 #54 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/54/])\n    HIVE-2907. Hive error when dropping a table with large number of partitions. (mousom via kevinwilfong) (Revision 1311850)\n\n     Result = ABORTED\nkevinwilfong : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1311850\nFiles : \n* /hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java\n* /hive/trunk/conf/hive-default.xml.template\n* /hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java\n* /hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java\n* /hive/trunk/metastore/src/test/org/apache/hadoop/hive/metastore/TestHiveMetaStore.java\n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java\n* /hive/trunk/ql/src/test/queries/clientnegative/drop_table_failure3.q\n* /hive/trunk/ql/src/test/queries/clientpositive/drop_table2.q\n* /hive/trunk/ql/src/test/results/clientnegative/drop_table_failure3.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/drop_table2.q.out\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-01-09T10:24:15.725+0000","updated":"2013-01-09T10:24:15.725+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548158/comment/14942172","id":"14942172","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"body":"Doc note:  This added configuration parameter *hive.metastore.batch.retrieve.table.partition.max* so it needs to be documented in the wiki.  (The parameter description is revised by HIVE-11553.)\n\n* [Configuration Properties -- MetaStore | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-MetaStore]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"created":"2015-10-03T07:56:53.820+0000","updated":"2015-10-03T07:56:53.820+0000"}],"maxResults":27,"total":27,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-2907/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i02urj:"}}