{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12444315","self":"https://issues.apache.org/jira/rest/api/2/issue/12444315","key":"HIVE-1019","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2010-01-12T19:49:53.709+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jun 06 12:19:00 UTC 2014","customfield_12310420":"42651","customfield_12312320":null,"customfield_12310222":"3_*:*_1_*:*_945732916_*|*_10002_*:*_5_*:*_10533251628_*|*_1_*:*_5_*:*_128477035542_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-06-06T12:19:00.928+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1019/watchers","watchCount":6,"isWatching":false},"created":"2009-12-29T15:38:40.898+0000","customfield_12310192":"Fix for java.io.FileNotFoundException: HIVE_PLAN (No such file or directory)\nand java.io.IOException: cannot find dir = .... in partToPartitionInfo!\nwhen running multiple threads with roughly similar queries.","customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"10.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314524","id":"12314524","description":"released","name":"0.6.0","archived":false,"released":true,"releaseDate":"2010-10-29"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-06-06T12:19:00.979+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312588","id":"12312588","name":"Server Infrastructure","description":"Tracks issues dealing with Server infrastructure"}],"timeoriginalestimate":null,"description":"I keep getting errors like this:\n\njava.io.FileNotFoundException: HIVE_PLAN (No such file or directory)\n\nand :\njava.io.IOException: cannot find dir = hdfs://victoria.ebuddy.com:9000/tmp/hive-dwh/801467596/10002 in partToPartitionInfo!\n\nwhen running multiple threads with roughly similar queries.\nI have a patch for this which works for me.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12429063","id":"12429063","filename":"HIVE-1019.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2009-12-29T15:48:46.462+0000","size":28958,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12429063/HIVE-1019.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12431457","id":"12431457","filename":"HIVE-1019-1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-01-26T19:59:30.254+0000","size":26856,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12431457/HIVE-1019-1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12431531","id":"12431531","filename":"HIVE-1019-2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-01-27T08:11:39.920+0000","size":28508,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12431531/HIVE-1019-2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12431764","id":"12431764","filename":"HIVE-1019-3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-01-29T10:58:27.247+0000","size":17602,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12431764/HIVE-1019-3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12435158","id":"12435158","filename":"HIVE-1019-4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-02-08T10:42:41.390+0000","size":32884,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12435158/HIVE-1019-4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12436310","id":"12436310","filename":"HIVE-1019-5.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-02-19T11:18:36.819+0000","size":36776,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12436310/HIVE-1019-5.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12436696","id":"12436696","filename":"HIVE-1019-6.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-02-23T09:57:43.838+0000","size":29370,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12436696/HIVE-1019-6.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12439440","id":"12439440","filename":"HIVE-1019-7.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-03-22T09:11:51.787+0000","size":29135,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12439440/HIVE-1019-7.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12439498","id":"12439498","filename":"HIVE-1019-8.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nzhang","name":"nzhang","key":"nzhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ning Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-03-22T20:37:55.096+0000","size":68482,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12439498/HIVE-1019-8.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12429062","id":"12429062","filename":"stacktrace2.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2009-12-29T15:40:02.476+0000","size":4380,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12429062/stacktrace2.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"122755","customfield_12312823":null,"summary":"java.io.FileNotFoundException: HIVE_PLAN (No such file or directory)","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12795071","id":"12795071","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"stacktrace of the problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2009-12-29T15:40:02.517+0000","updated":"2009-12-29T15:40:02.517+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12795072","id":"12795072","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"This was a two part problem. On Utilities we sometimes synchronize on \"Utilities\" and sometimes on \"gWorkMap\" where in these cases it should always be \"gWorkMap\". The seconds part is we use the jobname as unique id to get jobs from this map. But the name is actually not unique. I have jobnames like this: \"select distinct login_cl...chatsessions_load(Stage-1)\" and they are not all the same job.\n\nthe second part is some static inner classes in for instance HiveInputFormat and CombineHiveInputFormat.\n\nThis seems to fix the problem for me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2009-12-29T15:48:46.477+0000","updated":"2009-12-29T15:48:46.477+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12795074","id":"12795074","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"fyi, on the Utilites class I used the HIVESESSIONID as the unique id since getting the unique hadoop jobid would mean large changes to some files, since we only have jobconfig info at that point.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2009-12-29T15:51:09.104+0000","updated":"2009-12-29T15:51:09.104+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12799350","id":"12799350","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Bennie, how do you run multiple threads with roughly similar queries? Are you using HiveServer or jdbc or odbc?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-01-12T19:49:53.709+0000","updated":"2010-01-12T19:49:53.709+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12799363","id":"12799363","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"I'm using jdbc. I'm not sure you would get the same problem when using the cli but I wouldn't be surprised.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-01-12T20:11:23.088+0000","updated":"2010-01-12T20:11:23.088+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12805164","id":"12805164","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"Old patch wasn't working on trunk anymore. \"HIVE-1019-1.patch\" works on trunk again.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-01-26T19:59:30.305+0000","updated":"2010-01-26T19:59:30.305+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12805172","id":"12805172","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"body":"The header is missing in the newly created files","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"created":"2010-01-26T20:08:02.632+0000","updated":"2010-01-26T20:08:02.632+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12805175","id":"12805175","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"First few lines of the patch when I download it look like this:\n\nIndex: ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java\n===================================================================\n--- ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java\t(revision 903125)\n+++ ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java\t(working copy)\n\nPlus I tried the patch doing this:\npatch -p0 < HIVE-1019-1.patch\nSo it should work right?\n\nit should only be the \"HIVE-1019-1.patch\" the other one is the old file and a stacktrace showing the problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-01-26T20:16:16.361+0000","updated":"2010-01-26T20:16:16.361+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12805228","id":"12805228","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"ah i just realized you probably mean the files inside the patch and not the patch. Ill fix that tomorrow.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-01-26T21:57:21.897+0000","updated":"2010-01-26T21:57:21.897+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12805229","id":"12805229","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"body":"yes, i meant that","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"created":"2010-01-26T22:00:12.836+0000","updated":"2010-01-26T22:00:12.836+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12805406","id":"12805406","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"Ok new patch including the \"Licensed\" headers in the new files. (HIVE-1019-2.patch)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-01-27T08:11:40.078+0000","updated":"2010-01-27T08:11:40.078+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12805937","id":"12805937","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"just noticed I missed something when merging from the previouse verion. In some cases you still get this error.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-01-28T14:58:21.277+0000","updated":"2010-01-28T14:58:21.277+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12806296","id":"12806296","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"On errors like this:\nJob Submission failed with exception 'java.io.IOException(cannot find dir = hdfs://audi.ebuddy.net:9000/user/hive/warehouse/client in partToPartitionInfo!)'\n10/01/28 16:48:15 ERROR exec.ExecDriver: Job Submission failed with exception 'java.io.IOException(cannot find dir = hdfs://audi.ebuddy.net:9000/user/hive/warehouse/client in partToPartitionInfo!)'\njava.io.IOException: cannot find dir = hdfs://audi.ebuddy.net:9000/user/hive/warehouse/client in partToPartitionInfo!\n\nThe original code uses the \"mapred.job.name\" as a unique id to store a map of plan's in the Utilities class. This would however not work \nsince a name like this: \"insert overwrite table use...iptolong(cs.ip)(Stage-1)\" you can have a 2nd query with multiple joins and a where clause which make the query really different but the name the same.\n\nI originally solved this by using the hive.sesion.id but I just found out simply using the hive.session.id isn't going to work if you rapidly start sessions since it generates uniqueid's only if you start in different minutes.\n\nFor now I append a UUID to the hive.session.id to make it really unique and this works perfectly.\n\nfor example:\n\"hive.session.id\" \"hadoop_201001291121_6ac26279-ce6e-4445-9d14-a656c2854f8d\"\n\nI think anyone using the jdbc driver multithreaded will at some point run into this problem.\n\nI'll make a new patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-01-29T10:42:40.765+0000","updated":"2010-01-29T10:42:40.765+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12806301","id":"12806301","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"Ok new patch for trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-01-29T10:58:27.258+0000","updated":"2010-01-29T10:58:27.258+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12806834","id":"12806834","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"Is this acceptable to be committed like this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-01-31T14:42:41.511+0000","updated":"2010-01-31T14:42:41.511+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12829983","id":"12829983","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Bennie,\n\n1. Can you run \"ant checkstyle\"?\n2. Frankly speaking I think the current code in trunk needs bigger refactoring:\n2.1 Utility.setMapRedWork(): We should use the directories in the \"Context\" class to store the plan at the JobClient (we can pass the full path name of the plan in Configuration), instead of generating a random plan file name.\n2.2 We should fix \"hive.session.id\" to be unique per session (Let SessionState.makeSessionId() look similar to Context.generateExecutionId()). Then we can use \"hive.session.id\" in the gWorkMap.\n\n{code}\n  public static void setMapRedWork(Configuration job, MapredWork w) {\n    try {\n      // use the default file system of the job\n      FileSystem fs = FileSystem.get(job);\n*      Path planPath = new Path(HiveConf.getVar(job,\n*          HiveConf.ConfVars.SCRATCHDIR), \"plan.\" + randGen.nextInt());\n{code}\n\nWhat do you think?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-02-05T07:02:35.459+0000","updated":"2010-02-05T07:02:35.459+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12830036","id":"12830036","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"Hi Zheng,\n\n1. I never ran it before. That's a lot of warnings. I'll use it from now on in my editor.\n\n2. Ah yes it needs a bit of refactoring. I was trying to do a quick and dirty fix to get the job done.\nTo give you some background, on my project we are using JdbcTemplates with dbcp and running multiple queries concurrently. We for instance import data from 1 load table into multiple partitions at the same time. So those threads start roughly at the same time and look roughly the same making this an issue.\n\n2.1 Sounds like a good idea.\n\n2.2 Would you prefer Context.generateExecutionId() way of doing it? it theoretically can still collide although extremely unlikely. \nUsing a UUID prevents this completely (although at a price). Either way is fine by me.\n\nWould you like me to make these changes or would this be part of the larger issue?\n\nThanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-02-05T10:01:37.091+0000","updated":"2010-02-05T10:01:37.091+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12830301","id":"12830301","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the quick response Bennie.\n\n2.2 Can we replace the random number in Context.generateExecutionId() with UUID? That will be the best. We still want to see the date and time easily from the ExecutionId.\n\nIt will be great if you can do these changes together here (I don't think it will make the patch too big).\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-02-05T21:20:04.320+0000","updated":"2010-02-05T21:20:04.320+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12830890","id":"12830890","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"On Context I've looked at making the id generation more generic so like this:\n\n{noformat} \n  public static String generateExecutionId() {\n      return generateId(\"hive\");\n  }\n\n  /**\n   * Generate a unique planId.\n   */\n  public static String generatePlanId() {\n    return generateId(\"plan\");\n  }\n\n  /**\n   * Generate a unique hive.session.id\n   * @return unique session id string.\n   */\n  public static String generateSessionId() {\n    return generateId(System.getProperty(\"user.name\"));\n  }\n\n  private static String generateId(String type) {\n      SimpleDateFormat format = new SimpleDateFormat(\"yyyy-MM-dd_HH-mm-ss_SSS\");\n      return type\n              + \"_\" + format.format(new Date())\n              + \"_\" + UUID.randomUUID();\n  }\n\n{noformat} \n\nOk perhaps you can take a look at what I have now and see if it's ok?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-02-08T10:42:41.395+0000","updated":"2010-02-08T10:42:41.395+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12830891","id":"12830891","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"I've also made some minor changes to get the check styles count a bit lower.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-02-08T10:43:55.602+0000","updated":"2010-02-08T10:43:55.602+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12830940","id":"12830940","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"Let me know if this is good enough or some more refactoring is needed on this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-02-08T13:40:34.145+0000","updated":"2010-02-08T13:40:34.145+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12832118","id":"12832118","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"There are some syntactic fixes needed:\n1. Please avoid using \"import xxx.xxx.*\"\n2. The code-style guideline from HIVE-1148 says we will have 100 chars per line, so we don't need to wrap the line if it's less than 100.\n3. There are some unrelated changed about the CombineFileInputFormat\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-02-10T18:43:14.411+0000","updated":"2010-02-10T18:43:14.411+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12832434","id":"12832434","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"1. My editor's bad ;-) will fix this.\n2. Ok will fix.\n3. I made both CombineHiveInputSplit and HiveInputSplit non-static if that's what you mean?\nI think both can be used concurrently so it's risky to keep them static.\nI also don't think CombineFilter should be static. HiveInputSplit was refactored into it's own file and perhaps we can do the same for CombineHiveInputSplit but I think both should atleast be non-static.\n\nLet me know what you think so I can make the changes you prefer.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-02-11T10:02:54.244+0000","updated":"2010-02-11T10:02:54.244+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12835703","id":"12835703","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"1. fixed the imports.\n2. I significantly reduced the number of checkstyles warnings what's left:\nCombineHiveInputFormat = 2\nContext = 1\nHiveInputFormat = 5\nHiveInputSplit = 1\nSessionState = 21\nUtilities = 22\n\nI noticed new warnings like 'HashMap' and 'ArrayList' is not allowed which where recently added.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-02-19T11:18:36.865+0000","updated":"2010-02-19T11:18:36.865+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12836974","id":"12836974","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the update Bennie.\n\nStatic inner classes in Java behave the same as stand-alone classes, or as c++ inner classes.\nNon-static inner classes in Java has an implicit pointer to the parent class.\n\nI don't think these InputSplit classes should be static. What is the concern having them static?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-02-22T23:00:22.245+0000","updated":"2010-02-22T23:00:22.245+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12837137","id":"12837137","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"> Static inner classes in Java behave the same as stand-alone classes, or as c++ inner classes.\n> Non-static inner classes in Java has an implicit pointer to the parent class.\n\nAh I incorrectly thought a static inner class would be like a normal static class (1 per jvm). I'll undo that change. I learned something new today.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-02-23T08:14:09.232+0000","updated":"2010-02-23T08:14:09.232+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12837177","id":"12837177","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"Ok removed change to InputSplit. made a few more checkstyle fixes on SessionState.\n\nSessionState = 14\nContext = 1\nCombineHiveInputFormat = 2\nUtilities = 22\nHiveInputFormat = 5","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-02-23T09:57:43.860+0000","updated":"2010-02-23T09:57:43.860+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12847713","id":"12847713","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nzhang","name":"nzhang","key":"nzhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ning Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Bennie,\n\nThanks for the hard work! Can you rebase your patch to the latest trunk? There are some conflicts when I try to apply the patch. I'll review and commit as soon as possible. \n\nThanks,","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nzhang","name":"nzhang","key":"nzhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ning Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-03-20T05:11:27.933+0000","updated":"2010-03-20T05:11:27.933+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12848066","id":"12848066","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"Ok will merge with trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-03-22T09:05:48.396+0000","updated":"2010-03-22T09:05:48.396+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12848067","id":"12848067","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"new patch merged with trunk","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-03-22T09:11:51.948+0000","updated":"2010-03-22T09:11:51.948+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12848162","id":"12848162","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nzhang","name":"nzhang","key":"nzhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ning Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the quick reply Bennie. I will review it and get back to you soon. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nzhang","name":"nzhang","key":"nzhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ning Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-03-22T15:21:52.503+0000","updated":"2010-03-22T15:21:52.503+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12848319","id":"12848319","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nzhang","name":"nzhang","key":"nzhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ning Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"The changes look fine in general. However, I found a new issue related to this JIRA. I'm uploading a new patch HIVE-1019-8.patch to include the fix as well.\n\nBasically the issue is that when we set hive.exec.parallel=true and two parallel jobs are reading the PLAN for the same file. This is an existing issue and it exists when applying to your patch. The reason is that the session ID (which now used as the Plan file suffix) is not changed for different session. We need to generate a new session ID for each started session in the parallel execution case. A unit test is also added to reproduce the issue in the current trunk.\n\nBennie, is it possible to add a new unit test for the case you are solving?\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nzhang","name":"nzhang","key":"nzhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ning Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-03-22T20:37:55.147+0000","updated":"2010-03-22T20:37:55.147+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12850427","id":"12850427","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"body":"The concept of session is longer than a query. See HIVE-584.\n\nWe should not start a new session inside a query. Instead we should introduce a separate concept (maybe a combination of session id and task id) for that and use that for the PLAN.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zshao","name":"zshao","key":"zshao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zshao&avatarId=14358","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zshao&avatarId=14358","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zshao&avatarId=14358","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zshao&avatarId=14358"},"displayName":"Zheng Shao","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-03-27T00:34:02.652+0000","updated":"2010-03-27T00:34:02.652+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12902888","id":"12902888","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brondsem","name":"brondsem","key":"brondsem","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Brondsema","active":true,"timeZone":"America/New_York"},"body":"I'm getting this error with the simplest of queries, on 0.5.0 release and a recent build of the 0.6.0 SVN branch.\n\nI have an empty table 'test'.\n{noformat}\nhive> select * from test;\nOK\nTime taken: 2.916 seconds\nhive> select count(1) from test;\nTotal MapReduce jobs = 1\nLaunching Job 1 out of 1\nNumber of reduce tasks determined at compile time: 1\nIn order to change the average load for a reducer (in bytes):\n  set hive.exec.reducers.bytes.per.reducer=<number>\nIn order to limit the maximum number of reducers:\n  set hive.exec.reducers.max=<number>\nIn order to set a constant number of reducers:\n  set mapred.reduce.tasks=<number>\nStarting Job = job_201002192051_14077, Tracking URL = http://hadoop-namenode-1.v39.ch3.sourceforge.com:50030/jobdetails.jsp?jobid=job_201002192051_14077\nKill Command = /usr/lib/hadoop/bin/hadoop job  -Dmapred.job.tracker=hadoop-namenode-1.v39.ch3.sourceforge.com:8021 -kill job_201002192051_14077\n2010-08-26 14:53:11,348 Stage-1 map = 0%,  reduce = 0%\n2010-08-26 14:53:21,413 Stage-1 map = 100%,  reduce = 100%\nEnded Job = job_201002192051_14077 with errors\n\nFailed tasks with most(2) failures : \nTask URL: http://hadoop-namenode-1.v39.ch3.sourceforge.com:50030/taskdetails.jsp?jobid=job_201002192051_14077&tipid=task_201002192051_14077_m_000000\n\nFAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.ExecDriver\n{noformat}\n\nIf I check the job tracker URL it shows:\n{noformat}\n2010-08-26 14:41:05,789 INFO org.apache.hadoop.metrics.jvm.JvmMetrics: Initializing JVM Metrics with processName=MAP, sessionId=                                                                                                                                        \n2010-08-26 14:41:05,865 INFO org.apache.hadoop.mapred.MapTask: numReduceTasks: 1                                                                                                                                                                                        \n2010-08-26 14:41:05,881 INFO org.apache.hadoop.mapred.MapTask: io.sort.mb = 100                                                                                                                                                                                         \n2010-08-26 14:41:05,929 INFO org.apache.hadoop.mapred.MapTask: data buffer = 79691776/99614720                                                                                                                                                                          \n2010-08-26 14:41:05,930 INFO org.apache.hadoop.mapred.MapTask: record buffer = 262144/327680                                                                                                                                                                            \n2010-08-26 14:41:05,988 WARN org.apache.hadoop.mapred.TaskTracker: Error running child                                                                                                                                                                                  \njava.lang.RuntimeException: java.io.FileNotFoundException: HIVE_PLAN (No such file or directory)                                                                                                                                                                        \n        at org.apache.hadoop.hive.ql.exec.Utilities.getMapRedWork(Utilities.java:110)                                                                                                                                                                                   \n        at org.apache.hadoop.hive.ql.io.HiveInputFormat.init(HiveInputFormat.java:244)                                                                                                                                                                                  \n        at org.apache.hadoop.hive.ql.io.HiveInputFormat.getRecordReader(HiveInputFormat.java:208)                                                                                                                                                                       \n        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:219)                                                                                                                                                                                                       \n        at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:2210)                                                                                                                                                                                       \nCaused by: java.io.FileNotFoundException: HIVE_PLAN (No such file or directory)                                                                                                                                                                                         \n        at java.io.FileInputStream.open(Native Method)                                                                                                                                                                                                                  \n        at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:106)                                                                                                                                                                                               \n        at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:66)                                                                                                                                                                                                \n        at org.apache.hadoop.hive.ql.exec.Utilities.getMapRedWork(Utilities.java:101)                                                                                                                                                                                   \n        ... 4 more\n{noformat}\n\nhive.exec.parallel is false, and there are no other jobs running\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brondsem","name":"brondsem","key":"brondsem","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Brondsema","active":true,"timeZone":"America/New_York"},"created":"2010-08-26T15:02:50.380+0000","updated":"2010-08-26T15:02:50.380+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12904240","id":"12904240","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brondsem","name":"brondsem","key":"brondsem","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Brondsema","active":true,"timeZone":"America/New_York"},"body":"Nevermind, I got that error because we had an old version (0.4.0) on the hadoop cluster.  Upgrading hive everywhere fixed it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brondsem","name":"brondsem","key":"brondsem","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Brondsema","active":true,"timeZone":"America/New_York"},"created":"2010-08-30T16:20:04.439+0000","updated":"2010-08-30T16:20:04.439+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/12970252","id":"12970252","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dnquark","name":"dnquark","key":"dnquark","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leo Alekseyev","active":true,"timeZone":"Etc/UTC"},"body":"I get very similar errors when running multiple jobs through JDBC with lots of mappers.  After a while, the jobs start crapping out with e.g. \n{{java.lang.RuntimeException: java.io.FileNotFoundException: HIVE_PLAN67464971-325d-43bd-8822-c1a5873eb6ef (No such file or directory)}}\n\nThere is a UUID after HIVE_PLAN, but I see that this issue is still open -- so is the fix not complete?..  Is it a separate issue?  Can someone explain what's going on here so that I can try to set up some reproducible tests?..  \nI am running a fairly fresh (a few months old) trunk build of Hive.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dnquark","name":"dnquark","key":"dnquark","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leo Alekseyev","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-10T18:20:50.430+0000","updated":"2010-12-10T18:20:50.430+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/13012442","id":"13012442","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"on HIVE-1524 they added UUID's in a few places but the problem seems a bit more complicated. I used this patch for months without seeing this issue. I just updated to trunk without this patch and I have exactly the same error you have:\n\njava.lang.RuntimeException: java.io.FileNotFoundException: HIVE_PLANroot_2011-03-29_12-21-37_996_31570073-87f1-4230-88e6-886bed8b6698 (No such file or directory)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2011-03-29T11:58:31.997+0000","updated":"2011-03-29T11:58:31.997+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/13014640","id":"13014640","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"Just found at least one way to cause/reproduce this:\n\nCREATE TABLE test_1 (\n  test_field     STRING\n, network        STRING\n, version_type   STRING\n, country        STRING\n, test_ID        BIGINT\n) PARTITIONED BY (appendkey_id INT) ROW FORMAT SERDE 'org.apache.hadoop.hive.serde2.columnar.ColumnarSerDe' STORED AS RCFILE;\n\nCREATE TABLE test_2 (\n  test_field        STRING\n, test_ID            BIGINT\n) PARTITIONED BY (appendkey_id INT) ROW FORMAT SERDE 'org.apache.hadoop.hive.serde2.columnar.ColumnarSerDe' STORED AS RCFILE;\n\nCREATE TABLE test_month (\n  network           STRING\n, version_type      STRING\n, country           STRING\n, total             INT\n) PARTITIONED BY (month STRING, appendkey_id INT)\n  ROW FORMAT SERDE 'org.apache.hadoop.hive.serde2.columnar.ColumnarSerDe' STORED AS RCFILE;\n\n\nfrom ( select network, version_type, country\nfrom test_1 t1 join test_2 t2 on (t1.test_ID=t2.test_ID)) subq1  \n \ninsert overwrite table test_month partition(month='2004-07', appendkey_id=0) select network,  version_type,  country , count(*) total\ngroup by network, version_type, country \n\ninsert overwrite table test_month partition(month='2004-07', appendkey_id=1) select network,  version_type,  country , count(*) total\ngroup by network, version_type, country \n\n\nOn our server it completely kills the hive service.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2011-04-01T14:59:35.503+0000","updated":"2011-04-01T14:59:35.503+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/14018530","id":"14018530","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuanjinlee","name":"xuanjinlee","key":"xuanjinlee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"xuanjinlee","active":true,"timeZone":"Etc/UTC"},"body":"Hello how to use this patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuanjinlee","name":"xuanjinlee","key":"xuanjinlee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"xuanjinlee","active":true,"timeZone":"Etc/UTC"},"created":"2014-06-05T06:42:40.721+0000","updated":"2014-06-05T06:42:40.721+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/14018555","id":"14018555","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"xuanjinlee this is a somewhat prehistoric patch which I forgot to close. Most people have moved to hiveserver2 which doesn't suffer from these threading issues. Unless anyone objects I would actually like to close this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2014-06-05T07:18:41.767+0000","updated":"2014-06-05T07:18:41.767+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12444315/comment/14019792","id":"14019792","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"Hiveserver2 doesn't suffer from this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2014-06-06T12:19:00.973+0000","updated":"2014-06-06T12:19:00.973+0000"}],"maxResults":41,"total":41,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1019/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0lczr:"}}