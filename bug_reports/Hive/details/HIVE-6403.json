{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12694413","self":"https://issues.apache.org/jira/rest/api/2/issue/12694413","key":"HIVE-6403","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324986","id":"12324986","description":"released","name":"0.13.0","archived":false,"released":true,"releaseDate":"2014-04-21"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-02-11T07:38:00.905+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Mar 08 08:46:56 UTC 2014","customfield_12310420":"372921","customfield_12312320":null,"customfield_12310222":"10002_*:*_3_*:*_2112929788_*|*_1_*:*_3_*:*_100543944_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-03-08T17:24:21.043+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-6403/watchers","watchCount":2,"isWatching":false},"created":"2014-02-11T02:33:07.345+0000","customfield_12310192":"also added to 0.13\nthanks Navis","customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"8.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-03-08T17:24:32.756+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312586","id":"12312586","name":"Query Processor","description":"Tracks issues dealing with query processing."}],"timeoriginalestimate":null,"description":"Fixing HIVE-5690, I've found query in subquery_multiinsert.q is not working with hive.auto.convert.join=true \n{noformat}\nset hive.auto.convert.join=true;\nhive> explain\n    > from src b \n    > INSERT OVERWRITE TABLE src_4 \n    >   select * \n    >   where b.key in \n    >    (select a.key \n    >     from src a \n    >     where b.value = a.value and a.key > '9'\n    >    ) \n    > INSERT OVERWRITE TABLE src_5 \n    >   select *  \n    >   where b.key not in  ( select key from src s1 where s1.key > '2') \n    >   order by key \n    > ;\njava.lang.IndexOutOfBoundsException: Index: 0, Size: 0\n\tat java.util.ArrayList.rangeCheck(ArrayList.java:635)\n\tat java.util.ArrayList.get(ArrayList.java:411)\n\tat org.apache.hadoop.hive.ql.optimizer.MapJoinProcessor.genMapJoinLocalWork(MapJoinProcessor.java:149)\n\tat org.apache.hadoop.hive.ql.optimizer.MapJoinProcessor.genLocalWorkForMapJoin(MapJoinProcessor.java:256)\n\tat org.apache.hadoop.hive.ql.optimizer.MapJoinProcessor.genMapJoinOpAndLocalWork(MapJoinProcessor.java:248)\n\tat org.apache.hadoop.hive.ql.optimizer.physical.CommonJoinTaskDispatcher.convertTaskToMapJoinTask(CommonJoinTaskDispatcher.java:191)\n\tat org.apache.hadoop.hive.ql.optimizer.physical.CommonJoinTaskDispatcher.processCurrentTask(CommonJoinTaskDispatcher.java:481)\n\tat org.apache.hadoop.hive.ql.optimizer.physical.AbstractJoinTaskDispatcher.dispatch(AbstractJoinTaskDispatcher.java:182)\n\tat org.apache.hadoop.hive.ql.lib.TaskGraphWalker.dispatch(TaskGraphWalker.java:111)\n\tat org.apache.hadoop.hive.ql.lib.TaskGraphWalker.walk(TaskGraphWalker.java:194)\n\tat org.apache.hadoop.hive.ql.lib.TaskGraphWalker.startWalking(TaskGraphWalker.java:139)\n\tat org.apache.hadoop.hive.ql.optimizer.physical.CommonJoinResolver.resolve(CommonJoinResolver.java:79)\n\tat org.apache.hadoop.hive.ql.optimizer.physical.PhysicalOptimizer.optimize(PhysicalOptimizer.java:100)\n\tat org.apache.hadoop.hive.ql.parse.MapReduceCompiler.optimizeTaskPlan(MapReduceCompiler.java:290)\n\tat org.apache.hadoop.hive.ql.parse.TaskCompiler.compile(TaskCompiler.java:216)\n\tat org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:9167)\n\tat org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:327)\n\tat org.apache.hadoop.hive.ql.parse.ExplainSemanticAnalyzer.analyzeInternal(ExplainSemanticAnalyzer.java:64)\n\tat org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:327)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:446)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:346)\n\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1056)\n\tat org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1099)\n\tat org.apache.hadoop.hive.ql.Driver.run(Driver.java:992)\n\tat org.apache.hadoop.hive.ql.Driver.run(Driver.java:982)\n\tat org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:268)\n\tat org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:220)\n\tat org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:424)\n\tat org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:793)\n\tat org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:687)\n\tat org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:626)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat org.apache.hadoop.util.RunJar.main(RunJar.java:160)\norg.apache.hadoop.hive.ql.parse.SemanticException: Failed to generate new mapJoin operator by exception : Index: 0, Size: 0\n\tat org.apache.hadoop.hive.ql.optimizer.MapJoinProcessor.genLocalWorkForMapJoin(MapJoinProcessor.java:266)\n\tat org.apache.hadoop.hive.ql.optimizer.MapJoinProcessor.genMapJoinOpAndLocalWork(MapJoinProcessor.java:248)\n\tat org.apache.hadoop.hive.ql.optimizer.physical.CommonJoinTaskDispatcher.convertTaskToMapJoinTask(CommonJoinTaskDispatcher.java:191)\n\tat org.apache.hadoop.hive.ql.optimizer.physical.CommonJoinTaskDispatcher.processCurrentTask(CommonJoinTaskDispatcher.java:481)\n\tat org.apache.hadoop.hive.ql.optimizer.physical.AbstractJoinTaskDispatcher.dispatch(AbstractJoinTaskDispatcher.java:182)\n\tat org.apache.hadoop.hive.ql.lib.TaskGraphWalker.dispatch(TaskGraphWalker.java:111)\n\tat org.apache.hadoop.hive.ql.lib.TaskGraphWalker.walk(TaskGraphWalker.java:194)\n\tat org.apache.hadoop.hive.ql.lib.TaskGraphWalker.startWalking(TaskGraphWalker.java:139)\n\tat org.apache.hadoop.hive.ql.optimizer.physical.CommonJoinResolver.resolve(CommonJoinResolver.java:79)\n\tat org.apache.hadoop.hive.ql.optimizer.physical.PhysicalOptimizer.optimize(PhysicalOptimizer.java:100)\n\tat org.apache.hadoop.hive.ql.parse.MapReduceCompiler.optimizeTaskPlan(MapReduceCompiler.java:290)\n\tat org.apache.hadoop.hive.ql.parse.TaskCompiler.compile(TaskCompiler.java:216)\n\tat org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:9167)\n\tat org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:327)\n\tat org.apache.hadoop.hive.ql.parse.ExplainSemanticAnalyzer.analyzeInternal(ExplainSemanticAnalyzer.java:64)\n\tat org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:327)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:446)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:346)\n\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1056)\n\tat org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1099)\n\tat org.apache.hadoop.hive.ql.Driver.run(Driver.java:992)\n\tat org.apache.hadoop.hive.ql.Driver.run(Driver.java:982)\n\tat org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:268)\n\tat org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:220)\n\tat org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:424)\n\tat org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:793)\n\tat org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:687)\n\tat org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:626)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat org.apache.hadoop.util.RunJar.main(RunJar.java:160)\nFAILED: SemanticException Generate Map Join Task Error: Failed to generate new mapJoin operator by exception : Index: 0, Size: 0\n{noformat}\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12628444","id":"12628444","filename":"HIVE-6403.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-02-12T06:28:02.072+0000","size":24161,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12628444/HIVE-6403.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12628947","id":"12628947","filename":"HIVE-6403.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-02-14T04:12:10.822+0000","size":26551,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12628947/HIVE-6403.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12629298","id":"12629298","filename":"HIVE-6403.3.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-02-17T02:25:45.006+0000","size":72490,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12629298/HIVE-6403.3.patch.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12629301","id":"12629301","filename":"HIVE-6403.4.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-02-17T04:14:47.085+0000","size":76502,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12629301/HIVE-6403.4.patch.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12629459","id":"12629459","filename":"HIVE-6403.5.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-02-18T02:12:36.954+0000","size":122223,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12629459/HIVE-6403.5.patch.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12633001","id":"12633001","filename":"HIVE-6403.6.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-03-06T01:47:10.701+0000","size":122223,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12633001/HIVE-6403.6.patch.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12628677","id":"12628677","filename":"navis.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-02-13T04:39:52.927+0000","size":4037,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12628677/navis.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12628955","id":"12628955","filename":"navis2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-02-14T05:46:43.166+0000","size":99028,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12628955/navis2.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"373223","customfield_12312823":null,"summary":"uncorrelated subquery is failing with auto.convert.join=true","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13897467","id":"13897467","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"body":"I wish I could fix this but it's way out of my ability. Could you check this [~rhbutani] ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-02-11T02:33:55.294+0000","updated":"2014-02-11T02:33:55.294+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13897608","id":"13897608","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~navis] I am no expert on the MapJoinProcessor. Following is what I see; I will need to spend more time on this.\nMaybe from my comments you can see the issue.\n\n1. The Plan generated at genPlan is:\nTS[0] (the scan for b) has 2 child operators: [RS[4], RS[25]] \nThese are for the joins for each of the SubQuery expressions:\nb.key in \n   (select a.key \n    from src a \n    where b.value = a.value and a.key > '9'\n   ) \nand \nb.key not in  ( select key from src s1 where s1.key > '2') \n\nThe plan looks complex because the handling of not in requires the null check. This issue will occur even if the second insert is a 'in' subquery predicate. It will be easier to follow for such an e.g.\n\n2. With set hive.auto.convert.join=false\nThe second RS gets converted to a FileSink. You can observe this from the explain output. A subsequent Stage reads this intermediate output to perform the processing for the 2nd SubQuery.\n\n3. With set hive.auto.convert.join=true;\nWhen it comes to CommonJoinResolver the TS[0] has children [RS[4], FS[44]] ie the 2nd ReduceSink is converted to a FileSink\nThe MapJoinProcessor:genMapJoinLocalWork line 145 it is assuming that a TableScanOp can only have 1 child. \nThe fix maybe to ignore any FileSink operators that are children of TableScan. Another test to add is a multi insert on 3 tables.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-02-11T07:38:00.905+0000","updated":"2014-02-11T07:38:00.905+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13898852","id":"13898852","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~navis] could you please review.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-02-12T06:29:24.547+0000","updated":"2014-02-12T06:29:24.547+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13898882","id":"13898882","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"body":"I think CommonJoinTaskDispatcher#getPosition() depends on wrong assumption that top operator has only a child (or resultingly a child like LV cases). We should track up (child to parent) big aliases from bigTableCandidates, opposed to current way.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-02-12T07:14:56.161+0000","updated":"2014-02-12T07:14:56.161+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13899299","id":"13899299","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"body":"What I see is that for the Multi Insert with SubQuery case:\n- the first child will be a ReduceSink; other child is converted to FileSink by the time it gets to CommonJoinTaskDispatcher.\n- so for the Multi Insert SubQuery case checking the first child is still ok.\n\nBut yes this check that other children are FileSink, should be done in CommonJoinTaskDispatcher#getPosition\n\nBeyond the above point; I am sorry, I don't follow what else you are proposing. Can you please elaborate.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-02-12T17:22:20.283+0000","updated":"2014-02-12T17:22:20.283+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13900013","id":"13900013","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"body":"This is the change what I've meant. Could you check this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-02-13T04:39:52.932+0000","updated":"2014-02-13T04:39:52.932+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13900676","id":"13900676","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"body":"Ok, yes I see what you mean. I incorporated your findAlias changes. and created a new patch.\nI think the 'multiInsertBigTableCheck' check needs to be still done, because in case of multi insert we want the 'source' table to be the only big table choice. Do you agree?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-02-13T20:02:54.801+0000","updated":"2014-02-13T20:02:54.801+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13900810","id":"13900810","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12628832/HIVE-6403.2.patch\n\n{color:red}ERROR:{color} -1 due to 22 failed/errored test(s), 5095 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join11\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join12\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join13\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join15\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join17\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join22\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join23\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join24\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join27\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join29\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join3\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join32\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join9\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_sortmerge_join_10\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join34\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_reorder4\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multiMapJoin2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multi_join_union\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union34\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorized_mapjoin\n{noformat}\n\nTest results: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1315/testReport\nConsole output: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1315/console\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 22 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12628832","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2014-02-13T22:27:01.502+0000","updated":"2014-02-13T22:27:01.502+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13901088","id":"13901088","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"body":"Resubmitting patch. Ran several of the tests locally, they succeed.\nThe previous run was aborted.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-02-14T04:12:51.164+0000","updated":"2014-02-14T04:12:51.164+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13901136","id":"13901136","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"body":"[~rhbutani] Took some time to understand multiInsertBigTableCheck() and now got it. But seeing auto_join17.q, I've realized that we missed handling map-side union cases. Updated in navis2.patch. Could you check that too?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-02-14T05:50:32.867+0000","updated":"2014-02-14T05:50:32.867+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13901947","id":"13901947","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~navis] i went through the patch; I think I understand the reason for the change. Couple of questions:\n- i don't see a union e.g. Can an e.g. be added that exercises the map-side union case.\n- i see several plans changed in .out files to scan src1 in place of src2.  But the check at CommonJoinTaskDispatcher::cannotConvert line 447, should favor the right alias as the big table. So I don't understand why these plans are changed with your patch. For my understanding, can you please explain this change.\n\nAssigning the jira to you; you have made most of the changes, my contribution is very tiny; and I am just becoming familiar with the pieces you have touched in this patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-02-14T21:18:35.964+0000","updated":"2014-02-14T21:18:35.964+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13902912","id":"13902912","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"body":"[~rhbutani] \nbq. i don't see a union\nAh, it's \"auto_join27.q\", \"not auto_join17.q\". Sorry for that.\nbq. should favor the right alias as the big table\nSeemed a bug which was not fixed properly in HIVE-5945. I'll check that, too.\nbq. my contribution is very tiny\nI would have never thought of multiInsertBigTableCheck() will be needed. Most of codes I've suggested are just easier part. I'll make this issue done. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-02-17T02:06:37.036+0000","updated":"2014-02-17T02:06:37.036+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13902940","id":"13902940","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"body":"Add/fix comments and minor refactorings","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-02-17T04:14:47.090+0000","updated":"2014-02-17T04:14:47.090+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13903130","id":"13903130","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12629301/HIVE-6403.4.patch.txt\n\n{color:red}ERROR:{color} -1 due to 21 failed/errored test(s), 5127 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join0\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join10\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join16\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join_without_localtask\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_sortmerge_join_9\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer4\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer6\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_mult_tables\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_mult_tables_compact\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_partitioned\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_update\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_bitmap\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_bitmap_auto_partitioned\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_bitmap_rc\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_compact\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_compact_2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_infer_bucket_sort_convert_join\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join35\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_hook\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_test_outer\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_parallel_orderby\n{noformat}\n\nTest results: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1356/testReport\nConsole output: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1356/console\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 21 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12629301","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2014-02-17T10:21:29.466+0000","updated":"2014-02-17T10:21:29.466+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13903365","id":"13903365","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"body":"The patch looks good.\nI looked at the failures, most of them are assertion failures because of the join reorder fix you put in.\nThere are a few failures to do with Alter Index Rebuild, like index_bitmap_rc.q.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-02-17T16:55:28.313+0000","updated":"2014-02-17T16:55:28.313+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13903674","id":"13903674","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"body":"Hive index system seemed broken badly in somewhere. \nEven in trunk,\n{noformat}\nhive> explain extended ALTER INDEX srcpart_index ON srcpart REBUILD;\n\nSTAGE DEPENDENCIES:\n  Stage-1 is a root stage\n  Stage-0 depends on stages: Stage-1\n  Stage-2 depends on stages: Stage-0\n  null depends on stages: Stage-1\n  Stage-3 depends on stages: Stage-1, Stage-1, Stage-1, Stage-1\n  Stage-1 is a root stage\n  Stage-0 depends on stages: Stage-1\n  Stage-2 depends on stages: Stage-0\n  null depends on stages: Stage-1\n  Stage-1 is a root stage\n  Stage-0 depends on stages: Stage-1\n  Stage-2 depends on stages: Stage-0\n  null depends on stages: Stage-1\n  Stage-1 is a root stage\n  Stage-0 depends on stages: Stage-1\n  Stage-2 depends on stages: Stage-0\n  null depends on stages: Stage-1\n{noformat}\nI've never used index before but it seemed not a valid plan. I'll dig into this for a while.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-02-18T01:25:09.954+0000","updated":"2014-02-18T01:25:09.954+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13903691","id":"13903691","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"body":"It was not that bad as it first looked. I've used task ID for equality of task but index builder resets ID (even not assigns ID for index metadata updator). Changed not to reset ID and seemed working good. I'll update the patch shortly after confirming that.\n{noformat}\n  Stage-1 is a root stage\n  Stage-0 depends on stages: Stage-1\n  Stage-2 depends on stages: Stage-0\n  Stage-3 depends on stages: Stage-1\n  Stage-16 depends on stages: Stage-1, Stage-5, Stage-9, Stage-13\n  Stage-5 is a root stage\n  Stage-4 depends on stages: Stage-5\n  Stage-6 depends on stages: Stage-4\n  Stage-7 depends on stages: Stage-5\n  Stage-9 is a root stage\n  Stage-8 depends on stages: Stage-9\n  Stage-10 depends on stages: Stage-8\n  Stage-11 depends on stages: Stage-9\n  Stage-13 is a root stage\n  Stage-12 depends on stages: Stage-13\n  Stage-14 depends on stages: Stage-12\n  Stage-15 depends on stages: Stage-13\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-02-18T02:01:33.776+0000","updated":"2014-02-18T02:01:33.776+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13904072","id":"13904072","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 no tests executed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12629459/HIVE-6403.5.patch.txt\n\nTest results: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1378/testReport\nConsole output: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1378/console\n\nMessages:\n{noformat}\n**** This message was trimmed, see log for full details ****\nReverted 'ql/src/test/results/clientpositive/decimal_5.q.out'\nReverted 'ql/src/test/results/clientpositive/bucketmapjoin8.q.out'\nReverted 'ql/src/test/results/clientpositive/progress_1.q.out'\nReverted 'ql/src/test/results/clientpositive/nestedvirtual.q.out'\nReverted 'ql/src/test/results/clientpositive/parallel.q.out'\nReverted 'ql/src/test/results/clientpositive/convert_enum_to_string.q.out'\nReverted 'ql/src/test/results/clientpositive/annotate_stats_filter.q.out'\nReverted 'ql/src/test/results/clientpositive/bucketmapjoin12.q.out'\nReverted 'ql/src/test/results/clientpositive/groupby8_map_skew.q.out'\nReverted 'ql/src/test/results/clientpositive/varchar_1.q.out'\nReverted 'ql/src/test/results/clientpositive/insert1_overwrite_partitions.q.out'\nReverted 'ql/src/test/results/clientpositive/join27.q.out'\nReverted 'ql/src/test/results/clientpositive/load_file_with_space_in_the_name.q.out'\nReverted 'ql/src/test/results/clientpositive/load_dyn_part11.q.out'\nReverted 'ql/src/test/results/clientpositive/input4.q.out'\nReverted 'ql/src/test/results/clientpositive/stats6.q.out'\nReverted 'ql/src/test/results/clientpositive/leadlag_queries.q.out'\nReverted 'ql/src/test/results/clientpositive/rename_partition_location.q.out'\nReverted 'ql/src/test/results/clientpositive/udf_translate.q.out'\nReverted 'ql/src/test/results/clientpositive/union12.q.out'\nReverted 'ql/src/test/results/clientpositive/index_compact_2.q.out'\nReverted 'ql/src/test/results/clientpositive/udf2.q.out'\nReverted 'ql/src/test/results/clientpositive/sort_merge_join_desc_1.q.out'\nReverted 'ql/src/test/results/clientpositive/windowing_udaf.q.out'\nReverted 'ql/src/test/results/clientpositive/smb_mapjoin_17.q.out'\nReverted 'ql/src/test/results/clientpositive/ppd_repeated_alias.q.out'\nReverted 'ql/src/test/results/clientpositive/join36.q.out'\nReverted 'ql/src/test/results/clientpositive/avro_joins.q.out'\nReverted 'ql/src/test/results/clientpositive/drop_with_concurrency.q.out'\nReverted 'ql/src/test/results/clientpositive/lock2.q.out'\nReverted 'ql/src/test/results/clientpositive/input_part5.q.out'\nReverted 'ql/src/test/results/clientpositive/bucketmapjoin3.q.out'\nReverted 'ql/src/test/results/clientpositive/insert_into2.q.out'\nReverted 'ql/src/test/results/clientpositive/alter_skewed_table.q.out'\nReverted 'ql/src/test/results/clientpositive/groupby_grouping_sets2.q.out'\nReverted 'ql/src/test/results/clientpositive/timestamp_1.q.out'\nReverted 'ql/src/test/results/clientpositive/partition_vs_table_metadata.q.out'\nReverted 'ql/src/test/results/clientpositive/groupby12.q.out'\nReverted 'ql/src/test/results/clientpositive/groupby1_limit.q.out'\nReverted 'ql/src/test/results/clientpositive/cast1.q.out'\nReverted 'ql/src/test/results/clientpositive/input16_cc.q.out'\nReverted 'ql/src/test/results/clientpositive/annotate_stats_part.q.out'\nReverted 'ql/src/test/results/clientpositive/partition_wise_fileformat15.q.out'\nReverted 'ql/src/test/results/clientpositive/stats1.q.out'\nReverted 'ql/src/test/results/clientpositive/symlink_text_input_format.q.out'\nReverted 'ql/src/test/results/clientpositive/ptf_register_tblfn.q.out'\nReverted 'ql/src/test/results/clientpositive/ddltime.q.out'\nReverted 'ql/src/test/results/clientpositive/uniquejoin.q.out'\nReverted 'ql/src/test/results/clientpositive/ppd_constant_expr.q.out'\nReverted 'ql/src/test/results/clientpositive/union30.q.out'\nReverted 'ql/src/test/results/clientpositive/timestamp_null.q.out'\nReverted 'ql/src/test/results/clientpositive/combine1.q.out'\nReverted 'ql/src/test/results/clientpositive/avro_sanity_test.q.out'\nReverted 'ql/src/test/results/clientpositive/exim_06_one_part.q.out'\nReverted 'ql/src/test/results/clientpositive/groupby_multi_insert_common_distinct.q.out'\nReverted 'ql/src/test/results/clientpositive/groupby2_noskew.q.out'\nReverted 'ql/src/test/results/clientpositive/index_stale.q.out'\nReverted 'ql/src/test/results/clientpositive/vectorized_timestamp_funcs.q.out'\nReverted 'ql/src/test/results/clientpositive/smb_mapjoin_12.q.out'\nReverted 'ql/src/test/results/clientpositive/metadataonly1.q.out'\nReverted 'ql/src/test/results/clientpositive/join31.q.out'\nReverted 'ql/src/test/results/clientpositive/concatenate_inherit_table_location.q.out'\nReverted 'ql/src/test/results/clientpositive/alter_rename_partition_authorization.q.out'\nReverted 'ql/src/test/results/clientpositive/rcfile_toleratecorruptions.q.out'\nReverted 'ql/src/test/results/clientpositive/auto_join7.q.out'\nReverted 'ql/src/test/results/clientpositive/nonreserved_keywords_insert_into1.q.out'\nReverted 'ql/src/test/results/clientpositive/bucketsortoptimize_insert_7.q.out'\nReverted 'ql/src/test/results/clientpositive/tablename_with_select.q.out'\nReverted 'ql/src/test/results/clientpositive/exim_04_all_part.q.out'\nReverted 'ql/src/test/results/clientpositive/join32_lessSize.q.out'\nReverted 'ql/src/test/results/clientpositive/correlationoptimizer11.q.out'\nReverted 'ql/src/test/results/clientpositive/multiMapJoin1.q.out'\nReverted 'ql/src/test/results/clientpositive/alter3.q.out'\nReverted 'ql/src/test/results/clientpositive/smb_mapjoin_21.q.out'\nReverted 'ql/src/test/results/clientpositive/exim_23_import_part_authsuccess.q.out'\nReverted 'ql/src/test/results/clientpositive/groupby4_map_skew.q.out'\nReverted 'ql/src/test/results/clientpositive/exim_01_nonpart.q.out'\nReverted 'ql/src/test/results/clientpositive/auto_sortmerge_join_7.q.out'\nReverted 'ql/src/test/results/clientpositive/groupby7_noskew.q.out'\nReverted 'ql/src/test/results/clientpositive/test_boolean_whereclause.q.out'\nReverted 'ql/src/test/results/clientpositive/drop_index_removes_partition_dirs.q.out'\nReverted 'ql/src/test/results/clientpositive/partition_wise_fileformat10.q.out'\nReverted 'ql/src/test/results/clientpositive/compute_stats_long.q.out'\nReverted 'ql/src/test/results/clientpositive/inputddl7.q.out'\nReverted 'ql/src/test/results/clientpositive/join5.q.out'\nReverted 'ql/src/test/results/clientpositive/describe_syntax.q.out'\nReverted 'ql/src/test/results/clientpositive/add_part_multiple.q.out'\nReverted 'ql/src/test/results/clientpositive/external_table_with_space_in_location_path.q.out'\nReverted 'ql/src/test/results/clientpositive/fileformat_text.q.out'\nReverted 'ql/src/test/results/clientpositive/char_udf1.q.out'\nReverted 'ql/src/test/results/clientpositive/date_1.q.out'\nReverted 'ql/src/test/results/clientpositive/exim_08_nonpart_rename.q.out'\nReverted 'ql/src/test/results/clientpositive/list_bucket_dml_10.q.out'\nReverted 'ql/src/test/results/clientpositive/windowing.q.out'\nReverted 'ql/src/test/results/clientpositive/auto_join2.q.out'\nReverted 'ql/src/test/results/clientpositive/udf_reverse.q.out'\nReverted 'ql/src/test/results/clientpositive/bucketsortoptimize_insert_2.q.out'\nReverted 'ql/src/test/results/clientpositive/union3.q.out'\nReverted 'ql/src/test/results/clientpositive/show_create_table_partitioned.q.out'\nReverted 'ql/src/test/results/clientpositive/input1_limit.q.out'\nReverted 'ql/src/test/results/clientpositive/groupby8.q.out'\nReverted 'ql/src/test/results/clientpositive/scriptfile1.q.out'\nReverted 'ql/src/test/results/clientpositive/groupby_sort_9.q.out'\nReverted 'ql/src/test/results/clientpositive/groupby_grouping_id1.q.out'\nReverted 'ql/src/test/results/clientpositive/bucketmapjoin_negative2.q.out'\nReverted 'ql/src/test/results/clientpositive/auto_sortmerge_join_2.q.out'\nReverted 'ql/src/test/results/clientpositive/alter_varchar2.q.out'\nReverted 'ql/src/test/results/clientpositive/skewjoinopt6.q.out'\nReverted 'ql/src/test/results/clientpositive/load_dyn_part6.q.out'\nReverted 'ql/src/test/results/clientpositive/inputddl2.q.out'\nReverted 'ql/src/test/results/clientpositive/drop_partitions_filter2.q.out'\nReverted 'ql/src/test/results/clientpositive/sample7.q.out'\nReverted 'ql/src/test/results/clientpositive/rcfile_union.q.out'\nReverted 'ql/src/test/results/clientpositive/nullinput2.q.out'\nReverted 'ql/src/test/results/clientpositive/exim_10_external_managed.q.out'\nReverted 'ql/src/test/results/clientpositive/ptf_general_queries.q.out'\nReverted 'ql/src/test/results/clientpositive/create_escape.q.out'\nReverted 'ql/src/test/results/clientpositive/exim_07_all_part_over_nonoverlap.q.out'\nReverted 'ql/src/test/results/clientpositive/annotate_stats_limit.q.out'\nReverted 'ql/src/test/results/clientpositive/alter_char2.q.out'\nReverted 'ql/src/test/results/clientpositive/input_testsequencefile.q.out'\nReverted 'ql/src/test/results/clientpositive/join_view.q.out'\nReverted 'ql/src/test/results/clientpositive/udf_get_json_object.q.out'\nReverted 'ql/src/test/results/clientpositive/input_testxpath.q.out'\nReverted 'ql/src/test/results/clientpositive/input19.q.out'\nReverted 'ql/src/test/results/clientpositive/bucket_map_join_2.q.out'\nReverted 'ql/src/test/results/clientpositive/groupby3.q.out'\nReverted 'ql/src/test/results/clientpositive/ba_table3.q.out'\nReverted 'ql/src/test/results/clientpositive/join_empty.q.out'\nReverted 'ql/src/test/results/clientpositive/windowing_rank.q.out'\nReverted 'ql/src/test/results/clientpositive/groupby_sort_4.q.out'\nReverted 'ql/src/test/results/clientpositive/parquet_partitioned.q.out'\nReverted 'ql/src/test/results/clientpositive/reduce_deduplicate_exclude_gby.q.out'\nReverted 'ql/src/test/results/clientpositive/skewjoinopt18.q.out'\nReverted 'ql/src/test/results/clientpositive/archive_excludeHadoop20.q.out'\nReverted 'ql/src/test/results/clientpositive/skewjoinopt1.q.out'\nReverted 'ql/src/test/results/clientpositive/load_dyn_part1.q.out'\nReverted 'ql/src/test/results/clientpositive/sample2.q.out'\nReverted 'ql/src/test/results/clientpositive/exim_03_nonpart_over_compat.q.out'\nReverted 'ql/src/test/results/clientpositive/stats16.q.out'\nReverted 'ql/src/test/results/clientpositive/input28.q.out'\nReverted 'ql/src/test/results/clientpositive/smb_mapjoin_4.q.out'\nReverted 'ql/src/test/results/clientpositive/auto_sortmerge_join_14.q.out'\nReverted 'ql/src/test/results/clientpositive/disable_merge_for_bucketing.q.out'\nReverted 'ql/src/test/results/clientpositive/ppd_union_view.q.out'\nReverted 'ql/src/test/results/clientpositive/input_testxpath2.q.out'\nReverted 'ql/src/test/results/clientpositive/create_like_tbl_props.q.out'\nReverted 'ql/src/test/results/clientpositive/groupby7_map_multi_single_reducer.q.out'\nReverted 'ql/src/test/results/clientpositive/partition_wise_fileformat9.q.out'\nReverted 'ql/src/test/results/clientpositive/truncate_column.q.out'\nReverted 'ql/src/test/results/clientpositive/mergejoins.q.out'\nReverted 'ql/src/test/results/clientpositive/groupby_complex_types.q.out'\nReverted 'ql/src/test/results/clientpositive/input14.q.out'\nReverted 'ql/src/test/results/clientpositive/bucketcontext_5.q.out'\nReverted 'ql/src/test/results/clientpositive/input37.q.out'\nReverted 'ql/src/test/results/clientpositive/binary_table_colserde.q.out'\nReverted 'ql/src/test/results/clientpositive/skewjoinopt13.q.out'\nReverted 'ql/src/test/results/clientpositive/describe_comment_nonascii.q.out'\nReverted 'ql/src/test/results/clientpositive/mapreduce4.q.out'\nReverted 'ql/src/test/results/clientpositive/orc_predicate_pushdown.q.out'\nReverted 'ql/src/test/results/clientpositive/nullscript.q.out'\nReverted 'ql/src/test/results/clientpositive/stats11.q.out'\nReverted 'ql/src/test/results/clientpositive/bucket5.q.out'\nReverted 'ql/src/test/results/clientpositive/alter_merge_stats.q.out'\nReverted 'ql/src/test/results/clientpositive/udf_round_2.q.out'\nReverted 'ql/src/test/results/clientpositive/filter_numeric.q.out'\nReverted 'ql/src/test/results/clientpositive/input46.q.out'\nReverted 'ql/src/test/queries/clientnegative/authorization_addpartition.q'\nReverted 'ql/src/test/queries/clientnegative/authorization_droppartition.q'\nReverted 'ql/src/java/org/apache/hadoop/hive/ql/plan/HiveOperation.java'\nReverted 'ql/src/java/org/apache/hadoop/hive/ql/parse/LoadSemanticAnalyzer.java'\nReverted 'ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java'\nReverted 'ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java'\nReverted 'ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java'\nReverted 'ql/src/java/org/apache/hadoop/hive/ql/hooks/ReadEntity.java'\nReverted 'ql/src/java/org/apache/hadoop/hive/ql/hooks/WriteEntity.java'\nReverted 'ql/src/java/org/apache/hadoop/hive/ql/security/authorization/plugin/sqlstd/SQLAuthorizationUtils.java'\nReverted 'ql/src/java/org/apache/hadoop/hive/ql/security/authorization/plugin/sqlstd/Operation2Privilege.java'\nReverted 'ql/src/java/org/apache/hadoop/hive/ql/security/authorization/plugin/sqlstd/RequiredPrivileges.java'\nReverted 'ql/src/java/org/apache/hadoop/hive/ql/security/authorization/plugin/sqlstd/SQLStdHiveAuthorizationValidator.java'\nReverted 'ql/src/java/org/apache/hadoop/hive/ql/security/SessionStateConfigUserAuthenticator.java'\nReverted 'ql/src/java/org/apache/hadoop/hive/ql/Driver.java'\n++ awk '{print $2}'\n++ egrep -v '^X|^Performing status on external'\n++ svn status --no-ignore\n+ rm -rf target datanucleus.log ant/target shims/target shims/0.20/target shims/0.20S/target shims/0.23/target shims/aggregator/target shims/common/target shims/common-secure/target packaging/target hbase-handler/target testutils/target jdbc/target metastore/target itests/target itests/hcatalog-unit/target itests/test-serde/target itests/qtest/target itests/hive-unit/target itests/custom-serde/target itests/util/target hcatalog/target hcatalog/storage-handlers/hbase/target hcatalog/server-extensions/target hcatalog/core/target hcatalog/webhcat/svr/target hcatalog/webhcat/java-client/target hcatalog/hcatalog-pig-adapter/target hwi/target common/target common/src/gen service/target contrib/target serde/target beeline/target odbc/target cli/target ql/dependency-reduced-pom.xml ql/target ql/src/test/results/clientnegative/authorization_uri_create_table_ext.q.out ql/src/test/results/clientnegative/authorization_uri_insert.q.out ql/src/test/results/clientnegative/authorization_uri_load_data.q.out ql/src/test/results/clientnegative/authorization_uri_insert_local.q.out ql/src/test/results/clientnegative/authorization_uri_create_table1.q.out ql/src/test/results/clientnegative/authorization_uri_altertab_setloc.q.out ql/src/test/results/clientnegative/authorization_uri_createdb.q.out ql/src/test/results/clientnegative/authorization_uri_index.q.out ql/src/test/results/clientnegative/authorization_uri_add_partition.q.out ql/src/test/results/clientnegative/authorization_uri_alterpart_loc.q.out ql/src/test/queries/clientnegative/authorization_uri_load_data.q ql/src/test/queries/clientnegative/authorization_uri_createdb.q ql/src/test/queries/clientnegative/authorization_uri_alterpart_loc.q ql/src/test/queries/clientnegative/authorization_uri_insert_local.q ql/src/test/queries/clientnegative/authorization_uri_add_partition.q ql/src/test/queries/clientnegative/authorization_uri_altertab_setloc.q ql/src/test/queries/clientnegative/authorization_uri_insert.q ql/src/test/queries/clientnegative/authorization_uri_index.q ql/src/test/queries/clientnegative/authorization_uri_create_table_ext.q ql/src/test/queries/clientnegative/authorization_uri_create_table1.q ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java.orig ql/src/java/org/apache/hadoop/hive/ql/security/authorization/plugin/sqlstd/Operation2Privilege.java.orig\n+ svn update\n\nFetching external item into 'hcatalog/src/test/e2e/harness'\nExternal at revision 1569331.\n\nAt revision 1569331.\n+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh\n+ patchFilePath=/data/hive-ptest/working/scratch/build.patch\n+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]\n+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh\n+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch\nThe patch does not appear to apply with p0, p1, or p2\n+ exit 1\n'\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12629459","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2014-02-18T14:10:14.358+0000","updated":"2014-02-18T14:10:14.358+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13904409","id":"13904409","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"body":"+1\nwill checkin once tests pass.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhbutani","name":"rhbutani","key":"rhbutani","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Harish Butani","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-02-18T18:59:52.169+0000","updated":"2014-02-18T18:59:52.169+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13904968","id":"13904968","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"body":"HIVE-6037 is reverted. I've kicked test. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-02-19T01:36:45.814+0000","updated":"2014-02-19T01:36:45.814+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13921867","id":"13921867","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"body":"Kick test","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-03-06T01:47:10.705+0000","updated":"2014-03-06T01:47:10.705+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12694413/comment/13924775","id":"13924775","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:green}Overall{color}: +1 all checks pass\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12633001/HIVE-6403.6.patch.txt\n\n{color:green}SUCCESS:{color} +1 5373 tests passed\n\nTest results: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1655/testReport\nConsole output: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1655/console\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12633001","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2014-03-08T08:46:56.182+0000","updated":"2014-03-08T08:46:56.182+0000"}],"maxResults":22,"total":22,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-6403/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1s9m7:"}}