{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12921550","self":"https://issues.apache.org/jira/rest/api/2/issue/12921550","key":"HIVE-12664","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12332641","id":"12332641","description":"Hive 2.0.0","name":"2.0.0","archived":false,"released":true,"releaseDate":"2016-02-15"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-12-14T05:02:45.756+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jan 08 01:42:40 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_15463_*|*_3_*:*_1_*:*_148628_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_2121839476","customfield_12312321":null,"resolutiondate":"2016-01-07T16:28:36.217+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-12664/watchers","watchCount":2,"isWatching":false},"created":"2015-12-14T03:01:52.731+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329557","id":"12329557","name":"1.1.1","archived":false,"released":true,"releaseDate":"2015-05-20"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12332384","id":"12332384","name":"1.2.1","archived":false,"released":true,"releaseDate":"2015-06-26"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-02-16T23:51:10.408+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12325007","id":"12325007","name":"Hive"}],"timeoriginalestimate":null,"description":"The optimisation check for reduce deduplication only checks the first child node for join -and the check itself also contains a major bug- causing ArrayOutOfBoundException no matter what.\n\nSample data table form:\n||time||user||host||path||referer||code||agent||size||method||\n|int|string|string|string|string|bigint|string|bigint|string|\n\nSample query\n{code:sql}\nSELECT \n  t1.host,\n  COUNT(DISTINCT t1.`date`) AS login_count,\n  MAX(t2.code) AS code,\n  unix_timestamp() AS time\nFROM (\n    SELECT \n      HOST,\n      MIN(time) AS DATE\n    FROM\n      www_access\n    WHERE\n      HOST IS NOT NULL\n    GROUP BY\n      HOST\n  ) t1\nJOIN (\n    SELECT \n      HOST,\n      MIN(time) AS code\n    FROM\n      www_access\n    WHERE\n      HOST IS NOT NULL\n    GROUP BY\n      HOST\n  ) t2\n  ON t1.host = t2.host\nGROUP BY\n  t1.host\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12778955","id":"12778955","filename":"HIVE-12664.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-12-22T01:18:19.662+0000","size":2601,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12778955/HIVE-12664.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12780451","id":"12780451","filename":"HIVE-12664.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"created":"2016-01-05T02:00:55.977+0000","size":2608,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12780451/HIVE-12664.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12777384","id":"12777384","filename":"HIVE-12664.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-12-14T03:03:27.230+0000","size":2608,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12777384/HIVE-12664.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12777638","id":"12777638","filename":"HIVE-12664-1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-12-15T01:45:34.738+0000","size":2601,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12777638/HIVE-12664-1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12780449","id":"12780449","filename":"HIVE-12664-2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"created":"2016-01-05T01:58:41.375+0000","size":2608,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12780449/HIVE-12664-2.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Bug in reduce deduplication optimization causing ArrayOutOfBoundException","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15055350","id":"15055350","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"body":"Attached patch that fixes the bug in the check itself and introduces checking of all child nodes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-12-14T03:04:36.811+0000","updated":"2015-12-14T03:04:36.811+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15055415","id":"15055415","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12777384/HIVE-12664.patch\n\n{color:red}ERROR:{color} -1 due to no test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 33 failed/errored test(s), 9895 tests executed\n*Failed tests:*\n{noformat}\nTestHWISessionManager - did not produce a TEST-*.xml file\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_order2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union9\norg.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver_encryption_insert_partition_dynamic\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_filter_join_breaktask2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby10\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby5_noskew\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_cond_pushdown_unqual4\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_merge_multi_expressions\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_semijoin\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_skewjoinopt14\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_smb_mapjoin_11\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_stats0\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_stats10\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_timestamp_comparison\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_union_remove_2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_16\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_not\norg.apache.hadoop.hive.metastore.TestHiveMetaStorePartitionSpecs.testFetchingPartitionsWithDifferentSchemas\norg.apache.hadoop.hive.metastore.TestHiveMetaStorePartitionSpecs.testGetPartitionSpecs_WithAndWithoutPartitionGrouping\norg.apache.hive.jdbc.TestSSL.testSSLVersion\norg.apache.hive.jdbc.miniHS2.TestHs2Metrics.testMetrics\norg.apache.hive.spark.client.TestSparkClient.testAddJarsAndFiles\norg.apache.hive.spark.client.TestSparkClient.testCounters\norg.apache.hive.spark.client.TestSparkClient.testErrorJob\norg.apache.hive.spark.client.TestSparkClient.testJobSubmission\norg.apache.hive.spark.client.TestSparkClient.testMetricsCollection\norg.apache.hive.spark.client.TestSparkClient.testRemoteClient\norg.apache.hive.spark.client.TestSparkClient.testSimpleSparkJob\norg.apache.hive.spark.client.TestSparkClient.testSyncRpc\norg.apache.tez.dag.app.rm.TestLlapTaskSchedulerService.testSimpleLocalAllocation\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6343/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6343/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-6343/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 33 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12777384 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-12-14T05:02:45.756+0000","updated":"2015-12-14T05:02:45.756+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15057158","id":"15057158","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"body":"Original patch wasn't against trunk... sorry about that.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-12-15T01:45:34.743+0000","updated":"2015-12-15T01:45:34.743+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15059401","id":"15059401","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"body":"[~gopalv] could you please re-run Jenkins on the new patch? No tests should be needed for this patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-12-16T02:56:33.506+0000","updated":"2015-12-16T02:56:33.506+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15065961","id":"15065961","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"body":"[~gopalv], while I know this season is busy I would really appreciate it if you could re-kick Hive-QA for the new patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-12-21T01:11:44.506+0000","updated":"2015-12-21T01:11:44.506+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15067077","id":"15067077","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"[~johang] You need to name your patch per https://cwiki.apache.org/confluence/display/Hive/Hive+PreCommit+Patch+Testing to trigger Hive QA run. Can you also add a q test to highlight how to trigger this bug?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-21T21:22:03.512+0000","updated":"2015-12-21T21:22:03.512+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15067081","id":"15067081","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Also you may create a RB entry on https://reviews.apache.org/r/new/ to ease review.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-21T21:24:54.110+0000","updated":"2015-12-21T21:24:54.110+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15067482","id":"15067482","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"body":"Thank you [~ashutoshc], I re-uploaded the the patch with correct naming and edited the description to include test query info","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-12-22T03:16:07.471+0000","updated":"2015-12-22T03:16:07.471+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15067507","id":"15067507","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"body":"Thanks for the advice, I didn't know about this review board before. I submitted [https://reviews.apache.org/r/41628/]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-12-22T03:50:06.055+0000","updated":"2015-12-22T03:50:06.055+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15068569","id":"15068569","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Can you paste stack trace of error message you got? I tried to repro this on master but couldn't.  Got following explain plan:\n{code}\nSTAGE DEPENDENCIES:\n  Stage-1 is a root stage\n  Stage-2 depends on stages: Stage-1, Stage-4\n  Stage-3 depends on stages: Stage-2\n  Stage-4 is a root stage\n  Stage-0 depends on stages: Stage-3\n\nSTAGE PLANS:\n  Stage: Stage-1\n    Map Reduce\n      Map Operator Tree:\n          TableScan\n            alias: www_access\n            filterExpr: host is not null (type: boolean)\n            Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n            Filter Operator\n              predicate: host is not null (type: boolean)\n              Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n              Select Operator\n                expressions: host (type: string), time (type: int)\n                outputColumnNames: host, time\n                Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n                Group By Operator\n                  aggregations: min(time)\n                  keys: host (type: string)\n                  mode: hash\n                  outputColumnNames: _col0, _col1\n                  Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n                  Reduce Output Operator\n                    key expressions: _col0 (type: string)\n                    sort order: +\n                    Map-reduce partition columns: _col0 (type: string)\n                    Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n                    value expressions: _col1 (type: int)\n      Reduce Operator Tree:\n        Group By Operator\n          aggregations: min(VALUE._col0)\n          keys: KEY._col0 (type: string)\n          mode: mergepartial\n          outputColumnNames: _col0, _col1\n          Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n          File Output Operator\n            compressed: false\n            table:\n                input format: org.apache.hadoop.mapred.SequenceFileInputFormat\n                output format: org.apache.hadoop.hive.ql.io.HiveSequenceFileOutputFormat\n                serde: org.apache.hadoop.hive.serde2.lazybinary.LazyBinarySerDe\n\n  Stage: Stage-2\n    Map Reduce\n      Map Operator Tree:\n          TableScan\n            Reduce Output Operator\n              key expressions: _col0 (type: string)\n              sort order: +\n              Map-reduce partition columns: _col0 (type: string)\n              Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n              value expressions: _col1 (type: int)\n          TableScan\n            Reduce Output Operator\n              key expressions: _col0 (type: string)\n              sort order: +\n              Map-reduce partition columns: _col0 (type: string)\n              Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n              value expressions: _col1 (type: int)\n      Reduce Operator Tree:\n        Join Operator\n          condition map:\n               Inner Join 0 to 1\n          keys:\n            0 _col0 (type: string)\n            1 _col0 (type: string)\n          outputColumnNames: _col0, _col1, _col3\n          Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n          Group By Operator\n            aggregations: count(DISTINCT _col1), max(_col3)\n            keys: _col0 (type: string), _col1 (type: int)\n            mode: hash\n            outputColumnNames: _col0, _col1, _col2, _col3\n            Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n            File Output Operator\n              compressed: false\n              table:\n                  input format: org.apache.hadoop.mapred.SequenceFileInputFormat\n                  output format: org.apache.hadoop.hive.ql.io.HiveSequenceFileOutputFormat\n                  serde: org.apache.hadoop.hive.serde2.lazybinary.LazyBinarySerDe\n\n  Stage: Stage-3\n    Map Reduce\n      Map Operator Tree:\n          TableScan\n            Reduce Output Operator\n              key expressions: _col0 (type: string), _col1 (type: int)\n              sort order: ++\n              Map-reduce partition columns: _col0 (type: string)\n              Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n              value expressions: _col3 (type: int)\n      Reduce Operator Tree:\n        Group By Operator\n          aggregations: count(DISTINCT KEY._col1:0._col0), max(VALUE._col1)\n          keys: KEY._col0 (type: string)\n          mode: mergepartial\n          outputColumnNames: _col0, _col1, _col2\n          Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n          Select Operator\n            expressions: _col0 (type: string), _col1 (type: bigint), _col2 (type: int), 1450811390 (type: bigint)\n            outputColumnNames: _col0, _col1, _col2, _col3\n            Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n            File Output Operator\n              compressed: false\n              Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n              table:\n                  input format: org.apache.hadoop.mapred.TextInputFormat\n                  output format: org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat\n                  serde: org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe\n\n  Stage: Stage-4\n    Map Reduce\n      Map Operator Tree:\n          TableScan\n            alias: www_access\n            filterExpr: host is not null (type: boolean)\n            Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n            Filter Operator\n              predicate: host is not null (type: boolean)\n              Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n              Select Operator\n                expressions: host (type: string), time (type: int)\n                outputColumnNames: host, time\n                Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n                Group By Operator\n                  aggregations: min(time)\n                  keys: host (type: string)\n                  mode: hash\n                  outputColumnNames: _col0, _col1\n                  Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n                  Reduce Output Operator\n                    key expressions: _col0 (type: string)\n                    sort order: +\n                    Map-reduce partition columns: _col0 (type: string)\n                    Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n                    value expressions: _col1 (type: int)\n      Reduce Operator Tree:\n        Group By Operator\n          aggregations: min(VALUE._col0)\n          keys: KEY._col0 (type: string)\n          mode: mergepartial\n          outputColumnNames: _col0, _col1\n          Statistics: Num rows: 1 Data size: 0 Basic stats: PARTIAL Column stats: NONE\n          File Output Operator\n            compressed: false\n            table:\n                input format: org.apache.hadoop.mapred.SequenceFileInputFormat\n                output format: org.apache.hadoop.hive.ql.io.HiveSequenceFileOutputFormat\n                serde: org.apache.hadoop.hive.serde2.lazybinary.LazyBinarySerDe\n\n  Stage: Stage-0\n    Fetch Operator\n      limit: -1\n      Processor Tree:\n        ListSink\n\n\n{code}\n\nWere there any other config settings needed to trigger bug.\nLogic of checking just only one branch of join doesn't look correct.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-22T19:12:14.468+0000","updated":"2015-12-22T19:12:14.468+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15068641","id":"15068641","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12778955/HIVE-12664.1.patch\n\n{color:red}ERROR:{color} -1 due to build exiting with an error\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6447/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6447/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-6447/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nTests exited with: NonZeroExitCodeException\nCommand 'bash /data/hive-ptest/working/scratch/source-prep.sh' failed with exit status 1 and output '+ [[ -n /usr/java/jdk1.7.0_45-cloudera ]]\n+ export JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera\n+ JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera\n+ export PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.7.0_45-cloudera/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin\n+ PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.7.0_45-cloudera/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin\n+ export 'ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m '\n+ ANT_OPTS='-Xmx1g -XX:MaxPermSize=256m '\n+ export 'M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128'\n+ M2_OPTS='-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128'\n+ cd /data/hive-ptest/working/\n+ tee /data/hive-ptest/logs/PreCommit-HIVE-TRUNK-Build-6447/source-prep.txt\n+ [[ false == \\t\\r\\u\\e ]]\n+ mkdir -p maven ivy\n+ [[ git = \\s\\v\\n ]]\n+ [[ git = \\g\\i\\t ]]\n+ [[ -z master ]]\n+ [[ -d apache-github-source-source ]]\n+ [[ ! -d apache-github-source-source/.git ]]\n+ [[ ! -d apache-github-source-source ]]\n+ cd apache-github-source-source\n+ git fetch origin\nFrom https://github.com/apache/hive\n   4f939f5..45ae30c  master     -> origin/master\n+ git reset --hard HEAD\nHEAD is now at 4f939f5 HIVE-12713: Miscellaneous improvements in driver compile and execute logging (Chaoyu Tang, reviewed by Xuefu Zhang)\n+ git clean -f -d\n+ git checkout master\nAlready on 'master'\nYour branch is behind 'origin/master' by 1 commit, and can be fast-forwarded.\n+ git reset --hard origin/master\nHEAD is now at 45ae30c HIVE-12667: Proper fix for HIVE-12473 (Gunther Hagleitner, reviewed by Vikram Dixit K)\n+ git merge --ff-only origin/master\nAlready up-to-date.\n+ git gc\n+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh\n+ patchFilePath=/data/hive-ptest/working/scratch/build.patch\n+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]\n+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh\n+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch\nThe patch does not appear to apply with p0, p1, or p2\n+ exit 1\n'\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12778955 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-12-22T19:54:03.184+0000","updated":"2015-12-22T19:54:03.184+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15080617","id":"15080617","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"body":"[~ashutoshc], sorry for the late response but bellow is a stack trace:\n{code}\n15/12/22 03:09:13 ERROR ql.Driver: FAILED: IndexOutOfBoundsException Index: 1, Size: 1\njava.lang.IndexOutOfBoundsException: Index: 1, Size: 1\n\tat java.util.ArrayList.rangeCheck(ArrayList.java:635)\n\tat java.util.ArrayList.get(ArrayList.java:411)\n\tat org.apache.hadoop.hive.ql.optimizer.correlation.ReduceSinkDeDuplication$AbsctractReducerReducerProc.merge(ReduceSinkDeDuplication.java:212)\n\tat org.apache.hadoop.hive.ql.optimizer.correlation.ReduceSinkDeDuplication$JoinReducerProc.process(ReduceSinkDeDuplication.java:547)\n\tat org.apache.hadoop.hive.ql.optimizer.correlation.ReduceSinkDeDuplication$AbsctractReducerReducerProc.process(ReduceSinkDeDuplication.java:164)\n\tat org.apache.hadoop.hive.ql.lib.DefaultRuleDispatcher.dispatch(DefaultRuleDispatcher.java:90)\n\tat org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.dispatchAndReturn(DefaultGraphWalker.java:94)\n\tat org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.dispatch(DefaultGraphWalker.java:78)\n\tat org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.walk(DefaultGraphWalker.java:132)\n\tat org.apache.hadoop.hive.ql.lib.DefaultGraphWalker.startWalking(DefaultGraphWalker.java:109)\n\tat org.apache.hadoop.hive.ql.optimizer.correlation.ReduceSinkDeDuplication.transform(ReduceSinkDeDuplication.java:107)\n\tat org.apache.hadoop.hive.ql.optimizer.Optimizer.optimize(Optimizer.java:146)\n\tat org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:9423)\n\tat org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:327)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:427)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:323)\n\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:980)\n\tat org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1045)\n\tat org.apache.hadoop.hive.ql.Driver.run(Driver.java:916)\n\tat org.apache.hadoop.hive.ql.Driver.run(Driver.java:906)\n\tat com.treasure_data.hadoop.hive.runner.QueryRunner.processQueryCmd(QueryRunner.java:453)\n\tat com.treasure_data.hadoop.hive.runner.QueryRunner.processCmd(QueryRunner.java:394)\n\tat org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:423)\n\tat org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:359)\n\tat com.treasure_data.hadoop.hive.runner.QueryRunner.run(QueryRunner.java:313)\n\tat com.treasure_data.hadoop.hive.runner.QueryRunner$1.run(QueryRunner.java:192)\n\tat com.treasure_data.hadoop.hive.runner.QueryRunner$1.run(QueryRunner.java:190)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:415)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1594)\n\tat com.treasure_data.hadoop.util.TDUtil.doAs(TDUtil.java:226)\n\tat com.treasure_data.hadoop.hive.runner.QueryRunner.main(QueryRunner.java:190)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat org.apache.hadoop.util.RunJar.main(RunJar.java:212)\n{code}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"created":"2016-01-04T01:57:01.834+0000","updated":"2016-01-04T01:57:01.834+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15082094","id":"15082094","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"[~johang] Seems like you are not on master branch. your posted stacktrace doesnt match with master. Nor provided patch applies. You need to rebase patch for master. Also, if you can provide a query which reproduces issue on master that will be great.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-01-05T00:32:58.755+0000","updated":"2016-01-05T00:32:58.755+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15082224","id":"15082224","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"body":"[~ashutoshc], sorry for waisting you time. You are right that I was working on a old snapshot of master and I am not able to reproduce it on master anymore... I do however think it is strange to only check one branch of the join and suspect it will cause issues in the future again so I attached an updated patch, so if you still think it qualifies please have a look.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"created":"2016-01-05T02:05:18.869+0000","updated":"2016-01-05T02:05:18.869+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15084590","id":"15084590","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12780451/HIVE-12664.2.patch\n\n{color:red}ERROR:{color} -1 due to no test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 15 failed/errored test(s), 9997 tests executed\n*Failed tests:*\n{noformat}\nTestHWISessionManager - did not produce a TEST-*.xml file\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_order2\norg.apache.hadoop.hive.ql.exec.spark.session.TestSparkSessionManagerImpl.testMultiSessionMultipleUse\norg.apache.hadoop.hive.ql.exec.spark.session.TestSparkSessionManagerImpl.testSingleSessionMultipleUse\norg.apache.hadoop.hive.ql.security.authorization.plugin.TestHiveOperationType.checkHiveOperationTypeMatch\norg.apache.hive.jdbc.TestSSL.testSSLVersion\norg.apache.hive.spark.client.TestSparkClient.testAddJarsAndFiles\norg.apache.hive.spark.client.TestSparkClient.testCounters\norg.apache.hive.spark.client.TestSparkClient.testErrorJob\norg.apache.hive.spark.client.TestSparkClient.testJobSubmission\norg.apache.hive.spark.client.TestSparkClient.testMetricsCollection\norg.apache.hive.spark.client.TestSparkClient.testRemoteClient\norg.apache.hive.spark.client.TestSparkClient.testSimpleSparkJob\norg.apache.hive.spark.client.TestSparkClient.testSyncRpc\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6521/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6521/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-6521/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 15 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12780451 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2016-01-06T02:53:04.761+0000","updated":"2016-01-06T02:53:04.761+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15085780","id":"15085780","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-01-06T16:34:02.825+0000","updated":"2016-01-06T16:34:02.825+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15087657","id":"15087657","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Pushed to master & 2.0. Thanks, [~johang]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-01-07T16:28:36.251+0000","updated":"2016-01-07T16:28:36.251+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12921550/comment/15088561","id":"15088561","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"body":"No, thank you [~ashutoshc]!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johang","name":"johang","key":"johang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johan Gustavsson","active":true,"timeZone":"Asia/Tokyo"},"created":"2016-01-08T01:42:40.131+0000","updated":"2016-01-08T01:42:40.131+0000"}],"maxResults":18,"total":18,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-12664/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2pu6n:"}}