{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12508159","self":"https://issues.apache.org/jira/rest/api/2/issue/12508159","key":"HIVE-2181","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316178","id":"12316178","description":"released","name":"0.8.0","archived":false,"released":true,"releaseDate":"2011-12-16"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-08-11T18:09:18.636+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Jun 09 23:30:33 UTC 2015","customfield_12310420":"35808","customfield_12312320":null,"customfield_12310222":"10002_*:*_5_*:*_3222795693_*|*_1_*:*_5_*:*_7345246691_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-09-23T17:21:29.693+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-2181/watchers","watchCount":4,"isWatching":false},"created":"2011-05-24T09:47:28.000+0000","customfield_12310192":"Clear the scratch.dir while starting the hive server, will help in HDFS resource usage from hive.","customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":"Clear the scratch.dir while starting the hive server","customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"7.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":172800,"aggregatetimeoriginalestimate":172800,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316178","id":"12316178","description":"released","name":"0.8.0","archived":false,"released":true,"releaseDate":"2011-12-16"}],"issuelinks":[{"id":"12427488","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12427488","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12822658","key":"HIVE-10415","self":"https://issues.apache.org/jira/rest/api/2/issue/12822658","fields":{"summary":"hive.start.cleanup.scratchdir configuration is not taking effect","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12463339","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12463339","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12956319","key":"HIVE-13429","self":"https://issues.apache.org/jira/rest/api/2/issue/12956319","fields":{"summary":"Tool to remove dangling scratch dir","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chinnalalam","name":"chinnalalam","key":"chinnalalam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chinna Rao Lalam","active":true,"timeZone":"Asia/Kolkata"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-04-11T23:13:15.938+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312588","id":"12312588","name":"Server Infrastructure","description":"Tracks issues dealing with Server infrastructure"}],"timeoriginalestimate":172800,"description":"Now queries leaves the map outputs under scratch.dir after execution. If the hive server is stopped we need not keep the stopped server's map oputputs. So whle starting the server we can clear the scratch.dir. This can help in improved disk usage.\n","customfield_10010":null,"timetracking":{"originalEstimate":"48h","remainingEstimate":"48h","originalEstimateSeconds":172800,"remainingEstimateSeconds":172800},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12490241","id":"12490241","filename":"HIVE-2181.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chinnalalam","name":"chinnalalam","key":"chinnalalam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chinna Rao Lalam","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-08-12T13:42:14.911+0000","size":5071,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12490241/HIVE-2181.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12490645","id":"12490645","filename":"HIVE-2181.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chinnalalam","name":"chinnalalam","key":"chinnalalam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chinna Rao Lalam","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-08-17T13:04:24.792+0000","size":5237,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12490645/HIVE-2181.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12494827","id":"12494827","filename":"HIVE-2181.3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chinnalalam","name":"chinnalalam","key":"chinnalalam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chinna Rao Lalam","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-09-16T17:28:48.089+0000","size":5309,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12494827/HIVE-2181.3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12494930","id":"12494930","filename":"HIVE-2181.4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chinnalalam","name":"chinnalalam","key":"chinnalalam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chinna Rao Lalam","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-09-17T18:11:10.176+0000","size":5280,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12494930/HIVE-2181.4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12495358","id":"12495358","filename":"HIVE-2181.5.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chinnalalam","name":"chinnalalam","key":"chinnalalam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chinna Rao Lalam","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-09-21T13:27:45.875+0000","size":5288,"mimeType":"/","content":"https://issues.apache.org/jira/secure/attachment/12495358/HIVE-2181.5.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12496159","id":"12496159","filename":"HIVE-2181.6.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chinnalalam","name":"chinnalalam","key":"chinnalalam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chinna Rao Lalam","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-09-22T18:21:47.329+0000","size":7182,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12496159/HIVE-2181.6.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12481232","id":"12481232","filename":"HIVE-2181.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chinnalalam","name":"chinnalalam","key":"chinnalalam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chinna Rao Lalam","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-06-02T14:10:28.730+0000","size":2916,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12481232/HIVE-2181.patch"}],"aggregatetimeestimate":172800,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"123698","customfield_12312823":null,"summary":" Clean up the scratch.dir (tmp/hive-root) while restarting Hive server. ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sanoj","name":"sanoj","key":"sanoj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sanoj mathew","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sanoj","name":"sanoj","key":"sanoj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"sanoj mathew","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":172800,"percent":0},"customfield_12311024":null,"environment":"Suse linux, Hadoop 20.1, Hive 0.8","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":172800,"percent":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13083306","id":"13083306","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mis","name":"mis","key":"mis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"MIS","active":true,"timeZone":"Asia/Kolkata"},"body":"-1 for the issue.\nWhat if I'm running multiple hive servers on different port in the same machine {With my metastore db on a mysql server}, then if one of the server instances restarts, it would end up deleting the scratch dir, which would affect other running instances as well. Even if we specify different scratch dir for each of the instances, I doubt about the value add from this property.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mis","name":"mis","key":"mis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"MIS","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-08-11T18:09:18.636+0000","updated":"2011-08-11T18:09:18.636+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13083401","id":"13083401","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chinnalalam","name":"chinnalalam","key":"chinnalalam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chinna Rao Lalam","active":true,"timeZone":"Asia/Kolkata"},"body":"Hi MIS,  \n   Thanks for the point as u said if we have multiple instances with the same scratch dir on same machine it wont help. But in this case if we give different value for the scratch dir it may help(I will double check this point).\n\n   I will introduce one propety for this like hive.start.cleanup.scrachdir . This cleanup can trigger based on this property value. By default it will be turned off. If cleanup need to do while starting the server turn on. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chinnalalam","name":"chinnalalam","key":"chinnalalam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chinna Rao Lalam","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-08-11T19:13:32.849+0000","updated":"2011-08-11T19:13:32.849+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13084309","id":"13084309","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/1481/\n-----------------------------------------------------------\n\nReview request for hive.\n\n\nSummary\n-------\n\nNow queries leaves the map outputs under scratch.dir after execution. If the hive server is stopped we need not keep the stopped server's map oputputs. So whle starting the server we can clear the scratch.dir. This can help in improved disk usage.\n\nImplemented a cleanup method in HiveServer and it will trigger based on the property value \"hive.start.cleanup.scrachdir\"\n\n\nThis addresses bug HIVE-2181.\n    https://issues.apache.org/jira/browse/HIVE-2181\n\n\nDiffs\n-----\n\n  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1156493 \n  trunk/conf/hive-default.xml 1156493 \n  trunk/data/conf/hive-site.xml 1156493 \n  trunk/service/src/java/org/apache/hadoop/hive/service/HiveServer.java 1156493 \n  trunk/service/src/test/org/apache/hadoop/hive/service/TestHiveServer.java 1156493 \n\nDiff: https://reviews.apache.org/r/1481/diff\n\n\nTesting\n-------\n\nAdded test case for this scenario.\n\n\nThanks,\n\nchinna\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-12T19:11:27.039+0000","updated":"2011-08-12T19:11:27.039+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13084620","id":"13084620","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/1481/#review1444\n-----------------------------------------------------------\n\n\n\ntrunk/data/conf/hive-site.xml\n<https://reviews.apache.org/r/1481/#comment3342>\n\n    This overrides the value set in hive-default.xml. And also deviates from the existing behavior. So, the property needn't be mentioned in hive-site.xml\n\n\n\ntrunk/service/src/java/org/apache/hadoop/hive/service/HiveServer.java\n<https://reviews.apache.org/r/1481/#comment3343>\n\n    Why create a reference, when the same can be logged directly and easily readable as well.\n\n\n\ntrunk/service/src/test/org/apache/hadoop/hive/service/TestHiveServer.java\n<https://reviews.apache.org/r/1481/#comment3344>\n\n    There needs to be a test case to test the other use-case also, where the user would have chosen not to set the property to \"true\".\n\n\n- M\n\n\nOn 2011-08-12 19:10:40, chinna wrote:\nbq.  \nbq.  -----------------------------------------------------------\nbq.  This is an automatically generated e-mail. To reply, visit:\nbq.  https://reviews.apache.org/r/1481/\nbq.  -----------------------------------------------------------\nbq.  \nbq.  (Updated 2011-08-12 19:10:40)\nbq.  \nbq.  \nbq.  Review request for hive.\nbq.  \nbq.  \nbq.  Summary\nbq.  -------\nbq.  \nbq.  Now queries leaves the map outputs under scratch.dir after execution. If the hive server is stopped we need not keep the stopped server's map oputputs. So whle starting the server we can clear the scratch.dir. This can help in improved disk usage.\nbq.  \nbq.  Implemented a cleanup method in HiveServer and it will trigger based on the property value \"hive.start.cleanup.scrachdir\"\nbq.  \nbq.  \nbq.  This addresses bug HIVE-2181.\nbq.      https://issues.apache.org/jira/browse/HIVE-2181\nbq.  \nbq.  \nbq.  Diffs\nbq.  -----\nbq.  \nbq.    trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1156493 \nbq.    trunk/conf/hive-default.xml 1156493 \nbq.    trunk/data/conf/hive-site.xml 1156493 \nbq.    trunk/service/src/java/org/apache/hadoop/hive/service/HiveServer.java 1156493 \nbq.    trunk/service/src/test/org/apache/hadoop/hive/service/TestHiveServer.java 1156493 \nbq.  \nbq.  Diff: https://reviews.apache.org/r/1481/diff\nbq.  \nbq.  \nbq.  Testing\nbq.  -------\nbq.  \nbq.  Added test case for this scenario.\nbq.  \nbq.  \nbq.  Thanks,\nbq.  \nbq.  chinna\nbq.  \nbq.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-13T14:09:27.434+0000","updated":"2011-08-13T14:09:27.434+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13086293","id":"13086293","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n\nbq.  On 2011-08-13 14:08:14, M IS wrote:\nbq.  > trunk/data/conf/hive-site.xml, line 181\nbq.  > <https://reviews.apache.org/r/1481/diff/1/?file=32387#file32387line181>\nbq.  >\nbq.  >     This overrides the value set in hive-default.xml. And also deviates from the existing behavior. So, the property needn't be mentioned in hive-site.xml\n\nThis is added for the testing purpose. Now it is removed.\n\n\nbq.  On 2011-08-13 14:08:14, M IS wrote:\nbq.  > trunk/service/src/java/org/apache/hadoop/hive/service/HiveServer.java, line 713\nbq.  > <https://reviews.apache.org/r/1481/diff/1/?file=32388#file32388line713>\nbq.  >\nbq.  >     Why create a reference, when the same can be logged directly and easily readable as well.\n\nCreating a reference for the log message is removed\n\n\nbq.  On 2011-08-13 14:08:14, M IS wrote:\nbq.  > trunk/service/src/test/org/apache/hadoop/hive/service/TestHiveServer.java, line 394\nbq.  > <https://reviews.apache.org/r/1481/diff/1/?file=32389#file32389line394>\nbq.  >\nbq.  >     There needs to be a test case to test the other use-case also, where the user would have chosen not to set the property to \"true\".\n\nAdded a testcase for other user-case (Test should not clear scratchDir)\n\n\n- chinna\n\n\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/1481/#review1444\n-----------------------------------------------------------\n\n\nOn 2011-08-12 19:10:40, chinna wrote:\nbq.  \nbq.  -----------------------------------------------------------\nbq.  This is an automatically generated e-mail. To reply, visit:\nbq.  https://reviews.apache.org/r/1481/\nbq.  -----------------------------------------------------------\nbq.  \nbq.  (Updated 2011-08-12 19:10:40)\nbq.  \nbq.  \nbq.  Review request for hive.\nbq.  \nbq.  \nbq.  Summary\nbq.  -------\nbq.  \nbq.  Now queries leaves the map outputs under scratch.dir after execution. If the hive server is stopped we need not keep the stopped server's map oputputs. So whle starting the server we can clear the scratch.dir. This can help in improved disk usage.\nbq.  \nbq.  Implemented a cleanup method in HiveServer and it will trigger based on the property value \"hive.start.cleanup.scrachdir\"\nbq.  \nbq.  \nbq.  This addresses bug HIVE-2181.\nbq.      https://issues.apache.org/jira/browse/HIVE-2181\nbq.  \nbq.  \nbq.  Diffs\nbq.  -----\nbq.  \nbq.    trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1156493 \nbq.    trunk/conf/hive-default.xml 1156493 \nbq.    trunk/data/conf/hive-site.xml 1156493 \nbq.    trunk/service/src/java/org/apache/hadoop/hive/service/HiveServer.java 1156493 \nbq.    trunk/service/src/test/org/apache/hadoop/hive/service/TestHiveServer.java 1156493 \nbq.  \nbq.  Diff: https://reviews.apache.org/r/1481/diff\nbq.  \nbq.  \nbq.  Testing\nbq.  -------\nbq.  \nbq.  Added test case for this scenario.\nbq.  \nbq.  \nbq.  Thanks,\nbq.  \nbq.  chinna\nbq.  \nbq.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-17T13:13:27.135+0000","updated":"2011-08-17T13:13:27.135+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13088888","id":"13088888","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/1481/\n-----------------------------------------------------------\n\n(Updated 2011-08-22 18:23:15.749654)\n\n\nReview request for hive.\n\n\nChanges\n-------\n\nFixed review comments and updated the patch.\n\n\nSummary\n-------\n\nNow queries leaves the map outputs under scratch.dir after execution. If the hive server is stopped we need not keep the stopped server's map oputputs. So whle starting the server we can clear the scratch.dir. This can help in improved disk usage.\n\nImplemented a cleanup method in HiveServer and it will trigger based on the property value \"hive.start.cleanup.scrachdir\"\n\n\nThis addresses bug HIVE-2181.\n    https://issues.apache.org/jira/browse/HIVE-2181\n\n\nDiffs (updated)\n-----\n\n  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1158629 \n  trunk/conf/hive-default.xml 1158629 \n  trunk/service/src/java/org/apache/hadoop/hive/service/HiveServer.java 1158629 \n  trunk/service/src/test/org/apache/hadoop/hive/service/TestHiveServer.java 1158629 \n\nDiff: https://reviews.apache.org/r/1481/diff\n\n\nTesting\n-------\n\nAdded test case for this scenario.\n\n\nThanks,\n\nchinna\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-22T18:23:29.194+0000","updated":"2011-08-22T18:23:29.194+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13104700","id":"13104700","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chinnalalam","name":"chinnalalam","key":"chinnalalam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chinna Rao Lalam","active":true,"timeZone":"Asia/Kolkata"},"body":"Patch become stale i will rebase the patch and i will upload","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chinnalalam","name":"chinnalalam","key":"chinnalalam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chinna Rao Lalam","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-09-14T17:31:19.273+0000","updated":"2011-09-14T17:31:19.273+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13105007","id":"13105007","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-h0.21 #954 (See [https://builds.apache.org/job/Hive-trunk-h0.21/954/])\n    HIVE-2181. Avoid null pointer exception when executing UDF\n(Chinna Rao Lalam via jvs)\n\njvs : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1170721\nFiles : \n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFBridge.java\n* /hive/trunk/ql/src/test/queries/clientnegative/udfnull.q\n* /hive/trunk/ql/src/test/results/clientnegative/udfnull.q.out\n* /hive/trunk/ql/src/test/results/compiler/plan/cast1.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/groupby1.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/groupby2.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/groupby3.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/groupby4.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/groupby5.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/groupby6.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/input20.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/input8.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/join2.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/sample1.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/sample2.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/sample3.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/sample4.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/sample5.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/sample6.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/sample7.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/udf1.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/udf4.q.xml\n* /hive/trunk/ql/src/test/results/compiler/plan/udf6.q.xml\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-14T23:44:27.064+0000","updated":"2011-09-14T23:44:27.064+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13105014","id":"13105014","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"Oops, looks like I typed in the wrong JIRA issue number in the commit message :(\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-14T23:51:46.971+0000","updated":"2011-09-14T23:51:46.971+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13106615","id":"13106615","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/1481/\n-----------------------------------------------------------\n\n(Updated 2011-09-16 17:30:40.980271)\n\n\nReview request for hive.\n\n\nChanges\n-------\n\nRebased the patch on latest trunk\n\n\nSummary\n-------\n\nNow queries leaves the map outputs under scratch.dir after execution. If the hive server is stopped we need not keep the stopped server's map oputputs. So whle starting the server we can clear the scratch.dir. This can help in improved disk usage.\n\nImplemented a cleanup method in HiveServer and it will trigger based on the property value \"hive.start.cleanup.scrachdir\"\n\n\nThis addresses bug HIVE-2181.\n    https://issues.apache.org/jira/browse/HIVE-2181\n\n\nDiffs (updated)\n-----\n\n  trunk/conf/hive-default.xml 1171488 \n  trunk/service/src/java/org/apache/hadoop/hive/service/HiveServer.java 1171488 \n  trunk/service/src/test/org/apache/hadoop/hive/service/TestHiveServer.java 1171488 \n  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1171488 \n\nDiff: https://reviews.apache.org/r/1481/diff\n\n\nTesting\n-------\n\nAdded test case for this scenario.\n\n\nThanks,\n\nchinna\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-16T17:31:09.790+0000","updated":"2011-09-16T17:31:09.790+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13108956","id":"13108956","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/1481/#review1977\n-----------------------------------------------------------\n\n\n\ntrunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java\n<https://reviews.apache.org/r/1481/#comment4467>\n\n    SCRATCH needs a T in it (everywhere).\n\n\n- John\n\n\nOn 2011-09-16 17:30:40, chinna wrote:\nbq.  \nbq.  -----------------------------------------------------------\nbq.  This is an automatically generated e-mail. To reply, visit:\nbq.  https://reviews.apache.org/r/1481/\nbq.  -----------------------------------------------------------\nbq.  \nbq.  (Updated 2011-09-16 17:30:40)\nbq.  \nbq.  \nbq.  Review request for hive.\nbq.  \nbq.  \nbq.  Summary\nbq.  -------\nbq.  \nbq.  Now queries leaves the map outputs under scratch.dir after execution. If the hive server is stopped we need not keep the stopped server's map oputputs. So whle starting the server we can clear the scratch.dir. This can help in improved disk usage.\nbq.  \nbq.  Implemented a cleanup method in HiveServer and it will trigger based on the property value \"hive.start.cleanup.scrachdir\"\nbq.  \nbq.  \nbq.  This addresses bug HIVE-2181.\nbq.      https://issues.apache.org/jira/browse/HIVE-2181\nbq.  \nbq.  \nbq.  Diffs\nbq.  -----\nbq.  \nbq.    trunk/conf/hive-default.xml 1171488 \nbq.    trunk/service/src/java/org/apache/hadoop/hive/service/HiveServer.java 1171488 \nbq.    trunk/service/src/test/org/apache/hadoop/hive/service/TestHiveServer.java 1171488 \nbq.    trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1171488 \nbq.  \nbq.  Diff: https://reviews.apache.org/r/1481/diff\nbq.  \nbq.  \nbq.  Testing\nbq.  -------\nbq.  \nbq.  Added test case for this scenario.\nbq.  \nbq.  \nbq.  Thanks,\nbq.  \nbq.  chinna\nbq.  \nbq.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-20T19:40:09.033+0000","updated":"2011-09-20T19:40:09.033+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13109494","id":"13109494","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/1481/\n-----------------------------------------------------------\n\n(Updated 2011-09-21 13:30:22.283181)\n\n\nReview request for hive.\n\n\nChanges\n-------\n\nspelling mistake corrected\n\n\nSummary\n-------\n\nNow queries leaves the map outputs under scratch.dir after execution. If the hive server is stopped we need not keep the stopped server's map oputputs. So whle starting the server we can clear the scratch.dir. This can help in improved disk usage.\n\nImplemented a cleanup method in HiveServer and it will trigger based on the property value \"hive.start.cleanup.scrachdir\"\n\n\nThis addresses bug HIVE-2181.\n    https://issues.apache.org/jira/browse/HIVE-2181\n\n\nDiffs (updated)\n-----\n\n  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1173539 \n  trunk/conf/hive-default.xml 1173539 \n  trunk/service/src/java/org/apache/hadoop/hive/service/HiveServer.java 1173539 \n  trunk/service/src/test/org/apache/hadoop/hive/service/TestHiveServer.java 1173539 \n\nDiff: https://reviews.apache.org/r/1481/diff\n\n\nTesting\n-------\n\nAdded test case for this scenario.\n\n\nThanks,\n\nchinna\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-21T13:31:09.220+0000","updated":"2011-09-21T13:31:09.220+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13109885","id":"13109885","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"I ran TestHiveServer, and even though it passed, I saw the exception below in the test output.  That's because one of the test cases leaves the socket in use, so the second one fails to open it.\n\nRather than actually starting the server, maybe just unit-test the cleanup method in isolation?\n\n{noformat}\n    [junit] org.apache.thrift.transport.TTransportException: Could not create ServerSocket on address 0.0.0.0/0.0.0.0:10000.\n    [junit] \tat org.apache.thrift.transport.TServerSocket.<init>(TServerSocket.java:93)\n    [junit] \tat org.apache.thrift.transport.TServerSocket.<init>(TServerSocket.java:75)\n    [junit] \tat org.apache.thrift.transport.TServerSocket.<init>(TServerSocket.java:68)\n    [junit] \tat org.apache.hadoop.hive.service.HiveServer.main(HiveServer.java:688)\n    [junit] \tat org.apache.hadoop.hive.service.TestHiveServer$2.run(TestHiveServer.java:423)\n    [junit] ------------- ---------------- ---------------\n    [junit] \n{noformat}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-21T21:22:15.831+0000","updated":"2011-09-21T21:22:15.831+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13112796","id":"13112796","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/1481/\n-----------------------------------------------------------\n\n(Updated 2011-09-22 18:26:19.812602)\n\n\nReview request for hive.\n\n\nChanges\n-------\n\nIn testcases server startup is removed and added unit tests for cleanUpScratchDir().\n\n\nSummary\n-------\n\nNow queries leaves the map outputs under scratch.dir after execution. If the hive server is stopped we need not keep the stopped server's map oputputs. So whle starting the server we can clear the scratch.dir. This can help in improved disk usage.\n\nImplemented a cleanup method in HiveServer and it will trigger based on the property value \"hive.start.cleanup.scrachdir\"\n\n\nThis addresses bug HIVE-2181.\n    https://issues.apache.org/jira/browse/HIVE-2181\n\n\nDiffs (updated)\n-----\n\n  trunk/common/src/java/org/apache/hadoop/hive/common/ServerUtils.java PRE-CREATION \n  trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java 1174277 \n  trunk/conf/hive-default.xml 1174277 \n  trunk/service/src/java/org/apache/hadoop/hive/service/HiveServer.java 1174277 \n  trunk/service/src/test/org/apache/hadoop/hive/service/TestHiveServer.java 1174277 \n\nDiff: https://reviews.apache.org/r/1481/diff\n\n\nTesting\n-------\n\nAdded test case for this scenario.\n\n\nThanks,\n\nchinna\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-22T18:27:26.350+0000","updated":"2011-09-22T18:27:26.350+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13112881","id":"13112881","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"+1.  Will commit when tests pass.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-22T20:31:49.793+0000","updated":"2011-09-22T20:31:49.793+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13113574","id":"13113574","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"Committed to trunk.  Thanks Chinna!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-23T17:21:30.365+0000","updated":"2011-09-23T17:21:30.365+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/13113865","id":"13113865","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-h0.21 #974 (See [https://builds.apache.org/job/Hive-trunk-h0.21/974/])\n    HIVE-2181. Clean up the scratch.dir (tmp/hive-root) while restarting\nHive server.\n(Chinna Rao Lalam via jvs)\n\njvs : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1174892\nFiles : \n* /hive/trunk/common/src/java/org/apache/hadoop/hive/common/ServerUtils.java\n* /hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java\n* /hive/trunk/conf/hive-default.xml\n* /hive/trunk/service/src/java/org/apache/hadoop/hive/service/HiveServer.java\n* /hive/trunk/service/src/test/org/apache/hadoop/hive/service/TestHiveServer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-24T01:38:03.359+0000","updated":"2011-09-24T01:38:03.359+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508159/comment/14579749","id":"14579749","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"body":"Doc note:  This added configuration parameter *hive.start.cleanup.scratchdir* to HiveConf.java in release 0.8.1 (not 0.8.0 as indicated in Fix Version).\n\nHIVE-10415 fixed a bug in release 1.3.0.\n\n*hive.start.cleanup.scratchdir* is documented in the wiki here:\n\n* [Configuration Properties -- hive.start.cleanup.scratchdir | https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.start.cleanup.scratchdir] ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"created":"2015-06-09T23:30:33.184+0000","updated":"2015-06-09T23:30:33.184+0000"}],"maxResults":18,"total":18,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-2181/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0litb:"}}