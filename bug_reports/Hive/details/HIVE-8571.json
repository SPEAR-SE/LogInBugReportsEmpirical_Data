{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12749995","self":"https://issues.apache.org/jira/rest/api/2/issue/12749995","key":"HIVE-8571","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"2014-10-23 06:40:17.163","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_4874285_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-10-23T08:01:31.401+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-8571/watchers","watchCount":1,"isWatching":false},"created":"2014-10-23T06:40:17.163+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320745","id":"12320745","description":"released","name":"0.10.0","archived":false,"released":true,"releaseDate":"2013-01-11"}],"issuelinks":[{"id":"12399583","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12399583","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12749994","key":"HIVE-8570","self":"https://issues.apache.org/jira/rest/api/2/issue/12749994","fields":{"summary":"Unexpected \"IllegalArgumentException\" from parseURL method in org.apache.hive.jdbc.Utils interrupts java.sql.driverManager running before choosing the right driver when using multiple datasource","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-10-23T08:01:47.272+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12314178","id":"12314178","name":"JDBC"}],"timeoriginalestimate":null,"description":"My JDK is 1.6. \nI checked the source code in jdbc-hive 0.10-cdh4.3.1. I found the code in parseURL is not appropriate. When uri is not start with URL_PREFIX, parseURL will throw an exception. This exception is thrown to the outside of hive-jdbc. It will interrupt some logic outside of this driver, especially when I use multiple datesources besides hive.\n\nif (!uri.startsWith(URL_PREFIX)) {\n      throw new IllegalArgumentException(\"Bad URL format\");\n}\n\nFor example, I use mysql-connector-java and hive-jdbc to connect to mysql and hive respectively in my project. And I use java.sql.drivermanager to get connections after I initialize both hive and mysql jdbc drivers.\nIn java.sql.drivermanager, getconnection (...) method, we will choose the right driver according to url. In fact, it scans the driver list and tries each driver to get connection according to url. The code is like following:\nfor (int i = 0; i < drivers.size(); i++) {\n\t    DriverInfo di = (DriverInfo)drivers.elementAt(i);\n\t    // If the caller does not have permission to load the driver then \n\t    // skip it.\n\t    if ( getCallerClass(callerCL, di.driverClassName ) != di.driverClass ) {\n\t\tprintln(\"    skipping: \" + di);\n\t\tcontinue;\n\t    }\n\t    try {\n\t\tprintln(\"    trying \" + di);\n// ---------------------------------- try to get connection here --------------------------\n\t\tConnection result = di.driver.connect(url, info);\n// ---------------------------------- if the connection is not null, return ---------------\n\t\tif (result != null) {\n\t\t    // Success!\n\t\t    println(\"getConnection returning \" + di);\n\t\t    return (result);\n\t\t}\n\t    } catch (SQLException ex) {\n\t\tif (reason == null) {\n\t\t    reason = ex;\n\t\t}\n\t    }\n\t}\nIn this way, if I use hive.jdbc.Utils.parseURL to parse a mysql uri, parseURL will throw an IllegalArgumentException(\"Bad URL format\"). Because drivermanager does not handler this exception, so drivermanager stops trying other drivers.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Unexpected \"IllegalArgumentException\" from parseURL method in org.apache.hive.jdbc.Utils interrupts java.sql.driverManager running before choosing the right driver when using multiple datasource","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shiyuxiang220","name":"shiyuxiang220","key":"shiyuxiang220","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shi Yuxiang","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shiyuxiang220","name":"shiyuxiang220","key":"shiyuxiang220","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shi Yuxiang","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"centos 6,cdh 4.3.1","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[],"maxResults":0,"total":0,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-8571/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i21hi7:"}}