{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12819144","self":"https://issues.apache.org/jira/rest/api/2/issue/12819144","key":"HIVE-10251","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329345","id":"12329345","description":"Hive 1.2.0","name":"1.2.0","archived":false,"released":true,"releaseDate":"2015-05-18"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2015-04-08T02:40:49.873+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jan 10 14:14:51 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_21978680_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_87116366414","customfield_12312321":null,"resolutiondate":"2018-01-10T14:14:51.559+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-10251/watchers","watchCount":8,"isWatching":false},"created":"2015-04-08T01:09:06.544+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["patch"],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329345","id":"12329345","description":"Hive 1.2.0","name":"1.2.0","archived":false,"released":true,"releaseDate":"2015-05-18"}],"issuelinks":[{"id":"12420742","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12420742","type":{"id":"10020","name":"Cloners","inward":"is cloned by","outward":"is a clone of","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10020"},"inwardIssue":{"id":"12819461","key":"HIVE-10267","self":"https://issues.apache.org/jira/rest/api/2/issue/12819461","fields":{"summary":"HIVE-9664 makes hive depend on ivysettings.xml : trivial breakage fix","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12420936","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12420936","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12819958","key":"HIVE-10297","self":"https://issues.apache.org/jira/rest/api/2/issue/12819958","fields":{"summary":"Package a default ivysettings.xml file in hive-exec jar.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/4","description":"This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/reopened.png","name":"Reopened","id":"4","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}},{"id":"12420635","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12420635","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12774427","key":"HIVE-9664","self":"https://issues.apache.org/jira/rest/api/2/issue/12774427","fields":{"summary":"Hive \"add jar\" command should be able to download and add jars from a repository","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nntnag17","name":"nntnag17","key":"nntnag17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anant Nag","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-01-10T14:14:51.628+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"HIVE-9664 makes hive depend on the existence of ivysettings.xml, and if it is not present, it makes hive NPE when instantiating a CLISessionState.\n\n{noformat}\njava.lang.NullPointerException\nat org.apache.hadoop.hive.ql.session.DependencyResolver.<init>(DependencyResolver.java:61)\nat org.apache.hadoop.hive.ql.session.SessionState.<init>(SessionState.java:343)\nat org.apache.hadoop.hive.ql.session.SessionState.<init>(SessionState.java:334)\nat org.apache.hadoop.hive.cli.CliSessionState.<init>(CliSessionState.java:60)\n{noformat}\n\nThis happens because of the following bit:\n\n{noformat}\n    // If HIVE_HOME is not defined or file is not found in HIVE_HOME/conf then load default ivysettings.xml from class loader\n    if (ivysettingsPath == null || !(new File(ivysettingsPath).exists())) {\n      ivysettingsPath = ClassLoader.getSystemResource(\"ivysettings.xml\").getFile();\n      _console.printInfo(\"ivysettings.xml file not found in HIVE_HOME or HIVE_CONF_DIR,\" + ivysettingsPath + \" will be used\");\n    }\n{noformat}\n\nThis makes it so that an attempt to instantiate CliSessionState without an ivysettings.xml file will cause hive to fail with an NPE. Hive should not have a hard dependency on a ivysettings,xml being present, and this feature should gracefully fail in that case instead.\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12723863","id":"12723863","filename":"HIVE-10251.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nntnag17","name":"nntnag17","key":"nntnag17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anant Nag","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-08T07:14:12.832+0000","size":7251,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12723863/HIVE-10251.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12724194","id":"12724194","filename":"HIVE-10251.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nntnag17","name":"nntnag17","key":"nntnag17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anant Nag","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-09T10:19:26.983+0000","size":4516,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12724194/HIVE-10251.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12724559","id":"12724559","filename":"HIVE-10251.3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nntnag17","name":"nntnag17","key":"nntnag17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anant Nag","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-10T13:37:30.779+0000","size":11488,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12724559/HIVE-10251.3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12724008","id":"12724008","filename":"HIVE-10251.simple.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-08T20:36:04.503+0000","size":1327,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12724008/HIVE-10251.simple.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"HIVE-9664 makes hive depend on ivysettings.xml","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[{"id":"12819958","key":"HIVE-10297","self":"https://issues.apache.org/jira/rest/api/2/issue/12819958","fields":{"summary":"Package a default ivysettings.xml file in hive-exec jar.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/4","description":"This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/reopened.png","name":"Reopened","id":"4","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14484598","id":"14484598","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~nntnag17], can you please prepare a patch for this problem and submit it for review? Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-08T02:40:49.873+0000","updated":"2015-04-08T02:40:49.873+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14484872","id":"14484872","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nntnag17","name":"nntnag17","key":"nntnag17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anant Nag","active":true,"timeZone":"Etc/UTC"},"body":"rb: https://reviews.apache.org/r/32966/","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nntnag17","name":"nntnag17","key":"nntnag17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anant Nag","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-08T07:15:25.197+0000","updated":"2015-04-08T07:15:25.197+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14485265","id":"14485265","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=swarnim","name":"swarnim","key":"swarnim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Swarnim Kulkarni","active":true,"timeZone":"Etc/UTC"},"body":"Left feedback on the patch. Also should we have JUnits proving that the patch is actually fixing the issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=swarnim","name":"swarnim","key":"swarnim","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Swarnim Kulkarni","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-08T14:02:22.483+0000","updated":"2015-04-08T14:02:22.483+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14485903","id":"14485903","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the quick patch, Anant!\n\nLooking through the changes, I'm +1 on this patch fixing this breakage, and not introducing any new breakage that I can see. Manual testing shows that this patch fixes the primary issue.\n\nThere are review comments though, and normally, we'd wait till all comments are resolved before applying the patch.\n\nAs to unit testing this, we could have a mock test, potentially, that shows that using a method from this class still works if ClassLoader.getSystemResource is not used statically as it currently is.\n\nThat said, as of right now, hive-trunk is broken for environments that do not have an ivysettings.xml file, and we need to fix it soon. We have a couple of options at hand that I see:\n\na) Revert HIVE-9664 till we have a fix for this that we're comfortable is the right fix and works properly, and then we can re-apply both.\nb) Go ahead and apply HIVE-10251, possibly ignoring the 24hr moratorium, and take on an addendum jira to handle review comments and hardening of this issue's unit tests, etc.\n\nAny thoughts? I'm personally leaning towards (b), but we do need to move quickly to fix trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-08T19:57:58.149+0000","updated":"2015-04-08T19:57:58.149+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14485960","id":"14485960","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"body":"Attaching trivial patch for HIVE-10251","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-08T20:36:04.509+0000","updated":"2015-04-08T20:36:04.509+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14485966","id":"14485966","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"body":"One more possibility, is:\n\nc) we can commit a trivial fix as with the above attached HIVE-10251.simple.patch that addresses only this breakage and nothing else, and handle redoing DependencyResolver per Anant's patch as a separate patch. That way, we fix trunk, we don't have to revert HIVE-9664, and we can spend as much time as it takes to address review comments for DependencyResolver's instantiation as needed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-08T20:38:26.946+0000","updated":"2015-04-08T20:38:26.946+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14486080","id":"14486080","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"body":"Okay, on thinking about this a bit more, I don't know that it quite meets the bar for breaking the 24hr moratorium for the new trivial patch, or fast-forwarding this current patch especially since we'd at least have to wait for hive_qe to finish running tests on it. This is still a breakage for other components like flume that use hive, since their environments include hive as jars, rather than necessarily working against a deployed hive environment which might contain an ivysettings.xml file. But, then, that's the cost of those other components being developed against hive trunk rather than a hive released branch.\n\nSo, here's what I think I'm going to do:\n\na) Open a new jira cloning this for the trivial patch, to fix the breakage. That one's scope will be limited to fixing the issue as determined by manual testing. This patch can get committed in 24 hours.\nb) This current jira can continue to be developed upon, by Anant, till all the reviewers are happy with the changes and unit tests/etc.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-08T21:22:11.507+0000","updated":"2015-04-08T21:22:11.507+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14486083","id":"14486083","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"body":"Created HIVE-10267 for tracking that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-08T21:23:38.753+0000","updated":"2015-04-08T21:23:38.753+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14486628","id":"14486628","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"Can we fix this problem by bundling a default copy of ivysettings.xml in one of the JAR files while giving preference to the first non-bundled copy of ivysettings.xml found on the classpath?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-09T03:23:20.189+0000","updated":"2015-04-09T03:23:20.189+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14487085","id":"14487085","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nntnag17","name":"nntnag17","key":"nntnag17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anant Nag","active":true,"timeZone":"Etc/UTC"},"body":"Latest patch after addressing comments in the rb.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nntnag17","name":"nntnag17","key":"nntnag17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anant Nag","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-09T10:19:26.987+0000","updated":"2015-04-09T10:19:26.987+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14487094","id":"14487094","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nntnag17","name":"nntnag17","key":"nntnag17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anant Nag","active":true,"timeZone":"Etc/UTC"},"body":"hi [~sushanth],\n\nI've addressed the comments in the rb and updated the patch. I'm not sure about how to do unit testing on this since ivysettings.xml file is added to the classpath while running unit tests. Also there is a default  defaultGrapeConfig.xml file shipped in the groovy jar which will be used if ivysettings.xml is not found in the classpath. Any suggestions or comments on how to do this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nntnag17","name":"nntnag17","key":"nntnag17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anant Nag","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-09T10:24:50.147+0000","updated":"2015-04-09T10:24:50.147+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14487722","id":"14487722","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"body":"[~cwsteinbach]:\n\nI had a discussion with [~arpitgupta] yesterday, who seemed to advocate the same idea of shipping ivysettings.xml inside the jar, since we already do things like shipping hadoop-default.xml inside hadoop jars, for example.\n\nOn one hand, I like that idea, since it simplifies build & release, and makes it so that this feature is controlled by our build, rather than whatever build/packaging scheme is used on top of hive, and whether or not the conf dir is appropriately set up. As in, if the conf dir were to be set up, we'd prefer that, but otherwise, we'd use ours. This has a very solid benefit for us.\n\nOn the flip side, this feels similar to namespace pollution for me - users of our jars will now have an ivysettings.xml in their classpath because of us, and if they don't have similar dependency resolution semantics where they prefer an external provided ivysettings.xml over the one in classpath, they have an issue. Also, if they use a ivysettings.xml in their classpath mode of operation, then order of jar import becomes important.\n\nUltimately, my distaste for this approach is not strong enough to offset the benefits, I think, and a case could still be made that a jar user could go ahead and shade our jar, or override as need be. We could also take a midling approach where the included xml file can be called something like hive-ivysettings-default.xml, and that's the name we depend on, then there's no confusion or pollution.\n\n[~nntnag17]:\n\nOne way to unit test this would be as follows :\n\na) Have a protected method in DependencyResolver that returns ClassLoader.getSystemResource(String), and use that method across DependencyResolver across the board, instead of directly calling ClassLoader.getSystemResource(...).\nb) In a unit test, then, you can extend DependencyResolver to DummyDependencyResolver, overriding that method so that it always returns null for resolving ivysettings.xml or whatever, and then you can show that you can still instantiate it, and resolve using it, although it would then return nothing, but without throwing exceptions. You could also use a DependencyResolver as-is, to show that it appropriately can resolve and fetch ivy urls when required.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-09T17:36:56.965+0000","updated":"2015-04-09T17:36:56.965+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14487750","id":"14487750","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"body":"(Forgive me if this idea idea is stupid, because of my limited knowledge of ivy). Is it possible do do something like hadoop's *defualt.xml vs *site.xml ? Ie, package something like ivysettings-hivedefault.xml as the default file in jar and then use that only if there is no ivysettings.xml in path ? (or iveysettings-hivesite.xml).\nWould that address the concerns [~sushanth] ?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-09T17:49:50.228+0000","updated":"2015-04-09T17:49:50.228+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14487765","id":"14487765","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"body":"[~thejas] : Yup, that's exactly what I was suggesting - since we're the ones doing the dependency resolution, we can look for ivysettings.xml in conf dir and then classpath, and if not found, fall back to hive-ivysettings-default.xml, which we can package in our jars.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-09T17:57:34.823+0000","updated":"2015-04-09T17:57:34.823+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14487939","id":"14487939","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Yup, that's exactly what I was suggesting\nSorry, missed that last line your earlier comment!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-09T18:42:54.479+0000","updated":"2015-04-09T18:42:54.479+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14488661","id":"14488661","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"+1 for the hive-ivysettings-default.xml approach.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-10T00:52:45.619+0000","updated":"2015-04-10T00:52:45.619+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14488854","id":"14488854","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"body":"Anant, I've committed HIVE-10267 so trunk is in a stable state, but this means you'll have to refactor your patch slightly. Also, could you please implement the hive-ivysettings-default.xml approach discussed here, and add it to the jar(probably to hive-exec, I think) packaging?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-10T03:53:44.181+0000","updated":"2015-04-10T03:53:44.181+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14489634","id":"14489634","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nntnag17","name":"nntnag17","key":"nntnag17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anant Nag","active":true,"timeZone":"Etc/UTC"},"body":"*Added hive-ivysettings-default.xml to hive-exec jar.\n*Moved ivysettings.xml check to separate function.\n* Added unit test.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nntnag17","name":"nntnag17","key":"nntnag17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anant Nag","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-10T13:37:30.785+0000","updated":"2015-04-10T13:37:30.785+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14489637","id":"14489637","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nntnag17","name":"nntnag17","key":"nntnag17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anant Nag","active":true,"timeZone":"Etc/UTC"},"body":"[~sushanth],\n\n\nbq. a) Have a protected method in DependencyResolver that returns ClassLoader.getSystemResource(String), and use that method across DependencyResolver across the board, instead of directly calling ClassLoader.getSystemResource(...).\nbq. b) In a unit test, then, you can extend DependencyResolver to DummyDependencyResolver, overriding that method so that it always returns null for resolving ivysettings.xml or whatever\nThe problem here is that DependencyResolver is a singleton class which checks for ivysettings in the constructor. So even if I'm able to mock it or create a subclass, the constructor would be called before I could define the behavior of any of its methods. \n                                      One solution I can think of is to create a method getIvySettings() and call it before downloading dependencies in the downloadDependencies method and have a protected method for getting system resource as you suggested. I can then mock that method to return different values  and then check for graceful exit. I've implemented this solution in the updated patch. Please give your comments. \n\nbq.  Also, could you please implement the hive-ivysettings-default.xml approach discussed here,\n\nI've implemented the hive-ivysettings-default.xml approach in the updated patch. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nntnag17","name":"nntnag17","key":"nntnag17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anant Nag","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-10T13:38:32.209+0000","updated":"2015-04-10T13:38:32.209+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14490325","id":"14490325","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12724559/HIVE-10251.3.patch\n\n{color:red}ERROR:{color} -1 due to 25 failed/errored test(s), 8674 tests executed\n*Failed tests:*\n{noformat}\nTestMinimrCliDriver-bucketmapjoin6.q-constprog_partitioner.q-infer_bucket_sort_dyn_part.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-external_table_with_space_in_location_path.q-infer_bucket_sort_merge.q-auto_sortmerge_join_16.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-groupby2.q-import_exported_table.q-bucketizedhiveinputformat.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-index_bitmap3.q-stats_counter_partitioned.q-temp_table_external.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-infer_bucket_sort_map_operators.q-join1.q-bucketmapjoin7.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-infer_bucket_sort_num_buckets.q-disable_merge_for_bucketing.q-uber_reduce.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-infer_bucket_sort_reducers_power_two.q-scriptfile1.q-scriptfile1_win.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-leftsemijoin_mr.q-load_hdfs_file_with_space_in_the_name.q-root_dir_external_table.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-list_bucket_dml_10.q-bucket_num_reducers.q-bucket6.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-load_fs2.q-file_with_header_footer.q-ql_rewrite_gbtoidx_cbo_1.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-parallel_orderby.q-reduce_deduplicate.q-ql_rewrite_gbtoidx_cbo_2.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-ql_rewrite_gbtoidx.q-smb_mapjoin_8.q - did not produce a TEST-*.xml file\nTestMinimrCliDriver-schemeAuthority2.q-bucket4.q-input16_cc.q-and-1-more - did not produce a TEST-*.xml file\norg.apache.hadoop.hive.ql.session.TestDependencyResolver.testForSuccessfulDownload\norg.apache.hadoop.hive.thrift.TestHadoop20SAuthBridge.testMetastoreProxyUser\norg.apache.hadoop.hive.thrift.TestHadoop20SAuthBridge.testSaslWithHiveMetaStore\norg.apache.hive.jdbc.TestJdbcWithMiniHS2.testNewConnectionConfiguration\norg.apache.hive.jdbc.TestSSL.testSSLFetchHttp\norg.apache.hive.spark.client.TestSparkClient.testAddJarsAndFiles\norg.apache.hive.spark.client.TestSparkClient.testCounters\norg.apache.hive.spark.client.TestSparkClient.testErrorJob\norg.apache.hive.spark.client.TestSparkClient.testJobSubmission\norg.apache.hive.spark.client.TestSparkClient.testMetricsCollection\norg.apache.hive.spark.client.TestSparkClient.testSimpleSparkJob\norg.apache.hive.spark.client.TestSparkClient.testSyncRpc\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3363/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3363/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3363/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 25 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12724559 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-04-10T20:42:00.335+0000","updated":"2015-04-10T20:42:00.335+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14511761","id":"14511761","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Anant,\n\nOne more note - HIVE09664 also makes changes in itests/pom.xml that are not portable:\n\n{code}\ndiff --git a/itests/pom.xml b/itests/pom.xml\nindex fd4bb41fd8f74cdf261b791d1944dbca4b04f927..6f6cf742c41a11647589692ac4f266f467be2812 100644\n--- a/itests/pom.xml\n+++ b/itests/pom.xml\n@@ -93,6 +93,9 @@\n                   mkdir -p $DOWNLOAD_DIR\n                   download \"http://d3jw87u4immizc.cloudfront.net/spark-tarball/spark-${spark.version}-bin-hadoop2-without-hive.tgz\" \"spark\"\n                   cp -f $HIVE_ROOT/data/conf/spark/log4j.properties $BASE_DIR/spark/conf/\n+                  sed '/package /d' ${basedir}/${hive.path.to.root}/contrib/src/java/org/apache/hadoop/hive/contrib/udf/example/UDFExampleAdd.java > /tmp/UDFExampleAdd.java\n+                  javac -cp  ${settings.localRepository}/org/apache/hive/hive-exec/${project.version}/hive-exec-${project.version}.jar /tmp/UDFExampleAdd.java -d /tmp\n+                  jar -cf /tmp/udfexampleadd-1.0.jar -C /tmp UDFExampleAdd.class\n                 </echo>\n               </target>\n             </configuration>\n{code}\n\nsed is not something that's available in windows, and instead of compiling UDFExampleAdd.java in here, it might be better to create another quick jar build in the contrib package, and depend on it from the qtests to show that we're able to appropriately add jars.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-24T21:15:16.324+0000","updated":"2015-04-24T21:15:16.324+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/14516762","id":"14516762","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nntnag17","name":"nntnag17","key":"nntnag17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anant Nag","active":true,"timeZone":"Etc/UTC"},"body":"Hi Sushanth,\n\nCreating a jar build in the contrib package will put the jar in the classpath while running the qtest tests which will make ivyDownload.q test invalid. We need to have a jar which is not in the classpath while running the ivyDownload.q test. I think we should compile it either here in itests/pom.xml or itests/qtest/pom.xml and use it from the qtest.\n             Also, I already have  HIVE-10376 open which moves this code to qtest/pom.xml. I can modify that Jira to also include the code to make it portable. Your thoughts?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nntnag17","name":"nntnag17","key":"nntnag17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anant Nag","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-28T10:15:27.044+0000","updated":"2015-04-28T10:15:27.044+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12819144/comment/16320305","id":"16320305","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"body":"Resolving as this was superseded by HIVE-10267.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"created":"2018-01-10T14:14:51.617+0000","updated":"2018-01-10T14:14:51.617+0000"}],"maxResults":23,"total":23,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-10251/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2cxzj:"}}