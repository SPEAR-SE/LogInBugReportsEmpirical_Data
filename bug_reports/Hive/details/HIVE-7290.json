{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12723713","self":"https://issues.apache.org/jira/rest/api/2/issue/12723713","key":"HIVE-7290","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2014-12-19T07:40:09.508+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Feb 23 08:51:18 UTC 2016","customfield_12310420":"401898","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-7290/watchers","watchCount":14,"isWatching":false},"created":"2014-06-25T18:30:38.249+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326450","id":"12326450","description":"released","name":"0.14.0","archived":false,"released":true,"releaseDate":"2014-11-12"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326829","id":"12326829","description":"0.13 maintenance release 1","name":"0.13.1","archived":false,"released":true,"releaseDate":"2014-06-06"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-02-23T08:51:18.675+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12317906","id":"12317906","name":"Database/Schema","description":"Issues related to support for multiple Datasbases/Schemas"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312584","id":"12312584","name":"Metastore","description":"Tracks issue dealing with metastore."}],"timeoriginalestimate":null,"description":"Hi folks,\n\nwe're seeing an intermittent issue between our Hive 0.13 metastore and mysql instance. After being idle for about 5 minutes or so, any transactions involving the metastore and mysql causes the following error to appear in the metastore log:\n\n2014-06-09 05:13:52,066 ERROR bonecp.ConnectionHandle (ConnectionHandle.java:markPossiblyBroken(388)) - Database access problem. Killing off this connection and all remaining connectio\nns in the connection pool. SQL State = 08S01\n2014-06-09 05:13:52,068 ERROR metastore.RetryingHMSHandler (RetryingHMSHandler.java:invoke(157)) - Retrying HMSHandler after 1000 ms (attempt 1 of 1) with error: javax.jdo.JDODataStore\nException: Communications link failure\n\nThe last packet successfully received from the server was 502,751 milliseconds ago.  The last packet sent successfully to the server was 1 milliseconds ago.\n        at org.datanucleus.api.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:451)\n        at org.datanucleus.api.jdo.JDOQuery.execute(JDOQuery.java:275)\n        at org.apache.hadoop.hive.metastore.ObjectStore.getMTable(ObjectStore.java:900)\n        at org.apache.hadoop.hive.metastore.ObjectStore.getTable(ObjectStore.java:832)\n        at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)\n\n[full stack trace is below]\n\nSubsequent transactions go through fine, however. This only occurs if the metastore has has been idle for a while.\n\nWe've been looking at the code and the problem seems to lie in the channel between the driver and metastore connection pool. We looked at the wait time configuration settings both mysql and BoneCP. Both of them are set for max value. \n\nOur hive 0.12 install uses DBCP for datanucleus.connectionPoolingType, not BoneCP and we don't see these issues there. We are not running Tez.\n\nThis seems like such a basic issue that we'd thought to check and see if anyone else has encountered it. Any insights would be greatly appreciated.\n\n=================\n\nFull stack trace:\n\n2014-06-09 05:13:52,066 ERROR bonecp.ConnectionHandle (ConnectionHandle.java:markPossiblyBroken(388)) - Database access problem. Killing off this connection and all remaining connectio\nns in the connection pool. SQL State = 08S01\n2014-06-09 05:13:52,068 ERROR metastore.RetryingHMSHandler (RetryingHMSHandler.java:invoke(157)) - Retrying HMSHandler after 1000 ms (attempt 1 of 1) with error: javax.jdo.JDODataStore\nException: Communications link failure\n\nThe last packet successfully received from the server was 502,751 milliseconds ago.  The last packet sent successfully to the server was 1 milliseconds ago.\n        at org.datanucleus.api.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:451)\n        at org.datanucleus.api.jdo.JDOQuery.execute(JDOQuery.java:275)\n        at org.apache.hadoop.hive.metastore.ObjectStore.getMTable(ObjectStore.java:900)\n        at org.apache.hadoop.hive.metastore.ObjectStore.getTable(ObjectStore.java:832)\n        at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:606)\n        at org.apache.hadoop.hive.metastore.RawStoreProxy.invoke(RawStoreProxy.java:108)\n        at com.sun.proxy.$Proxy0.getTable(Unknown Source)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.get_table(HiveMetaStore.java:1559)\n        at sun.reflect.GeneratedMethodAccessor15.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:606)\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invoke(RetryingHMSHandler.java:105)\n        at com.sun.proxy.$Proxy11.get_table(Unknown Source)\n        at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Processor$get_table.getResult(ThriftHiveMetastore.java:8146)\n        at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Processor$get_table.getResult(ThriftHiveMetastore.java:8130)\n        at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\n        at org.apache.hadoop.hive.metastore.TUGIBasedProcessor$1.run(TUGIBasedProcessor.java:110)\n        at org.apache.hadoop.hive.metastore.TUGIBasedProcessor$1.run(TUGIBasedProcessor.java:107)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:415)\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)\n        at org.apache.hadoop.hive.shims.HadoopShimsSecure.doAs(HadoopShimsSecure.java:500)\n        at org.apache.hadoop.hive.metastore.TUGIBasedProcessor.process(TUGIBasedProcessor.java:118)\n        at org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:206)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        at java.lang.Thread.run(Thread.java:744)\nNestedThrowablesStackTrace:\ncom.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure\n\nThe last packet successfully received from the server was 502,751 milliseconds ago.  The last packet sent successfully to the server was 1 milliseconds ago.\n        at sun.reflect.GeneratedConstructorAccessor41.newInstance(Unknown Source)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n        at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)\n        at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)\n        at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3603)\n        at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3492)\n        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4043)\n        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2503)\n        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2664)\n        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2788)\n        at com.mysql.jdbc.ConnectionImpl.setAutoCommit(ConnectionImpl.java:5282)\n        at com.jolbox.bonecp.ConnectionHandle.setAutoCommit(ConnectionHandle.java:1292)\n        at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getConnection(ConnectionFactoryImpl.java:440)\n        at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getXAResource(ConnectionFactoryImpl.java:378)\n        at org.datanucleus.store.connection.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:328)\n        at org.datanucleus.store.connection.AbstractConnectionFactory.getConnection(AbstractConnectionFactory.java:94)\n        at org.datanucleus.store.AbstractStoreManager.getConnection(AbstractStoreManager.java:430)\n        at org.datanucleus.store.AbstractStoreManager.getConnection(AbstractStoreManager.java:396)\n        at org.datanucleus.store.rdbms.query.JDOQLQuery.performExecute(JDOQLQuery.java:621)\n        at org.datanucleus.store.query.Query.executeQuery(Query.java:1786)\n        at org.datanucleus.store.query.Query.executeWithArray(Query.java:1672)\n        at org.datanucleus.api.jdo.JDOQuery.execute(JDOQuery.java:266)\n        at org.apache.hadoop.hive.metastore.ObjectStore.getMTable(ObjectStore.java:900)\n        at org.apache.hadoop.hive.metastore.ObjectStore.getTable(ObjectStore.java:832)\n        at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:606)\n        at org.apache.hadoop.hive.metastore.RawStoreProxy.invoke(RawStoreProxy.java:108)\n        at com.sun.proxy.$Proxy0.getTable(Unknown Source)\n        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.get_table(HiveMetaStore.java:1559)\n        at sun.reflect.GeneratedMethodAccessor15.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:606)\n        at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invoke(RetryingHMSHandler.java:105)\n        at com.sun.proxy.$Proxy11.get_table(Unknown Source)\n        at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Processor$get_table.getResult(ThriftHiveMetastore.java:8146)\n        at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Processor$get_table.getResult(ThriftHiveMetastore.java:8130)\n        at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\n        at org.apache.hadoop.hive.metastore.TUGIBasedProcessor$1.run(TUGIBasedProcessor.java:110)\n        at org.apache.hadoop.hive.metastore.TUGIBasedProcessor$1.run(TUGIBasedProcessor.java:107)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:415)\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)\n        at org.apache.hadoop.hive.shims.HadoopShimsSecure.doAs(HadoopShimsSecure.java:500)\n        at org.apache.hadoop.hive.metastore.TUGIBasedProcessor.process(TUGIBasedProcessor.java:118)\n        at org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:206)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        at java.lang.Thread.run(Thread.java:744)\nCaused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.\n        at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:3052)\n        at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3503)\n        ... 44 more","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"401967","customfield_12312823":null,"summary":"BoneCP Connection Pooling throwing JDODataStoreException with Hive 0.13.1 ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Bala+Krishna","name":"Bala Krishna","key":"bala krishna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bala Krishna","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Bala+Krishna","name":"Bala Krishna","key":"bala krishna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bala Krishna","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Hadoop 2.2.0\nHive 0.13.1,HIve 0.14.0\nBoneCP 0.8.0.RELEASE","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12723713/comment/14253101","id":"14253101","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mziemba","name":"mziemba","key":"mziemba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michał Ziemba","active":true,"timeZone":"Europe/Warsaw"},"body":"We have observed the same issue, running Hive 0.13.1 from CDH 5.2.1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mziemba","name":"mziemba","key":"mziemba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michał Ziemba","active":true,"timeZone":"Europe/Warsaw"},"created":"2014-12-19T07:40:09.508+0000","updated":"2014-12-19T07:40:09.508+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12723713/comment/14342654","id":"14342654","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishal.rajan","name":"vishal.rajan","key":"vishal.rajan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vishal.rajan&avatarId=34691","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vishal.rajan&avatarId=34691","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vishal.rajan&avatarId=34691","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vishal.rajan&avatarId=34691"},"displayName":"vishal.rajan","active":true,"timeZone":"Asia/Kolkata"},"body":"We are also seeing a similar issue with hive 0.14.0..\n\n2015-03-01 17:02:58,399 ERROR [BoneCP-pool-watch-thread]: bonecp.BoneCP (BoneCP.java:obtainInternalConnection(292)) - Failed to acquire connection to jdbc:mysql://mysqldb/hive?createDatabaseIfNotExist=true. Sleeping for 7000 ms. Attempts left: 4\ncom.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n        at sun.reflect.GeneratedConstructorAccessor7187.newInstance(Unknown Source)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n        at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)\n        at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1129)\n        at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:358)\n        at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2498)\n        at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2535)\n        at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2320)\n        at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:834)\n        at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:46)\n        at sun.reflect.GeneratedConstructorAccessor52.newInstance(Unknown Source)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n        at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)\n        at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:416)\n        at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:347)\n        at java.sql.DriverManager.getConnection(DriverManager.java:571)\n        at java.sql.DriverManager.getConnection(DriverManager.java:187)\n        at com.jolbox.bonecp.BoneCP.obtainRawInternalConnection(BoneCP.java:361)\n        at com.jolbox.bonecp.BoneCP.obtainInternalConnection(BoneCP.java:269)\n        at com.jolbox.bonecp.ConnectionHandle.<init>(ConnectionHandle.java:242)\n        at com.jolbox.bonecp.PoolWatchThread.fillConnections(PoolWatchThread.java:115)\n        at com.jolbox.bonecp.PoolWatchThread.run(PoolWatchThread.java:85)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        at java.lang.Thread.run(Thread.java:745)\nCaused by: java.net.NoRouteToHostException: Cannot assign requested address","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vishal.rajan","name":"vishal.rajan","key":"vishal.rajan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vishal.rajan&avatarId=34691","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vishal.rajan&avatarId=34691","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vishal.rajan&avatarId=34691","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vishal.rajan&avatarId=34691"},"displayName":"vishal.rajan","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-03-02T03:16:55.614+0000","updated":"2015-03-02T03:16:55.614+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12723713/comment/14484303","id":"14484303","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wolf31o2","name":"wolf31o2","key":"wolf31o2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=wolf31o2&avatarId=24269","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wolf31o2&avatarId=24269","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wolf31o2&avatarId=24269","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wolf31o2&avatarId=24269"},"displayName":"Chris Gianelloni","active":true,"timeZone":"America/New_York"},"body":"This can be worked around by setting the following in hive-site.xml:\n\n{code}\n<property>\n  <name>datanucleus.connectionPoolingType</name>\n  <value>DBCP</value>\n</property>\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wolf31o2","name":"wolf31o2","key":"wolf31o2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=wolf31o2&avatarId=24269","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=wolf31o2&avatarId=24269","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=wolf31o2&avatarId=24269","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=wolf31o2&avatarId=24269"},"displayName":"Chris Gianelloni","active":true,"timeZone":"America/New_York"},"created":"2015-04-07T23:13:14.367+0000","updated":"2015-04-07T23:13:14.367+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12723713/comment/14991238","id":"14991238","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vikashardia","name":"vikashardia","key":"vikashardia","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"vikas hardia","active":true,"timeZone":"Etc/UTC"},"body":"I am getting the same error on Hive version 1.2.1.2.3 running on HDP 2.3.0 VM setting up this property dose not resolve the problem. Please help","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vikashardia","name":"vikashardia","key":"vikashardia","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"vikas hardia","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-05T06:41:14.741+0000","updated":"2015-11-05T06:41:14.741+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12723713/comment/15158568","id":"15158568","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chidouhu","name":"chidouhu","key":"chidouhu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chidouhu&avatarId=22930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chidouhu&avatarId=22930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chidouhu&avatarId=22930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chidouhu&avatarId=22930"},"displayName":"Jun Fang","active":true,"timeZone":"Etc/UTC"},"body":"I am getting the same error in SparkSQL with Hive 0.13 metastore, but everything is all right when link with Hive 0.12. I roll back bonecp and datanucleus to the version in Hive 0.12, then everything goes fine. Here are all dependency:\n\nHive 0.13:\nbonecp 0.8.0.RELEASE\ndatanucleus-api-jdo 3.2.6\ndatanucleus-core 3.2.10\ndatanucleus-rdbms 3.2.9\n\nHive 0.12:\nbonecp 0.7.1.RELEASE\ndatanucleus-api-jdo 3.2.1\ndatanucleus-core 3.2.2\ndatanucleus-rdbms 3.2.1\ncommons-pool 1.5.4\n\nIt seems all the dependencies below works.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chidouhu","name":"chidouhu","key":"chidouhu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chidouhu&avatarId=22930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chidouhu&avatarId=22930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chidouhu&avatarId=22930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chidouhu&avatarId=22930"},"displayName":"Jun Fang","active":true,"timeZone":"Etc/UTC"},"created":"2016-02-23T08:51:18.675+0000","updated":"2016-02-23T08:51:18.675+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-7290/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1x6dj:"}}