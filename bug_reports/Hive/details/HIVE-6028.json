{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12684377","self":"https://issues.apache.org/jira/rest/api/2/issue/12684377","key":"HIVE-6028","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324986","id":"12324986","description":"released","name":"0.13.0","archived":false,"released":true,"releaseDate":"2014-04-21"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2013-12-13T17:39:40.290+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Dec 17 22:27:55 UTC 2013","customfield_12310420":"363449","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_427951065_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-12-17T22:28:35.750+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-6028/watchers","watchCount":3,"isWatching":false},"created":"2013-12-12T23:36:04.744+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324312","id":"12324312","description":"released","name":"0.12.0","archived":false,"released":true,"releaseDate":"2013-10-15"}],"issuelinks":[{"id":"12380113","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12380113","type":{"id":"12310060","name":"Container","inward":"Is contained by","outward":"contains","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310060"},"inwardIssue":{"id":"12659223","key":"HIVE-4914","self":"https://issues.apache.org/jira/rest/api/2/issue/12659223","fields":{"summary":"filtering via partition name should be done inside metastore server (implementation)","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-12-17T22:28:35.777+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"When parsing/analyzing query, hive treats partition predicate value as int instead of string. This breaks down and leads to incorrect result when the partition predicate value starts with int 0, e.g: hour=00, hour=05 etc.\n\nThe following repro illustrates the bug:\n-- create test table and partition, populate with some data\ncreate table test_partition_pred(col1 int) partitioned by (hour STRING);\ninsert into table test_partition_pred partition (hour=00) select 21 FROM  some_table limit 1;\n\n-- this query returns incorrect results, i.e. just empty set.\nselect * from test_partition_pred where hour=00;\nOK\n\n-- this query returns correct result. Note predicate value is string literal\nselect * from test_partition_pred where hour='00';\nOK\n21\t00\n\nexplain plan illustrates how the query was interpreted. Particularly the partition predicate is pushed down as regular filter clause, with hour=0 as predicate. See attached explain plan file.\n\nNote:\n1. The type of the partition column is defined as string, not int.\n2. This is a regression in Hive 0.12. This used to work in Hive 0.11\n3. Not an issue when the partition value starts with integer other than 0, e.g hour=10, hour=11 etc.\n4. As seen above, workaround is to use string literal hour='00' etc.\n\nThis should not be too bad if in the failing case hive complains that partition hour=0 is not found, or complains literal type doesn't match column type. Instead hive silently pushes it down as filter clause, and query succeeds with empty set as result.\n\nWe found this out in our production tables partitioned by hour, only a few days after it started occurring, when there were empty data sets for partitions hour=00 to hour=09.\n\n\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12618495","id":"12618495","filename":"Hive-6028-explain-plan.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pala","name":"pala","key":"pala","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pala M Muthaia","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-12T23:40:49.688+0000","size":1771,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12618495/Hive-6028-explain-plan.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"363755","customfield_12312823":null,"summary":"Partition predicate literals are not interpreted correctly.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pala","name":"pala","key":"pala","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pala M Muthaia","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pala","name":"pala","key":"pala","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pala M Muthaia","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684377/comment/13847700","id":"13847700","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"If I understand correctly, the \"workaround\" mentioned is what a user is expected to be doing. The partition key has string as type, so the constant value for the key should be string literals instead of integers. Further, Hive allows implicit conversions, such the case demonstrated, which is common in many DBs. Disallowing that is too restrictive and less usable.\n\nIn my opinion, user should be aware of the implicit conversion and its consequence. If not sure, match the type explicitly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-13T17:39:40.290+0000","updated":"2013-12-13T17:39:40.290+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684377/comment/13847924","id":"13847924","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pala","name":"pala","key":"pala","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pala M Muthaia","active":true,"timeZone":"America/Los_Angeles"},"body":"Xuefu, you are right that using string literal is the correct way. \n\nI suppose previously implicit conversion was actually supported in some sense, because the literal 01 was actually treated as string. However, in 0.12, even though hour partition column is STRING, when i specify hour=01, the literal 01 is not converted implicitly into string, but instead is treated as int.\n\ni digged into this a bit more and suspect that this change in behavior is related to commit for HIVE-2702, which adds support for integral partition columns. Previously, all partition filter value literals were always treated as string. Now, both integral and string types are supported.\n\nI think the best fix would be to support implicit conversion behavior again. At least, a type check and subsequent error should be thrown, so that when user specifies hour=01, query fails and user can fix his/her query, though this will be more disruptive change for end users.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pala","name":"pala","key":"pala","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pala M Muthaia","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-13T21:35:12.255+0000","updated":"2013-12-13T21:35:12.255+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684377/comment/13847992","id":"13847992","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"[~pala] Thanks for the clarification. It seems there is some issue about data conversion. Your partition column has a type of string, so, if implicit conversion is due, the integer literals should be converted to strings. It's wrong to treat your partition column as integer type if that's what's happening. Without further investigation, it's hard to draw conclusion yet. Throwing a semantic error for a case like this is probably something Hive shouldn't do, as hr=02 is a valid expression because the data types can be implicitly converted.\n\nThis seems to be bug somewhere, which needs more research. If you'd like to work on this, please feel free to submit a patch. Otherwise, as a workaround, you may just use string literals for now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-13T22:27:13.108+0000","updated":"2013-12-13T22:27:13.108+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684377/comment/13848003","id":"13848003","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"body":"hmm, I cannot repro this on trunk, Filter is not added to the plan for either \"'00'\" or just \"00\" (w/o quotes)\nI think Filter might actually be culprit, rather than partition filtering. Let me try something...\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-13T22:31:06.583+0000","updated":"2013-12-13T22:31:06.583+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684377/comment/13848009","id":"13848009","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"body":"No, filter works (on trunk) with non-partition string column. It has the same condition (expr: (col1 = 1)), but it matches 01.\n[~pala] can you attach debug logs from client and metastore?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-13T22:34:52.673+0000","updated":"2013-12-13T22:34:52.673+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684377/comment/13848079","id":"13848079","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"body":"Yeah nm I built 12 and can repro. Yeah it seems to be the root cause of the issue; 12 does validation on the client and apparently doesn't check that types are compatible, only that both are supported (this is the root cause). Then it uses getPartitionsByFilter to query partitions and filter being sent (expression.getExprString) is changed to \"hour = 0\", which fails.\nOf course you could say that SemanticAnalyzer should have caught this earlier, what is 00? It doesn't look like it should be treated like a valid string to me.\n\nTrunk uses getPartitionsByExpr, and validates on server that column and value type are compatible. As far as I understand hive doesn't do sub-releases; how should this jira be handled, closed as already fixed in 13? \nOr do we want to change SemanticAnalyzer to be less lenient?\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-13T23:55:06.466+0000","updated":"2013-12-13T23:55:06.466+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684377/comment/13848120","id":"13848120","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pala","name":"pala","key":"pala","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pala M Muthaia","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for following up Sergey Shelukhin. Regarding 00, its just a convention we follow in partition names, hour=00 to hour=23. \n\nIs there a commit in trunk that we could cherry pick and apply on Hive 0.12 to fix this issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pala","name":"pala","key":"pala","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pala M Muthaia","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-14T00:58:11.540+0000","updated":"2013-12-14T00:58:11.540+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684377/comment/13848123","id":"13848123","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"body":"Wrt 00, my point is that 00 is not a valid string so it should not work.\nDepending on opinion it should either give an error (string-int compare), or not match (as it doesn't in 0.12) because column type is string, and 00 to me is an integer 0, so if type is coerced to type of the column, '00' != '0' . \nCan you work around by using properly quoted strings, e.g. '00'?\n\nAs for commit, that would be HIVE-4914, but it's quite a large one, it may have some dependencies and bugfixes.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-14T01:10:03.599+0000","updated":"2013-12-14T01:10:03.599+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684377/comment/13848125","id":"13848125","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"body":"E.g. postgres:\n\n{noformat}\nsergey=# select * from foo where s = 01;\nERROR:  operator does not exist: character varying = integer\nLINE 1: select * from foo where s = 01;\n                                  ^\nHINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.\n{noformat}\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-14T01:12:17.705+0000","updated":"2013-12-14T01:12:17.705+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684377/comment/13850984","id":"13850984","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pala","name":"pala","key":"pala","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pala M Muthaia","active":true,"timeZone":"America/Los_Angeles"},"body":"Sergey, the same thing above works in hive 12, for a regular string column (as opposed to partition column). \n\nIn any case, given the cost of fix vs severity, we will avoid depending on type coercion and use proper literals.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pala","name":"pala","key":"pala","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pala M Muthaia","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-17T22:10:28.204+0000","updated":"2013-12-17T22:10:28.204+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12684377/comment/13851006","id":"13851006","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"body":"Yeah, I agree that this is breakage in 12 compared to 11. Sorry for that. Good to know that the workaround works.\n\nI will resolve as dup of 4914, as the fix is contained therein.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-17T22:27:55.275+0000","updated":"2013-12-17T22:27:55.275+0000"}],"maxResults":11,"total":11,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-6028/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1qndj:"}}