{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13040563","self":"https://issues.apache.org/jira/rest/api/2/issue/13040563","key":"HIVE-15822","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2017-02-06T22:07:53.660+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jun 15 22:38:25 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_42735459664_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2018-06-15T23:41:44.548+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-15822/watchers","watchCount":7,"isWatching":false},"created":"2017-02-06T08:44:04.960+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12332384","id":"12332384","name":"1.2.1","archived":false,"released":true,"releaseDate":"2015-06-26"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335838","id":"12335838","description":"Maintenance branch for 2.1 ","name":"2.1.1","archived":false,"released":true,"releaseDate":"2016-12-08"}],"issuelinks":[{"id":"12536577","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12536577","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"13081537","key":"HIVE-16935","self":"https://issues.apache.org/jira/rest/api/2/issue/13081537","fields":{"summary":"Hive should strip comments from input before choosing which CommandProcessor to run.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12493520","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12493520","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"13040541","key":"HIVE-15820","self":"https://issues.apache.org/jira/rest/api/2/issue/13040541","fields":{"summary":"comment at the head of beeline -e","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12495119","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12495119","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"outwardIssue":{"id":"13040541","key":"HIVE-15820","self":"https://issues.apache.org/jira/rest/api/2/issue/13040541","fields":{"summary":"comment at the head of beeline -e","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=muxin","name":"muxin","key":"muxin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"muxin","active":true,"timeZone":"Asia/Chongqing"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-06-15T23:41:44.582+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12324409","id":"12324409","name":"Beeline"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12320408","id":"12320408","name":"HiveServer2","description":"Tracks issues related to HiveServer2"}],"timeoriginalestimate":null,"description":"way to reproduce this error:\nbeeline -u jdbc:hive2://localhost:10000 -n test -e \"\nshow databases;--some comment here\nshow tables;\"\n\nit will only execute 'show databases', and consider \n'--some comment here\nshow tables;'\nas comment( all sql under the first comment appeared after semicolon).\n\nwhen the comment is also end with semicolon, the result will be right.\n\nthe root cause is that beeline will only consider a entire command is inputed when a line is end with semicolon, otherwise if this line is not started with '--' or '#' beeline will combine it with next line until meet semicolon in the end. so actually the comment above is not removed(which causes the error). then beeline split the entire line by ';', so 'show databases' is recognized and executed,\n'--some comment here\\n show tables' is considered a comment and discarded.\n\nmy solution is to just remove comment before split by ';', the code can refer to solution 2 for similar issue :https://issues.apache.org/jira/browse/HIVE-15820","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12853951","id":"12853951","filename":"HIVE-15822.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=muxin","name":"muxin","key":"muxin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"muxin","active":true,"timeZone":"Asia/Chongqing"},"created":"2017-02-22T12:37:12.644+0000","size":597,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12853951/HIVE-15822.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"beeline ignore all sql under comment after semicolon","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=muxin","name":"muxin","key":"muxin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"muxin","active":true,"timeZone":"Asia/Chongqing"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=muxin","name":"muxin","key":"muxin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"muxin","active":true,"timeZone":"Asia/Chongqing"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13040563/comment/15854836","id":"15854836","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"I can take a look at this. Let me know [~muxin] if you were planning to work on this and I will re-assign it you.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-06T22:07:53.660+0000","updated":"2017-02-06T22:07:53.660+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13040563/comment/15878112","id":"15878112","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=muxin","name":"muxin","key":"muxin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"muxin","active":true,"timeZone":"Asia/Chongqing"},"body":"this patch depends on patch for https://issues.apache.org/jira/browse/HIVE-15820 , please review the code there first","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=muxin","name":"muxin","key":"muxin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"muxin","active":true,"timeZone":"Asia/Chongqing"},"created":"2017-02-22T12:39:10.212+0000","updated":"2017-02-22T12:39:10.212+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13040563/comment/16185922","id":"16185922","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=barrywhart","name":"barrywhart","key":"barrywhart","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Barry Hart","active":true,"timeZone":"America/New_York"},"body":"+1 for fixing this. This behavior is really confusing and makes it hard to comment my SQL.\n\nI see the same behavior when running HiveQL commands on Google DataProc using their web service APIs.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=barrywhart","name":"barrywhart","key":"barrywhart","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Barry Hart","active":true,"timeZone":"America/New_York"},"created":"2017-09-29T14:37:30.665+0000","updated":"2017-09-29T14:39:45.717+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13040563/comment/16341855","id":"16341855","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wardw123","name":"wardw123","key":"wardw123","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34059","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34059","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34059","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34059"},"displayName":"Ward Williams","active":true,"timeZone":"Etc/UTC"},"body":"Yes, +1 for fixing this too! Super annoying and confusing.Â ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wardw123","name":"wardw123","key":"wardw123","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=34059","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34059","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34059","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34059"},"displayName":"Ward Williams","active":true,"timeZone":"Etc/UTC"},"created":"2018-01-27T00:38:03.256+0000","updated":"2018-01-27T00:38:03.256+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13040563/comment/16511892","id":"16511892","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=itxx00","name":"itxx00","key":"itxx00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"itxx00","active":true,"timeZone":"Etc/UTC"},"body":"+1 for fixing this!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=itxx00","name":"itxx00","key":"itxx00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"itxx00","active":true,"timeZone":"Etc/UTC"},"created":"2018-06-14T01:56:05.136+0000","updated":"2018-06-14T01:56:05.136+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13040563/comment/16514462","id":"16514462","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgarg","name":"vgarg","key":"vgarg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vgarg&avatarId=30430","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vgarg&avatarId=30430","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vgarg&avatarId=30430","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vgarg&avatarId=30430"},"displayName":"Vineet Garg","active":true,"timeZone":"America/Los_Angeles"},"body":"This particular scenario is already fixed in Hive 3.0  by HIVE-16935. \r\n{code:sql} \r\n-e \"\r\nshow databases;--some comment here\r\nshow tables;\"\r\n{code}\r\n\r\nBeeline executes both {{show databases}} and {{show tables}} after removing comments.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgarg","name":"vgarg","key":"vgarg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=vgarg&avatarId=30430","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vgarg&avatarId=30430","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vgarg&avatarId=30430","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vgarg&avatarId=30430"},"displayName":"Vineet Garg","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-06-15T22:38:25.421+0000","updated":"2018-06-15T22:38:53.306+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-15822/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i39ngv:"}}