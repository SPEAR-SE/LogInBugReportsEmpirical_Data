{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12971974","self":"https://issues.apache.org/jira/rest/api/2/issue/12971974","key":"HIVE-13818","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334255","id":"12334255","name":"2.1.0","archived":false,"released":true,"releaseDate":"2016-06-20"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2016-05-23T08:39:24.426+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon May 30 23:53:17 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_324483464_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_339178381","customfield_12312321":null,"resolutiondate":"2016-05-30T23:53:26.240+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-13818/watchers","watchCount":4,"isWatching":false},"created":"2016-05-23T07:32:24.437+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334255","id":"12334255","name":"2.1.0","archived":false,"released":true,"releaseDate":"2016-06-20"}],"issuelinks":[{"id":"12467661","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12467661","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"inwardIssue":{"id":"12973312","key":"HIVE-13874","self":"https://issues.apache.org/jira/rest/api/2/issue/12973312","fields":{"summary":"Tighten up EOF checking in Fast DeserializeRead classes; display better exception information; add new Unit Tests","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-06-21T15:08:26.812+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12325007","id":"12325007","name":"Hive"}],"timeoriginalestimate":null,"description":"Changes for HIVE-13682 did fix a bug in Fast Hash Tables, but evidently not this issue according to Gopal/Rajesh/Nita.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12805591","id":"12805591","filename":"HIVE-13818.01.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"created":"2016-05-23T08:02:49.093+0000","size":140707,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12805591/HIVE-13818.01.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12805599","id":"12805599","filename":"HIVE-13818.02.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"created":"2016-05-23T09:25:58.645+0000","size":144034,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12805599/HIVE-13818.02.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12806542","id":"12806542","filename":"HIVE-13818.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"created":"2016-05-27T01:40:16.644+0000","size":17036,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12806542/HIVE-13818.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12806322","id":"12806322","filename":"vector_bug.q","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"created":"2016-05-26T08:58:50.845+0000","size":623,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12806322/vector_bug.q"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12806323","id":"12806323","filename":"vector_bug.q.out","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"created":"2016-05-26T08:59:31.725+0000","size":5809,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12806323/vector_bug.q.out"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Fast Vector MapJoin Long hashtable has to handle all integral types","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12971974/comment/15296062","id":"15296062","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"body":"Patch HIVE-13818.01.patch doesn't have the fix.\n\nIt has new Unit Tests and added diagnostics for exceptions thrown by DeserializeRead classes.  The details of both the DeserializeRead implementation object and VectorMapJoinHashMapResult object are displayed along with the original exception.  This should help diagnose the issue.\n\nReworked LazyBinaryDeserializeRead to throw EOFException and other minor cleanup.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"created":"2016-05-23T07:51:58.504+0000","updated":"2016-05-23T07:51:58.504+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12971974/comment/15296106","id":"15296106","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"body":"The new error is triggered from BinarySortable deserializing the keys, the added debug info might not be helpful in this scenario.\n\nThe keyLength and the actual key has a mis-match (7 vs 5) - I'm guessing the missing bytes are the hasNull and NULLS_FIRST bytes.\n\n{code}\nCaused by: org.apache.hadoop.hive.ql.metadata.HiveException: org.apache.hadoop.hive.ql.metadata.HiveException: java.io.EOFException\n\tat org.apache.hadoop.hive.ql.exec.tez.LlapObjectCache.retrieve(LlapObjectCache.java:106)\n\tat org.apache.hadoop.hive.ql.exec.tez.LlapObjectCache$1.call(LlapObjectCache.java:131)\n\t... 4 more\nCaused by: org.apache.hadoop.hive.ql.metadata.HiveException: java.io.EOFException\n\tat org.apache.hadoop.hive.ql.exec.vector.mapjoin.fast.VectorMapJoinFastHashTableLoader.load(VectorMapJoinFastHashTableLoader.java:106)\n\tat org.apache.hadoop.hive.ql.exec.MapJoinOperator.loadHashTable(MapJoinOperator.java:304)\n\tat org.apache.hadoop.hive.ql.exec.MapJoinOperator$1.call(MapJoinOperator.java:185)\n\tat org.apache.hadoop.hive.ql.exec.MapJoinOperator$1.call(MapJoinOperator.java:181)\n\tat org.apache.hadoop.hive.ql.exec.tez.LlapObjectCache.retrieve(LlapObjectCache.java:104)\n\t... 5 more\nCaused by: java.io.EOFException\n\tat org.apache.hadoop.hive.serde2.binarysortable.InputByteBuffer.read(InputByteBuffer.java:54)\n\tat org.apache.hadoop.hive.serde2.binarysortable.fast.BinarySortableDeserializeRead.readCheckNull(BinarySortableDeserializeRead.java:213)\n\tat org.apache.hadoop.hive.ql.exec.vector.mapjoin.fast.VectorMapJoinFastLongHashTable.putRow(VectorMapJoinFastLongHashTable.java:81)\n\tat org.apache.hadoop.hive.ql.exec.vector.mapjoin.fast.VectorMapJoinFastTableContainer.putRow(VectorMapJoinFastTableContainer.java:181)\n\tat org.apache.hadoop.hive.ql.exec.vector.mapjoin.fast.VectorMapJoinFastHashTableLoader.load(VectorMapJoinFastHashTableLoader.java:98)\n\t... 9 more\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"created":"2016-05-23T08:39:24.426+0000","updated":"2016-05-23T08:40:41.220+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12971974/comment/15296111","id":"15296111","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"body":"Update theory - the issue disappeared when I did {{cast as bigint}} to every join column, so that they wouldn't be the 4 byte ints (4+1 byte=5).\n\n{code}\nselect  i_item_id,\n        s_state,\n        avg(ss_quantity) agg1,\n        avg(ss_list_price) agg2,\n        avg(ss_coupon_amt) agg3,\n        avg(ss_sales_price) agg4\n from store_sales, customer_demographics, date_dim, store, item\n where cast(store_sales.ss_sold_date_sk as bigint) = cast(date_dim.d_date_sk as bigint) and\n       cast(store_sales.ss_item_sk as bigint) = cast(item.i_item_sk as bigint) and\n       cast(store_sales.ss_store_sk as bigint) = cast(store.s_store_sk as bigint) and\n       cast(store_sales.ss_cdemo_sk as bigint) = cast(customer_demographics.cd_demo_sk as bigint) and\n       customer_demographics.cd_gender = 'F' and\n       customer_demographics.cd_marital_status = 'D' and\n       customer_demographics.cd_education_status = 'Unknown' and\n       date_dim.d_year = 1998 and\n       store.s_state in ('KS','AL', 'MN', 'AL', 'SC', 'VT')\n group by i_item_id, s_state\n order by i_item_id\n         ,s_state\n limit 10;\n{code}\n\nThe BinarySortableDeserializeRead.java:213 is actually the Long parsing, which might be accidentally trying to deserialize an Int key using the Long codepath.\n\n{code}\n208     case LONG:\n209       {\n210         final boolean invert = columnSortOrderIsDesc[fieldIndex];\n211         long v = inputByteBuffer.read(invert) ^ 0x80;\n212         for (int i = 0; i < 7; i++) {\n213           v = (v << 8) + (inputByteBuffer.read(invert) & 0xff);\n214         }\n215         currentLong = v;\n216       }\n217       break;\n{code}\n\nThe sort order issues with var-int encoding might be the reason int & long are encoded in different byte widths inside BinarySortable.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"created":"2016-05-23T08:48:44.844+0000","updated":"2016-05-23T08:50:06.621+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12971974/comment/15296154","id":"15296154","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"body":"Added try/catch and detailed information to deserializing in Fast Vector MapJoin hash table during addRow, too.  But this probably will not provide too much information here.\n\nBut yes, the BinarySortableDeserializeRead is not configured with the sortOrder in this case and this could be the bug.\n\n[~gopalv]  thanks for your comments.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"created":"2016-05-23T09:29:31.267+0000","updated":"2016-05-23T09:29:31.267+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12971974/comment/15296167","id":"15296167","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"body":"This specific case looks like it internally confuses an {{int:int}} join asa a {{long:long}} join.\n\nBoth are handled by same vector ops for joins, but need different ser/deser codepaths when reading off the SerDe into the LongColumnVector.\n\nThere's no real difference once the deserialization is complete.\n\nMy int:int join queries are throwing EOF inside Long decoding code.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"created":"2016-05-23T09:47:19.330+0000","updated":"2016-05-23T09:50:00.426+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12971974/comment/15301573","id":"15301573","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"body":"[~gopalv] [~ndembla] [~rajesh.balamohan] I need a simple repro for this.  A Q file and some data.  I just loaded up 1 Gb QE test data and TPCDS-15 ran fine.  So, I'm missing something.  Thanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"created":"2016-05-26T05:48:12.430+0000","updated":"2016-05-26T05:48:12.430+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12971974/comment/15301587","id":"15301587","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"body":"TPC-DS 55 is the one that failed - I will try to get a smaller repro for this, but it looks like it should fail in a two row test-case (or produce incorrect results at least).\n\nThe larger range join keys in hive-testbench were upgraded to BigInt sometime during the 100Tb testing, you might need to undo some schema changes there to repro this - you might not be testing the Integer:Integer join scenario.\n\nI'm repeating this from memory from debugging this a couple of nights ago (might build a repro tomorrow).\n\n{code}\n    if (keyBinarySortableDeserializeRead.readCheckNull()) {\n      return;\n    }\n\n    long key = VectorMapJoinFastLongHashUtil.deserializeLongKey(\n                            keyBinarySortableDeserializeRead, hashTableKeyType);\n{code}\n\nAs explained above, looks like the BinarySortableSerDe handles Long and Integer differently, so just because the Join ops says LongLongInner, the deserializer for Long cannot be used for joins involving integers.\n\nThis is *not* an issue with LazyBinary, only BinarySortable encodes Long and Integers differently. In all the runs I could manage, the join worked whenever I cast up to bigint.\n\nThe problem seems to be that readCheckNull() does not know of what the actual hashTableKeyType here & reads a Long out of an encoded Int & runs out of bytes to read (i.e not 8 bytes).\n\nFrom the readCheckNull(), this is where it goes into the deep end.\n\n{code}\n    /*\n     * We have a field and are positioned to it.  Read it.\n     */\n...\n        case INT:\n      {\n        final boolean invert = columnSortOrderIsDesc[fieldIndex];\n        int v = inputByteBuffer.read(invert) ^ 0x80;\n        for (int i = 0; i < 3; i++) {\n          v = (v << 8) + (inputByteBuffer.read(invert) & 0xff);\n        }\n        currentInt = v;\n      }\n      break;\n    case LONG:\n      {\n        final boolean invert = columnSortOrderIsDesc[fieldIndex];\n        long v = inputByteBuffer.read(invert) ^ 0x80;\n        for (int i = 0; i < 7; i++) {\n          v = (v << 8) + (inputByteBuffer.read(invert) & 0xff);\n        }\n        currentLong = v;\n      }\n      break;\n{code}\n\nThe integer:integer join case hits the 2nd case expression there and throws an EOF. \n\nChanging all joins to Long:Long allows me to run queries successfully.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"created":"2016-05-26T06:08:32.818+0000","updated":"2016-05-26T06:08:32.818+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12971974/comment/15301635","id":"15301635","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"body":"Here's the smallest scenario which triggers the issue right now.\n\n{code}\ncreate temporary table x (a int) stored as orc;\ncreate temporary table y (b int) stored as orc;\ninsert into x values(1);\ninsert into y values(1);\nselect count(1) from x, y where a = b;\n\nCaused by: java.io.EOFException\n        at org.apache.hadoop.hive.serde2.binarysortable.InputByteBuffer.read(InputByteBuffer.java:54)\n        at org.apache.hadoop.hive.serde2.binarysortable.fast.BinarySortableDeserializeRead.readCheckNull(BinarySortableDeserializeRead.java:182)\n        at org.apache.hadoop.hive.ql.exec.vector.mapjoin.fast.VectorMapJoinFastLongHashTable.putRow(VectorMapJoinFastLongHashTable.java:81)\n        at org.apache.hadoop.hive.ql.exec.vector.mapjoin.fast.VectorMapJoinFastTableContainer.putRow(VectorMapJoinFastTableContainer.java:181)\n        at org.apache.hadoop.hive.ql.exec.vector.mapjoin.fast.VectorMapJoinFastHashTableLoader.load(VectorMapJoinFastHashTableLoader.java:98)\n{code}\n\nTo test the theory, I tried with\n\n{code}\ncreate temporary table x1 (a bigint) stored as orc;\ncreate temporary table y1 (b bigint) stored as orc;\ninsert into x1 values(1);\ninsert into y1 values(1);\nselect count(1) from x1, y1 where a = b;\n\nOK\n1\nTime taken: 1.532 seconds, Fetched: 1 row(s)\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"created":"2016-05-26T07:03:43.142+0000","updated":"2016-05-26T07:03:43.142+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12971974/comment/15301770","id":"15301770","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"body":"[~gopalv] Thank you very much for working on a repro.\n\nI've attached vector_bug.q and its Tez output.  The bug isn't triggered.  Can you see what I did wrong?  Thanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"created":"2016-05-26T08:58:08.112+0000","updated":"2016-05-26T08:58:08.112+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12971974/comment/15302844","id":"15302844","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"body":"The bug is limited to Fast hashtables\n\n{code}\nhive.mapjoin.hybridgrace.hashtable=false;\nhive.vectorized.execution.mapjoin.native.fast.hashtable.enabled=true;\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"created":"2016-05-26T20:14:46.552+0000","updated":"2016-05-26T20:14:46.552+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12971974/comment/15305562","id":"15305562","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12806542/HIVE-13818.1.patch\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 124 failed/errored test(s), 9096 tests executed\n*Failed tests:*\n{noformat}\nTestDbTxnManager - did not produce a TEST-*.xml file\nTestHWISessionManager - did not produce a TEST-*.xml file\nTestJdbcWithMiniHA - did not produce a TEST-*.xml file\nTestJdbcWithMiniMr - did not produce a TEST-*.xml file\nTestMiniTezCliDriver-auto_join1.q-schema_evol_text_vec_mapwork_part_all_complex.q-vector_complex_join.q-and-12-more - did not produce a TEST-*.xml file\nTestMiniTezCliDriver-auto_sortmerge_join_7.q-orc_merge9.q-tez_union_dynamic_partition.q-and-12-more - did not produce a TEST-*.xml file\nTestMiniTezCliDriver-cte_4.q-vector_non_string_partition.q-empty_join.q-and-12-more - did not produce a TEST-*.xml file\nTestMiniTezCliDriver-insert_values_non_partitioned.q-schema_evol_orc_nonvec_mapwork_part.q-union5.q-and-12-more - did not produce a TEST-*.xml file\nTestMiniTezCliDriver-join1.q-mapjoin_decimal.q-vectorized_distinct_gby.q-and-12-more - did not produce a TEST-*.xml file\nTestMiniTezCliDriver-load_dyn_part2.q-selectDistinctStar.q-vector_decimal_5.q-and-12-more - did not produce a TEST-*.xml file\nTestMiniTezCliDriver-mapjoin_mapjoin.q-cte_5.q-insert_into1.q-and-12-more - did not produce a TEST-*.xml file\nTestMiniTezCliDriver-schema_evol_text_nonvec_mapwork_part_all_primitive.q-bucket3.q-tez_fsstat.q-and-12-more - did not produce a TEST-*.xml file\nTestMiniTezCliDriver-schema_evol_text_nonvec_mapwork_table.q-vector_decimal_trailing.q-subquery_in.q-and-12-more - did not produce a TEST-*.xml file\nTestMiniTezCliDriver-update_orig_table.q-explainuser_4.q-update_after_multiple_inserts.q-and-12-more - did not produce a TEST-*.xml file\nTestMiniTezCliDriver-vector_coalesce.q-cbo_windowing.q-tez_join.q-and-12-more - did not produce a TEST-*.xml file\nTestMiniTezCliDriver-vector_distinct_2.q-tez_joins_explain.q-cte_mat_1.q-and-12-more - did not produce a TEST-*.xml file\nTestMiniTezCliDriver-vectorization_13.q-auto_sortmerge_join_13.q-tez_bmj_schema_evolution.q-and-12-more - did not produce a TEST-*.xml file\nTestMiniTezCliDriver-vectorization_16.q-vector_decimal_round.q-orc_merge6.q-and-12-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-insert_dir_distcp.q-skewjoin_onesideskew.q-bucket_many.q - did not produce a TEST-*.xml file\nTestMinimrCliDriver-orc_merge_diff_fs.q-bucket4.q-file_with_header_footer.q-and-1-more - did not produce a TEST-*.xml file\nTestNegativeCliDriver-udf_invalid.q-nopart_insert.q-insert_into_with_schema.q-and-734-more - did not produce a TEST-*.xml file\nTestOperationLoggingAPIWithTez - did not produce a TEST-*.xml file\nTestSchedulerQueue - did not produce a TEST-*.xml file\nTestSparkCliDriver-groupby6_map.q-join13.q-join_reorder3.q-and-12-more - did not produce a TEST-*.xml file\nTestSparkCliDriver-groupby_complex_types.q-groupby_map_ppr_multi_distinct.q-vectorization_16.q-and-12-more - did not produce a TEST-*.xml file\nTestSparkCliDriver-join_cond_pushdown_3.q-groupby7.q-auto_join17.q-and-12-more - did not produce a TEST-*.xml file\nTestSparkCliDriver-load_dyn_part5.q-load_dyn_part2.q-skewjoinopt16.q-and-12-more - did not produce a TEST-*.xml file\nTestSparkCliDriver-mapreduce2.q-groupby7_noskew.q-vectorization_5.q-and-12-more - did not produce a TEST-*.xml file\nTestSparkCliDriver-ptf_general_queries.q-groupby4.q-tez_joins_explain.q-and-12-more - did not produce a TEST-*.xml file\nTestSparkCliDriver-smb_mapjoin_4.q-groupby8_map.q-groupby4_map.q-and-12-more - did not produce a TEST-*.xml file\nTestVectorMapJoinFastLongHashMap - did not produce a TEST-*.xml file\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ivyDownload\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_12\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_list_bucket\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_constprog_partitioner\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_index_bitmap3\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.org.apache.hadoop.hive.cli.TestMiniTezCliDriver\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_create_merge_compressed\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cte_1\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_delete_where_partitioned\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_explainuser_2\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_join0\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_stats\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union6\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_update_all_partitioned\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_grouping_sets\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_join_part_col_char\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_outer_join4\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorization_2\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorization_6\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorization_pushdown\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorized_mapjoin\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join14\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join18\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join4\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join9\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join_reordering_values\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join_stats2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_sortmerge_join_5\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_avro_decimal_native\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_bucket_map_join_spark2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_bucketmapjoin12\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_bucketmapjoin4\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_bucketmapjoin_negative\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cbo_gby\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cbo_limit\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cbo_udf_udaf\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cross_join\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_date_join1\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_dynamic_rdd_cache\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_escape_clusterby1\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby2_map\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby3_map\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby3_map_skew\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby5_map\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby_multi_single_reducer3\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_identity_project_remove_skip\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_insert_into1\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join18_multi_distinct\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join3\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_cond_pushdown_2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_cond_pushdown_unqual4\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_merge_multi_expressions\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_star\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_limit_pushdown\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_load_dyn_part10\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_mapjoin_test_outer\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_nullgroup2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_pcr\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_ppd_join3\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_ppd_outer_join3\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_ptf\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_ptf_matchpath\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_ptf_rcfile\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_ptf_seqfile\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_sample4\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_skewjoinopt8\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_smb_mapjoin_11\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_smb_mapjoin_14\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_smb_mapjoin_18\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_smb_mapjoin_7\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_stats18\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_stats3\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_stats_partscan_1_23\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_subquery_in\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_timestamp_1\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_udf_in_file\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_udf_max\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_udf_percentile\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_union24\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_union_remove_1\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_union_remove_10\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_union_remove_3\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_union_remove_6\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_uniquejoin\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_cast_constant\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_groupby_3\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_mapjoin_reduce\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_0\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_part\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_short_regress\norg.apache.hadoop.hive.llap.tez.TestConverters.testFragmentSpecToTaskSpec\norg.apache.hadoop.hive.llap.tezplugins.TestLlapTaskSchedulerService.testDelayedLocalityNodeCommErrorImmediateAllocation\norg.apache.hadoop.hive.ql.lockmgr.TestDbTxnManager2.testLocksInSubquery\n{noformat}\n\nTest results: http://ec2-54-177-240-2.us-west-1.compute.amazonaws.com/job/PreCommit-HIVE-MASTER-Build/435/testReport\nConsole output: http://ec2-54-177-240-2.us-west-1.compute.amazonaws.com/job/PreCommit-HIVE-MASTER-Build/435/console\nTest logs: http://ec2-50-18-27-0.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-435/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 124 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12806542 - PreCommit-HIVE-MASTER-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2016-05-28T19:43:59.914+0000","updated":"2016-05-28T19:43:59.914+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12971974/comment/15306014","id":"15306014","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"body":"LGTM +1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"created":"2016-05-29T18:09:51.937+0000","updated":"2016-05-29T18:09:51.937+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12971974/comment/15307020","id":"15307020","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"body":"Committed to master and branch-2.1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"created":"2016-05-30T23:53:17.769+0000","updated":"2016-05-30T23:53:17.769+0000"}],"maxResults":13,"total":13,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-13818/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2ycqv:"}}