{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12914343","self":"https://issues.apache.org/jira/rest/api/2/issue/12914343","key":"HIVE-12461","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12332154","id":"12332154","description":"","name":"1.3.0","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-11-19T06:15:19.929+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Nov 24 06:32:46 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_8189036_*|*_3_*:*_1_*:*_201941_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_375435827","customfield_12312321":null,"resolutiondate":"2015-11-23T14:32:42.796+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-12461/watchers","watchCount":4,"isWatching":false},"created":"2015-11-19T03:55:36.032+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12332154","id":"12332154","description":"","name":"1.3.0","archived":false,"released":false}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aleksei","name":"Aleksei","key":"aleksei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aleksei Statkevich","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-11-24T06:32:46.303+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"{code}\n[INFO] Executed tasks\n[INFO] \n[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ hive-exec ---\n[INFO] Compiling 2423 source files to /Users/xzhang/apache/hive-git-commit/ql/target/classes\n[INFO] -------------------------------------------------------------\n[ERROR] COMPILATION ERROR : \n[INFO] -------------------------------------------------------------\n[ERROR] /Users/xzhang/apache/hive-git-commit/ql/src/java/org/apache/hadoop/hive/ql/Context.java:[352,10] error: cannot find symbol\n[INFO] 1 error\n[INFO] -------------------------------------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] Reactor Summary:\n[INFO] \n[INFO] Hive ............................................... SUCCESS [  2.636 s]\n[INFO] Hive Shims Common .................................. SUCCESS [  3.270 s]\n[INFO] Hive Shims 0.20S ................................... SUCCESS [  1.052 s]\n[INFO] Hive Shims 0.23 .................................... SUCCESS [  3.550 s]\n[INFO] Hive Shims Scheduler ............................... SUCCESS [  1.076 s]\n[INFO] Hive Shims ......................................... SUCCESS [  1.472 s]\n[INFO] Hive Common ........................................ SUCCESS [  5.989 s]\n[INFO] Hive Serde ......................................... SUCCESS [  6.923 s]\n[INFO] Hive Metastore ..................................... SUCCESS [ 19.424 s]\n[INFO] Hive Ant Utilities ................................. SUCCESS [  0.516 s]\n[INFO] Spark Remote Client ................................ SUCCESS [  3.305 s]\n[INFO] Hive Query Language ................................ FAILURE [ 34.276 s]\n[INFO] Hive Service ....................................... SKIPPED\n{code}\n\nPart of the code that's being complained:\n{code}\n343   /**\n344    * Remove any created scratch directories.\n345    */\n346   public void removeScratchDir() {\n347     for (Map.Entry<String, Path> entry : fsScratchDirs.entrySet()) {\n348       try {\n349         Path p = entry.getValue();\n350         FileSystem fs = p.getFileSystem(conf);\n351         fs.delete(p, true);\n352         fs.cancelDeleteOnExit(p);\n353       } catch (Exception e) {\n354         LOG.warn(\"Error Removing Scratch: \"\n355             + StringUtils.stringifyException(e));\n356       }\n{code}\nmight be related to HIVE-12268.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12332154","id":"12332154","description":"","name":"1.3.0","archived":false,"released":false}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12773181","id":"12773181","filename":"HIVE-12461-branch-1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aleksei","name":"Aleksei","key":"aleksei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aleksei Statkevich","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-19T06:15:19.925+0000","size":4330,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12773181/HIVE-12461-branch-1.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Branch-1 -Phadoop-1 build is broken","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12914343/comment/15012908","id":"15012908","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aleksei","name":"Aleksei","key":"aleksei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aleksei Statkevich","active":true,"timeZone":"America/Los_Angeles"},"body":"There are 2 problems that cause build failure.\n\n1. HIVE-11180 incorrectly resolved conflicts in HiveConf which resulted in one of the config values introduced in HIVE-11587 to be removed.\n\nThe fix is to put the parameter back in HiveConf.\n\n2. cancelDeleteOnExit() was implemented in HADOOP-8635 and is only available starting from 0.23.3. So, with hadoop-1 this method is not available.\n\nThe fix is to use hadoop shims. I decided to shim the operation \"delete and cancel\" instead of just \"cancel\", because having no-op \"cancel\" operation might be not what a user expects. However, together with \"delete\", \"cancel\" is more of an optimization.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aleksei","name":"Aleksei","key":"aleksei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aleksei Statkevich","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-19T06:15:19.929+0000","updated":"2015-11-19T06:15:19.929+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12914343/comment/15014168","id":"15014168","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-19T19:06:35.584+0000","updated":"2015-11-19T19:06:35.584+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12914343/comment/15021550","id":"15021550","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aleksei","name":"Aleksei","key":"aleksei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aleksei Statkevich","active":true,"timeZone":"America/Los_Angeles"},"body":"[~xuefuz], do you know why Hive QA hasn't run tests for this patch for 3 days already?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aleksei","name":"Aleksei","key":"aleksei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aleksei Statkevich","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-23T05:36:04.205+0000","updated":"2015-11-23T05:36:04.205+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12914343/comment/15021565","id":"15021565","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"No idea. I haven't seen test runs on branch-1 for a long time. If you can test locally that the build passes with hadoop-1/2, I think we can go ahead committing the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-23T06:01:50.101+0000","updated":"2015-11-23T06:01:50.101+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12914343/comment/15021665","id":"15021665","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aleksei","name":"Aleksei","key":"aleksei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aleksei Statkevich","active":true,"timeZone":"America/Los_Angeles"},"body":"I've verified that build passes fine for me for branch-1 with -Phadoop-1 and -Phadoop-2.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Aleksei","name":"Aleksei","key":"aleksei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aleksei Statkevich","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-23T07:23:34.186+0000","updated":"2015-11-23T07:23:34.186+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12914343/comment/15022156","id":"15022156","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Patch committed to branch-1. Thanks, Aleksei!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-23T14:32:42.820+0000","updated":"2015-11-23T14:32:42.820+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12914343/comment/15023852","id":"15023852","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"body":"No doc needed:  *hive.mapjoin.optimized.hashtable.probe.percent* will be documented for HIVE-11587.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"created":"2015-11-24T06:32:46.303+0000","updated":"2015-11-24T06:32:46.303+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-12461/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2om9z:"}}