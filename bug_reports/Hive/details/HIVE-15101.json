{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13016901","self":"https://issues.apache.org/jira/rest/api/2/issue/13016901","key":"HIVE-15101","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2016-11-01T14:12:44.313+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Jun 06 13:20:36 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-15101/watchers","watchCount":6,"isWatching":false},"created":"2016-11-01T13:52:10.713+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12332641","id":"12332641","description":"Hive 2.0.0","name":"2.0.0","archived":false,"released":true,"releaseDate":"2016-02-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12334255","id":"12334255","name":"2.1.0","archived":false,"released":true,"releaseDate":"2016-06-20"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iijima_satoshi","name":"iijima_satoshi","key":"iijima_satoshi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satoshi Iijima","active":true,"timeZone":"Etc/GMT-9"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-06-07T05:05:04.738+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12323200","id":"12323200","name":"Spark","description":"Hive on Spark"}],"timeoriginalestimate":null,"description":"When a Hive-on-Spark job is executed on YARN environment where UNHEALTHY NodeManager exists, Spark client can be stuck in RUNNING state.\n\nthread dump:\n{code}\n\"008ee7b6-b083-4ac9-ae1c-b6097d9bf761 main\" #1 prio=5 os_prio=0 tid=0x00007f14f4013800 nid=0x3855 in Object.wait() [0x00007f14fd9b1000]\n   java.lang.Thread.State: WAITING (on object monitor)\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0x00000000f6615550> (a io.netty.util.concurrent.DefaultPromise)\n\tat java.lang.Object.wait(Object.java:502)\n\tat io.netty.util.concurrent.DefaultPromise.await(DefaultPromise.java:254)\n\t- locked <0x00000000f6615550> (a io.netty.util.concurrent.DefaultPromise)\n\tat io.netty.util.concurrent.DefaultPromise.await(DefaultPromise.java:32)\n\tat io.netty.util.concurrent.AbstractFuture.get(AbstractFuture.java:31)\n\tat org.apache.hive.spark.client.SparkClientImpl.<init>(SparkClientImpl.java:104)\n\tat org.apache.hive.spark.client.SparkClientFactory.createClient(SparkClientFactory.java:80)\n\t- locked <0x00000000f21b8e08> (a java.lang.Class for org.apache.hive.spark.client.SparkClientFactory)\n\tat org.apache.hadoop.hive.ql.exec.spark.RemoteHiveSparkClient.createRemoteClient(RemoteHiveSparkClient.java:99)\n\tat org.apache.hadoop.hive.ql.exec.spark.RemoteHiveSparkClient.<init>(RemoteHiveSparkClient.java:95)\n\tat org.apache.hadoop.hive.ql.exec.spark.HiveSparkClientFactory.createHiveSparkClient(HiveSparkClientFactory.java:67)\n\tat org.apache.hadoop.hive.ql.exec.spark.session.SparkSessionImpl.open(SparkSessionImpl.java:62)\n\tat org.apache.hadoop.hive.ql.exec.spark.session.SparkSessionManagerImpl.getSession(SparkSessionManagerImpl.java:114)\n\tat org.apache.hadoop.hive.ql.exec.spark.SparkUtilities.getSparkSession(SparkUtilities.java:136)\n\tat org.apache.hadoop.hive.ql.exec.spark.SparkTask.execute(SparkTask.java:89)\n\tat org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:197)\n\tat org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:100)\n\tat org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1858)\n\tat org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1562)\n\tat org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1313)\n\tat org.apache.hadoop.hive.ql.Driver.run(Driver.java:1084)\n\tat org.apache.hadoop.hive.ql.Driver.run(Driver.java:1072)\n\tat org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:232)\n\tat org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:183)\n\tat org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:399)\n\tat org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:335)\n\tat org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:742)\n\tat org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:714)\n\tat org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:641)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.apache.hadoop.util.RunJar.run(RunJar.java:239)\n\tat org.apache.hadoop.util.RunJar.main(RunJar.java:153)\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12836546","id":"12836546","filename":"hadoop-yarn-nodemanager.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iijima_satoshi","name":"iijima_satoshi","key":"iijima_satoshi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satoshi Iijima","active":true,"timeZone":"Etc/GMT-9"},"created":"2016-11-02T11:46:15.470+0000","size":775551,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12836546/hadoop-yarn-nodemanager.log"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12837088","id":"12837088","filename":"hive.log.gz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iijima_satoshi","name":"iijima_satoshi","key":"iijima_satoshi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satoshi Iijima","active":true,"timeZone":"Etc/GMT-9"},"created":"2016-11-04T10:02:18.016+0000","size":234056,"mimeType":"application/x-gzip","content":"https://issues.apache.org/jira/secure/attachment/12837088/hive.log.gz"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12837090","id":"12837090","filename":"HIVE-15101.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iijima_satoshi","name":"iijima_satoshi","key":"iijima_satoshi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satoshi Iijima","active":true,"timeZone":"Etc/GMT-9"},"created":"2016-11-04T10:05:10.599+0000","size":1724,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12837090/HIVE-15101.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Spark client process can be stuck when UNHEALTHY NodeManager exists","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iijima_satoshi","name":"iijima_satoshi","key":"iijima_satoshi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satoshi Iijima","active":true,"timeZone":"Etc/GMT-9"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iijima_satoshi","name":"iijima_satoshi","key":"iijima_satoshi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satoshi Iijima","active":true,"timeZone":"Etc/GMT-9"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Hive 2.1.0\nSpark 1.6.2","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13016901/comment/15625526","id":"15625526","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ferd","name":"Ferd","key":"ferd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ferd&avatarId=21543","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ferd&avatarId=21543","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ferd&avatarId=21543","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ferd&avatarId=21543"},"displayName":"Ferdinand Xu","active":true,"timeZone":"Asia/Hong_Kong"},"body":"What's Spark version and Hive version you're using? Can you also attach node manager related log as well? Thank you!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ferd","name":"Ferd","key":"ferd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ferd&avatarId=21543","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ferd&avatarId=21543","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ferd&avatarId=21543","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ferd&avatarId=21543"},"displayName":"Ferdinand Xu","active":true,"timeZone":"Asia/Hong_Kong"},"created":"2016-11-01T14:12:44.313+0000","updated":"2016-11-01T14:12:44.313+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13016901/comment/15628706","id":"15628706","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iijima_satoshi","name":"iijima_satoshi","key":"iijima_satoshi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satoshi Iijima","active":true,"timeZone":"Etc/GMT-9"},"body":"I have added version info to environment and attached node manager log.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iijima_satoshi","name":"iijima_satoshi","key":"iijima_satoshi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satoshi Iijima","active":true,"timeZone":"Etc/GMT-9"},"created":"2016-11-02T11:46:53.023+0000","updated":"2016-11-02T11:46:53.023+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13016901/comment/15629148","id":"15629148","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ferd","name":"Ferd","key":"ferd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ferd&avatarId=21543","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ferd&avatarId=21543","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ferd&avatarId=21543","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ferd&avatarId=21543"},"displayName":"Ferdinand Xu","active":true,"timeZone":"Asia/Hong_Kong"},"body":"Thank you for attaching the log. Looks like container is exiting with error. Can you also attach application log as well? Thank you!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ferd","name":"Ferd","key":"ferd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ferd&avatarId=21543","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ferd&avatarId=21543","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ferd&avatarId=21543","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ferd&avatarId=21543"},"displayName":"Ferdinand Xu","active":true,"timeZone":"Asia/Hong_Kong"},"created":"2016-11-02T14:35:09.684+0000","updated":"2016-11-02T14:35:09.684+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13016901/comment/15631069","id":"15631069","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lirui","name":"lirui","key":"lirui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rui Li","active":true,"timeZone":"Asia/Shanghai"},"body":"Maybe RemoteDriver's log is more useful. For yarn-client, you should find it in hive.log on the node which runs the query. For yarn-cluster, it's in the AM log - usually the 1st container of the application.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lirui","name":"lirui","key":"lirui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rui Li","active":true,"timeZone":"Asia/Shanghai"},"created":"2016-11-03T00:49:14.506+0000","updated":"2016-11-03T00:49:14.506+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13016901/comment/15635874","id":"15635874","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iijima_satoshi","name":"iijima_satoshi","key":"iijima_satoshi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satoshi Iijima","active":true,"timeZone":"Etc/GMT-9"},"body":"I have attached hive.log.\nAlthough I have confirmed this issue again, container has exited with error not RUNNING state, but the hive process on client server has still remained forever.\nI'm sorry that the subject and description were not correct.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iijima_satoshi","name":"iijima_satoshi","key":"iijima_satoshi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satoshi Iijima","active":true,"timeZone":"Etc/GMT-9"},"created":"2016-11-04T10:02:54.984+0000","updated":"2016-11-04T10:02:54.984+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13016901/comment/15635882","id":"15635882","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iijima_satoshi","name":"iijima_satoshi","key":"iijima_satoshi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satoshi Iijima","active":true,"timeZone":"Etc/GMT-9"},"body":"I have attached a patch that set timeout to future.get().\nApplying this patch, hive process has not been stuck and has come to exit.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iijima_satoshi","name":"iijima_satoshi","key":"iijima_satoshi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satoshi Iijima","active":true,"timeZone":"Etc/GMT-9"},"created":"2016-11-04T10:06:08.460+0000","updated":"2016-11-04T10:06:08.460+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13016901/comment/15643327","id":"15643327","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12837090/HIVE-15101.patch\n\n{color:red}ERROR:{color} -1 due to no test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 3 failed/errored test(s), 10628 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=150)\norg.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=145)\norg.apache.hive.spark.client.TestSparkClient.testJobSubmission (batchId=272)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/1994/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/1994/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-1994/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 3 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12837090 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2016-11-07T07:00:43.373+0000","updated":"2016-11-07T07:00:43.373+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13016901/comment/15643390","id":"15643390","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iijima_satoshi","name":"iijima_satoshi","key":"iijima_satoshi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satoshi Iijima","active":true,"timeZone":"Etc/GMT-9"},"body":"This patch does not cause these test errors because these errors have existed in the previous PreCommit-HIVE-Build.\nhttps://builds.apache.org/job/PreCommit-HIVE-Build/1991/#showFailuresLink","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iijima_satoshi","name":"iijima_satoshi","key":"iijima_satoshi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satoshi Iijima","active":true,"timeZone":"Etc/GMT-9"},"created":"2016-11-07T07:34:29.597+0000","updated":"2016-11-07T07:36:48.872+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13016901/comment/15644257","id":"15644257","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ferd","name":"Ferd","key":"ferd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ferd&avatarId=21543","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ferd&avatarId=21543","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ferd&avatarId=21543","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ferd&avatarId=21543"},"displayName":"Ferdinand Xu","active":true,"timeZone":"Asia/Hong_Kong"},"body":"Thank you for the contribution. LGTM +1. [~lirui], do you have any further comments? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ferd","name":"Ferd","key":"ferd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ferd&avatarId=21543","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ferd&avatarId=21543","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ferd&avatarId=21543","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ferd&avatarId=21543"},"displayName":"Ferdinand Xu","active":true,"timeZone":"Asia/Hong_Kong"},"created":"2016-11-07T14:06:49.632+0000","updated":"2016-11-07T14:06:49.632+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13016901/comment/15644300","id":"15644300","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lirui","name":"lirui","key":"lirui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rui Li","active":true,"timeZone":"Asia/Shanghai"},"body":"The comments state that RPC server will take care of timeout. If it's not working as expected, I think we'd better find out why.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lirui","name":"lirui","key":"lirui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rui Li","active":true,"timeZone":"Asia/Shanghai"},"created":"2016-11-07T14:21:01.444+0000","updated":"2016-11-07T14:21:01.444+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13016901/comment/15652934","id":"15652934","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tzenmyo","name":"tzenmyo","key":"tzenmyo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Teruyoshi Zenmyo","active":true,"timeZone":"Etc/UTC"},"body":"I have encountered the same issue on a testing environment without UNHEALTHY nodes (all of the nodes had been active).\nI found that spark-submit.sh had failed due to resource shortage (spark.driver.memory > yarn.scheduler.maximum-allocation-mb).\nThe server-side timeout seems to not work in case of failures on spark-submit.sh and the patch introducing client-side timeout would make it safer.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tzenmyo","name":"tzenmyo","key":"tzenmyo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Teruyoshi Zenmyo","active":true,"timeZone":"Etc/UTC"},"created":"2016-11-10T03:50:45.335+0000","updated":"2016-11-10T03:50:45.335+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13016901/comment/15653187","id":"15653187","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lirui","name":"lirui","key":"lirui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rui Li","active":true,"timeZone":"Asia/Shanghai"},"body":"Hi [~tzenmyo], thanks for your input. I'll try your scenario and see what I can find.\n\nWe already take care of timeout in the Rpc code. Adding another timeout as in the patch may be no harm, but we should at least figure out why the existing logic doesn't work as expected.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lirui","name":"lirui","key":"lirui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rui Li","active":true,"timeZone":"Asia/Shanghai"},"created":"2016-11-10T06:28:28.874+0000","updated":"2016-11-10T06:28:28.874+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13016901/comment/16038869","id":"16038869","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12837090/HIVE-15101.patch\n\n{color:red}ERROR:{color} -1 due to no test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 6 failed/errored test(s), 10820 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[create_merge_compressed] (batchId=237)\norg.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1] (batchId=237)\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=140)\norg.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=232)\norg.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=232)\norg.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query78] (batchId=232)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/5547/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/5547/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-5547/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 6 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12837090 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2017-06-06T13:20:36.634+0000","updated":"2017-06-06T13:20:36.634+0000"}],"maxResults":13,"total":13,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-15101/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i35o8v:"}}