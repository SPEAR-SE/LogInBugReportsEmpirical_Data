{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12728333","self":"https://issues.apache.org/jira/rest/api/2/issue/12728333","key":"HIVE-7449","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2014-07-24T18:46:32.747+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jul 24 18:46:32 UTC 2014","customfield_12310420":"406409","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_44656276024_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-12-17T20:09:25.412+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-7449/watchers","watchCount":3,"isWatching":false},"created":"2014-07-18T23:38:09.421+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320745","id":"12320745","description":"released","name":"0.10.0","archived":false,"released":true,"releaseDate":"2013-01-11"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324312","id":"12324312","description":"released","name":"0.12.0","archived":false,"released":true,"releaseDate":"2013-10-15"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-12-17T20:09:25.439+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Tested it out like below \n\n1.Get UTC and local time\ndate -u \nFri Jul 18 18:15:29 UTC 2014 \n\nLocal time \ndate \nFri Jul 18 11:15:32 PDT 2014 \n\n2. Conversion output on HIVE 0.10.0 and HIVE 0.12.0 \nFrom UTC to local \nSELECT from_utc_timestamp('2014-07-18 18:15:29.0','PDT') FROM sample_07 LIMIT 1; \n\n2014-07-18 18:15:29 - Wrong output , it is supposed to be 2014-07-18 11:15:32\n\nFrom local to utc \n\nSELECT to_utc_timestamp('2014-07-18 11:15:32.0','PDT') FROM sample_07 LIMIT 1; \n\n2014-07-18 11:15:32 - Wrong output , it is supposed to be 2014-07-18 18:15:29","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"406429","customfield_12312823":null,"summary":"from_utc_timestamp and to_utc_timestamp not returning right values","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkempanna","name":"mkempanna","key":"mkempanna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mala Chikka Kempanna","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkempanna","name":"mkempanna","key":"mkempanna","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mala Chikka Kempanna","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12728333/comment/14073511","id":"14073511","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johndee","name":"johndee","key":"johndee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johndee Burks","active":true,"timeZone":"America/Detroit"},"body":"The problem is not the UDF but the implementation of java.util.TimeZone. Specifically the timezone IDs that TimeZone.getTimeZone() accepts. The code is below from the UDF: \n\n/hive/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFromUtcTimestamp.java \n\n{code}\n78 if (arguments.length > 1 && arguments[1] != null) { \n79 Text text = textConverter.convert(arguments[1].get()); \n80 if (text != null) { \n81 timezone = TimeZone.getTimeZone(text.toString()); \n82 } \n83 } else { \n84 return null; \n85 } \n{code}\n\nIt does not accept PDT or EDT. The utility does have them but they are EST5EDT and PST8PDT. If you use these in the UDF you get the correct result. You can get a list of all the supported IDs using the simple program found http://obscuredclarity.blogspot.com/2010/08/get-all-timezones-available-in-timezone.html. I did this on my local system and got a list similar to the one shown at the bottom of page http://tutorials.jenkov.com/java-date-time/java-util-timezone.html. \n\nI tested this and it works, see below. \n\n{code}\nhive> SELECT from_utc_timestamp('2014-07-18 18:15:29.0','PST8PDT') FROM sfo_source LIMIT 1; \n... \n2014-07-18 11:15:29\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johndee","name":"johndee","key":"johndee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Johndee Burks","active":true,"timeZone":"America/Detroit"},"created":"2014-07-24T18:46:32.747+0000","updated":"2014-07-24T18:46:32.747+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-7449/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1xxpz:"}}