{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12772475","self":"https://issues.apache.org/jira/rest/api/2/issue/12772475","key":"HIVE-9580","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329345","id":"12329345","description":"Hive 1.2.0","name":"1.2.0","archived":false,"released":true,"releaseDate":"2015-05-18"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-03-04T20:25:15.388+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon May 18 19:53:58 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"3_*:*_2_*:*_85312_*|*_10002_*:*_3_*:*_787894150_*|*_1_*:*_1_*:*_5427484718_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-04-17T18:41:00.332+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-9580/watchers","watchCount":5,"isWatching":false},"created":"2015-02-04T20:09:56.216+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324312","id":"12324312","description":"released","name":"0.12.0","archived":false,"released":true,"releaseDate":"2013-10-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324986","id":"12324986","description":"released","name":"0.13.0","archived":false,"released":true,"releaseDate":"2014-04-21"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326450","id":"12326450","description":"released","name":"0.14.0","archived":false,"released":true,"releaseDate":"2014-11-12"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-05-18T19:53:58.752+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12320408","id":"12320408","name":"HiveServer2","description":"Tracks issues related to HiveServer2"}],"timeoriginalestimate":null,"description":"The database erroneously returns rows when joining two tables which each contain a VARCHAR column and the join's ON condition uses the equality operator on the VARCHAR columns.\n\n******The following JDBC method exhibits the problem:\n\n\tstatic void joinIssue() \n\t\tthrows SQLException {\n\t\t\n\t\tString sql;\n\t\tint rowsAffected;\n\t\tResultSet rs;\n\n\t\tStatement stmt = con.createStatement();\n\n\t\tString table1_Name = \"blahtab1\";\n\t\tString table1A_Name = \"blahtab1A\";\n\t\tString table1B_Name = \"blahtab1B\";\n\t\tString table2_Name = \"blahtab2\";\n\t\t\n\t\ttry {\n\t\t\tsql = \"drop table \" + table1_Name;\n\t\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\t\trowsAffected = stmt.executeUpdate(sql);\n\t\t}\n\t\tcatch (SQLException se) {\n\t\t\tprintln(\"Drop table error:\" + se.getMessage());\n\t\t}\n\n\t\ttry {\n\t\t\tsql = \"CREATE TABLE \" + table1_Name + \"(\" +\n\t\t\t\t\t\t\"VCHARCOL VARCHAR(10) \" +\n\t\t\t\t\t\t\",INTEGERCOL INT \" +\n\t\t\t\t\t\") \"\n\t\t\t;\n\t\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\t\trowsAffected = stmt.executeUpdate(sql);\n\t\t}\n\t\tcatch (SQLException se) {\n\t\t\tprintln(\"create table error:\" + se.getMessage());\n\t\t}\n\t\t\t\n\t\tsql = \"insert into \" + table1_Name + \" values ('jklmnopqrs', 99)\";\n\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\tstmt.executeUpdate(sql);\n\t\t\n\t\tSystem.out.println(\"=======================================================================================================================================\");\n\t\t\n\t\ttry {\n\t\t\tsql = \"drop table \" + table1A_Name;\n\t\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\t\trowsAffected = stmt.executeUpdate(sql);\n\t\t}\n\t\tcatch (SQLException se) {\n\t\t\tprintln(\"Drop table error:\" + se.getMessage());\n\t\t}\n\n\t\ttry {\n\t\t\tsql = \"CREATE TABLE \" + table1A_Name + \"(\" +\n\t\t\t\t\t\t\"VCHARCOL VARCHAR(10) \" +\n\t\t\t\t\t\") \"\n\t\t\t;\n\t\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\t\trowsAffected = stmt.executeUpdate(sql);\n\t\t}\n\t\tcatch (SQLException se) {\n\t\t\tprintln(\"create table error:\" + se.getMessage());\n\t\t}\n\t\t\t\n\t\tsql = \"insert into \" + table1A_Name + \" values ('jklmnopqrs')\";\n\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\tstmt.executeUpdate(sql);\n\n\t\tSystem.out.println(\"=======================================================================================================================================\");\n\t\t\n\t\ttry {\n\t\t\tsql = \"drop table \" + table1B_Name;\n\t\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\t\trowsAffected = stmt.executeUpdate(sql);\n\t\t}\n\t\tcatch (SQLException se) {\n\t\t\tprintln(\"Drop table error:\" + se.getMessage());\n\t\t}\n\n\t\ttry {\n\t\t\tsql = \"CREATE TABLE \" + table1B_Name + \"(\" +\n\t\t\t\t\t\t\"VCHARCOL VARCHAR(11) \" +\n\t\t\t\t\t\t\",INTEGERCOL INT \" +\n\t\t\t\t\t\") \"\n\t\t\t;\n\t\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\t\trowsAffected = stmt.executeUpdate(sql);\n\t\t}\n\t\tcatch (SQLException se) {\n\t\t\tprintln(\"create table error:\" + se.getMessage());\n\t\t}\n\t\t\t\n\t\tsql = \"insert into \" + table1B_Name + \" values ('jklmnopqrs', 99)\";\n\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\tstmt.executeUpdate(sql);\n\t\t\n\t\tSystem.out.println(\"=======================================================================================================================================\");\n\t\t\n\t\ttry {\n\t\t\tsql = \"drop table \" + table2_Name;\n\t\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\t\trowsAffected = stmt.executeUpdate(sql);\n\t\t}\n\t\tcatch (SQLException se) {\n\t\t\tprintln(\"Drop table error:\" + se.getMessage());\n\t\t}\n\n\t\ttry {\n\t\t\tsql = \"CREATE TABLE \" + table2_Name + \"(\" +\n\t\t\t\t\t\t\"VCHARCOL VARCHAR(30) \" +\n\t\t\t\t\t\") \"\n\t\t\t\t\t;\n\t\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\t\trowsAffected = stmt.executeUpdate(sql);\n\t\t}\n\t\tcatch (SQLException se) {\n\t\t\tprintln(\"create table error:\" + se.getMessage());\n\t\t}\n\n\t\tsql = \"insert into \" + table2_Name + \" values ('jklmnopqrsX')\";\n\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\tstmt.executeUpdate(sql);\n\t\n\t\tSystem.out.println(\"=======================================================================================================================================\");\n\t\t\n\t\tsql = \"select * from \" + table1_Name;\n\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\trs = stmt.executeQuery(sql);\n\t\tdispResultSet(rs, true, true);\n\n\t\tSystem.out.println(\"=======================================================================================================================================\");\n\n\t\tsql = \"select * from \" + table1A_Name;\n\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\trs = stmt.executeQuery(sql);\n\t\tdispResultSet(rs, true, true);\n\t\t\n\t\tSystem.out.println(\"=======================================================================================================================================\");\n\n\t\tsql = \"select * from \" + table1B_Name;\n\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\trs = stmt.executeQuery(sql);\n\t\tdispResultSet(rs, true, true);\n\n\t\tSystem.out.println(\"=======================================================================================================================================\");\n\t\t\n\t\tsql = \"select * from \" + table2_Name;\n\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\trs = stmt.executeQuery(sql);\n\t\tdispResultSet(rs, true, true);\n\n\t\tSystem.out.println(\"=======================================================================================================================================\");\n\t\t\n\t\tsql = \"SELECT \" + \n\t\t\t\ttable1_Name + \".VCHARCOL, \" + \n\t\t\t\ttable2_Name + \".VCHARCOL \" +\n\t\t\t\t\"FROM \" + table1_Name + \" JOIN \" + table2_Name + \n\t\t\t\t\t\" ON (\" + table1_Name + \".VCHARCOL = \" + table2_Name + \".VCHARCOL)\";\n\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\trs = stmt.executeQuery(sql);\n\t\tdispResultSet(rs, true, true);\n\n\t\tSystem.out.println(\"=======================================================================================================================================\");\n\t\t\n\t\tsql = \"SELECT \" + \n\t\t\t\ttable1_Name + \".VCHARCOL, \" + \n\t\t\t\ttable2_Name + \".VCHARCOL \" +\n\t\t\t\t\"FROM \" + table2_Name + \" JOIN \" + table1_Name + \n\t\t\t\t\t\" ON (\" + table2_Name + \".VCHARCOL = \" + table1_Name + \".VCHARCOL)\";\n\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\trs = stmt.executeQuery(sql);\n\t\tdispResultSet(rs, true, true);\n\t\t\n\t\tSystem.out.println(\"=======================================================================================================================================\");\n\t\t\n\t\tsql = \"SELECT \" + \n\t\t\t\ttable1A_Name + \".VCHARCOL, \" + \n\t\t\t\ttable2_Name + \".VCHARCOL \" +\n\t\t\t\t\"FROM \" + table1A_Name + \" JOIN \" + table2_Name + \n\t\t\t\t\t\" ON (\" + table1A_Name + \".VCHARCOL = \" + table2_Name + \".VCHARCOL)\";\n\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\trs = stmt.executeQuery(sql);\n\t\tdispResultSet(rs, true, true);\n\n\t\tSystem.out.println(\"=======================================================================================================================================\");\n\t\t\n\t\tsql = \"SELECT \" + \n\t\t\t\ttable1B_Name + \".VCHARCOL, \" + \n\t\t\t\ttable2_Name + \".VCHARCOL \" +\n\t\t\t\t\"FROM \" + table1B_Name + \" JOIN \" + table2_Name + \n\t\t\t\t\t\" ON (\" + table1B_Name + \".VCHARCOL = \" + table2_Name + \".VCHARCOL)\";\n\t\tSystem.out.println(\"\\nsql=\" + sql);\n\t\trs = stmt.executeQuery(sql);\n\t\tdispResultSet(rs, true, true);\n\t\n\t\tstmt.close();\n\t}\n\n******The output generated by program run is as follows (for 0.13):\n\nsql=drop table blahtab1\n\nsql=CREATE TABLE blahtab1(VCHARCOL VARCHAR(10) ,INTEGERCOL INT ) \n\nsql=insert into blahtab1 values ('jklmnopqrs', 99)\n=======================================================================================================================================\n\nsql=drop table blahtab1A\n\nsql=CREATE TABLE blahtab1A(VCHARCOL VARCHAR(10) ) \n\nsql=insert into blahtab1A values ('jklmnopqrs')\n=======================================================================================================================================\n\nsql=drop table blahtab1B\n\nsql=CREATE TABLE blahtab1B(VCHARCOL VARCHAR(11) ,INTEGERCOL INT ) \n\nsql=insert into blahtab1B values ('jklmnopqrs', 99)\n=======================================================================================================================================\n\nsql=drop table blahtab2\n\nsql=CREATE TABLE blahtab2(VCHARCOL VARCHAR(30) ) \n\nsql=insert into blahtab2 values ('jklmnopqrsX')\n=======================================================================================================================================\n\nsql=select * from blahtab1\n\nvcharcol(10):jklmnopqrs|integercol(10):99|\nNum rows in result set = 1\n\n=======================================================================================================================================\n\nsql=select * from blahtab1A\n\nvcharcol(10):jklmnopqrs|\nNum rows in result set = 1\n\n=======================================================================================================================================\n\nsql=select * from blahtab1B\n\nvcharcol(11):jklmnopqrs|integercol(10):99|\nNum rows in result set = 1\n\n=======================================================================================================================================\n\nsql=select * from blahtab2\n\nvcharcol(30):jklmnopqrsX|\nNum rows in result set = 1\n\n=======================================================================================================================================\n\nsql=SELECT blahtab1.VCHARCOL, blahtab2.VCHARCOL FROM blahtab1 JOIN blahtab2 ON (blahtab1.VCHARCOL = blahtab2.VCHARCOL)\n\nvcharcol(10):jklmnopqrs|vcharcol(30):jklmnopqrsX|\nNum rows in result set = 1\n\n=======================================================================================================================================\n\nsql=SELECT blahtab1.VCHARCOL, blahtab2.VCHARCOL FROM blahtab2 JOIN blahtab1 ON (blahtab2.VCHARCOL = blahtab1.VCHARCOL)\n\nNum rows in result set = 0\n\n=======================================================================================================================================\n\nsql=SELECT blahtab1A.VCHARCOL, blahtab2.VCHARCOL FROM blahtab1A JOIN blahtab2 ON (blahtab1A.VCHARCOL = blahtab2.VCHARCOL)\n\nNum rows in result set = 0\n\n=======================================================================================================================================\n\nsql=SELECT blahtab1B.VCHARCOL, blahtab2.VCHARCOL FROM blahtab1B JOIN blahtab2 ON (blahtab1B.VCHARCOL = blahtab2.VCHARCOL)\n\nNum rows in result set = 0\n\n******The server should NOT return any rows for the following query, but it does:\nSELECT blahtab1.VCHARCOL, blahtab2.VCHARCOL FROM blahtab1 JOIN blahtab2 ON (blahtab1.VCHARCOL = blahtab2.VCHARCOL)\n\nResult:\nvcharcol(10):jklmnopqrs|vcharcol(30):jklmnopqrsX|\nNum rows in result set = 1","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12725576","id":"12725576","filename":"HIVE-9580.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-15T13:59:08.258+0000","size":15972,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12725576/HIVE-9580.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Server returns incorrect result from JOIN ON VARCHAR columns","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikespinak","name":"mikespinak","key":"mikespinak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikespinak","name":"mikespinak","key":"mikespinak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12772475/comment/14347507","id":"14347507","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"body":"The issue is caused by: we always assume that the join keys have the same data type and save the one from the first table, then apply it when we serialize and deserialize the hashtables to/from files.\n\nIt causes the issue when dealing with varchar datatypes. In table A, the column could be varchar(10) while in table B it could be varchar(20). Some times we write the incorrect data to the files if the varchar length of the first table is small.\n\n[~szehon] You have worked on join. I'm thinking that we should always choose the one with the largest length. When joining types like smallint and int, we should choose int. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-04T20:25:15.388+0000","updated":"2015-03-04T20:25:15.388+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12772475/comment/14347729","id":"14347729","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"body":"Seems Hive can handle the join over any kind of data types. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-03-04T22:58:30.910+0000","updated":"2015-03-04T22:58:30.910+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12772475/comment/14485418","id":"14485418","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"body":"For join on varchar or char columns, currently we don't implicitly convert the keys since they are of the same type with different lengths. While during the query run-time, we assume all the keys are of the same type and will also choose the first one as the type to be used to parse all the keys, which are causing the issue.\n\nThe patch applies the the common type for all the keys even all the keys are of the same type. Also change a type comparison to use equals() rather than ==.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-08T15:47:33.914+0000","updated":"2015-04-08T15:47:33.914+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12772475/comment/14487289","id":"14487289","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12723937/HIVE-9580.patch\n\n{color:red}ERROR:{color} -1 due to 25 failed/errored test(s), 8666 tests executed\n*Failed tests:*\n{noformat}\nTestMinimrCliDriver-bucketmapjoin6.q-constprog_partitioner.q-infer_bucket_sort_dyn_part.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-external_table_with_space_in_location_path.q-infer_bucket_sort_merge.q-auto_sortmerge_join_16.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-groupby2.q-import_exported_table.q-bucketizedhiveinputformat.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-index_bitmap3.q-stats_counter_partitioned.q-temp_table_external.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-infer_bucket_sort_map_operators.q-join1.q-bucketmapjoin7.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-infer_bucket_sort_num_buckets.q-disable_merge_for_bucketing.q-uber_reduce.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-infer_bucket_sort_reducers_power_two.q-scriptfile1.q-scriptfile1_win.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-leftsemijoin_mr.q-load_hdfs_file_with_space_in_the_name.q-root_dir_external_table.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-list_bucket_dml_10.q-bucket_num_reducers.q-bucket6.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-load_fs2.q-file_with_header_footer.q-ql_rewrite_gbtoidx_cbo_1.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-parallel_orderby.q-reduce_deduplicate.q-ql_rewrite_gbtoidx_cbo_2.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-ql_rewrite_gbtoidx.q-smb_mapjoin_8.q - did not produce a TEST-*.xml file\nTestMinimrCliDriver-schemeAuthority2.q-bucket4.q-input16_cc.q-and-1-more - did not produce a TEST-*.xml file\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_sortmerge_join_2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_char_mapjoin1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_varchar_mapjoin1\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mapjoin_decimal\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_char_mapjoin1\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_varchar_mapjoin1\norg.apache.hadoop.hive.cli.TestNegativeMinimrCliDriver.testNegativeCliDriver_minimr_broken_pipe\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_mapjoin_decimal\norg.apache.hadoop.hive.thrift.TestHadoop20SAuthBridge.testMetastoreProxyUser\norg.apache.hadoop.hive.thrift.TestHadoop20SAuthBridge.testSaslWithHiveMetaStore\norg.apache.hive.jdbc.TestSSL.testSSLFetchHttp\norg.apache.hive.spark.client.TestSparkClient.testSyncRpc\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3343/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3343/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3343/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 25 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12723937 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-04-09T12:30:17.227+0000","updated":"2015-04-09T12:30:17.227+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12772475/comment/14487444","id":"14487444","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"body":"Fixed affected unit tests baseline. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-09T14:45:58.994+0000","updated":"2015-04-09T14:45:58.994+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12772475/comment/14490460","id":"14490460","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12724233/HIVE-9580.patch\n\n{color:red}ERROR:{color} -1 due to 19 failed/errored test(s), 8673 tests executed\n*Failed tests:*\n{noformat}\nTestMinimrCliDriver-bucketmapjoin6.q-constprog_partitioner.q-infer_bucket_sort_dyn_part.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-external_table_with_space_in_location_path.q-infer_bucket_sort_merge.q-auto_sortmerge_join_16.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-groupby2.q-import_exported_table.q-bucketizedhiveinputformat.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-index_bitmap3.q-stats_counter_partitioned.q-temp_table_external.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-infer_bucket_sort_map_operators.q-join1.q-bucketmapjoin7.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-infer_bucket_sort_num_buckets.q-disable_merge_for_bucketing.q-uber_reduce.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-infer_bucket_sort_reducers_power_two.q-scriptfile1.q-scriptfile1_win.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-leftsemijoin_mr.q-load_hdfs_file_with_space_in_the_name.q-root_dir_external_table.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-list_bucket_dml_10.q-bucket_num_reducers.q-bucket6.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-load_fs2.q-file_with_header_footer.q-ql_rewrite_gbtoidx_cbo_1.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-parallel_orderby.q-reduce_deduplicate.q-ql_rewrite_gbtoidx_cbo_2.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-ql_rewrite_gbtoidx.q-smb_mapjoin_8.q - did not produce a TEST-*.xml file\nTestMinimrCliDriver-schemeAuthority2.q-bucket4.q-input16_cc.q-and-1-more - did not produce a TEST-*.xml file\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mapjoin_decimal\norg.apache.hadoop.hive.thrift.TestHadoop20SAuthBridge.testMetastoreProxyUser\norg.apache.hadoop.hive.thrift.TestHadoop20SAuthBridge.testSaslWithHiveMetaStore\norg.apache.hive.jdbc.TestJdbcWithMiniHS2.testNewConnectionConfiguration\norg.apache.hive.jdbc.TestSSL.testSSLFetchHttp\norg.apache.hive.spark.client.TestSparkClient.testSyncRpc\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3364/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3364/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3364/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 19 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12724233 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-04-10T22:19:39.106+0000","updated":"2015-04-10T22:19:39.106+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12772475/comment/14496203","id":"14496203","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"body":"Attached the new patch to fix testCliDriver_mapjoin_decimal unit test failure. The other failures seem to be unrelated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-15T14:00:19.401+0000","updated":"2015-04-15T14:00:19.401+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12772475/comment/14496208","id":"14496208","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"body":"[~szehon] Can you help review the code change?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-15T14:01:57.605+0000","updated":"2015-04-15T14:01:57.605+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12772475/comment/14496681","id":"14496681","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szehon","name":"szehon","key":"szehon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Szehon Ho","active":true,"timeZone":"Europe/Paris"},"body":"Hi Aihua, looks like this works, so you are making all the varchars (and even char) in the join comparison to be the maximum length to avoid this issue.\n\nBut I'm not too familiar with this code, I think [~jdere] is the varchars expert, forwarding to him to take a look as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szehon","name":"szehon","key":"szehon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Szehon Ho","active":true,"timeZone":"Europe/Paris"},"created":"2015-04-15T18:42:18.198+0000","updated":"2015-04-15T18:42:18.198+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12772475/comment/14496785","id":"14496785","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"body":"That's right. For the key comparison, it will call UDF to do the key conversion if we are comparing different types, or I think we should pick the common type as the key type if the type conversion is not needed for the data types including char or varchar with different lengths.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-15T19:48:46.101+0000","updated":"2015-04-15T19:48:46.101+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12772475/comment/14496996","id":"14496996","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12725576/HIVE-9580.patch\n\n{color:red}ERROR:{color} -1 due to 14 failed/errored test(s), 8690 tests executed\n*Failed tests:*\n{noformat}\nTestMinimrCliDriver-bucketmapjoin6.q-constprog_partitioner.q-infer_bucket_sort_dyn_part.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-external_table_with_space_in_location_path.q-infer_bucket_sort_merge.q-auto_sortmerge_join_16.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-groupby2.q-import_exported_table.q-bucketizedhiveinputformat.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-index_bitmap3.q-stats_counter_partitioned.q-temp_table_external.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-infer_bucket_sort_map_operators.q-join1.q-bucketmapjoin7.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-infer_bucket_sort_num_buckets.q-disable_merge_for_bucketing.q-uber_reduce.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-infer_bucket_sort_reducers_power_two.q-scriptfile1.q-scriptfile1_win.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-leftsemijoin_mr.q-load_hdfs_file_with_space_in_the_name.q-root_dir_external_table.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-list_bucket_dml_10.q-bucket_num_reducers.q-bucket6.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-load_fs2.q-file_with_header_footer.q-ql_rewrite_gbtoidx_cbo_1.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-parallel_orderby.q-reduce_deduplicate.q-ql_rewrite_gbtoidx_cbo_2.q-and-1-more - did not produce a TEST-*.xml file\nTestMinimrCliDriver-ql_rewrite_gbtoidx.q-smb_mapjoin_8.q - did not produce a TEST-*.xml file\nTestMinimrCliDriver-schemeAuthority2.q-bucket4.q-input16_cc.q-and-1-more - did not produce a TEST-*.xml file\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_view\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3448/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3448/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3448/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 14 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12725576 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-04-15T21:05:47.255+0000","updated":"2015-04-15T21:05:47.255+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12772475/comment/14497008","id":"14497008","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdere","name":"jdere","key":"jdere","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Dere","active":true,"timeZone":"America/Los_Angeles"},"body":"I think this looks fine. I would just say to make sure there are tests to cover the types that would get affected by this change (char/varchar/decimal joins), which it looks like there already are.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdere","name":"jdere","key":"jdere","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Dere","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-15T21:10:34.241+0000","updated":"2015-04-15T21:10:34.241+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12772475/comment/14497023","id":"14497023","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szehon","name":"szehon","key":"szehon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Szehon Ho","active":true,"timeZone":"Europe/Paris"},"body":"Great thanks, +1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szehon","name":"szehon","key":"szehon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Szehon Ho","active":true,"timeZone":"Europe/Paris"},"created":"2015-04-15T21:16:04.926+0000","updated":"2015-04-15T21:16:04.926+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12772475/comment/14497336","id":"14497336","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"body":"The failed test cases above seem unrelated.  TestCliDriver.testCliDriver_union_view seems also caused by some other changes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-15T23:57:20.388+0000","updated":"2015-04-15T23:57:20.388+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12772475/comment/14500403","id":"14500403","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szehon","name":"szehon","key":"szehon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Szehon Ho","active":true,"timeZone":"Europe/Paris"},"body":"Committed to trunk, thanks Aihua!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szehon","name":"szehon","key":"szehon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Szehon Ho","active":true,"timeZone":"Europe/Paris"},"created":"2015-04-17T18:41:00.366+0000","updated":"2015-04-17T18:41:00.366+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12772475/comment/14548945","id":"14548945","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"body":"This issue has been fixed and released as part of the 1.2.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sushanth","name":"sushanth","key":"sushanth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sushanth&avatarId=26812","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sushanth&avatarId=26812","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sushanth&avatarId=26812","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sushanth&avatarId=26812"},"displayName":"Sushanth Sowmyan","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-05-18T19:53:58.738+0000","updated":"2015-05-18T19:53:58.738+0000"}],"maxResults":16,"total":16,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-9580/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2577b:"}}