{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12679211","self":"https://issues.apache.org/jira/rest/api/2/issue/12679211","key":"HIVE-5820","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2013-11-14T14:04:03.322+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Apr 04 16:31:17 UTC 2014","customfield_12310420":"358576","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-5820/watchers","watchCount":6,"isWatching":false},"created":"2013-11-14T13:22:57.077+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320745","id":"12320745","description":"released","name":"0.10.0","archived":false,"released":true,"releaseDate":"2013-01-11"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-04-04T16:31:17.878+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"Hi, we've created a table:\n{code}\ncreate table tmp\ncomment 'tmp'\npartitioned by (year string, month string, day string, fulldate string)\nrow format serde 'org.apache.hadoop.hive.serde2.avro.AvroSerDe'\nstored as\n    inputformat 'org.apache.hadoop.hive.ql.io.avro.AvroContainerInputFormat'\n    outputformat 'org.apache.hadoop.hive.ql.io.avro.AvroContainerOutputFormat'\nlocation '/user/lol/tmp'\ntblproperties ('avro.schema.literal' =\n    '{\"name\": \"tmp\", \"doc\": \"version 0.0.1\", \"type\": \"record\", \"fields\": [\n        {\"name\": \"a\", \"type\": \"int\"},\n        {\"name\": \"b\", \"type\": \"int\"}\n    ]}'\n)\n{code}\n\nAnd we try to query it:\n{code}\nselect * from tmp\n{code}\n\nand we get an exception\n{code}\n13/11/14 17:12:15 WARN avro.AvroSerdeUtils: Encountered AvroSerdeException determining schema. Returning signal schema to indicate problem\norg.apache.hadoop.hive.serde2.avro.AvroSerdeException: Neither avro.schema.literal nor avro.schema.url specified, can't determine table schema\n\tat org.apache.hadoop.hive.serde2.avro.AvroSerdeUtils.determineSchemaOrThrowException(AvroSerdeUtils.java:66)\n\tat org.apache.hadoop.hive.serde2.avro.AvroSerdeUtils.determineSchemaOrReturnErrorSchema(AvroSerdeUtils.java:87)\n\tat org.apache.hadoop.hive.serde2.avro.AvroSerDe.initialize(AvroSerDe.java:59)\n\tat org.apache.hadoop.hive.metastore.MetaStoreUtils.getDeserializer(MetaStoreUtils.java:249)\n\tat org.apache.hadoop.hive.ql.metadata.Partition.getDeserializer(Partition.java:251)\n\tat org.apache.hadoop.hive.ql.metadata.Partition.initialize(Partition.java:217)\n\tat org.apache.hadoop.hive.ql.metadata.Partition.<init>(Partition.java:107)\n\tat org.apache.hadoop.hive.ql.metadata.Hive.getPartitions(Hive.java:1573)\n\tat org.apache.hadoop.hive.ql.optimizer.ppr.PartitionPruner.prune(PartitionPruner.java:190)\n\tat org.apache.hadoop.hive.ql.parse.ParseContext.getPrunedPartitions(ParseContext.java:561)\n\tat org.apache.hadoop.hive.ql.optimizer.SimpleFetchOptimizer.checkTree(SimpleFetchOptimizer.java:144)\n\tat org.apache.hadoop.hive.ql.optimizer.SimpleFetchOptimizer.optimize(SimpleFetchOptimizer.java:100)\n\tat org.apache.hadoop.hive.ql.optimizer.SimpleFetchOptimizer.transform(SimpleFetchOptimizer.java:74)\n\tat org.apache.hadoop.hive.ql.optimizer.Optimizer.optimize(Optimizer.java:102)\n\tat org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:8200)\n\tat org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:258)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:457)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:349)\n\tat com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState.checkedCompile(BeeswaxServiceImpl.java:247)\n\tat com.cloudera.beeswax.BeeswaxServiceImpl$RunningQueryState.compile(BeeswaxServiceImpl.java:200)\n\tat com.cloudera.beeswax.BeeswaxServiceImpl$2.run(BeeswaxServiceImpl.java:830)\n\tat com.cloudera.beeswax.BeeswaxServiceImpl$2.run(BeeswaxServiceImpl.java:823)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:396)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1408)\n\tat com.cloudera.beeswax.BeeswaxServiceImpl.doWithState(BeeswaxServiceImpl.java:772)\n\tat com.cloudera.beeswax.BeeswaxServiceImpl.query(BeeswaxServiceImpl.java:822)\n\tat com.cloudera.beeswax.api.BeeswaxService$Processor$query.getResult(BeeswaxService.java:915)\n\tat com.cloudera.beeswax.api.BeeswaxService$Processor$query.getResult(BeeswaxService.java:899)\n\tat org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\n\tat org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)\n\tat org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:206)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n\tat java.lang.Thread.run(Thread.java:662)\n13/11/14 17:12:15 INFO parse.SemanticAnalyzer: Completed plan generation\n13/11/14 17:12:15 INFO ql.Driver: Semantic Analysis Completed\n{code}\n\nhere is describe:\n{code}\n0\ta\tint\tfrom deserializer\n1\tb\tint\tfrom deserializer\n2\tyear\tstring\t\n3\tmonth\tstring\t\n4\tday\tstring\t\n5\tfulldate\tstring\t\n6\t\t\t\n7\tDetailed Table Information\tTable(tableName:tmp, dbName:default, owner:devops, createTime:1384435112, lastAccessTime:0, retention:0, sd:StorageDescriptor(cols:[], location:hdfs://nameservice1/user/fedyakov/tmp, inputFormat:org.apache.hadoop.hive.ql.io.avro.AvroContainerInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.avro.AvroContainerOutputFormat, compressed:false, numBuckets:-1, serdeInfo:SerDeInfo(name:null, serializationLib:org.apache.hadoop.hive.serde2.avro.AvroSerDe, parameters:{serialization.format=1}), bucketCols:[], sortCols:[], parameters:{}, skewedInfo:SkewedInfo(skewedColNames:[], skewedColValues:[], skewedColValueLocationMaps:{}), storedAsSubDirectories:false), partitionKeys:[FieldSchema(name:year, type:string, comment:null), FieldSchema(name:month, type:string, comment:null), FieldSchema(name:day, type:string, comment:null), FieldSchema(name:fulldate, type:string, comment:null)], parameters:{numPartitions=1, numFiles=1, avro.schema.literal={\"name\": \"tmp\", \"doc\": \"version 0.0.1\", \"type\": \"record\", \"fields\": [\t\n8\t {\"name\": \"a\", \"type\": \"int\"},\t\t\n9\t {\"name\": \"b\", \"type\": \"int\"}\t\t\n10\t ]}, transient_lastDdlTime=1384435137, numRows=0, totalSize=189, rawDataSize=0}, viewOriginalText:null, viewExpandedText:null, tableType:MANAGED_TABLE)\t\n{code}\n\nIf we sepcify file instead of \"embedded\" avro schema, it works.\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"358866","customfield_12312823":null,"summary":"Neither avro.schema.literal nor avro.schema.url specified, can't determine table schema","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=serega_sheypak","name":"serega_sheypak","key":"serega_sheypak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=serega_sheypak","name":"serega_sheypak","key":"serega_sheypak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"CDH 4.3  Hive 0.10.0+121","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12679211/comment/13822462","id":"13822462","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hellojinjie","name":"hellojinjie","key":"hellojinjie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hellojinjie&avatarId=17054","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hellojinjie&avatarId=17054","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hellojinjie&avatarId=17054","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hellojinjie&avatarId=17054"},"displayName":"hellojinjie","active":true,"timeZone":"Asia/Shanghai"},"body":"Same environment(CDH 4), same version of Hive, I also met the problem.\n\nI use avro.schema.url to specify the url of the avsc\n{code}\nTBLPROPERTIES (\n    'avro.schema.url'='hdfs:///user/qos/workspaces/avro/Message.avsc')\n{code}\n\nDuring the query, the log also print the same error message.\n\nBut it does not affect the execution of Hive query.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hellojinjie","name":"hellojinjie","key":"hellojinjie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hellojinjie&avatarId=17054","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hellojinjie&avatarId=17054","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hellojinjie&avatarId=17054","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hellojinjie&avatarId=17054"},"displayName":"hellojinjie","active":true,"timeZone":"Asia/Shanghai"},"created":"2013-11-14T14:04:03.322+0000","updated":"2013-11-14T14:04:03.322+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12679211/comment/13822650","id":"13822650","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"This doesn't seem reproducible with latest trunk, so it might have been fixed already.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-11-14T17:36:02.879+0000","updated":"2013-11-14T17:36:02.879+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12679211/comment/13822734","id":"13822734","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=serega_sheypak","name":"serega_sheypak","key":"serega_sheypak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey","active":true,"timeZone":"Etc/UTC"},"body":"Ok, thanks!\n\n\n2013/11/14 Xuefu Zhang (JIRA) <jira@apache.org>\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=serega_sheypak","name":"serega_sheypak","key":"serega_sheypak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey","active":true,"timeZone":"Etc/UTC"},"created":"2013-11-14T18:33:18.450+0000","updated":"2013-11-14T18:33:18.450+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12679211/comment/13960042","id":"13960042","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhuw.chicago","name":"zhuw.chicago","key":"zhuw.chicago","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Wayne Zhu","active":true,"timeZone":"America/Chicago"},"body":"I have the same issue on CDH 4.3.0.\n$ rpm -qa | grep hive\nhive-hbase-0.10.0+121-1.cdh4.3.0.p0.16.el6.noarch\nhive-metastore-0.10.0+121-1.cdh4.3.0.p0.16.el6.noarch\nhive-jdbc-0.10.0+121-1.cdh4.3.0.p0.16.el6.noarch\nhive-0.10.0+121-1.cdh4.3.0.p0.16.el6.noarch\n\nHere is Hive steps:\nhive> CREATE TABLE avro_price_internal\n    > PARTITIONED BY (year int, month int, day int, hour int)\n    > ROW FORMAT SERDE\n    >   'org.apache.hadoop.hive.serde2.avro.AvroSerDe'\n    > STORED AS INPUTFORMAT\n    >   'org.apache.hadoop.hive.ql.io.avro.AvroContainerInputFormat'\n    > OUTPUTFORMAT\n    >   'org.apache.hadoop.hive.ql.io.avro.AvroContainerOutputFormat'\n    > TBLPROPERTIES (\n    >   'avro.schema.url'='hdfs:///user/wzhu00/camus/camus-avsc/PriceSchema.avsc'\n    > );\nOK\nTime taken: 2.762 seconds\nhive> ALTER TABLE avro_price_internal ADD IF NOT EXISTS PARTITION (year=2014, month=03, day=31, hour=19) LOCATION '/user/wzhu00/camus/dest/pricesingle/hourly/2014/03/31/19';\nOK\nTime taken: 0.595 seconds\nhive> select * from avro_price_internal;\nOK\nFailed with exception java.io.IOException:org.apache.hadoop.hive.serde2.avro.BadSchemaException\nTime taken: 0.463 seconds","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhuw.chicago","name":"zhuw.chicago","key":"zhuw.chicago","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Wayne Zhu","active":true,"timeZone":"America/Chicago"},"created":"2014-04-04T15:20:48.300+0000","updated":"2014-04-04T15:20:48.300+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12679211/comment/13960046","id":"13960046","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=serega_sheypak","name":"serega_sheypak","key":"serega_sheypak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey","active":true,"timeZone":"Etc/UTC"},"body":"Can you post your schema?\n\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=serega_sheypak","name":"serega_sheypak","key":"serega_sheypak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey","active":true,"timeZone":"Etc/UTC"},"created":"2014-04-04T15:26:25.470+0000","updated":"2014-04-04T15:26:25.470+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12679211/comment/13960093","id":"13960093","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhuw.chicago","name":"zhuw.chicago","key":"zhuw.chicago","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Wayne Zhu","active":true,"timeZone":"America/Chicago"},"body":"Sergy,\nThanks for looking into it again. Here is the schema. \n{\n\t\"namespace\":\"greenbox.ecom.sears.com\",\n\t\"type\":\"record\",\n\t\"name\":\"PriceSchema\",\n\t\"fields\":[\n\t\t{\n\t\t\t\"name\":\"price_id\",\n\t\t\t\"type\":\"string\",\n\t\t\t\"default\" : \"\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_programType\",\n\t\t\t\"type\":\"string\",\n\t\t\t\"default\" : \"\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_sale_salePrice\",\n\t\t\t\"type\":\"float\",\n\t\t\t\"default\" : \"0\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_sale_saleEndDate\",\n\t\t\t\"type\":\"string\",\n\t\t\t\"default\" : \"\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_regPrice\",\n\t\t\t\"type\":\"float\",\n\t\t\t\"default\" : \"0\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_promotext\",\n\t\t\t\"type\":\"string\",\n\t\t\t\"default\" : \"\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_mapVal\",\n\t\t\t\"type\":\"float\",\n\t\t\t\"default\" : \"0\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_shipping_minRate\",\n\t\t\t\"type\": \"float\",\n\t\t\t\"default\" : \"0\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_shipping_isSywrMaxShipElig\",\n\t\t\t\"type\": \"boolean\",\n\t\t\t\"default\" : false\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_shipping_handlingFee\",\n\t\t\t\"type\":\"float\",\n\t\t\t\"default\" : \"0\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_shipping_mode_exp_excluded\",\n\t\t\t\"type\":\"string\",\n\t\t\t\"default\" : \"\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_shipping_mode_exp_price\",\n\t\t\t\"type\":\"float\",\n\t\t\t\"default\" : \"0\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_shipping_mode_gnd_excluded\",\n\t\t\t\"type\":\"string\",\n\t\t\t\"default\" : \"\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_shipping_mode_gnd_free_startDt\",\n\t\t\t\"type\":\"string\",\n\t\t\t\"default\" : \"\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_shipping_mode_gnd_free_endDt\",\n\t\t\t\"type\":\"string\",\n\t\t\t\"default\" : \"\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_shipping_mode_gnd_free_promoTxt\",\n\t\t\t\"type\":\"string\",\n\t\t\t\"default\" : \"\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_shipping_mode_gnd_free_price\",\n\t\t\t\"type\": \"boolean\",\n\t\t\t\"default\" : false\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_shipping_mode_prem_excluded\",\n\t\t\t\"type\":\"string\",\n\t\t\t\"default\" : \"\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_shipping_mode_prem_price\",\n\t\t\t\"type\":\"float\",\n\t\t\t\"default\" : \"0\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_handlingFee\",\n\t\t\t\"type\": \"boolean\",\n\t\t\t\"default\" : false\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_meta_createdTs\",\n\t\t\t\"type\":\"string\",\n\t\t\t\"default\" : \"\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_meta_lastModifiedBy\",\n\t\t\t\"type\":\"string\",\n\t\t\t\"default\" : \"\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_meta_modifiedTs\",\n\t\t\t\"type\":\"string\",\n\t\t\t\"default\" : \"\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_meta_schemaVer\",\n\t\t\t\"type\":\"string\",\n\t\t\t\"default\" : \"\"\n\t\t},\n\t\t{\n\t\t\t\"name\":\"price_isCENotExist\",\n\t\t\t\"type\": \"boolean\",\n\t\t\t\"default\" : false\n\t\t}\n\t]\n}\n\nThe table without partition works fine.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhuw.chicago","name":"zhuw.chicago","key":"zhuw.chicago","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Wayne Zhu","active":true,"timeZone":"America/Chicago"},"created":"2014-04-04T16:19:52.292+0000","updated":"2014-04-04T16:19:52.292+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12679211/comment/13960107","id":"13960107","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhuw.chicago","name":"zhuw.chicago","key":"zhuw.chicago","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Wayne Zhu","active":true,"timeZone":"America/Chicago"},"body":"It is working now when I removed the data from the partition.\nhive> select * from avro_price_external limit 1;\nOK\nTime taken: 0.245 seconds\nSo something is wrong when Hive tries to read the data.\n\nHere is what I tried with the external table.\nCREATE EXTERNAL TABLE avro_price_external\nPARTITIONED BY (year int, month int, day int, hour int)\nROW FORMAT SERDE\n  'org.apache.hadoop.hive.serde2.avro.AvroSerDe'\nSTORED AS INPUTFORMAT\n  'org.apache.hadoop.hive.ql.io.avro.AvroContainerInputFormat'\nOUTPUTFORMAT\n  'org.apache.hadoop.hive.ql.io.avro.AvroContainerOutputFormat'\nTBLPROPERTIES (\n  'avro.schema.url'='hdfs:///user/wzhu00/camus/camus-avsc/PriceSchema.avsc'\n);\nhive> ALTER TABLE avro_price_external ADD IF NOT EXISTS PARTITION (year=2014, month=03, day=31, hour=19) LOCATION '/user/wzhu00/camus/dest/pricesingle/hourly/2014/03/31/19';\nhive> select * from avro_price_external;                                                                      OK\nFailed with exception java.io.IOException:org.apache.hadoop.hive.serde2.avro.BadSchemaException\nTime taken: 0.301 seconds\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhuw.chicago","name":"zhuw.chicago","key":"zhuw.chicago","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Wayne Zhu","active":true,"timeZone":"America/Chicago"},"created":"2014-04-04T16:31:17.878+0000","updated":"2014-04-04T16:31:17.878+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-5820/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1ptav:"}}