{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13199945","self":"https://issues.apache.org/jira/rest/api/2/issue/13199945","key":"HIVE-20959","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2018-12-17T20:39:55.104+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Dec 19 13:03:34 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-20959/watchers","watchCount":2,"isWatching":false},"created":"2018-11-21T22:34:01.976+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12550165","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12550165","type":{"id":"12310361","name":"Blocked","inward":"Blocked","outward":"Blocked","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310361"},"inwardIssue":{"id":"13195988","key":"HIVE-20860","self":"https://issues.apache.org/jira/rest/api/2/issue/13195988","fields":{"summary":"Fix or disable TestMiniLlapLocalCliDriver.testCliDriver[cbo_limit]","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/6","id":"6","description":"A new unit, integration or system test.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/requirement.png","name":"Test","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abstractdog","name":"abstractdog","key":"abstractdog","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laszlo Bodor","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-12-19T13:03:34.480+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"{code:java}\r\nClient Execution succeeded but contained differences (error code = 1) after executing cbo_rp_limit.q \r\n11c11\r\n< 1 4 2 \r\n--- \r\n> 1 4 2\r\n{code}\r\n\r\nAfter copying here to jira, cannot found difference, but by checking from original junit xml, there is a whitespace difference in the lines (represented as hex values), between 1 (x31) and 4 (x34). See  [^diff] . Original golden file contains horizontal tab (x09), actual output contains space (x20). \r\n\r\nThe serious thing is that the separator changes to x20, which is wrong, but then in the same line, it changes back to x09.\r\n\r\n{code}\r\n20 31 *20* 34 09 32 <- actual\r\n20 31 *09* 34 09 32 <- expected\r\n{code}\r\n\r\nTried to reproduce it by running the failing batch of qtests locally, but no luck (maybe it's an environment issue)\r\n{code}\r\nmvn test -T 1C -Dtest.output.overwrite=true -Pitests,hadoop-2 -pl itests/qtest -pl itests/util -Dtest=TestMiniLlapLocalCliDriver -Dqfile=dynamic_semijoin_reduction.q,materialized_view_create_rewrite_3.q,vectorization_pushdown.q,correlationoptimizer2.q,cbo_gby_empty.q,schema_evol_text_nonvec_part_all_complex_llap_io.q,vectorization_short_regress.q,mapjoin3.q,cross_product_check_1.q,results_cache_quoted_identifiers.q,unionDistinct_3.q,cbo_join.q,correlationoptimizer6.q,union_remove_26.q,cbo_rp_limit.q,convert_decimal64_to_decimal.q,vector_groupby_cube1.q,union2.q,groupby2.q,dynpart_sort_opt_vectorization.q,constraints_optimization.q,exchgpartition2lel.q,retry_failure.q,schema_evol_text_vecrow_part_llap_io.q,sample10.q,vectorized_timestamp_ints_casts.q,auto_sortmerge_join_2.q,bucketizedhiveinputformat.q,cte_mat_2.q,vectorization_8.q\r\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12949149","id":"12949149","filename":"171-TestMiniLlapLocalCliDriver-dynamic_semijoin_reduction.q-materialized_view_create_rewrite_3.q-vectorization_pushdown.q-and-27-more.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abstractdog","name":"abstractdog","key":"abstractdog","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laszlo Bodor","active":true,"timeZone":"Etc/UTC"},"created":"2018-11-22T06:54:50.793+0000","size":26053,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12949149/171-TestMiniLlapLocalCliDriver-dynamic_semijoin_reduction.q-materialized_view_create_rewrite_3.q-vectorization_pushdown.q-and-27-more.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12949153","id":"12949153","filename":"diff","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abstractdog","name":"abstractdog","key":"abstractdog","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laszlo Bodor","active":true,"timeZone":"Etc/UTC"},"created":"2018-11-22T07:04:35.564+0000","size":14,"mimeType":"text/html","content":"https://issues.apache.org/jira/secure/attachment/12949153/diff"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12949150","id":"12949150","filename":"TEST-171-TestMiniLlapLocalCliDriver-dynamic_semijoin_reduction.q-materialized_view_create_rewrite_3.q-vectorization_pushdown.q-and-27-more-TEST-org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abstractdog","name":"abstractdog","key":"abstractdog","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laszlo Bodor","active":true,"timeZone":"Etc/UTC"},"created":"2018-11-22T06:55:07.626+0000","size":134543,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12949150/TEST-171-TestMiniLlapLocalCliDriver-dynamic_semijoin_reduction.q-materialized_view_create_rewrite_3.q-vectorization_pushdown.q-and-27-more-TEST-org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.xml"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"cbo_rp_limit / cbo_limit are flaky - intermittent whitespace difference","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abstractdog","name":"abstractdog","key":"abstractdog","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laszlo Bodor","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abstractdog","name":"abstractdog","key":"abstractdog","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laszlo Bodor","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199945/comment/16722569","id":"16722569","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abstractdog","name":"abstractdog","key":"abstractdog","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laszlo Bodor","active":true,"timeZone":"Etc/UTC"},"body":"[~vihangk1] : as I've seen, you checked this on ptest env (HIVE-20860), did you try the test alone, or in the failing batch of qtests (please find it in the description). It's unlikely that tests could affect each other this way (as they're running in a serial way, right?), but maybe it worth a try...I've no better idea at the moment.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abstractdog","name":"abstractdog","key":"abstractdog","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laszlo Bodor","active":true,"timeZone":"Etc/UTC"},"created":"2018-12-16T20:34:04.454+0000","updated":"2018-12-16T20:34:26.579+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199945/comment/16723350","id":"16723350","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"Yeah, I tried running it locally and running with the same batch as well. Not sure why it fails intermittently. If you are seeing tab instead of space, can you force the test to use one of the two so that it is consistent and not environment dependent?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-12-17T20:39:55.104+0000","updated":"2018-12-17T20:39:55.104+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199945/comment/16724981","id":"16724981","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abstractdog","name":"abstractdog","key":"abstractdog","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laszlo Bodor","active":true,"timeZone":"Etc/UTC"},"body":"[~vihangk1] : okay, makes sense\r\nto be honest, I cannot find the codepath, where result field separators are handled/described, i have to dig deep, I'll check it\r\nhowever it's very exotic that cbo_rp_limit and cbo_limit are the failing tests, they have nothing to do with field separators or anything like that, and in case the preceding test makes them fail, we should have been able to reproduce I guess...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abstractdog","name":"abstractdog","key":"abstractdog","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laszlo Bodor","active":true,"timeZone":"Etc/UTC"},"created":"2018-12-19T13:03:34.480+0000","updated":"2018-12-19T13:03:34.480+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-20959/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|s00r8o:"}}