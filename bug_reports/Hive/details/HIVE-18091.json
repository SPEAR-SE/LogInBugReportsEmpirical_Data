{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13119167","self":"https://issues.apache.org/jira/rest/api/2/issue/13119167","key":"HIVE-18091","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12332154","id":"12332154","description":"","name":"1.3.0","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2017-11-20T17:31:58.580+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Nov 30 12:00:30 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_10246973_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_1119909015","customfield_12312321":null,"resolutiondate":"2017-11-30T11:43:21.996+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-18091/watchers","watchCount":3,"isWatching":false},"created":"2017-11-17T09:47:26.112+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-11-30T12:00:30.452+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327562","id":"12327562","name":"Test"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312590","id":"12312590","name":"Testing Infrastructure","description":"Tracks issues with tests and testing infrastructure."}],"timeoriginalestimate":null,"description":"Seen this while looking at ptest results for HIVE-17947 but is probably an older issue.\r\n\r\nTests under itests/qtest-spark and itests/hive-unit fail when trying to execute the download-spark plugin with:\r\n\r\n{code}\r\n[INFO]\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Building Hive Integration - Unit Tests 1.3.0-SNAPSHOT\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO]\r\n[INFO] --- maven-enforcer-plugin:1.3.1:enforce (enforce-no-snapshots) @ hive-it-unit ---\r\n[INFO]\r\n[INFO] --- maven-antrun-plugin:1.7:run (download-spark) @ hive-it-unit ---\r\n[INFO] Executing tasks\r\n\r\nmain:\r\n     [exec] + /bin/pwd\r\n     [exec] + BASE_DIR=./target\r\n     [exec] + HIVE_ROOT=./target/../../../\r\n     [exec] + DOWNLOAD_DIR=./../thirdparty\r\n     [exec] + mkdir -p ./../thirdparty\r\n     [exec] /home/hiveptest/35.192.99.254-hiveptest-0/apache-github-branch-1-source/itests/hive-unit\r\n     [exec] + download http://d3jw87u4immizc.cloudfront.net/spark-tarball/spark-1.5.0-bin-hadoop2-without-hive.tgz spark\r\n     [exec] + url=http://d3jw87u4immizc.cloudfront.net/spark-tarball/spark-1.5.0-bin-hadoop2-without-hive.tgz\r\n     [exec] + finalName=spark\r\n     [exec] ++ basename http://d3jw87u4immizc.cloudfront.net/spark-tarball/spark-1.5.0-bin-hadoop2-without-hive.tgz\r\n     [exec] + tarName=spark-1.5.0-bin-hadoop2-without-hive.tgz\r\n     [exec] + rm -rf ./target/spark\r\n     [exec] + [[ ! -f ./../thirdparty/spark-1.5.0-bin-hadoop2-without-hive.tgz ]]\r\n     [exec] + tar -zxf ./../thirdparty/spark-1.5.0-bin-hadoop2-without-hive.tgz -C ./target\r\n     [exec] + mv ./target/spark-1.5.0-bin-hadoop2-without-hive ./target/spark\r\n     [exec] + cp -f ./target/../../..//data/conf/spark/log4j.properties ./target/spark/conf/\r\n     [exec] + sed '/package /d' /data/hiveptest/working/apache-github-branch-1-source/itests/../contrib/src/java/org/apache/hadoop/hive/contrib/udf/example/UDFExampleAdd.java\r\n     [exec] sed: can't read /data/hiveptest/working/apache-github-branch-1-source/itests/../contrib/src/java/org/apache/hadoop/hive/contrib/udf/example/UDFExampleAdd.java: No such file or directory\r\n     [exec] + javac -cp /data/hiveptest/working/maven/org/apache/hive/hive-exec/1.3.0-SNAPSHOT/hive-exec-1.3.0-SNAPSHOT.jar /tmp/UDFExampleAdd.java -d /tmp\r\n     [exec] + jar -cf /tmp/udfexampleadd-1.0.jar -C /tmp UDFExampleAdd.class\r\n     [exec] /tmp/UDFExampleAdd.class : no such file or directory\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time: 8.376s\r\n[INFO] Finished at: Mon Nov 06 22:29:39 UTC 2017\r\n[INFO] Final Memory: 18M/241M\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:1.7:run (download-spark) on project hive-it-unit: An Ant BuildException has occured: exec returned: 1\r\n[ERROR] around Ant part ...<exec dir=\"/home/hiveptest/35.192.99.254-hiveptest-0/apache-github-branch-1-source/itests/hive-unit\" executable=\"bash\" failonerror=\"true\">... @ 4:141 in /home/hiveptest/35.192.99.254-hiveptest-0/apache-github-branch-1-source/itests/hive-unit/target/antrun/build-main.xml\r\n{code}\r\n\r\n{{mvn antrun:run@download-spark}} passes when run locally, so I guess it might be an issue with the way wer're executing ptests.\r\n\r\nFull list of classes with the same error:\r\n\r\n{code}\r\nTestAcidOnTez\r\nTestAdminUser\r\nTestAuthorizationPreEventListener\r\nTestAuthzApiEmbedAuthorizerInEmbed\r\nTestAuthzApiEmbedAuthorizerInRemote\r\nTestBeeLineWithArgs\r\nTestCLIAuthzSessionContext\r\nTestClearDanglingScratchDir\r\nTestClientSideAuthorizationProvider\r\nTestCompactor\r\nTestCreateUdfEntities\r\nTestCustomAuthentication\r\nTestDBTokenStore\r\nTestDDLWithRemoteMetastoreSecondNamenode\r\nTestDynamicSerDe\r\nTestEmbeddedHiveMetaStore\r\nTestEmbeddedThriftBinaryCLIService\r\nTestFilterHooks\r\nTestFolderPermissions\r\nTestHS2AuthzContext\r\nTestHS2AuthzSessionContext\r\nTestHS2ClearDanglingScratchDir\r\nTestHS2ImpersonationWithRemoteMS\r\nTestHiveAuthorizerCheckInvocation\r\nTestHiveAuthorizerShowFilters\r\nTestHiveHistory\r\nTestHiveMetaStoreTxns\r\nTestHiveMetaStoreWithEnvironmentContext\r\nTestHiveMetaTool\r\nTestHiveServer2\r\nTestHiveServer2SessionTimeout\r\nTestHiveSessionImpl\r\nTestHs2Hooks\r\nTestJdbcDriver2\r\nTestJdbcMetadataApiAuth\r\nTestJdbcWithLocalClusterSpark\r\nTestJdbcWithMiniHS2\r\nTestJdbcWithMiniMr\r\nTestJdbcWithSQLAuthUDFBlacklist\r\nTestJdbcWithSQLAuthorization\r\nTestLocationQueries\r\nTestMTQueries\r\nTestMarkPartition\r\nTestMarkPartitionRemote\r\nTestMetaStoreAuthorization\r\nTestMetaStoreConnectionUrlHook\r\nTestMetaStoreEndFunctionListener\r\nTestMetaStoreEventListener\r\nTestMetaStoreEventListenerOnlyOnCommit\r\nTestMetaStoreInitListener\r\nTestMetaStoreListenersError\r\nTestMetaStoreMetrics\r\nTestMetaStoreUtils\r\nTestMetastoreAuthorizationProvider\r\nTestMetastoreVersion\r\nTestMiniHS2\r\nTestMiniSparkOnYarnCliDriver\r\nTestMultiAuthorizationPreEventListener\r\nTestMultiSessionsHS2WithLocalClusterSpark\r\nTestNoSaslAuth\r\nTestOperationLoggingAPIWithMr\r\nTestOperationLoggingAPIWithTez\r\nTestPartitionNameWhitelistValidation\r\nTestPasswordWithConfig\r\nTestRemoteHiveMetaStore\r\nTestRemoteHiveMetaStoreIpAddress\r\nTestRemoteUGIHiveMetaStoreIpAddress\r\nTestRetryingHMSHandler\r\nTestSSL\r\nTestSchemaTool\r\nTestSemanticAnalyzerHookLoading\r\nTestSerdeWithFieldComments\r\nTestServerSpecificConfig\r\nTestServiceDiscovery\r\nTestSetUGIOnBothClientServer\r\nTestSetUGIOnOnlyClient\r\nTestSetUGIOnOnlyServer\r\nTestSparkCliDriver\r\nTestSparkNegativeCliDriver\r\nTestStorageBasedClientSideAuthorizationProvider\r\nTestStorageBasedMetastoreAuthorizationDrops\r\nTestStorageBasedMetastoreAuthorizationProvider\r\nTestStorageBasedMetastoreAuthorizationReads\r\nTestThriftBinaryCLIService\r\nTestThriftHttpCLIService\r\nTestZooKeeperTokenStore\r\n{code}\r\n\r\nThese are all the test classes of the two modules with the exception of TestHiveMetastore.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12898198","id":"12898198","filename":"HIVE-18091.1-branch-1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"created":"2017-11-17T12:34:06.764+0000","size":941,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12898198/HIVE-18091.1-branch-1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12898492","id":"12898492","filename":"HIVE-18091.2-branch-1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"created":"2017-11-20T14:24:50.648+0000","size":941,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12898492/HIVE-18091.2-branch-1.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Failing tests of itests/qtest-spark and itests/hive-unit on branch-1","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119167/comment/16256918","id":"16256918","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"body":"Attaching patch #1. This is the backport of HIVE-11887 that removes the part of the download.sh that fails.\r\n\r\nI'm assuming this will break {{TestCliDriver.testCliDriver_ivyDownload}} and I'll have to apply HIVE-13798 as well, but let's take it one step at a time.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"created":"2017-11-17T12:37:45.852+0000","updated":"2017-11-17T12:37:45.852+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119167/comment/16259285","id":"16259285","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"body":"Attaching patch #2. This is the same as patch #1, re-uploading to trigger a test run.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"created":"2017-11-20T14:25:35.114+0000","updated":"2017-11-20T14:25:35.114+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119167/comment/16259526","id":"16259526","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12898492/HIVE-18091.2-branch-1.patch\n\n{color:red}ERROR:{color} -1 due to no test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 62 failed/errored test(s), 9119 tests executed\n*Failed tests:*\n{noformat}\nTestHs2HooksWithMiniKdc - did not produce a TEST-*.xml file (likely timed out) (batchId=451)\nTestJdbcWithMiniKdc - did not produce a TEST-*.xml file (likely timed out) (batchId=448)\nTestJdbcWithMiniKdcCookie - did not produce a TEST-*.xml file (likely timed out) (batchId=447)\nTestJdbcWithMiniKdcSQLAuthBinary - did not produce a TEST-*.xml file (likely timed out) (batchId=445)\nTestJdbcWithMiniKdcSQLAuthHttp - did not produce a TEST-*.xml file (likely timed out) (batchId=450)\nTestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=201)\n\t[multi_insert_mixed.q,smb_mapjoin_4.q,timestamp_comparison.q,join_cond_pushdown_3.q,insert1.q,union_remove_10.q,mapreduce2.q,bucketmapjoin_negative.q,udf_in_file.q,skewjoinopt5.q,auto_join12.q,skewjoin.q,vector_count_distinct.q,smb_mapjoin_3.q,stats10.q]\nTestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=204)\n\t[auto_join30.q,union_remove_1.q,ppd_outer_join2.q,date_udf.q,join16.q,smb_mapjoin_13.q,bucketmapjoin7.q,smb_mapjoin_18.q,join19.q,metadata_only_queries.q,union6.q,cbo_subq_in.q,vectorization_part.q,groupby3_map_multi_distinct.q,vectorized_timestamp_funcs.q]\nTestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=205)\n\t[bucketmapjoin12.q,auto_join10.q,ptf_rcfile.q,join20.q,vector_elt.q,multi_insert.q,groupby_rollup1.q,ppd_join5.q,join_filters_overlap.q,vector_string_concat.q,join_empty.q,smb_mapjoin_6.q,auto_sortmerge_join_12.q,groupby_bigdata.q,innerjoin.q]\nTestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=206)\n\t[tez_joins_explain.q,input17.q,ppd_gby_join.q,vectorized_rcfile_columnar.q,ppd_join.q,join_cond_pushdown_1.q,union_remove_6_subq.q,timestamp_3.q,load_dyn_part6.q,load_dyn_part9.q,multi_insert_gby2.q,vectorization_11.q,avro_compression_enabled_native.q,stats_noscan_2.q,transform1.q]\nTestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=210)\n\t[escape_distributeby1.q,join9.q,groupby2.q,vectorization_pushdown.q,union_date.q,join_cond_pushdown_unqual3.q,join8.q,sample10.q,ppd_outer_join3.q,cross_product_check_1.q,statsfs.q,auto_sortmerge_join_2.q,auto_join_stats.q,input_part2.q,groupby_multi_single_reducer3.q]\nTestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=214)\n\t[ppd_join4.q,load_dyn_part2.q,smb_mapjoin_7.q,vectorization_5.q,smb_mapjoin_2.q,ppd_join_filter.q,column_access_stats.q,stats0.q,vector_between_in.q,vectorized_string_funcs.q,vectorization_1.q,bucket_map_join_2.q,temp_table_join1.q,vectorized_case.q,stats_noscan_1.q]\nTestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=216)\n\t[stats12.q,groupby4.q,union_top_level.q,groupby10.q,subquery_in.q,mapjoin_filter_on_outerjoin.q,stats14.q,auto_sortmerge_join_4.q,limit_partition_metadataonly.q,load_dyn_part4.q,union3.q,smb_mapjoin_14.q,groupby3_noskew_multi_distinct.q,stats18.q,union_remove_21.q]\nTestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=220)\n\t[table_access_keys_stats.q,bucketmapjoin11.q,union_remove_9.q,mergejoins_mixed.q,join_nullsafe.q,stats8.q,auto_join28.q,skewjoinopt14.q,union17.q,vectorized_shufflejoin.q,groupby8_noskew.q,auto_sortmerge_join_10.q,groupby11.q,skewjoinopt11.q,load_dyn_part11.q]\nTestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=221)\n\t[script_pipe.q,auto_join24.q,ptf_seqfile.q,union_remove_23.q,filter_join_breaktask.q,parallel_join0.q,join_thrift.q,vectorized_mapjoin.q,groupby8.q,union4.q,auto_join5.q,smb_mapjoin_20.q,groupby_multi_insert_common_distinct.q,join6.q,union_remove_16.q]\nTestSparkCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=226)\n\t[join36.q,union_remove_15.q,smb_mapjoin_10.q,bucket_map_join_tez1.q,temp_table.q,union_remove_13.q,auto_join8.q,auto_join6.q,auto_join0.q,vectorization_17.q,auto_join_stats2.q,skewjoin_union_remove_1.q,union16.q,auto_join32.q,union_remove_20.q]\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_globallimit (batchId=45)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_mapjoin (batchId=16)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_annotate_stats_table (batchId=32)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_drop_database_removes_partition_dirs (batchId=98)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_drop_table_removes_partition_dirs (batchId=132)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_dynpart_sort_optimization (batchId=81)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_dynpart_sort_optimization_acid (batchId=69)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_explain_dependency (batchId=64)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_explain_dependency2 (batchId=109)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby10 (batchId=95)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby11 (batchId=111)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby8 (batchId=114)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ivyDownload (batchId=38)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_semijoin5 (batchId=23)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_temp_table_gb1 (batchId=50)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_fast_stats (batchId=78)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_string_decimal (batchId=4)\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_windowing (batchId=82)\norg.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver_encryption_drop_partition (batchId=437)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_vector_outer_join1 (batchId=452)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_vector_outer_join4 (batchId=452)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_vector_outer_join5 (batchId=452)\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynamic_partition_pruning (batchId=175)\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_groupby2 (batchId=180)\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_stats_only_null (batchId=174)\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_smb_empty (batchId=176)\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union_fast_stats (batchId=181)\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorized_dynamic_partition_pruning (batchId=175)\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_groupby2 (batchId=143)\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_index_bitmap_auto (batchId=138)\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx_cbo_2 (batchId=147)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import (batchId=153)\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_right_side_join (batchId=153)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_dynamic_rdd_cache (batchId=213)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby1 (batchId=198)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_stats9 (batchId=202)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_stats_only_null (batchId=203)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_13 (batchId=211)\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_short_regress (batchId=211)\norg.apache.hadoop.hive.ql.TestMTQueries.testMTQueries1 (batchId=380)\norg.apache.hadoop.hive.ql.io.orc.TestInputOutputFormat.testSplitGenFailure (batchId=594)\norg.apache.hadoop.hive.ql.txn.compactor.TestCompactor.testTableProperties (batchId=379)\norg.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=269)\norg.apache.hive.jdbc.TestSSL.testSSLVersion (batchId=408)\norg.apache.hive.minikdc.TestHiveAuthFactory.testStartTokenManagerForDBTokenStore (batchId=449)\norg.apache.hive.minikdc.TestHiveAuthFactory.testStartTokenManagerForMemoryTokenStore (batchId=449)\norg.apache.hive.minikdc.TestMiniHiveKdc.testLogin (batchId=446)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/7922/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/7922/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-7922/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 62 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12898492 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2017-11-20T17:31:58.580+0000","updated":"2017-11-20T17:31:58.580+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119167/comment/16263269","id":"16263269","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"body":"It seems like it did the trick. There were ~160 failures before (see results on HIVE-17947) and now there's only 62. All failures were there before the patch but the following 10 failing test cases didn't get a chance to run before:\r\n\r\n{code}\r\norg.apache.hadoop.hive.ql.TestMTQueries#testMTQueries1\r\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver#testCliDriver_vector_outer_join1\r\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver#testCliDriver_vector_outer_join4\r\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver#testCliDriver_vector_outer_join5\r\norg.apache.hadoop.hive.cli.TestSparkCliDriver#testCliDriver_dynamic_rdd_cache\r\norg.apache.hadoop.hive.cli.TestSparkCliDriver#testCliDriver_groupby1\r\norg.apache.hadoop.hive.cli.TestSparkCliDriver#testCliDriver_stats9\r\norg.apache.hadoop.hive.cli.TestSparkCliDriver#testCliDriver_stats_only_null\r\norg.apache.hadoop.hive.cli.TestSparkCliDriver#testCliDriver_vectorization_13\r\norg.apache.hadoop.hive.cli.TestSparkCliDriver#testCliDriver_vectorization_short_regress\r\n{code}\r\n\r\nI'll take a look at them to see if they were caused or only uncovered by this fix.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"created":"2017-11-22T20:04:09.007+0000","updated":"2017-11-22T20:04:09.007+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119167/comment/16265260","id":"16265260","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"body":"All these 10 failures are failing without the patch when run locally. (This patch is only necessary when running via ptest executor.)\r\n\r\n[~sershe] since this ended up being a backport of HIVE-11887, could you please take a look?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"created":"2017-11-24T13:04:46.195+0000","updated":"2017-11-24T13:04:46.195+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119167/comment/16267441","id":"16267441","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-27T20:31:35.319+0000","updated":"2017-11-27T20:31:35.319+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119167/comment/16272555","id":"16272555","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kgyrtkirk","name":"kgyrtkirk","key":"kgyrtkirk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kgyrtkirk&avatarId=32755","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kgyrtkirk&avatarId=32755","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kgyrtkirk&avatarId=32755","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kgyrtkirk&avatarId=32755"},"displayName":"Zoltan Haindrich","active":true,"timeZone":"Europe/Budapest"},"body":"pushed to branch-1. Thank you [~dvoros] for fixing this!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kgyrtkirk","name":"kgyrtkirk","key":"kgyrtkirk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kgyrtkirk&avatarId=32755","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kgyrtkirk&avatarId=32755","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kgyrtkirk&avatarId=32755","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kgyrtkirk&avatarId=32755"},"displayName":"Zoltan Haindrich","active":true,"timeZone":"Europe/Budapest"},"created":"2017-11-30T11:43:22.070+0000","updated":"2017-11-30T11:43:22.070+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13119167/comment/16272575","id":"16272575","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"body":"Thank you [~sershe] for the review and [~kgyrtkirk] for committing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dvoros","name":"dvoros","key":"dvoros","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dvoros&avatarId=32116","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dvoros&avatarId=32116","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dvoros&avatarId=32116","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dvoros&avatarId=32116"},"displayName":"Daniel Voros","active":true,"timeZone":"Europe/Budapest"},"created":"2017-11-30T12:00:30.452+0000","updated":"2017-11-30T12:00:30.452+0000"}],"maxResults":8,"total":8,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-18091/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3mx1b:"}}