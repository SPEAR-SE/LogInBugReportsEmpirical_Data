{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12690758","self":"https://issues.apache.org/jira/rest/api/2/issue/12690758","key":"HIVE-6285","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2014-01-27T04:03:30.250+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Dec 23 22:42:47 UTC 2015","customfield_12310420":"369496","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_72004143189_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2016-05-05T21:33:22.225+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-6285/watchers","watchCount":6,"isWatching":false},"created":"2014-01-23T12:24:19.318+0000","customfield_12310192":"please feel free to reopen it if you still have the same issue.","customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324312","id":"12324312","description":"released","name":"0.12.0","archived":false,"released":true,"releaseDate":"2013-10-15"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-05-05T21:33:22.479+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313604","id":"12313604","name":"CLI","description":"Command-line interpreter for Hive.\n"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12320408","id":"12320408","name":"HiveServer2","description":"Tracks issues related to HiveServer2"}],"timeoriginalestimate":null,"description":"Running DESCRIBE EXTENDED always shows numRows as zero.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"369801","customfield_12312823":null,"summary":"DESCRIBE EXTENDED shows numRows as zero","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haroonm","name":"haroonm","key":"haroonm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haroon","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haroonm","name":"haroonm","key":"haroonm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haroon","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12690758/comment/13882553","id":"13882553","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"body":"load data into table via insert clause with hive.stats.autogather=true. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=navis","name":"navis","key":"navis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=navis&avatarId=19885","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=navis&avatarId=19885","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=navis&avatarId=19885","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=navis&avatarId=19885"},"displayName":"Navis","active":true,"timeZone":"Asia/Seoul"},"created":"2014-01-27T04:03:30.250+0000","updated":"2014-01-27T04:03:30.250+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12690758/comment/13882776","id":"13882776","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"body":"I documented this in the wiki, along with ANALYZE TABLE for gathering statistics in an existing table.\n\nPlease review and correct any errors:  [Describe Table/View/Column|https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-DescribeTable/View/Column].","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"created":"2014-01-27T12:20:00.380+0000","updated":"2014-01-27T12:20:00.380+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12690758/comment/13884220","id":"13884220","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haroonm","name":"haroonm","key":"haroonm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haroon","active":true,"timeZone":"Etc/UTC"},"body":"Ok - so it is through HIVE CLI that it works, however, same sequence of commands (ANALYZE ... COMPUTE followed by DESCRIBE EXTENDED) executed through THRIFT client causes the mentioned behavior for me.\n\nFor me, same sequence of commands executed through HIVE CLI shows correct statistics, however, through Beeline, value for num_rows is zero. Copying log reference for both Hive CLI as well as Beeline:-\n\nBeeline\n=======================================\n\n14/01/27 12:30:26 INFO ql.Driver: Starting command: analyze table testtable compute statistics\n.\n.\n.\n14/01/27 12:30:50 INFO exec.Task: Ended Job = job_1390412426489_0016\n14/01/27 12:30:50 INFO ql.Driver: </PERFLOG method=task.MAPRED.Stage-0 start=1390854626609 end=1390854650356 duration=23747>\n14/01/27 12:30:50 INFO ql.Driver: <PERFLOG method=task.STATS.Stage-1>\n14/01/27 12:30:50 INFO exec.StatsTask: Executing stats task\n14/01/27 12:30:50 INFO metastore.HiveMetaStore: 0: get_table : db=default tbl=testtable\n14/01/27 12:30:50 INFO HiveMetaStore.audit: ugi=user   ip=unknown-ip-addr      cmd=get_table : db=default tbl=testtable\n14/01/27 12:30:50 INFO metastore.HiveMetaStore: 0: alter_table: db=default tbl=testtable newtbl=testtable\n14/01/27 12:30:50 INFO HiveMetaStore.audit: ugi=user   ip=unknown-ip-addr      cmd=alter_table: db=default tbl=testtable newtbl=testtable\n14/01/27 12:30:50 INFO metastore.HiveMetaStore: 0: get_table : db=default tbl=testtable\n14/01/27 12:30:50 INFO HiveMetaStore.audit: ugi=user   ip=unknown-ip-addr      cmd=get_table : db=default tbl=testtable\nTable default.testtable stats: [num_partitions: 0, num_files: 1, num_rows: 0, total_size: 1798, raw_data_size: 0]\n14/01/27 12:30:50 INFO exec.Task: Table default.testtable stats: [num_partitions: 0, num_files: 1, num_rows: 0, total_size: 1798, raw_data_size: 0]\n\n\nHive CLI\n====================================================================\nhive> analyze table testtable compute statistics;\nAutomatically selecting local only mode for query\nTotal MapReduce jobs = 1\nLaunching Job 1 out of 1\nNumber of reduce tasks is set to 0 since there's no reduce operator\n14/01/27 11:53:08 WARN conf.Configuration: file:/tmp/user/hive_2014-01-27_11-53-00_513_3720223411970200370-1/-local-10000/jobconf.xml:an attempt to override final parameter: mapreduce.job.end-notification.max.retry.interval;  Ignoring.\n14/01/27 11:53:08 WARN conf.Configuration: file:/tmp/user/hive_2014-01-27_11-53-00_513_3720223411970200370-1/-local-10000/jobconf.xml:an attempt to override final parameter: mapreduce.job.end-notification.max.attempts;  Ignoring.\nExecution log at: /tmp/user/.log\nJob running in-process (local Hadoop)\nHadoop job information for null: number of mappers: 0; number of reducers: 0\n2014-01-27 11:53:20,634 null map = 0%,  reduce = 0%\n2014-01-27 11:53:21,671 null map = 100%,  reduce = 0%\nEnded Job = job_local1549706095_0001\nExecution completed successfully\nMapred Local Task Succeeded . Convert the Join into MapJoin\nTable default.testtable stats: [num_partitions: 0, num_files: 1, num_rows: 20, total_size: 1798, raw_data_size: 1778]\n\n\n \t\t \t   \t\t  \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haroonm","name":"haroonm","key":"haroonm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haroon","active":true,"timeZone":"Etc/UTC"},"created":"2014-01-28T14:58:40.106+0000","updated":"2014-01-28T14:58:40.106+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12690758/comment/15070275","id":"15070275","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pxiong","name":"pxiong","key":"pxiong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pengcheng Xiong","active":true,"timeZone":"America/Los_Angeles"},"body":"[~navis] and [~haroon], are you guys still able to reproduce the problem? In my case. both CLI and beeline works well.\nHere is the results for beeline:\n{code}\nCREATE TABLE `colors`(`c` char(20));\ninsert into colors values ('green');\ndesc extended colors;\n\nIt shows:\nparameters:{numFiles=1, transient_lastDdlTime=1450910401, COLUMN_STATS_ACCURATE=true, totalSize=21, numRows=1, rawDataSize=20},\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pxiong","name":"pxiong","key":"pxiong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pengcheng Xiong","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-23T22:42:47.591+0000","updated":"2015-12-23T22:42:47.591+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-6285/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1roon:"}}