{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12706464","self":"https://issues.apache.org/jira/rest/api/2/issue/12706464","key":"HIVE-6835","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326450","id":"12326450","description":"released","name":"0.14.0","archived":false,"released":true,"releaseDate":"2014-11-12"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-04-08T00:52:56.174+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Nov 13 19:43:15 UTC 2014","customfield_12310420":"384787","customfield_12312320":null,"customfield_12310222":"10002_*:*_4_*:*_1329796506_*|*_1_*:*_4_*:*_584705973_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-04-25T20:57:28.054+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-6835/watchers","watchCount":6,"isWatching":false},"created":"2014-04-03T17:09:05.612+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324312","id":"12324312","description":"released","name":"0.12.0","archived":false,"released":true,"releaseDate":"2013-10-15"}],"issuelinks":[{"id":"12399492","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12399492","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12749716","key":"HIVE-8560","self":"https://issues.apache.org/jira/rest/api/2/issue/12749716","fields":{"summary":"SerDes that do not inherit AbstractSerDe do not get table properties during initialize()","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12386028","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12386028","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12629597","key":"HIVE-3953","self":"https://issues.apache.org/jira/rest/api/2/issue/12629597","fields":{"summary":"Reading of partitioned Avro data fails because of missing properties","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12386697","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12386697","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12687099","key":"HIVE-6131","self":"https://issues.apache.org/jira/rest/api/2/issue/12687099","fields":{"summary":"New columns after table alter result in null values despite data","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-11-13T19:43:15.892+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"To reproduce:\n{code}\ncreate table testarray (a array<string>);\n\nload data local inpath '/home/ahsu/test/array.txt' into table testarray;\n\n# create partitioned Avro table with one array column\ncreate table avroarray partitioned by (y string) row format serde 'org.apache.hadoop.hive.serde2.avro.AvroSerDe' with serdeproperties ('avro.schema.literal'='{\"namespace\":\"test\",\"name\":\"avroarray\",\"type\": \"record\", \"fields\": [ { \"name\":\"a\", \"type\":{\"type\":\"array\",\"items\":\"string\"} } ] }')  STORED as INPUTFORMAT  'org.apache.hadoop.hive.ql.io.avro.AvroContainerInputFormat'  OUTPUTFORMAT  'org.apache.hadoop.hive.ql.io.avro.AvroContainerOutputFormat';\n\ninsert into table avroarray partition(y=1) select * from testarray;\n\n# add an int column with a default value of 0\nalter table avroarray set serde 'org.apache.hadoop.hive.serde2.avro.AvroSerDe' with serdeproperties('avro.schema.literal'='{\"namespace\":\"test\",\"name\":\"avroarray\",\"type\": \"record\", \"fields\": [ {\"name\":\"intfield\",\"type\":\"int\",\"default\":0},{ \"name\":\"a\", \"type\":{\"type\":\"array\",\"items\":\"string\"} } ] }');\n\n# fails with ClassCastException\nselect * from avroarray;\n{code}\nThe select * fails with:\n{code}\nFailed with exception java.io.IOException:java.lang.ClassCastException: org.apache.hadoop.hive.serde2.objectinspector.StandardListObjectInspector cannot be cast to org.apache.hadoop.hive.serde2.objectinspector.PrimitiveObjectInspector\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12639043","id":"12639043","filename":"HIVE-6835.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-07T19:19:08.825+0000","size":42606,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12639043/HIVE-6835.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12640487","id":"12640487","filename":"HIVE-6835.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-16T16:25:58.146+0000","size":44607,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12640487/HIVE-6835.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12640573","id":"12640573","filename":"HIVE-6835.3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-17T01:16:23.188+0000","size":48024,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12640573/HIVE-6835.3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12641627","id":"12641627","filename":"HIVE-6835.4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-24T01:18:50.721+0000","size":119112,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12641627/HIVE-6835.4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12641763","id":"12641763","filename":"HIVE-6835.5.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-24T17:44:26.910+0000","size":123917,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12641763/HIVE-6835.5.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"385054","customfield_12312823":null,"summary":"Reading of partitioned Avro data fails if partition schema does not match table schema","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13958989","id":"13958989","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"Right now, when AvroSerDe.initialize() is called, the Properties it is passed include both table and partition properties, with the partition properties *overriding* the table properties.  The AvroSerDe needs the *latest* schema (which should be stored in the table properties) for proper initialization and to prevent the ClassCastException.  My proposal is to pass both the table and partition properties to SerDe.initialize() by prepending the table properties with \"table.\", and let the SerDe decide which set of properties to use.\n\nBTW, here's the full stack trace when you do the select *:\n{code}\nFailed with exception java.io.IOException:java.lang.ClassCastException: org.apache.hadoop.hive.serde2.objectinspector.StandardListObjectInspector cannot be cast to org.apache.hadoop.hive.serde2.objectinspector.PrimitiveObjectInspector\n14/04/03 10:11:02 ERROR CliDriver: Failed with exception java.io.IOException:java.lang.ClassCastException: org.apache.hadoop.hive.serde2.objectinspector.StandardListObjectInspector cannot be cast to org.apache.hadoop.hive.serde2.objectinspector.PrimitiveObjectInspector\njava.io.IOException: java.lang.ClassCastException: org.apache.hadoop.hive.serde2.objectinspector.StandardListObjectInspector cannot be cast to org.apache.hadoop.hive.serde2.objectinspector.PrimitiveObjectInspector\n\tat org.apache.hadoop.hive.ql.exec.FetchOperator.getNextRow(FetchOperator.java:551)\n\tat org.apache.hadoop.hive.ql.exec.FetchOperator.pushRow(FetchOperator.java:489)\n\tat org.apache.hadoop.hive.ql.exec.FetchTask.fetch(FetchTask.java:136)\n\tat org.apache.hadoop.hive.ql.Driver.getResults(Driver.java:1471)\n\tat org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:272)\n\tat org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:217)\n\tat org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:414)\n\tat org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:782)\n\tat org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:676)\n\tat org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:615)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.hadoop.util.RunJar.main(RunJar.java:160)\nCaused by: java.lang.ClassCastException: org.apache.hadoop.hive.serde2.objectinspector.StandardListObjectInspector cannot be cast to org.apache.hadoop.hive.serde2.objectinspector.PrimitiveObjectInspector\n\tat org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorConverters.getConverter(ObjectInspectorConverters.java:148)\n\tat org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorConverters$StructConverter.<init>(ObjectInspectorConverters.java:304)\n\tat org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorConverters.getConverter(ObjectInspectorConverters.java:150)\n\tat org.apache.hadoop.hive.ql.exec.FetchOperator.getRecordReader(FetchOperator.java:407)\n\tat org.apache.hadoop.hive.ql.exec.FetchOperator.getNextRow(FetchOperator.java:515)\n\t... 14 more\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-03T17:13:53.215+0000","updated":"2014-04-03T17:13:53.215+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13962158","id":"13962158","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"Uploaded a patch with a fix.  Review Board link: https://reviews.apache.org/r/20096/","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-07T19:19:08.830+0000","updated":"2014-04-07T19:19:08.830+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13962471","id":"13962471","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:green}Overall{color}: +1 all checks pass\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12639043/HIVE-6835.1.patch\n\n{color:green}SUCCESS:{color} +1 5550 tests passed\n\nTest results: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/2167/testReport\nConsole output: http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/2167/console\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12639043","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2014-04-08T00:52:56.174+0000","updated":"2014-04-08T00:52:56.174+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13968102","id":"13968102","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"[~erwaman]: Please see my comments on reviewboard. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-14T05:54:53.104+0000","updated":"2014-04-14T05:54:53.104+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13968711","id":"13968711","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the very thorough code review, [~cwsteinbach].  I've uploaded a new patch that addresses your comments and also updated the Review Board request.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-14T19:24:45.089+0000","updated":"2014-04-14T19:24:45.089+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13969281","id":"13969281","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"+1. Will wait for tests to pass before committing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-15T06:59:35.280+0000","updated":"2014-04-15T07:00:11.572+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13970596","id":"13970596","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12640124/HIVE-6835.2.patch\n\n{color:red}ERROR:{color} -1 due to 2 failed/errored test(s), 5402 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_auto_sortmerge_join_16\norg.apache.hive.service.cli.thrift.TestThriftHttpCLIService.testExecuteStatementAsync\n{noformat}\n\nTest results: http://bigtop01.cloudera.org:8080/job/precommit-hive/5/testReport\nConsole output: http://bigtop01.cloudera.org:8080/job/precommit-hive/5/console\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 2 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12640124","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2014-04-16T09:12:24.007+0000","updated":"2014-04-16T09:12:24.007+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13971614","id":"13971614","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"Reuploading patch version 2 to trigger the tests again.  I ran locally the tests that failed in the last pre-commit build run, and they both passed for me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-16T16:25:58.151+0000","updated":"2014-04-16T16:25:58.151+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13971631","id":"13971631","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Please don't modify generated file serde/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/serde/serdeConstants.java Instead place new constant in serde/if/serde.thrift","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-16T16:47:12.949+0000","updated":"2014-04-16T16:47:12.949+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13972191","id":"13972191","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for catching this, Ashutosh.  My bad for not noticing I was modifying a generated file.  I have updated my [Review Board request|https://reviews.apache.org/r/20096/] and also uploaded a new patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-17T01:16:23.191+0000","updated":"2014-04-17T01:16:23.191+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13972241","id":"13972241","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"[~ashutoshc]: Thanks for catching the Thrift codegen problem.\n\n[~erwaman]: Updated patch looks good. +1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-17T02:30:20.360+0000","updated":"2014-04-17T02:30:20.360+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13973141","id":"13973141","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Just curious. If the avro serde is initialized with the table schema (which is the latest), is there a problem for it to read the old data, that is, data that conforms to the partition level metadata? I have seen so many JIRAs about schema evolution, and isn't quite sure what is possible and what is not.\n\nThe example given here is adding a new column in the beginning. What about other cases, such as adding it at the end, or changing data type, etc?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-17T16:52:53.321+0000","updated":"2014-04-17T16:52:53.321+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13973166","id":"13973166","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"I would also like to know answer for Xuefu's questions. It will be good to document what kind of schema evolution is supported by Avro Serde and more importantly what kinds are *not* supported.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-17T17:29:40.806+0000","updated":"2014-04-17T17:29:40.806+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13973279","id":"13973279","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"The AvroSerDe handles schema evolution as described in http://avro.apache.org/docs/current/spec.html#Schema+Resolution.  However, in the Hive code, the AvroSerDe needs to always be initialized with the latest schema so that ObjectInspectorConverters.getConvertedOI() (in FetchOperator:getRecordReader()) will work.  When the AvroSerDe actually reads the Avro file, it will then compare the latest schema to the actual schema stored in the Avro file and do schema resolution/evolution.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-17T19:00:25.295+0000","updated":"2014-04-17T19:00:25.295+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13973327","id":"13973327","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"{quote}\n in the Hive code, the AvroSerDe needs to always be initialized with the latest schema so that ObjectInspectorConverters.getConvertedOI() (in FetchOperator:getRecordReader()) will work.\n{quote}\n\n[~erwaman] I guess I don't quite follow this. The exception stack shows that casting error happens when reading old data with partition schema which is old schema. If the schema matches the data, I'm not sure why we'd have this casting error? On the other hand, if we use the new schema and read old data, would it be possible that error might arise?\n\nAnyway, I'm not fully understanding the real cause of the problem and how the change will address all other possible scenarios.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-17T19:59:35.333+0000","updated":"2014-04-17T19:59:35.333+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13973615","id":"13973615","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"What happens is Hive tries to build ObjectInspectorConverters from the partition schema to the table schema.  If the partition schema is different from the table schema, you may get a ClassCastException like above.\n\nWhen you add new columns at the end, this is not a problem because these new columns are chopped off.  See ObjectInspectorConverters:StructConverter:\n{code}\nint minFields = Math.min(inputFields.size(), outputFields.size());\nfieldConverters = new ArrayList<Converter>(minFields);\n{code}\nIt's only when you insert new columns at the beginning or in the middle that you might run into ClassCastExceptions.\n\nFor the AvroSerDe, if it always uses the latest schema (which should be the table-level schema), Hive will not get confused when constructing its ObjectInspectorConverters.  Then, later, when the AvroSerDe actually goes to read the Avro files, it can compare the latest schema with the (possibly old) schemas stored in the Avro data files themselves, and do the proper schema resolution, omitting fields or substituting default values, following the [schema resolution rules|http://avro.apache.org/docs/current/spec.html#Schema+Resolution].","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-18T00:22:03.425+0000","updated":"2014-04-18T00:22:03.425+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13973654","id":"13973654","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"On a side note: If you create an Avro table and store the schema in the TBLPROPERTIES -\n{code}\nCREATE TABLE ... TBLPROPERTIES ('avro.schema.literal'='...');\n{code}\n\\- everything works fine with partitions because TBLPROPERTIES are NOT copied to the partition, so the partition will end using the TBLPROPERTIES for initializing the Avro SerDe.\n\nIt's only when you store the schema in the SERDEPROPERTIES -\n{code}\nCREATE TABLE ... WITH SERDEPROPERTIES ('avro.schema.literal'='...');\n{code}\n\\- that problems arise.  SERDEPROPERTIES DO get copied to the partitions, so if you then end up changing the SERDEPROPERTIES stored at the table level, the SERDEPROPERTIES in the table and the partitions get out of sync and this sometimes leads to ClassCastExceptions with the AvroSerDe.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-18T01:00:21.720+0000","updated":"2014-04-18T01:00:21.720+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13973722","id":"13973722","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"[~erwaman] Thanks for the explanation. Now I see where the problem is. SERDEPROPERTIES and TBLPROPERTIES are for different purpose. I'm curious why user would put avro.schema.literal in the serde properties, as this is table specific and it should be put in TBLPROPERTIES. SERDEPROPERTIES, on the other hand, is used to control serde behavior (plugin level instead of table level), such as field delimiter which doesn't necessary vary from table to table. If you check AvroSerde documentation, schema is specified in TBLPROPERTIES. https://cwiki.apache.org/confluence/display/Hive/AvroSerDe. Thus, it seems that this fix is for an invalid use case. What's your thought on this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-18T02:39:39.371+0000","updated":"2014-04-18T02:39:39.371+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13974192","id":"13974192","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"I'm guessing the schema was specified in the SERDEPROPERTIES to work around HIVE-3953.  However, one issue with storing the schema in TBLPROPERTIES instead is that for partitioned tables, when you do a {{describe \\[extended] <table_name> partition(...);}}, you get\n{code}\nerror_error_error_error_error_error_error\tstring              \tfrom deserializer   \ncannot_determine_schema\tstring              \tfrom deserializer   \ncheck               \tstring              \tfrom deserializer   \nschema              \tstring              \tfrom deserializer   \nurl                 \tstring              \tfrom deserializer   \nand                 \tstring              \tfrom deserializer   \nliteral             \tstring              \tfrom deserializer\n{code}\nbecause the AvroSerDe cannot find \"avro.schema.literal\" or \"avro.schema.url\".  If you store the schema in SERDEPROPERTIES, you don't get this issue, since the SERDEPROPERTIES get copied to the partition when it is created.\n\nI do think it is useful to make both the table-level properties and the partition-level properties available separately to the SerDe when it's doing its .initalize().  The SerDe should be able to decide which set of properties it wants to use. From this point of view, I think my change is still useful and valid.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-18T16:12:31.036+0000","updated":"2014-04-18T16:12:31.036+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13974287","id":"13974287","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":" If TBLPROPERTIES are NOT copied to the partition, We should probably fix that problem instead. In Hive, partition holds a snapshot of the table schema when the partition is created. This should be applicable to AvroSerde as well.\n\nMaking table properties and partition properties available for a serde seems a good idea to me in general. However, what I questioned is the way the problem in AvroSerde is fixed. Especially, we don't want to fix the problem in a workaround solution while avoiding the original problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-18T17:43:14.527+0000","updated":"2014-04-18T17:43:14.527+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13974342","id":"13974342","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"If TBLPROPERTIES were copied to the partition, then you still might have the problem of the table-level Avro schema and the partition-level Avro schema getting out of sync, which might lead to ClassCastExceptions.  The Avro schema should always use the latest table-level schema, whether it is stored in TBLPROPERTIES or SERDEPROPERTIES.\n\nThe root of the problem is if an Avro schema somehow ends up in the partition properties, these could get out of sync with the table-level properties.  The Avro SerDe should always be using the table-level schema, and that's why my change was to (1) make the table-level properties available to the serde, and (2) change the Avro SerDe to use the table-level properties when present.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-18T18:31:22.493+0000","updated":"2014-04-18T18:31:22.493+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13974366","id":"13974366","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Points taken. However, I'm a little concerned that the solution here is a little bit hacky, as a serde might have a property prefixed by \"table.\". In that case, this may mess up. Instead, I'm thinking if it makes more sense to define a new serde initialize API, and deprecate the old one.\n{code}\npublic void initialize(Configuration configuration, Properties tableProperties, Properties partitionProperties) throws SerDeException;\n{code}\nWith that, a serde is free to do whatever they need .\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-18T19:07:19.083+0000","updated":"2014-04-18T19:07:19.083+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13974464","id":"13974464","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"I agree with [~xuefuz]. Also, now that we have AbstractSerDe (which is an abstract class as oppose to interface Serde) adding new methods is easier from backward-compatibility point of view. Polluting one map object from various sources sounds like inviting trouble to me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-18T20:52:21.296+0000","updated":"2014-04-18T20:52:21.296+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13974670","id":"13974670","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"[~xuefuz] and [~ashutoshc], just to clarify, is this the alternative solution you're proposing?:\n# Add\n{code}\npublic void initialize(Configuration configuration, Properties tableProperties, Properties partitionProperties) throws SerDeException;\n{code}\nto AbstractSerDe and provide a default implementation that just calls {{initialize(configuration, partitionProperties)}}\n# Change all calls of {{partitionSerde.initialize(conf, partProps)}} to {{partitionSerde.initialize(conf, tblProps, partProps)}}\n# Add\n{code}\n@Override\npublic void initialize(Configuration configuration, Properties tableProperties, Properties partitionProperties) throws SerDeException;\n{code}\nto AvroSerDe and provide an implementation that just uses the tableProperties\n\nI am okay with taking this approach, though it involves a lot more code changes and will change the public AbstractSerDe API.  Let me know what your thoughts on this approach are.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-19T00:53:49.402+0000","updated":"2014-04-19T00:53:49.402+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13975824","id":"13975824","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"I think that's pretty much what you need to do. While #2 may touch many files, it's fairly safe as #1 guarantees that the same code will be exercised. There isn't much API change. You add one with default implementation and deprecate the old one. In #3, you have both property sets and do whatever you need for Avro.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-21T18:21:29.649+0000","updated":"2014-04-21T18:21:29.649+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13976144","id":"13976144","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"Great, sounds like we're on the same page. I'll implement this new approach and upload a new patch soon.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-21T22:53:54.433+0000","updated":"2014-04-21T22:53:54.433+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13977337","id":"13977337","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"I started looking into this alternative and encountered an issue.  Most calls to serde.initialize() are treating serde as a Deserializer (interface).  I would either have to change the interface (and change all the implementations) or cast the Deserializer as an AbstractSerDe (whenever I want to use the new initialize() method), neither of which seems like a great solution. So I am back to supporting my original \"table.\" prefix approach. Any thoughts on this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-22T20:17:58.778+0000","updated":"2014-04-22T20:17:58.778+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13977616","id":"13977616","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Not sure if I understand your problem correctly, but I do understand that the scope of the proposed change has got bigger than your original approach. For any caller of serde initialization, we should be able to find whether serde instance extends AbstractSerde. If so, we cast the serde instance to AbstractSerde and call initialize(arg1, arg2, arg3). Otherwise, call serde.initialize(arg1, arg2). Does this solve the problem?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-22T23:29:00.012+0000","updated":"2014-04-22T23:29:00.012+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13977710","id":"13977710","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"Yes, this is possible, but I would have to add these \"instanceof AbstractSerde\" checks and then cast the Deserializer as an AbstractSerde before I can use the new initialize() method.  There are dozens of usages of .initialize() and adding all this type checking/casting code in so many places just for this new method doesn't seem very clean to me.\n\nAlso, if we add the new initialize() method, what should we do for table-level serde initialization?  When dealing with the table, there are no partition properties, so are we supposed to pass the table properties for both the tblProps and partProps arguments? If we leave partProps null, then the default new initialize() method implementation will just pass null to the old initialize() method.\n\nThere doesn't seem to be a very clean way of adding a new initialize() method without creating a lot of redundant boilerplate code and creating confusion which initialize() method to use and what values to pass in.  Given these concerns, I feel that prepending \"table.\" might be a cleaner and less confusing approach.  What are your thoughts on this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-23T01:24:35.729+0000","updated":"2014-04-23T01:24:35.729+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13977718","id":"13977718","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. I feel that prepending \"table.\" might be a cleaner and less confusing approach. What are your thoughts on this?\n\nThis doesn't seem to be a viable approach due to its hacky/problematic nature.\n\nbq.  many places just for this new method doesn't seem very clean to me.\n\nYou could have a utility method somewhere so that you need to call instanceof only once. Something like this:\n\n{code}\n  public static void initializeSerde(SerDe serde, Properties tblProps, Properties partProps) {\n    if (serde instanceof AbstractSerde) {\n       ...\n    } else {\n      ...\n    }\n  }\n{code}\nThen, each caller just needs to switch to this method.\n\nbq.  If we leave partProps null, then the default new initialize() method implementation will just pass null to the old initialize() method.\n\nThis sounds good to me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-23T01:38:42.804+0000","updated":"2014-04-23T01:38:42.804+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13979171","id":"13979171","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the suggestions and clarification, [~xuefuz].  I have uploaded a new patch (HIVE-6835.4.patch) using the new approach.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-24T01:18:50.725+0000","updated":"2014-04-24T01:18:50.725+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13979175","id":"13979175","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"P.S.: I also updated my Review Board request: https://reviews.apache.org/r/20096/","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-24T01:25:33.216+0000","updated":"2014-04-24T01:25:33.216+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13979241","id":"13979241","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the patch, which looks good. I have some comments on RB.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-24T03:38:26.647+0000","updated":"2014-04-24T03:38:26.647+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13980007","id":"13980007","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"Uploaded a new patch addressing [~xuefuz]'s comments.  I removed the getOverlayedProperties() from PartitionDesc and added a new createOverlayedProperties() method in SerDeUtils.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-24T17:44:26.915+0000","updated":"2014-04-24T17:44:26.915+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13980100","id":"13980100","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"Also updated [the RB|https://reviews.apache.org/r/20096/].","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-24T18:59:47.987+0000","updated":"2014-04-24T18:59:47.987+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13980129","id":"13980129","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Latest patch looks good to me. +1, pending on test result.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-24T19:24:31.726+0000","updated":"2014-04-24T19:24:31.726+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13980802","id":"13980802","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12641763/HIVE-6835.5.patch\n\n{color:red}ERROR:{color} -1 due to 40 failed/errored test(s), 5418 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join32\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_filter_numeric\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby2_map_skew\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_sort_1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_sort_skew_1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_infer_bucket_sort_list_bucket\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_6\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_7\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_8\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_test_outer\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nullgroup3\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_orc_createas1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_join4\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_select_dummy_source\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_list_bucket\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_partscan_1_23\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_symlink_text_input_format\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_truncate_column_list_bucket\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_current_database\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_10\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_12\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_13\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_14\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_19\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_20\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_21\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_22\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_23\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_24\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_4\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_5\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_7\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_8\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_9\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_bucketizedhiveinputformat\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_dynamic_partitions_with_whitelist\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_stats_partialscan_autogether\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/34/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/34/console\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 40 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12641763","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2014-04-25T08:28:26.402+0000","updated":"2014-04-25T08:28:26.402+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13981229","id":"13981229","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"[~erwaman] If you can confirm that these test failures are unrelated to your patch, I can commit it in a few hours.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-25T16:45:19.387+0000","updated":"2014-04-25T16:45:19.387+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13981278","id":"13981278","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"I will do some local testing soon and let you know.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-25T17:27:07.494+0000","updated":"2014-04-25T17:27:07.494+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13981425","id":"13981425","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"I tried all the failed union_remove TestCliDriver tests locally and they all passed.  Looking at some of the previous precommit builds, several of them also have the same test failures, so I believe these test failures are unrelated to my changes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-25T18:40:43.737+0000","updated":"2014-04-25T18:40:43.737+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13981431","id":"13981431","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"BTW, I have been doing all my development and testing against Hadoop 1.2.1 (-Phadoop-1).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-25T18:44:17.956+0000","updated":"2014-04-25T18:44:17.956+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13981588","id":"13981588","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Patch committed to trunk. Thanks Anthony for the contribution.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-25T20:57:28.081+0000","updated":"2014-04-25T20:57:28.081+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/13981677","id":"13981677","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks, [~xuefuz], for all your help and guidance.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erwaman","name":"erwaman","key":"erwaman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anthony Hsu","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-25T21:54:56.691+0000","updated":"2014-04-25T21:54:56.691+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12706464/comment/14210928","id":"14210928","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"body":"This has been fixed in 0.14 release. Please open new jira if you see any issues.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-13T19:43:15.885+0000","updated":"2014-11-13T19:43:15.885+0000"}],"maxResults":44,"total":44,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-6835/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1uafj:"}}