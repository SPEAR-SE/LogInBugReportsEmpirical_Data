{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12963424","self":"https://issues.apache.org/jira/rest/api/2/issue/12963424","key":"HIVE-13636","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2016-06-23T04:54:58.817+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jun 23 04:54:58 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-13636/watchers","watchCount":2,"isWatching":false},"created":"2016-04-28T09:03:22.874+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12332384","id":"12332384","name":"1.2.1","archived":false,"released":true,"releaseDate":"2015-06-26"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-06-23T04:54:58.817+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312584","id":"12312584","name":"Metastore","description":"Tracks issue dealing with metastore."},{"self":"https://issues.apache.org/jira/rest/api/2/component/12322671","id":"12322671","name":"Transactions","description":"Transaction management and ACID"}],"timeoriginalestimate":null,"description":"We are using Postgres as metastore and we enabled ACID transactions. Once we have done this, we started facing this error:\n\n{code}\nFATAL [DeadTxnReaper-0]: txn.AcidHouseKeeperService (AcidHouseKeeperService.java:run(92)) - Serious error in DeadTxnReaper-0: Method org/postgresql/jdbc3/Jdbc3ResultSet.isClosed()Z is abstract\n\njava.lang.AbstractMethodError: Method org/postgresql/jdbc3/Jdbc3ResultSet.isClosed()Z is abstract\n\n    at org.postgresql.jdbc3.Jdbc3ResultSet.isClosed(Jdbc3ResultSet.java)\n\n    at org.apache.hadoop.hive.metastore.txn.TxnHandler.close(TxnHandler.java:934)\n\n    at org.apache.hadoop.hive.metastore.txn.TxnHandler.close(TxnHandler.java:947)\n\n    at org.apache.hadoop.hive.metastore.txn.TxnHandler.performTimeOuts(TxnHandler.java:1933)\n\n    at org.apache.hadoop.hive.ql.txn.AcidHouseKeeperService$TimedoutTxnReaper.run(AcidHouseKeeperService.java:87)\n\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\n    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)\n\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)\n\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)\n\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n\n    at java.lang.Thread.run(Thread.java:745)\n{code}\n\nLooking at the code of the class TxnHandler, in the method close is actually used the isClosed() method on the ResultSet class, which is not implemented in Jdbc3ResultSet Postgres driver's class.\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Exception using Postgres as metastore with ACID transanctions enabled","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mgaido","name":"mgaido","key":"mgaido","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mgaido&avatarId=34522","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mgaido&avatarId=34522","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mgaido&avatarId=34522","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mgaido&avatarId=34522"},"displayName":"Marco Gaido","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mgaido","name":"mgaido","key":"mgaido","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mgaido&avatarId=34522","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mgaido&avatarId=34522","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mgaido&avatarId=34522","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mgaido&avatarId=34522"},"displayName":"Marco Gaido","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"HDP 2.3.2","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12963424/comment/15345738","id":"15345738","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Rajkumar+Singh","name":"Rajkumar Singh","key":"rajkumar singh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajkumar Singh","active":true,"timeZone":"Etc/UTC"},"body":"[~mgaido] it seems that there is no issue with hive here, you are using old postgress jdbc3 driver which is throwing AbstractMethodError, could you please update to jdbc4 driver and see if you still face this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Rajkumar+Singh","name":"Rajkumar Singh","key":"rajkumar singh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajkumar Singh","active":true,"timeZone":"Etc/UTC"},"created":"2016-06-23T04:54:58.817+0000","updated":"2016-06-23T04:54:58.817+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-13636/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2ww3z:"}}