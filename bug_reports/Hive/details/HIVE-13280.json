{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12949946","self":"https://issues.apache.org/jira/rest/api/2/issue/12949946","key":"HIVE-13280","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2016-05-21T08:41:03.762+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Oct 02 16:26:30 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_18298348641_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2016-10-12T11:44:42.450+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-13280/watchers","watchCount":6,"isWatching":false},"created":"2016-03-14T16:52:14.108+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12332641","id":"12332641","description":"Hive 2.0.0","name":"2.0.0","archived":false,"released":true,"releaseDate":"2016-02-15"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=damien.carol","name":"damien.carol","key":"damien.carol","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10448","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10448","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10448","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10448"},"displayName":"Damien Carol","active":true,"timeZone":"Europe/Paris"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-10-02T16:26:30.984+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313461","id":"12313461","name":"HBase Handler"}],"timeoriginalestimate":null,"description":"With a simple query (select from orc table and insert into HBase external table):\n{code:sql}\ninsert into table register.register  select * from aa_temp\n{code}\nThe aa_temp table have 45 orc files. It generate 45 mappers.\nSome mappers fail with this error:\n{noformat}\nCaused by: java.lang.IllegalArgumentException: Must specify table name\n        at org.apache.hadoop.hbase.mapreduce.TableOutputFormat.setConf(TableOutputFormat.java:188)\n        at org.apache.hive.common.util.ReflectionUtil.setConf(ReflectionUtil.java:101)\n        at org.apache.hive.common.util.ReflectionUtil.newInstance(ReflectionUtil.java:87)\n        at org.apache.hadoop.hive.ql.io.HiveFileFormatUtils.getHiveOutputFormat(HiveFileFormatUtils.java:300)\n        at org.apache.hadoop.hive.ql.io.HiveFileFormatUtils.getHiveOutputFormat(HiveFileFormatUtils.java:290)\n        at org.apache.hadoop.hive.ql.exec.FileSinkOperator.createHiveOutputFormat(FileSinkOperator.java:1126)\n        ... 25 more\n]], Vertex did not succeed due to OWN_TASK_FAILURE, failedTasks:1 killedTasks:35, Vertex vertex_1457964631631_0015_3_00 [Map 1] killed/failed due to:OWN_TASK_FAILURE]DAG did not succeed due to VERTEX_FAILURE. failedVertices:1 killedVertices:0 (state=08S01,code=2)\n{noformat}\n\nIf I do an ALTER CONCATENATE for aa_temp. And redo the query. Everything is fine because there are only one mapper.\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Error when more than 1 mapper for HBase storage handler","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=damien.carol","name":"damien.carol","key":"damien.carol","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10448","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10448","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10448","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10448"},"displayName":"Damien Carol","active":true,"timeZone":"Europe/Paris"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=damien.carol","name":"damien.carol","key":"damien.carol","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10448","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10448","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10448","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10448"},"displayName":"Damien Carol","active":true,"timeZone":"Europe/Paris"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12949946/comment/15294851","id":"15294851","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=turbopape","name":"turbopape","key":"turbopape","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafik Naccache - Turbopape","active":true,"timeZone":"Africa/Tunis"},"body":"I have the same problem,\nI am on HDP 2.4\nI created a big external hive table with a location\nI've set some hive views on that table\nAnd I launch a hive to insert the contents of these views inside a hbase storage backed table.\nI get the exact same error you're getting.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=turbopape","name":"turbopape","key":"turbopape","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafik Naccache - Turbopape","active":true,"timeZone":"Africa/Tunis"},"created":"2016-05-21T08:41:03.762+0000","updated":"2016-05-21T08:41:03.762+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12949946/comment/15312867","id":"15312867","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=seva_ostapenko","name":"seva_ostapenko","key":"seva_ostapenko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vsevolod Ostapenko","active":true,"timeZone":"America/New_York"},"body":"We are observing a similar behavior in HDP 2.4.0 when using TEZ execution engine.\nInserts into HBased-backed tables that do not require multiple mappers succeed.\nOnes that require multiple mappers fail with exactly the same errors.\n\nIf hive execution engine is set to MR, statements succeed and data are inserted as expected.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=seva_ostapenko","name":"seva_ostapenko","key":"seva_ostapenko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vsevolod Ostapenko","active":true,"timeZone":"America/New_York"},"created":"2016-06-02T18:49:45.981+0000","updated":"2016-06-02T18:50:25.368+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12949946/comment/15566536","id":"15566536","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"body":"[~damien.carol] Per the docs here: https://cwiki.apache.org/confluence/display/Hive/HBaseIntegration, the {{hbase.mapred.output.outputtable}} table property will need to be set for an insert query. Can you check the output of show create table and describe formatted to see if that property is set?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-11T20:42:22.175+0000","updated":"2016-10-11T20:42:35.769+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12949946/comment/15568492","id":"15568492","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=damien.carol","name":"damien.carol","key":"damien.carol","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10448","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10448","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10448","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10448"},"displayName":"Damien Carol","active":true,"timeZone":"Europe/Paris"},"body":"Yes this fix the pb.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=damien.carol","name":"damien.carol","key":"damien.carol","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10448","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10448","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10448","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10448"},"displayName":"Damien Carol","active":true,"timeZone":"Europe/Paris"},"created":"2016-10-12T11:44:24.591+0000","updated":"2016-10-12T11:44:24.591+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12949946/comment/15568493","id":"15568493","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=damien.carol","name":"damien.carol","key":"damien.carol","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10448","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10448","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10448","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10448"},"displayName":"Damien Carol","active":true,"timeZone":"Europe/Paris"},"body":"Yes this fix the pb.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=damien.carol","name":"damien.carol","key":"damien.carol","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10448","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10448","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10448","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10448"},"displayName":"Damien Carol","active":true,"timeZone":"Europe/Paris"},"created":"2016-10-12T11:44:26.658+0000","updated":"2016-10-12T11:44:26.658+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12949946/comment/15568866","id":"15568866","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=seva_ostapenko","name":"seva_ostapenko","key":"seva_ostapenko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vsevolod Ostapenko","active":true,"timeZone":"America/New_York"},"body":"Hive-Hbase integration documentation (https://cwiki.apache.org/confluence/display/Hive/HBaseIntegration) states that hbase.mapred.output.outputtable property is optional, and needed only when one wants to insert into a table. The latter statement is obviously incorrect, as prior to Feb 26, 2016, this property wasn't even documented and inserts into HBase-backed tables were working just fine with MR engine.\n\nIf TEZ does require hbase.mapred.output.outputtable property to be explicitly set, documentation needs to be updated to indicate that fact.\n\nOne more thing, all the existing samples have hbase.mapred.output.outputtable and hbase.table.name set to the same value. If there is no use case when they are different, why the former even needed?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=seva_ostapenko","name":"seva_ostapenko","key":"seva_ostapenko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vsevolod Ostapenko","active":true,"timeZone":"America/New_York"},"created":"2016-10-12T14:24:48.891+0000","updated":"2016-10-12T15:08:10.878+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12949946/comment/16188388","id":"16188388","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=smehtaji","name":"smehtaji","key":"smehtaji","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"sandeep mehta","active":true,"timeZone":"Etc/UTC"},"body":"I have tried by setting up {code} hbase.mapred.output.outputtable {code} but it's throwing the same error but when I only try to insert one record into the table then it works properly and no error. \nEven after the load job fails some of the data gets to the table anyways.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=smehtaji","name":"smehtaji","key":"smehtaji","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"sandeep mehta","active":true,"timeZone":"Etc/UTC"},"created":"2017-10-02T16:26:30.984+0000","updated":"2017-10-02T16:26:30.984+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-13280/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2um27:"}}