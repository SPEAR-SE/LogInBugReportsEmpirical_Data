{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12917186","self":"https://issues.apache.org/jira/rest/api/2/issue/12917186","key":"HIVE-12551","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12332154","id":"12332154","description":"","name":"1.3.0","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-12-01T20:48:11.092+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Oct 11 21:01:55 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_45331316_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-12-01T21:26:17.325+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-12551/watchers","watchCount":8,"isWatching":false},"created":"2015-12-01T08:50:46.039+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["serialization"],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12332154","id":"12332154","description":"","name":"1.3.0","archived":false,"released":false}],"issuelinks":[{"id":"12450547","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12450547","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12904861","key":"HIVE-12175","self":"https://issues.apache.org/jira/rest/api/2/issue/12904861","fields":{"summary":"Upgrade Kryo version to 3.0.x","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12450544","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12450544","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12904826","key":"HIVE-12174","self":"https://issues.apache.org/jira/rest/api/2/issue/12904826","fields":{"summary":"Error: java.lang.RuntimeException: org.apache.hive.com.esotericsoftware.kryo.KryoException: java.lang.IndexOutOfBoundsException: Index: 112, Size: 11","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12450543","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12450543","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12854158","key":"HIVE-11519","self":"https://issues.apache.org/jira/rest/api/2/issue/12854158","fields":{"summary":"kryo.KryoException: Encountered unregistered","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasanth_j","name":"prasanth_j","key":"prasanth_j","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasanth Jayachandran","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-10-11T21:01:55.535+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"HIVE-11519, HIVE-12174 and the following exception are all caused by unregistered classes or serializers. HIVE-12175 should have fixed these issues for master branch.\n\n{code}\nCaused by: org.apache.hive.com.esotericsoftware.kryo.KryoException: java.lang.NullPointerException\nSerialization trace:\nchidren (org.apache.hadoop.hive.ql.plan.ExprNodeGenericFuncDesc)\nexpr (org.apache.hadoop.hive.ql.exec.vector.udf.VectorUDFAdaptor)\nchildExpressions (org.apache.hadoop.hive.ql.exec.vector.expressions.gen.FilterStringColumnBetween)\nconditionEvaluator (org.apache.hadoop.hive.ql.exec.vector.VectorFilterOperator)\nchildOperators (org.apache.hadoop.hive.ql.exec.TableScanOperator)\naliasToWork (org.apache.hadoop.hive.ql.plan.MapWork)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:125)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:507)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:694)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:106)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:507)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:694)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.DefaultArraySerializers$ObjectArraySerializer.read(DefaultArraySerializers.java:367)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.DefaultArraySerializers$ObjectArraySerializer.read(DefaultArraySerializers.java:276)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:694)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:106)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:507)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:694)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:106)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:507)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:776)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.CollectionSerializer.read(CollectionSerializer.java:112)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.CollectionSerializer.read(CollectionSerializer.java:18)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:694)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:106)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:507)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:776)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.MapSerializer.read(MapSerializer.java:139)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.MapSerializer.read(MapSerializer.java:17)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:694)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:106)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:507)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:672)\n\tat org.apache.hadoop.hive.ql.exec.Utilities.deserializeObjectByKryo(Utilities.java:1087)\n\tat org.apache.hadoop.hive.ql.exec.Utilities.deserializePlan(Utilities.java:976)\n\tat org.apache.hadoop.hive.ql.exec.Utilities.deserializePlan(Utilities.java:990)\n\tat org.apache.hadoop.hive.ql.exec.Utilities.getBaseWork(Utilities.java:426)\n\t... 27 more\nCaused by: java.lang.NullPointerException\n\tat java.util.Arrays$ArrayList.size(Arrays.java:3818)\n\tat java.util.AbstractList.add(AbstractList.java:108)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.CollectionSerializer.read(CollectionSerializer.java:112)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.CollectionSerializer.read(CollectionSerializer.java:18)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:694)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:106)\n\t... 57 more\n\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12332154","id":"12332154","description":"","name":"1.3.0","archived":false,"released":false}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12774990","id":"12774990","filename":"HIVE-12551.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasanth_j","name":"prasanth_j","key":"prasanth_j","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasanth Jayachandran","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-01T09:10:57.084+0000","size":12536,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12774990/HIVE-12551.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12777014","id":"12777014","filename":"test case.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Feng+Yuan","name":"Feng Yuan","key":"feng yuan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=feng+yuan&avatarId=29897","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=feng+yuan&avatarId=29897","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=feng+yuan&avatarId=29897","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=feng+yuan&avatarId=29897"},"displayName":"Feng Yuan","active":true,"timeZone":"Etc/UTC"},"created":"2015-12-11T09:35:15.698+0000","size":1292607,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12777014/test+case.zip"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Fix several kryo exceptions in branch-1","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasanth_j","name":"prasanth_j","key":"prasanth_j","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasanth Jayachandran","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasanth_j","name":"prasanth_j","key":"prasanth_j","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasanth Jayachandran","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917186/comment/15033375","id":"15033375","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasanth_j","name":"prasanth_j","key":"prasanth_j","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasanth Jayachandran","active":true,"timeZone":"America/Los_Angeles"},"body":"[~ashutoshc] Can you take a look at this patch? This is same as HIVE-12175 except it does not update the version + it has a test case. Since its a branch-1 patch we don't run precommit tests. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasanth_j","name":"prasanth_j","key":"prasanth_j","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasanth Jayachandran","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-01T09:12:15.440+0000","updated":"2015-12-01T09:12:15.440+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917186/comment/15034543","id":"15034543","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"body":"Hmm.. wouldn't it be simpler to get rid of the bogus ArrayList? Other than that +1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sershe","name":"sershe","key":"sershe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Shelukhin","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-01T20:48:11.092+0000","updated":"2015-12-01T20:48:11.092+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917186/comment/15034608","id":"15034608","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasanth_j","name":"prasanth_j","key":"prasanth_j","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasanth Jayachandran","active":true,"timeZone":"America/Los_Angeles"},"body":"Committed to branch-1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasanth_j","name":"prasanth_j","key":"prasanth_j","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasanth Jayachandran","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-01T21:26:17.345+0000","updated":"2015-12-01T21:26:17.345+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917186/comment/15047815","id":"15047815","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Feng+Yuan","name":"Feng Yuan","key":"feng yuan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=feng+yuan&avatarId=29897","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=feng+yuan&avatarId=29897","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=feng+yuan&avatarId=29897","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=feng+yuan&avatarId=29897"},"displayName":"Feng Yuan","active":true,"timeZone":"Etc/UTC"},"body":"hi [~prasanth_j],i try to get down the newest src from branch-1 in github and try my hql,but still meet the issue:\nwhich: no hbase in (/opt/java/:/opt/hadoop/hadoop-2.6.0/bin:/opt/Python-2.7/bin:/opt/java/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/opt/Ice-3.3/bin:/opt/dell/srvadmin/bin:/opt/hadoop/hadoop-2.6.0/bin:/opt/hadoop/hadoop-2.6.0/sbin:/opt/hadoop/bin)\n\nLogging initialized using configuration in jar:file:/opt/hadoop/yuanfeng/apache-hive-1.3.0-SNAPSHOT-bin/lib/hive-common-1.3.0-SNAPSHOT.jar!/hive-log4j.properties\nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/opt/hadoop/hadoop-2.6.0/share/hadoop/common/lib/slf4j-log4j12-1.7.5.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/opt/hadoop/hadoop-2.6.0/lib/tez-0.5.2/lib/slf4j-log4j12-1.7.5.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]\nQuery ID = hadoop_20151208181528_d346dc26-18fb-4267-93e4-34c79f6759bd\nTotal jobs = 8\nStage-6 is selected by condition resolver.\nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/opt/hadoop/hadoop-2.6.0/share/hadoop/common/lib/slf4j-log4j12-1.7.5.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/opt/hadoop/hadoop-2.6.0/lib/tez-0.5.2/lib/slf4j-log4j12-1.7.5.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]\nExecution log at: /tmp/hadoop/hadoop_20151208181528_d346dc26-18fb-4267-93e4-34c79f6759bd.log\n2015-12-08 18:15:44     Starting to launch local task to process map join;      maximum memory = 1908932608\n2015-12-08 18:15:46     Dump the side-table for tag: 1 with group count: 1 into file: file:/tmp/hadoop/71586bb3-ea53-4edf-94d0-cc17094c60e9/hive_2015-12-08_18-15-28_261_2150907413884186817-1/-local-10015/HashTable-Stage-2/MapJoin-mapfile21--.hashtable\n2015-12-08 18:15:46     Uploaded 1 File to: file:/tmp/hadoop/71586bb3-ea53-4edf-94d0-cc17094c60e9/hive_2015-12-08_18-15-28_261_2150907413884186817-1/-local-10015/HashTable-Stage-2/MapJoin-mapfile21--.hashtable (293 bytes)\n2015-12-08 18:15:46     End of local task; Time Taken: 1.632 sec.\nExecution completed successfully\nMapredLocal task succeeded\nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/opt/hadoop/hadoop-2.6.0/share/hadoop/common/lib/slf4j-log4j12-1.7.5.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/opt/hadoop/hadoop-2.6.0/lib/tez-0.5.2/lib/slf4j-log4j12-1.7.5.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]\nExecution log at: /tmp/hadoop/hadoop_20151208181528_d346dc26-18fb-4267-93e4-34c79f6759bd.log\n2015-12-08 18:15:52     Starting to launch local task to process map join;      maximum memory = 1908932608\n2015-12-08 18:15:53     Dump the side-table for tag: 1 with group count: 1 into file: file:/tmp/hadoop/71586bb3-ea53-4edf-94d0-cc17094c60e9/hive_2015-12-08_18-15-28_261_2150907413884186817-1/-local-10019/HashTable-Stage-12/MapJoin-mapfile61--.hashtable\n2015-12-08 18:15:53     Uploaded 1 File to: file:/tmp/hadoop/71586bb3-ea53-4edf-94d0-cc17094c60e9/hive_2015-12-08_18-15-28_261_2150907413884186817-1/-local-10019/HashTable-Stage-12/MapJoin-mapfile61--.hashtable (293 bytes)\n2015-12-08 18:15:53     End of local task; Time Taken: 1.333 sec.\nExecution completed successfully\nMapredLocal task succeeded\nLaunching Job 1 out of 8\nNumber of reduce tasks not specified. Estimated from input data size: 24\nIn order to change the average load for a reducer (in bytes):\n  set hive.exec.reducers.bytes.per.reducer=<number>\nIn order to limit the maximum number of reducers:\n  set hive.exec.reducers.max=<number>\nIn order to set a constant number of reducers:\n  set mapreduce.job.reduces=<number>\nStarting Job = job_1449545133527_0033, Tracking URL = http://bjhlg-24p2-113-hadoop03:8088/proxy/application_1449545133527_0033/\nKill Command = /opt/hadoop/hadoop-2.6.0/bin/hadoop job  -kill job_1449545133527_0033\nHadoop job information for Stage-6: number of mappers: 8; number of reducers: 24\n2015-12-08 18:16:14,666 Stage-6 map = 0%,  reduce = 0%\n2015-12-08 18:16:28,249 Stage-6 map = 13%,  reduce = 0%, Cumulative CPU 19.93 sec\n2015-12-08 18:16:32,476 Stage-6 map = 15%,  reduce = 0%, Cumulative CPU 33.7 sec\n2015-12-08 18:16:34,591 Stage-6 map = 19%,  reduce = 0%, Cumulative CPU 33.7 sec\n2015-12-08 18:16:36,726 Stage-6 map = 40%,  reduce = 0%, Cumulative CPU 108.43 sec\n2015-12-08 18:16:37,789 Stage-6 map = 44%,  reduce = 0%, Cumulative CPU 109.72 sec\n2015-12-08 18:16:38,833 Stage-6 map = 50%,  reduce = 0%, Cumulative CPU 112.06 sec\n2015-12-08 18:16:42,003 Stage-6 map = 53%,  reduce = 0%, Cumulative CPU 120.92 sec\n2015-12-08 18:16:43,070 Stage-6 map = 57%,  reduce = 0%, Cumulative CPU 134.87 sec\n2015-12-08 18:16:45,196 Stage-6 map = 100%,  reduce = 100%, Cumulative CPU 112.06 sec\nMapReduce Total cumulative CPU time: 1 minutes 52 seconds 60 msec\nEnded Job = job_1449545133527_0033 with errors\nError during job, obtaining debugging information...\nExamining task ID: task_1449545133527_0033_m_000000 (and more) from job job_1449545133527_0033\nExamining task ID: task_1449545133527_0033_m_000004 (and more) from job job_1449545133527_0033\n\nTask with the most failures(4): \n-----\nTask ID:\n  task_1449545133527_0033_m_000006\n\nURL:\n  http://0.0.0.0:8088/taskdetails.jsp?jobid=job_1449545133527_0033&tipid=task_1449545133527_0033_m_000006\n-----\nDiagnostic Messages for this Task:\nError: java.lang.RuntimeException: org.apache.hive.com.esotericsoftware.kryo.KryoException: Encountered unregistered class ID: 18\nSerialization trace:\ntableDesc (org.apache.hadoop.hive.ql.plan.PartitionDesc)\naliasToPartnInfo (org.apache.hadoop.hive.ql.plan.MapWork)\n        at org.apache.hadoop.hive.ql.exec.Utilities.getBaseWork(Utilities.java:423)\n        at org.apache.hadoop.hive.ql.exec.Utilities.getMapWork(Utilities.java:286)\n        at org.apache.hadoop.hive.ql.io.HiveInputFormat.init(HiveInputFormat.java:263)\n        at org.apache.hadoop.hive.ql.io.HiveInputFormat.pushProjectionsAndFilters(HiveInputFormat.java:478)\n        at org.apache.hadoop.hive.ql.io.HiveInputFormat.pushProjectionsAndFilters(HiveInputFormat.java:471)\n        at org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.getRecordReader(CombineHiveInputFormat.java:648)\n        at org.apache.hadoop.mapred.MapTask$TrackedRecordReader.<init>(MapTask.java:169)\n        at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:429)\n        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:343)\n        at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:163)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:415)\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1628)\n        at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:158)\nCaused by: org.apache.hive.com.esotericsoftware.kryo.KryoException: Encountered unregistered class ID: 18\nSerialization trace:\ntableDesc (org.apache.hadoop.hive.ql.plan.PartitionDesc)\naliasToPartnInfo (org.apache.hadoop.hive.ql.plan.MapWork)\n        at org.apache.hive.com.esotericsoftware.kryo.util.DefaultClassResolver.readClass(DefaultClassResolver.java:119)\n        at org.apache.hive.com.esotericsoftware.kryo.Kryo.readClass(Kryo.java:656)\n        at org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:99)\n        at org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:507)\n        at org.apache.hive.com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:776)\n        at org.apache.hive.com.esotericsoftware.kryo.serializers.MapSerializer.read(MapSerializer.java:139)\n        at org.apache.hive.com.esotericsoftware.kryo.serializers.MapSerializer.read(MapSerializer.java:17)\n        at org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:694)\n        at org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:106)\n        at org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:507)\n        at org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:672)\n        at org.apache.hadoop.hive.ql.exec.Utilities.deserializeObjectByKryo(Utilities.java:1025)\n        at org.apache.hadoop.hive.ql.exec.Utilities.deserializePlan(Utilities.java:933)\n        at org.apache.hadoop.hive.ql.exec.Utilities.deserializePlan(Utilities.java:947)\n        at org.apache.hadoop.hive.ql.exec.Utilities.getBaseWork(Utilities.java:390)\n        ... 13 more\n\n\nFAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.mr.MapRedTask\nMapReduce Jobs Launched: \nStage-Stage-6: Map: 8  Reduce: 24   Cumulative CPU: 112.06 sec   HDFS Read: 204015117 HDFS Write: 0 FAIL\n\nthis is my hql:\nselect  A.state_date, \n           A.customer, \n           A.channel_2,\n           A.id,\n           A.pid,\n           A.type,\n           A.pv,\n           A.uv,\n           A.visits,\n           if(C.stay_visits is null,0,C.stay_visits) as stay_visits,\n           A.stay_time,\n           if(B.bounce is null,0,B.bounce) as bounce\n from\n     (select a.state_date, \n            a.customer, \n            b.url as channel_2,\n            b.id,\n            b.pid,\n            b.type,\n            count(1) as pv,\n            count(distinct a.gid) uv,\n            count(distinct a.session_id) as visits,\n            sum(a.stay_time) as stay_time\n       from       \n               ( select state_date, \n                           customer, \n                           gid,\n                           session_id,\n                           ep,\n                           stay_time\n                    from bdi_fact.mid_pageview_dt0\n                    where l_date ='$v_date'\n                  )a\n                  join\n                  (select l_date as state_date ,\n                          url,\n                          id,\n                          pid,\n                          type,\n                          cid\n                   from bdi_fact.frequency_channel\n                   where l_date ='$v_date'\n                   and type ='2'\n                   and dr='0'\n                  )b\n                   on  a.customer=b.cid  \n                   where a.ep  rlike b.url\n                   group by a.state_date, a.customer, b.url,b.id,b.pid,b.type\n       )A\n      \n        left outer join\n       (   select \n                   c.state_date ,\n                   c.customer ,\n                   d.url as channel_2,\n                   d.id,\n                   sum(pagedepth) as bounce\n            from\n                  ( select \n                              t1.state_date ,\n                              t1.customer ,\n                              t1.session_id,\n                              t1.ep,\n                              t2.pagedepth\n                    from           \n                         ( select \n                                     state_date ,\n                                     customer ,\n                                     session_id,\n                                     exit_url as ep\n                          from ods.mid_session_enter_exit_dt0\n                          where l_date ='$v_date'\n                          )t1\n                         join\n                          ( select \n                                    state_date ,\n                                    customer ,\n                                    session_id,\n                                    pagedepth\n                            from ods.mid_session_action_dt0\n                            where l_date ='$v_date'\n                            and  pagedepth='1'\n                          )t2\n                         on t1.customer=t2.customer\n                         and t1.session_id=t2.session_id\n                   )c\n                   join\n                   (select *\n                   from bdi_fact.frequency_channel\n                   where l_date ='$v_date'\n                   and type ='2'\n                   and dr='0'\n                   )d\n                   on c.customer=d.cid\n                   where c.ep  rlike d.url\n                   group by  c.state_date,c.customer,d.url,d.id\n             )B\n             on \n             A.customer=B.customer\n             and A.channel_2=B.channel_2 \n             and A.id=B.id\n      left outer join\n     ( \n             select e.state_date, \n            e.customer, \n            f.url as channel_2,\n            f.id,\n            f.pid,\n            f.type,\n            count(distinct e.session_id) as stay_visits\n       from       \n               ( select state_date, \n                           customer, \n                           gid,\n                           session_id,\n                           ep,\n                           stay_time\n                    from bdi_fact.mid_pageview_dt0\n                    where l_date ='$v_date'\n                  )e\n                  join\n                  (select l_date as state_date,\n                          url,\n                          id,\n                          pid,\n                          type,\n                          cid\n                   from bdi_fact.frequency_channel\n                   where l_date ='$v_date'\n                   and type ='2'\n                   and dr='0'\n                  )f\n                   on  e.customer=f.cid  \n                   where e.ep  rlike f.url\n                   and e.stay_time is not null\n                   and e.stay_time <>'0'\n                   group by e.state_date, e.customer, f.url,f.id,f.pid,f.type\n           )C\n        on\n        A.customer=C.customer\n        and   A.channel_2=C.channel_2\n        and   A.id=C.id\n        and   A.pid=C.pid\n        and   A.type=C.type \n where A.customer='Cdianyingwang' and A.channel_2='http://www.1905.com/film/filmnews/jk/' and A.id='127';\"\n\ndo you know why?thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Feng+Yuan","name":"Feng Yuan","key":"feng yuan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=feng+yuan&avatarId=29897","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=feng+yuan&avatarId=29897","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=feng+yuan&avatarId=29897","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=feng+yuan&avatarId=29897"},"displayName":"Feng Yuan","active":true,"timeZone":"Etc/UTC"},"created":"2015-12-09T01:13:19.426+0000","updated":"2015-12-09T01:13:19.426+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917186/comment/15051711","id":"15051711","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasanth_j","name":"prasanth_j","key":"prasanth_j","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasanth Jayachandran","active":true,"timeZone":"America/Los_Angeles"},"body":"[~Feng Yuan] Can you provide a small reproducible test case for this issue? This issues looks like PartitionDesc is not registered with kryo. I can fix that but it will not guarantee that it will completely solve the issue. Adding PartitionDesc alone won't be sufficient. It could show up some other issue after this. To fix it completely, if you can provide a small data set and queries that reproduces this issue, I will test the patch before updating the JIRA. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasanth_j","name":"prasanth_j","key":"prasanth_j","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasanth Jayachandran","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-10T21:49:52.624+0000","updated":"2015-12-10T21:49:52.624+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917186/comment/15052521","id":"15052521","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Feng+Yuan","name":"Feng Yuan","key":"feng yuan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=feng+yuan&avatarId=29897","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=feng+yuan&avatarId=29897","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=feng+yuan&avatarId=29897","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=feng+yuan&avatarId=29897"},"displayName":"Feng Yuan","active":true,"timeZone":"Etc/UTC"},"body":"hi [~prasanth_j] i upload the test case,please look at it when you have time,thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Feng+Yuan","name":"Feng Yuan","key":"feng yuan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=feng+yuan&avatarId=29897","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=feng+yuan&avatarId=29897","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=feng+yuan&avatarId=29897","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=feng+yuan&avatarId=29897"},"displayName":"Feng Yuan","active":true,"timeZone":"Etc/UTC"},"created":"2015-12-11T09:36:35.417+0000","updated":"2015-12-11T09:36:35.417+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917186/comment/15072479","id":"15072479","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Feng+Yuan","name":"Feng Yuan","key":"feng yuan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=feng+yuan&avatarId=29897","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=feng+yuan&avatarId=29897","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=feng+yuan&avatarId=29897","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=feng+yuan&avatarId=29897"},"displayName":"Feng Yuan","active":true,"timeZone":"Etc/UTC"},"body":"hi [~prasanth_j],are you following this issue these days?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Feng+Yuan","name":"Feng Yuan","key":"feng yuan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=feng+yuan&avatarId=29897","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=feng+yuan&avatarId=29897","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=feng+yuan&avatarId=29897","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=feng+yuan&avatarId=29897"},"displayName":"Feng Yuan","active":true,"timeZone":"Etc/UTC"},"created":"2015-12-28T06:35:27.254+0000","updated":"2015-12-28T06:35:27.254+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917186/comment/15104068","id":"15104068","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Feng+Yuan","name":"Feng Yuan","key":"feng yuan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=feng+yuan&avatarId=29897","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=feng+yuan&avatarId=29897","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=feng+yuan&avatarId=29897","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=feng+yuan&avatarId=29897"},"displayName":"Feng Yuan","active":true,"timeZone":"Etc/UTC"},"body":"can you look this please? [~xuefuz],[~serganch],[~pchag]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Feng+Yuan","name":"Feng Yuan","key":"feng yuan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=feng+yuan&avatarId=29897","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=feng+yuan&avatarId=29897","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=feng+yuan&avatarId=29897","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=feng+yuan&avatarId=29897"},"displayName":"Feng Yuan","active":true,"timeZone":"Etc/UTC"},"created":"2016-01-18T02:24:18.902+0000","updated":"2016-01-18T02:24:18.902+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917186/comment/15564254","id":"15564254","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"It seems that this patch also breaks Hive on Spark. It's too bad that this got in w/o being fully tested.\n\nJust curious, [~pchag], seeing you added a bunch of classes to register with kryo, I'm wondering how you determined what classes to register.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-11T02:53:59.734+0000","updated":"2016-10-11T02:53:59.734+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917186/comment/15564295","id":"15564295","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pchag","name":"pchag","key":"pchag","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasanth Chagarlamudi","active":true,"timeZone":"Etc/UTC"},"body":"[~xuefuz], you tagged a wrong Prasanth here. I guess you are looking for [~prasanth_j]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pchag","name":"pchag","key":"pchag","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasanth Chagarlamudi","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-11T03:17:38.475+0000","updated":"2016-10-11T03:17:38.475+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917186/comment/15564648","id":"15564648","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasanth_j","name":"prasanth_j","key":"prasanth_j","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasanth Jayachandran","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. It seems that this patch also breaks Hive on Spark\nWhat other things is this patch breaking? Also branch-1 is unreleased version.\n\nbq.  It's too bad that this got in w/o being fully tested.\nWe never used to run pre-commit on maintenance branches.\n\nbq. I'm wondering how you determined what classes to register.\nBased on the failing test case in the patch for ArrayList serializer. Also there are several issues reported in hive branch-1 regarding kryo failures (issues are linked to this jira) and some issues are linked to HIVE-12175. Many fixes went in master that are related to kryo. I just aggregated them, put them in a single patch and backported it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=prasanth_j","name":"prasanth_j","key":"prasanth_j","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasanth Jayachandran","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-11T06:28:40.278+0000","updated":"2016-10-11T06:28:40.278+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12917186/comment/15566603","id":"15566603","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~prasanth_j], thanks for your information. Yes, I knew that we don't have pre-commit test, which is kind of bad. :)\n\nThe patch seems breaking HoS because SparkWork has cycle reference via its field edgeProperties, which contains a list. \n{code}\njava.lang.InstantiationError: org.apache.commons.lang3.tuple.Pair\n\tat org.apache.commons.lang3.tuple.PairConstructorAccess.newInstance(Unknown Source)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo$1.newInstance(Kryo.java:1062)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.newInstance(Kryo.java:1112)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.create(FieldSerializer.java:526)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:502)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:694)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:106)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:507)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:776)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.MapSerializer.read(MapSerializer.java:139)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.MapSerializer.read(MapSerializer.java:17)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:694)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:106)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:507)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:694)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:106)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:507)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:776)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.MapSerializer.read(MapSerializer.java:131)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.MapSerializer.read(MapSerializer.java:17)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:694)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:106)\n\tat org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:507)\n\tat org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:672)\n\tat org.apache.hadoop.hive.ql.exec.spark.KryoSerializer.deserialize(KryoSerializer.java:49)\n\tat org.apache.hadoop.hive.ql.exec.spark.RemoteHiveSparkClient$JobStatusJob.call(RemoteHiveSparkClient.java:308)\n\tat org.apache.hive.spark.client.RemoteDriver$JobWrapper.call(RemoteDriver.java:366)\n\tat org.apache.hive.spark.client.RemoteDriver$JobWrapper.call(RemoteDriver.java:335)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n\tat java.lang.Thread.run(Thread.java:745)\n{code}\nI attempted to fix it, for example, using Set than List, but still got different errors based on what classes are registered. Thus, I was trying to figure out what classes to be register in order to fix these errors.\n\nFrom [~Feng Yuan]'s comment, I'm not sure whether there is a breakage or something still doesn't work. It's good that this patch isn't released yet.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-11T21:01:55.535+0000","updated":"2016-10-11T21:01:55.535+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-12551/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2p3sn:"}}