{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12634913","self":"https://issues.apache.org/jira/rest/api/2/issue/12634913","key":"HIVE-4103","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323587","id":"12323587","description":"Hive 0.11.0","name":"0.11.0","archived":false,"released":true,"releaseDate":"2013-05-15"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-03-22T20:55:33.969+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Apr 22 01:10:11 UTC 2013","customfield_12310420":"315406","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_4315804969_*|*_1_*:*_1_*:*_559240_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-04-20T20:52:32.030+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-4103/watchers","watchCount":5,"isWatching":false},"created":"2013-03-01T21:53:07.849+0000","customfield_12310192":"Remove System.gc() calls from HashMapWrapper::isAbort() to avoid slow-downs during local task of the map-join","customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-16T21:10:45.931+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Hive's HashMapWrapper calls System.gc() twice within the HashMapWrapper::isAbort() which produces a significant slow-down during the loop.\n\n{code}\n2013-03-01 04:54:28 The gc calls took 677 ms\n2013-03-01 04:54:28     Processing rows:        200000  Hashtable size: 199999  Memory usage:   62955432        rate:   0.033\n2013-03-01 04:54:31 The gc calls took 956 ms\n2013-03-01 04:54:31     Processing rows:        300000  Hashtable size: 299999  Memory usage:   90826656        rate:   0.048\n2013-03-01 04:54:33 The gc calls took 967 ms\n2013-03-01 04:54:33     Processing rows:        384160  Hashtable size: 384160  Memory usage:   114412712       rate:   0.06\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12571658","id":"12571658","filename":"HIVE-4103.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"created":"2013-03-01T22:00:15.339+0000","size":624,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12571658/HIVE-4103.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"315750","customfield_12312823":null,"summary":"Remove System.gc() call from the map-join local-task loop","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12634913/comment/13590983","id":"13590983","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"body":"Remove the thread-stopping System.gc() calls from isAbort()","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"created":"2013-03-01T22:00:15.343+0000","updated":"2013-03-01T22:00:15.343+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12634913/comment/13590988","id":"13590988","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"body":"On a run, the difference was \n\n{code}\n2013-03-01 04:57:21\tUpload 1 File to: file:/tmp/root/hive_2013-03-01_16-56-53_785_1192800933446838868/-local-10002/HashTable-Stage-1/MapJoin-demographics-01--.hashtable File size: 18426794\n2013-03-01 04:57:21\tEnd of local task; Time Taken: 22.426 sec.\n{code}\n\nversus, after-fix\n\n{code}\n2013-03-01 04:56:26\tUpload 1 File to: file:/tmp/root/hive_2013-03-01_16-56-01_539_5116929752955084952/-local-10002/HashTable-Stage-1/MapJoin-demographics-01--.hashtable File size: 18426794\n2013-03-01 04:56:26\tEnd of local task; Time Taken: 19.874 sec.\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"created":"2013-03-01T22:01:51.971+0000","updated":"2013-03-01T22:01:51.971+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12634913/comment/13611226","id":"13611226","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"[~gopalv] System.gc() calls were made to get better estimate of free memory which than is decided to kill task or not if its using too much memory. I don't think its safe to remove this call. As a downside, we may kill a local task thinking its using too much memory, whereas in reality, it could have gone on to completion.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-03-22T20:55:33.969+0000","updated":"2013-03-22T20:55:33.969+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12634913/comment/13611419","id":"13611419","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"body":"I'm following some commonly repeated wisdom here \n\nhttp://stackoverflow.com/questions/2414105/why-is-it-a-bad-practice-to-call-system-gc/2414120#2414120\n\nTHe corner cases merely require -Xmx to be upped, but this slows down the queries by 8-10%.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gopalv","name":"gopalv","key":"gopalv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gopal V","active":true,"timeZone":"Asia/Kolkata"},"created":"2013-03-22T23:25:38.406+0000","updated":"2013-03-22T23:25:38.406+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12634913/comment/13611542","id":"13611542","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"body":"Agreed it's a bad practice in general to call sys.gc(), but I think the issue here is that we are trying to decide if it's possible to do a map join out on the cluster therefore we need a good estimate of memory consumed? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brocknoland","name":"brocknoland","key":"brocknoland","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brock Noland","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-03-23T03:29:13.539+0000","updated":"2013-03-23T03:29:13.539+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12634913/comment/13635782","id":"13635782","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hagleitn","name":"hagleitn","key":"hagleitn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hagleitn&avatarId=16035","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hagleitn&avatarId=16035","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hagleitn&avatarId=16035","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hagleitn&avatarId=16035"},"displayName":"Gunther Hagleitner","active":true,"timeZone":"America/Los_Angeles"},"body":"I took some time to test out the two versions of the code. I ran a number of mapjoins ranging from small to at the limit and finally over the limit. In summary: Without the gc calls we overestimate the used memory very slightly. The biggest one I've seen is ~1%. The errors btw always cause the estimates to be more conservative, never less. The performance benefit on the other hand is quite substantial: On that large run it went from 120s to 56s with Gopals patch. I think we should move forward with this.\n\nLargest run:\n\nWith Patch:\n\n{noformat}\n2013-04-18 05:29:36     Starting to launch local task to process map join;      maximum memory = 1065484288\n2013-04-18 05:29:42     Processing rows:        200000  Hashtable size: 199999  Memory usage:   108807528       rate:   0.102\n2013-04-18 05:29:44     Processing rows:        300000  Hashtable size: 299999  Memory usage:   158575416       rate:   0.149\n2013-04-18 05:29:46     Processing rows:        400000  Hashtable size: 399999  Memory usage:   211033848       rate:   0.198\n2013-04-18 05:29:48     Processing rows:        500000  Hashtable size: 499999  Memory usage:   260673400       rate:   0.245\n2013-04-18 05:29:50     Processing rows:        600000  Hashtable size: 599999  Memory usage:   310156256       rate:   0.291\n2013-04-18 05:29:53     Processing rows:        700000  Hashtable size: 699999  Memory usage:   359750536       rate:   0.338\n2013-04-18 05:29:54     Processing rows:        800000  Hashtable size: 799999  Memory usage:   417989768       rate:   0.392\n2013-04-18 05:29:57     Processing rows:        900000  Hashtable size: 899999  Memory usage:   460568536       rate:   0.432\n2013-04-18 05:29:58     Processing rows:        1000000 Hashtable size: 999999  Memory usage:   510475320       rate:   0.479\n2013-04-18 05:30:01     Processing rows:        1100000 Hashtable size: 1099999 Memory usage:   559513584       rate:   0.525\n2013-04-18 05:30:03     Processing rows:        1200000 Hashtable size: 1199999 Memory usage:   609277088       rate:   0.572\n2013-04-18 05:30:06     Processing rows:        1300000 Hashtable size: 1299999 Memory usage:   659366968       rate:   0.619\n2013-04-18 05:30:07     Processing rows:        1400000 Hashtable size: 1399999 Memory usage:   708744832       rate:   0.665\n2013-04-18 05:30:08     Processing rows:        1500000 Hashtable size: 1499999 Memory usage:   758335688       rate:   0.712\n2013-04-18 05:30:13     Processing rows:        1600000 Hashtable size: 1599999 Memory usage:   825625224       rate:   0.775\n2013-04-18 05:30:14     Processing rows:        1646400 Hashtable size: 1646400 Memory usage:   848652056       rate:   0.796\n2013-04-18 05:30:14     Dump the hashtable into file: file:/tmp/hrt_qa/hive_2013-04-18_17-29-31_517_1864473086199137375/-local-10002/HashTable-Stage-1/MapJoin-cd-11--.hashtable\n2013-04-18 05:30:32     Upload 1 File to: file:/tmp/hrt_qa/hive_2013-04-18_17-29-31_517_1864473086199137375/-local-10002/HashTable-Stage-1/MapJoin-cd-11--.hashtable File size: 127593266\n2013-04-18 05:30:32     End of local task; Time Taken: 56.264 sec.\n{noformat}\n\nWithout patch:\n\n{noformat}\n2013-04-18 05:55:22     Starting to launch local task to process map join;      maximum memory = 1065484288\n2013-04-18 05:55:29     Processing rows:        200000  Hashtable size: 199999  Memory usage:   108779608       rate:   0.102\n2013-04-18 05:55:33     Processing rows:        300000  Hashtable size: 299999  Memory usage:   157203744       rate:   0.148\n2013-04-18 05:55:37     Processing rows:        400000  Hashtable size: 399999  Memory usage:   208667552       rate:   0.196\n2013-04-18 05:55:42     Processing rows:        500000  Hashtable size: 499999  Memory usage:   258126352       rate:   0.242\n2013-04-18 05:55:46     Processing rows:        600000  Hashtable size: 599999  Memory usage:   307734104       rate:   0.289\n2013-04-18 05:55:51     Processing rows:        700000  Hashtable size: 699999  Memory usage:   357043768       rate:   0.335\n2013-04-18 05:55:57     Processing rows:        800000  Hashtable size: 799999  Memory usage:   415059928       rate:   0.39\n2013-04-18 05:56:04     Processing rows:        900000  Hashtable size: 899999  Memory usage:   460135344       rate:   0.432\n2013-04-18 05:56:10     Processing rows:        1000000 Hashtable size: 999999  Memory usage:   509690176       rate:   0.478\n2013-04-18 05:56:18     Processing rows:        1100000 Hashtable size: 1099999 Memory usage:   559042448       rate:   0.525\n2013-04-18 05:56:25     Processing rows:        1200000 Hashtable size: 1199999 Memory usage:   608652728       rate:   0.571\n2013-04-18 05:56:33     Processing rows:        1300000 Hashtable size: 1299999 Memory usage:   657959872       rate:   0.618\n2013-04-18 05:56:42     Processing rows:        1400000 Hashtable size: 1399999 Memory usage:   707441328       rate:   0.664\n2013-04-18 05:56:51     Processing rows:        1500000 Hashtable size: 1499999 Memory usage:   756877400       rate:   0.71\n2013-04-18 05:57:01     Processing rows:        1600000 Hashtable size: 1599999 Memory usage:   823254568       rate:   0.773\n2013-04-18 05:57:12     Processing rows:        1646400 Hashtable size: 1646400 Memory usage:   837505640       rate:   0.786\n2013-04-18 05:57:12     Dump the hashtable into file: file:/tmp/hrt_qa/hive_2013-04-18_17-55-16_725_2217141373925203269/-local-10002/HashTable-Stage-1/MapJoin-cd-01--.hashtable\n2013-04-18 05:57:22     Upload 1 File to: file:/tmp/hrt_qa/hive_2013-04-18_17-55-16_725_2217141373925203269/-local-10002/HashTable-Stage-1/MapJoin-cd-01--.hashtable File size: 127593266\n2013-04-18 05:57:22     End of local task; Time Taken: 120.19 sec.\n{noformat}\n\nSmall run:\n\nwithout patch:\n\n{noformat}\n2013-04-18 05:08:06     Starting to launch local task to process map join;      maximum memory = 1065484288\n2013-04-18 05:08:15     Processing rows:        200000  Hashtable size: 199999  Memory usage:   109063800       rate:   0.102\n2013-04-18 05:08:18     Processing rows:        274400  Hashtable size: 274400  Memory usage:   144697408       rate:   0.136\n2013-04-18 05:08:18     Dump the hashtable into file: file:/tmp/hrt_qa/hive_2013-04-18_17-08-02_486_1659630314838477132/-local-10002/HashTable-Stage-1/MapJoin-cd-51--.hashtable\n2013-04-18 05:08:21     Upload 1 File to: file:/tmp/hrt_qa/hive_2013-04-18_17-08-02_486_1659630314838477132/-local-10002/HashTable-Stage-1/MapJoin-cd-51--.hashtable File size: 21263116\n2013-04-18 05:08:21     End of local task; Time Taken: 14.35 sec.\n{noformat}\n\nwith fix:\n\n{noformat}\n2013-04-18 05:11:45     Starting to launch local task to process map join;      maximum memory = 1065484288\n2013-04-18 05:11:52     Processing rows:        200000  Hashtable size: 199999  Memory usage:   109177944       rate:   0.102\n2013-04-18 05:11:54     Processing rows:        274400  Hashtable size: 274400  Memory usage:   146485584       rate:   0.137\n2013-04-18 05:11:54     Dump the hashtable into file: file:/tmp/hrt_qa/hive_2013-04-18_17-11-39_065_4048995808819270025/-local-10002/HashTable-Stage-1/MapJoin-cd-01--.hashtable\n2013-04-18 05:11:57     Upload 1 File to: file:/tmp/hrt_qa/hive_2013-04-18_17-11-39_065_4048995808819270025/-local-10002/HashTable-Stage-1/MapJoin-cd-01--.hashtable File size: 21263116\n2013-04-18 05:11:57     End of local task; Time Taken: 12.226 sec.\n{noformat}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hagleitn","name":"hagleitn","key":"hagleitn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hagleitn&avatarId=16035","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hagleitn&avatarId=16035","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hagleitn&avatarId=16035","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hagleitn&avatarId=16035"},"displayName":"Gunther Hagleitner","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-18T22:39:26.341+0000","updated":"2013-04-18T22:39:26.341+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12634913/comment/13637109","id":"13637109","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks, Gunther for running experiments. Difference of 56 vs 120 seconds is quite substantial. I agree, we should move ahead with the patch. \n+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-20T03:46:10.479+0000","updated":"2013-04-20T03:46:10.479+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12634913/comment/13637358","id":"13637358","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Committed to trunk. Thanks, Gopal and Gunther!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-20T20:52:32.050+0000","updated":"2013-04-20T20:52:32.050+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12634913/comment/13637467","id":"13637467","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-hadoop2 #168 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/168/])\n    HIVE-4103 : Remove System.gc() call from the map-join local-task loop (Gopal V via Ashutosh Chauhan) (Revision 1470227)\n\n     Result = FAILURE\nhashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1470227\nFiles : \n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/persistence/HashMapWrapper.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-04-21T04:26:52.322+0000","updated":"2013-04-21T04:26:52.322+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12634913/comment/13637709","id":"13637709","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-h0.21 #2073 (See [https://builds.apache.org/job/Hive-trunk-h0.21/2073/])\n    HIVE-4103 : Remove System.gc() call from the map-join local-task loop (Gopal V via Ashutosh Chauhan) (Revision 1470227)\n\n     Result = FAILURE\nhashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1470227\nFiles : \n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/persistence/HashMapWrapper.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-04-22T01:10:11.231+0000","updated":"2013-04-22T01:10:11.231+0000"}],"maxResults":10,"total":10,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-4103/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1ifdj:"}}