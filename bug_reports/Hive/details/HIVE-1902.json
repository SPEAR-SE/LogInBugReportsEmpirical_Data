{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12494992","self":"https://issues.apache.org/jira/rest/api/2/issue/12494992","key":"HIVE-1902","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315150","id":"12315150","description":"released","name":"0.7.0","archived":false,"released":true,"releaseDate":"2011-03-29"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-01-12T22:20:07.540+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Mar 03 02:35:47 UTC 2011","customfield_12310420":"72637","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_682076_*|*_1_*:*_1_*:*_3576971578_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-02-18T07:25:29.650+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1902/watchers","watchCount":3,"isWatching":false},"created":"2011-01-07T21:37:56.011+0000","customfield_12310192":"If migrating from a Hive 0.6 installation, please use the appropriate upgrade script to upgrade the metastore prior to first use of the system.","customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12337578","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12337578","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12495102","key":"HIVE-1904","self":"https://issues.apache.org/jira/rest/api/2/issue/12495102","fields":{"summary":"Create MetaStore schema upgrade scripts for changes made in HIVE-417","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype","name":"Task","subtask":false,"avatarId":21148}}}},{"id":"12337577","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12337577","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12495103","key":"HIVE-1905","self":"https://issues.apache.org/jira/rest/api/2/issue/12495103","fields":{"summary":"Provide MetaStore schema upgrade scripts for changes made in HIVE-1823","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21148&avatarType=issuetype","name":"Task","subtask":false,"avatarId":21148}}}},{"id":"12336783","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12336783","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12409037","key":"HIVE-78","self":"https://issues.apache.org/jira/rest/api/2/issue/12409037","fields":{"summary":"Authorization infrastructure for Hive","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}},{"id":"12336782","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12336782","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"outwardIssue":{"id":"12409037","key":"HIVE-78","self":"https://issues.apache.org/jira/rest/api/2/issue/12409037","fields":{"summary":"Authorization infrastructure for Hive","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-02T02:29:35.859+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12317300","id":"12317300","name":"Authorization","description":"Security Subcomponent"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312584","id":"12312584","name":"Metastore","description":"Tracks issue dealing with metastore."}],"timeoriginalestimate":null,"description":null,"customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12471371","id":"12471371","filename":"HIVE-1902.1.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-02-18T07:02:56.950+0000","size":16528,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12471371/HIVE-1902.1.patch.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"34639","customfield_12312823":null,"summary":"create script for the metastore upgrade due to HIVE-78","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494992/comment/12980967","id":"12980967","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"body":"This is the script for mysql upgrade:\n\n\n--\n-- Table structure for table `ROLES`\n--\n\nDROP TABLE IF EXISTS `ROLES`;\nCREATE TABLE `ROLES` (\n  `ROLE_ID` bigint(20) NOT NULL,\n  `CREATE_TIME` int(11) NOT NULL,\n  `OWNER_NAME` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `ROLE_NAME` varchar(128) character set latin1 collate latin1_bin default NULL,\n  PRIMARY KEY  (`ROLE_ID`),\n  UNIQUE KEY `ROLEENTITYINDEX` (`ROLE_NAME`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\n\n\n--\n-- Table structure for table `ROLE_MAP`\n--\n\nDROP TABLE IF EXISTS `ROLE_MAP`;\nCREATE TABLE `ROLE_MAP` (\n  `ROLE_GRANT_ID` bigint(20) NOT NULL,\n  `ADD_TIME` int(11) NOT NULL,\n  `GRANT_OPTION` smallint(6) NOT NULL,\n  `GRANTOR` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `GRANTOR_TYPE` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `PRINCIPAL_NAME` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `PRINCIPAL_TYPE` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `ROLE_ID` bigint(20) default NULL,\n  PRIMARY KEY  (`ROLE_GRANT_ID`),\n  UNIQUE KEY `USERROLEMAPINDEX` (`PRINCIPAL_NAME`,`ROLE_ID`,`GRANTOR`,`GRANTOR_TYPE`),\n  KEY `ROLE_MAP_N49` (`ROLE_ID`),\n  CONSTRAINT `ROLE_MAP_FK1` FOREIGN KEY (`ROLE_ID`) REFERENCES `ROLES` (`ROLE_ID`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\n\n--\n-- Table structure for table `GLOBAL_PRIVS`\n--\n\nDROP TABLE IF EXISTS `GLOBAL_PRIVS`;\nCREATE TABLE `GLOBAL_PRIVS` (\n  `USER_GRANT_ID` bigint(20) NOT NULL,\n  `CREATE_TIME` int(11) NOT NULL,\n  `GRANT_OPTION` smallint(6) NOT NULL,\n  `GRANTOR` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `GRANTOR_TYPE` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `PRINCIPAL_NAME` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `PRINCIPAL_TYPE` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `USER_PRIV` varchar(128) character set latin1 collate latin1_bin default NULL,\n  PRIMARY KEY  (`USER_GRANT_ID`),\n  UNIQUE KEY `GLOBALPRIVILEGEINDEX` (`PRINCIPAL_NAME`,`PRINCIPAL_TYPE`,`USER_PRIV`,`GRANTOR`,`GRANTOR_TYPE`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\n\n\n--\n-- Table structure for table `DB_PRIVS`\n--\n\nDROP TABLE IF EXISTS `DB_PRIVS`;\nCREATE TABLE `DB_PRIVS` (\n  `DB_GRANT_ID` bigint(20) NOT NULL,\n  `CREATE_TIME` int(11) NOT NULL,\n  `DB_ID` bigint(20) default NULL,\n  `GRANT_OPTION` smallint(6) NOT NULL,\n  `GRANTOR` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `GRANTOR_TYPE` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `PRINCIPAL_NAME` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `PRINCIPAL_TYPE` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `DB_PRIV` varchar(128) character set latin1 collate latin1_bin default NULL,\n  PRIMARY KEY  (`DB_GRANT_ID`),\n  UNIQUE KEY `DBPRIVILEGEINDEX` (`DB_ID`,`PRINCIPAL_NAME`,`PRINCIPAL_TYPE`,`DB_PRIV`,`GRANTOR`,`GRANTOR_TYPE`),\n  KEY `DB_PRIVS_N49` (`DB_ID`),\n  CONSTRAINT `DB_PRIVS_FK1` FOREIGN KEY (`DB_ID`) REFERENCES `DBS` (`DB_ID`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\n\n--\n-- Table structure for table `TBL_PRIVS`\n--\n\nDROP TABLE IF EXISTS `TBL_PRIVS`;\n\nCREATE TABLE `TBL_PRIVS` (\n  `TBL_GRANT_ID` bigint(20) NOT NULL,\n  `CREATE_TIME` int(11) NOT NULL,\n  `GRANT_OPTION` smallint(6) NOT NULL,\n  `GRANTOR` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `GRANTOR_TYPE` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `PRINCIPAL_NAME` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `PRINCIPAL_TYPE` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `TBL_PRIV` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `TBL_ID` bigint(20) default NULL,\n  PRIMARY KEY  (`TBL_GRANT_ID`),\n  KEY `TBL_PRIVS_N49` (`TBL_ID`),\n  KEY `TABLEPRIVILEGEINDEX` (`TBL_ID`,`PRINCIPAL_NAME`,`PRINCIPAL_TYPE`,`TBL_PRIV`,`GRANTOR`,`GRANTOR_TYPE`),\n  CONSTRAINT `TBL_PRIVS_FK1` FOREIGN KEY (`TBL_ID`) REFERENCES `TBLS` (`TBL_ID`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\n\n--\n-- Table structure for table `TBL_COL_PRIVS`\n--\n\nDROP TABLE IF EXISTS `TBL_COL_PRIVS`;\nCREATE TABLE `TBL_COL_PRIVS` (\n  `TBL_COLUMN_GRANT_ID` bigint(20) NOT NULL,\n  `COLUMN_NAME` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `CREATE_TIME` int(11) NOT NULL,\n  `GRANT_OPTION` smallint(6) NOT NULL,\n  `GRANTOR` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `GRANTOR_TYPE` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `PRINCIPAL_NAME` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `PRINCIPAL_TYPE` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `TBL_COL_PRIV` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `TBL_ID` bigint(20) default NULL,\n  PRIMARY KEY  (`TBL_COLUMN_GRANT_ID`),\n  KEY `TABLECOLUMNPRIVILEGEINDEX` (`TBL_ID`,`COLUMN_NAME`,`PRINCIPAL_NAME`,`PRINCIPAL_TYPE`,`TBL_COL_PRIV`,`GRANTOR`,`GRANTOR_TYPE`),\n  KEY `TBL_COL_PRIVS_N49` (`TBL_ID`),\n  CONSTRAINT `TBL_COL_PRIVS_FK1` FOREIGN KEY (`TBL_ID`) REFERENCES `TBLS` (`TBL_ID`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-12T22:20:07.540+0000","updated":"2011-01-12T22:20:07.540+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494992/comment/12980972","id":"12980972","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"body":"Please refer to this page for updates:\n\nhttp://wiki.apache.org/hadoop/Hive/AuthDev#A8._Metastore_upgrade_script_for_mysql","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-12T22:26:51.261+0000","updated":"2011-01-12T22:26:51.261+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494992/comment/12980976","id":"12980976","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"The metastore upgrade scripts are located in metastore/scripts/upgrade.\n\nAlso, it seems like automatically dropping the tables is probably a bad idea.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-01-12T22:31:51.072+0000","updated":"2011-01-12T22:31:51.072+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494992/comment/12981569","id":"12981569","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"body":"sorry, forget this one:\n\n\nCREATE TABLE `PART_PRIVS` (\n  `PART_GRANT_ID` bigint(20) NOT NULL,\n  `CREATE_TIME` int(11) NOT NULL,\n  `GRANT_OPTION` smallint(6) NOT NULL,\n  `GRANTOR` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `GRANTOR_TYPE` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `PART_ID` bigint(20) default NULL,\n  `PRINCIPAL_NAME` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `PRINCIPAL_TYPE` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `PART_PRIV` varchar(128) character set latin1 collate latin1_bin default NULL,\n  PRIMARY KEY  (`PART_GRANT_ID`),\n  KEY `PARTPRIVILEGEINDEX` (`PART_ID`,`PRINCIPAL_NAME`,`PRINCIPAL_TYPE`,`PART_PRIV`,`GRANTOR`,`GRANTOR_TYPE`),\n  KEY `PART_PRIVS_N49` (`PART_ID`),\n  CONSTRAINT `PART_PRIVS_FK1` FOREIGN KEY (`PART_ID`) REFERENCES `PARTITIONS` (`PART_ID`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-14T00:10:00.750+0000","updated":"2011-01-14T00:10:00.750+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494992/comment/12981572","id":"12981572","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"body":"Also forgot this one:\n\n\nDROP TABLE IF EXISTS `PART_COL_PRIVS`;\nCREATE TABLE `PART_COL_PRIVS` (\n  `PART_COLUMN_GRANT_ID` bigint(20) NOT NULL,\n  `COLUMN_NAME` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `CREATE_TIME` int(11) NOT NULL,\n  `GRANT_OPTION` smallint(6) NOT NULL,\n  `GRANTOR` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `GRANTOR_TYPE` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `PART_ID` bigint(20) default NULL,\n  `PRINCIPAL_NAME` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `PRINCIPAL_TYPE` varchar(128) character set latin1 collate latin1_bin default NULL,\n  `PART_COL_PRIV` varchar(128) character set latin1 collate latin1_bin default NULL,\n  PRIMARY KEY  (`PART_COLUMN_GRANT_ID`),\n  KEY `PART_COL_PRIVS_N49` (`PART_ID`),\n  KEY `PARTITIONCOLUMNPRIVILEGEINDEX` (`PART_ID`,`COLUMN_NAME`,`PRINCIPAL_NAME`,`PRINCIPAL_TYPE`,`PART_COL_PRIV`,`GRANTOR`,`GRANTOR_TYPE`),\n  CONSTRAINT `PART_COL_PRIVS_FK1` FOREIGN KEY (`PART_ID`) REFERENCES `PARTITIONS` (`PART_ID`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\n\n\nPlease refer to the wiki page link for updates.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-14T00:15:20.163+0000","updated":"2011-01-14T00:15:20.163+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494992/comment/12981575","id":"12981575","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"body":"can you put them in a patch - \n\ncreate new files in\nmetastore/scripts/upgrade.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=namit","name":"namit","key":"namit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Namit Jain","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-01-14T00:25:53.498+0000","updated":"2011-01-14T00:25:53.498+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494992/comment/12996268","id":"12996268","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"body":"This change introduces the necessary upgrade scripts for upgrading metastore schema for Hive 0.6 to Hive 0.7. The scripts included are for Derby and MySQL 5.1.48 databases. \n\nThis change also fixes HIVE-1904 and HIVE-1905.\n\nTested the scripts as follows:\n\n) Checked out the 0.6.0 branch and created derby and mysql based metastore databases.\n\n2) Checked out and built the 0.7.0 branch.\n\n3) Applied the following configuration settings in hive-site.xml:\ndatanucleus.validateTables=true\ndatanucleus.validateColumns=true\ndatanucleus.validateConstraints=true\ndatanucleus.autoCreateSchema=false\n\n4) Verified that using either the mysql or derby metastores resulted in schema validation errors.\n\n5) Applied the 0.7.0 metastore upgrade scripts to the respective metastore DBs.\n\n6) Verified that both metastore DBs work after applying the upgrade script.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-02-18T07:14:07.553+0000","updated":"2011-02-18T07:14:07.553+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494992/comment/12996272","id":"12996272","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"+1\n\nCommitted to trunk and branch-0.7.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-02-18T07:25:29.658+0000","updated":"2011-02-18T07:25:29.658+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12494992/comment/13001829","id":"13001829","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shrijeet","name":"shrijeet","key":"shrijeet","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shrijeet Paliwal","active":true,"timeZone":"America/Los_Angeles"},"body":"Stumbled upon one issue while running meta store upgrade script. Steps to reproduce: \n1. Have hive 0.6 metastore with no partitioned tables.\n2. Run meta store script upgrade-0.7.0.mysql.sql\n\nGet an error : \n{noformat}\nERROR 1005 (HY000) at line 64: Can't create table 'hive_meta_data.PART_COL_PRIVS' (errno: 150)\n{noformat}\n\nI think the table 'PARTITIONS' is created when you have your first partition registered. Hence following action while creating PART_COL_PRIVS fails: \n{code}\nCONSTRAINT `PART_COL_PRIVS_FK1` FOREIGN KEY (`PART_ID`) REFERENCES `PARTITIONS` (`PART_ID`)\n{code}\n\nAnother (minor) issue is with following entry in script :\n{code}\nALTER TABLE `DBS` DROP COLUMN `PARAMETERS`;\n{code}\nThe DBS table has not column PARAMETERS (at-least in 0.6). ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shrijeet","name":"shrijeet","key":"shrijeet","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shrijeet Paliwal","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-03-03T02:35:47.097+0000","updated":"2011-03-03T02:35:47.097+0000"}],"maxResults":9,"total":9,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1902/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06ajj:"}}