{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12467046","self":"https://issues.apache.org/jira/rest/api/2/issue/12467046","key":"HIVE-1411","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314524","id":"12314524","description":"released","name":"0.6.0","archived":false,"released":true,"releaseDate":"2010-10-29"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-06-16T01:11:25.275+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jul 30 21:59:29 UTC 2010","customfield_12310420":"72918","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_3879922387_*|*_1_*:*_1_*:*_1084695_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2010-07-30T21:59:29.471+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1411/watchers","watchCount":1,"isWatching":false},"created":"2010-06-15T23:56:02.389+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313714","id":"12313714","description":"released","name":"0.4.0","archived":false,"released":true,"releaseDate":"2009-10-12"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314225","id":"12314225","description":"released","name":"0.4.1","archived":false,"released":true,"releaseDate":"2009-12-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314156","id":"12314156","description":"released","name":"0.5.0","archived":false,"released":true,"releaseDate":"2010-02-23"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-12-17T00:03:58.422+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312584","id":"12312584","name":"Metastore","description":"Tracks issue dealing with metastore."}],"timeoriginalestimate":null,"description":"DataNucleus barfs when the core-3.1.1 JAR file appears more than once on the CLASSPATH:\n\n{code}\n2010-03-06 12:33:25,565 ERROR exec.DDLTask (SessionState.java:printError(279)) - FAILED: Error in metadata: javax.jdo.JDOFatalInter \nnalException: Unexpected exception caught. \nNestedThrowables: \njava.lang.reflect.InvocationTargetException \norg.apache.hadoop.hive.ql.metadata.HiveException: javax.jdo.JDOFatalInternalException: Unexpected exception caught. \nNestedThrowables: \njava.lang.reflect.InvocationTargetException \nat org.apache.hadoop.hive.ql.metadata.Hive.createTable(Hive.java:258) \nat org.apache.hadoop.hive.ql.exec.DDLTask.createTable(DDLTask.java:879) \nat org.apache.hadoop.hive.ql.exec.DDLTask.execute(DDLTask.java:103) \nat org.apache.hadoop.hive.ql.Driver.execute(Driver.java:379) \nat org.apache.hadoop.hive.ql.Driver.run(Driver.java:285) \nat org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:123) \nat org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:181) \nat org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:287) \nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) \nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:597) \nat org.apache.hadoop.util.RunJar.main(RunJar.java:156) \nCaused by: javax.jdo.JDOFatalInternalException: Unexpected exception caught. \nNestedThrowables: \njava.lang.reflect.InvocationTargetException \nat javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1186)\nat javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:803) \nat javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:698) \nat org.apache.hadoop.hive.metastore.ObjectStore.getPMF(ObjectStore.java:164) \nat org.apache.hadoop.hive.metastore.ObjectStore.getPersistenceManager(ObjectStore.java:181)\nat org.apache.hadoop.hive.metastore.ObjectStore.initialize(ObjectStore.java:125) \nat org.apache.hadoop.hive.metastore.ObjectStore.setConf(ObjectStore.java:104) \nat org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:62) \nat org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117) \nat org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getMS(HiveMetaStore.java:130)\nat org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.createDefaultDB(HiveMetaStore.java:146)\nat org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.init(HiveMetaStore.java:118) \nat org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.(HiveMetaStore.java:100) \nat org.apache.hadoop.hive.metastore.HiveMetaStoreClient.(HiveMetaStoreClient.java:74) \nat org.apache.hadoop.hive.ql.metadata.Hive.createMetaStoreClient(Hive.java:783) \nat org.apache.hadoop.hive.ql.metadata.Hive.getMSC(Hive.java:794) \nat org.apache.hadoop.hive.ql.metadata.Hive.createTable(Hive.java:252) \n... 12 more \nCaused by: java.lang.reflect.InvocationTargetException \nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) \nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:597) \nat javax.jdo.JDOHelper$16.run(JDOHelper.java:1956) \nat java.security.AccessController.doPrivileged(Native Method) \nat javax.jdo.JDOHelper.invoke(JDOHelper.java:1951) \nat javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1159)\n... 28 more \nCaused by: org.datanucleus.exceptions.NucleusException: Plugin (Bundle) \"org.eclipse.jdt.core\" is already registered. Ensure you do \nnt have multiple JAR versions of the same plugin in the classpath. The URL \"file:/Users/hadop/hadoop-0.20.1+152/build/ivy/lib/Hadoo \np/common/core-3.1.1.jar\" is already registered, and you are trying to register an identical plugin located at URL \"file:/Users/hado \np/hadoop-0.20.1+152/lib/core-3.1.1.jar.\" \nat org.datanucleus.plugin.NonManagedPluginRegistry.registerBundle(NonManagedPluginRegistry.java:437)\nat org.datanucleus.plugin.NonManagedPluginRegistry.registerBundle(NonManagedPluginRegistry.java:343)\nat org.datanucleus.plugin.NonManagedPluginRegistry.registerExtensions(NonManagedPluginRegistry.java:227)\nat org.datanucleus.plugin.NonManagedPluginRegistry.registerExtensionPoints(NonManagedPluginRegistry.java:159)\nat org.datanucleus.plugin.PluginManager.registerExtensionPoints(PluginManager.java:82) \nat org.datanucleus.OMFContext.(OMFContext.java:164) \nat org.datanucleus.OMFContext.(OMFContext.java:145) \nat org.datanucleus.ObjectManagerFactoryImpl.initialiseOMFContext(ObjectManagerFactoryImpl.java:143)\nat org.datanucleus.jdo.JDOPersistenceManagerFactory.initialiseProperties(JDOPersistenceManagerFactory.java:317)\nat org.datanucleus.jdo.JDOPersistenceManagerFactory.(JDOPersistenceManagerFactory.java:261)\nat org.datanucleus.jdo.JDOPersistenceManagerFactory.getPersistenceManagerFactory(JDOPersistenceManagerFactory.java:174)\n... 36 more \n\n2010-03-06 12:33:25,575 ERROR ql.Driver (SessionState.java:printError(279)) - FAILED: Execution Error, return code 1 from org.apach \ne.hadoop.hive.ql.exec.DDLTask \n2010-03-06 12:42:30,457 ERROR exec.DDLTask (SessionState.java:printError(279)) - FAILED: Error in metadata: javax.jdo.JDOFatalInter \nnalException: Unexpected exception caught. \nNestedThrowables: \njava.lang.reflect.InvocationTargetException \norg.apache.hadoop.hive.ql.metadata.HiveException: javax.jdo.JDOFatalInternalException: Unexpected exception caught. \nNestedThrowables:\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12447187","id":"12447187","filename":"HIVE-1411.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-16T00:09:26.461+0000","size":1416,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12447187/HIVE-1411.patch.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"74417","customfield_12312823":null,"summary":"DataNucleus throws NucleusException if core-3.1.1 JAR appears more than once on CLASSPATH","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467046/comment/12879198","id":"12879198","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"A little background on what DataNucleus is trying to do: http://www.datanucleus.org/extensions/plugins.html\n\nDefinition of pluginRegistryBundleCheck property: http://www.datanucleus.org/products/accessplatform_1_0/persistence_properties.html#general\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-16T00:11:00.476+0000","updated":"2010-06-16T00:11:00.476+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467046/comment/12879199","id":"12879199","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"This patch adds the property \"datanucleus.plugin.pluginRegistryBundleCheck\" to hive-site.xml and sets the value to LOG. When not set this property defaults to EXCEPTION, which results in an exception being thrown if the CLASSPATH contains two or more JARs with the same name.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-16T00:14:07.034+0000","updated":"2010-06-16T00:14:07.034+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467046/comment/12879218","id":"12879218","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"Taking a look.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-16T01:11:25.275+0000","updated":"2010-06-16T01:11:25.275+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467046/comment/12891299","id":"12891299","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"Paul, are you still looking at this one?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2010-07-22T19:40:34.657+0000","updated":"2010-07-22T19:40:34.657+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467046/comment/12891301","id":"12891301","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"Whoops, got side tracked by another datanucleus issue. I'll review it today.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-07-22T19:44:11.876+0000","updated":"2010-07-22T19:44:11.876+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467046/comment/12891307","id":"12891307","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"@Carl - what is the motivation for turning off this exception? Wouldn't it be good to know if 2 jars were on the CP so that the user would know for sure which version was in use? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-07-22T20:03:09.904+0000","updated":"2010-07-22T20:03:09.904+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467046/comment/12891385","id":"12891385","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"Here's some more background on what is happening:\n\nWhen DataNucleus starts up it [scans every class that it finds on the CLASSPATH|http://www.datanucleus.org/extensions/plugins.html] looking for [OSGi format plugins|http://www.ibm.com/developerworks/opensource/library/os-ecl-osgi/]. Hadoop core happens to depend on Eclipse's core-3.1.1.jar (which contains OSGi format plugins), so this gets included in Hive's CLASSPATH since bin/hive delegates execution to bin/hadoop. If a user installed Hadoop from a tar ball and set HADOOP_HOME to the install directory we are all good, but if the user also ran 'ant' in $HADOOP_HOME we're in a world of pain since this results in two copies of core-3.1.1.jar (the original copy in $HADOOP_HOME/lib and another copy in $HADOOP_HOME/build/ivy/lib/Hadoop/common/) and bin/hadoop stupidly adds both jars to the CLASSPATH.\n\nI want to highlight the following points:\n\n # Duplicate CLASSPATH entries are a fact of life with Hadoop and Hive due to the screwed up CLASSPATH construction code in bin/hadoop and bin/hive\n # The duplicate CLASSPATH check that DataNucleus enforces by default only applies to JARs that contain OSGi plugins, which in our case seems to only apply to the core-3.1.1 JAR.\n # The patch that I supplied causes this harmless condition to result in a LOG message instead of a fatal exception. I think this preferable.\n # This exception is easy to reproduce on 0.5.0, but the upgrade to datanucleus-2.3 in HIVE-1176 seems to have made it unreproducible on trunk. I think this indicates that there is a bug in datanucleus-2.3 since it is no longer honoring the contract set by datanucleus.plugin.pluginRegistryBundleCheck (the default value is still EXCEPTION). I recommend that we commit this patch anyway lest we encounter this bug in the future after upgrading to a newer version of datanucleus that fixes this problem.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-07-22T23:02:15.998+0000","updated":"2010-07-22T23:02:15.998+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467046/comment/12891392","id":"12891392","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"body":"About #4, I was able to reproduce the exception and verify the fix by creating a copy of the datanucleus core jar in hive's lib directory.\n\nMakes sense to me. Now that you mention it, I think I ran into a similar problem while using the 'hadoop jar' command. It would unpack the jar, but include both the jar and the unpacked classes in the classpath. If the jar contained datanucleus stuff, this would throw an exception.\n\nAnyway, the fix looks good. +1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pauly","name":"pauly","key":"pauly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Paul Yang","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-07-22T23:28:24.205+0000","updated":"2010-07-22T23:28:24.205+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467046/comment/12893020","id":"12893020","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"+1.  Will commit when tests pass.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2010-07-28T01:08:13.300+0000","updated":"2010-07-28T01:08:13.300+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467046/comment/12894120","id":"12894120","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"Carl, when you supply patches, please make sure they can be applied with patch -p0.  This one needed patch -p1.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2010-07-30T19:29:41.884+0000","updated":"2010-07-30T19:29:41.884+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467046/comment/12894171","id":"12894171","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"Committed to branch and trunk.  Thanks Carl!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2010-07-30T21:59:29.376+0000","updated":"2010-07-30T21:59:29.376+0000"}],"maxResults":11,"total":11,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1411/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0d3yf:"}}