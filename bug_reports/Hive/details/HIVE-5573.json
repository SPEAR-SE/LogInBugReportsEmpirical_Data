{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12674251","self":"https://issues.apache.org/jira/rest/api/2/issue/12674251","key":"HIVE-5573","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Oct 17 05:49:22 UTC 2013","customfield_12310420":"353873","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-5573/watchers","watchCount":1,"isWatching":false},"created":"2013-10-17T05:28:51.230+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12310230":"hive sql 0x0d","customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320745","id":"12320745","description":"released","name":"0.10.0","archived":false,"released":true,"releaseDate":"2013-01-11"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-10-17T05:50:57.770+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12317906","id":"12317906","name":"Database/Schema","description":"Issues related to support for multiple Datasbases/Schemas"}],"timeoriginalestimate":null,"description":"I didn't test this bug on 0.11.0, only on 0.10.\n\nWith select statement, the returned result is not correct, totally messed up!\n\n\n================================\nTest case:\nfor table, we have:\nhive> desc tblfoo;\nOK\nsessionid       string\nuserid  string\ngroupid int\ndocid   string\nchanneltype     string\nlicensetype     string\nissuitelicense  string\nactivationstatus        string\nlicensedproduct string\n\n\nThe *wrong* result when select this table :\nhive> select * from tblfoo;\nOK\n7B179D5F-6D1A-4B00-89CC-5FE9F64A6D74    9EF52B8C-10D2-4C79-9460-6C295C9D5E7A   90       SUBSCRIPTION    Trial   SUITE   NULL    NULL\n        Trial   NULL    NULL    NULL    NULL    NULL    NULL    NULL\n\n\nand the *right* result should be:\nhive> select * from tblfoo;\nOK\n7B179D5F-6D1A-4B00-89CC-5FE9F64A6D74    9EF52B8C-10D2-4C79-9460-6C295C9D5E7A   90       SUBSCRIPTION    Trial   SUITE   Trial   NOVALUE\n\n\nIf I remove the char '0x0d' in the database data file, then I can get the correct result.\n\n================================\nSteps to reproduce this bug:\n1. create table:\nhive> create table tblFoo (\n    > sessionid               string,\n    > userid                  string,\n    > groupid                 int   ,\n    > docid                   string,\n    > channeltype             string,\n    > licensetype             string,\n    > issuitelicense          string,\n    > activationstatus        string,\n    > licensedproduct         string);\n\n2. hive> load data local inpath '/tmp/li.dat' overwrite into table tblFoo;\n3. hive> select * from tblfoo;\n\n\n================================\nAnd I will attach some example files:\n1. li.dat is the database file with a '0x0d' char in file\n-bash-4.1$ od -x li.dat\n0000000 4237 3731 4439 4635 362d 3144 2d41 4234\n0000020 3030 382d 4339 2d43 4635 3945 3646 4134\n0000040 4436 3437 3901 4645 3235 3842 2d43 3031\n0000060 3244 342d 3743 2d39 3439 3036 362d 3243\n0000100 3539 3943 3544 3745 0141 0139 0130 5553\n0000120 5342 5243 5049 4954 4e4f 5401 6972 6c61\n0000140 5301 4955 4554 01*0d* 7254 6169 016c 4f4e\n0000160 4156 554c 0a45\n0000166\n\n2. li2.dat is the database file without a '0x0d' char in file.\n-bash-4.1$ od -x li2.dat\n0000000 4237 3731 4439 4635 362d 3144 2d41 4234\n0000020 3030 382d 4339 2d43 4635 3945 3646 4134\n0000040 4436 3437 3901 4645 3235 3842 2d43 3031\n0000060 3244 342d 3743 2d39 3439 3036 362d 3243\n0000100 3539 3943 3544 3745 0141 0139 0130 5553\n0000120 5342 5243 5049 4954 4e4f 5401 6972 6c61\n0000140 5301 4955 4554 5401 6972 6c61 4e01 564f\n0000160 4c41 4555 000a\n\n-bash-4.1$ ls -l\n-rwxr-xr-x  1 hdfs    hdfs     *118* Oct 17 10:32 li.dat\n-rw-r--r--  1 hdfs    hdfs     *117* Oct 17 11:08 li2.dat\n\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12608883","id":"12608883","filename":"li.dat","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwert","name":"qwert","key":"qwert","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"a bc","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-17T05:49:22.472+0000","size":118,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12608883/li.dat"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12608884","id":"12608884","filename":"li2.dat","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwert","name":"qwert","key":"qwert","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"a bc","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-17T05:49:22.476+0000","size":117,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12608884/li2.dat"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"354165","customfield_12312823":null,"summary":"sql result messes up if char '0x0d ' in the database data file","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwert","name":"qwert","key":"qwert","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"a bc","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwert","name":"qwert","key":"qwert","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"a bc","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"CDH4.3","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12674251/comment/13797629","id":"13797629","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwert","name":"qwert","key":"qwert","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"a bc","active":true,"timeZone":"Etc/UTC"},"body":"hive database data file.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwert","name":"qwert","key":"qwert","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"a bc","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-17T05:49:22.481+0000","updated":"2013-10-17T05:49:22.481+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-5573/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1p0d3:"}}