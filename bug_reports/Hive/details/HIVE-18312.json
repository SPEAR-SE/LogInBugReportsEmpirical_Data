{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13126004","self":"https://issues.apache.org/jira/rest/api/2/issue/13126004","key":"HIVE-18312","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2018-01-05T23:34:23.031+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jan 05 23:34:23 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-18312/watchers","watchCount":2,"isWatching":false},"created":"2017-12-19T19:02:09.419+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334255","id":"12334255","name":"2.1.0","archived":false,"released":true,"releaseDate":"2016-06-20"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-01-05T23:34:40.133+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12317906","id":"12317906","name":"Database/Schema","description":"Issues related to support for multiple Datasbases/Schemas"}],"timeoriginalestimate":null,"description":"Create or Replace a view with different column types may fail with error :\r\n{code}\r\nFAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask. Unable to alter table. The following columns have types incompatible with the existing columns in their respective positions :\r\ni\r\n{code}\r\n\r\nHere is minimum reproduce:\r\n{code}\r\nCREATE TABLE testtype(i int, s1 string);\r\n\r\nDDL1:\r\ncreate or replace view v1 (s1) \r\nas Select s1 from testtype;\r\n\r\nDDL2:\r\ncreate or replace view v1 (i,s1) \r\nas Select i, s1 from testtype ;\r\n\r\nFAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask. Unable to alter table. The following columns have types incompatible with the existing columns in their respective positions :\r\ni\r\n{code}\r\n\r\nOnly Workaround is:\r\nTo drop the view and Create view again.\r\n\r\nWe should allow \"Create or Replace View\" to work even if the column types are different.\r\nIt should work like \"Drop View\" and then \"Create a View\".","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Create or Replace a View fails with \"Unable to alter table. The following columns have types incompatible with the existing columns in their respective positions\"","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haozhu","name":"haozhu","key":"haozhu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=haozhu&avatarId=20731","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=haozhu&avatarId=20731","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=haozhu&avatarId=20731","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=haozhu&avatarId=20731"},"displayName":"Hao Zhu","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haozhu","name":"haozhu","key":"haozhu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=haozhu&avatarId=20731","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=haozhu&avatarId=20731","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=haozhu&avatarId=20731","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=haozhu&avatarId=20731"},"displayName":"Hao Zhu","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Hive 2.1","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13126004/comment/16314137","id":"16314137","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janulatha","name":"janulatha","key":"janulatha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Janaki Lahorani","active":true,"timeZone":"America/Los_Angeles"},"body":"[~haozhu] Please check if this is a duplicate of HIVE-17764.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janulatha","name":"janulatha","key":"janulatha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Janaki Lahorani","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-01-05T23:34:23.031+0000","updated":"2018-01-05T23:34:40.123+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-18312/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3o30f:"}}