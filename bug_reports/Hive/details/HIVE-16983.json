{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13083210","self":"https://issues.apache.org/jira/rest/api/2/issue/13083210","key":"HIVE-16983","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12335838","id":"12335838","description":"Maintenance branch for 2.1 ","name":"2.1.1","archived":false,"released":true,"releaseDate":"2016-12-08"}],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2017-07-03T10:32:06.072+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jul 13 12:53:05 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-16983/watchers","watchCount":7,"isWatching":false},"created":"2017-06-28T17:33:20.820+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12335838","id":"12335838","description":"Maintenance branch for 2.1 ","name":"2.1.1","archived":false,"released":true,"releaseDate":"2016-12-08"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allgoodok","name":"allgoodok","key":"allgoodok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vlad Gudikov","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-07-13T12:53:05.616+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12325007","id":"12325007","name":"Hive"}],"timeoriginalestimate":null,"description":"I've followed various published documentation on integrating Apache Hive 2.1.1 with AWS S3 using the `s3a://` scheme, configuring `fs.s3a.access.key` and \n`fs.s3a.secret.key` for `hadoop/etc/hadoop/core-site.xml` and `hive/conf/hive-site.xml`.\n\nI am at the point where I am able to get `hdfs dfs -ls s3a://[bucket-name]/` to work properly (it returns s3 ls of that bucket). So I know my creds, bucket access, and overall Hadoop setup is valid. \n\n    hdfs dfs -ls s3a://[bucket-name]/\n    \n    drwxrwxrwx   - hdfs hdfs          0 2017-06-27 22:43 s3a://[bucket-name]/files\n    ...etc. \n\n    hdfs dfs -ls s3a://[bucket-name]/files\n    \n    drwxrwxrwx   - hdfs hdfs          0 2017-06-27 22:43 s3a://[bucket-name]/files/my-csv.csv\n\nHowever, when I attempt to access the same s3 resources from hive, e.g. run any `CREATE SCHEMA` or `CREATE EXTERNAL TABLE` statements using `LOCATION 's3a://[bucket-name]/files/'`, it fails. \n\nfor example:\n\n>CREATE EXTERNAL TABLE IF NOT EXISTS mydb.my_table ( my_table_id string, my_tstamp timestamp, my_sig bigint ) ROW FORMAT DELIMITED FIELDS TERMINATED BY ',' LOCATION 's3a://[bucket-name]/files/';\n\nI keep getting this error:\n\n>FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask. MetaException(message:Got exception: java.nio.file.AccessDeniedException s3a://[bucket-name]/files: getFileStatus on s3a://[bucket-name]/files: com.amazonaws.services.s3.model.AmazonS3Exception: Forbidden (Service: Amazon S3; Status Code: 403; Error Code: 403 Forbidden; Request ID: C9CF3F9C50EF08D1), S3 Extended Request ID: T2xZ87REKvhkvzf+hdPTOh7CA7paRpIp6IrMWnDqNFfDWerkZuAIgBpvxilv6USD0RSxM9ymM6I=)\n\nThis makes no sense. I have access to the bucket as one can see in the hdfs test. And I've added the proper creds to hive-site.xml. \n\nAnyone have any idea what's missing from this equation?","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12335838","id":"12335838","description":"Maintenance branch for 2.1 ","name":"2.1.1","archived":false,"released":true,"releaseDate":"2016-12-08"}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12876365","id":"12876365","filename":"HIVE-16983-branch-2.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allgoodok","name":"allgoodok","key":"allgoodok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vlad Gudikov","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-10T06:01:10.396+0000","size":455,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12876365/HIVE-16983-branch-2.1.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"getFileStatus on accessible s3a://[bucket-name]/folder: throws com.amazonaws.services.s3.model.AmazonS3Exception: Forbidden (Service: Amazon S3; Status Code: 403; Error Code: 403 Forbidden;","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=axbaretto","name":"axbaretto","key":"axbaretto","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alex Baretto","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=axbaretto","name":"axbaretto","key":"axbaretto","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alex Baretto","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Hive 2.1.1 on Ubuntu 14.04 AMI in AWS EC2, connecting to S3 using s3a:// protocol","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13083210/comment/16072239","id":"16072239","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"Clearly, somehow, your credentials aren't getting picked up. One problem here is that the S3A code can't log what's going on in any detail for security reasons (logging secrets is considered harmful), so not sure what could be done here.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-07-03T10:32:06.072+0000","updated":"2017-07-03T10:32:06.072+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13083210/comment/16072719","id":"16072719","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abalitsky1","name":"abalitsky1","key":"abalitsky1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aleksandr Balitsky","active":true,"timeZone":"Europe/Kiev"},"body":"I faced with the same issue because of the mismatching of aws-java-sdk, joda-time and java version.In my case Hive used joda-time 2.5 but this version doesn't work with java8 and aws-java-sdk-1.7.15.  We should use at least the joda-time version 2.8.1.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abalitsky1","name":"abalitsky1","key":"abalitsky1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aleksandr Balitsky","active":true,"timeZone":"Europe/Kiev"},"created":"2017-07-03T17:03:27.644+0000","updated":"2017-07-03T17:03:27.644+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13083210/comment/16072760","id":"16072760","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"good point\n\nEveryone: look at the S3A troubleshooting docs before filing bugreps, thanks: [http://hadoop.apache.org/docs/r2.8.0/hadoop-aws/tools/hadoop-aws/index.html#Troubleshooting_S3A]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-07-03T17:42:03.343+0000","updated":"2017-07-03T17:42:03.343+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13083210/comment/16078122","id":"16078122","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allgoodok","name":"allgoodok","key":"allgoodok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vlad Gudikov","active":true,"timeZone":"Etc/UTC"},"body":"The solution is to update joda-time version from 2.5 to 2.9.9","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allgoodok","name":"allgoodok","key":"allgoodok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vlad Gudikov","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-07T14:03:52.489+0000","updated":"2017-07-07T14:03:52.489+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13083210/comment/16079908","id":"16079908","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12876365/HIVE-16983-branch-2.1.patch\n\n{color:red}ERROR:{color} -1 due to build exiting with an error\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/5927/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/5927/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-5927/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nTests exited with: NonZeroExitCodeException\nCommand 'bash /data/hiveptest/working/scratch/source-prep.sh' failed with exit status 1 and output '+ date '+%Y-%m-%d %T.%3N'\n2017-07-10 06:21:54.491\n+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]\n+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\n+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\n+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games\n+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games\n+ export 'ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m '\n+ ANT_OPTS='-Xmx1g -XX:MaxPermSize=256m '\n+ export 'MAVEN_OPTS=-Xmx1g '\n+ MAVEN_OPTS='-Xmx1g '\n+ cd /data/hiveptest/working/\n+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-5927/source-prep.txt\n+ [[ false == \\t\\r\\u\\e ]]\n+ mkdir -p maven ivy\n+ [[ git = \\s\\v\\n ]]\n+ [[ git = \\g\\i\\t ]]\n+ [[ -z branch-2.1 ]]\n+ [[ -d apache-github-branch-2.1-source ]]\n+ [[ ! -d apache-github-branch-2.1-source/.git ]]\n+ [[ ! -d apache-github-branch-2.1-source ]]\n+ date '+%Y-%m-%d %T.%3N'\n2017-07-10 06:21:54.494\n+ cd apache-github-branch-2.1-source\n+ git fetch origin\nFrom https://github.com/apache/hive\n   a27ccaa..5a62503  branch-2.1 -> origin/branch-2.1\n   1a9ed41..07522ad  branch-1   -> origin/branch-1\n   a3f718f..18ddf46  branch-1.2 -> origin/branch-1.2\n   48f6e30..6a63742  branch-2   -> origin/branch-2\n   b45e401..f24b76f  branch-2.0 -> origin/branch-2.0\n   f31f749..61867c7  branch-2.2 -> origin/branch-2.2\n * [new branch]      branch-2.3 -> origin/branch-2.3\n   ccea0d6..81853c1  hive-14535 -> origin/hive-14535\n   5814c11..7f5460d  master     -> origin/master\n * [new branch]      storage-branch-2.3 -> origin/storage-branch-2.3\n * [new branch]      storage-branch-2.4 -> origin/storage-branch-2.4\n * [new tag]         storage-release-2.4.0rc0 -> storage-release-2.4.0rc0\n * [new tag]         rel/release-1.2.2 -> rel/release-1.2.2\n * [new tag]         rel/storage-release-2.3.0 -> rel/storage-release-2.3.0\n * [new tag]         rel/storage-release-2.3.1 -> rel/storage-release-2.3.1\n * [new tag]         release-2.3.0-rc0 -> release-2.3.0-rc0\n * [new tag]         storage-release-2.3.0rc0 -> storage-release-2.3.0rc0\n+ git reset --hard HEAD\nHEAD is now at a27ccaa HIVE-14084 HPLSQL multiple db connection does not switch back to Hive (Fei Hui via Alan Gates)\n+ git clean -f -d\n+ git checkout branch-2.1\nAlready on 'branch-2.1'\nYour branch is behind 'origin/branch-2.1' by 2 commits, and can be fast-forwarded.\n  (use \"git pull\" to update your local branch)\n+ git reset --hard origin/branch-2.1\nHEAD is now at 5a62503 HIVE-16683. Backport of ORC-125 to fix incorrect handling of future\n+ git merge --ff-only origin/branch-2.1\nAlready up-to-date.\n+ date '+%Y-%m-%d %T.%3N'\n2017-07-10 06:22:05.047\n+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh\n+ patchFilePath=/data/hiveptest/working/scratch/build.patch\n+ [[ -f /data/hiveptest/working/scratch/build.patch ]]\n+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh\n+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch\nerror: a/pom.xml: No such file or directory\nThe patch does not appear to apply with p0, p1, or p2\n+ exit 1\n'\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12876365 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2017-07-10T06:22:05.562+0000","updated":"2017-07-10T06:22:05.562+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13083210/comment/16080062","id":"16080062","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"Patch itself LGTM from an S3a perspective\n\none thing for Hive to consider is: adding some explicit tests against S3, run iff its set up with credentials. That's how I do all my s3 and azure integration tests","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-07-10T09:27:05.476+0000","updated":"2017-07-10T09:27:05.476+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13083210/comment/16080465","id":"16080465","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ksshanam","name":"ksshanam","key":"ksshanam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10439","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10439","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10439","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10439"},"displayName":"Krishna Vaidyanath","active":true,"timeZone":"Etc/UTC"},"body":"I've been working this case with Alex, and can tell you that the same permissions, credentials, etc. all work correctly and as expected with s3n:// and s3://. They do not work with s3a://, despite setting the properties in core-site.xml that in code and doc are expected. \n\nWe went through the troubleshooting docs but they did not provide any insight or guidance to fix this problem. \n\nVlad, you're on to something, we will test with joda 2.9.9, we have been using 2.8.1. \n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ksshanam","name":"ksshanam","key":"ksshanam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10439","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10439","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10439","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10439"},"displayName":"Krishna Vaidyanath","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-10T15:05:12.460+0000","updated":"2017-07-10T15:05:12.460+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13083210/comment/16080472","id":"16080472","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ksshanam","name":"ksshanam","key":"ksshanam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10439","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10439","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10439","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10439"},"displayName":"Krishna Vaidyanath","active":true,"timeZone":"Etc/UTC"},"body":"If we solve this, I propose we add the solution to the troubleshooting section. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ksshanam","name":"ksshanam","key":"ksshanam","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10439","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10439","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10439","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10439"},"displayName":"Krishna Vaidyanath","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-10T15:08:26.567+0000","updated":"2017-07-10T15:08:26.567+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13083210/comment/16081846","id":"16081846","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allgoodok","name":"allgoodok","key":"allgoodok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vlad Gudikov","active":true,"timeZone":"Etc/UTC"},"body":"Well I've tested this one with s3a://, using Impala and Hive (storing keys in core-site.xml). Also tested using hadoop commands by directly passing keys to command.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allgoodok","name":"allgoodok","key":"allgoodok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vlad Gudikov","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-11T08:15:33.408+0000","updated":"2017-07-11T08:15:33.408+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13083210/comment/16082117","id":"16082117","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"* The joda time update will be mandatory for S3A to auth\n* even there, it won't like v4 endpoints. Which version are you up against.\n\nLike I said, we're somewhat constrained by the requirement of \"don't log secrets\". Sometimes putting up a debugger and setting a breakpoint on the auth pipeline is the tactic. For hadoop 2.8, thats {{org.apache.hadoop.fs.s3a.BasicAWSCredentialsProvider.getCredentials()}} .","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2017-07-11T12:06:49.902+0000","updated":"2017-07-11T12:06:49.902+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13083210/comment/16085664","id":"16085664","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allgoodok","name":"allgoodok","key":"allgoodok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vlad Gudikov","active":true,"timeZone":"Etc/UTC"},"body":"Maybe it is reasonable to leave version 2.8.1 as is. I haven't seen that master branch already has 2.8.1 version of joda time. My fault. I thought it's still 2.5","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allgoodok","name":"allgoodok","key":"allgoodok","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vlad Gudikov","active":true,"timeZone":"Etc/UTC"},"created":"2017-07-13T12:53:05.616+0000","updated":"2017-07-13T12:53:05.616+0000"}],"maxResults":11,"total":11,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-16983/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3guov:"}}