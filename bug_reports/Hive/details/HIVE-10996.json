{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12837557","self":"https://issues.apache.org/jira/rest/api/2/issue/12837557","key":"HIVE-10996","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329557","id":"12329557","name":"1.1.1","archived":false,"released":true,"releaseDate":"2015-05-20"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12332641","id":"12332641","description":"Hive 2.0.0","name":"2.0.0","archived":false,"released":true,"releaseDate":"2016-02-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12332952","id":"12332952","description":"branch-1.2 HEAD","name":"1.2.2","archived":false,"released":true,"releaseDate":"2017-04-06"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-06-15T21:51:04.251+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Jul 06 16:27:22 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_11_*:*_249597751_*|*_3_*:*_1_*:*_98318907_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_11_*:*_939440757","customfield_12312321":null,"resolutiondate":"2015-06-27T22:22:21.289+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-10996/watchers","watchCount":11,"isWatching":false},"created":"2015-06-13T00:46:24.288+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"12.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329345","id":"12329345","description":"Hive 1.2.0","name":"1.2.0","archived":false,"released":true,"releaseDate":"2015-05-18"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12329363","id":"12329363","name":"1.1.0","archived":false,"released":true,"releaseDate":"2015-03-07"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12332154","id":"12332154","description":"","name":"1.3.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12332641","id":"12332641","description":"Hive 2.0.0","name":"2.0.0","archived":false,"released":true,"releaseDate":"2016-02-15"}],"issuelinks":[{"id":"12445621","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12445621","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12895688","key":"HIVE-11931","self":"https://issues.apache.org/jira/rest/api/2/issue/12895688","fields":{"summary":"Join sql cannot get result","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12428701","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12428701","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12839968","key":"HIVE-11088","self":"https://issues.apache.org/jira/rest/api/2/issue/12839968","fields":{"summary":"Investigate intermitten failure of join28.q for Spark","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}},{"id":"12428412","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12428412","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12839197","key":"HIVE-11056","self":"https://issues.apache.org/jira/rest/api/2/issue/12839197","fields":{"summary":"Boolean property to specify if an operator can project columns out of the input tuples","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-02-16T23:52:46.630+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12324798","id":"12324798","name":"Query Planning"}],"timeoriginalestimate":null,"description":"We see the following problem on 1.1.0 and 1.2.0 but not 0.13 which seems like a regression.\n\nThe following query (Q1) produces no results:\n\n{code}\nselect s\nfrom (\n  select last.*, action.st2, action.n\n  from (\n    select purchase.s, purchase.timestamp, max (mevt.timestamp) as last_stage_timestamp\n    from (select * from purchase_history) purchase\n    join (select * from cart_history) mevt\n    on purchase.s = mevt.s\n    where purchase.timestamp > mevt.timestamp\n    group by purchase.s, purchase.timestamp\n  ) last\n  join (select * from events) action\n  on last.s = action.s and last.last_stage_timestamp = action.timestamp\n) list;\n\n{code}\n\nWhile this one (Q2) does produce results :\n\n\n{code}\nselect *\nfrom (\n  select last.*, action.st2, action.n\n  from (\n    select purchase.s, purchase.timestamp, max (mevt.timestamp) as last_stage_timestamp\n    from (select * from purchase_history) purchase\n    join (select * from cart_history) mevt\n    on purchase.s = mevt.s\n    where purchase.timestamp > mevt.timestamp\n    group by purchase.s, purchase.timestamp\n  ) last\n  join (select * from events) action\n  on last.s = action.s and last.last_stage_timestamp = action.timestamp\n) list;\n1\t21\t20\tBob\t1234\n1\t31\t30\tBob\t1234\n3\t51\t50\tJeff\t1234\n\n{code}\n\n\nThe setup to test this is:\n\n{code}\ncreate table purchase_history (s string, product string, price double, timestamp int);\ninsert into purchase_history values ('1', 'Belt', 20.00, 21);\ninsert into purchase_history values ('1', 'Socks', 3.50, 31);\ninsert into purchase_history values ('3', 'Belt', 20.00, 51);\ninsert into purchase_history values ('4', 'Shirt', 15.50, 59);\n\ncreate table cart_history (s string, cart_id int, timestamp int);\ninsert into cart_history values ('1', 1, 10);\ninsert into cart_history values ('1', 2, 20);\ninsert into cart_history values ('1', 3, 30);\ninsert into cart_history values ('1', 4, 40);\ninsert into cart_history values ('3', 5, 50);\ninsert into cart_history values ('4', 6, 60);\n\ncreate table events (s string, st2 string, n int, timestamp int);\ninsert into events values ('1', 'Bob', 1234, 20);\ninsert into events values ('1', 'Bob', 1234, 30);\ninsert into events values ('1', 'Bob', 1234, 25);\ninsert into events values ('2', 'Sam', 1234, 30);\ninsert into events values ('3', 'Jeff', 1234, 50);\ninsert into events values ('4', 'Ted', 1234, 60);\n\n{code}\n\nI realize select * and select s are not all that interesting in this context but what lead us to this issue was select count(distinct s) was not returning results. The above queries are the simplified queries that produce the issue. \n\nI will note that if I convert the inner join to a table and select from that the issue does not appear.\n\n\n\n\nUpdate: Found that turning off  hive.optimize.remove.identity.project fixes this issue. This optimization was introduced in https://issues.apache.org/jira/browse/HIVE-8435\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12739385","id":"12739385","filename":"explain_q1.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gkowshik","name":"gkowshik","key":"gkowshik","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gautam Kowshik","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-13T01:01:51.572+0000","size":7342,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12739385/explain_q1.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12739386","id":"12739386","filename":"explain_q2.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gkowshik","name":"gkowshik","key":"gkowshik","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gautam Kowshik","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-13T01:01:51.577+0000","size":7656,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12739386/explain_q2.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12740328","id":"12740328","filename":"HIVE-10996.01.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-18T07:47:57.535+0000","size":39418,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12740328/HIVE-10996.01.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12740417","id":"12740417","filename":"HIVE-10996.02.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-18T15:32:56.195+0000","size":40847,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12740417/HIVE-10996.02.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12740526","id":"12740526","filename":"HIVE-10996.03.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-19T00:05:44.931+0000","size":73734,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12740526/HIVE-10996.03.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12740625","id":"12740625","filename":"HIVE-10996.04.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-19T11:05:23.692+0000","size":73722,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12740625/HIVE-10996.04.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12740656","id":"12740656","filename":"HIVE-10996.05.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-19T14:24:18.838+0000","size":74497,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12740656/HIVE-10996.05.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12740684","id":"12740684","filename":"HIVE-10996.06.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-19T17:00:20.534+0000","size":77721,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12740684/HIVE-10996.06.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12740753","id":"12740753","filename":"HIVE-10996.07.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-19T23:03:02.397+0000","size":76902,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12740753/HIVE-10996.07.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12740920","id":"12740920","filename":"HIVE-10996.08.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-21T16:00:24.047+0000","size":78552,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12740920/HIVE-10996.08.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12741134","id":"12741134","filename":"HIVE-10996.09.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-22T21:28:05.482+0000","size":79449,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12741134/HIVE-10996.09.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12740012","id":"12740012","filename":"HIVE-10996.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-17T01:19:48.058+0000","size":44356,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12740012/HIVE-10996.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Aggregation / Projection over Multi-Join Inner Query producing incorrect results","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gkowshik","name":"gkowshik","key":"gkowshik","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gautam Kowshik","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gkowshik","name":"gkowshik","key":"gkowshik","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gautam Kowshik","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14584349","id":"14584349","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gkowshik","name":"gkowshik","key":"gkowshik","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gautam Kowshik","active":true,"timeZone":"America/Los_Angeles"},"body":"Attached query plans of query with projection over inner query : Q1 and just inner query : Q2","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gkowshik","name":"gkowshik","key":"gkowshik","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gautam Kowshik","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-13T01:01:51.582+0000","updated":"2015-06-13T01:01:51.582+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14586978","id":"14586978","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jcamachorodriguez] Could you take a look? seems like related to DT removal HIVE-8435.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-15T21:51:04.251+0000","updated":"2015-06-15T21:51:04.251+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14587114","id":"14587114","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"body":"This seems to be fixed in HIVE-9613. The fix was backported to 1.0, but not to 1.1.\n\n[~hagleitn], [~brocknoland], could we backport HIVE-9613 to 1.1 to solve this issue? Thanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-15T23:13:07.744+0000","updated":"2015-06-15T23:13:07.744+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14587171","id":"14587171","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"body":"I can reproduce the problem in 1.2. Still investigating the issue...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-15T23:57:11.197+0000","updated":"2015-06-15T23:57:11.197+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14589132","id":"14589132","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"body":"Triggering a QA run.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-17T01:19:48.065+0000","updated":"2015-06-17T01:19:48.065+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14589463","id":"14589463","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12740012/HIVE-10996.patch\n\n{color:red}ERROR:{color} -1 due to 201 failed/errored test(s), 9009 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join0\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join13\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join18\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join18_multi_distinct\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join22\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join_without_localtask\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_smb_mapjoin_14\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_sortmerge_join_9\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cbo_rp_auto_join1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cluster\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_column_access_stats\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer10\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer14\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer15\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer3\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer5\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer6\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer7\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer9\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cross_product_check_1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cross_product_check_2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_dynpart_sort_opt_vectorization\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_dynpart_sort_optimization\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_explain_logical\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_explain_rearrange\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby2_limit\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby7_noskew_multi_single_reducer\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_complex_types_multi_single_reducer\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_position\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_sort_1_23\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_sort_skew_1_23\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join0\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join13\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join18\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join18_multi_distinct\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join22\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join29\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join31\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join32\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join32_lessSize\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join33\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_alt_syntax\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_cond_pushdown_1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_cond_pushdown_2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_cond_pushdown_3\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_cond_pushdown_4\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_limit_pushdown\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_metadataonly1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multiMapJoin1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multiMapJoin2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multi_insert_mixed\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multi_insert_union_src\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multi_join_union\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nonblock_op_deduplicate\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parallel\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parallel_join0\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_clusterby\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_outer_join4\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ptf\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ptf_streaming\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_reduce_deduplicate_extended\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_runtime_skewjoin_mapjoin_spark\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample10\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_skewjoin_mapjoin5\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_skewjoin_noskew\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_skewjoinopt9\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_smb_mapjoin_14\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_exists_having\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_in\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_in_having\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_notexists_having\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_notin\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_notin_having\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_unqualcolumnrefs\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_temp_table\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_type_widening\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udtf_json_tuple\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union3\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union32\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union34\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_unionDistinct_1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_char_2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_mapjoin_reduce\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_mr_diff_schema_alias\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_orderby_5\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_reduce_groupby_decimal\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_string_concat\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorization_0\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorization_limit\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorized_date_funcs\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorized_parquet_types\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorized_ptf\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorized_shufflejoin\norg.apache.hadoop.hive.cli.TestContribCliDriver.testCliDriver_serde_typedbytes4\norg.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_hbase_queries\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_infer_bucket_sort_map_operators\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_ql_rewrite_gbtoidx\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_ql_rewrite_gbtoidx_cbo_1\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_auto_join0\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_auto_sortmerge_join_9\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_bucket_map_join_tez1\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_bucket_map_join_tez2\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cross_product_check_1\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cross_product_check_2\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynamic_partition_pruning_2\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_opt_vectorization\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_explainuser_1\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_explainuser_2\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_join0\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_limit_pushdown\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_metadataonly1\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mrr\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_parallel\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_ptf\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_ptf_streaming\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_subquery_in\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_temp_table\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_dml\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_join_tests\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_joins_explain\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_union_group_by\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_union3\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_unionDistinct_1\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_char_2\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_mapjoin_reduce\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_mr_diff_schema_alias\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_orderby_5\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_reduce_groupby_decimal\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_string_concat\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorization_0\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorization_limit\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorized_date_funcs\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorized_ptf\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorized_shufflejoin\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_infer_bucket_sort_map_operators\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx_cbo_1\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx_cbo_2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join0\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join13\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join18\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join18_multi_distinct\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join22\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join_without_localtask\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_smb_mapjoin_14\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_sortmerge_join_9\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_bucket_map_join_tez1\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_bucket_map_join_tez2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_column_access_stats\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cross_product_check_1\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cross_product_check_2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby7_noskew_multi_single_reducer\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby_complex_types_multi_single_reducer\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby_position\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby_sort_1_23\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby_sort_skew_1_23\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join0\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join13\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join18\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join18_multi_distinct\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join22\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join28\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join29\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join31\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join32\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join32_lessSize\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join33\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_alt_syntax\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_cond_pushdown_1\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_cond_pushdown_2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_cond_pushdown_3\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_cond_pushdown_4\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_limit_pushdown\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_multi_insert_mixed\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_multi_join_union\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_parallel\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_parallel_join0\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_ppd_outer_join4\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_ptf\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_ptf_streaming\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_runtime_skewjoin_mapjoin_spark\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_sample10\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_skewjoin_noskew\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_skewjoinopt9\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_smb_mapjoin_14\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_subquery_in\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_temp_table\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_tez_join_tests\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_tez_joins_explain\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_union3\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_union32\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_union34\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_mapjoin_reduce\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_orderby_5\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_string_concat\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_0\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorized_ptf\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorized_shufflejoin\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4283/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4283/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4283/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 201 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12740012 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-06-17T08:12:34.272+0000","updated":"2015-06-17T08:12:34.272+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14592061","id":"14592061","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12740328/HIVE-10996.01.patch\n\n{color:red}ERROR:{color} -1 due to 2 failed/errored test(s), 8996 tests executed\n*Failed tests:*\n{noformat}\nTestCliDriver-enforce_order.q-bucketcontext_4.q-stats_publisher_error_1.q-and-12-more - did not produce a TEST-*.xml file\norg.apache.hive.hcatalog.streaming.TestStreaming.testTransactionBatchCommit_Json\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4304/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4304/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4304/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 2 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12740328 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-06-18T16:30:51.538+0000","updated":"2015-06-18T16:30:51.538+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14592388","id":"14592388","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12740417/HIVE-10996.02.patch\n\n{color:red}ERROR:{color} -1 due to 8 failed/errored test(s), 9011 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_having\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_in_having\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_notin_having\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_unqualcolumnrefs\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_explainuser_1\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_having\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_having\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join28\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4308/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4308/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4308/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 8 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12740417 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-06-18T19:42:20.543+0000","updated":"2015-06-18T19:42:20.543+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14592630","id":"14592630","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jcamachorodriguez] How could GB child Filter have a different schema than GB?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-18T22:09:25.106+0000","updated":"2015-06-18T22:09:25.106+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14592760","id":"14592760","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jpullokkaran], the ColumnPruner creates this problem.\nIf you look at the code for pruning the Filter operator, it takes the new schema for the Filter from its child operator ; just for clarity, recall that when we talk about child in Hive, we are referring actually to the operator that consumes the output of the Filter operator. This may be right in some cases e.g. if the parent operator of the Filter is a Select; but it may be wrong too, e.g. if the child is a GB as in this case.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-19T00:04:25.844+0000","updated":"2015-06-19T00:04:25.844+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14592840","id":"14592840","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jcamachorodriguez] I still don't see it.\nColumn Pruning has to look at cols used by child (consumer) to decide what cols to preserve.\nI don't see an issue with filter pruning; apologies if i am missing the obvious.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-19T01:24:31.112+0000","updated":"2015-06-19T01:24:31.112+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14592859","id":"14592859","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"body":"I should have explained it better.\n\nAssume you have the following operators in a plan: {{... - GB - FIL - SEL - ...}}\nwhere, before ColumnPruner is applied, the schemas of the operators are: \n{noformat}\nGB - (col0, col1, col2)\nFIL - (col0, col1, col2)\nSEL - (col1, col2)\n{noformat}\n\nColumnPruner is applied topdown through the tree. As SEL only needs col1 and col2, the required columns for FIL are indeed col1 and col2.\n\nThe problem is that ColumnPruner updates FIL schema without taking into account the operator that is below. Below the FIL operator, we have a GB operator, which should (and will) still produce tuples consisting of columns {{(col0, col1, col2)}}. Thus, now there is a mismatch between the tuples in the FIL operator, which contain 3 columns, and the FIL operator schema, that consists of {{(col1, col2)}}. The patch fixes this issue by introducing a SEL operator between the GB and FIL operators, so the plan becomes: {{... - GB - SEL - FIL - SEL - ...}}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-19T01:41:35.955+0000","updated":"2015-06-19T01:41:35.955+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14592861","id":"14592861","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"body":"The schema of the operators in the new plan would be:\n\n{noformat}\nGB - (col0, col1, col2)\nSEL - (col1, col2)\nFIL - (col1, col2)\nSEL - (col1, col2)\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-19T01:43:34.919+0000","updated":"2015-06-19T01:43:34.919+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14592862","id":"14592862","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"body":"The schema of the operators in the new plan would be:\n\n{noformat}\nGB - (col0, col1, col2)\nSEL - (col1, col2)\nFIL - (col1, col2)\nSEL - (col1, col2)\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-19T01:43:41.650+0000","updated":"2015-06-19T01:43:41.650+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14592864","id":"14592864","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jcamachorodriguez] OK that explains the problem.\nHowever Introduction of DT to adjust for schema changes shouldn't be restricted to Filter.\n\nIt could happen for other ops as well? Why the restriction to Fil?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-19T01:47:24.004+0000","updated":"2015-06-19T01:47:24.004+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14592884","id":"14592884","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"body":"Also Why does following pipeline produce wrong result?\nGB - (col0, col1, col2)\nFIL - (col1, col2)\n\nChild(FIL) should ignore \"col0\".\n\nIs the result wrong because child is reading the wrong col?\nIf thats the case then it implies the input schema of child (FIL) and GB output col names didn't match.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-19T02:09:26.030+0000","updated":"2015-06-19T02:09:26.030+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14592957","id":"14592957","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12740526/HIVE-10996.03.patch\n\n{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 9011 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_having\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4315/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4315/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4315/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 1 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12740526 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-06-19T03:31:02.530+0000","updated":"2015-06-19T03:31:02.530+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14593260","id":"14593260","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jpullokkaran], thanks for the comments.\n1) you are right, the solution should not be tailored towards FIL operator only, as this could happen in other cases; I will change the patch accordingly,\n2) the error is produced because the SEL operator above the FIL operator is removed by IdentityProjectRemoval optimization (as SEL and FIL have the same schema, this is what IdentityProjectRemoval is supposed to do). But actually that SEL operator was pruning columns out of the input tuples.\nIn the specific example provided in this case, after the SEL operator there is a JOIN operator, that was then joining on wrong columns and thus, not producing the right results.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-19T09:32:59.836+0000","updated":"2015-06-19T09:32:59.836+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14593410","id":"14593410","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12740625/HIVE-10996.04.patch\n\n{color:red}ERROR:{color} -1 due to 125 failed/errored test(s), 9011 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join18\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join18_multi_distinct\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join32\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucket_groupby\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cbo_gby\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cbo_limit\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cbo_semijoin\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cbo_udf_udaf\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cbo_views\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer8\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_count\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_distinct_stats\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_fold_eq_with_case_when\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby12\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby2_map\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby2_map_multi_distinct\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby2_map_skew\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby3_map\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby3_map_multi_distinct\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby3_map_skew\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby8_map_skew\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby9\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_cube1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_distinct_samekey\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_duplicate_key\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_grouping_id2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_map_ppr\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_map_ppr_multi_distinct\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_multi_insert_common_distinct\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_multi_single_reducer\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_position\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_rollup1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_sort_11\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_sort_8\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_infer_bucket_sort\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join18\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join18_multi_distinct\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_lateral_view\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_limit_pushdown\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_mapjoin\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_metadataOnlyOptimizer\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_metadataonly1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multiMapJoin1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multi_insert_gby3\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multi_insert_lateral_view\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nullgroup4\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nullgroup4_multi_distinct\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_optimize_nullscan\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_reduce_deduplicate_extended\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_semijoin\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_multiinsert\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_unqual_corr_expr\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_table_access_keys_stats\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_truncate_column_merge\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_count\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union17\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_unionDistinct_1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_count_distinct\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_groupby_reduce\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_join30\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_leftsemi_mapjoin\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorization_limit\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorized_distinct_gby\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_bucket5\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_infer_bucket_sort_reducers_power_two\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_ql_rewrite_gbtoidx\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_ql_rewrite_gbtoidx_cbo_1\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cbo_gby\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cbo_limit\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cbo_semijoin\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cbo_udf_udaf\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cbo_views\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_count\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynamic_partition_pruning\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_explainuser_1\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_explainuser_2\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_limit_pushdown\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mapjoin_mapjoin\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_metadataonly1\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_join_hash\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_union_multiinsert\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_unionDistinct_1\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_groupby_reduce\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_leftsemi_mapjoin\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorized_dynamic_partition_pruning\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_bucket5\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_infer_bucket_sort_reducers_power_two\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx_cbo_1\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx_cbo_2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join18\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join18_multi_distinct\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_auto_join32\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cbo_gby\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cbo_limit\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cbo_semijoin\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_cbo_udf_udaf\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_count\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby3_map\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby3_map_multi_distinct\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby3_map_skew\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby8_map_skew\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby9\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby_cube1\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby_map_ppr\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby_map_ppr_multi_distinct\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby_multi_insert_common_distinct\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby_multi_single_reducer\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby_position\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby_rollup1\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_having\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join18\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join18_multi_distinct\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join28\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_limit_pushdown\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_mapjoin_mapjoin\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_multi_insert_gby3\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_multi_insert_lateral_view\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_optimize_nullscan\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_semijoin\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_subquery_multiinsert\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_table_access_keys_stats\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_union17\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_count_distinct\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4320/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4320/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4320/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 125 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12740625 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-06-19T13:16:40.592+0000","updated":"2015-06-19T13:16:40.592+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14593595","id":"14593595","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12740656/HIVE-10996.05.patch\n\n{color:red}ERROR:{color} -1 due to 2 failed/errored test(s), 9011 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_having\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join28\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4321/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4321/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4321/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 2 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12740656 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-06-19T16:29:05.025+0000","updated":"2015-06-19T16:29:05.025+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14593636","id":"14593636","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"body":"Updating q files.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-19T17:00:20.549+0000","updated":"2015-06-19T17:00:20.549+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14594045","id":"14594045","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12740684/HIVE-10996.06.patch\n\n{color:red}ERROR:{color} -1 due to 3 failed/errored test(s), 9011 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_schemeAuthority\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join28\norg.apache.hive.jdbc.TestJdbcWithLocalClusterSpark.testTempTable\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4324/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4324/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4324/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 3 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12740684 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-06-19T22:30:55.857+0000","updated":"2015-06-19T22:30:55.857+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14594458","id":"14594458","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12740753/HIVE-10996.07.patch\n\n{color:red}ERROR:{color} -1 due to 2 failed/errored test(s), 9009 tests executed\n*Failed tests:*\n{noformat}\nTestCustomAuthentication - did not produce a TEST-*.xml file\norg.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler.org.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4331/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4331/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4331/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 2 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12740753 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-06-20T08:01:32.707+0000","updated":"2015-06-20T08:01:32.707+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14594797","id":"14594797","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hagleitn","name":"hagleitn","key":"hagleitn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hagleitn&avatarId=16035","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hagleitn&avatarId=16035","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hagleitn&avatarId=16035","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hagleitn&avatarId=16035"},"displayName":"Gunther Hagleitner","active":true,"timeZone":"America/Los_Angeles"},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hagleitn","name":"hagleitn","key":"hagleitn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hagleitn&avatarId=16035","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hagleitn&avatarId=16035","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hagleitn&avatarId=16035","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hagleitn&avatarId=16035"},"displayName":"Gunther Hagleitner","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-20T20:44:31.010+0000","updated":"2015-06-20T20:44:31.010+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14594913","id":"14594913","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jcamachorodriguez] The check for child schema different than GB Schema needs refinement.\nLogically if child is GB, Join (Map Join could happen i think in Hive's case) then adding child projs to new DT would be wrong.\n\nThe check should be if all of child's input cols from this parent is less than GB output cols then add Select. Also only add restricted output cols from GB.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-21T01:42:52.082+0000","updated":"2015-06-21T01:42:52.082+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14595095","id":"14595095","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jpullokkaran], you are right, thanks for pointing that out.\n\nI uploaded a new patch that fixes this problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-21T16:00:24.053+0000","updated":"2015-06-21T16:00:24.053+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14595151","id":"14595151","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:green}Overall{color}: +1 all checks pass\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12740920/HIVE-10996.08.patch\n\n{color:green}SUCCESS:{color} +1 9013 tests passed\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4334/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4334/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4334/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12740920 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-06-21T18:11:53.565+0000","updated":"2015-06-21T18:11:53.565+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14596562","id":"14596562","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"body":"Some more comments:\n1. ql/src/java/org/apache/hadoop/hive/ql/optimizer/ColumnPrunerProcFactory.java\nfor (Operator<?> child : op.getChildOperators()) {\n+        if (child instanceof SelectOperator || child instanceof ReduceSinkOperator) {\n+          continue;\n+        }\n+        List<String> neededCols = cppCtx.genColLists(op, child);\n+        if (neededCols.size() < op.getSchema().getSignature().size()) {\n+          ArrayList<ExprNodeDesc> exprs = new ArrayList<ExprNodeDesc>();\n+          ArrayList<String> outputs = new ArrayList<String>();\n+          Map<String, ExprNodeDesc> colExprMap = new HashMap<String, ExprNodeDesc>();\n+          ArrayList<ColumnInfo> outputRS = new ArrayList<ColumnInfo>();\n+          for (String internalName : neededCols) {\n+            ColumnInfo colInfo = op.getSchema().getColumnInfo(\n\nShould preserve the order of cols as it appears in GB\n\n2. Nit Pick: change name of OP to GBOP\n3. Nit Pick: Change name of output to outputColNames","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-22T20:13:36.878+0000","updated":"2015-06-22T20:13:36.878+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14596729","id":"14596729","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"body":"+1 Conditional on QA run.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-22T21:55:05.389+0000","updated":"2015-06-22T21:55:05.389+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14596972","id":"14596972","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\n{color:red}Overall{color}: -1 at least one tests failed\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12741134/HIVE-10996.09.patch\n\n{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 9014 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join28\n{noformat}\n\nTest results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4341/testReport\nConsole output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4341/console\nTest logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4341/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 1 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12741134 - PreCommit-HIVE-TRUNK-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2015-06-23T01:26:38.342+0000","updated":"2015-06-23T01:26:38.342+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14598006","id":"14598006","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jpullokkaran], fail is unrelated. It is ready to go in. Thanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-23T17:29:48.117+0000","updated":"2015-06-23T17:29:48.117+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14598128","id":"14598128","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"body":"Committed to master, 1.2 branch.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-23T18:27:52.780+0000","updated":"2015-06-23T18:27:52.780+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14598131","id":"14598131","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jcamachorodriguez]Patch needs to be modified for branch-1 & possibly for branch-1.0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran","name":"jpullokkaran","key":"jpullokkaran","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laljo John Pullokkaran","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-23T18:29:14.317+0000","updated":"2015-06-23T18:29:14.317+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14598338","id":"14598338","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"{quote}\nfail is unrelated. It is ready to go in. \n{quote}\n[~jcamachorodriguez], Could you elaborate why you think that the test failure isn't related? I can clearly see there is a result diff generated by your patch for test org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join28.\n{code}\n173c173\n< POSTHOOK: Lineage: dest_j1.key EXPRESSION [(src1)x.FieldSchema(name:key, type:string, comment:default), ]\n---\n> POSTHOOK: Lineage: dest_j1.key SIMPLE [(src1)x.FieldSchema(name:key, type:string, comment:default), ]\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-23T20:40:34.711+0000","updated":"2015-06-23T20:40:34.711+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14598349","id":"14598349","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"body":"[~xuefuz], that test has been failing intermittently for last QA runs, not only those related to this patch:\n\n{noformat}\n...\nhttp://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4309/testReport/\nhttp://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4313/testReport/\nhttp://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4317/testReport/\nhttp://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4321/testReport/\nhttp://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4324/testReport/\nhttp://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4332/testReport/\nhttp://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4336/testReport/\nhttp://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4337/testReport/\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-23T20:52:01.926+0000","updated":"2015-06-23T20:52:01.926+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14598351","id":"14598351","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Okay. Thanks for the explanation.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-23T20:55:30.875+0000","updated":"2015-06-23T20:55:30.875+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12837557/comment/14615273","id":"14615273","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"body":"Pushed to 1.1 branch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-07-06T16:27:22.570+0000","updated":"2015-07-06T16:27:22.570+0000"}],"maxResults":37,"total":37,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-10996/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2g00n:"}}