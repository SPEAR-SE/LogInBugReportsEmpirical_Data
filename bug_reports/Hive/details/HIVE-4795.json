{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12655226","self":"https://issues.apache.org/jira/rest/api/2/issue/12655226","key":"HIVE-4795","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326450","id":"12326450","description":"released","name":"0.14.0","archived":false,"released":true,"releaseDate":"2014-11-12"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-07-01T06:03:03.281+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Nov 13 19:42:22 UTC 2014","customfield_12310420":"335503","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_33710229154_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-07-23T01:29:12.859+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-4795/watchers","watchCount":5,"isWatching":false},"created":"2013-06-27T21:32:03.764+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["serde"],"customfield_12312333":null,"customfield_12310230":"serde","customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320745","id":"12320745","description":"released","name":"0.10.0","archived":false,"released":true,"releaseDate":"2013-01-11"}],"issuelinks":[{"id":"12392222","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12392222","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12603792","key":"HIVE-3392","self":"https://issues.apache.org/jira/rest/api/2/issue/12603792","fields":{"summary":"Hive unnecessarily validates table SerDes when dropping a table","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-11-13T19:42:22.965+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313604","id":"12313604","name":"CLI","description":"Command-line interpreter for Hive.\n"}],"timeoriginalestimate":null,"description":"*Use case:*\n\nOld table was created using a SerDe and system has gone through some re-configuration resulting in that serde no longer being used and hence removed. Actions necessary to identify and fix the offending tables (e.g. describe, alter, delete) fail due to the SerDe no longer being there.\n\n*Repro Steps:*\n\n1. Create table that uses a SerDe loaded in externally (via \"add jar ...\")\n2. Remove the jar that the SerDe comes from\n3. Attempt to describe, alter (set serde ...), or delete the table created in step #1\n\n*Expected Behavior:*\n\nRegardless of the status of the SerDe behind the table, perform those actions. Loading the SerDe shouldn't be a requirement to do so.\n\n*Actual Behavior:*\n\nSerDeException thrown:\n{noformat}\norg.apache.hadoop.hive.serde2.SerDeUtils.lookupDeserializer(SerDeUtils.java:86)\norg.apache.hadoop.hive.metastore.MetaStoreUtils.getDeserializer(MetaStoreUtils.java:207)\norg.apache.hadoop.hive.ql.metadata.Table.getDeserializerFromMetaStore(Table.java:266)\norg.apache.hadoop.hive.ql.metadata.Table.getDeserializer(Table.java:259)\norg.apache.hadoop.hive.ql.metadata.Table.getCols(Table.java:585)\norg.apache.hadoop.hive.ql.metadata.Table.checkValidity(Table.java:168)\norg.apache.hadoop.hive.ql.metadata.Hive.getTable(Hive.java:967)\norg.apache.hadoop.hive.ql.parse.DDLSemanticAnalyzer.addInputsOutputsAlterTable(DDLSemanticAnalyzer.java:1109)\norg.apache.hadoop.hive.ql.parse.DDLSemanticAnalyzer.analyzeAlterTableSerde(DDLSemanticAnalyzer.java:1037)\norg.apache.hadoop.hive.ql.parse.DDLSemanticAnalyzer.analyzeInternal(DDLSemanticAnalyzer.java:214)\n...\n{noformat}\n\nor\n\n{noformat}\njava.lang.RuntimeException: MetaException(message:org.apache.hadoop.hive.serde2.SerDeException SerDe f.q.c.n.MySerDe does not exist)\n    at org.apache.hadoop.hive.ql.metadata.Table.getDeserializerFromMetaStore(Table.java:268)\n    at org.apache.hadoop.hive.ql.metadata.Table.getDeserializer(Table.java:259)\n    at org.apache.hadoop.hive.ql.metadata.Table.getCols(Table.java:585)\n    at org.apache.hadoop.hive.ql.metadata.Table.checkValidity(Table.java:168)\n    at org.apache.hadoop.hive.ql.metadata.Hive.getTable(Hive.java:967)\n    at org.apache.hadoop.hive.ql.metadata.Hive.getTable(Hive.java:868)\n    at org.apache.hadoop.hive.ql.parse.DDLSemanticAnalyzer$QualifiedNameUtil.getAttemptTableName(DDLSemanticAnalyzer.java:1420)\n    at org.apache.hadoop.hive.ql.parse.DDLSemanticAnalyzer$QualifiedNameUtil.getTableName(DDLSemanticAnalyzer.java:1478)\n    ....\n{noformat}\n\n*Workaround:*\n\nFind SerDe that the problematic table was configured to use (which may not readily be possible), and manually load it (via 'add jar ...') in order to fix the problem.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"335827","customfield_12312823":null,"summary":"Delete/Alter/Describe actions fail when SerDe is not on class path","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=calebjones","name":"calebjones","key":"calebjones","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Caleb Jones","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=calebjones","name":"calebjones","key":"calebjones","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Caleb Jones","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"CDH 4.2\njava version \"1.6.0_24\"","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12655226/comment/13696599","id":"13696599","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=viji_r","name":"viji_r","key":"viji_r","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Viji","active":true,"timeZone":"Asia/Kolkata"},"body":"Given that table validation is generic for all statements today, perhaps a force flag for alters and drops may make more sense here.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=viji_r","name":"viji_r","key":"viji_r","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Viji","active":true,"timeZone":"Asia/Kolkata"},"created":"2013-07-01T06:03:03.281+0000","updated":"2013-07-01T06:03:03.281+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12655226/comment/13699539","id":"13699539","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=calebjones","name":"calebjones","key":"calebjones","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Caleb Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"Viji, I think that makes sense. Rather than re-architect how serdes work, simply provide the ability for people to correct problems in tables which reference orphaned serdes. Perhaps a \"--disableSerdeValidation\" flag or something like that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=calebjones","name":"calebjones","key":"calebjones","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Caleb Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-07-03T22:42:06.088+0000","updated":"2013-07-03T22:42:06.088+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12655226/comment/14210747","id":"14210747","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"body":"This has been fixed in 0.14 release. Please open new jira if you see any issues.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-13T19:42:22.914+0000","updated":"2014-11-13T19:42:22.914+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-4795/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1lvf3:"}}