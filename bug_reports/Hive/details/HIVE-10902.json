{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12834933","self":"https://issues.apache.org/jira/rest/api/2/issue/12834933","key":"HIVE-10902","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2015-06-03T07:24:37.357+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jun 05 09:04:33 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-10902/watchers","watchCount":3,"isWatching":false},"created":"2015-06-03T05:10:26.072+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326450","id":"12326450","description":"released","name":"0.14.0","archived":false,"released":true,"releaseDate":"2014-11-12"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-06-05T09:04:33.575+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"did the following:\n{code:sql}\ncreate table t1(id string);\ncreate table t2(id string);\nselect t1.INPUT__FILE__NAME  \nfrom t1 join t2 on t1.id = t2.id;\n{code}\n{noformat}\nfails on: Execution failed with exit status: 2\n{noformat}\nnotice this happens also on self joins:select t1_1.INPUT__FILE__NAME  from t1 t1_1 join t1 t1_2 on t1_1.id = t1_2.id\n\n\n[HIVE-8186] is related to self joins and said the issue has been resolved, but this does not seem to be the case.\nthanks for your help.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"hive fails on virtual columns when using any joins","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravenitcto","name":"ravenitcto","key":"ravenitcto","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rani Yaroshinsky","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravenitcto","name":"ravenitcto","key":"ravenitcto","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rani Yaroshinsky","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"cloudera 5.3.3, but happening also in hdp 2.2 and also on clean installs on linux.  ","customfield_12313520":null,"customfield_12311020":null,"duedate":"2015-04-24","customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12834933/comment/14570416","id":"14570416","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=damien.carol","name":"damien.carol","key":"damien.carol","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10448","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10448","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10448","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10448"},"displayName":"Damien Carol","active":true,"timeZone":"Europe/Paris"},"body":"Tested on master with and without data. It works.\n{code:sql}\ncreate table t1(id string);\ncreate table t2(id string);\nselect t1.INPUT__FILE__NAME  \nfrom t1 join t2 on t1.id = t2.id;\n{code}\nWith data :\n{code:sql}\ninsert into t1 values(\"test1\");\ninsert into t2 values(\"test1\");\n{code}\n{noformat}\n0: jdbc:hive2://nc-h07:10000/> select t1.INPUT__FILE__NAME\n0: jdbc:hive2://nc-h07:10000/> from t1 join t2 on t1.id = t2.id;\nINFO  : Session is already open\nINFO  :\n\nINFO  : Status: Running (Executing on YARN cluster with App id application_1433166587850_0006)\n\nINFO  : Map 1: -/-      Map 2: -/-\nINFO  : Map 1: 0/1      Map 2: 0/1\nINFO  : Map 1: 0/1      Map 2: 0(+1)/1\nINFO  : Map 1: 0/1      Map 2: 1/1\nINFO  : Map 1: 0(+1)/1  Map 2: 1/1\nINFO  : Map 1: 1/1      Map 2: 1/1\n+----------------------------------------------------------+--+\n|                   t1.input__file__name                   |\n+----------------------------------------------------------+--+\n| hdfs://nc-h07/user/hive/warehouse/damien.db/t1/000000_0  |\n+----------------------------------------------------------+--+\n1 row selected (1.588 seconds)\n{noformat}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=damien.carol","name":"damien.carol","key":"damien.carol","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10448","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10448","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10448","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10448"},"displayName":"Damien Carol","active":true,"timeZone":"Europe/Paris"},"created":"2015-06-03T07:24:37.357+0000","updated":"2015-06-03T07:24:37.357+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12834933/comment/14570417","id":"14570417","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=damien.carol","name":"damien.carol","key":"damien.carol","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10448","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10448","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10448","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10448"},"displayName":"Damien Carol","active":true,"timeZone":"Europe/Paris"},"body":"Same comment with self-join :\n{noformat}\n0: jdbc:hive2://nc-h07:10000/> select a.INPUT__FILE__NAME\n0: jdbc:hive2://nc-h07:10000/> from t1 a join t1 b on a.id = b.id;\nINFO  : Session is already open\nINFO  :\n\nINFO  : Status: Running (Executing on YARN cluster with App id application_1433166587850_0006)\n\nINFO  : Map 1: 0/1      Map 2: 0/1\nINFO  : Map 1: 0/1      Map 2: 0(+1)/1\nINFO  : Map 1: 0(+1)/1  Map 2: 1/1\nINFO  : Map 1: 1/1      Map 2: 1/1\n+----------------------------------------------------------+--+\n|                   a.input__file__name                    |\n+----------------------------------------------------------+--+\n| hdfs://nc-h07/user/hive/warehouse/damien.db/t1/000000_0  |\n+----------------------------------------------------------+--+\n1 row selected (0.917 seconds)\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=damien.carol","name":"damien.carol","key":"damien.carol","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10448","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10448","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10448","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10448"},"displayName":"Damien Carol","active":true,"timeZone":"Europe/Paris"},"created":"2015-06-03T07:26:41.970+0000","updated":"2015-06-03T07:26:41.970+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12834933/comment/14574160","id":"14574160","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravenitcto","name":"ravenitcto","key":"ravenitcto","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rani Yaroshinsky","active":true,"timeZone":"Etc/UTC"},"body":"Demien, I am not sure that I understood the comment there.\nWhat does \"master\" mean. Did you test it on the master branch on git ?\nIs there any stable version of hive on which this is supposed to work ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravenitcto","name":"ravenitcto","key":"ravenitcto","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rani Yaroshinsky","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-05T09:04:33.575+0000","updated":"2015-06-05T09:04:33.575+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-10902/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2fk3z:"}}