{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12668153","self":"https://issues.apache.org/jira/rest/api/2/issue/12668153","key":"HIVE-5273","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2013-09-11T22:24:49.663+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Sep 25 17:01:44 UTC 2013","customfield_12310420":"348087","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1192608045_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-09-25T17:01:44.644+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-5273/watchers","watchCount":5,"isWatching":false},"created":"2013-09-11T21:44:56.622+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324312","id":"12324312","description":"released","name":"0.12.0","archived":false,"released":true,"releaseDate":"2013-10-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324986","id":"12324986","description":"released","name":"0.13.0","archived":false,"released":true,"releaseDate":"2014-04-21"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-09-25T17:02:05.692+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"First noticed this when using local task tracker (and is easiest to reproduce with it).\n\nCreated a table with one column (uuid).  Ran\n\n{code}\nSELECT uuid FROM test_foo LIMIT 5;\n{code}\n\nResults are as expected:\n{code}\nace7265d-49bf-4c11-af67-0cd0a33c690e\nace7265d-49bf-4c11-af67-0cd0a33c690e\nace7265d-49bf-4c11-af67-0cd0a33c690e\nace7265d-49bf-4c11-af67-0cd0a33c690e\nace7265d-49bf-4c11-af67-0cd0a33c690e\nTime taken: 40.172 seconds, Fetched: 5 row(s)\n{code}\n\nThen I run it again.\n\nThe results are not as expected:\n\n{code}\nTime taken: 55.498 seconds\n{code}\n\nThe table I am querying is\n{code}\nhive> describe extended test_foo;\nOK\nuuid                \tstring              \tNone                \n\t \t \nDetailed Table Information\tTable(tableName:test_foo, dbName:default, owner:lewis, createTime:1378934838, lastAccessTime:0, retention:0, sd:StorageDescriptor(cols:[FieldSchema(name:uuid, type:string, comment:null)], location:hdfs://gun1.sjc1c.square:8020/user/hive/warehouse/test_foo, inputFormat:org.apache.hadoop.mapred.SequenceFileInputFormat, outputFormat:org.apache.hadoop.hive.ql.io.HiveSequenceFileOutputFormat, compressed:false, numBuckets:-1, serdeInfo:SerDeInfo(name:null, serializationLib:org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe, parameters:{serialization.format=1}), bucketCols:[], sortCols:[], parameters:{}, skewedInfo:SkewedInfo(skewedColNames:[], skewedColValues:[], skewedColValueLocationMaps:{}), storedAsSubDirectories:false), partitionKeys:[], parameters:{numPartitions=0, numFiles=37, transient_lastDdlTime=1378934838, numRows=0, totalSize=44600654909, rawDataSize=0}, viewOriginalText:null, viewExpandedText:null, tableType:MANAGED_TABLE)\t\n{code}\n\nWith non-local tasktracker subsequent queries work, but when doing a {{count(* )}} over a large data set, 0.12.0 returns only a subset of results that 0.10.0 returns.\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"348383","customfield_12312823":null,"summary":"Subsequent use of Mapper yields 0 results","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikelikespie","name":"mikelikespie","key":"mikelikespie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Lewis","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikelikespie","name":"mikelikespie","key":"mikelikespie","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Lewis","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12668153/comment/13764872","id":"13764872","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=appodictic","name":"appodictic","key":"appodictic","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edward Capriolo","active":true,"timeZone":"Etc/UTC"},"body":"Unconfirmed but will mark as a blocker.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=appodictic","name":"appodictic","key":"appodictic","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Edward Capriolo","active":true,"timeZone":"Etc/UTC"},"created":"2013-09-11T22:24:49.663+0000","updated":"2013-09-11T22:24:49.663+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12668153/comment/13773494","id":"13773494","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"body":"[~mikelewis] What do you mean by local tasktracker ? Do you mean running hive with -hiveconf mapred.job.tracker=local  ?\nLooks like you get a different problem with 'non-local tasktracker' . Do you know if the result you see with 0.12 corresponds to something (say non-null records only, or some partitions only). Can you describe the details of the input table, queries and what you are seeing in that mode ? Is the result from 0.10 correct ?\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-20T22:08:32.561+0000","updated":"2013-09-20T22:08:32.561+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12668153/comment/13777747","id":"13777747","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"body":"I am unable to reproduce this issue with hive trunk and branch 0.12 . Please let me know if I am not following the right steps here.\n\nBy local task tracker, I assume you meant local mode jobtracker. To run in local mode, I used - \necho $HIVE_OPTS \n-hiveconf mapred.job.tracker=local -hiveconf fs.default.name=file:///tmp -hiveconf hive.metastore.warehouse.dir=file:///tmp/warehouse -hiveconf javax.jdo.option.ConnectionURL=jdbc:derby:;databaseName=/tmp/metastore_db;create=true\n\n\nThis is what i tried -\n//create table\n{code}\nhive> create table ts(s string);\nOK\nTime taken: 0.02 seconds\nhive> select s from ts limit 5;\n{code}\n\n//adding data to table\n{code}\n$ perl -e 'for (my $i=0; $i<100000000; $i++){ print \"asdfasdfasdfasdfasdfasdfasdfasdfasd\\n\";}'  >  /tmp/warehouse/ts/input\n$ du -hs /tmp/warehouse/ts/input\n3.4G    /tmp/warehouse/ts/input\n\n{code}\n\n\n//running the test\n{code}\nhive> select s from ts limit 5;\nTotal MapReduce jobs = 1\nLaunching Job 1 out of 1\nNumber of reduce tasks is set to 0 since there's no reduce operator\nExecution log at: /tmp/thejas/.log\nJob running in-process (local Hadoop)\nHadoop job information for null: number of mappers: 0; number of reducers: 0\n2013-09-25 09:47:25,276 null map = 0%,  reduce = 0%\n2013-09-25 09:47:28,278 null map = 100%,  reduce = 0%\nEnded Job = job_local_0001\nExecution completed successfully\nMapred Local Task Succeeded . Convert the Join into MapJoin\nOK\nasdfasdfasdfasdfasdfasdfasdfasdfasd\nasdfasdfasdfasdfasdfasdfasdfasdfasd\nasdfasdfasdfasdfasdfasdfasdfasdfasd\nasdfasdfasdfasdfasdfasdfasdfasdfasd\nasdfasdfasdfasdfasdfasdfasdfasdfasd\nTime taken: 14.622 seconds, Fetched: 5 row(s)\n\n\nhive> select s from ts limit 5;\nTotal MapReduce jobs = 1\nLaunching Job 1 out of 1\nNumber of reduce tasks is set to 0 since there's no reduce operator\nExecution log at: /tmp/thejas/.log\nJob running in-process (local Hadoop)\nHadoop job information for null: number of mappers: 0; number of reducers: 0\n2013-09-25 09:58:00,492 null map = 0%,  reduce = 0%\n2013-09-25 09:58:03,493 null map = 100%,  reduce = 0%\nEnded Job = job_local_0001\nExecution completed successfully\nMapred Local Task Succeeded . Convert the Join into MapJoin\nOK\nasdfasdfasdfasdfasdfasdfasdfasdfasd\nasdfasdfasdfasdfasdfasdfasdfasdfasd\nasdfasdfasdfasdfasdfasdfasdfasdfasd\nasdfasdfasdfasdfasdfasdfasdfasdfasd\nasdfasdfasdfasdfasdfasdfasdfasdfasd\nTime taken: 11.825 seconds, Fetched: 5 row(s)\n\n{code}\n\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thejas","name":"thejas","key":"thejas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thejas&avatarId=15902","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thejas&avatarId=15902","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thejas&avatarId=15902","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thejas&avatarId=15902"},"displayName":"Thejas M Nair","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-25T17:01:44.662+0000","updated":"2013-09-25T17:01:44.662+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-5273/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1o0sf:"}}