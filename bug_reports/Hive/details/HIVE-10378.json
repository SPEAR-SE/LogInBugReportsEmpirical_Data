{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12821866","self":"https://issues.apache.org/jira/rest/api/2/issue/12821866","key":"HIVE-10378","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2017-09-26T15:06:25.022+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Oct 20 00:29:51 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_77162276075_*|*_3_*:*_1_*:*_796713_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_12362122258","customfield_12312321":null,"resolutiondate":"2018-02-16T17:01:47.265+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-10378/watchers","watchCount":8,"isWatching":false},"created":"2015-04-17T12:55:12.254+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329278","id":"12329278","description":"Branch 1.0 release","name":"1.0.0","archived":false,"released":true,"releaseDate":"2015-02-04"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12329363","id":"12329363","name":"1.1.0","archived":false,"released":true,"releaseDate":"2015-03-07"}],"issuelinks":[{"id":"12527344","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12527344","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"13110636","key":"HIVE-17845","self":"https://issues.apache.org/jira/rest/api/2/issue/13110636","fields":{"summary":"insert fails if target table columns are not lowercase","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-02-16T17:01:47.297+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12322671","id":"12322671","name":"Transactions","description":"Transaction management and ACID"}],"timeoriginalestimate":null,"description":"Brief: Hive Update statement set keyword work with lower case only and doesn't give any error if wrong column name specified in the set clause.\r\n\r\nSteps to reproduce: \r\nfollowing are the steps performed for the same:\r\n\r\n*1. Create Table with transactional properties.*\r\n\r\n{code}\r\ncreate table customer(id int ,name string, email string) clustered by (id) into 2 buckets stored as orc TBLPROPERTIES('transactional'='true')\r\n{code}\r\n\r\n*2. Insert data into transactional table:*\r\n\r\n{code}\r\ninsert into table customer values (1,'user1','user1@user1.com'),(2,'user2','user1@user1.com'),(3,'user3','user1@gmail.com')\r\n{code}\r\n\r\n*3. Search result:*\r\n\r\n{code}\r\n0: jdbc:hive2://localhost:10000> select * from customer;\r\n+--------------+----------------+------------------+--+\r\n| customer.id  | customer.name  |  customer.email  |\r\n+--------------+----------------+------------------+--+\r\n| 2            | user2          | user1@user1.com  |\r\n| 3            | user3          | user1@gmail.com  |\r\n| 1            | user1          | user1@user1.com  |\r\n+--------------+----------------+------------------+--+\r\n3 rows selected (0.299 seconds)\r\n{code}\r\n\r\n*4. Update table column name with some clause In below column name is used in the UPPER case (NAME) and it is not updating the column value*\r\n\r\n{code}\r\n0: jdbc:hive2://localhost:10000> update  customer     set  NAME  = 'notworking'   where id = 1;\r\nINFO  : Table default.customer stats: [numFiles=10, numRows=3, totalSize=6937, rawDataSize=0]\r\nNo rows affected (20.343 seconds)\r\n0: jdbc:hive2://localhost:10000> select * from customer;\r\n+--------------+----------------+------------------+--+\r\n| customer.id  | customer.name  |  customer.email  |\r\n+--------------+----------------+------------------+--+\r\n| 2            | user2          | user1@user1.com  |\r\n| 3            | user3          | user1@gmail.com  |\r\n| 1            | user1          | user1@user1.com  |\r\n+--------------+----------------+------------------+--+\r\n3 rows selected (0.321 seconds)\r\n{code}\r\n\r\n*5. Update table column name with some clause In below column name is used in the LOWER case (name) and it is updating the column value*\r\n\r\n{code}\r\n0: jdbc:hive2://localhost:10000> update  customer     set  name  = 'working'   where id = 1;\r\nINFO  : Table default.customer stats: [numFiles=11, numRows=3, totalSize=7699, rawDataSize=0]\r\nNo rows affected (19.74 seconds)\r\n0: jdbc:hive2://localhost:10000> select * from customer;\r\n+--------------+----------------+------------------+--+\r\n| customer.id  | customer.name  |  customer.email  |\r\n+--------------+----------------+------------------+--+\r\n| 2            | user2          | user1@user1.com  |\r\n| 3            | user3          | user1@gmail.com  |\r\n| 1            | working        | user1@user1.com  |\r\n+--------------+----------------+------------------+--+\r\n3 rows selected (0.333 seconds)\r\n0: jdbc:hive2://localhost:10000>\r\n{code}\r\n\r\n*6. We have also seen that if we put the column name incorrect in set keyword of the update statement it accept the query and execute job. There should validation on the column name used in the set clause*\r\n\r\n{code}\r\n0: jdbc:hive2://localhost:10000> update  customer     set  name_44  = 'working'   where id = 1;\r\n{code}\r\n \r\n ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12889085","id":"12889085","filename":"HIVE-10378.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-26T15:00:35.947+0000","size":1373,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12889085/HIVE-10378.1.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Hive Update statement set keyword work with lower case only and doesn't give any error if wrong column name specified in the set clause.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vineet.kandpal","name":"vineet.kandpal","key":"vineet.kandpal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vineet Kandpal","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vineet.kandpal","name":"vineet.kandpal","key":"vineet.kandpal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vineet Kandpal","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Hadoop: 2.6.0\nHive : 1.0.0/1.1.0\nOS:Linux","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12821866/comment/16180908","id":"16180908","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"body":"*FIXED*\n\n*ROOT-CAUSE:*\n\nCase sensitive columns processing while verifying available columns.\n\n*SOLUTION*\n\nSince hive columns are not case sensitive (see below)\n\n{code}\nhive> create table t123(X int, x int);\nFAILED: SemanticException [Error 10036]: Duplicate column name: x\n{code}\n\nuse \n\n{code}\ntargetColNames.add(((ASTNode)col).getText().toLowerCase());\n{code}\n\nin {{SemanticAnalyzer}}.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osayankin","name":"osayankin","key":"osayankin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=osayankin&avatarId=34533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=osayankin&avatarId=34533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=osayankin&avatarId=34533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=osayankin&avatarId=34533"},"displayName":"Oleksiy Sayankin","active":true,"timeZone":"Etc/UTC"},"created":"2017-09-26T15:06:25.022+0000","updated":"2017-09-26T15:06:25.022+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12821866/comment/16181461","id":"16181461","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12889085/HIVE-10378.1.patch\n\n{color:red}ERROR:{color} -1 due to no test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 6 failed/errored test(s), 11062 tests executed\n*Failed tests:*\n{noformat}\nTestAccumuloCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=231)\nTestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=231)\norg.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=156)\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_explainuser_1] (batchId=170)\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=100)\norg.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=235)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/6994/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/6994/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-6994/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 6 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12889085 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2017-09-26T19:59:05.625+0000","updated":"2017-09-26T19:59:05.625+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12821866/comment/16211938","id":"16211938","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"body":"Changing targeted fix version to 2.3.2 as this is not a blocker and we are releasing 2.3.1.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jcamachorodriguez","name":"jcamachorodriguez","key":"jcamachorodriguez","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jesus Camacho Rodriguez","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-10-19T23:47:56.602+0000","updated":"2017-10-19T23:47:56.602+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12821866/comment/16211976","id":"16211976","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoifman","name":"ekoifman","key":"ekoifman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eugene Koifman","active":true,"timeZone":"America/Los_Angeles"},"body":"[~osayankin] could you include a test with the fix?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoifman","name":"ekoifman","key":"ekoifman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eugene Koifman","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-10-20T00:29:51.088+0000","updated":"2017-10-20T00:29:51.088+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-10378/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2dehr:"}}