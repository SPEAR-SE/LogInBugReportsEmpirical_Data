{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12468683","self":"https://issues.apache.org/jira/rest/api/2/issue/12468683","key":"HIVE-1451","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2011-08-30T18:23:37.939+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Oct 13 18:57:28 UTC 2011","customfield_12310420":"35818","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_40065279721_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-10-13T18:57:28.561+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1451/watchers","watchCount":5,"isWatching":false},"created":"2010-07-07T01:42:48.940+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314156","id":"12314156","description":"released","name":"0.5.0","archived":false,"released":true,"releaseDate":"2010-02-23"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-10-13T18:57:28.657+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312584","id":"12312584","name":"Metastore","description":"Tracks issue dealing with metastore."},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312586","id":"12312586","name":"Query Processor","description":"Tracks issues dealing with query processing."}],"timeoriginalestimate":null,"description":"Here is an excerpt from table metadata for an arbitrary table {{table1}}:\n\n{noformat}\nhive> describe extended table1;\nOK\n...\nDetailed Table Information\t...\nlocation:hdfs://localhost:9000/user/arvind/hive/warehouse/table1, \n...\n{noformat}\n\nAs can be seen, the full address of namenode is captured in the location information for the table. This information is later used to run any queries on the table - thus making it impossible to change the namenode location once the table has been created. For example, for the above table, a query will fail if the namenode is migrated from port 9000 to 8020:\n\n{noformat}\nhive> select * from table1;\nOK\nFailed with exception java.io.IOException:java.net.ConnectException: Call to localhost/127.0.0.1:9000\nfailed on connection exception: java.net.ConnectException: Connection refused\nTime taken: 10.78 seconds\nhive> \n{noformat}\n\nIt should be possible to change the namenode location regardless of when the tables are created. Also, any query execution should work with the configured namenode at that point in time rather than requiring the configuration to be exactly the same at the time when the tables were created.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"123111","customfield_12312823":null,"summary":"Creating a table stores the full address of namenode in the metadata. This leads to problems when the namenode address changes.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aprabhakar","name":"aprabhakar","key":"aprabhakar","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arvind Prabhakar","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Any","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468683/comment/13093972","id":"13093972","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aaa","name":"aaa","key":"aaa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aaa&avatarId=16832","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aaa&avatarId=16832","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aaa&avatarId=16832","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aaa&avatarId=16832"},"displayName":"Amr Awadallah","active":true,"timeZone":"America/Los_Angeles"},"body":"I am out of office on a business trip for next couple of days. I will\nbe slower than usual in responding to emails. If this is urgent then\nplease call my cell phone (or send an SMS), otherwise I will reply to\nyour email when I get back.\n\nThanks for your patience,\n\n-- amr\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aaa","name":"aaa","key":"aaa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aaa&avatarId=16832","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aaa&avatarId=16832","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aaa&avatarId=16832","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aaa&avatarId=16832"},"displayName":"Amr Awadallah","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-08-30T18:23:37.939+0000","updated":"2011-08-30T18:23:37.939+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468683/comment/13094706","id":"13094706","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mis","name":"mis","key":"mis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"MIS","active":true,"timeZone":"Asia/Kolkata"},"body":"+1 for the issue. \nThis is one of those features which many assume exists by default, but doesn't. \n\nI too have run into this and resolved it by changing the DB_LOCATION_URI column and LOCATION in the tables DBS and SDS respectively to point to the latest namenode URI. {My metastore was on MySql}.\n\nThis issue will help us from manually changing namenode URI in db should the address of the namenode change.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mis","name":"mis","key":"mis","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"MIS","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-08-31T17:16:53.169+0000","updated":"2011-08-31T17:16:53.169+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468683/comment/13126807","id":"13126807","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"body":"Resolving this as WONTFIX for the following reasons:\n\n# We want the Hive Metastore to be capable of handling tables stored on different HDFS instances. Supporting this use case requires that the Metastore store the complete address of the NN.\n# HIVE-1514 added the ALTER TABLE <table> [<partition_spec>] SET LOCATION statement which allows you to modify the storage location of a table/partition in the metastore. This is an effective workaround for the issue described in this ticket. Please see https://cwiki.apache.org/Hive/languagemanual-ddl.html#LanguageManualDDL-AlterTableStorageProperties for more information.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cwsteinbach","name":"cwsteinbach","key":"cwsteinbach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Carl Steinbach","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-13T18:57:28.635+0000","updated":"2011-10-13T18:57:28.635+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1451/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0lf6v:"}}