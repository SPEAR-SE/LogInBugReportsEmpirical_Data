{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12599389","self":"https://issues.apache.org/jira/rest/api/2/issue/12599389","key":"HIVE-3275","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320745","id":"12320745","description":"released","name":"0.10.0","archived":false,"released":true,"releaseDate":"2013-01-11"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-07-19T03:27:06.685+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jan 10 19:53:53 UTC 2013","customfield_12310420":"242371","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_617000096_*|*_1_*:*_1_*:*_2727281_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-07-26T05:43:05.243+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-3275/watchers","watchCount":5,"isWatching":false},"created":"2012-07-19T01:34:18.357+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12355511","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12355511","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12600246","key":"HIVE-3301","self":"https://issues.apache.org/jira/rest/api/2/issue/12600246","fields":{"summary":"Fix quote printing bug in mapreduce_stack_trace.q testcase failure when running hive on hadoop23","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-01-10T19:53:53.614+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"autolocal1.q is failing only on hadoop0.23 MR2, due to cluster initialization problem:\n\nBegin query: autolocal1.q\ndiff -a /var/lib/jenkins/workspace/zhenxiao-CDH4-Hive-0.9.0/build/ql/test/logs/clientnegative/autolocal1.q.out /var/lib/jenkins/workspace/zhenxiao-CDH4-Hive-0.9.0/ql/src/test/results/clientnegative/autolocal1.q.out\n5c5\n< Job Submission failed with exception 'java.io.IOException(Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.)'\n—\n> Job Submission failed with exception 'java.lang.IllegalArgumentException(Does not contain a valid host:port authority: abracadabra)'\nException: Client execution results failed with error code = 1\nSee build/ql/tmp/hive.log, or try \"ant test ... -Dtest.silent=false\" to get more logs.\nFailed query: autolocal1.q\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12537123","id":"12537123","filename":"HIVE-3275.1.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-19T02:19:41.398+0000","size":1853,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12537123/HIVE-3275.1.patch.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"14489","customfield_12312823":null,"summary":"Fix autolocal1.q testcase failure when building hive on hadoop0.23 MR2","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599389/comment/13417952","id":"13417952","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"body":"After adding the following to autolocal1.q to initialize MR2 yarn framework:\n\n[~/Code/hive]git diff ql/src/test/queries/clientnegative/autolocal1.q\ndiff --git a/ql/src/test/queries/clientnegative/autolocal1.q b/ql/src/test/queries/clientnegative/autolocal1.q\nindex 6bee177..8623eb5 100644\n--- a/ql/src/test/queries/clientnegative/autolocal1.q\n+++ b/ql/src/test/queries/clientnegative/autolocal1.q\n@@ -1,3 +1,4 @@\n+set mapreduce.framework.name=yarn;\n set mapred.job.tracker=abracadabra;\n set hive.exec.mode.local.auto.inputbytes.max=1;\n set hive.exec.mode.local.auto=true;\n\nStill getting the following diffs:\n\ndiff -a /home/cloudera/Code/hive/build/ql/test/logs/clientnegative/autolocal1.q.out /home/cloudera/Code/hive/ql/src/test/results/clientnegative/autolocal1.q.out\n[junit] 5c5\n[junit] < Job Submission failed with exception 'java.lang.reflect.UndeclaredThrowableException(null)'\n[junit] —\n[junit] > Job Submission failed with exception 'java.lang.IllegalArgumentException(Does not contain a valid host:port authority: abracadabra)'","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-19T01:36:15.959+0000","updated":"2012-07-19T01:36:15.959+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599389/comment/13417965","id":"13417965","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"body":"The reason is:\n\n1. On hadoop0.20 or Hadoop0.23 MR1,\n\nJobClient jc = new JobClient(job);\n\nthis line is throwing exception in ExecDriver.java.\n\nIt calls into JobClient.java:\n\npublic JobClient(JobConf conf) throws IOException {\n    setConf(conf);\n    init(conf);\n  }\n\n  /**\n   * Connect to the default {@link JobTracker}.\n   * @param conf the job configuration.\n   * @throws IOException\n   */\n  public void init(JobConf conf) throws IOException {\n    String tracker = conf.get(\"mapred.job.tracker\", \"local\");\n    if (\"local\".equals(tracker)) {\n      this.jobSubmitClient = new LocalJobRunner(conf);\n    } else {\n      this.jobSubmitClient = createRPCProxy(JobTracker.getAddress(conf), conf);\n    }\n  }\n\nWhen createRPCProxy() is called, jobtracker is trying to getAddress(conf) of the non-existed host(abracadabra), and throws the expected exception:\njava.lang.IllegalArgumentException: Does not contain a valid host:port authority: abracadabra\n\nHere is the log and stack trace when running in hadoop0.20 to proof the above observation:\n\n2012-07-18 17:53:38,210 ERROR exec.Task (SessionState.java:printError(400)) - Job Submission failed with exception 'java.lang.IllegalArgumentException(Does not contain a valid host:port authority: abracadabra)'\njava.lang.IllegalArgumentException: Does not contain a valid host:port authority: abracadabra     \n    at org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:206)\n    at org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:158)                         \n    at org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:147)                         \n    at org.apache.hadoop.mapred.JobTracker.getAddress(JobTracker.java:2119)                       \n    at org.apache.hadoop.mapred.JobClient.init(JobClient.java:497)\n    at org.apache.hadoop.mapred.JobClient.<init>(JobClient.java:469)                              \n    at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:418)                     \n    at org.apache.hadoop.hive.ql.exec.MapRedTask.execute(MapRedTask.java:136)                     \n    at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:134)\n    at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:57)                \n    at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1324)\n    at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1110)\n    at org.apache.hadoop.hive.ql.Driver.run(Driver.java:944)\n    at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:258)                   \n    at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:215)\n    at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:406)                       \n    at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:341)                       \n    at org.apache.hadoop.hive.ql.QTestUtil.executeClient(QTestUtil.java:671)                      \n    at org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_autolocal1(TestNegativeCliDriver.java:117)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)              \n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)      \n    at java.lang.reflect.Method.invoke(Method.java:616)\n    at junit.framework.TestCase.runTest(TestCase.java:168)\n    at junit.framework.TestCase.runBare(TestCase.java:134)                                        \n    at junit.framework.TestResult$1.protect(TestResult.java:110)                                  \n    at junit.framework.TestResult.runProtected(TestResult.java:128)                               \n    at junit.framework.TestResult.run(TestResult.java:113)\n    at junit.framework.TestCase.run(TestCase.java:124)\n    at junit.framework.TestSuite.runTest(TestSuite.java:243)                                      \n    at junit.framework.TestSuite.run(TestSuite.java:238)                                          \n    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420) \n    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)   \n    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:768)\n    \n2012-07-18 17:53:38,215 ERROR ql.Driver (SessionState.java:printError(400)) - FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.MapRedTask \n\n2. When running in hadoop0.23 MR2. MapReduce2 is using Yarn framework,\n\nJobClient jc = new JobClient(job)\n\nthis line in ExecDriver.java is calling into MR2's implementation of JobClient:\n\npublic JobClient(Configuration conf) throws IOException {\n    init(new JobConf(conf));\n  }\n\n  /**\n   * Connect to the default cluster\n   * @param conf the job configuration.\n   * @throws IOException\n   */\n  public void init(JobConf conf) throws IOException {\n    setConf(conf);\n    cluster = new Cluster(conf);\n    clientUgi = UserGroupInformation.getCurrentUser();\n  }\n\nIn MR2's implementation of init(JobConf), it does not try to getAddress(conf) of the non-existed host(abracadabra). It only tries to initialize the cluster. This is working OK with a proof of the following log:\n\n2012-07-18 17:34:26,539 INFO  exec.ExecDriver (ExecDriver.java:addInputPaths(860)) - Adding input file pfile:/home/cloudera/Code/hive/build/ql/test/data/warehouse/src\n2012-07-18 17:34:26,539 INFO  exec.Utilities (Utilities.java:isEmptyPath(1804)) - Content Summary pfile:/home/cloudera/Code/hive/build/ql/test/data/warehouse/srclength: 5868 num files: 2 num directories: 1\n2012-07-18 17:34:26,877 DEBUG mapreduce.Cluster (Cluster.java:initialize(91)) - Trying ClientProtocolProvider : org.apache.hadoop.mapred.LocalClientProtocolProvider\n2012-07-18 17:34:26,877 DEBUG mapreduce.Cluster (Cluster.java:initialize(109)) - Cannot pick org.apache.hadoop.mapred.LocalClientProtocolProvider as the ClientProtocolProvider - returned null protocol\n2012-07-18 17:34:26,879 DEBUG mapreduce.Cluster (Cluster.java:initialize(91)) - Trying ClientProtocolProvider : org.apache.hadoop.mapred.YarnClientProtocolProvider\n2012-07-18 17:34:26,972 DEBUG ipc.YarnRPC (YarnRPC.java:create(57)) - Creating YarnRPC for org.apache.hadoop.yarn.ipc.HadoopYarnProtoRPC\n2012-07-18 17:34:27,000 DEBUG mapred.ResourceMgrDelegate (ResourceMgrDelegate.java:<init>(89)) - Connecting to ResourceManager at /0.0.0.0:8032\n2012-07-18 17:34:27,002 DEBUG ipc.HadoopYarnProtoRPC (HadoopYarnProtoRPC.java:getProxy(45)) - Creating a HadoopYarnProtoRpc proxy for protocol interface org.apache.hadoop.yarn.api.ClientRMProtocol\n2012-07-18 17:34:27,038 DEBUG ipc.Server (Server.java:registerProtocolEngine(197)) - rpcKind=RPC_PROTOCOL_BUFFER, rpcRequestWrapperClass=class org.apache.hadoop.ipc.ProtobufRpcEngine$RpcRequestWritable, rpcInvoker=org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker@1b34cd7b\n2012-07-18 17:34:27,166 DEBUG mapred.ResourceMgrDelegate (ResourceMgrDelegate.java:<init>(93)) - Connected to ResourceManager at /0.0.0.0:8032\n2012-07-18 17:34:27,172 DEBUG security.UserGroupInformation (UserGroupInformation.java:logPrivilegedAction(1254)) - PrivilegedAction as:cloudera (auth:SIMPLE) from:org.apache.hadoop.fs.FileContext.getAbstractFileSystem(FileContext.java:319)\n2012-07-18 17:34:27,186 DEBUG mapreduce.Cluster (Cluster.java:initialize(104)) - Picked org.apache.hadoop.mapred.YarnClientProtocolProvider as the ClientProtocolProvider\n\nAn exception occurs in ExecDriver.java, when it is submitting the job to yarn:\n\nrj = jc.submitJob(job);\n\nDue to the non-existed host(abracadabra), JobClient.submitJob() fails with exception, with a proof of the following log:\n\n2012-07-18 17:34:27,235 DEBUG mapred.ResourceMgrDelegate (ResourceMgrDelegate.java:getStagingAreaDir(276)) - getStagingAreaDir: dir=/tmp/hadoop-yarn/staging/cloudera/.staging\n2012-07-18 17:34:27,280 DEBUG ipc.Client (Client.java:<init>(262)) - The ping interval is 60000 ms.\n2012-07-18 17:34:27,287 DEBUG ipc.Client (Client.java:<init>(305)) - Use SIMPLE authentication for protocol ClientRMProtocolPB\n2012-07-18 17:34:27,287 DEBUG ipc.Client (Client.java:setupIOstreams(560)) - Connecting to /0.0.0.0:8032\n2012-07-18 17:34:28,295 INFO  ipc.Client (Client.java:handleConnectionFailure(683)) - Retrying connect to server: 0.0.0.0/0.0.0.0:8032. Already tried 0 time(s).\n2012-07-18 17:34:29,297 INFO  ipc.Client (Client.java:handleConnectionFailure(683)) - Retrying connect to server: 0.0.0.0/0.0.0.0:8032. Already tried 1 time(s).\n2012-07-18 17:34:30,299 INFO  ipc.Client (Client.java:handleConnectionFailure(683)) - Retrying connect to server: 0.0.0.0/0.0.0.0:8032. Already tried 2 time(s).\n2012-07-18 17:34:31,301 INFO  ipc.Client (Client.java:handleConnectionFailure(683)) - Retrying connect to server: 0.0.0.0/0.0.0.0:8032. Already tried 3 time(s).\n2012-07-18 17:34:32,303 INFO  ipc.Client (Client.java:handleConnectionFailure(683)) - Retrying connect to server: 0.0.0.0/0.0.0.0:8032. Already tried 4 time(s).\n2012-07-18 17:34:33,305 INFO  ipc.Client (Client.java:handleConnectionFailure(683)) - Retrying connect to server: 0.0.0.0/0.0.0.0:8032. Already tried 5 time(s).\n2012-07-18 17:34:34,306 INFO  ipc.Client (Client.java:handleConnectionFailure(683)) - Retrying connect to server: 0.0.0.0/0.0.0.0:8032. Already tried 6 time(s).\n2012-07-18 17:34:35,308 INFO  ipc.Client (Client.java:handleConnectionFailure(683)) - Retrying connect to server: 0.0.0.0/0.0.0.0:8032. Already tried 7 time(s).\n2012-07-18 17:34:36,311 INFO  ipc.Client (Client.java:handleConnectionFailure(683)) - Retrying connect to server: 0.0.0.0/0.0.0.0:8032. Already tried 8 time(s).\n2012-07-18 17:34:37,312 INFO  ipc.Client (Client.java:handleConnectionFailure(683)) - Retrying connect to server: 0.0.0.0/0.0.0.0:8032. Already tried 9 time(s).\n2012-07-18 17:34:37,314 DEBUG ipc.Client (Client.java:close(917)) - closing ipc connection to 0.0.0.0/0.0.0.0:8032: Connection refused\njava.net.ConnectException: Connection refused\n    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)\n    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:592)\n    at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)\n    at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:524)\n    at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:489)\n    at org.apache.hadoop.ipc.Client$Connection.setupConnection(Client.java:472)\n    at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:566)\n    at org.apache.hadoop.ipc.Client$Connection.access$2000(Client.java:215)\n    at org.apache.hadoop.ipc.Client.getConnection(Client.java:1271)\n    at org.apache.hadoop.ipc.Client.call(Client.java:1141)\n    at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:184)\n    at $Proxy9.getNewApplication(Unknown Source)\n    at org.apache.hadoop.yarn.api.impl.pb.client.ClientRMProtocolPBClientImpl.getNewApplication(ClientRMProtocolPBClientImpl.java:132)\n    at org.apache.hadoop.mapred.ResourceMgrDelegate.getNewJobID(ResourceMgrDelegate.java:181)\n    at org.apache.hadoop.mapred.YARNRunner.getNewJobID(YARNRunner.java:214)\n    at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:338)\n    at org.apache.hadoop.mapreduce.Job$11.run(Job.java:1226)\n    at org.apache.hadoop.mapreduce.Job$11.run(Job.java:1223)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at javax.security.auth.Subject.doAs(Subject.java:416)\n    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1232)\n    at org.apache.hadoop.mapreduce.Job.submit(Job.java:1223)\n    at org.apache.hadoop.mapred.JobClient$1.run(JobClient.java:617)\n    at org.apache.hadoop.mapred.JobClient$1.run(JobClient.java:612)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at javax.security.auth.Subject.doAs(Subject.java:416)\n    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1232)\n    at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:612)\n    at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:435)\n    at org.apache.hadoop.hive.ql.exec.MapRedTask.execute(MapRedTask.java:136)\n    at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:134)\n    at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:57)\n    at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1324)\n    at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1110)\n    at org.apache.hadoop.hive.ql.Driver.run(Driver.java:944)\n    at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:258)\n    at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:215)\n    at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:406)\n    at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:341)\n    at org.apache.hadoop.hive.ql.QTestUtil.executeClient(QTestUtil.java:671)\n    at org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_autolocal1(TestNegativeCliDriver.java:117)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:616)\n    at junit.framework.TestCase.runTest(TestCase.java:168)\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-19T01:49:29.170+0000","updated":"2012-07-19T01:49:29.170+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599389/comment/13417972","id":"13417972","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"body":"My plan is to keep autolocal1.q running only in hadoop0.20.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-19T01:55:35.970+0000","updated":"2012-07-19T01:55:35.970+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599389/comment/13417990","id":"13417990","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"body":"review request submitted at:\nhttps://reviews.facebook.net/D4221","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-19T02:19:00.175+0000","updated":"2012-07-19T02:19:00.175+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599389/comment/13417998","id":"13417998","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"body":"In summary,\n\nIn hadoop0.20,\n\nJobClient initialization would try to get JobTracker's address, which throws the expected exception.\n\nWhile, in hadoop0.23,\n\nJobClient Initialization would try which protocol to choose.\n\nIf MR1, it would do the same as hadoop0.20.\n\nIf MR2, it does not try to get JobTracker's address in JobClient initialization. No exception thrown at this time.\n\nThis will be an exception when the jobClient submitJob.\n\nSince the expected exception on hadoop0.23 diffs for MR1 and MR2, and the execution path has changed for MR1 and MR2, My plan is only running this test on hadoop0.20.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-19T02:29:18.966+0000","updated":"2012-07-19T02:29:18.966+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599389/comment/13417999","id":"13417999","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"body":"@Joydeep:\n\nAny comments are appreciated. I'd like to know the idea from autolocal1.q's original author.\n\nThanks,\nZhenxiao","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhenxiao","name":"zhenxiao","key":"zhenxiao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhenxiao Luo","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-19T02:32:27.515+0000","updated":"2012-07-19T02:32:27.515+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599389/comment/13418029","id":"13418029","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jsensarma","name":"jsensarma","key":"jsensarma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joydeep Sen Sarma","active":true,"timeZone":"Asia/Kolkata"},"body":"that sounds like a reasonable approach. it's a hive test, not hadoop - so as long as hive is trying to generate a non-local mode job (i am guessing that's what's being tested here) and that's verified against some hadoop tree - we are good.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jsensarma","name":"jsensarma","key":"jsensarma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Joydeep Sen Sarma","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-07-19T03:27:06.685+0000","updated":"2012-07-19T03:27:06.685+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599389/comment/13422739","id":"13422739","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Even between 0.20 and 1.x series, Exception type has changed from RuntimeException to IllegalArgumentTypeException as well as exception message has changed. I don't see any easy way to keep our testcases to succeed with such changes given our diff based comparisons. I think its fine to just make sure it run against one version and gives desired behavior. +1. will commit if tests pass.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-07-25T23:50:59.335+0000","updated":"2012-07-25T23:50:59.335+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599389/comment/13422911","id":"13422911","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"Committed to trunk. Thanks, Zhenxiao!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-07-26T05:43:05.524+0000","updated":"2012-07-26T05:43:05.524+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599389/comment/13423662","id":"13423662","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-h0.21 #1569 (See [https://builds.apache.org/job/Hive-trunk-h0.21/1569/])\n    HIVE-3275 : Fix autolocal1.q testcase failure when building hive on hadoop0.23 MR2 (Zhenxiao Luo via Ashutosh Chauhan) (Revision 1365888)\n\n     Result = FAILURE\nhashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1365888\nFiles : \n* /hive/trunk/ql/src/test/queries/clientnegative/autolocal1.q\n* /hive/trunk/ql/src/test/results/clientnegative/autolocal1.q.out\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-27T04:21:50.972+0000","updated":"2012-07-27T04:21:50.972+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599389/comment/13548117","id":"13548117","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-hadoop2 #54 (See [https://builds.apache.org/job/Hive-trunk-hadoop2/54/])\n    HIVE-3275 : Fix autolocal1.q testcase failure when building hive on hadoop0.23 MR2 (Zhenxiao Luo via Ashutosh Chauhan) (Revision 1365888)\n\n     Result = ABORTED\nhashutosh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1365888\nFiles : \n* /hive/trunk/ql/src/test/queries/clientnegative/autolocal1.q\n* /hive/trunk/ql/src/test/results/clientnegative/autolocal1.q.out\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-01-09T10:24:27.859+0000","updated":"2013-01-09T10:24:27.859+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599389/comment/13550230","id":"13550230","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"body":"This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutoshc","name":"ashutoshc","key":"ashutoshc","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ashutosh Chauhan","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-01-10T19:53:53.608+0000","updated":"2013-01-10T19:53:53.608+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-3275/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i02u67:"}}