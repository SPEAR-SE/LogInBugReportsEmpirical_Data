{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12529282","self":"https://issues.apache.org/jira/rest/api/2/issue/12529282","key":"HIVE-2532","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316178","id":"12316178","description":"released","name":"0.8.0","archived":false,"released":true,"releaseDate":"2011-12-16"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-10-28T18:43:36.358+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Aug 02 11:43:48 UTC 2012","customfield_12310420":"215142","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1220563400_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-11-11T19:49:19.471+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-2532/watchers","watchCount":5,"isWatching":false},"created":"2011-10-28T16:46:36.290+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"6.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jonchang","name":"jonchang","key":"jonchang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Chang","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-08-02T11:43:48.750+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Even if constant oi is returned, these may have stateful/side-effect behavior and hence need to be called each cycle.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12502631","id":"12502631","filename":"ASF.LICENSE.NOT.GRANTED--D273.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-05T23:54:52.016+0000","size":13719,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12502631/ASF.LICENSE.NOT.GRANTED--D273.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12503172","id":"12503172","filename":"ASF.LICENSE.NOT.GRANTED--D273.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-10T06:51:52.185+0000","size":19003,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12503172/ASF.LICENSE.NOT.GRANTED--D273.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12503293","id":"12503293","filename":"ASF.LICENSE.NOT.GRANTED--D273.3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-10T22:35:52.604+0000","size":19101,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12503293/ASF.LICENSE.NOT.GRANTED--D273.3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12503299","id":"12503299","filename":"ASF.LICENSE.NOT.GRANTED--D273.4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-10T22:43:52.073+0000","size":19102,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12503299/ASF.LICENSE.NOT.GRANTED--D273.4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12503410","id":"12503410","filename":"D273.4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jonchang","name":"jonchang","key":"jonchang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Chang","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-11T19:45:03.036+0000","size":19102,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12503410/D273.4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12503409","id":"12503409","filename":"D273.4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jonchang","name":"jonchang","key":"jonchang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Chang","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-11T19:44:41.179+0000","size":19102,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12503409/D273.4.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"123960","customfield_12312823":null,"summary":"Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jonchang","name":"jonchang","key":"jonchang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Chang","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jonchang","name":"jonchang","key":"jonchang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Chang","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13138595","id":"13138595","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jonchang","name":"jonchang","key":"jonchang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Chang","active":true,"timeZone":"Etc/UTC"},"body":"I have a patch but don't have a good testcase yet.  This might be a good time to add a side-effecting UDF.  Any suggestions?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jonchang","name":"jonchang","key":"jonchang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Chang","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-28T18:01:02.904+0000","updated":"2011-10-28T18:01:02.904+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13138599","id":"13138599","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jonchang","name":"jonchang","key":"jonchang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Chang","active":true,"timeZone":"Etc/UTC"},"body":"Ooo, how about a counter diff?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jonchang","name":"jonchang","key":"jonchang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Chang","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-28T18:03:34.092+0000","updated":"2011-10-28T18:03:34.092+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13138628","id":"13138628","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"contrib/src/java/org/apache/hadoop/hive/contrib/udf/UDFRowSequence.java\n\n(I used this for the existing stateful test cases.)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-28T18:43:36.358+0000","updated":"2011-10-28T18:43:36.358+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13139367","id":"13139367","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ikabiljo","name":"ikabiljo","key":"ikabiljo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Igor Kabiljo","active":true,"timeZone":"America/Los_Angeles"},"body":"@John: UDFRowSequence should already work, problem is when UDF returns ConstantOI, but has side-effects.\n\nOne (not very useful) pair of UDFs for this could be FB_LOCAL_PROPERTY_SET(key, value) and FB_LOCAL_PROPERTY_GET(key), where FB_LOCAL_PROPERTY_SET returns ConstVoidOI, but has side-effects","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ikabiljo","name":"ikabiljo","key":"ikabiljo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Igor Kabiljo","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-29T17:06:12.540+0000","updated":"2011-10-29T17:06:12.540+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13144874","id":"13144874","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jonchang requested code review of \"HIVE-2532 [jira] Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.\".\nReviewers: JIRA\n\n  HIVE-2532\n\n  Even if constant oi is returned, these may have stateful/side-effect behavior and hence need to be called each cycle.\n\nTEST PLAN\n  EMPTY\n\nREVISION DETAIL\n  https://reviews.facebook.net/D273\n\nAFFECTED FILES\n  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java\n  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java\n  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAssertTrue.java\n  ql/src/test/queries/clientnegative/udf_assert_true.q\n  ql/src/test/results/clientnegative/udf_assert_true.q.out\n  ql/src/test/results/clientpositive/show_functions.q.out\n\nMANAGE HERALD DIFFERENTIAL RULES\n  https://reviews.facebook.net/herald/view/differential/\n\nWHY DID I GET THIS EMAIL?\n  https://reviews.facebook.net/herald/transcript/519/\n\nTip: use the X-Herald-Rules header to filter Herald messages in your client.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-05T23:54:51.343+0000","updated":"2011-11-05T23:54:51.343+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13144875","id":"13144875","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"ikabiljo has commented on the revision \"HIVE-2532 [jira] Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.\".\n\n  Java code looks good, not sure what are .q and .q.out files, so will leave to others to accept :)\n  Just a small inline comment.\n\nINLINE COMMENTS\n  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAssertTrue.java:60-61 why don't convert to javaBooleanObjectInspector, usage is easier?\n\nREVISION DETAIL\n  https://reviews.facebook.net/D273\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-06T00:10:51.695+0000","updated":"2011-11-06T00:10:51.695+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13144883","id":"13144883","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jonchang has commented on the revision \"HIVE-2532 [jira] Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.\".\n\nINLINE COMMENTS\n  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAssertTrue.java:60-61 Boolean is not really much less difficult and someone once told me that the Writables are more efficient.\n\nREVISION DETAIL\n  https://reviews.facebook.net/D273\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-06T01:34:51.625+0000","updated":"2011-11-06T01:34:51.625+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13146526","id":"13146526","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jsichi has commented on the revision \"HIVE-2532 [jira] Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.\".\n\n  Try this:\n\n  SELECT 1+ASSERT_TRUE(x < 2) FROM src LATERAL VIEW EXPLODE(ARRAY(1, 2)) a AS x LIMIT 2;\n\n  I assume it should hit an exception, but it actually passes.  Guess why?\n\n\n\nINLINE COMMENTS\n  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java:144 FunctionRegistry.isDeterministic always returns false for a stateful UDF, so you don't need to double-check here.\n\nREVISION DETAIL\n  https://reviews.facebook.net/D273\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-08T20:13:51.412+0000","updated":"2011-11-08T20:13:51.412+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13146562","id":"13146562","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jonchang has planned changes to the revision \"HIVE-2532 [jira] Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.\".\n\n  Ugh.  Will fix and add new unittest\n\nREVISION DETAIL\n  https://reviews.facebook.net/D273\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-08T20:55:51.558+0000","updated":"2011-11-08T20:55:51.558+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13147519","id":"13147519","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jonchang updated the revision \"HIVE-2532 [jira] Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.\".\nReviewers: JIRA, jsichi\n\n  Make deterministic check recursive.  Add unittest to test for this case.\n\nREVISION DETAIL\n  https://reviews.facebook.net/D273\n\nAFFECTED FILES\n  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeEvaluator.java\n  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java\n  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java\n  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAssertTrue.java\n  ql/src/test/queries/clientnegative/udf_assert_true.q\n  ql/src/test/queries/clientnegative/udf_assert_true2.q\n  ql/src/test/results/clientnegative/udf_assert_true.q.out\n  ql/src/test/results/clientnegative/udf_assert_true2.q.out\n  ql/src/test/results/clientpositive/show_functions.q.out\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-10T06:51:51.456+0000","updated":"2011-11-10T06:51:51.456+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13147988","id":"13147988","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jsichi has requested changes to the revision \"HIVE-2532 [jira] Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.\".\n\nINLINE COMMENTS\n  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java:144 Note that Java does not short-circuit the &= assignment.\n\n  http://stackoverflow.com/questions/3152208/do-and-short-circuit-in-java\n  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeEvaluator.java:43 Need Javadoc here.\n\nREVISION DETAIL\n  https://reviews.facebook.net/D273\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-10T20:33:51.728+0000","updated":"2011-11-10T20:33:51.728+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13148063","id":"13148063","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jonchang updated the revision \"HIVE-2532 [jira] Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.\".\nReviewers: JIRA, jsichi\n\n  jvs' comments.\n\nREVISION DETAIL\n  https://reviews.facebook.net/D273\n\nAFFECTED FILES\n  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeEvaluator.java\n  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java\n  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java\n  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAssertTrue.java\n  ql/src/test/queries/clientnegative/udf_assert_true.q\n  ql/src/test/queries/clientnegative/udf_assert_true2.q\n  ql/src/test/results/clientnegative/udf_assert_true.q.out\n  ql/src/test/results/clientnegative/udf_assert_true2.q.out\n  ql/src/test/results/clientpositive/show_functions.q.out\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-10T22:35:51.947+0000","updated":"2011-11-10T22:35:51.947+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13148073","id":"13148073","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jonchang has commented on the revision \"HIVE-2532 [jira] Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.\".\n\nINLINE COMMENTS\n  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java:144 Really?  Jeebus.\n\nREVISION DETAIL\n  https://reviews.facebook.net/D273\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-10T22:41:51.614+0000","updated":"2011-11-10T22:41:51.614+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13148074","id":"13148074","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jsichi has commented on the revision \"HIVE-2532 [jira] Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.\".\n\nINLINE COMMENTS\n  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java:144 & is eager; && short-circuits\n\nREVISION DETAIL\n  https://reviews.facebook.net/D273\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-10T22:41:52.170+0000","updated":"2011-11-10T22:41:52.170+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13148077","id":"13148077","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jonchang updated the revision \"HIVE-2532 [jira] Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.\".\nReviewers: JIRA, jsichi\n\n  & -> &&\n\nREVISION DETAIL\n  https://reviews.facebook.net/D273\n\nAFFECTED FILES\n  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeEvaluator.java\n  ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java\n  ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java\n  ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAssertTrue.java\n  ql/src/test/queries/clientnegative/udf_assert_true.q\n  ql/src/test/queries/clientnegative/udf_assert_true2.q\n  ql/src/test/results/clientnegative/udf_assert_true.q.out\n  ql/src/test/results/clientnegative/udf_assert_true2.q.out\n  ql/src/test/results/clientpositive/show_functions.q.out\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-10T22:43:51.394+0000","updated":"2011-11-10T22:43:51.394+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13148096","id":"13148096","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jsichi has commented on the revision \"HIVE-2532 [jira] Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.\".\n\n  OK I'll kick off tests.\n\nREVISION DETAIL\n  https://reviews.facebook.net/D273\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-10T23:13:51.436+0000","updated":"2011-11-10T23:13:51.436+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13148686","id":"13148686","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"+1, tests passed.  Can you grant ASF rights?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-11T19:36:08.017+0000","updated":"2011-11-11T19:36:08.017+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13148687","id":"13148687","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jsichi has accepted the revision \"HIVE-2532 [jira] Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.\".\n\n  spockwin\n\nREVISION DETAIL\n  https://reviews.facebook.net/D273\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-11T19:36:51.726+0000","updated":"2011-11-11T19:36:51.726+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13148699","id":"13148699","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"body":"jonchang has committed the revision \"HIVE-2532 [jira] Evaluation of non-deterministic/stateful UDFs should not be skipped even if constant oi is returned.\".\n\nREVISION DETAIL\n  https://reviews.facebook.net/D273\n\nCOMMIT\n  https://reviews.facebook.net/rHIVE1201035\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=phabricator%40reviews.facebook.net","name":"phabricator@reviews.facebook.net","key":"phabricator@reviews.facebook.net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phabricator","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-11T19:48:52.076+0000","updated":"2011-11-11T19:48:52.076+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13148702","id":"13148702","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"Committed to trunk, thanks Jonathan!  Also don't forget to update the wiki.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-11T19:49:19.599+0000","updated":"2011-11-11T19:49:19.599+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13148861","id":"13148861","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-h0.21 #1078 (See [https://builds.apache.org/job/Hive-trunk-h0.21/1078/])\n    HIVE-2532 [jira] Evaluation of non-deterministic/stateful UDFs should not be\nskipped even if constant oi is returned.\n(Jonathan Chang via jvs)\n\nSummary:\nHIVE-2532\n\nEven if constant oi is returned, these may have stateful/side-effect behavior\nand hence need to be called each cycle.\n\nTest Plan: EMPTY\n\nReviewers: JIRA, jsichi\n\nReviewed By: jsichi\n\nCC: ikabiljo, jonchang, jsichi\n\nDifferential Revision: 273\n\njvs : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1201035\nFiles : \n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeEvaluator.java\n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExprNodeGenericFuncEvaluator.java\n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FunctionRegistry.java\n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFAssertTrue.java\n* /hive/trunk/ql/src/test/queries/clientnegative/udf_assert_true.q\n* /hive/trunk/ql/src/test/queries/clientnegative/udf_assert_true2.q\n* /hive/trunk/ql/src/test/results/clientnegative/udf_assert_true.q.out\n* /hive/trunk/ql/src/test/results/clientnegative/udf_assert_true2.q.out\n* /hive/trunk/ql/src/test/results/clientpositive/show_functions.q.out\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-11T23:53:32.430+0000","updated":"2011-11-11T23:53:32.430+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13427133","id":"13427133","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rohithsharma","name":"rohithsharma","key":"rohithsharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rohith Sharma K S","active":true,"timeZone":"Australia/Sydney"},"body":"Hi,\nI have one doubt on ASSERT_TRUE() funtion. Currently ASSERT_TRUE() is returning NULL.Its PrimitiveType is VOID.Once query is executed in CLI mode, output of query prints NULL in console where as in JDBC client throw an exception(HIVE-3200).The serde implimentation for PrimitiveType VOID throw exception.\n\nCorrect me if I am wrong,\nFrom the user perspective I feel its better to return boolean value i.e TRUE instead of returning NULL. Please give your opinion..\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rohithsharma","name":"rohithsharma","key":"rohithsharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rohith Sharma K S","active":true,"timeZone":"Australia/Sydney"},"created":"2012-08-02T06:18:39.245+0000","updated":"2012-08-02T06:18:39.245+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13427197","id":"13427197","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jonchang","name":"jonchang","key":"jonchang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Chang","active":true,"timeZone":"Etc/UTC"},"body":"It's ok by me if you want to return a bool instead.  That being said, things should not crash if things are NULL (I think this was a recent regression and there's a JIRA open for it).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jonchang","name":"jonchang","key":"jonchang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Chang","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-02T09:27:57.979+0000","updated":"2012-08-02T09:27:57.979+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529282/comment/13427249","id":"13427249","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rohithsharma","name":"rohithsharma","key":"rohithsharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rohith Sharma K S","active":true,"timeZone":"Australia/Sydney"},"body":"I tested with changing implementation to boolean.All the positive scenario works fine. Whereas , \"SELECT 1 + assert_true FROM src\"  fails.\n\n{noformat}\n2012-08-02 16:34:31,173 ERROR ql.Driver (SessionState.java:printError(400)) - FAILED: Error in semantic analysis: Line 1:7 Wrong arguments '0': Unable to find a common class betweentypes int and boolean\norg.apache.hadoop.hive.ql.parse.SemanticException: Line 1:7 Wrong arguments '0': Unable to find a common class betweentypes int and boolean\n\tat org.apache.hadoop.hive.ql.parse.TypeCheckProcFactory$DefaultExprProcessor.process(TypeCheckProcFactory.java:896)\n\tat org.apache.hadoop.hive.ql.lib.DefaultRuleDispatcher.dispatch(DefaultRuleDispatcher.java:89)\n{noformat}\n\nWith string return type, \"SELECT 1 + assert_true FROM src\" query execution is successfull.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rohithsharma","name":"rohithsharma","key":"rohithsharma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rohith Sharma K S","active":true,"timeZone":"Australia/Sydney"},"created":"2012-08-02T11:43:48.652+0000","updated":"2012-08-02T11:43:48.652+0000"}],"maxResults":24,"total":24,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-2532/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0lkfj:"}}