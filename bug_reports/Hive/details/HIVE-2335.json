{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12517718","self":"https://issues.apache.org/jira/rest/api/2/issue/12517718","key":"HIVE-2335","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316178","id":"12316178","description":"released","name":"0.8.0","archived":false,"released":true,"releaseDate":"2011-12-16"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-08-02T23:18:27.136+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Aug 19 12:23:00 UTC 2011","customfield_12310420":"43499","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_1400513156_*|*_1_*:*_1_*:*_182965_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-08-19T04:18:32.735+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-2335/watchers","watchCount":0,"isWatching":false},"created":"2011-08-02T23:13:36.629+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=salbiz","name":"salbiz","key":"salbiz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Syed S. Albiz","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-12-16T23:56:33.643+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313710","id":"12313710","name":"Indexing"}],"timeoriginalestimate":null,"description":"The automatic index usage does not check whether or not the indexes are still up-to-date when generating the index queries. This can be addressed in two stages, the first is to add a check before generating the index query to ensure that the index is still valid. The next stage may be to add some sort of mode where indexes are automatically updated on table writes.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12489129","id":"12489129","filename":"HIVE-2335.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=salbiz","name":"salbiz","key":"salbiz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Syed S. Albiz","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-02T23:14:42.498+0000","size":27845,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12489129/HIVE-2335.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12490587","id":"12490587","filename":"HIVE-2335.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=salbiz","name":"salbiz","key":"salbiz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Syed S. Albiz","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-17T00:57:15.622+0000","size":34174,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12490587/HIVE-2335.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12490780","id":"12490780","filename":"HIVE-2335.3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=salbiz","name":"salbiz","key":"salbiz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Syed S. Albiz","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-18T10:07:54.933+0000","size":34226,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12490780/HIVE-2335.3.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"3817","customfield_12312823":null,"summary":"Indexes are still automatically queried when out of sync with their source tables","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=salbiz","name":"salbiz","key":"salbiz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Syed S. Albiz","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=salbiz","name":"salbiz","key":"salbiz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Syed S. Albiz","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12517718/comment/13078493","id":"13078493","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=salbiz","name":"salbiz","key":"salbiz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Syed S. Albiz","active":true,"timeZone":"Etc/UTC"},"body":"fix + testcases for the immediate solution of checking timestamps to ensure indexes are valid before generating the index queries.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=salbiz","name":"salbiz","key":"salbiz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Syed S. Albiz","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-02T23:14:42.517+0000","updated":"2011-08-02T23:14:42.517+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12517718/comment/13078495","id":"13078495","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=salbiz","name":"salbiz","key":"salbiz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Syed S. Albiz","active":true,"timeZone":"Etc/UTC"},"body":"This change will likely break the change introduced in HIVE-2138, so it will be smoother to have this one get in, and then modify the patch in 2138 to use a more robust testcase to ensure that indexes are actually used","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=salbiz","name":"salbiz","key":"salbiz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Syed S. Albiz","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-02T23:16:34.188+0000","updated":"2011-08-02T23:16:34.188+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12517718/comment/13078497","id":"13078497","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/1260/\n-----------------------------------------------------------\n\nReview request for hive, John Sichi, Yongqiang He, and Ning Zhang.\n\n\nSummary\n-------\n\nCheck the timestamps of the tables/partitions to ensure that they were not written to since the index was last generated\n\n\nThis addresses bug HIVE-2335.\n    https://issues.apache.org/jira/browse/HIVE-2335\n\n\nDiffs\n-----\n\n  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java 8295687 \n  ql/src/test/queries/clientpositive/index_stale.q PRE-CREATION \n  ql/src/test/queries/clientpositive/index_stale_partitioned.q PRE-CREATION \n  ql/src/test/results/clientpositive/index_stale.q.out PRE-CREATION \n  ql/src/test/results/clientpositive/index_stale_partitioned.q.out PRE-CREATION \n\nDiff: https://reviews.apache.org/r/1260/diff\n\n\nTesting\n-------\n\nadded index_stale.q and index_stale_partitioned.q to the testcase suite\n\n\nThanks,\n\nSyed\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-02T23:18:27.136+0000","updated":"2011-08-02T23:18:27.136+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12517718/comment/13086070","id":"13086070","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=salbiz","name":"salbiz","key":"salbiz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Syed S. Albiz","active":true,"timeZone":"Etc/UTC"},"body":"Ning pointed out that there was a race condition with the approach I was using, modified to store the timestamps of the base tables before we kick off the rebuild job.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=salbiz","name":"salbiz","key":"salbiz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Syed S. Albiz","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-17T00:57:15.700+0000","updated":"2011-08-17T00:57:15.700+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12517718/comment/13086072","id":"13086072","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/1260/\n-----------------------------------------------------------\n\n(Updated 2011-08-17 00:57:46.951422)\n\n\nReview request for hive, John Sichi, Yongqiang He, and Ning Zhang.\n\n\nChanges\n-------\n\nNing pointed out that there was a race condition with the approach I was using, modified to store the timestamps of the base tables before we kick off the rebuild job.\n\n\nSummary\n-------\n\nCheck the timestamps of the tables/partitions to ensure that they were not written to since the index was last generated\n\n\nThis addresses bug HIVE-2335.\n    https://issues.apache.org/jira/browse/HIVE-2335\n\n\nDiffs (updated)\n-----\n\n  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java 8295687 \n  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java 3054f76 \n  ql/src/java/org/apache/hadoop/hive/ql/plan/AlterIndexDesc.java cf20b89 \n  ql/src/test/queries/clientpositive/index_stale.q PRE-CREATION \n  ql/src/test/queries/clientpositive/index_stale_partitioned.q PRE-CREATION \n  ql/src/test/results/clientpositive/index_stale.q.out PRE-CREATION \n  ql/src/test/results/clientpositive/index_stale_partitioned.q.out PRE-CREATION \n\nDiff: https://reviews.apache.org/r/1260/diff\n\n\nTesting\n-------\n\nadded index_stale.q and index_stale_partitioned.q to the testcase suite\n\n\nThanks,\n\nSyed\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-17T00:59:27.434+0000","updated":"2011-08-17T00:59:27.434+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12517718/comment/13086722","id":"13086722","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"body":"+1, looks good.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-18T01:18:07.706+0000","updated":"2011-08-18T01:18:07.706+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12517718/comment/13086844","id":"13086844","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"body":"Can you fix the errors output by the new testcases?\n\n    [junit] Begin query: index_stale.q\n    [junit] Deleted file:/data/users/heyongqiang/hive-trunk-commit/build/ql/test/data/warehouse/temp\n    [junit] Deleted file:/data/users/heyongqiang/hive-trunk-commit/build/ql/test/data/warehouse/default__temp_temp_index__\n    [junit] Deleted file:/data/users/heyongqiang/hive-trunk-commit/build/ql/test/data/warehouse/temp\n    [junit] diff -a -I file: -I pfile: -I hdfs: -I /tmp/ -I invalidscheme: -I lastUpdateTime -I lastAccessTime -I [Oo]wner -I CreateTime -I LastAccessTime -I Location -I LOCATION ' -I transient_lastDdlTime -I last_modified_ -I java.lang.RuntimeException -I at org -I at sun -I at java -I at junit -I Caused by: -I LOCK_QUERYID: -I grantTime -I [.][.][.] [0-9]* more -I USING 'java -cp /data/users/heyongqiang/hive-trunk-commit/build/ql/test/logs/clientpositive/index_stale.q.out /data/users/heyongqiang/hive-trunk-commit/ql/src/test/results/clientpositive/index_stale.q.out\n    [junit] junit.framework.AssertionFailedError: Client execution results failed with error code = 1\n    [junit] See build/ql/tmp/hive.log, or try \"ant test ... -Dtest.silent=false\" to get more logs.\n    [junit] \tat junit.framework.Assert.fail(Assert.java:47)\n    [junit] \tat org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_stale(TestCliDriver.java:130)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    [junit] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    [junit] \tat java.lang.reflect.Method.invoke(Method.java:597)\n    [junit] \tat junit.framework.TestCase.runTest(TestCase.java:154)\n    [junit] \tat junit.framework.TestCase.runBare(TestCase.java:127)\n    [junit] \tat junit.framework.TestResult$1.protect(TestResult.java:106)\n    [junit] \tat junit.framework.TestResult.runProtected(TestResult.java:124)\n    [junit] \tat junit.framework.TestResult.run(TestResult.java:109)\n    [junit] \tat junit.framework.TestCase.run(TestCase.java:118)\n    [junit] \tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n    [junit] \tat junit.framework.TestSuite.run(TestSuite.java:203)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:422)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:931)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:785)\n    [junit] 29c29\n    [junit] < PREHOOK: type: ALTERINDEX_REBUILD\n    [junit] ---\n    [junit] > PREHOOK: type: QUERY\n    [junit] 33c33\n    [junit] < POSTHOOK: type: ALTERINDEX_REBUILD\n    [junit] ---\n    [junit] > POSTHOOK: type: QUERY\n    [junit] Exception: Client execution results failed with error code = 1\n    [junit] See build/ql/tmp/hive.log, or try \"ant test ... -Dtest.silent=false\" to get more logs.\n    [junit] Begin query: index_stale_partitioned.q\n    [junit] Deleted pfile:/data/users/heyongqiang/hive-trunk-commit/build/ql/test/data/warehouse/temp/foo=bar\n    [junit] Deleted pfile:/data/users/heyongqiang/hive-trunk-commit/build/ql/test/data/warehouse/default__temp_temp_index__/foo=bar\n    [junit] Deleted pfile:/data/users/heyongqiang/hive-trunk-commit/build/ql/test/data/warehouse/temp/foo=bar\n    [junit] diff -a -I file: -I pfile: -I hdfs: -I /tmp/ -I invalidscheme: -I lastUpdateTime -I lastAccessTime -I [Oo]wner -I CreateTime -I LastAccessTime -I Location -I LOCATION ' -I transient_lastDdlTime -I last_modified_ -I java.lang.RuntimeException -I at org -I at sun -I at java -I at junit -I Caused by: -I LOCK_QUERYID: -I grantTime -I [.][.][.] [0-9]* more -I USING 'java -cp /data/users/heyongqiang/hive-trunk-commit/build/ql/test/logs/clientpositive/index_stale_partitioned.q.out /data/users/heyongqiang/hive-trunk-commit/ql/src/test/results/clientpositive/index_stale_partitioned.q.out\n    [junit] junit.framework.AssertionFailedError: Client execution results failed with error code = 1\n    [junit] See build/ql/tmp/hive.log, or try \"ant test ... -Dtest.silent=false\" to get more logs.\n    [junit] \tat junit.framework.Assert.fail(Assert.java:47)\n    [junit] \tat org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_stale_partitioned(TestCliDriver.java:178)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    [junit] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    [junit] \tat java.lang.reflect.Method.invoke(Method.java:597)\n    [junit] \tat junit.framework.TestCase.runTest(TestCase.java:154)\n    [junit] \tat junit.framework.TestCase.runBare(TestCase.java:127)\n    [junit] \tat junit.framework.TestResult$1.protect(TestResult.java:106)\n    [junit] \tat junit.framework.TestResult.runProtected(TestResult.java:124)\n    [junit] \tat junit.framework.TestResult.run(TestResult.java:109)\n    [junit] \tat junit.framework.TestCase.run(TestCase.java:118)\n    [junit] \tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n    [junit] \tat junit.framework.TestSuite.run(TestSuite.java:203)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:422)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:931)\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:785)\n    [junit] 38c38\n    [junit] < PREHOOK: type: ALTERINDEX_REBUILD\n    [junit] ---\n    [junit] > PREHOOK: type: QUERY\n    [junit] 42c42\n    [junit] < POSTHOOK: type: ALTERINDEX_REBUILD\n    [junit] ---\n    [junit] > POSTHOOK: type: QUERY\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-18T07:12:12.367+0000","updated":"2011-08-18T07:12:12.367+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12517718/comment/13086925","id":"13086925","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=salbiz","name":"salbiz","key":"salbiz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Syed S. Albiz","active":true,"timeZone":"Etc/UTC"},"body":"Forgot to update after HIVE-2286 landed and changed all the indexing testcase outputs","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=salbiz","name":"salbiz","key":"salbiz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Syed S. Albiz","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-18T10:07:54.969+0000","updated":"2011-08-18T10:07:54.969+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12517718/comment/13086927","id":"13086927","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"body":"\n-----------------------------------------------------------\nThis is an automatically generated e-mail. To reply, visit:\nhttps://reviews.apache.org/r/1260/\n-----------------------------------------------------------\n\n(Updated 2011-08-18 10:08:30.148104)\n\n\nReview request for hive, John Sichi, Yongqiang He, and Ning Zhang.\n\n\nChanges\n-------\n\nupdated testcases\n\n\nSummary\n-------\n\nCheck the timestamps of the tables/partitions to ensure that they were not written to since the index was last generated\n\n\nThis addresses bug HIVE-2335.\n    https://issues.apache.org/jira/browse/HIVE-2335\n\n\nDiffs (updated)\n-----\n\n  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java 8295687 \n  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java 3054f76 \n  ql/src/java/org/apache/hadoop/hive/ql/plan/AlterIndexDesc.java cf20b89 \n  ql/src/test/queries/clientpositive/index_stale.q PRE-CREATION \n  ql/src/test/queries/clientpositive/index_stale_partitioned.q PRE-CREATION \n  ql/src/test/results/clientpositive/index_stale.q.out PRE-CREATION \n  ql/src/test/results/clientpositive/index_stale_partitioned.q.out PRE-CREATION \n\nDiff: https://reviews.apache.org/r/1260/diff\n\n\nTesting\n-------\n\nadded index_stale.q and index_stale_partitioned.q to the testcase suite\n\n\nThanks,\n\nSyed\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiraposter%40reviews.apache.org","name":"jiraposter@reviews.apache.org","key":"jiraposter@reviews.apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"jiraposter@reviews.apache.org","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-18T10:09:27.133+0000","updated":"2011-08-18T10:09:27.133+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12517718/comment/13087199","id":"13087199","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"body":"+1, running tests","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-18T19:06:07.127+0000","updated":"2011-08-18T19:06:07.127+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12517718/comment/13087519","id":"13087519","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"body":"committed, thanks Syed!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=he+yongqiang","name":"he yongqiang","key":"he yongqiang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"He Yongqiang","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-19T04:18:32.744+0000","updated":"2011-08-19T04:18:32.744+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12517718/comment/13087675","id":"13087675","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hive-trunk-h0.21 #905 (See [https://builds.apache.org/job/Hive-trunk-h0.21/905/])\n    HIVE-2335: Indexes are still automatically queried when out of sync with their source tables (Syed via He Yongqiang)\n\nheyongqiang : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1159499\nFiles : \n* /hive/trunk/ql/src/test/results/clientpositive/index_stale_partitioned.q.out\n* /hive/trunk/ql/src/test/queries/clientpositive/index_stale_partitioned.q\n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java\n* /hive/trunk/ql/src/test/results/clientpositive/index_stale.q.out\n* /hive/trunk/ql/src/test/queries/clientpositive/index_stale.q\n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java\n* /hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/AlterIndexDesc.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-19T12:23:00.961+0000","updated":"2011-08-19T12:23:00.961+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-2335/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i010bj:"}}