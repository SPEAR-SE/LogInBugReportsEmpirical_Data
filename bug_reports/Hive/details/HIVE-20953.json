{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13199756","self":"https://issues.apache.org/jira/rest/api/2/issue/13199756","key":"HIVE-20953","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12343343","id":"12343343","name":"4.0.0","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2018-11-21T08:32:05.143+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Dec 04 04:31:14 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_10252671_*|*_3_*:*_4_*:*_541008_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_5_*:*_1048489691","customfield_12312321":null,"resolutiondate":"2018-12-03T12:03:35.124+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-20953/watchers","watchCount":4,"isWatching":false},"created":"2018-11-21T05:48:51.778+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["pull-request-available"],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"6.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":86400,"aggregatetimeoriginalestimate":86400,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12343343","id":"12343343","name":"4.0.0","archived":false,"released":false}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-12-04T04:31:14.020+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12317406","id":"12317406","name":"Tests"}],"timeoriginalestimate":86400,"description":"The testcase is intended to test REPL LOAD with retry. The test creates a partitioned table and a function in the source database and loads those to the replica. The first attempt to load a dump is intended to fail while loading one of the partitions. Based on the order in which the objects get loaded, if the function is queued after the table, it will not be available in replica after the load failure. But if it's queued before the table, it will be available in replica even after the load failure. The test assumes the later case, which may not be true always.\r\n\r\nHence fix the testcase to order the objects by a fixed ordering. By setting hive.in.repl.test.files.sorted to true, the objects are ordered by the directory names. This ordering is available with minimal changes for testing, hence we use it. With this ordering a function gets loaded before a table. So changed the test to not expect the function to be available after the failed load, but be available after the retry.\r\n\r\nWhile writing that testcase, I found that even if a function fails to load, it's visible through show functions and also is available to be called just as if the failure has not happened. Digging further it was found that when creating a function we add it to the registry and also to the metastore. If the later fails, we do not clean it up from the registry and thus it remains visible after failure. Fixed the same.","customfield_10010":null,"timetracking":{"originalEstimate":"24h","remainingEstimate":"24h","originalEstimateSeconds":86400,"remainingEstimateSeconds":86400},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12343343","id":"12343343","name":"4.0.0","archived":false,"released":false}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12949007","id":"12949007","filename":"HIVE-20953.01","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-11-21T08:39:26.576+0000","size":3222,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12949007/HIVE-20953.01"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12949821","id":"12949821","filename":"HIVE-20953.02","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-11-28T10:29:49.207+0000","size":8048,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12949821/HIVE-20953.02"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12949122","id":"12949122","filename":"HIVE-20953.02","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abstractdog","name":"abstractdog","key":"abstractdog","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laszlo Bodor","active":true,"timeZone":"Etc/UTC"},"created":"2018-11-21T22:28:02.302+0000","size":3222,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12949122/HIVE-20953.02"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12950149","id":"12950149","filename":"HIVE-20953.03","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-11-30T10:47:09.033+0000","size":8383,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12950149/HIVE-20953.03"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12950123","id":"12950123","filename":"HIVE-20953.03","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-11-30T05:40:45.270+0000","size":8383,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12950123/HIVE-20953.03"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12949269","id":"12949269","filename":"test_func_load_failure_retry.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-11-23T09:32:11.221+0000","size":4487,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12949269/test_func_load_failure_retry.patch"}],"aggregatetimeestimate":86400,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Remove a function from function registry when it can not be added to the metastore when creating it.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":86400,"percent":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":86400,"percent":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16694385","id":"16694385","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user ashutosh-bapat opened a pull request:\n\n    https://github.com/apache/hive/pull/491\n\n    HIVE-20953: Fix testcase TestReplicationScenariosAcrossInstances#test…\n\n    Fix testcase TestReplicationScenariosAcrossInstances#testBootstrapReplLoadRetryAfterFailureForPartitions to not depend upon the order in which objects get loaded.\r\n    \r\n    @anishek or @maheshk114 can you please review the change?\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/ashutosh-bapat/hive hive20953\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/hive/pull/491.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #491\n    \n----\ncommit 5c9a72bd5f772b7cefdc86c397a7771c2059043a\nAuthor: Ashutosh Bapat <ashutosh.bapat.oss@...>\nDate:   2018-11-21T08:25:38Z\n\n    HIVE-20953: Fix testcase TestReplicationScenariosAcrossInstances#testBootstrapReplLoadRetryAfterFailureForPartitions to not depend upon the order in which objects get loaded\n    \n    Ashutosh Bapat\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2018-11-21T08:32:05.143+0000","updated":"2018-11-21T08:32:05.143+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16694550","id":"16694550","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n|| || || || {color:brown} master Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  8m 29s{color} | {color:green} master passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 38s{color} | {color:green} master passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 15s{color} | {color:green} master passed {color} |\r\n| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m 35s{color} | {color:blue} itests/hive-unit in master has 2 extant Findbugs warnings. {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 25s{color} | {color:green} master passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 38s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 38s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 38s{color} | {color:green} the patch passed {color} |\r\n| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red}  0m 15s{color} | {color:red} itests/hive-unit: The patch generated 2 new + 125 unchanged - 3 fixed = 127 total (was 128) {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  0m 44s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 21s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 12s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 13m 28s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Optional Tests |  asflicense  javac  javadoc  findbugs  checkstyle  compile  |\r\n| uname | Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u1 (2016-09-03) x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /data/hiveptest/working/yetus_PreCommit-HIVE-Build-15025/dev-support/hive-personality.sh |\r\n| git revision | master / 59d85d7 |\r\n| Default Java | 1.8.0_111 |\r\n| findbugs | v3.0.0 |\r\n| checkstyle | http://104.198.109.242/logs//PreCommit-HIVE-Build-15025/yetus/diff-checkstyle-itests_hive-unit.txt |\r\n| modules | C: itests/hive-unit U: itests/hive-unit |\r\n| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-15025/yetus.txt |\r\n| Powered by | Apache Yetus    http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-11-21T10:51:48.551+0000","updated":"2018-11-21T10:51:48.551+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16694589","id":"16694589","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12949007/HIVE-20953.01\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 15546 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[cbo_rp_limit] (batchId=171)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/15025/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/15025/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-15025/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.YetusPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 1 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12949007 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-11-21T11:45:17.738+0000","updated":"2018-11-21T11:45:17.738+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16695318","id":"16695318","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abstractdog","name":"abstractdog","key":"abstractdog","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laszlo Bodor","active":true,"timeZone":"Etc/UTC"},"body":"cbo_rp_limit is flaky, unrelated failure, uploaded 02 patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abstractdog","name":"abstractdog","key":"abstractdog","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Laszlo Bodor","active":true,"timeZone":"Etc/UTC"},"created":"2018-11-21T22:29:15.070+0000","updated":"2018-11-21T22:29:15.070+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16695371","id":"16695371","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n|| || || || {color:brown} master Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  7m 43s{color} | {color:green} master passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 42s{color} | {color:green} master passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 17s{color} | {color:green} master passed {color} |\r\n| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m 38s{color} | {color:blue} itests/hive-unit in master has 2 extant Findbugs warnings. {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 22s{color} | {color:green} master passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 38s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 36s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 36s{color} | {color:green} the patch passed {color} |\r\n| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red}  0m 16s{color} | {color:red} itests/hive-unit: The patch generated 2 new + 125 unchanged - 3 fixed = 127 total (was 128) {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  0m 44s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 24s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 12s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 12m 58s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Optional Tests |  asflicense  javac  javadoc  findbugs  checkstyle  compile  |\r\n| uname | Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u1 (2016-09-03) x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /data/hiveptest/working/yetus_PreCommit-HIVE-Build-15035/dev-support/hive-personality.sh |\r\n| git revision | master / ddf3b6c |\r\n| Default Java | 1.8.0_111 |\r\n| findbugs | v3.0.0 |\r\n| checkstyle | http://104.198.109.242/logs//PreCommit-HIVE-Build-15035/yetus/diff-checkstyle-itests_hive-unit.txt |\r\n| modules | C: itests/hive-unit U: itests/hive-unit |\r\n| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-15035/yetus.txt |\r\n| Powered by | Apache Yetus    http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-11-21T23:34:28.565+0000","updated":"2018-11-21T23:34:28.565+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16695419","id":"16695419","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12949122/HIVE-20953.02\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 15538 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.ql.TestTxnCommands.testMergeOnTezEdges (batchId=324)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/15035/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/15035/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-15035/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.YetusPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 1 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12949122 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-11-22T00:28:14.962+0000","updated":"2018-11-22T00:28:14.962+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16695538","id":"16695538","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maheshk114","name":"maheshk114","key":"maheshk114","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"mahesh kumar behera","active":true,"timeZone":"Asia/Kolkata"},"body":"[~ashutosh.bapat]\r\n\r\ncan the function name be changed so that the function is loaded before partitions ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maheshk114","name":"maheshk114","key":"maheshk114","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"mahesh kumar behera","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-11-22T04:14:18.372+0000","updated":"2018-11-22T04:14:18.372+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16695553","id":"16695553","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"body":"[~maheshk114], AFAIU, the functions are loaded as part of _functions directory which is loaded first so changing name of the function does not change the load sequence.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-11-22T04:43:50.530+0000","updated":"2018-11-22T04:43:50.530+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16696335","id":"16696335","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maheshk114","name":"maheshk114","key":"maheshk114","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"mahesh kumar behera","active":true,"timeZone":"Asia/Kolkata"},"body":"[~ashutosh.bapat]\r\n\r\n \r\n\r\nPlease check if adding one more function will make sure that function checkpoint can be tested  ? else leave it ..will do it as part of another Jira ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maheshk114","name":"maheshk114","key":"maheshk114","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"mahesh kumar behera","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-11-23T02:59:06.223+0000","updated":"2018-11-23T02:59:06.223+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16696565","id":"16696565","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"body":"[~maheshk114], I tried the attached patch [^test_func_load_failure_retry.patch] but it's failing at line 204 (in code). There it expects that only f1 will get loaded, but show functions lists both f1 and f2.\r\n\r\n \r\n\r\n2018-11-22T23:05:55,347 INFO [main] parse.TestReplicationScenarios: Expecting replicated_testBootstrapReplLoadRetryAfterFailureForFunctions_1542956751333.f1\r\n2018-11-22T23:05:55,347 INFO [main] parse.TestReplicationScenarios: Got [replicated_testbootstrapreplloadretryafterfailureforfunctions_1542956751333.f1, replicated_testbootstrapreplloadretryafterfailureforfunctions_1542956751333.f2]\r\n\r\nFrom logs I can see that an exception is thrown while loading f2 as expected\r\n\r\n2018-11-22T23:05:55,270 WARN [pool-26-thread-7] parse.TestReplicationScenarios: Verified - Function : f2\r\n2018-11-22T23:05:55,273 DEBUG [pool-26-thread-7] pool.PoolBase: HikariPool-1 - Reset (autoCommit) on connection org.apache.derby.impl.jdbc.EmbedConnection@46773139 (XID = 166), (SESSIONID = 1), (DATABASE = memory:/work/hive20953/cr/itests/hive-unit/target/tmp/APP), (DRDAID = null)\r\n2018-11-22T23:05:55,276 ERROR [pool-26-thread-7] metastore.RetryingHMSHandler: MetaException(message:InjectableBehaviourObjectStore: Invalid Create Function operation on DB: replicated_testBootstrapReplLoadRetryAfterFailureForFunctions_1542956751333 function: f2)\r\n at org.apache.hadoop.hive.metastore.InjectableBehaviourObjectStore.createFunction(InjectableBehaviourObjectStore.java:227)\r\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n at java.lang.reflect.Method.invoke(Method.java:498)\r\n\r\nSo far I don't have any clue as to why both the functions are seen on the replica even when the load has failed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-11-23T09:32:14.422+0000","updated":"2018-11-23T09:32:14.422+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16697041","id":"16697041","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12949269/test_func_load_failure_retry.patch\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 2 failed/errored test(s), 15541 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.ql.parse.TestReplAcrossInstancesWithJsonMessageFormat.testBootstrapReplLoadRetryAfterFailureForFunctions (batchId=251)\norg.apache.hadoop.hive.ql.parse.TestReplicationScenariosAcrossInstances.testBootstrapReplLoadRetryAfterFailureForFunctions (batchId=247)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/15047/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/15047/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-15047/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.YetusPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 2 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12949269 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-11-23T12:01:33.352+0000","updated":"2018-11-23T12:01:33.352+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16701676","id":"16701676","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"body":"The latest patch has two additions\r\n # A testcase to test whether retry after load failure works when a function fails to load.\r\n # While writing that testcase, I found that even if a function fails to load, it's visible through show functions and also is available to be called just as if the failure has not happened. Digging further it was found that when creating a function we add it to the registry and also to the metastore. If the later fails, we do not clean it up from the registry and thus it remains visible after failure. Fixed the same.\r\n\r\n[~maheshk114] can you please review the changes?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-11-28T10:30:05.174+0000","updated":"2018-11-28T10:31:20.565+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16701832","id":"16701832","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n|| || || || {color:brown} master Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  1m 31s{color} | {color:blue} Maven dependency ordering for branch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  6m 31s{color} | {color:green} master passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m 43s{color} | {color:green} master passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 54s{color} | {color:green} master passed {color} |\r\n| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  3m 45s{color} | {color:blue} ql in master has 2312 extant Findbugs warnings. {color} |\r\n| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m 36s{color} | {color:blue} itests/hive-unit in master has 2 extant Findbugs warnings. {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 15s{color} | {color:green} master passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 25s{color} | {color:blue} Maven dependency ordering for patch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  1m 59s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m 41s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  1m 41s{color} | {color:green} the patch passed {color} |\r\n| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red}  0m 16s{color} | {color:red} itests/hive-unit: The patch generated 18 new + 125 unchanged - 3 fixed = 143 total (was 128) {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  4m 37s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 15s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 13s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 27m 55s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Optional Tests |  asflicense  javac  javadoc  findbugs  checkstyle  compile  |\r\n| uname | Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u1 (2016-09-03) x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /data/hiveptest/working/yetus_PreCommit-HIVE-Build-15094/dev-support/hive-personality.sh |\r\n| git revision | master / a070a9d |\r\n| Default Java | 1.8.0_111 |\r\n| findbugs | v3.0.0 |\r\n| checkstyle | http://104.198.109.242/logs//PreCommit-HIVE-Build-15094/yetus/diff-checkstyle-itests_hive-unit.txt |\r\n| modules | C: ql itests/hive-unit U: . |\r\n| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-15094/yetus.txt |\r\n| Powered by | Apache Yetus    http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-11-28T12:50:57.906+0000","updated":"2018-11-28T12:50:57.906+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16701875","id":"16701875","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12949821/HIVE-20953.02\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 46 failed/errored test(s), 15630 tests executed\n*Failed tests:*\n{noformat}\nTestMiniLlapCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=154)\n\t[intersect_all.q,unionDistinct_1.q,table_nonprintable.q,orc_llap_counters1.q,mm_cttas.q,whroot_external1.q,global_limit.q,cte_2.q,rcfile_createas1.q,dynamic_partition_pruning_2.q,intersect_merge.q,results_cache_diff_fs.q,cttl.q,parallel_colstats.q,load_hdfs_file_with_space_in_the_name.q]\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testAlterPartition (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testAlterTable (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testAlterTableCascade (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testAlterViewParititon (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testColumnStatistics (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testComplexTable (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testComplexTypeApi (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testConcurrentMetastores (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testCreateAndGetTableWithDriver (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testCreateTableSettingId (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testDBLocationChange (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testDBOwner (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testDBOwnerChange (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testDatabase (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testDatabaseLocation (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testDatabaseLocationWithPermissionProblems (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testDropDatabaseCascadeMVMultiDB (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testDropTable (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testFilterLastPartition (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testFilterSinglePartition (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testFunctionWithResources (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testGetConfigValue (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testGetMetastoreUuid (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testGetPartitionsWithSpec (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testGetSchemaWithNoClassDefFoundError (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testGetTableObjects (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testGetUUIDInParallel (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testJDOPersistanceManagerCleanup (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testListPartitionNames (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testListPartitions (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testListPartitionsWihtLimitEnabled (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testNameMethods (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testPartition (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testPartitionFilter (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testRenamePartition (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testRetriableClientWithConnLifetime (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testSimpleFunction (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testSimpleTable (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testSimpleTypeApi (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testStatsFastTrivial (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testSynchronized (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testTableDatabase (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testTableFilter (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testUpdatePartitionStat_doesNotUpdateStats (batchId=232)\norg.apache.hadoop.hive.metastore.TestRemoteHiveMetaStoreZKBindHost.testValidateTableCols (batchId=232)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/15094/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/15094/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-15094/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.YetusPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 46 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12949821 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-11-28T13:29:53.198+0000","updated":"2018-11-28T13:29:53.198+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16702771","id":"16702771","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"body":"Patch addressing review comments from [~maheshk114] and some checkstyle notices. Also updated PR with a new commit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-11-29T06:31:43.902+0000","updated":"2018-11-29T06:31:43.902+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16704349","id":"16704349","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n|| || || || {color:brown} master Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  1m 38s{color} | {color:blue} Maven dependency ordering for branch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  6m 32s{color} | {color:green} master passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m 36s{color} | {color:green} master passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 52s{color} | {color:green} master passed {color} |\r\n| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  3m 44s{color} | {color:blue} ql in master has 2312 extant Findbugs warnings. {color} |\r\n| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m 36s{color} | {color:blue} itests/hive-unit in master has 2 extant Findbugs warnings. {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 15s{color} | {color:green} master passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 25s{color} | {color:blue} Maven dependency ordering for patch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  1m 57s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m 37s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  1m 37s{color} | {color:green} the patch passed {color} |\r\n| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red}  0m 17s{color} | {color:red} itests/hive-unit: The patch generated 2 new + 125 unchanged - 3 fixed = 127 total (was 128) {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  4m 32s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 15s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 13s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 27m 41s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Optional Tests |  asflicense  javac  javadoc  findbugs  checkstyle  compile  |\r\n| uname | Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u1 (2016-09-03) x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /data/hiveptest/working/yetus_PreCommit-HIVE-Build-15126/dev-support/hive-personality.sh |\r\n| git revision | master / 8411ea5 |\r\n| Default Java | 1.8.0_111 |\r\n| findbugs | v3.0.0 |\r\n| checkstyle | http://104.198.109.242/logs//PreCommit-HIVE-Build-15126/yetus/diff-checkstyle-itests_hive-unit.txt |\r\n| modules | C: ql itests/hive-unit U: . |\r\n| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-15126/yetus.txt |\r\n| Powered by | Apache Yetus    http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-11-30T07:12:27.190+0000","updated":"2018-11-30T07:12:27.190+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16704372","id":"16704372","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12950123/HIVE-20953.03\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 2 failed/errored test(s), 15641 tests executed\n*Failed tests:*\n{noformat}\nTestMiniDruidCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=196)\n\t[druidmini_dynamic_partition.q,druidmini_test1.q,druidkafkamini_basic.q,druidmini_test_insert.q,druidkafkamini_delimited.q]\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[vector_outer_join4] (batchId=192)\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/15126/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/15126/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-15126/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.YetusPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 2 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12950123 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-11-30T07:50:40.619+0000","updated":"2018-11-30T07:50:40.619+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16704562","id":"16704562","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"body":"Reattaching the patch to trigger ptests since the failed are failing erratically for previous builds as well. The checkstyle notice is an existing one but shows up here since the patch changes those lines. We can not fix that notice without fixing indentation of surrounding lines, which might cause merge issues in case those change later. Hence not fixing the checkstyle notice.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashutosh.bapat","name":"ashutosh.bapat","key":"ashutosh.bapat","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashutosh.bapat&avatarId=36785","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashutosh.bapat&avatarId=36785","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashutosh.bapat&avatarId=36785","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashutosh.bapat&avatarId=36785"},"displayName":"Ashutosh Bapat","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-11-30T10:49:10.113+0000","updated":"2018-11-30T10:49:10.113+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16704785","id":"16704785","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n|| || || || {color:brown} master Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  1m 30s{color} | {color:blue} Maven dependency ordering for branch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  6m 33s{color} | {color:green} master passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m 39s{color} | {color:green} master passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 51s{color} | {color:green} master passed {color} |\r\n| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  3m 39s{color} | {color:blue} ql in master has 2312 extant Findbugs warnings. {color} |\r\n| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m 37s{color} | {color:blue} itests/hive-unit in master has 2 extant Findbugs warnings. {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 16s{color} | {color:green} master passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 26s{color} | {color:blue} Maven dependency ordering for patch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  1m 57s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m 39s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green}  1m 39s{color} | {color:green} the patch passed {color} |\r\n| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red}  0m 16s{color} | {color:red} itests/hive-unit: The patch generated 2 new + 125 unchanged - 3 fixed = 127 total (was 128) {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  4m 33s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 18s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 13s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 27m 42s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Optional Tests |  asflicense  javac  javadoc  findbugs  checkstyle  compile  |\r\n| uname | Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u1 (2016-09-03) x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /data/hiveptest/working/yetus_PreCommit-HIVE-Build-15130/dev-support/hive-personality.sh |\r\n| git revision | master / 270dfa3 |\r\n| Default Java | 1.8.0_111 |\r\n| findbugs | v3.0.0 |\r\n| checkstyle | http://104.198.109.242/logs//PreCommit-HIVE-Build-15130/yetus/diff-checkstyle-itests_hive-unit.txt |\r\n| modules | C: ql itests/hive-unit U: . |\r\n| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-15130/yetus.txt |\r\n| Powered by | Apache Yetus    http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-11-30T14:15:26.776+0000","updated":"2018-11-30T14:15:26.776+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16704848","id":"16704848","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12950149/HIVE-20953.03\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:green}SUCCESS:{color} +1 due to 15646 tests passed\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/15130/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/15130/console\nTest logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-15130/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.YetusPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12950149 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2018-11-30T14:54:14.959+0000","updated":"2018-11-30T14:54:14.959+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16707087","id":"16707087","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maheshk114","name":"maheshk114","key":"maheshk114","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"mahesh kumar behera","active":true,"timeZone":"Asia/Kolkata"},"body":"[^HIVE-20953.03] committed to master. Thanks  [~ashutosh.bapat].","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maheshk114","name":"maheshk114","key":"maheshk114","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"mahesh kumar behera","active":true,"timeZone":"Asia/Kolkata"},"created":"2018-12-03T12:03:17.171+0000","updated":"2018-12-03T12:03:17.171+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13199756/comment/16708183","id":"16708183","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user ashutosh-bapat closed the pull request at:\n\n    https://github.com/apache/hive/pull/491\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2018-12-04T04:31:14.020+0000","updated":"2018-12-04T04:31:14.020+0000"}],"maxResults":22,"total":22,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-20953/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|s00q2o:"}}