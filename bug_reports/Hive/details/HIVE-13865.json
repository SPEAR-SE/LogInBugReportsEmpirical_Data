{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12973147","self":"https://issues.apache.org/jira/rest/api/2/issue/12973147","key":"HIVE-13865","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/10004","id":"10004","description":"Not A Bug","name":"Not A Bug"},"customfield_12312322":null,"customfield_12310220":"2016-06-02T20:56:13.708+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Jun 02 20:56:13 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_616580178_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2016-06-02T21:13:35.241+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-13865/watchers","watchCount":2,"isWatching":false},"created":"2016-05-26T17:57:15.106+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12332384","id":"12332384","name":"1.2.1","archived":false,"released":true,"releaseDate":"2015-06-26"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-06-02T21:13:35.275+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Creating a orc table with char(16) column and insert some value with white space followed by characters:\n{noformat}\n0: jdbc:hive2://os-r6-ifsmes-hiveserver2-11-4> create table test (c char(16)) stored as orc;\nNo rows affected (0.1 seconds)\n0: jdbc:hive2://os-r6-ifsmes-hiveserver2-11-4> insert into table test values ('horton works     ');\nINFO  : Tez session hasn't been created yet. Opening session\nINFO  : Dag name: insert into table test values ('horton ...')(Stage-1)\nINFO  :\n\nINFO  : Status: Running (Executing on YARN cluster with App id application_1464222003837_0399)\n\nINFO  : Map 1: -/-\nINFO  : Map 1: 0/1\nINFO  : Map 1: 0/1\nINFO  : Map 1: 0/1\nINFO  : Map 1: 0(+1)/1\nINFO  : Map 1: 0(+1)/1\nINFO  : Map 1: 1/1\nINFO  : Loading data to table default.test from hdfs://os-r6-ifsmes-hiveserver2-11-5.openstacklocal:8020/apps/hive/warehouse/test/.hive-staging_hive_2016-05-26_17-43-07_098_2458959255563595485-1/-ext-10000\nINFO  : Table default.test stats: [numFiles=1, numRows=1, totalSize=267, rawDataSize=100]\nNo rows affected (25.125 seconds)\n0: jdbc:hive2://os-r6-ifsmes-hiveserver2-11-4> select * from test;\n+-------------------+--+\n|      test.c       |\n+-------------------+--+\n| horton works      |\n+-------------------+--+\n1 row selected (0.077 seconds)\n0: jdbc:hive2://os-r6-ifsmes-hiveserver2-11-4> describe test;\n+-----------+------------+----------+--+\n| col_name  | data_type  | comment  |\n+-----------+------------+----------+--+\n| c         | char(16)   |          |\n+-----------+------------+----------+--+\n1 row selected (0.153 seconds)\n{noformat}\n\nThen after changing the column to string, the white space is lost:\n{noformat}\n0: jdbc:hive2://os-r6-ifsmes-hiveserver2-11-4> alter table test change column c c string;\nNo rows affected (0.155 seconds)\n0: jdbc:hive2://os-r6-ifsmes-hiveserver2-11-4> describe test;\n+-----------+------------+----------+--+\n| col_name  | data_type  | comment  |\n+-----------+------------+----------+--+\n| c         | string     |          |\n+-----------+------------+----------+--+\n1 row selected (0.115 seconds)\n0: jdbc:hive2://os-r6-ifsmes-hiveserver2-11-4> select * from test;\n+---------------+--+\n|    test.c     |\n+---------------+--+\n| horton works  |\n+---------------+--+\n1 row selected (0.068 seconds)\n{noformat}\n\nThe issue is not seen with textfile formatted table:\n{noformat}\n0: jdbc:hive2://os-r6-ifsmes-hiveserver2-11-4> create table test_text (c char(16)) stored as textfile;\nNo rows affected (0.091 seconds)\n0: jdbc:hive2://os-r6-ifsmes-hiveserver2-11-4> insert into table test_text values ('horton works     ');\nINFO  : Session is already open\nINFO  : Dag name: insert into table test_text values ('ho...')(Stage-1)\nINFO  :\n\nINFO  : Status: Running (Executing on YARN cluster with App id application_1464222003837_0399)\n\nINFO  : Map 1: 0/1\nINFO  : Map 1: 0(+1)/1\nINFO  : Map 1: 1/1\nINFO  : Loading data to table default.test_text from hdfs://os-r6-ifsmes-hiveserver2-11-5.openstacklocal:8020/apps/hive/warehouse/test_text/.hive-staging_hive_2016-05-26_17-45-29_669_2888061873550824337-1/-ext-10000\nINFO  : Table default.test_text stats: [numFiles=1, numRows=1, totalSize=17, rawDataSize=16]\nNo rows affected (6.849 seconds)\n0: jdbc:hive2://os-r6-ifsmes-hiveserver2-11-4> select * from test_text;\n+-------------------+--+\n|    test_text.c    |\n+-------------------+--+\n| horton works      |\n+-------------------+--+\n1 row selected (0.098 seconds)\n0: jdbc:hive2://os-r6-ifsmes-hiveserver2-11-4> describe test_text;\n+-----------+------------+----------+--+\n| col_name  | data_type  | comment  |\n+-----------+------------+----------+--+\n| c         | char(16)   |          |\n+-----------+------------+----------+--+\n1 row selected (0.127 seconds)\n0: jdbc:hive2://os-r6-ifsmes-hiveserver2-11-4> alter table test_text change column c c string;\nNo rows affected (0.145 seconds)\n0: jdbc:hive2://os-r6-ifsmes-hiveserver2-11-4> describe test_text;\n+-----------+------------+----------+--+\n| col_name  | data_type  | comment  |\n+-----------+------------+----------+--+\n| c         | string     |          |\n+-----------+------------+----------+--+\n1 row selected (0.127 seconds)\n0: jdbc:hive2://os-r6-ifsmes-hiveserver2-11-4> select * from test_text;\n+-------------------+--+\n|    test_text.c    |\n+-------------------+--+\n| horton works      |\n+-------------------+--+\n1 row selected (0.066 seconds)\n{noformat}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12332384","id":"12332384","name":"1.2.1","archived":false,"released":true,"releaseDate":"2015-06-26"}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Changing char column of orc table to string/var char drops white space. ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taksaito","name":"taksaito","key":"taksaito","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Takahiko Saito","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=taksaito","name":"taksaito","key":"taksaito","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10438","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10438","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10438","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10438"},"displayName":"Takahiko Saito","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12973147/comment/15313041","id":"15313041","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"body":"You can think of these situations as being like a CAST.\n\nLet's say the old column char1 (type CHAR(50)) had its data type changed to STRING or VARCHAR(50).\nThen changing the column data type is as if an implicit CAST has been added like:\n\nCAST(char1 as STRING) or CAST(char1 as VARCHAR(50))\n\nI think those casts drop trailing white space.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmccline","name":"mmccline","key":"mmccline","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mmccline&avatarId=36046","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mmccline&avatarId=36046","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mmccline&avatarId=36046","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mmccline&avatarId=36046"},"displayName":"Matt McCline","active":true,"timeZone":"America/Chicago"},"created":"2016-06-02T20:56:13.708+0000","updated":"2016-06-02T20:56:13.708+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-13865/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2yjyv:"}}