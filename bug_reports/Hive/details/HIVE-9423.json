{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12768793","self":"https://issues.apache.org/jira/rest/api/2/issue/12768793","key":"HIVE-9423","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12335838","id":"12335838","description":"Maintenance branch for 2.1 ","name":"2.1.1","archived":false,"released":true,"releaseDate":"2016-12-08"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335837","id":"12335837","name":"2.2.0","archived":false,"released":true,"releaseDate":"2017-07-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2016-09-20T14:29:45.758+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sun Oct 02 01:53:39 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_52743599042_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_753781383","customfield_12312321":null,"resolutiondate":"2016-10-01T01:34:39.985+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-9423/watchers","watchCount":10,"isWatching":false},"created":"2015-01-20T21:11:40.658+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"7.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324312","id":"12324312","description":"released","name":"0.12.0","archived":false,"released":true,"releaseDate":"2013-10-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324986","id":"12324986","description":"released","name":"0.13.0","archived":false,"released":true,"releaseDate":"2014-04-21"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326450","id":"12326450","description":"released","name":"0.14.0","archived":false,"released":true,"releaseDate":"2014-11-12"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12328723","id":"12328723","description":"","name":"0.15.0","archived":false,"released":false}],"issuelinks":[{"id":"12481565","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12481565","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"13007975","key":"HIVE-14847","self":"https://issues.apache.org/jira/rest/api/2/issue/13007975","fields":{"summary":"HiveServer2: Implement some admission control mechanism for graceful degradation when resources are exhausted","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12481831","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12481831","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"13009095","key":"HIVE-14874","self":"https://issues.apache.org/jira/rest/api/2/issue/13009095","fields":{"summary":"Master: Update errata.txt for the missing JIRA number in HIVE-9423 commit msg","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/5","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/trivial.svg","name":"Trivial","id":"5"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-12-08T14:39:02.875+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12320408","id":"12320408","name":"HiveServer2","description":"Tracks issues related to HiveServer2"}],"timeoriginalestimate":null,"description":"After verifying that the original problem is mostly solved by the Thrift upgrade, I created a patch to provide better error message when possible\n\nOriginal description for reference:\n---------------------------------------\nAn example of where it is needed: it has been reported that when # of client connections is greater than   {{hive.server2.thrift.max.worker.threads}}, HiveServer2 stops accepting new connections and ends up having to be restarted. This should be handled more gracefully by the server and the JDBC driver, so that the end user gets aware of the problem and can take appropriate steps (either close existing connections or bump of the config value or use multiple server instances with dynamic service discovery enabled). Similarly, we should also review the behaviour of background thread pool to have a well defined behavior on the the pool getting exhausted. \n\nIdeally implementing some form of general admission control will be a better solution, so that we do not accept new work unless sufficient resources are available and display graceful degradation under overload.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12829598","id":"12829598","filename":"HIVE-9423.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-21T15:11:22.713+0000","size":5512,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12829598/HIVE-9423.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12829789","id":"12829789","filename":"HIVE-9423.3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-22T08:11:12.880+0000","size":5501,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12829789/HIVE-9423.3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12829872","id":"12829872","filename":"HIVE-9423.4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-22T15:19:16.064+0000","size":5590,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12829872/HIVE-9423.4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12830462","id":"12830462","filename":"HIVE-9423.5.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-27T08:25:22.620+0000","size":5605,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12830462/HIVE-9423.5.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12830906","id":"12830906","filename":"HIVE-9423.5-branch-2.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-29T15:43:39.507+0000","size":5714,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12830906/HIVE-9423.5-branch-2.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12830914","id":"12830914","filename":"HIVE-9423.6-branch-2.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-29T16:22:46.135+0000","size":6404,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12830914/HIVE-9423.6-branch-2.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12829406","id":"12829406","filename":"HIVE-9423.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-20T16:10:48.831+0000","size":2501,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12829406/HIVE-9423.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"HiveServer2: Provide the user with different error messages depending on the Thrift client exception code","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15506729","id":"15506729","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"I have investigated the issue, and here is what I found:\n- There was an issue in the Thrift code, that if there was not enough executor, then the TTheadPoolExecutor stuck in an infinite loop see: THRIFT-2046. This issue is resolved in Thrift 0.9.2\n- Hive 1.x, 2.x uses Thrift 0.9.3.\n\nI have tested the behavior on Hive 2.2.0-SNAPSHOT with the following configuration:\n- Add the following lines to hive-site.xml:\n{code}\n<property>\n  <name>hive.server2.thrift.max.worker.threads</name>\n  <value>1</value>\n</property>\n<property>\n  <name>hive.server2.thrift.min.worker.threads</name>\n  <value>1</value>\n</property>\n{code}\n- Start a metastore, and a HS2 instance\n- Start 2 BeeLine, and connect to the HS2\n\nThe 1st BeeLine connected as expected, the 2nd BeeLine after the configured timeout period (default 20s) printed out the following:\n{code}\nConnecting to jdbc:hive2://localhost:10000\n16/09/20 16:23:57 [main]: WARN jdbc.HiveConnection: Failed to connect to localhost:10000\nHS2 may be unavailable, check server status\nError: Could not open client transport with JDBC Uri: jdbc:hive2://localhost:10000: null (state=08S01,code=0)\nBeeline version 2.2.0-SNAPSHOT by Apache Hive\nbeeline> \n{code}\n\nThis is behavior is much better than the original problem (no HS2 restart is needed, and closing unused connections helps), but this is not a perfect solution, since there is no difference between a non-running HS2, and a HS2 with exhausted executor pool.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-20T14:29:45.758+0000","updated":"2016-09-20T14:29:45.758+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15506984","id":"15506984","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"THRIFT-2046 handles connection overflow with closing the connection without writing any data into it. See:\n{code}\n            if (t instanceof RejectedExecutionException) {\n              retryCount++;\n              try {\n                if (remainTimeInMillis > 0) {\n                  //do a truncated 20 binary exponential backoff sleep\n[..]\n                } else {\n                  client.close();\n                  wp = null;\n                  LOGGER.warn(\"Task has been rejected by ExecutorService \" + retryCount\n                      + \" times till timedout, reason: \" + t);\n                  break;\n                }\n              }\n{code}\n\nOn the client side this generates a TTransportException in TIOStreamTransport.java with specific types, which helps us to differentiate between the cases.\n\nSo in the proposed solution we could print different error message, when the connection pool is exhausted, and when the connection is not available, etc.\n\nWhat do you think about the proposed solution [~aihuaxu], [~ctang.ma], [~ngangam]?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-20T16:10:49.546+0000","updated":"2016-09-20T16:10:49.546+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15509971","id":"15509971","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"body":"OK. So no restart is needed any more? Yeah. What you proposed looks good to me. It would be good if we can show the message to the user by replacing 'null' in the following message with the failed reason. \n\n{{Error: Could not open client transport with JDBC Uri: jdbc:hive2://localhost:10000: null}} ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-21T13:52:43.354+0000","updated":"2016-09-21T13:52:43.354+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15510234","id":"15510234","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"This is the output of my not yet uploaded patch :)\n{code}\nConnecting to jdbc:hive2://localhost:10000\nUnexpected end of file when reading from HS2 server. The root cause might be too high concurrent number of connections. Please check the number of active connections, and adjust hive.server2.thrift.max.worker.threads is applicable\nError: Could not open client transport with JDBC Uri: jdbc:hive2://localhost:10000:null (state=08S01,code=0)\nBeeline version 2.2.0-SNAPSHOT by Apache Hive\nbeeline> \n{code}\n\nThe 'null' is because of the general exception logging, and the TIOStreamTransport.java in Thrift 0.9.3 throws an exception without a message this case, and in the HiveConnection.java the root exception message is added to the message of the thrown exception. Shall I change HiveConnection.java, to add the message only if it is not null?\n\nThanks,\nPeter","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-21T15:10:55.742+0000","updated":"2016-09-21T15:10:55.742+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15510236","id":"15510236","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"Unit test added to check the printed message","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-21T15:11:22.748+0000","updated":"2016-09-21T15:11:22.748+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15510256","id":"15510256","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"[~leftylev]: Could you please review the error messages for English correctness?\n\nThanks,\nPeter","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-21T15:18:02.423+0000","updated":"2016-09-21T15:18:02.423+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15510334","id":"15510334","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"body":"I see. Yeah. Seems good to add the meaningful message for your case if it's null. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-21T15:45:04.851+0000","updated":"2016-09-21T15:45:04.851+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15510911","id":"15510911","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"body":"For hs2-unexpected-end-of-file, I suggest two changes:\n\n* \"too high concurrent number of connections\" -> \"too many concurrent connections\"\n* \"is applicable.\" -> \"if applicable.\"\n\nFor hs2-could-not-open-connection, the comma in the second sentence isn't needed (but it does no harm so keep it if you like).\n\nFor hs2-unknown-connection-problem & hs2-unexpected-error, Thrift should have an initial capital letter.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"created":"2016-09-21T19:28:50.573+0000","updated":"2016-09-21T19:28:50.573+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15512560","id":"15512560","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"Addressed [~leftylev]'s and [~zsombor.klara]'s comments.\n\nThanks for the review!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-22T08:11:12.884+0000","updated":"2016-09-22T08:11:12.884+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15512563","id":"15512563","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"Forgot to press \"Submit patch\" :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-22T08:11:39.513+0000","updated":"2016-09-22T08:11:39.513+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15513077","id":"15513077","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12829789/HIVE-9423.3.patch\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 6 failed/errored test(s), 10556 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[acid_mapjoin]\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[ctas]\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_join_part_col_char]\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainuser_3]\norg.apache.hadoop.hive.metastore.TestMetaStoreMetrics.testMetaDataCounts\norg.apache.hive.jdbc.TestJdbcWithMiniHS2.testAddJarConstructorUnCaching\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/1270/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/1270/console\nTest logs: http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-Build-1270/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 6 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12829789 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2016-09-22T11:53:25.907+0000","updated":"2016-09-22T11:53:25.907+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15513088","id":"15513088","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"Test failures unrelated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-22T11:58:38.914+0000","updated":"2016-09-22T11:58:38.914+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15513263","id":"15513263","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"body":"The patch looks good to me. +1.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-22T13:09:29.225+0000","updated":"2016-09-22T13:09:29.225+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15513336","id":"15513336","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctang.ma","name":"ctang.ma","key":"ctang.ma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chaoyu Tang","active":true,"timeZone":"America/New_York"},"body":"[~pvary] I have a small question about the message and suggestion presented to Beeline user when they run into login timeout issue such as\n{code}\n+hs2-unexpected-end-of-file: Unexpected end of file when reading from HS2 server. The root \\\n+cause might be too many concurrent connections. Please check the number of active \\\n+connections, and adjust hive.server2.thrift.max.worker.threads if applicable.\n{code}\nDo you think that these Beeline user has the privilege to \"check the number of active connections, and adjust hive.server2.thrift.max.worker.threads if applicable\"","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctang.ma","name":"ctang.ma","key":"ctang.ma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chaoyu Tang","active":true,"timeZone":"America/New_York"},"created":"2016-09-22T13:45:16.389+0000","updated":"2016-09-22T13:45:16.389+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15513372","id":"15513372","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"[~ctang.ma] That is a good question! :)\nWhat about this messages:\n{code}\n+hs2-unexpected-end-of-file: Unexpected end of file when reading from HS2 server. The root \\\n+cause might be too many concurrent connections. Please ask the administrator to check the number \\\n+of active connections, and adjust hive.server2.thrift.max.worker.threads if applicable.\n+hs2-could-not-open-connection: Could not open connection to the HS2 server. Please check the \\\n+server URI and if the URI is correct, then ask the administrator to check the server status.\n{code}\n\nThanks,\nPeter","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-22T14:00:45.629+0000","updated":"2016-09-22T14:00:45.629+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15513451","id":"15513451","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctang.ma","name":"ctang.ma","key":"ctang.ma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chaoyu Tang","active":true,"timeZone":"America/New_York"},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctang.ma","name":"ctang.ma","key":"ctang.ma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chaoyu Tang","active":true,"timeZone":"America/New_York"},"created":"2016-09-22T14:32:51.295+0000","updated":"2016-09-22T14:32:51.295+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15513550","id":"15513550","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"Changed the messages according to [~ctang.ma] suggestion.\n\nThanks,\nPeter","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-22T15:19:16.077+0000","updated":"2016-09-22T15:19:16.077+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15513552","id":"15513552","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Could we update the JIRA title to reflect what the patch is actually doing? Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xuefuz","name":"xuefuz","key":"xuefuz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xuefu Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-22T15:19:50.591+0000","updated":"2016-09-22T15:19:50.591+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15513653","id":"15513653","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the patch [~pvary]. This issue has been a pain point for beeline users and more user-friendly error messages helps a lot. Patch looks good to me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vihangk1","name":"vihangk1","key":"vihangk1","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vihang Karajgaonkar","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-22T15:45:48.837+0000","updated":"2016-09-22T15:45:48.837+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15513905","id":"15513905","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12829872/HIVE-9423.4.patch\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 6 failed/errored test(s), 10556 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[acid_mapjoin]\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[ctas]\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_join_part_col_char]\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainuser_3]\norg.apache.hadoop.hive.metastore.TestMetaStoreMetrics.testMetaDataCounts\norg.apache.hive.jdbc.TestJdbcWithMiniHS2.testAddJarConstructorUnCaching\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/1274/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/1274/console\nTest logs: http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-Build-1274/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 6 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12829872 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2016-09-22T17:30:42.881+0000","updated":"2016-09-22T17:30:42.881+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15514219","id":"15514219","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"body":"+1 for the new error messages (patch 4)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"created":"2016-09-22T19:15:04.719+0000","updated":"2016-09-22T19:15:04.719+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15516278","id":"15516278","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctang.ma","name":"ctang.ma","key":"ctang.ma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chaoyu Tang","active":true,"timeZone":"America/New_York"},"body":"In some case when the configured max # of thrift thread is reached, I think the client might also run into the TTransportException wrapping the java.net.SocketException with message \"Connection reset\". I wonder if you have run into such a case or not, and have you tried that in kerberized Beeline/HS2?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctang.ma","name":"ctang.ma","key":"ctang.ma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chaoyu Tang","active":true,"timeZone":"America/New_York"},"created":"2016-09-23T12:14:43.081+0000","updated":"2016-09-23T12:14:43.081+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15516381","id":"15516381","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"Hi [~ctang.ma],\n\nI had finished my other tasks, and was about to collect the logs for you.\nHiveServer2:\n{code}\n2016-09-23T14:59:23,142  WARN [Thread-7] server.TThreadPoolServer: Task has been rejected by ExecutorService 10 times till timedout, reason: java.util.concurrent.RejectedExecutionException: Task org.apache.thrift.server.TThreadPoolServer$WorkerProcess@798d4da3 rejected from org.apache.hive.service.cli.thrift.ThreadPoolExecutorWithOomHook@f7ed8ef[Running, pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 1]\n{code}\n\nBeeline without patch, with --verbose=true:\n{code}\nConnecting to jdbc:hive2://localhost:10000\n16/09/23 14:59:23 [main]: WARN jdbc.HiveConnection: Failed to connect to localhost:10000\nHS2 may be unavailable, check server status\nError: Could not open client transport with JDBC Uri: jdbc:hive2://localhost:10000: null (state=08S01,code=0)\njava.sql.SQLException: Could not open client transport with JDBC Uri: jdbc:hive2://localhost:10000: null\n\tat org.apache.hive.jdbc.HiveConnection.<init>(HiveConnection.java:209)\n\tat org.apache.hive.jdbc.HiveDriver.connect(HiveDriver.java:107)\n\tat java.sql.DriverManager.getConnection(DriverManager.java:664)\n\tat java.sql.DriverManager.getConnection(DriverManager.java:208)\n\tat org.apache.hive.beeline.DatabaseConnection.connect(DatabaseConnection.java:145)\n\tat org.apache.hive.beeline.DatabaseConnection.getConnection(DatabaseConnection.java:209)\n\tat org.apache.hive.beeline.Commands.connect(Commands.java:1524)\n\tat org.apache.hive.beeline.Commands.connect(Commands.java:1419)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.apache.hive.beeline.ReflectiveCommandHandler.execute(ReflectiveCommandHandler.java:56)\n\tat org.apache.hive.beeline.BeeLine.execCommandWithPrefix(BeeLine.java:1128)\n\tat org.apache.hive.beeline.BeeLine.dispatch(BeeLine.java:1167)\n\tat org.apache.hive.beeline.BeeLine.initArgs(BeeLine.java:798)\n\tat org.apache.hive.beeline.BeeLine.begin(BeeLine.java:886)\n\tat org.apache.hive.beeline.BeeLine.mainWithInputRedirection(BeeLine.java:512)\n\tat org.apache.hive.beeline.BeeLine.main(BeeLine.java:495)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.apache.hadoop.util.RunJar.run(RunJar.java:221)\n\tat org.apache.hadoop.util.RunJar.main(RunJar.java:136)\nCaused by: org.apache.thrift.transport.TTransportException\n\tat org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:132)\n\tat org.apache.thrift.transport.TTransport.readAll(TTransport.java:86)\n\tat org.apache.thrift.transport.TSaslTransport.receiveSaslMessage(TSaslTransport.java:178)\n\tat org.apache.thrift.transport.TSaslTransport.open(TSaslTransport.java:307)\n\tat org.apache.thrift.transport.TSaslClientTransport.open(TSaslClientTransport.java:37)\n\tat org.apache.hive.jdbc.HiveConnection.openTransport(HiveConnection.java:227)\n\tat org.apache.hive.jdbc.HiveConnection.<init>(HiveConnection.java:182)\n\t... 24 more\nBeeline version 2.2.0-SNAPSHOT by Apache Hive\n{code}\n\nIn my test cases the server side of Thrift closes the connection without writing any data to the output in case of reaching the max # of thrift threads.\n\nAs for your question, I have not tried kerberized Beeline/HS2. If there is another timeout somewhere, which shorter/equal than the one defined by hive.server2.thrift.login.timeout which is used by ThriftBinaryCLIService, then it might throw the TTransportException with an inner \"Connection reset\" IOException and with the type of TTransportException.UNKNOWN. It would be good to find the source of the Connection reset. Could you please post your stack trace? Meanwhile I am trying to reproduce your output.\n\nThanks,\nPeter","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-23T13:04:20.460+0000","updated":"2016-09-23T13:04:20.460+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15516382","id":"15516382","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"Hi [~ctang.ma],\n\nI had finished my other tasks, and was about to collect the logs for you.\nHiveServer2:\n{code}\n2016-09-23T14:59:23,142  WARN [Thread-7] server.TThreadPoolServer: Task has been rejected by ExecutorService 10 times till timedout, reason: java.util.concurrent.RejectedExecutionException: Task org.apache.thrift.server.TThreadPoolServer$WorkerProcess@798d4da3 rejected from org.apache.hive.service.cli.thrift.ThreadPoolExecutorWithOomHook@f7ed8ef[Running, pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 1]\n{code}\n\nBeeline without patch, with --verbose=true:\n{code}\nConnecting to jdbc:hive2://localhost:10000\n16/09/23 14:59:23 [main]: WARN jdbc.HiveConnection: Failed to connect to localhost:10000\nHS2 may be unavailable, check server status\nError: Could not open client transport with JDBC Uri: jdbc:hive2://localhost:10000: null (state=08S01,code=0)\njava.sql.SQLException: Could not open client transport with JDBC Uri: jdbc:hive2://localhost:10000: null\n\tat org.apache.hive.jdbc.HiveConnection.<init>(HiveConnection.java:209)\n\tat org.apache.hive.jdbc.HiveDriver.connect(HiveDriver.java:107)\n\tat java.sql.DriverManager.getConnection(DriverManager.java:664)\n\tat java.sql.DriverManager.getConnection(DriverManager.java:208)\n\tat org.apache.hive.beeline.DatabaseConnection.connect(DatabaseConnection.java:145)\n\tat org.apache.hive.beeline.DatabaseConnection.getConnection(DatabaseConnection.java:209)\n\tat org.apache.hive.beeline.Commands.connect(Commands.java:1524)\n\tat org.apache.hive.beeline.Commands.connect(Commands.java:1419)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.apache.hive.beeline.ReflectiveCommandHandler.execute(ReflectiveCommandHandler.java:56)\n\tat org.apache.hive.beeline.BeeLine.execCommandWithPrefix(BeeLine.java:1128)\n\tat org.apache.hive.beeline.BeeLine.dispatch(BeeLine.java:1167)\n\tat org.apache.hive.beeline.BeeLine.initArgs(BeeLine.java:798)\n\tat org.apache.hive.beeline.BeeLine.begin(BeeLine.java:886)\n\tat org.apache.hive.beeline.BeeLine.mainWithInputRedirection(BeeLine.java:512)\n\tat org.apache.hive.beeline.BeeLine.main(BeeLine.java:495)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.apache.hadoop.util.RunJar.run(RunJar.java:221)\n\tat org.apache.hadoop.util.RunJar.main(RunJar.java:136)\nCaused by: org.apache.thrift.transport.TTransportException\n\tat org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:132)\n\tat org.apache.thrift.transport.TTransport.readAll(TTransport.java:86)\n\tat org.apache.thrift.transport.TSaslTransport.receiveSaslMessage(TSaslTransport.java:178)\n\tat org.apache.thrift.transport.TSaslTransport.open(TSaslTransport.java:307)\n\tat org.apache.thrift.transport.TSaslClientTransport.open(TSaslClientTransport.java:37)\n\tat org.apache.hive.jdbc.HiveConnection.openTransport(HiveConnection.java:227)\n\tat org.apache.hive.jdbc.HiveConnection.<init>(HiveConnection.java:182)\n\t... 24 more\nBeeline version 2.2.0-SNAPSHOT by Apache Hive\n{code}\n\nIn my test cases the server side of Thrift closes the connection without writing any data to the output in case of reaching the max # of thrift threads.\n\nAs for your question, I have not tried kerberized Beeline/HS2. If there is another timeout somewhere, which shorter/equal than the one defined by hive.server2.thrift.login.timeout which is used by ThriftBinaryCLIService, then it might throw the TTransportException with an inner \"Connection reset\" IOException and with the type of TTransportException.UNKNOWN. It would be good to find the source of the Connection reset. Could you please post your stack trace? Meanwhile I am trying to reproduce your output.\n\nThanks,\nPeter","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-23T13:04:25.138+0000","updated":"2016-09-23T13:04:25.138+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15516513","id":"15516513","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctang.ma","name":"ctang.ma","key":"ctang.ma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chaoyu Tang","active":true,"timeZone":"America/New_York"},"body":"That was run into by the Sentry, I wonder if it could be a similar case to HS2. It could be quite common that the client could run into \"java.net.SocketException: Connection reset\" when it tries to connect to server and reads data from socket but the socket has been closed at the server site (TThreadPoolServer closes it due to reaching the max # and timeout).\n{code}\nCaused by: org.apache.thrift.transport.TTransportException: java.net.SocketException: Connection reset\n\tat org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:129)\n\tat org.apache.thrift.transport.TTransport.readAll(TTransport.java:86)\n\tat org.apache.thrift.transport.TSaslTransport.receiveSaslMessage(TSaslTransport.java:178)\n\tat org.apache.thrift.transport.TSaslTransport.open(TSaslTransport.java:277)\n\tat org.apache.thrift.transport.TSaslClientTransport.open(TSaslClientTransport.java:37)\n\tat org.apache.sentry.provider.db.service.thrift.SentryPolicyServiceClientDefaultImpl$UgiSaslClientTransport.baseOpen(SentryPolicyServiceClientDefaultImpl.java:126)\n\tat org.apache.sentry.provider.db.service.thrift.SentryPolicyServiceClientDefaultImpl$UgiSaslClientTransport.access$000(SentryPolicyServiceClientDefaultImpl.java:85)\n\tat org.apache.sentry.provider.db.service.thrift.SentryPolicyServiceClientDefaultImpl$UgiSaslClientTransport$1.run(SentryPolicyServiceClientDefaultImpl.java:112)\n\tat org.apache.sentry.provider.db.service.thrift.SentryPolicyServiceClientDefaultImpl$UgiSaslClientTransport$1.run(SentryPolicyServiceClientDefaultImpl.java:110)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:422)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1714)\n\t... 23 more\nCaused by: java.net.SocketException: Connection reset\n\tat java.net.SocketInputStream.read(SocketInputStream.java:209)\n\tat java.net.SocketInputStream.read(SocketInputStream.java:141)\n\tat java.io.BufferedInputStream.fill(BufferedInputStream.java:246)\n\tat java.io.BufferedInputStream.read1(BufferedInputStream.java:286)\n\tat java.io.BufferedInputStream.read(BufferedInputStream.java:345)\n\tat org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:127)\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctang.ma","name":"ctang.ma","key":"ctang.ma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chaoyu Tang","active":true,"timeZone":"America/New_York"},"created":"2016-09-23T13:52:29.670+0000","updated":"2016-09-23T13:57:45.465+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15516910","id":"15516910","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"I will think about this on the weekend, but my first guess is, that if there is not enough connection in the TThreadPoolServer, then it accepts the connections, and after the timeout closes it.\n{code}\nTTransport client = serverTransport_.accept();\n[..]\nclient.close();\n{code}\nIdeally the executor service will not write anything into it (since it will throw an RejectedExecutionException) - what is the configuration of the ThreadPool in Sentry? Does it throw a RejectedExecutionException when the Theadpool is exhausted? \n\nOn the Thrift client side we have this code:\n{code}\n    try {\n      bytesRead = inputStream_.read(buf, off, len);\n    } catch (IOException iox) {\n      throw new TTransportException(TTransportException.UNKNOWN, iox);\n    }\n    if (bytesRead < 0) {\n      throw new TTransportException(TTransportException.END_OF_FILE);\n    }\n{code}\n\nReading from the InputStream read function documentation:\n{code}\nIf no byte is available because the stream is at end of file, the value -1 is returned; otherwise, at least one byte is read and stored into b.\n{code}\n\n{code}\nIOException - If the first byte cannot be read for any reason other than end of file, or if the input stream has been closed, or if some other I/O error occurs.\n{code}\n\nReading this my guess this can be a timing issue here. Thinking :)\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-23T16:32:02.985+0000","updated":"2016-09-23T16:32:02.985+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15517298","id":"15517298","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctang.ma","name":"ctang.ma","key":"ctang.ma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chaoyu Tang","active":true,"timeZone":"America/New_York"},"body":"Yeah, it makes sense. This patch improves the usability though we might have missed some error case (e.g. TTransportException: java.net.SocketException: Connection reset\") which is also resulted from exceeding the max worker #.\nDo the TTransportException like TTransportException.UNKNOWN or TTransportException.END_OF_FILE only happen during connection time? They could also happen during execution time (after the connection), right? If so, are the messages like \"Unknown HS2 problem when connecting to Thrift server\" a little confusing since they are particular for connection issues?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctang.ma","name":"ctang.ma","key":"ctang.ma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chaoyu Tang","active":true,"timeZone":"America/New_York"},"created":"2016-09-23T19:10:48.194+0000","updated":"2016-09-26T14:12:27.697+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15525465","id":"15525465","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"Hi [~ctang.ma],\n\nI have tried to dig deeper about what happens when the server closes the connection, but the client still tries to read.\nI have not found a definitive answer for it, the best thing which I have found is a stackoverflow discussion:\nhttp://stackoverflow.com/questions/10240694/java-socket-api-how-to-tell-if-a-connection-has-been-closed\n\nThis tells us, that if the server closes the connection, and nothing unplanned happens, then the client should not get an IOException. Is it possible to check the Thrift server output to find out more about that Sentry case?\n\nAs for the error messages you are absolutely right, again. I will post a new patch with revised error messages, and if you still have better ones then feel free to suggest something (to tell the truth, until now phrasing messages was not in my expertise :)\n\nThanks,\nPeter","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-27T08:22:26.821+0000","updated":"2016-09-27T08:22:26.821+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15525466","id":"15525466","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"Hi [~ctang.ma],\n\nI have tried to dig deeper about what happens when the server closes the connection, but the client still tries to read.\nI have not found a definitive answer for it, the best thing which I have found is a stackoverflow discussion:\nhttp://stackoverflow.com/questions/10240694/java-socket-api-how-to-tell-if-a-connection-has-been-closed\n\nThis tells us, that if the server closes the connection, and nothing unplanned happens, then the client should not get an IOException. Is it possible to check the Thrift server output to find out more about that Sentry case?\n\nAs for the error messages you are absolutely right, again. I will post a new patch with revised error messages, and if you still have better ones then feel free to suggest something (to tell the truth, until now phrasing messages was not in my expertise :)\n\nThanks,\nPeter","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-27T08:22:32.365+0000","updated":"2016-09-27T08:22:32.365+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15525472","id":"15525472","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"Revised error messages","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-27T08:25:22.625+0000","updated":"2016-09-27T08:25:22.625+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15525880","id":"15525880","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12830462/HIVE-9423.5.patch\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 6 failed/errored test(s), 10641 tests executed\n*Failed tests:*\n{noformat}\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[acid_mapjoin]\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[ctas]\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_join_part_col_char]\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainuser_3]\norg.apache.hadoop.hive.metastore.TestMetaStoreMetrics.testMetaDataCounts\norg.apache.hive.jdbc.TestJdbcWithMiniHS2.testAddJarConstructorUnCaching\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/1312/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/1312/console\nTest logs: http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-Build-1312/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 6 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12830462 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2016-09-27T11:49:41.917+0000","updated":"2016-09-27T11:49:41.917+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15526119","id":"15526119","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctang.ma","name":"ctang.ma","key":"ctang.ma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chaoyu Tang","active":true,"timeZone":"America/New_York"},"body":"LGTM, +1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctang.ma","name":"ctang.ma","key":"ctang.ma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chaoyu Tang","active":true,"timeZone":"America/New_York"},"created":"2016-09-27T13:27:31.260+0000","updated":"2016-09-27T13:27:31.260+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15526557","id":"15526557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"body":"[~pvary] Thanks for the patch. I'll create another jira to reflect the original intent (admission control etc) for which this was created. You may want to modify the description of this one.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vgumashta","name":"vgumashta","key":"vgumashta","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vaibhav Gumashta","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-27T15:59:33.836+0000","updated":"2016-09-27T15:59:33.836+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15526618","id":"15526618","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"Hi [~vgumashta],\n\nOk - I kept the description to document that there is no hangs any more. I would be happy to help in that jira - maybe I was wrong when I thought that having hive.server2.thrift.max.worker.threads, hive.server2.thrift.min.worker.threads, hive.server2.thrift.exponential.backoff.slot.length and hive.server2.thrift.login.timeout to control the Thrift server connection   settings is enough.\n\nSince 0.9.2 the Thrift code respect the configurations above - no hangs, and restarts are needed -, and with this patch I try to provide a meaningful error message.\n\nIf you have something even better, I would be happy to help.\n\nThanks to checking out this jira,\nPeter","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-27T16:16:40.456+0000","updated":"2016-09-27T16:16:40.456+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15533123","id":"15533123","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"Patch for branch 2.1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-29T15:43:39.512+0000","updated":"2016-09-29T15:43:39.512+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15533235","id":"15533235","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"body":"Updated branch 2.1 patch - pom modification for tests, and an import","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pvary","name":"pvary","key":"pvary","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Vary","active":true,"timeZone":"Europe/Budapest"},"created":"2016-09-29T16:22:46.139+0000","updated":"2016-09-29T16:22:46.139+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15534883","id":"15534883","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"body":"\n\nHere are the results of testing the latest attachment:\nhttps://issues.apache.org/jira/secure/attachment/12830914/HIVE-9423.6-branch-2.1.patch\n\n{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.\n\n{color:red}ERROR:{color} -1 due to 252 failed/errored test(s), 10435 tests executed\n*Failed tests:*\n{noformat}\n249_TestHWISessionManager - did not produce a TEST-*.xml file\n392_TestMsgBusConnection - did not produce a TEST-*.xml file\n792_TestJdbcWithMiniKdcSQLAuthHttp - did not produce a TEST-*.xml file\n793_TestJdbcWithMiniKdc - did not produce a TEST-*.xml file\n794_TestHs2HooksWithMiniKdc - did not produce a TEST-*.xml file\n796_TestJdbcWithDBTokenStore - did not produce a TEST-*.xml file\n797_TestJdbcWithMiniKdcCookie - did not produce a TEST-*.xml file\n798_TestJdbcNonKrbSASLWithMiniKdc - did not produce a TEST-*.xml file\n800_TestJdbcWithMiniKdcSQLAuthBinary - did not produce a TEST-*.xml file\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_mapjoin\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_table_stats\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_authorization_explain\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_autoColumnStats_1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_autoColumnStats_2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_autoColumnStats_3\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_autoColumnStats_4\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_autoColumnStats_5\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_autoColumnStats_8\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_autoColumnStats_9\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_binary_output_format\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucket1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucket2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucket3\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cbo_rp_outer_join_ppr\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_char_udf1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_columnStatsUpdateForStatsOptimizer_1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_columnStatsUpdateForStatsOptimizer_2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_constantPropagateForSubQuery\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ctas\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_describe_table\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_extrapolate_part_stats_full\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_extrapolate_part_stats_partial\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_extrapolate_part_stats_partial_ndv\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_fouter_join_ppr\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_map_ppr\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_map_ppr_multi_distinct\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_ppr\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_ppr_multi_distinct\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input23\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input42\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_part1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_part2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_part7\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_part9\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_insert_values_orig_table_use_metadata\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ivyDownload\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join0\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join17\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join26\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join32\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join32_lessSize\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join33\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join34\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join35\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join9\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_map_ppr\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_json_serde1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_11\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_12\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_13\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_14\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_3\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_4\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_5\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_6\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_7\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_8\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_9\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_load_dyn_part8\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_louter_join_ppr\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_mapjoin\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_offset_limit_global_optimizer\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_optimize_nullscan\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_orc_create\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_orc_int_type_promotion\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_orc_ppd_schema_evol_3a\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_outer_join_ppr\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_coltype_literals\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_pcr\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_pcs\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_join_filter\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_vc\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppr_allchildsarenull\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_rand_partitionpruner1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_rand_partitionpruner2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_rand_partitionpruner3\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_regexp_extract\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_router_join_ppr\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample4\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample5\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample6\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample7\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample8\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample9\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_part\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_table\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_part\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_table\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_part\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_table\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_part\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_table\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_part\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_table\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_stats\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_part\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_table\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_vec_mapwork_part\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_vec_mapwork_table\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_part\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_table\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_serde_user_properties\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats0\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_invalidation\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_list_bucket\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_null_optimizer\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_only_null\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_str_to_map\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_multiinsert\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_notin_having\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_transform_ppr1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_transform_ppr2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udaf_collect_set_2\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_explode\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_sort_array\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udtf_explode\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_ppr\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_varchar_udf1\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_between_in\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_cast_constant\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_complex_all\norg.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_udf1\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_orc_ppd_basic\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_part\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_table\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_part\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_table\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_part\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_table\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_part\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_table\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_part\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_table\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_part\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_table\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_vec_mapwork_part\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_vec_mapwork_table\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_part\norg.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_table\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_bucket4\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_bucket5\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_constprog_partitioner\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_disable_merge_for_bucketing\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_list_bucket_dml_10\norg.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_reduce_deduplicate\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_bucket2\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_bucket3\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_bucket4\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_ctas\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_disable_merge_for_bucketing\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_join0\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mapjoin_mapjoin\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_orc_ppd_basic\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_orc_ppd_schema_evol_3a\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_sample1\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_part\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_acid_mapwork_table\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_part\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_acidvec_mapwork_table\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_part\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_nonvec_fetchwork_table\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_part\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_nonvec_mapwork_table\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_part\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_orc_vec_mapwork_table\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_stats\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_part\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_nonvec_mapwork_table\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vec_mapwork_part\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vec_mapwork_table\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_part\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_table\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_stats_only_null\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_transform_ppr1\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_transform_ppr2\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_between_in\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_cast_constant\norg.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_complex_all\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_bucket4\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_bucket5\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_bucket_many\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_disable_merge_for_bucketing\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_list_bucket_dml_10\norg.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_reduce_deduplicate\norg.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_columnstats_partlvl_invalid_values\norg.apache.hadoop.hive.cli.TestPerfCliDriver.testPerfCliDriver_query85\norg.apache.hadoop.hive.cli.TestPerfCliDriver.testPerfCliDriver_query89\norg.apache.hadoop.hive.cli.TestPerfCliDriver.testPerfCliDriver_query91\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_bucket2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_bucket3\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_bucket4\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_ctas\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_disable_merge_for_bucketing\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby_map_ppr\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby_map_ppr_multi_distinct\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby_ppr\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_groupby_ppr_multi_distinct\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_input_part2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join0\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join17\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join26\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join32\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join32_lessSize\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join33\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join34\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join35\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join9\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_map_ppr\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_list_bucket_dml_2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_load_dyn_part8\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_louter_join_ppr\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_mapjoin_mapjoin\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_optimize_nullscan\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_outer_join_ppr\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_pcr\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_ppd_join_filter\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_router_join_ppr\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_sample1\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_sample2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_sample4\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_sample5\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_sample6\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_sample7\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_sample8\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_stats0\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_stats_only_null\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_subquery_multiinsert\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_transform_ppr1\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_transform_ppr2\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_union_ppr\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_between_in\norg.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_cast_constant\norg.apache.hive.jdbc.TestJdbcWithMiniLlap.testLlapInputFormatEndToEnd\norg.apache.hive.minikdc.TestHiveAuthFactory.testStartTokenManagerForDBTokenStore\norg.apache.hive.minikdc.TestHiveAuthFactory.testStartTokenManagerForMemoryTokenStore\norg.apache.hive.minikdc.TestMiniHiveKdc.testLogin\norg.apache.hive.spark.client.TestSparkClient.testJobSubmission\n{noformat}\n\nTest results: https://builds.apache.org/job/PreCommit-HIVE-Build/1348/testReport\nConsole output: https://builds.apache.org/job/PreCommit-HIVE-Build/1348/console\nTest logs: http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-Build-1348/\n\nMessages:\n{noformat}\nExecuting org.apache.hive.ptest.execution.TestCheckPhase\nExecuting org.apache.hive.ptest.execution.PrepPhase\nExecuting org.apache.hive.ptest.execution.ExecutionPhase\nExecuting org.apache.hive.ptest.execution.ReportingPhase\nTests exited with: TestsFailedException: 252 tests failed\n{noformat}\n\nThis message is automatically generated.\n\nATTACHMENT ID: 12830914 - PreCommit-HIVE-Build","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hiveqa","name":"hiveqa","key":"hiveqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hiveqa&avatarId=17060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hiveqa&avatarId=17060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hiveqa&avatarId=17060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hiveqa&avatarId=17060"},"displayName":"Hive QA","active":true,"timeZone":"America/Chicago"},"created":"2016-09-30T03:22:16.674+0000","updated":"2016-09-30T03:22:16.674+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15537622","id":"15537622","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctang.ma","name":"ctang.ma","key":"ctang.ma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chaoyu Tang","active":true,"timeZone":"America/New_York"},"body":"Committed to 2.2.0 and 2.1.1. Thanks [~pvary] for the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctang.ma","name":"ctang.ma","key":"ctang.ma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chaoyu Tang","active":true,"timeZone":"America/New_York"},"created":"2016-10-01T01:34:40.345+0000","updated":"2016-10-01T01:34:40.345+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15537841","id":"15537841","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"body":"[~ctang.ma], the commit to master omitted the JIRA number.  Please update errata.txt for commit d16d4f1bcc43d6ebcab0eaf5bc635fb88b60be5f.  Thanks.\n\nExample of updating errata.txt:  HIVE-11876.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=leftylev","name":"leftylev","key":"lefty@hortonworks.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=lefty%40hortonworks.com&avatarId=15906","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=lefty%40hortonworks.com&avatarId=15906","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=lefty%40hortonworks.com&avatarId=15906","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=lefty%40hortonworks.com&avatarId=15906"},"displayName":"Lefty Leverenz","active":true,"timeZone":"America/New_York"},"created":"2016-10-01T04:14:30.938+0000","updated":"2016-10-01T04:14:30.938+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12768793/comment/15539510","id":"15539510","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctang.ma","name":"ctang.ma","key":"ctang.ma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chaoyu Tang","active":true,"timeZone":"America/New_York"},"body":"Thanks [~leftylev] for catching this. My fault. I have updated the errata.txt for this missing JIRA in the commit message. See HIVE-14874.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctang.ma","name":"ctang.ma","key":"ctang.ma","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chaoyu Tang","active":true,"timeZone":"America/New_York"},"created":"2016-10-02T01:53:39.257+0000","updated":"2016-10-02T01:53:39.257+0000"}],"maxResults":40,"total":40,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-9423/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i24kzb:"}}