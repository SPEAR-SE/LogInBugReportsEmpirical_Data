{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13131814","self":"https://issues.apache.org/jira/rest/api/2/issue/13131814","key":"HIVE-18477","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"2018-01-18 07:52:03.471","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-18477/watchers","watchCount":2,"isWatching":false},"created":"2018-01-18T07:52:03.471+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329557","id":"12329557","name":"1.1.1","archived":false,"released":true,"releaseDate":"2015-05-20"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-01-18T08:04:00.441+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12314178","id":"12314178","name":"JDBC"}],"timeoriginalestimate":null,"description":"When view is created via JDBC, white spaces are included in the view creation. This is not the same behavior if we use beeline to create the view.\r\n\r\nFor the JDBC issue, consider the below tables setup.\r\n{code:java}\r\ncreate table t0 (id int, name string, address string, dob timestamp);\r\ncreate table t1 (id int, activity string, timedone timestamp);\r\ncreate table t2 (id int, history string);\r\n{code}\r\nAnd, the Java code to create the view:\r\n{code:java}\r\npublic class ViewCreationThroughJDBC{\r\npublic static void main(String[] args) throws SQLException{\r\ntry {\r\nClass.forName(\"org.apache.hive.jdbc.HiveDriver\");\r\n} catch (ClassNotFoundException e) {\r\ne.printStackTrace();\r\nSystem.exit(1);\r\n}\r\nString hostName = null;\r\ntry {\r\nInetAddress ipAddress = InetAddress.getLocalHost();\r\nhostName = ipAddress.getHostName();\r\nSystem.out.println(\"Current IP: <\" + ipAddress + \">\");\r\nSystem.out.println(\"Hostname is: <\" + hostName + \">\");\r\n\r\n} catch (UnknownHostException e) {\r\ne.printStackTrace();\r\n}\r\n\r\nString sql = null;\r\ntry {\r\nsql = new String(Files.readAllBytes(Paths.get(\"view_create.txt\")), StandardCharsets.UTF_8);\r\n} catch (Exception e) {\r\ne.printStackTrace();\r\n}\r\n\r\nConnection conn = DriverManager.getConnection(\"jdbc:hive2://\" + hostName + \":10000/default;\", \"username\", \"password\");\r\n\r\nStatement stmt = conn.createStatement();\r\nSystem.out.println(\"Running: \" + sql);\r\n//ResultSet res = stmt.executeQuery(sql);\r\nstmt.execute(sql);\r\ntry {\r\n//res.close();\r\nstmt.close();\r\nconn.close();\r\n}\r\ncatch (Exception e) {\r\ne.printStackTrace();\r\n}\r\n}\r\n}\r\n{code}\r\nAnd, the contents of view_create.txt referenced in the above code is as shown below:\r\n\r\n(Note: Please insert tabs \\{at least 4 tabs} before each line below. When I used the \\\\{code\\} tag, I think it cleared the tabs. Hence, I request you to manually insert spacesÂ in front of each line below.}\r\n{code:java}\r\ncreate view v0 as\r\nselect\r\n -- get the id from t0 table\r\n\r\na.id\r\n -- Do not get\r\n --, any other\r\n --, details\r\n\r\n-- lets gather name address and dob\r\n ,\r\n a.name ,\r\n a.address ,\r\n a.dob ,\r\n b.activity ,\r\n b.timedone\r\n -- The column name should be timezone and not timedone\r\n ,\r\n c.history\r\n from t0 a, t1 b, t2 c\r\n where\r\n a.id = b.id\r\n and c.id = a.id\r\n{code}\r\nWhen this code is run and a 'show create table v0' is run from beeline, it shows empty lines.\r\n\r\nEssentially, when: 'show create table v0' is run from beeline, below is the output I see:\r\n{code:java}\r\n+------------------------------------------+--+\r\n| createtab_stmt |\r\n+------------------------------------------+--+\r\n| CREATE VIEW `v0` AS select |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n| |\r\n+------------------------------------------+--+\r\n22 rows selected (0.188 seconds){code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"White spaces characters in view creation via JDBC cause problems with show create.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=venu.yanamandra%40live.com","name":"venu.yanamandra@live.com","key":"venu.yanamandra@live.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Venu Yanamandra","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=venu.yanamandra%40live.com","name":"venu.yanamandra@live.com","key":"venu.yanamandra@live.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Venu Yanamandra","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[],"maxResults":0,"total":0,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-18477/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3p1w7:"}}