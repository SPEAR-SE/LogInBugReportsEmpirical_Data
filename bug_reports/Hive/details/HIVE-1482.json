{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12469991","self":"https://issues.apache.org/jira/rest/api/2/issue/12469991","key":"HIVE-1482","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310843","id":"12310843","key":"HIVE","name":"Hive","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2010-08-04T18:09:01.602+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jan 07 20:15:36 UTC 2011","customfield_12310420":"42479","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1482/watchers","watchCount":6,"isWatching":false},"created":"2010-07-23T08:40:14.886+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315150","id":"12315150","description":"released","name":"0.7.0","archived":false,"released":true,"releaseDate":"2011-03-29"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-02-14T21:02:13.814+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12314178","id":"12314178","name":"JDBC"}],"timeoriginalestimate":null,"description":"As per jdbc spec they should be threadsafe:\nhttp://download.oracle.com/docs/cd/E17476_01/javase/1.3/docs/guide/jdbc/spec/jdbc-spec.frame9.html\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12451419","id":"12451419","filename":"HIVE-1482-1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-08-06T12:01:38.889+0000","size":10082,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12451419/HIVE-1482-1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12453014","id":"12453014","filename":"HIVE-1482-2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-08-25T06:36:25.183+0000","size":10723,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12453014/HIVE-1482-2.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"123136","customfield_12312823":null,"summary":"Not all jdbc calls are threadsafe.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12469991/comment/12891522","id":"12891522","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"On HiveConnection we reuse the \"client\" on many calls but we've already seen the \"DatabaseMetaData getMetaData()\" call being used in a multithreaded way.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-07-23T08:40:33.681+0000","updated":"2010-07-23T08:40:33.681+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12469991/comment/12895161","id":"12895161","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"Ok I guess the first questions would be:\n\nDo we want to go for as much concurrent work as possible or are we ok with using some synchronize on the client call's? I would say sync. is prefered over creating new connections in this case right?\n\nDo we perhaps want to solve this on the \"ThriftHive\" level since that's the part which doesn't allow the multi threaded calls or perhaps more on the \"HiveDatabaseMetaData\" since that's the part which has the requirement of multi thread safety?\n\nAny idea's are welcome on this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-08-04T07:01:34.399+0000","updated":"2010-08-04T07:01:34.399+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12469991/comment/12895344","id":"12895344","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"Yes, synchronized is the way to go.\n\nI think the synchronization has to be at the connection level.  For example, HiveStatement also needs to make calls on the thrift interface.  It's not just DatabaseMetaData.\n\nSo we should add a new data member to HiveConnection:\n\nObject connectionMutex = new Object();\n\nThen pass connectionMutex to constructors of sub-objects which need to participate in synchronization.  They can then do\n\nsynchronized(connectionMutex) {\n...\n}\n\naround their critical sections.\n\nCreating a separate object for this purpose allows us to keep control over synchronization (e.g. so it doesn't get mixed up with user-level or thrift-level synchronization code later).  We'll also need to be able to skip synchronization in the case of asynchronous cancel, but that's a separate task.\n\nWe should also review to see if there is any client-side state which needs protection.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-04T18:09:01.602+0000","updated":"2010-08-04T18:09:01.602+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12469991/comment/12895997","id":"12895997","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"Ok I think I covered the sync stuff like you sugested.\nFor the state part I was looking at how SessionState is used within the HiveConnection.\nThere are several spots where we pass a sessionstate object (HivePreparedStatement, HiveStatement) but both places end up not actually using the object. Simplest thing would be not to pass them. But even if we do pass it I think it only contains session data and not query specific data.\nQuery specific things like column names/types etc. can be done nicely within a sync block together with the client call for the query itself so that shouldn't be a problem.\n\nI'll upload a patch with what I have soon.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-08-06T09:04:48.127+0000","updated":"2010-08-06T09:04:48.127+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12469991/comment/12896021","id":"12896021","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"Full test ran with success on my pc. Plus no additional check-style errors found.\nAnything else we can think of for this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-08-06T12:01:38.991+0000","updated":"2010-08-06T12:01:38.991+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12469991/comment/12896710","id":"12896710","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"After looking at the code, I'm thinking we could use Java proxies to make the synchronization automatic and bulletproof.\n\nhttp://stackoverflow.com/questions/743288/java-synchronization-utility\n\nProxy the HiveInterface, and pass the proxy instance down.  That way we don't even need to pass around the connectionMutex (it will be hidden inside the proxy).\n\nWhat do you think?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-09T22:06:00.948+0000","updated":"2010-08-09T22:06:00.948+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12469991/comment/12896718","id":"12896718","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"Also, can you create a followup for adding a multithreaded test running JDBC against a thrift server?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-09T22:38:22.558+0000","updated":"2010-08-09T22:38:22.558+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12469991/comment/12896897","id":"12896897","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"The proxy sounds like an interesting approach. It will probably synchronize a little more then we need but it's a lot safer and the normal use case is calling the methods sequentially anyway so not much loss there.\n\nDoing a little mutithreading test is a good idea. I've had some HIVE_PLAN exceptions in the past (different jira) which would probably also become visible then. I'll have a look.\n\nThanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-08-10T14:38:36.123+0000","updated":"2010-08-10T14:38:36.123+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12469991/comment/12897742","id":"12897742","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"I've tried but this is actually surprisingly difficult to reproduce failure in a test on TestJdbcDriver. Perhaps there is something synchronized about the use of the embedded mode the test is running in?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-08-12T13:31:26.862+0000","updated":"2010-08-12T13:31:26.862+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12469991/comment/12897892","id":"12897892","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"Yeah, the problems may only show up with remoting (which is why I mentioned having the test run against a thrift server instead of embedded).\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-12T18:46:58.190+0000","updated":"2010-08-12T18:46:58.190+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12469991/comment/12902320","id":"12902320","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"body":"Still need to reproduce the problem in a test. So this is just to show some progress. It's now using generics with a SynchronizedFactory. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bennies","name":"bennies","key":"bennies","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bennie Schut","active":true,"timeZone":"Europe/Berlin"},"created":"2010-08-25T06:36:25.270+0000","updated":"2010-08-25T06:36:25.270+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12469991/comment/12978943","id":"12978943","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"body":"In HIVE-1899, I added a special-case sync proxy, but it would be better to use the generic version Bennie has here.  If someone works on this one more, maybe update HiveMetaStoreClient.newSynchronizedClient as well.  (But note that my special-case needs a global lock, not a per-object lock.)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jvs","name":"jvs","key":"jvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Sichi","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-07T20:15:36.642+0000","updated":"2011-01-07T20:15:36.642+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HIVE-1482/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0lfcf:"}}