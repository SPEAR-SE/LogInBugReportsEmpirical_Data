{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Laljo John Pullokkaran",
            "key": "jpullokkaran",
            "name": "jpullokkaran",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=jpullokkaran",
            "timeZone": "America/Los_Angeles"
        },
        "components": [
            {
                "description": "All issues dealing with Hive's cost based optimizer and its interaction with Optiq",
                "id": "12323402",
                "name": "CBO",
                "self": "https://issues.apache.org/jira/rest/api/2/component/12323402"
            },
            {
                "description": "Optimizations which are independent of runtime.",
                "id": "12323400",
                "name": "Logical Optimizer",
                "self": "https://issues.apache.org/jira/rest/api/2/component/12323400"
            }
        ],
        "created": "2016-01-07T23:42:08.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Gopal V",
            "key": "gopalv",
            "name": "gopalv",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=gopalv",
            "timeZone": "Asia/Kolkata"
        },
        "customfield_10010": null,
        "customfield_12310191": null,
        "customfield_12310192": null,
        "customfield_12310220": "2016-01-08T00:08:41.470+0000",
        "customfield_12310222": "1_*:*_6_*:*_526411796_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_6_*:*_3607007100",
        "customfield_12310230": null,
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "5.0",
        "customfield_12310320": null,
        "customfield_12310420": "9223372036854775807",
        "customfield_12310920": "9223372036854775807",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i2r0lb:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Thu Feb 25 01:31:51 UTC 2016",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "Simplified repro case of [HCC #8880|https://community.hortonworks.com/questions/8880/hive-on-tez-pushdown-predicate-doesnt-work-in-part.html], with the slow query showing the push-down miss. \n\nAnd the manually rewritten query to indicate the expected one.\n\nPart of the problem could be the window range not being split apart for PPD, but the FIL is not pushed down even if the rownum filter is removed.\n\n{code}\ncreate temporary table positions (regionid string, id bigint, deviceid string, ts string);\n\ninsert into positions values('1d6a0be1-6366-4692-9597-ebd5cd0f01d1', 1422792010, '6c5d1a30-2331-448b-a726-a380d6b3a432', '2016-01-01'),\n('1d6a0be1-6366-4692-9597-ebd5cd0f01d1', 1422792010, '6c5d1a30-2331-448b-a726-a380d6b3a432', '2016-01-01'),\n('1d6a0be1-6366-4692-9597-ebd5cd0f01d1', 1422792010, '6c5d1a30-2331-448b-a726-a380d6b3a432', '2016-01-02'),\n('1d6a0be1-6366-4692-9597-ebd5cd0f01d1', 1422792010, '6c5d1a30-2331-448b-a726-a380d6b3a432', '2016-01-02');\n\n\n-- slow query\nexplain\nWITH t1 AS \n( \n         SELECT   *, \n                  Row_number() over ( PARTITION BY regionid, id, deviceid ORDER BY ts DESC) AS rownos\n         FROM     positions ), \nlatestposition as ( \n       SELECT * \n       FROM   t1 \n       WHERE  rownos = 1) \nSELECT * \nFROM   latestposition \nWHERE  regionid='1d6a0be1-6366-4692-9597-ebd5cd0f01d1' \nAND    id=1422792010 \nAND    deviceid='6c5d1a30-2331-448b-a726-a380d6b3a432';\n\n-- fast query\nexplain\nWITH t1 AS \n( \n         SELECT   *, \n                  Row_number() over ( PARTITION BY regionid, id, deviceid ORDER BY ts DESC) AS rownos\n         FROM     positions \n         WHERE  regionid='1d6a0be1-6366-4692-9597-ebd5cd0f01d1' \n         AND    id=1422792010 \n         AND    deviceid='6c5d1a30-2331-448b-a726-a380d6b3a432'\n),latestposition as ( \n       SELECT * \n       FROM   t1 \n       WHERE  rownos = 1) \nSELECT * \nFROM   latestposition \n;\n{code}",
        "duedate": null,
        "environment": null,
        "fixVersions": [{
            "archived": false,
            "id": "12334255",
            "name": "2.1.0",
            "releaseDate": "2016-06-20",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12334255"
        }],
        "issuelinks": [{
            "id": "12516340",
            "inwardIssue": {
                "fields": {
                    "issuetype": {
                        "avatarId": 21133,
                        "description": "A problem which impairs or prevents the functions of the product.",
                        "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                        "id": "1",
                        "name": "Bug",
                        "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                        "subtask": false
                    },
                    "priority": {
                        "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                        "id": "3",
                        "name": "Major",
                        "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
                    },
                    "status": {
                        "description": "A patch for this issue has been uploaded to JIRA by a contributor.",
                        "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/document.png",
                        "id": "10002",
                        "name": "Patch Available",
                        "self": "https://issues.apache.org/jira/rest/api/2/status/10002",
                        "statusCategory": {
                            "colorName": "yellow",
                            "id": 4,
                            "key": "indeterminate",
                            "name": "In Progress",
                            "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/4"
                        }
                    },
                    "summary": "Push filter clauses through PTF(Windowing) does not work in some cases"
                },
                "id": "13106530",
                "key": "HIVE-17668",
                "self": "https://issues.apache.org/jira/rest/api/2/issue/13106530"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12516340",
            "type": {
                "id": "10030",
                "inward": "is related to",
                "name": "Reference",
                "outward": "relates to",
                "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
            }
        }],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": ["TODOC2.1"],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "id": "3",
            "name": "Major",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935"
            },
            "id": "12310843",
            "key": "HIVE",
            "name": "Hive",
            "projectCategory": {
                "description": "Scalable Distributed Computing",
                "id": "10292",
                "name": "Hadoop",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10292"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12310843"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Gopal V",
            "key": "gopalv",
            "name": "gopalv",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=gopalv",
            "timeZone": "Asia/Kolkata"
        },
        "resolution": {
            "description": "A fix for this issue is checked into the tree and tested.",
            "id": "1",
            "name": "Fixed",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1"
        },
        "resolutiondate": "2016-02-24T19:52:27.000+0000",
        "status": {
            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
            "id": "6",
            "name": "Closed",
            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [],
        "summary": "Logical PPD: Push filter clauses through PTF(Windowing) into TS",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2017-10-02T20:11:08.000+0000",
        "versions": [
            {
                "archived": false,
                "id": "12332384",
                "name": "1.2.1",
                "releaseDate": "2015-06-26",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12332384"
            },
            {
                "archived": false,
                "description": "Hive 2.0.0",
                "id": "12332641",
                "name": "2.0.0",
                "releaseDate": "2016-02-15",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12332641"
            }
        ],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HIVE-12808/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HIVE-12808/watchers",
            "watchCount": 4
        },
        "workratio": -1
    },
    "id": "12928504",
    "key": "HIVE-12808",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/12928504"
}