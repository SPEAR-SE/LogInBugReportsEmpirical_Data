{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sankarh&avatarId=29945",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sankarh&avatarId=29945",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sankarh&avatarId=29945",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=sankarh&avatarId=29945"
            },
            "displayName": "Sankar Hariappan",
            "key": "sankarh",
            "name": "sankarh",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=sankarh",
            "timeZone": "Asia/Kolkata"
        },
        "components": [
            {
                "description": "Tracks issues related to HiveServer2",
                "id": "12320408",
                "name": "HiveServer2",
                "self": "https://issues.apache.org/jira/rest/api/2/component/12320408"
            },
            {
                "id": "12330937",
                "name": "repl",
                "self": "https://issues.apache.org/jira/rest/api/2/component/12330937"
            }
        ],
        "created": "2018-07-19T07:07:56.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sankarh&avatarId=29945",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sankarh&avatarId=29945",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sankarh&avatarId=29945",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=sankarh&avatarId=29945"
            },
            "displayName": "Sankar Hariappan",
            "key": "sankarh",
            "name": "sankarh",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=sankarh",
            "timeZone": "Asia/Kolkata"
        },
        "customfield_10010": null,
        "customfield_12310191": null,
        "customfield_12310192": null,
        "customfield_12310220": "2018-07-24T15:47:02.009+0000",
        "customfield_12310222": "1_*:*_2_*:*_463256703_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_2_*:*_526051352",
        "customfield_12310230": null,
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "2.0",
        "customfield_12310320": [
            {
                "archived": false,
                "id": "12343343",
                "name": "4.0.0",
                "released": false,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343343"
            },
            {
                "archived": false,
                "description": "",
                "id": "12343559",
                "name": "3.2.0",
                "released": false,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343559"
            }
        ],
        "customfield_12310420": "9223372036854775807",
        "customfield_12310920": "9223372036854775807",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i3w21r:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Mon Jul 30 17:56:08 UTC 2018",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "Run the following command:\r\n{code:java}\r\nrepl dump `*` from 60758 with ('hive.repl.dump.metadata.only'='true', 'hive.repl.dump.include.acid.tables'='true');\r\n{code}\r\nSee this in hs2.log:\r\n{code:java}\r\n2018-07-10T18:07:32,308 INFO [HiveServer2-Handler-Pool: Thread-14380]: conf.HiveConf (HiveConf.java:getLogIdVar(5061)) - Using the default value passed in for log id: f1e13736-3f10-4abf-a29b-683b534dfa4c\r\n2018-07-10T18:07:32,309 INFO [HiveServer2-Handler-Pool: Thread-14380]: session.SessionState (:()) - Updating thread name to f1e13736-3f10-4abf-a29b-683b534dfa4c HiveServer2-Handler-Pool: Thread-14380\r\n2018-07-10T18:07:32,311 INFO [f1e13736-3f10-4abf-a29b-683b534dfa4c HiveServer2-Handler-Pool: Thread-14380]: operation.OperationManager (:()) - Adding operation: OperationHandle [opType=EXECUTE_STATEMENT, getHandleIdentifier()=16eb1d07-e125-490c-8ab8-90192bfd459b]\r\n2018-07-10T18:07:32,314 INFO [f1e13736-3f10-4abf-a29b-683b534dfa4c HiveServer2-Handler-Pool: Thread-14380]: ql.Driver (:()) - Compiling command(queryId=hive_20180710180732_7dcc20db-90db-486d-a825-e6fa91dc092b): repl dump `*` from 60758 with ('hive.repl.dump.metadata.only'='true', 'hive.repl.dump.include.acid.tables'='true')\r\n2018-07-10T18:07:32,317 INFO [f1e13736-3f10-4abf-a29b-683b534dfa4c HiveServer2-Handler-Pool: Thread-14380]: metastore.HiveMetaStoreClient (:()) - Trying to connect to metastore with URI thrift://hwx-demo-2.field.hortonworks.com:9083\r\n2018-07-10T18:07:32,317 INFO [f1e13736-3f10-4abf-a29b-683b534dfa4c HiveServer2-Handler-Pool: Thread-14380]: metastore.HiveMetaStoreClient (:()) - Opened a connection to metastore, current connections: 19\r\n2018-07-10T18:07:32,319 INFO [f1e13736-3f10-4abf-a29b-683b534dfa4c HiveServer2-Handler-Pool: Thread-14380]: metastore.HiveMetaStoreClient (:()) - Connected to metastore.\r\n2018-07-10T18:07:32,319 INFO [f1e13736-3f10-4abf-a29b-683b534dfa4c HiveServer2-Handler-Pool: Thread-14380]: metastore.RetryingMetaStoreClient (:()) - RetryingMetaStoreClient proxy=class org.apache.hadoop.hive.ql.metadata.SessionHiveMetaStoreClient ugi=hive (auth:SIMPLE) retries=24 delay=5 lifetime=0\r\n2018-07-10T18:07:32,439 INFO [f1e13736-3f10-4abf-a29b-683b534dfa4c HiveServer2-Handler-Pool: Thread-14380]: ql.Driver (:()) - Semantic Analysis Completed (retrial = false)\r\n2018-07-10T18:07:32,440 INFO [f1e13736-3f10-4abf-a29b-683b534dfa4c HiveServer2-Handler-Pool: Thread-14380]: ql.Driver (:()) - Returning Hive schema: Schema(fieldSchemas:[FieldSchema(name:dump_dir, type:string, comment:from deserializer), FieldSchema(name:last_repl_id, type:string, comment:from deserializer)], properties:null)\r\n2018-07-10T18:07:32,443 INFO [f1e13736-3f10-4abf-a29b-683b534dfa4c HiveServer2-Handler-Pool: Thread-14380]: exec.ListSinkOperator (:()) - Initializing operator LIST_SINK[0]\r\n2018-07-10T18:07:32,446 INFO [f1e13736-3f10-4abf-a29b-683b534dfa4c HiveServer2-Handler-Pool: Thread-14380]: ql.Driver (:()) - Completed compiling command(queryId=hive_20180710180732_7dcc20db-90db-486d-a825-e6fa91dc092b); Time taken: 0.132 seconds\r\n2018-07-10T18:07:32,447 INFO [f1e13736-3f10-4abf-a29b-683b534dfa4c HiveServer2-Handler-Pool: Thread-14380]: conf.HiveConf (HiveConf.java:getLogIdVar(5061)) - Using the default value passed in for log id: f1e13736-3f10-4abf-a29b-683b534dfa4c\r\n2018-07-10T18:07:32,448 INFO [f1e13736-3f10-4abf-a29b-683b534dfa4c HiveServer2-Handler-Pool: Thread-14380]: session.SessionState (:()) - Resetting thread name to HiveServer2-Handler-Pool: Thread-14380\r\n2018-07-10T18:07:32,451 INFO [HiveServer2-Background-Pool: Thread-15161]: reexec.ReExecDriver (:()) - Execution #1 of query\r\n2018-07-10T18:07:32,452 INFO [HiveServer2-Background-Pool: Thread-15161]: lockmgr.DbTxnManager (:()) - Setting lock request transaction to txnid:30327 for queryId=hive_20180710180732_7dcc20db-90db-486d-a825-e6fa91dc092b\r\n2018-07-10T18:07:32,454 INFO [HiveServer2-Background-Pool: Thread-15161]: lockmgr.DbLockManager (:()) - Requesting: queryId=hive_20180710180732_7dcc20db-90db-486d-a825-e6fa91dc092b LockRequest(component:[LockComponent(type:SHARED_READ, level:DB, dbname:default, operationType:SELECT), LockComponent(type:SHARED_READ, level:DB, dbname:hwxdemo, operationType:SELECT), LockComponent(type:SHARED_READ, level:DB, dbname:information_schema, operationType:SELECT), LockComponent(type:SHARED_READ, level:DB, dbname:sys, operationType:SELECT)], txnid:30327, user:hive, hostname:hwx-demo-2.field.hortonworks.com, agentInfo:hive_20180710180732_7dcc20db-90db-486d-a825-e6fa91dc092b)\r\n2018-07-10T18:07:32,497 INFO [HiveServer2-Background-Pool: Thread-15161]: lockmgr.DbLockManager (:()) - Response to queryId=hive_20180710180732_7dcc20db-90db-486d-a825-e6fa91dc092b LockResponse(lockid:30305, state:ACQUIRED)\r\n2018-07-10T18:07:32,501 INFO [HiveServer2-Background-Pool: Thread-15161]: ql.Driver (:()) - Executing command(queryId=hive_20180710180732_7dcc20db-90db-486d-a825-e6fa91dc092b): repl dump `*` from 60758 with ('hive.repl.dump.metadata.only'='true', 'hive.repl.dump.include.acid.tables'='true')\r\n2018-07-10T18:07:32,503 INFO [HiveServer2-Background-Pool: Thread-15161]: ql.Driver (:()) - Starting task [Stage-0:REPL_DUMP] in serial mode\r\n2018-07-10T18:07:32,506 INFO [HiveServer2-Background-Pool: Thread-15161]: metastore.HiveMetaStoreClient (:()) - Closed a connection to metastore, current connections: 18\r\n2018-07-10T18:07:32,509 INFO [HiveServer2-Background-Pool: Thread-15161]: metastore.HiveMetaStoreClient (:()) - Trying to connect to metastore with URI thrift://hwx-demo-2.field.hortonworks.com:9083\r\n2018-07-10T18:07:32,509 INFO [HiveServer2-Background-Pool: Thread-15161]: metastore.HiveMetaStoreClient (:()) - Opened a connection to metastore, current connections: 19\r\n2018-07-10T18:07:32,510 INFO [HiveServer2-Background-Pool: Thread-15161]: metastore.HiveMetaStoreClient (:()) - Connected to metastore.\r\n2018-07-10T18:07:32,510 INFO [HiveServer2-Background-Pool: Thread-15161]: metastore.RetryingMetaStoreClient (:()) - RetryingMetaStoreClient proxy=class org.apache.hadoop.hive.ql.metadata.SessionHiveMetaStoreClient ugi=hive (auth:SIMPLE) retries=24 delay=5 lifetime=0\r\n2018-07-10T18:07:32,536 INFO [HiveServer2-Background-Pool: Thread-15161]: metastore.HiveMetaStoreClient (:()) - Closed a connection to metastore, current connections: 18\r\n2018-07-10T18:07:32,538 INFO [HiveServer2-Background-Pool: Thread-15161]: metastore.HiveMetaStoreClient (:()) - Trying to connect to metastore with URI thrift://hwx-demo-2.field.hortonworks.com:9083\r\n2018-07-10T18:07:32,539 INFO [HiveServer2-Background-Pool: Thread-15161]: metastore.HiveMetaStoreClient (:()) - Opened a connection to metastore, current connections: 19\r\n2018-07-10T18:07:32,542 INFO [HiveServer2-Background-Pool: Thread-15161]: metastore.HiveMetaStoreClient (:()) - Connected to metastore.\r\n2018-07-10T18:07:32,542 INFO [HiveServer2-Background-Pool: Thread-15161]: metastore.RetryingMetaStoreClient (:()) - RetryingMetaStoreClient proxy=class org.apache.hadoop.hive.ql.metadata.SessionHiveMetaStoreClient ugi=hive (auth:SIMPLE) retries=24 delay=5 lifetime=0\r\n2018-07-10T18:07:32,565 INFO [HiveServer2-Background-Pool: Thread-15161]: ReplState (:()) - REPL::START: \\{\"dbName\":\"*\",\"dumpType\":\"INCREMENTAL\",\"estimatedNumEvents\":0,\"dumpStartTime\":1531246052}\r\n2018-07-10T18:07:32,577 INFO [HiveServer2-Background-Pool: Thread-15161]: metastore.HiveMetaStoreClient (:()) - Closed a connection to metastore, current connections: 18\r\n2018-07-10T18:07:32,578 INFO [HiveServer2-Background-Pool: Thread-15161]: events.AbstractEventHandler (:()) - Processing#60759 COMMIT_TXN message : \\{\"txnid\":30321,\"timestamp\":1531246017,\"server\":\"thrift://hwx-demo-2.field.hortonworks.com:9083\",\"servicePrincipal\":\"hive/_HOST@EXAMPLE.COM\"}\r\n2018-07-10T18:07:32,603 INFO [HiveServer2-Background-Pool: Thread-15161]: ReplState (:()) - REPL::EVENT_DUMP: \\{\"dbName\":\"*\",\"eventId\":\"60759\",\"eventType\":\"EVENT_COMMIT_TXN\",\"eventsDumpProgress\":\"1/0\",\"dumpTime\":1531246052}\r\n2018-07-10T18:07:32,604 INFO [HiveServer2-Background-Pool: Thread-15161]: events.AbstractEventHandler (:()) - Processing#60760 COMMIT_TXN message : \\{\"txnid\":30322,\"timestamp\":1531246021,\"server\":\"thrift://hwx-demo-2.field.hortonworks.com:9083\",\"servicePrincipal\":\"hive/_HOST@EXAMPLE.COM\"}\r\n2018-07-10T18:07:32,628 INFO [HiveServer2-Background-Pool: Thread-15161]: ReplState (:()) - REPL::EVENT_DUMP: \\{\"dbName\":\"*\",\"eventId\":\"60760\",\"eventType\":\"EVENT_COMMIT_TXN\",\"eventsDumpProgress\":\"2/0\",\"dumpTime\":1531246052}\r\n2018-07-10T18:07:32,629 INFO [HiveServer2-Background-Pool: Thread-15161]: events.AbstractEventHandler (:()) - Processing#60761 OPEN_TXN message : \\{\"txnIds\":null,\"timestamp\":1531246022,\"fromTxnId\":30323,\"toTxnId\":30323,\"server\":\"thrift://hwx-demo-2.field.hortonworks.com:9083\",\"servicePrincipal\":\"hive/_HOST@EXAMPLE.COM\"}\r\n2018-07-10T18:07:32,653 INFO [HiveServer2-Background-Pool: Thread-15161]: ReplState (:()) - REPL::EVENT_DUMP: \\{\"dbName\":\"*\",\"eventId\":\"60761\",\"eventType\":\"EVENT_OPEN_TXN\",\"eventsDumpProgress\":\"3/0\",\"dumpTime\":1531246052}\r\n2018-07-10T18:07:32,654 INFO [HiveServer2-Background-Pool: Thread-15161]: events.AbstractEventHandler (:()) - Processing#60762 COMMIT_TXN message : \\{\"txnid\":30323,\"timestamp\":1531246028,\"server\":\"thrift://hwx-demo-2.field.hortonworks.com:9083\",\"servicePrincipal\":\"hive/_HOST@EXAMPLE.COM\"}\r\n2018-07-10T18:07:32,679 INFO [HiveServer2-Background-Pool: Thread-15161]: ReplState (:()) - REPL::EVENT_DUMP: \\{\"dbName\":\"*\",\"eventId\":\"60762\",\"eventType\":\"EVENT_COMMIT_TXN\",\"eventsDumpProgress\":\"4/0\",\"dumpTime\":1531246052}\r\n2018-07-10T18:07:32,680 INFO [HiveServer2-Background-Pool: Thread-15161]: events.AbstractEventHandler (:()) - Processing#60763 OPEN_TXN message : \\{\"txnIds\":null,\"timestamp\":1531246033,\"fromTxnId\":30324,\"toTxnId\":30324,\"server\":\"thrift://hwx-demo-2.field.hortonworks.com:9083\",\"servicePrincipal\":\"hive/_HOST@EXAMPLE.COM\"}\r\n2018-07-10T18:07:32,702 INFO [HiveServer2-Background-Pool: Thread-15161]: ReplState (:()) - REPL::EVENT_DUMP: \\{\"dbName\":\"*\",\"eventId\":\"60763\",\"eventType\":\"EVENT_OPEN_TXN\",\"eventsDumpProgress\":\"5/0\",\"dumpTime\":1531246052}\r\n2018-07-10T18:07:32,702 INFO [HiveServer2-Background-Pool: Thread-15161]: events.AbstractEventHandler (:()) - Processing#60764 OPEN_TXN message : \\{\"txnIds\":null,\"timestamp\":1531246038,\"fromTxnId\":30325,\"toTxnId\":30325,\"server\":\"thrift://hwx-demo-2.field.hortonworks.com:9083\",\"servicePrincipal\":\"hive/_HOST@EXAMPLE.COM\"}\r\n2018-07-10T18:07:32,724 INFO [HiveServer2-Background-Pool: Thread-15161]: ReplState (:()) - REPL::EVENT_DUMP: \\{\"dbName\":\"*\",\"eventId\":\"60764\",\"eventType\":\"EVENT_OPEN_TXN\",\"eventsDumpProgress\":\"6/0\",\"dumpTime\":1531246052}\r\n2018-07-10T18:07:32,725 INFO [HiveServer2-Background-Pool: Thread-15161]: events.AbstractEventHandler (:()) - Processing#60765 COMMIT_TXN message : \\{\"txnid\":30324,\"timestamp\":1531246038,\"server\":\"thrift://hwx-demo-2.field.hortonworks.com:9083\",\"servicePrincipal\":\"hive/_HOST@EXAMPLE.COM\"}\r\n2018-07-10T18:07:32,747 INFO [HiveServer2-Background-Pool: Thread-15161]: ReplState (:()) - REPL::EVENT_DUMP: \\{\"dbName\":\"*\",\"eventId\":\"60765\",\"eventType\":\"EVENT_COMMIT_TXN\",\"eventsDumpProgress\":\"7/0\",\"dumpTime\":1531246052}\r\n2018-07-10T18:07:32,748 INFO [HiveServer2-Background-Pool: Thread-15161]: events.AbstractEventHandler (:()) - Processing#60766 COMMIT_TXN message : \\{\"txnid\":30325,\"timestamp\":1531246043,\"server\":\"thrift://hwx-demo-2.field.hortonworks.com:9083\",\"servicePrincipal\":\"hive/_HOST@EXAMPLE.COM\"}\r\n2018-07-10T18:07:32,768 INFO [HiveServer2-Background-Pool: Thread-15161]: ReplState (:()) - REPL::EVENT_DUMP: \\{\"dbName\":\"*\",\"eventId\":\"60766\",\"eventType\":\"EVENT_COMMIT_TXN\",\"eventsDumpProgress\":\"8/0\",\"dumpTime\":1531246052}\r\n2018-07-10T18:07:32,769 INFO [HiveServer2-Background-Pool: Thread-15161]: events.AbstractEventHandler (:()) - Processing#60767 OPEN_TXN message : \\{\"txnIds\":null,\"timestamp\":1531246043,\"fromTxnId\":30326,\"toTxnId\":30326,\"server\":\"thrift://hwx-demo-2.field.hortonworks.com:9083\",\"servicePrincipal\":\"hive/_HOST@EXAMPLE.COM\"}\r\n2018-07-10T18:07:32,791 INFO [HiveServer2-Background-Pool: Thread-15161]: ReplState (:()) - REPL::EVENT_DUMP: \\{\"dbName\":\"*\",\"eventId\":\"60767\",\"eventType\":\"EVENT_OPEN_TXN\",\"eventsDumpProgress\":\"9/0\",\"dumpTime\":1531246052}\r\n2018-07-10T18:07:32,791 INFO [HiveServer2-Background-Pool: Thread-15161]: events.AbstractEventHandler (:()) - Processing#60768 COMMIT_TXN message : \\{\"txnid\":30326,\"timestamp\":1531246049,\"server\":\"thrift://hwx-demo-2.field.hortonworks.com:9083\",\"servicePrincipal\":\"hive/_HOST@EXAMPLE.COM\"}\r\n2018-07-10T18:07:32,816 INFO [HiveServer2-Background-Pool: Thread-15161]: ReplState (:()) - REPL::EVENT_DUMP: \\{\"dbName\":\"*\",\"eventId\":\"60768\",\"eventType\":\"EVENT_COMMIT_TXN\",\"eventsDumpProgress\":\"10/0\",\"dumpTime\":1531246052}\r\n2018-07-10T18:07:32,817 INFO [HiveServer2-Background-Pool: Thread-15161]: events.AbstractEventHandler (:()) - Processing#60769 OPEN_TXN message : \\{\"txnIds\":null,\"timestamp\":1531246052,\"fromTxnId\":30327,\"toTxnId\":30327,\"server\":\"thrift://hwx-demo-2.field.hortonworks.com:9083\",\"servicePrincipal\":\"hive/_HOST@EXAMPLE.COM\"}\r\n2018-07-10T18:07:32,841 INFO [HiveServer2-Background-Pool: Thread-15161]: ReplState (:()) - REPL::EVENT_DUMP: \\{\"dbName\":\"*\",\"eventId\":\"60769\",\"eventType\":\"EVENT_OPEN_TXN\",\"eventsDumpProgress\":\"11/0\",\"dumpTime\":1531246052}\r\n2018-07-10T18:07:32,841 WARN [HiveServer2-Background-Pool: Thread-15161]: metastore.RetryingMetaStoreClient (:()) - MetaStoreClient lost connection. Attempting to reconnect (1 of 24) after 5s. getNextNotification\r\norg.apache.thrift.transport.TTransportException: Cannot write to null outputStream\r\n at org.apache.thrift.transport.TIOStreamTransport.write(TIOStreamTransport.java:142) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.thrift.protocol.TBinaryProtocol.writeI32(TBinaryProtocol.java:178) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.thrift.protocol.TBinaryProtocol.writeMessageBegin(TBinaryProtocol.java:106) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.thrift.TServiceClient.sendBase(TServiceClient.java:70) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.thrift.TServiceClient.sendBase(TServiceClient.java:62) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Client.send_get_next_notification(ThriftHiveMetastore.java:5547) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore$Client.get_next_notification(ThriftHiveMetastore.java:5539) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getNextNotification(HiveMetaStoreClient.java:2697) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source) ~[?:?]\r\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_112]\r\n at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_112]\r\n at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:212) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at com.sun.proxy.$Proxy60.getNextNotification(Unknown Source) ~[?:?]\r\n at sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source) ~[?:?]\r\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_112]\r\n at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_112]\r\n at org.apache.hadoop.hive.metastore.HiveMetaStoreClient$SynchronizedHandler.invoke(HiveMetaStoreClient.java:2773) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at com.sun.proxy.$Proxy60.getNextNotification(Unknown Source) ~[?:?]\r\n at org.apache.hadoop.hive.metastore.messaging.EventUtils$MSClientNotificationFetcher.getNextNotificationEvents(EventUtils.java:94) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hadoop.hive.metastore.messaging.EventUtils$NotificationEventIterator.fetchNextBatch(EventUtils.java:146) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hadoop.hive.metastore.messaging.EventUtils$NotificationEventIterator.hasNext(EventUtils.java:176) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hadoop.hive.ql.exec.repl.ReplDumpTask.incrementalDump(ReplDumpTask.java:170) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hadoop.hive.ql.exec.repl.ReplDumpTask.execute(ReplDumpTask.java:121) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:205) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:97) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:2668) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:2339) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:2015) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hadoop.hive.ql.Driver.run(Driver.java:1713) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hadoop.hive.ql.Driver.run(Driver.java:1707) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hadoop.hive.ql.reexec.ReExecDriver.run(ReExecDriver.java:157) ~[hive-exec-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hive.service.cli.operation.SQLOperation.runQuery(SQLOperation.java:224) ~[hive-service-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hive.service.cli.operation.SQLOperation.access$700(SQLOperation.java:87) ~[hive-service-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at org.apache.hive.service.cli.operation.SQLOperation$BackgroundWork$1.run(SQLOperation.java:316) ~[hive-service-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_112]\r\n at javax.security.auth.Subject.doAs(Subject.java:422) ~[?:1.8.0_112]\r\n at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1688) ~[hadoop-common-3.1.0.3.0.0.0-1605.jar:?]\r\n at org.apache.hive.service.cli.operation.SQLOperation$BackgroundWork.run(SQLOperation.java:329) ~[hive-service-3.1.0.3.0.0.0-1605.jar:3.1.0.3.0.0.0-1605]\r\n at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:1.8.0_112]\r\n at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_112]\r\n at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:1.8.0_112]\r\n at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_112]\r\n at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[?:1.8.0_112]\r\n at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[?:1.8.0_112]\r\n at java.lang.Thread.run(Thread.java:745) [?:1.8.0_112]\r\n2018-07-10T18:07:33,157 INFO [org.apache.ranger.audit.queue.AuditBatchQueue1]: destination.HDFSAuditDestination (:()) - Flushing HDFS audit. Event Size:4\r\n2018-07-10T18:07:37,842 INFO [HiveServer2-Background-Pool: Thread-15161]: metastore.RetryingMetaStoreClient (:()) - RetryingMetaStoreClient trying reconnect as hive (auth:SIMPLE)\r\n2018-07-10T18:07:37,842 INFO [HiveServer2-Background-Pool: Thread-15161]: metastore.HiveMetaStoreClient (:()) - Trying to connect to metastore with URI thrift://hwx-demo-2.field.hortonworks.com:9083\r\n2018-07-10T18:07:37,842 INFO [HiveServer2-Background-Pool: Thread-15161]: metastore.HiveMetaStoreClient (:()) - Opened a connection to metastore, current connections: 19\r\n2018-07-10T18:07:37,843 INFO [HiveServer2-Background-Pool: Thread-15161]: metastore.HiveMetaStoreClient (:()) - Connected to metastore.\r\n2018-07-10T18:07:37,864 INFO [HiveServer2-Background-Pool: Thread-15161]: ReplState (:()) - REPL::END: \\{\"dbName\":\"*\",\"dumpType\":\"INCREMENTAL\",\"actualNumEvents\":11,\"dumpEndTime\":1531246057,\"dumpDir\":\"/user/hive/repl/c72dc152-c252-4454-9b0e-cf8c335ab07c\",\"lastReplId\":\"60769\"}\r\n2018-07-10T18:07:37,864 INFO [HiveServer2-Background-Pool: Thread-15161]: repl.ReplDumpTask (:()) - Done dumping events, preparing to return /user/hive/repl/c72dc152-c252-4454-9b0e-cf8c335ab07c,60769\r\n2018-07-10T18:07:37,919 INFO [HiveServer2-Background-Pool: Thread-15161]: ql.Driver (:()) - Completed executing command(queryId=hive_20180710180732_7dcc20db-90db-486d-a825-e6fa91dc092b); Time taken: 5.419 seconds\r\n2018-07-10T18:07:37,919 INFO [HiveServer2-Background-Pool: Thread-15161]: ql.Driver (:()) - OK\r\n{code}\r\nMetastore connection failed 1st attempt, but success after reconnect. That adds 5s for every repl dump command and likely to leak connection.\r\n\r\nSimilarly, Hive.close() also causes \r\n{code:java}\r\norg.apache.thrift.transport.TTransportException: Cannot write to null outputStream{code}\r\n ",
        "duedate": null,
        "environment": null,
        "fixVersions": [
            {
                "archived": false,
                "id": "12343343",
                "name": "4.0.0",
                "released": false,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343343"
            },
            {
                "archived": false,
                "description": "",
                "id": "12343559",
                "name": "3.2.0",
                "released": false,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343559"
            }
        ],
        "issuelinks": [],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [
            "DR",
            "pull-request-available",
            "replication"
        ],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "id": "3",
            "name": "Major",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310843&avatarId=11935",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310843&avatarId=11935",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310843&avatarId=11935",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935"
            },
            "id": "12310843",
            "key": "HIVE",
            "name": "Hive",
            "projectCategory": {
                "description": "Scalable Distributed Computing",
                "id": "10292",
                "name": "Hadoop",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10292"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12310843"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sankarh&avatarId=29945",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sankarh&avatarId=29945",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sankarh&avatarId=29945",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=sankarh&avatarId=29945"
            },
            "displayName": "Sankar Hariappan",
            "key": "sankarh",
            "name": "sankarh",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=sankarh",
            "timeZone": "Asia/Kolkata"
        },
        "resolution": {
            "description": "A fix for this issue is checked into the tree and tested.",
            "id": "1",
            "name": "Fixed",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/1"
        },
        "resolutiondate": "2018-07-30T17:56:24.000+0000",
        "status": {
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "id": "5",
            "name": "Resolved",
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [],
        "summary": "Metastore connection fails for first attempt in repl dump.",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2018-07-30T17:56:24.000+0000",
        "versions": [
            {
                "archived": false,
                "id": "12340268",
                "name": "3.0.0",
                "releaseDate": "2018-05-21",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12340268"
            },
            {
                "archived": false,
                "description": "",
                "id": "12343014",
                "name": "3.1.0",
                "releaseDate": "2018-07-30",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343014"
            },
            {
                "archived": false,
                "id": "12343343",
                "name": "4.0.0",
                "released": false,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12343343"
            }
        ],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HIVE-20209/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HIVE-20209/watchers",
            "watchCount": 4
        },
        "workratio": -1
    },
    "id": "13173119",
    "key": "HIVE-20209",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13173119"
}