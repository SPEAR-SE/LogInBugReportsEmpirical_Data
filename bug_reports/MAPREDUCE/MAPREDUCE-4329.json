{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Sho Shimauchi",
            "key": "sho.shimauchi",
            "name": "sho.shimauchi",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=sho.shimauchi",
            "timeZone": "Asia/Tokyo"
        },
        "components": [{
            "id": "12313041",
            "name": "security",
            "self": "https://issues.apache.org/jira/rest/api/2/component/12313041"
        }],
        "created": "2012-06-08T10:56:27.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Sho Shimauchi",
            "key": "sho.shimauchi",
            "name": "sho.shimauchi",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=sho.shimauchi",
            "timeZone": "Asia/Tokyo"
        },
        "customfield_10010": null,
        "customfield_12310191": null,
        "customfield_12310192": null,
        "customfield_12310220": "2012-06-08T13:52:41.949+0000",
        "customfield_12310222": null,
        "customfield_12310230": null,
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "2.0",
        "customfield_12310320": null,
        "customfield_12310420": "252678",
        "customfield_12310920": "74113",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i0d22v:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Sun Aug 19 08:19:36 UTC 2012",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "On running MapReduce job, username is changed to jobid and the job fails.\nException is as follows:\n\n{code}\n2012-06-08 19:39:26,555 WARN org.apache.hadoop.security.ShellBasedUnixGroupsMapping: got exception trying to get groups for user job_201206081934_0002\norg.apache.hadoop.util.Shell$ExitCodeException: id: job_201206081934_0002: no such user\n\n        at org.apache.hadoop.util.Shell.runCommand(Shell.java:255)\n        at org.apache.hadoop.util.Shell.run(Shell.java:182)\n        at org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:375)\n        at org.apache.hadoop.util.Shell.execCommand(Shell.java:461)\n        at org.apache.hadoop.util.Shell.execCommand(Shell.java:444)\n        at org.apache.hadoop.security.ShellBasedUnixGroupsMapping.getUnixGroups(ShellBasedUnixGroupsMapping.java:68)\n        at org.apache.hadoop.security.ShellBasedUnixGroupsMapping.getGroups(ShellBasedUnixGroupsMapping.java:45)\n        at org.apache.hadoop.security.Groups.getGroups(Groups.java:79)\n        at org.apache.hadoop.security.UserGroupInformation.getGroupNames(UserGroupInformation.java:1026)\n        at org.apache.hadoop.security.authorize.AccessControlList.isUserAllowed(AccessControlList.java:141)\n        at org.apache.hadoop.security.authorize.ServiceAuthorizationManager.authorize(ServiceAuthorizationManager.java:99)\n        at org.apache.hadoop.ipc.Server.authorize(Server.java:1659)\n        at org.apache.hadoop.ipc.Server$Connection.authorizeConnection(Server.java:1320)\n        at org.apache.hadoop.ipc.Server$Connection.processOneRpc(Server.java:1286)\n        at org.apache.hadoop.ipc.Server$Connection.readAndProcess(Server.java:1182)\n        at org.apache.hadoop.ipc.Server$Listener.doRead(Server.java:537)\n        at org.apache.hadoop.ipc.Server$Listener$Reader.run(Server.java:344)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n        at java.lang.Thread.run(Thread.java:680)\n{code}\n\nThis issue can be reproduced by following steps:\n\n1. set hadoop.security.authorization = true in core-site.xml\n\n{code}\n  <property>\n    <name>hadoop.security.authorization<\/name>\n    <value>true<\/value>\n  <\/property>\n{code}\n\n2. set any value except for '*' to security.task.umbilical.protocol.acl in hadoop-policy.xml\n\n{code}\n\n  <property>\n    <name>security.task.umbilical.protocol.acl<\/name>\n    <value>sho sho<\/value>\n    <description>ACL for TaskUmbilicalProtocol, used by the map and reduce \n    tasks to communicate with the parent tasktracker. \n    The ACL is a comma-separated list of user and group names. The user and \n    group list is separated by a blank. For e.g. \"alice,bob users,wheel\". \n    A special value of \"*\" means all users are allowed.<\/description>\n  <\/property>\n{code}\n\n3. run any mapreduce job.\n\n\nh4. Code Analysis\n\n./src/mapred/org/apache/hadoop/mapred/Child.java:102-118\n\n{code}\n    UserGroupInformation taskOwner \n     = UserGroupInformation.createRemoteUser(firstTaskid.getJobID().toString());\n    taskOwner.addToken(jt);\n    \n    // Set the credentials\n    defaultConf.setCredentials(credentials);\n    \n    final TaskUmbilicalProtocol umbilical = \n      taskOwner.doAs(new PrivilegedExceptionAction<TaskUmbilicalProtocol>() {\n        @Override\n        public TaskUmbilicalProtocol run() throws Exception {\n          return (TaskUmbilicalProtocol)RPC.getProxy(TaskUmbilicalProtocol.class,\n              TaskUmbilicalProtocol.versionID,\n              address,\n              defaultConf);\n        }\n    });\n{code}\n\n\nThis code indicates that TaskUmbilicalProtocol uses jobid as username.\nThis code came from MAPREDUCE-1457. \nhttps://issues.apache.org/jira/browse/MAPREDUCE-1457\n\nDevaraj said as follows in the JIRA:\n\n{quote}\n2) In Child.java, the task authenticates to the TaskTracker using the jobtoken. The username in the jobtoken is jobId. The doAs block done using taskOwner is required so that the username mentioned in the token and the one doing the operation matches.\n{quote}\n\nWe can't change security.task.umbilical.protocol.acl and should always be '*' .\nTaskUmbilicalProtocol should be removed from MapReducePolicyProvider to disable security.task.umbilical.protocol.acl.\n\n",
        "duedate": null,
        "environment": null,
        "fixVersions": [],
        "issuelinks": [
            {
                "id": "12356798",
                "outwardIssue": {
                    "fields": {
                        "issuetype": {
                            "avatarId": 21133,
                            "description": "A problem which impairs or prevents the functions of the product.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                            "id": "1",
                            "name": "Bug",
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                            "subtask": false
                        },
                        "priority": {
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "id": "3",
                            "name": "Major",
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
                        },
                        "status": {
                            "description": "The issue is open and ready for the assignee to start work on it.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
                            "id": "1",
                            "name": "Open",
                            "self": "https://issues.apache.org/jira/rest/api/2/status/1",
                            "statusCategory": {
                                "colorName": "blue-gray",
                                "id": 2,
                                "key": "new",
                                "name": "To Do",
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2"
                            }
                        },
                        "summary": "security.job.task.protocol.acl should not be used"
                    },
                    "id": "12603976",
                    "key": "MAPREDUCE-4566",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/12603976"
                },
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12356798",
                "type": {
                    "id": "10030",
                    "inward": "is related to",
                    "name": "Reference",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                }
            },
            {
                "id": "12437482",
                "inwardIssue": {
                    "fields": {
                        "issuetype": {
                            "avatarId": 21140,
                            "description": "An improvement or enhancement to an existing feature or task.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype",
                            "id": "4",
                            "name": "Improvement",
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/4",
                            "subtask": false
                        },
                        "priority": {
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
                            "id": "3",
                            "name": "Major",
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
                        },
                        "status": {
                            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                            "id": "6",
                            "name": "Closed",
                            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                            "statusCategory": {
                                "colorName": "green",
                                "id": 3,
                                "key": "done",
                                "name": "Done",
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
                            }
                        },
                        "summary": "AccessControlList should avoid calling getGroupNames in isUserInList with empty groups."
                    },
                    "id": "12864129",
                    "key": "HADOOP-12413",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/12864129"
                },
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12437482",
                "type": {
                    "id": "10030",
                    "inward": "is related to",
                    "name": "Reference",
                    "outward": "relates to",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"
                }
            }
        ],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "id": "3",
            "name": "Major",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096"
            },
            "id": "12310941",
            "key": "MAPREDUCE",
            "name": "Hadoop Map/Reduce",
            "projectCategory": {
                "description": "Scalable Distributed Computing",
                "id": "10292",
                "name": "Hadoop",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10292"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12310941"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Sho Shimauchi",
            "key": "sho.shimauchi",
            "name": "sho.shimauchi",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=sho.shimauchi",
            "timeZone": "Asia/Tokyo"
        },
        "resolution": null,
        "resolutiondate": null,
        "status": {
            "description": "The issue is open and ready for the assignee to start work on it.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
            "id": "1",
            "name": "Open",
            "self": "https://issues.apache.org/jira/rest/api/2/status/1",
            "statusCategory": {
                "colorName": "blue-gray",
                "id": 2,
                "key": "new",
                "name": "To Do",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2"
            }
        },
        "subtasks": [],
        "summary": "security.task.umbilical.protocol.acl should not be configurable",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2015-09-15T18:29:17.000+0000",
        "versions": [{
            "archived": false,
            "description": "maintenance release on branch-1.0",
            "id": "12320250",
            "name": "1.0.3",
            "releaseDate": "2012-05-07",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12320250"
        }],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-4329/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-4329/watchers",
            "watchCount": 5
        },
        "workratio": -1
    },
    "id": "12559828",
    "key": "MAPREDUCE-4329",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/12559828"
}