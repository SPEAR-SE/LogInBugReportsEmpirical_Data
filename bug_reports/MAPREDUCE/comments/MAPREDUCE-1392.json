[Duplicate MAPREDUCE-1172?, On one of our QA clusters, we see consistent failure of TestReduceFetch.testReduceFromPartialMem(). A git-bisect revealed that the original test as added by HADOOP-3446 passes, but the "fix" implemented in HADOOP-4302 causes it to fail. Note that other machines (both 32- and 64-bit) do not experience the test failure.

The dialogue in HADOOP-4302 says that the test is still race-prone, and that the "fix" in HADOOP-4302 tweaked some parameters in an attempt to make such conditions less likely. Is it possible to move these parameters into a better position that would make this even less likely? (I don't fully understand the relationship between them all and this test.)

Ultimately, it would be good to completely refactor the test into one that's deterministic. As is, it's hard to tell what we learn from a failure in this test suite., Yes, it seems that is the case.]