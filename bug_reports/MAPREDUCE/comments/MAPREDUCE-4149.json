[Attaching patch for trunk with the fix., Attaching patch for branch-1 with the fix. Also added testcase that fails without this fix and passes with the fix., Ravi, let 'UserCounterMapper' extend 'IdentityMapper'. This way, you can set our special counters in UserCounterMapper's map api and then invoke IdentityMapper's map() api. Thoughts?, Attaching updated patch for branch-1, +1 for the branch-1 patch., I just committed the patch to trunk., Integrated in Hadoop-Hdfs-trunk-Commit #2169 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2169/])
    MAPREDUCE-4149. [Rumen] Rumen fails to parse certain counter strings. (ravigummadi) (Revision 1327461)

     Result = SUCCESS
ravigummadi : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1327461
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-tools/hadoop-rumen/src/main/java/org/apache/hadoop/tools/rumen/HistoryEventEmitter.java
, Integrated in Hadoop-Common-trunk-Commit #2096 (See [https://builds.apache.org/job/Hadoop-Common-trunk-Commit/2096/])
    MAPREDUCE-4149. [Rumen] Rumen fails to parse certain counter strings. (ravigummadi) (Revision 1327461)

     Result = SUCCESS
ravigummadi : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1327461
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-tools/hadoop-rumen/src/main/java/org/apache/hadoop/tools/rumen/HistoryEventEmitter.java
, Integrated in Hadoop-Mapreduce-trunk-Commit #2111 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/2111/])
    MAPREDUCE-4149. [Rumen] Rumen fails to parse certain counter strings. (ravigummadi) (Revision 1327461)

     Result = SUCCESS
ravigummadi : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1327461
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-tools/hadoop-rumen/src/main/java/org/apache/hadoop/tools/rumen/HistoryEventEmitter.java
, Integrated in Hadoop-Mapreduce-trunk #1053 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1053/])
    MAPREDUCE-4149. [Rumen] Rumen fails to parse certain counter strings. (ravigummadi) (Revision 1327461)

     Result = SUCCESS
ravigummadi : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1327461
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-tools/hadoop-rumen/src/main/java/org/apache/hadoop/tools/rumen/HistoryEventEmitter.java
, Integrated in Hadoop-Hdfs-trunk #1019 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1019/])
    MAPREDUCE-4149. [Rumen] Rumen fails to parse certain counter strings. (ravigummadi) (Revision 1327461)

     Result = FAILURE
ravigummadi : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1327461
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-tools/hadoop-rumen/src/main/java/org/apache/hadoop/tools/rumen/HistoryEventEmitter.java
, I pulled this back into branch-2]