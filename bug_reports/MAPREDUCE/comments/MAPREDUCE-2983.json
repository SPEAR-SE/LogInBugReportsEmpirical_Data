[This happens if the NodeManagers are not configured to run the mapreduce specific ShuffleService.

Set _yarn.nodemanager.aux-services_ to _mapreduce.shuffle_ and _yarn.nodemanager.aux-services.mapreduce.shuffle.class_ to _org.apache.hadoop.mapred.ShuffleHandler_ in your yarn-site.xml

This is already mentioned in the INSTALL file.

Please close this ticket if that works for you. Thanks!, Thanks Vinod. It works fine., Could we make this an easier experience for new users by having the MR AM double check that the ShuffleService is configured at application submission time? It seems like, if we know we won't be able to shuffle, we should fail with an obvious message early, rather than getting all the way to running tasks., Good idea Todd. Can you please file a jira? Better yet, a patch!, It is good idea Tood.

@Arun : Can we reopen this issue for providing the patch?, Devaraj - I think it's better to open a new jira. Thanks., bq. Could we make this an easier experience for new users by having the MR AM double check that the ShuffleService is configured at application submission time? 
This is a hack irrespective of whether we do this in the AM or the client.

Unfortunately even that is insufficient. Shuffle service is a configured auxiliary service on the NodeManagers. Auxiliary services are designed to be, well, auxiliary. For e.g. you can imagine only a subset of the cluster to have mapreduce ShuffleService and the rest not to have it. So, the correct way to do this is make the AM request containers on nodes which have the specified auxiliary service configured, basically this should be part of container-requests. Will file a ticket for this.]