[\\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |  16m 43s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |
| {color:green}+1{color} | javac |   8m  2s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |  10m 28s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 23s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   0m 22s | There were no new checkstyle issues. |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 30s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 34s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   0m 44s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | mapreduce tests |   0m 21s | Tests passed in hadoop-mapreduce-client-shuffle. |
| | |  39m 10s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12766902/YARN-4052.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / 8d2d3eb |
| hadoop-mapreduce-client-shuffle test log | https://builds.apache.org/job/PreCommit-YARN-Build/9462/artifact/patchprocess/testrun_hadoop-mapreduce-client-shuffle.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/9462/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf904.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/9462/console |


This message was automatically generated., .2 patch include a unit test, \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |  22m 35s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |
| {color:green}+1{color} | javac |  11m  2s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |  14m 10s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 33s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   0m 29s | There were no new checkstyle issues. |
| {color:red}-1{color} | whitespace |   0m  0s | The patch has 1  line(s) that end in whitespace. Use git apply --whitespace=fix. |
| {color:green}+1{color} | install |   1m 59s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 46s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   1m  1s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | mapreduce tests |   0m 27s | Tests passed in hadoop-mapreduce-client-shuffle. |
| | |  53m  6s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12767111/YARN-4052.2.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / 79b8d60 |
| whitespace | https://builds.apache.org/job/PreCommit-YARN-Build/9465/artifact/patchprocess/whitespace.txt |
| hadoop-mapreduce-client-shuffle test log | https://builds.apache.org/job/PreCommit-YARN-Build/9465/artifact/patchprocess/testrun_hadoop-mapreduce-client-shuffle.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/9465/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf907.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/9465/console |


This message was automatically generated., fix the whitespace issue in .3 patch.
[~jlowe], could you help review the latest patch? Thanks!, \\
\\
| (/) *{color:green}+1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |  22m 22s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |
| {color:green}+1{color} | javac |  10m 52s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |  13m 57s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 31s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   0m 31s | There were no new checkstyle issues. |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   2m  1s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 45s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   0m 57s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | mapreduce tests |   0m 26s | Tests passed in hadoop-mapreduce-client-shuffle. |
| | |  52m 27s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12767671/YARN-4052.3.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / 6c8b6f3 |
| hadoop-mapreduce-client-shuffle test log | https://builds.apache.org/job/PreCommit-YARN-Build/9500/artifact/patchprocess/testrun_hadoop-mapreduce-client-shuffle.txt |
| Test Results | https://builds.apache.org/job/PreCommit-YARN-Build/9500/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf907.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-YARN-Build/9500/console |


This message was automatically generated., Thanks for the patch, Chang!

The main change is fine, but the test could use some cleanup.  There's a lot of copy-n-paste there that is unnecessary.  Since all we're doing is connecting to the socket, there's no need to override any methods except channelOpen and verifyRequest.  The rest will never be invoked.  And since we can access the channel in verifyRequest just as easily as we can in channelOpen, there's really no need to override channelOpen separately.  We can simply check the channel state in the verifyRequest override.  And since we're overriding just one method with a simple implementation, we can just do it with an anonymous class rather than the full boilerplate of a MyShuffle class.

MockShuffleHandler2 should be private static.

The 'input' variable in testSocketKeepAlive is unused.

We should disconnect the client and close the shuffle handler instance at the end of the test., \\
\\
| (/) *{color:green}+1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |  16m 26s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |
| {color:green}+1{color} | javac |   8m 13s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |  10m 41s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 21s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   0m 21s | There were no new checkstyle issues. |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 30s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 34s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   0m 46s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | mapreduce tests |   0m 21s | Tests passed in hadoop-mapreduce-client-shuffle. |
| | |  39m 16s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12767671/YARN-4052.3.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / cb26cd4 |
| hadoop-mapreduce-client-shuffle test log | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6078/artifact/patchprocess/testrun_hadoop-mapreduce-client-shuffle.txt |
| Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6078/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf905.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6078/console |


This message was automatically generated., Thanks [~jlowe] for review! Have addressed your concerns in .4 patch, \\
\\
| (/) *{color:green}+1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |  16m 14s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |
| {color:green}+1{color} | javac |   7m 51s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |  10m 20s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 24s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   0m 21s | There were no new checkstyle issues. |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 30s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 34s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   0m 45s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | mapreduce tests |   0m 20s | Tests passed in hadoop-mapreduce-client-shuffle. |
| | |  38m 22s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12767846/MAPREDUCE-6518.4.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / d759b4b |
| hadoop-mapreduce-client-shuffle test log | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6079/artifact/patchprocess/testrun_hadoop-mapreduce-client-shuffle.txt |
| Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6079/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf903.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6079/console |


This message was automatically generated., +1 lgtm.  Committing this., Thanks, Chang!  I committed this to trunk, branch-2, and branch-2.7., FAILURE: Integrated in Hadoop-trunk-Commit #8682 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/8682/])
MAPREDUCE-6518. Set SO_KEEPALIVE on shuffle connections. Contributed by (jlowe: rev ee9b80acf84718b952cbb82380cd0a4dbe22dc79)
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/main/java/org/apache/hadoop/mapred/ShuffleHandler.java
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/test/java/org/apache/hadoop/mapred/TestShuffleHandler.java
, FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #579 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/579/])
MAPREDUCE-6518. Set SO_KEEPALIVE on shuffle connections. Contributed by (jlowe: rev ee9b80acf84718b952cbb82380cd0a4dbe22dc79)
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/main/java/org/apache/hadoop/mapred/ShuffleHandler.java
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/test/java/org/apache/hadoop/mapred/TestShuffleHandler.java
, FAILURE: Integrated in Hadoop-Yarn-trunk #1301 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/1301/])
MAPREDUCE-6518. Set SO_KEEPALIVE on shuffle connections. Contributed by (jlowe: rev ee9b80acf84718b952cbb82380cd0a4dbe22dc79)
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/main/java/org/apache/hadoop/mapred/ShuffleHandler.java
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/test/java/org/apache/hadoop/mapred/TestShuffleHandler.java
, FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #565 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/565/])
MAPREDUCE-6518. Set SO_KEEPALIVE on shuffle connections. Contributed by (jlowe: rev ee9b80acf84718b952cbb82380cd0a4dbe22dc79)
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/test/java/org/apache/hadoop/mapred/TestShuffleHandler.java
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/main/java/org/apache/hadoop/mapred/ShuffleHandler.java
, FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #523 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/523/])
MAPREDUCE-6518. Set SO_KEEPALIVE on shuffle connections. Contributed by (jlowe: rev ee9b80acf84718b952cbb82380cd0a4dbe22dc79)
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/test/java/org/apache/hadoop/mapred/TestShuffleHandler.java
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/main/java/org/apache/hadoop/mapred/ShuffleHandler.java
* hadoop-mapreduce-project/CHANGES.txt
, FAILURE: Integrated in Hadoop-Hdfs-trunk #2460 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2460/])
MAPREDUCE-6518. Set SO_KEEPALIVE on shuffle connections. Contributed by (jlowe: rev ee9b80acf84718b952cbb82380cd0a4dbe22dc79)
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/main/java/org/apache/hadoop/mapred/ShuffleHandler.java
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/test/java/org/apache/hadoop/mapred/TestShuffleHandler.java
* hadoop-mapreduce-project/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #2513 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2513/])
MAPREDUCE-6518. Set SO_KEEPALIVE on shuffle connections. Contributed by (jlowe: rev ee9b80acf84718b952cbb82380cd0a4dbe22dc79)
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/main/java/org/apache/hadoop/mapred/ShuffleHandler.java
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/test/java/org/apache/hadoop/mapred/TestShuffleHandler.java
]