[log messages show the following:
-------------------------------------------------
    [junit] 2009-12-09 17:07:16,371 INFO  tasktracker.Localizer (Localizer.java:initializeUserDirs(202)) - Initializing user ravi_tmp on this TT.
    [junit] 2009-12-09 17:07:16,390 WARN  mapred.LinuxTaskController (LinuxTaskController.java:runCommand(192)) - Exit code from INITIALIZE_USER is : 139
    [junit] 2009-12-09 17:07:16,391 WARN  mapred.LinuxTaskController (LinuxTaskController.java:runCommand(194)) - Exception thrown by INITIALIZE_USER : org.apache.hadoop.util.Shell$ExitCodeException:
    [junit]     at org.apache.hadoop.util.Shell.runCommand(Shell.java:243)
    [junit]     at org.apache.hadoop.util.Shell.run(Shell.java:170)
    [junit]     at org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:363)
    [junit]     at org.apache.hadoop.mapred.LinuxTaskController.runCommand(LinuxTaskController.java:190)
    [junit]     at org.apache.hadoop.mapred.LinuxTaskController.initializeUser(LinuxTaskController.java:425)
    [junit]     at org.apache.hadoop.mapred.ClusterWithLinuxTaskController$MyLinuxTaskController.initializeUser(ClusterWithLinuxTaskController.java:68)
    [junit]     at org.apache.hadoop.mapreduce.server.tasktracker.Localizer.initializeUserDirs(Localizer.java:271)
    [junit]     at org.apache.hadoop.mapred.TestTaskTrackerLocalization.testTaskLocalization(TestTaskTrackerLocalization.java:456)
    [junit]     at org.apache.hadoop.mapred.TestLocalizationWithLinuxTaskController.testTaskLocalization(TestLocalizationWithLinuxTaskController.java:223)
-------------------------------------------------------


fts_open() in secure_path() seem to be making task-controller exit., The trunk test passes successfully for me. Some mistake in building the binary or using an old version of the binary? Can you recheck?, Attaching patch with the fix.

Problem was that the paths array passed to fts_open() should be null-terminated as per the man page., The issue of "not having null-terminated array that is being passed to fts_open()" is caught now because of different code generated by gcc with the option -O2 added in task-controller's MakeFile.in in MAPREDUCE-1119., Unit tests passed on my local machine. Only failures are TestGridmixSubmission(MAPREDUCE-1124) and TestTrackerDistributedCacheManagerWithLinuxTaskController(MAPREDUCE-1289)., The reason I think why I didn't get this error is that I have more recent versions of the glibc(2.10-1) (which are more forgiving, perhaps)., +1 for the patch., submitting for hudson, -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12427577/MR-1284.patch
  against trunk revision 891111.

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    +1 core tests.  The patch passed core unit tests.

    -1 contrib tests.  The patch failed contrib unit tests.

Test results: http://hudson.zones.apache.org/hudson/job/Mapreduce-Patch-h3.grid.sp2.yahoo.net/200/testReport/
Findbugs warnings: http://hudson.zones.apache.org/hudson/job/Mapreduce-Patch-h3.grid.sp2.yahoo.net/200/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Checkstyle results: http://hudson.zones.apache.org/hudson/job/Mapreduce-Patch-h3.grid.sp2.yahoo.net/200/artifact/trunk/build/test/checkstyle-errors.html
Console output: http://hudson.zones.apache.org/hudson/job/Mapreduce-Patch-h3.grid.sp2.yahoo.net/200/console

This message is automatically generated., Contrib tests failures shown are not related to this patch., +1 for the patch. Given the nature of the fix, and the fact that it fixes a broken test (which I verified by running manually), I think there is no need for additional tests. I will commit this., I committed this to trunk and branch 0.21. Thanks, Ravi !, Integrated in Hadoop-Mapreduce-trunk #196 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-Mapreduce-trunk/196/])
    ]