[*the  last log in MRAppMaster as follows:*

2018-04-18 10:10:39,328 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:40,329 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:41,330 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:42,332 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:43,333 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:44,334 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:45,336 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:46,337 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:47,338 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:48,340 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:49,341 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:50,343 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:51,344 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:52,345 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:53,346 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:54,348 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:55,350 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:56,351 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:57,353 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:58,354 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:10:59,355 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:11:00,390 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:11:01,392 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:11:02,393 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:11:03,394 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:11:04,395 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered. 2018-04-18 10:11:05,397 INFO [Thread-67] org.apache.hadoop.mapreduce.v2.app.rm.RMContainerAllocator: Waiting for application to be successfully unregistered

*It seems the AppMaster does not quit normally*, The  logs in RM.[^RM.log]  , Looks like the AM was not able to successfully unregister with the RM, but there's no indication as to why it would be having issues (no exception logged).  There's also no indication in the RM log as to why it was not able to process the unregistration.  A few followup questions:

Is this reproducible?

Is the RM log filtered for just this application or the entire log?  If it's filtered, I'm curious if there were any exceptions logged that did not contain the app ID during this time period.

Did the application transition out of the RUNNING state after the 10 minute expiration?  I see it lingered for a little over 10 minutes in the FINISHING state according to the RM log, which correlates with the AM's log indicating it is having difficulty unregistering.
{noformat}
018-04-18 10:10:39,350 INFO org.apache.hadoop.yarn.server.resourcemanager.rmapp.RMAppImpl: application_1521543893962_10055214 State change from RUNNING to KILLING
2018-04-18 10:10:39,389 INFO org.apache.hadoop.yarn.server.resourcemanager.rmapp.attempt.RMAppAttemptImpl: Updating application attempt appattempt_1521543893962_10055214_000001 with final state: FINISHING
2018-04-18 10:10:39,391 INFO org.apache.hadoop.yarn.server.resourcemanager.rmapp.attempt.RMAppAttemptImpl: appattempt_1521543893962_10055214_000001 State change from RUNNING to FINAL_SAVING
2018-04-18 10:10:39,471 INFO org.apache.hadoop.yarn.server.resourcemanager.rmapp.attempt.RMAppAttemptImpl: appattempt_1521543893962_10055214_000001 State change from FINAL_SAVING to FINISHING
2018-04-18 10:21:55,073 INFO org.apache.hadoop.yarn.util.AbstractLivelinessMonitor: Expired:appattempt_1521543893962_10055214_000001 Timed out after 600 secs
2018-04-18 10:21:55,073 INFO org.apache.hadoop.yarn.server.resourcemanager.ApplicationMasterService: Unregistering app attempt : appattempt_1521543893962_10055214_000001
2018-04-18 10:21:55,073 INFO org.apache.hadoop.yarn.server.resourcemanager.rmapp.attempt.RMAppAttemptImpl: appattempt_1521543893962_10055214_000001 State change from FINISHING to FINISHED
2018-04-18 10:21:55,073 INFO org.apache.hadoop.yarn.server.resourcemanager.amlauncher.AMLauncher: Cleaning master appattempt_1521543893962_10055214_000001
2018-04-18 10:21:56,095 INFO org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FairScheduler: Application appattempt_1521543893962_10055214_000001 is done. finalState=FINISHED
2018-04-18 10:21:56,095 INFO org.apache.hadoop.yarn.server.resourcemanager.rmcontainer.RMContainerImpl: container_1521543893962_10055214_01_000004 Container Transitioned from ACQUIRED to KILLED
{noformat}

Is this really against Apache Hadoop 2.4.0?  If so that is a very old release, and I would highly recommend upgrading to at least 2.7 to see if it occurs there.
, [~jlowe]Thanks for your reply
{quote}Is this reproducible
{quote}
it's hard to reappear
{quote}Is the RM log filtered for just this application or the entire log?
{quote}
because the log in RM is too large, so it's filtered by applicationId, and i did not found any exception in RM entire log.
{quote}Did the application transition out of the RUNNING state after the 10 minute expiration?
{quote}
yes,it seems the applicaiton can't unregister in 10 minutes and RM also can't receive its heatbeat .

 
{quote}Is this really against Apache Hadoop 2.4.0?
{quote}
yes, our version is 2.4.0 , i don't know if this bug also exist in 2.7.0 .]