[Attaching patch for Y20 (on behalf of Owen). Not for commit here., This patch is a bugfix on top of the earlier patch. , Patch for trunk., There is an unrelated change in the file Example.java. Other than that, looks fine., New patch addressing the comment., Added a new test which uses the binary token file., ant test was run manually. All tests pass except TestRumenJobTraces, which is unrelated., Couldn't we enhance TestTokenCache instead of adding a new test. Also, in the mapper, we should look at the credentials via the APIs (as is done in TestTokenCache) instead of reading the file..., When credentials object reads a token from file, it clears all exisiting credentials. Therefore, merging the two will require another job and mapper implementation. It will be cleaner to have a separate test. Also, the mechanism to pass tokens via a file is not much related to TokenCache except that it uses obtainTokensFromNamenodeInternal method.

> Also, in the mapper, we should look at the credentials via the APIs (as is done in TestTokenCache) instead of reading the file
The map task in the new test gets the tokens from credentials and verifies it against the token in the file, therefore it also reads the file., I just committed this. Thanks, Jitendra & Owen!, Integrated in Hadoop-Mapreduce-trunk-Commit #523 (See [https://hudson.apache.org/hudson/job/Hadoop-Mapreduce-trunk-Commit/523/])
    ]