[Error msg :
{code}
Testcase: testPublicPrivateCache took 0.685 sec
        FAILED
Cache file didn't get localized in the expected directory. Expected localization to happen within /somedir/build/test/data/TestTrackerDistributedCacheManager/mapred/local/taskTracker/distcache, but was localized at /somedir/build/test/data/TestTrackerDistributedCacheManager/mapred/local/0_1/taskTracker/amar/distcache/3195055460101019326/file/somedir/build/test/data/TestTrackerDistributedCacheManager/fourthcachefile
junit.framework.AssertionFailedError: Cache file didn't get localized in the expected directory. Expected localization to happen within /somedir/build/test/data/TestTrackerDistributedCacheManager/mapred/local/taskTracker/distcache, but was localized at
 /somedir/build/test/data/TestTrackerDistributedCacheManager/mapred/local/0_1/taskTracker/amar/distcache/3195055460101019326/file/somedir/build/test/data/TestTrackerDistributedCacheManager/fourthcachefile
        at org.apache.hadoop.mapreduce.filecache.TestTrackerDistributedCacheManager.checkLocalizedPath(TestTrackerDistributedCacheManager.java:342
)
        at org.apache.hadoop.mapreduce.filecache.TestTrackerDistributedCacheManager.testPublicPrivateCache(TestTrackerDistributedCacheManager.java
:299)

{code}, What version did this affect?  Does the problem still exist on trunk?  (What was the failure rate, and was it deterministic or did it hit different nodes at different times?), I also see the above failure on machine consistently, even on trunk. It runs fine when I run it on a different machine., Attaching the full log of the failure, bq. I also see the above failure on machine consistently, even on trunk. It runs fine when I run it on a different machine.

Interesting.  Are the machines configured similarly?  OS version (kernel,
distro, Java, etc.), hardware, NFS mounts, Hadoop build (both fresh from
checkouts, same build.properties, no .ivy2 cache), Hadoop configs, UID/GID,
etc.?

Note that the actual location in the failing version contains a large chunk
of duplicated path.  I've broken it into four pieces here, the first and
third of which are identical:

/home/amarsri/workspace/trunk/build/test/data/TestTrackerDistributedCacheManager
/mapred/local/0_3/taskTracker/amarsri/distcache/-5787616074854057823/file
/home/amarsri/workspace/trunk/build/test/data/TestTrackerDistributedCacheManager
/fourthcachefile

I haven't touched the distributed cache before, so I don't know if that's
(relatively) normal or not.
, This test fails 100% of the time on an ubuntu maverick host but not on a centos 5 host (both 64-bit), same build (apache git hash 872045e on branch-20-security). Details follow.

{noformat}
Testcase: testReferenceCount took 0.149 sec
        FAILED
null
junit.framework.AssertionFailedError: null
        at org.apache.hadoop.filecache.TestTrackerDistributedCacheManager.testReferenceCount(TestTrackerDistributedCacheManager.java:295)

Testcase: testPublicPrivateCache took 0.07 sec
        FAILED
Cache file didn't get localized in the expected directory. Expected localization to happen within /home/eli/src/cloudera/hadoop2/build/test/data/TestTrackerDistributedCacheManager/mapred/local/taskTracker/distcache, but was localized at /home/eli/src/cloudera/hadoop2/build/test/data/TestTrackerDistributedCacheManager/mapred/local/0_4/taskTracker/eli/distcache/-5724153943922661159_643043263_956116095/file/home/eli/src/cloudera/hadoop2/build/test/data/TestTrackerDistributedCacheManager/fourthcachefile
junit.framework.AssertionFailedError: Cache file didn't get localized in the expected directory. Expected localization to happen within /home/eli/src/cloudera/hadoop2/build/test/data/TestTrackerDistributedCacheManager/mapred/local/taskTracker/distcache, but was localized at /home/eli/src/cloudera/hadoop2/build/test/data/TestTrackerDistributedCacheManager/mapred/local/0_4/taskTracker/eli/distcache/-5724153943922661159_643043263_956116095/file/home/eli/src/cloudera/hadoop2/build/test/data/TestTrackerDistributedCacheManager/fourthcachefile
        at org.apache.hadoop.filecache.TestTrackerDistributedCacheManager.checkLocalizedPath(TestTrackerDistributedCacheManager.java:468)
        at org.apache.hadoop.filecache.TestTrackerDistributedCacheManager.testPublicPrivateCache(TestTrackerDistributedCacheManager.java:324)
{noformat}, The issue isn't host specific, the fix is to chmod a+x the hadoop directory. See MAPREDUCE-2073. I'll commit it to 20x.]