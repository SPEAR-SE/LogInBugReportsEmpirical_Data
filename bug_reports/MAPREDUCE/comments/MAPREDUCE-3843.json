[Unit tests not applicable as simple script change. Have manually tested on a single node cluster., -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12514118/MAPREDUCE-3843.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed these unit tests:
                  org.apache.hadoop.yarn.util.TestLinuxResourceCalculatorPlugin

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/1834//testReport/
Console output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/1834//console

This message is automatically generated., Fixing doc stuff, -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12514126/MAPREDUCE-3843.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed these unit tests:
                  org.apache.hadoop.yarn.util.TestLinuxResourceCalculatorPlugin

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/1835//testReport/
Console output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/1835//console

This message is automatically generated., Anupam, if you don't mind could you change the rest of the commands in the ClusterSetup to use hadoop-daemon.sh and yarn-daemon.sh appropriately?

I tested starting and stopping the job history server.  Everything worked and the log files (both out and log) and job summary file (mapred-jobsummary.log) were all created properly using the log4j.properties config below. it was started with the command: $HADOOP_COMMON_HOME/sbin/mr-jobhistory-daemon.sh --config $HADOOP_CONF_DIR/ start historyserver. 

I think we need to do some cleanup of the mr-jobhistory-daemon.sh and other scripts since right now its intermixing HADOOP and YARN variables.  I think the log4j.properties template conf file in the tree needs to also be updated.  But I think that can be done in follow up jiras.


hadoop.mapreduce.jobsummary.logger=${hadoop.root.logger}
hadoop.mapreduce.jobsummary.log.file=hadoop-mapreduce.jobsummary.log
mapred.jobsummary.logger=INFO,console
log4j.logger.org.apache.hadoop.mapreduce.jobhistory.JobSummary=${mapred.jobsummary.logger}
log4j.additivity.org.apache.hadoop.mapreduce.jobhistory.JobSummary=false
log4j.appender.JSA=org.apache.log4j.DailyRollingFileAppender
log4j.appender.JSA.File=${hadoop.log.dir}/mapred-jobsummary.log
log4j.appender.JSA.layout=org.apache.log4j.PatternLayout
log4j.appender.JSA.layout.ConversionPattern=%d{ISO8601} %p %c{2}: %m%n
log4j.appender.JSA.DatePattern=.yyyy-MM-dd, Thanks Tom for your feedback. I have incorporated your suggestion to change the rest of the start-up / stop cmds in the docs also., -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12514166/MAPREDUCE-3843.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed these unit tests:
                  org.apache.hadoop.yarn.util.TestLinuxResourceCalculatorPlugin

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/1839//testReport/
Console output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/1839//console

This message is automatically generated., -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12514166/MAPREDUCE-3843.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed these unit tests:
                  org.apache.hadoop.yarn.util.TestLinuxResourceCalculatorPlugin

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/1840//testReport/
Console output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/1840//console

This message is automatically generated., minor update to change HADOOP_PREFIX_HOME to just HADOOP_PREFIX., +1, waiting for jenkins to +1 and then will commit.  Note the previous test failure isn't related to this jira - see MAPREDUCE-3852, -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12514175/MAPREDUCE-3843.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed these unit tests:
                  org.apache.hadoop.yarn.util.TestLinuxResourceCalculatorPlugin

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/1842//testReport/
Console output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/1842//console

This message is automatically generated., Thanks Anupam!!  I committed this to trunk, branch-0.23, and the branch-0.23.1, Integrated in Hadoop-Mapreduce-0.23-Commit #541 (See [https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Commit/541/])
    merge  -r 1242975:1242976 from trunk. FIXES: MAPREDUCE-3843

tgraves : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1242977
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/bin/mr-jobhistory-daemon.sh
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site/src/site/apt/ClusterSetup.apt.vm
, Integrated in Hadoop-Mapreduce-trunk-Commit #1723 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1723/])
    MAPREDUCE-3843. Job summary log file found missing on the RM host (Anupam Seth via tgraves)

tgraves : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1242976
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/bin/mr-jobhistory-daemon.sh
* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site/src/site/apt/ClusterSetup.apt.vm
, Integrated in Hadoop-Common-0.23-Commit #537 (See [https://builds.apache.org/job/Hadoop-Common-0.23-Commit/537/])
    merge  -r 1242975:1242976 from trunk. FIXES: MAPREDUCE-3843

tgraves : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1242977
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/bin/mr-jobhistory-daemon.sh
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site/src/site/apt/ClusterSetup.apt.vm
, Integrated in Hadoop-Common-trunk-Commit #1712 (See [https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1712/])
    MAPREDUCE-3843. Job summary log file found missing on the RM host (Anupam Seth via tgraves)

tgraves : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1242976
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/bin/mr-jobhistory-daemon.sh
* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site/src/site/apt/ClusterSetup.apt.vm
, Integrated in Hadoop-Hdfs-0.23-Commit #526 (See [https://builds.apache.org/job/Hadoop-Hdfs-0.23-Commit/526/])
    merge  -r 1242975:1242976 from trunk. FIXES: MAPREDUCE-3843

tgraves : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1242977
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/bin/mr-jobhistory-daemon.sh
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site/src/site/apt/ClusterSetup.apt.vm
, Integrated in Hadoop-Hdfs-trunk-Commit #1787 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1787/])
    MAPREDUCE-3843. Job summary log file found missing on the RM host (Anupam Seth via tgraves)

tgraves : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1242976
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/bin/mr-jobhistory-daemon.sh
* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site/src/site/apt/ClusterSetup.apt.vm
, Integrated in Hadoop-Hdfs-trunk #953 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/953/])
    MAPREDUCE-3843. Job summary log file found missing on the RM host (Anupam Seth via tgraves)

tgraves : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1242976
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/bin/mr-jobhistory-daemon.sh
* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site/src/site/apt/ClusterSetup.apt.vm
, Integrated in Hadoop-Hdfs-0.23-Build #166 (See [https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/166/])
    merge  -r 1242975:1242976 from trunk. FIXES: MAPREDUCE-3843

tgraves : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1242977
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/bin/mr-jobhistory-daemon.sh
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site/src/site/apt/ClusterSetup.apt.vm
, Integrated in Hadoop-Mapreduce-trunk #986 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/986/])
    MAPREDUCE-3843. Job summary log file found missing on the RM host (Anupam Seth via tgraves)

tgraves : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1242976
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/bin/mr-jobhistory-daemon.sh
* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site/src/site/apt/ClusterSetup.apt.vm
, Integrated in Hadoop-Mapreduce-0.23-Build #189 (See [https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Build/189/])
    merge  -r 1242975:1242976 from trunk. FIXES: MAPREDUCE-3843

tgraves : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1242977
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/bin/mr-jobhistory-daemon.sh
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-site/src/site/apt/ClusterSetup.apt.vm
]