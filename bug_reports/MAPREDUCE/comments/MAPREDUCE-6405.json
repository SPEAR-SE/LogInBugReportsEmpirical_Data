[A problem occurs when you access http://rmhost:rmport/proxy/application_1434432414806_0003/mapreduce/attempts/job_1434432414806_0003/m/RUNNING
{code}
2015-06-15 22:46:56,369 ERROR [378354947@qtp-596129348-3] org.apache.hadoop.mapreduce.v2.app.webapp.AppController: Failed to render attempts page with task type : m for job id : job_1434432414806_0003
java.lang.NullPointerException
	at org.apache.hadoop.mapreduce.v2.app.webapp.TaskPage$AttemptsBlock.render(TaskPage.java:74)
	at org.apache.hadoop.yarn.webapp.view.HtmlBlock.render(HtmlBlock.java:69)
	at org.apache.hadoop.yarn.webapp.view.HtmlBlock.renderPartial(HtmlBlock.java:79)
	at org.apache.hadoop.yarn.webapp.View.render(View.java:235)
	at org.apache.hadoop.yarn.webapp.view.HtmlPage$Page.subView(HtmlPage.java:49)
	at org.apache.hadoop.yarn.webapp.hamlet.HamletImpl$EImp._v(HamletImpl.java:117)
	at org.apache.hadoop.yarn.webapp.hamlet.Hamlet$TD._(Hamlet.java:845)
	at org.apache.hadoop.yarn.webapp.view.TwoColumnLayout.render(TwoColumnLayout.java:56)
	at org.apache.hadoop.yarn.webapp.view.HtmlPage.render(HtmlPage.java:82)
	at org.apache.hadoop.yarn.webapp.Controller.render(Controller.java:212)
	at org.apache.hadoop.mapreduce.v2.app.webapp.AppController.attempts(AppController.java:296)
{code}, Hi [~ryu_kobayashi], It seems that there is a NPE when we access App Attempts page. 

And I think it is coming from this line of code from MAPREDUCE-6364
{code}
String appID = app.getJob().getID().getAppId().toString();
{code}

Can you take a look?, Looks like the problem stems from the fact that AttemptsPage extends TaskPage, and the ability of killing attempt is designed for TaskPage only., \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:red}-1{color} | pre-patch |  16m 17s | Pre-patch trunk has 1 extant Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |
| {color:green}+1{color} | javac |   7m 49s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |   9m 57s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 22s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   0m 38s | There were no new checkstyle issues. |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 39s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 32s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   1m  8s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | mapreduce tests |   9m 10s | Tests passed in hadoop-mapreduce-client-app. |
| | |  47m 36s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12740179/MAPREDUCE-6405.v1.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / 1a169a2 |
| Pre-patch Findbugs warnings | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5809/artifact/patchprocess/trunkFindbugsWarningshadoop-mapreduce-client-app.html |
| hadoop-mapreduce-client-app test log | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5809/artifact/patchprocess/testrun_hadoop-mapreduce-client-app.txt |
| Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5809/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf904.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5809/console |


This message was automatically generated., Hi [~l201514], I see. I did not know that URL page. I checked patch, looks like no problem that patch., Thanks [~l201514] for the patch.

* Can we also allow the kill action from Job Task Attempts(all tasks(m/r) attempts) page instead of disabling the action by fixing the NPE which occurs while getting Task Id to make it consistent with the Task Attempts page?

* And also the kill action link allowing to kill the attempt which is already in KILLED state. Can we make this link to be enabled only when the Kill action is possible for that attempt? If this takes more effort to fix the we can move as a separate JIRA to handle it., [~ryu_kobayashi], You can find this error when you navigate to Job page, and then in Attempt Type section click on any Running of Maps/Reduces, you will get the error in the MRAppMaster log. Or you can also directly open the link in the format http://host2:8088/proxy/application_1434640338211_0008/mapreduce/attempts/job_1434640338211_0008/m/RUNNING to see the exception in MRAppMaster log., [~devaraj.k] I understood. Certainly this error happend. Thanks., FYI, I was reviewing Siqi's patch, and think close to getting it working in both views., [~devaraj.k], please review 002.patch., Thanks [~jira.shegalov] for the patch and addressing my comments in the patch.

I tried with the patch, It fixes the issue and also it doesn't enable kill action when the attempt is in final state.

+1, pending jenkins., +1 with 002.patch, \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:red}-1{color} | pre-patch |  15m 17s | Findbugs (version ) appears to be broken on trunk. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |
| {color:green}+1{color} | javac |   7m 32s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |   9m 37s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 22s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   0m 24s | There were no new checkstyle issues. |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 33s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 33s | The patch built with eclipse:eclipse. |
| {color:red}-1{color} | findbugs |   1m  7s | The patch appears to introduce 1 new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | mapreduce tests |   9m  4s | Tests passed in hadoop-mapreduce-client-app. |
| | |  45m 33s | |
\\
\\
|| Reason || Tests ||
| FindBugs | module:hadoop-mapreduce-client-app |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12740612/MAPREDUCE-6405.002.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / 49f5d20 |
| Findbugs warnings | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5815/artifact/patchprocess/newPatchFindbugsWarningshadoop-mapreduce-client-app.html |
| hadoop-mapreduce-client-app test log | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5815/artifact/patchprocess/testrun_hadoop-mapreduce-client-app.txt |
| Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5815/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf909.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5815/console |


This message was automatically generated., {code:xml}
The patch appears to introduce 1 new Findbugs (version 3.0.0) warnings.
{code}
 Findbugs details are not showing any warnings. 

 Will commit it shortly., Thanks [~jira.shegalov] and [~l201514].

Committed to trunk and branch-2., FAILURE: Integrated in Hadoop-trunk-Commit #8040 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/8040/])
MAPREDUCE-6405. NullPointerException in App Attempts page.  Contributed by (devaraj: rev 311a4179cc53a2754d1185b1cb10e6adb1b95d3d)
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/webapp/TaskPage.java
, SUCCESS: Integrated in Hadoop-Yarn-trunk #964 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/964/])
MAPREDUCE-6405. NullPointerException in App Attempts page.  Contributed by (devaraj: rev 311a4179cc53a2754d1185b1cb10e6adb1b95d3d)
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/webapp/TaskPage.java
, SUCCESS: Integrated in Hadoop-Yarn-trunk-Java8 #234 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/234/])
MAPREDUCE-6405. NullPointerException in App Attempts page.  Contributed by (devaraj: rev 311a4179cc53a2754d1185b1cb10e6adb1b95d3d)
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/webapp/TaskPage.java
, FAILURE: Integrated in Hadoop-Hdfs-trunk #2162 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2162/])
MAPREDUCE-6405. NullPointerException in App Attempts page.  Contributed by (devaraj: rev 311a4179cc53a2754d1185b1cb10e6adb1b95d3d)
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/webapp/TaskPage.java
, FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #223 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/223/])
MAPREDUCE-6405. NullPointerException in App Attempts page.  Contributed by (devaraj: rev 311a4179cc53a2754d1185b1cb10e6adb1b95d3d)
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/webapp/TaskPage.java
* hadoop-mapreduce-project/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #232 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/232/])
MAPREDUCE-6405. NullPointerException in App Attempts page.  Contributed by (devaraj: rev 311a4179cc53a2754d1185b1cb10e6adb1b95d3d)
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/webapp/TaskPage.java
* hadoop-mapreduce-project/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #2180 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2180/])
MAPREDUCE-6405. NullPointerException in App Attempts page.  Contributed by (devaraj: rev 311a4179cc53a2754d1185b1cb10e6adb1b95d3d)
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/webapp/TaskPage.java
* hadoop-mapreduce-project/CHANGES.txt
]