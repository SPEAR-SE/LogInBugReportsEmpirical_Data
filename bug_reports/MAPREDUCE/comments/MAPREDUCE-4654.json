[Looks like some of the tests are commented out as well (eg testUniformSizeDistCp).
, I haven't looked at the code in detail, but is this a case of TestDistCp being replaced by the other tests?

e.g. TestDistCp.testUniforSizeDistCp() vs. TestUniformSizeInputFormat., I don't think so, I pinged MR-2765., I took another look at the code and it does look like TestDistCp is just redundant.

Basic functionality is tested at a more fine-grained level:
* TestCopyMapper to test file mapping (see that both classes have an identical createSourceData() method)
* Test(UniformSize|Dynamic)InputFormat to test input splitting
* TestCopyCommitter to test deletion, atomicity, etc
* TestIntegration to test DistCp end-to-end.
, Thanks Marcelo, all the end-to-end stuff in TestDistCp is covered by TestIntegration now? If so how about we just nuke the test?, Well, it depends on what you call "all the end-to-end stuff".

TestIntegration tests different combinations of input paths (files, directories, globs) and makes sure they map correctly to the target. But it doesn't test things like "-delete" and "-overwrite". Those are tested elsewhere, but those tests are more localized (i.e. they test the classes where those behaviors are implemented, instead of starting a full DistCp job including command line parsing).

The only test that really seems to be missing is TestDistCp.testCleanup(), although that would probably be trivial to add in TestCopyCommitter., We should add that, as well as end to end tests for delete, overwrite etc.  , Just to make sure I understand, TestDistCp.testCleanup() needs to be revived, and new tests need to be written for delete and overwrite?  Should these tests go into TestIntegration or TestDistCp?, {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12546645/MAPREDUCE-4654.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-tools/hadoop-distcp.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/2883//testReport/
Console output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/2883//console

This message is automatically generated., Looks good to me.  It would be nice to have a test for {{\-skipcrccheck}}, but I guess we can do that later (there wasn't one in the original TestDistCp), Integrated in Hadoop-Hdfs-trunk-Commit #2898 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2898/])
    MAPREDUCE-4654. TestDistCp is ignored. Contributed by Sandy Ryza. (Revision 1396047)

     Result = SUCCESS
tomwhite : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1396047
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-tools/hadoop-distcp/src/test/java/org/apache/hadoop/tools/TestDistCp.java
* /hadoop/common/trunk/hadoop-tools/hadoop-distcp/src/test/java/org/apache/hadoop/tools/TestIntegration.java
, Integrated in Hadoop-Common-trunk-Commit #2836 (See [https://builds.apache.org/job/Hadoop-Common-trunk-Commit/2836/])
    MAPREDUCE-4654. TestDistCp is ignored. Contributed by Sandy Ryza. (Revision 1396047)

     Result = SUCCESS
tomwhite : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1396047
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-tools/hadoop-distcp/src/test/java/org/apache/hadoop/tools/TestDistCp.java
* /hadoop/common/trunk/hadoop-tools/hadoop-distcp/src/test/java/org/apache/hadoop/tools/TestIntegration.java
, I just committed this. Thanks Sandy!, Integrated in Hadoop-Mapreduce-trunk-Commit #2859 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/2859/])
    MAPREDUCE-4654. TestDistCp is ignored. Contributed by Sandy Ryza. (Revision 1396047)

     Result = FAILURE
tomwhite : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1396047
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-tools/hadoop-distcp/src/test/java/org/apache/hadoop/tools/TestDistCp.java
* /hadoop/common/trunk/hadoop-tools/hadoop-distcp/src/test/java/org/apache/hadoop/tools/TestIntegration.java
, Integrated in Hadoop-Hdfs-trunk #1191 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1191/])
    MAPREDUCE-4654. TestDistCp is ignored. Contributed by Sandy Ryza. (Revision 1396047)

     Result = SUCCESS
tomwhite : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1396047
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-tools/hadoop-distcp/src/test/java/org/apache/hadoop/tools/TestDistCp.java
* /hadoop/common/trunk/hadoop-tools/hadoop-distcp/src/test/java/org/apache/hadoop/tools/TestIntegration.java
, Integrated in Hadoop-Mapreduce-trunk #1222 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1222/])
    MAPREDUCE-4654. TestDistCp is ignored. Contributed by Sandy Ryza. (Revision 1396047)

     Result = SUCCESS
tomwhite : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1396047
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-tools/hadoop-distcp/src/test/java/org/apache/hadoop/tools/TestDistCp.java
* /hadoop/common/trunk/hadoop-tools/hadoop-distcp/src/test/java/org/apache/hadoop/tools/TestIntegration.java
]