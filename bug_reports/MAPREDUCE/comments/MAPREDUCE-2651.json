[There is a rare race condition in linux task controller when concurrent task processes tries to create job log directory at the same time. Since we change the permissions for a brief moment, at this time, if another task tries to create a directory then the later task will fail with the error like,
{code}
"Directory %s owned by wrong user or group. "
"Expected %d:%d and found %d:%d.\n",
{code}, Attaching a patch., +1. lgtm., Committed to branch-0.20-security (will be in 205). Thanks Bharath!, Some more details:

1. This is a port of the same change Chris Douglas made for MR-279.
2. I have unit tested this code using test-task-controller and all tests pass.
3. Also, I have tested on a multiple user cluster with security and linux task controller configured. And verified all the permissions on the directories., Hadoop 0.20.204.0 was just released., Patch for 22, I just committed this to branch 0.22.1. Thank you Benoy., Integrated in Hadoop-Mapreduce-22-branch #104 (See [https://builds.apache.org/job/Hadoop-Mapreduce-22-branch/104/])
    MAPREDUCE-2651. Fix race condition in Linux task controller for job log directory creation. Contributed by Bharath Mundlapudi and Benoy Antony. (Revision 1346242)

     Result = SUCCESS
shv : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1346242
Files : 
* /hadoop/common/branches/branch-0.22/mapreduce/CHANGES.txt
* /hadoop/common/branches/branch-0.22/mapreduce/src/c++/task-controller/impl/task-controller.c
]