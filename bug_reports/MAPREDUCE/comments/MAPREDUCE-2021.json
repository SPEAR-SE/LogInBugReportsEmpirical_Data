[Patch with the fix and regression test., test-patch result:
{noformat}
     [exec] +1 overall.
     [exec]
     [exec]     +1 @author.  The patch does not contain any @author tags.
     [exec]
     [exec]     +1 tests included.  The patch appears to include 3 new or modified tests.
     [exec]
     [exec]     +1 javadoc.  The javadoc tool did not generate any warning messages.
     [exec]
     [exec]     +1 javac.  The applied patch does not increase the total number of javac compiler warnings.
     [exec]
     [exec]     +1 findbugs.  The patch does not introduce any new Findbugs warnings.
     [exec]
     [exec]     +1 release audit.  The applied patch does not increase the total number of release audit warnings.
     [exec]
{noformat}, Note the similarity to MAPREDUCE-1974.  (Not the same issue, though.), All the core and contrib tests passed with the patch., Patch for Yahoo! distribution. The patch is on top of HADOOP-5759., Looks good. We will need this change too.
One nitpick: Can you also change the comments in the beginning of testSplitPlacement() which describe how files are created?, Patch changes the comments for testSplitPlacement().
test-patch and ant test ran successfully. All core and contrib tests passed except TestTaskLauncher and TestTaskTrackerLocalization (due to MAPREDUCE-2031) and TestJobOutputCommitter(MAPREDUCE-2032)., Scott, Can you have a look at the latest patch? Would like to check this in if there are no further comments. Thanks., Patch has been tested on our cluster. Assuming there are no more comments from Scott, I just committed this., Sorry for the late reply. I just got back from China for the Hadoop China conference.
The patch looks good. Thanks for the fix!, Patch for Yahoo! distribution with comment for test-case fixed., Integrated in Hadoop-Mapreduce-trunk-Commit #523 (See [https://hudson.apache.org/hudson/job/Hadoop-Mapreduce-trunk-Commit/523/])
    ]