[to apply this you should run the script first , then apply the patch.  The version number in the hadoop_datajoin/pom.xml should be udpated when merged to branch-2 or branch-0.23 or others.

./MAPREDUCE-4238.sh svn
patch -p0 < MAPREDUCE-4238.patch

, The changes look good.  The tests pass.  

Findbugs, however complains about hadoop-tools/hadoop-datajoin/dev-support/findbugs-exclude.xml not being present.

My only other thought is that it might be nice to update the packaging to also include the data_join jar., Thanks for the review Bobby.  The data_join jar is already packaged into the hadoop tar.gz:

$ tar -ztvf hadoop-3.0.0-SNAPSHOT.tar.gz | grep datajoin
 hadoop-3.0.0-SNAPSHOT/share/hadoop/tools/lib/hadoop-datajoin-3.0.0-SNAPSHOT.jar

I'm removing the extra findbug-exclude from the pom. There was also 2 findbugs errors that I'm fixing. The errors are:

Bx	Method org.apache.hadoop.contrib.utils.join.JobBase.addLongValue(Object, long) invokes inefficient new Long(long) constructor; use Long.valueOf(long) instead
Bx	Method org.apache.hadoop.contrib.utils.join.JobBase.setLongValue(Object, long) invokes inefficient new Long(long) constructor; use Long.valueOf(long) instead

Will upload new patch shortly., fix findbugs and remove findbugs exclude from the pom.xml, +1 changes look good to me., -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12526402/MAPREDUCE-4238.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 1 new or modified test files.

    -1 patch.  The patch command could not apply the patch.

Console output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/2379//console

This message is automatically generated., Integrated in Hadoop-Hdfs-trunk-Commit #2322 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2322/])
    MAPREDUCE-4238. mavenize data_join. (tgraves) (Revision 1338835)

     Result = SUCCESS
tgraves : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1338835
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/README.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleDataJoinMapper.java
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleDataJoinReducer.java
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleTaggedMapOutput.java
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/java/org
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/test/org
* /hadoop/common/trunk/hadoop-project/pom.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/pom.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main/java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main/java/org
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main/java/org/apache/hadoop/contrib/utils/join/JobBase.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/README.txt
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/SampleDataJoinMapper.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/SampleDataJoinReducer.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/SampleTaggedMapOutput.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/org
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/org/apache/hadoop/contrib/utils/join/TestDataJoin.java
* /hadoop/common/trunk/hadoop-tools/hadoop-tools-dist/pom.xml
* /hadoop/common/trunk/hadoop-tools/pom.xml
, Integrated in Hadoop-Common-trunk-Commit #2248 (See [https://builds.apache.org/job/Hadoop-Common-trunk-Commit/2248/])
    MAPREDUCE-4238. mavenize data_join. (tgraves) (Revision 1338835)

     Result = SUCCESS
tgraves : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1338835
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/README.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleDataJoinMapper.java
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleDataJoinReducer.java
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleTaggedMapOutput.java
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/java/org
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/test/org
* /hadoop/common/trunk/hadoop-project/pom.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/pom.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main/java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main/java/org
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main/java/org/apache/hadoop/contrib/utils/join/JobBase.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/README.txt
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/SampleDataJoinMapper.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/SampleDataJoinReducer.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/SampleTaggedMapOutput.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/org
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/org/apache/hadoop/contrib/utils/join/TestDataJoin.java
* /hadoop/common/trunk/hadoop-tools/hadoop-tools-dist/pom.xml
* /hadoop/common/trunk/hadoop-tools/pom.xml
, I committed this to trunk, branch-2, and branch-0.23, Integrated in Hadoop-Mapreduce-trunk-Commit #2265 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/2265/])
    MAPREDUCE-4238. mavenize data_join. (tgraves) (Revision 1338835)

     Result = ABORTED
tgraves : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1338835
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/README.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleDataJoinMapper.java
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleDataJoinReducer.java
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleTaggedMapOutput.java
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/java/org
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/test/org
* /hadoop/common/trunk/hadoop-project/pom.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/pom.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main/java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main/java/org
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main/java/org/apache/hadoop/contrib/utils/join/JobBase.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/README.txt
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/SampleDataJoinMapper.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/SampleDataJoinReducer.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/SampleTaggedMapOutput.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/org
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/org/apache/hadoop/contrib/utils/join/TestDataJoin.java
* /hadoop/common/trunk/hadoop-tools/hadoop-tools-dist/pom.xml
* /hadoop/common/trunk/hadoop-tools/pom.xml
, Integrated in Hadoop-Hdfs-0.23-Build #258 (See [https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/258/])
    merge -r  1338840:1338841 from branch-2. FIXES: MAPREDUCE-4238 (Revision 1338852)

     Result = UNSTABLE
tgraves : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1338852
Files : 
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/README.txt
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleDataJoinMapper.java
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleDataJoinReducer.java
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleTaggedMapOutput.java
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/data_join/src/java/org
* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/src/contrib/data_join/src/test/org
* /hadoop/common/branches/branch-0.23/hadoop-project/pom.xml
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/pom.xml
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/main
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/main/java
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/main/java/org
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/main/java/org/apache
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/main/java/org/apache/hadoop
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/main/java/org/apache/hadoop/contrib
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/main/java/org/apache/hadoop/contrib/utils
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/main/java/org/apache/hadoop/contrib/utils/join
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/main/java/org/apache/hadoop/contrib/utils/join/ArrayListBackedIterator.java
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/main/java/org/apache/hadoop/contrib/utils/join/DataJoinJob.java
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/main/java/org/apache/hadoop/contrib/utils/join/DataJoinMapperBase.java
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/main/java/org/apache/hadoop/contrib/utils/join/DataJoinReducerBase.java
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/main/java/org/apache/hadoop/contrib/utils/join/JobBase.java
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/main/java/org/apache/hadoop/contrib/utils/join/ResetableIterator.java
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/main/java/org/apache/hadoop/contrib/utils/join/TaggedMapOutput.java
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/test
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/test/java
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/test/java/README.txt
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/test/java/SampleDataJoinMapper.java
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/test/java/SampleDataJoinReducer.java
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/test/java/SampleTaggedMapOutput.java
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/test/java/org
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/test/java/org/apache
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/test/java/org/apache/hadoop
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/test/java/org/apache/hadoop/contrib
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/test/java/org/apache/hadoop/contrib/utils
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/test/java/org/apache/hadoop/contrib/utils/join
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-datajoin/src/test/java/org/apache/hadoop/contrib/utils/join/TestDataJoin.java
* /hadoop/common/branches/branch-0.23/hadoop-tools/hadoop-tools-dist/pom.xml
* /hadoop/common/branches/branch-0.23/hadoop-tools/pom.xml
, Integrated in Hadoop-Hdfs-trunk #1045 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1045/])
    MAPREDUCE-4238. mavenize data_join. (tgraves) (Revision 1338835)

     Result = FAILURE
tgraves : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1338835
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/README.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleDataJoinMapper.java
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleDataJoinReducer.java
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleTaggedMapOutput.java
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/java/org
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/test/org
* /hadoop/common/trunk/hadoop-project/pom.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/pom.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main/java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main/java/org
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main/java/org/apache/hadoop/contrib/utils/join/JobBase.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/README.txt
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/SampleDataJoinMapper.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/SampleDataJoinReducer.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/SampleTaggedMapOutput.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/org
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/org/apache/hadoop/contrib/utils/join/TestDataJoin.java
* /hadoop/common/trunk/hadoop-tools/hadoop-tools-dist/pom.xml
* /hadoop/common/trunk/hadoop-tools/pom.xml
, Integrated in Hadoop-Mapreduce-trunk #1081 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1081/])
    MAPREDUCE-4238. mavenize data_join. (tgraves) (Revision 1338835)

     Result = SUCCESS
tgraves : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1338835
Files : 
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/README.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleDataJoinMapper.java
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleDataJoinReducer.java
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/examples/org/apache/hadoop/contrib/utils/join/SampleTaggedMapOutput.java
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/java/org
* /hadoop/common/trunk/hadoop-mapreduce-project/src/contrib/data_join/src/test/org
* /hadoop/common/trunk/hadoop-project/pom.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/pom.xml
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main/java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main/java/org
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/main/java/org/apache/hadoop/contrib/utils/join/JobBase.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/README.txt
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/SampleDataJoinMapper.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/SampleDataJoinReducer.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/SampleTaggedMapOutput.java
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/org
* /hadoop/common/trunk/hadoop-tools/hadoop-datajoin/src/test/java/org/apache/hadoop/contrib/utils/join/TestDataJoin.java
* /hadoop/common/trunk/hadoop-tools/hadoop-tools-dist/pom.xml
* /hadoop/common/trunk/hadoop-tools/pom.xml
, Hi,

There are some files in the wrong package due to this change. Please see MAPREDUCE-4270.

Brock]