[this is the job history server the the intermediateDoneDirPath dir logic.

and the intermediateDoneDirPath value from the local conf. and the local conf maybe different with the real job yarn.app.mapreduce.am.staging-dir.


{code:title=JobHistoryUtils.java|borderStyle=solid}

  public static String getConfiguredHistoryIntermediateDoneDirPrefix(
      Configuration conf) {
    String doneDirPrefix = conf
        .get(JHAdminConfig.MR_HISTORY_INTERMEDIATE_DONE_DIR);
    if (doneDirPrefix == null) {
      doneDirPrefix = conf.get(MRJobConfig.MR_AM_STAGING_DIR,
          MRJobConfig.DEFAULT_MR_AM_STAGING_DIR)
          + "/history/done_intermediate";
    }
    return doneDirPrefix;
  }

{code}


]