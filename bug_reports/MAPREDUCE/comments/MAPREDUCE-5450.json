[The attached patch is failing to compile with the following error:
{code}

    [javac] /home/sandy/svn-apache/branch-1/src/mapred/org/apache/hadoop/mapred/ReduceTask.java:2445: non-static variable conf cannot be referenced from a static context
    [javac]                                      mo.data, 0, mo.data.length, conf);
{code}, This is weird, are you patching the correct Hadoop version? I patched release 1.1.0 and the it builds just fine. The change in ReduceTask.java is on the line 2413 - which you indicate as an error above on the line 2445. On top of that the patched method createInMemorySegments is not static in by branch., Patch that compiles based on branch-1, [~stanislav.barton], patches for the 1.x.x line should written against branch-1.  My guess is that the reason branch-1 is different from 1.1.0 is because of the ShuffleConsumerPlugin change?  createInMemorySegments is not static but the class it's in is.

The latest patch appears to apply.  Will commit it sometime later today., I just committed this to branch-1.  Thanks Stanislav and Ted!, Let's get [~stanislav.barton]'s original patch into branch-1.2 for 1.2.1.

Any objections?
, Sorry, I meant for 1.2.2 (if necessary)., I merged this to branch-1.2 too. Thanks guys!, Thanks Arun]