[As file name is not unique for each mapper(same file name for each mapper),,Hence we are getting the lease mismatch error...

Can we pass mapper ID or some unique name for following...Please can anyone suggest's on this...

if (barrier()) {
        if (op.equals(OP_CREATE_WRITE)) {
          startTimeTPmS = System.currentTimeMillis();
          doCreateWriteOp("file_" + hostName + "_", reporter);
        } else if (op.equals(OP_OPEN_READ)) {
          startTimeTPmS = System.currentTimeMillis();
          doOpenReadOp("file_" + hostName + "_", reporter);
        } else if (op.equals(OP_RENAME)) {
          startTimeTPmS = System.currentTimeMillis();
          doRenameOp("file_" + hostName + "_", reporter);
        } else if (op.equals(OP_DELETE)) {
          startTimeTPmS = System.currentTimeMillis();
          doDeleteOp("file_" + hostName + "_", reporter);
        }, I faced this exact same issue and my workaround is to modify NNBench to encode the counter as a sequence and use that counter value as part of the filename (instead of the hostname). This gives uniqueness to the filenames and avoids multiple maps running on the same node from stepping on each other. However, this requires that the subsequent operations (read, rename and delete) are run with the exact same number of maps.

In fact, the way NNBench works is very flawed. You are expected to first run "create_write" and then follow up with the other operations. Since the hostname is in the filename, this only works when the maps for follow up operations are guaranteed to be run on exactly the same nodes, but there is no such guarantee. There is also an issue with the maps getting swarmed on a small number of nodes, instead of getting distributed across all nodes nicely. In my testing, when I ran with 13 maps on a cluster with 13 slaves, I had all the maps allocated on two nodes only. When I want to generate a lot of load, I want to increase the number of maps, but the way it currently works, these maps are very likely to swarm up on a few nodes and when they exceed the node capacity, just queue up and fail the barrier condition. I don't know the right solution, but I worked around for my use case by setting the replication count of the control files to the same as the number of nodes so that they have an equal chance getting assigned to any node. However, this only makes a sense when the number of maps is high compared to the capacity of the cluster., I have tried as  @Hari Krishna Dara   said.

, Attached patch with my proposal(having unique name for each file), {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12693611/HDFS4929.patch
  against trunk revision 6b17eb9.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient.

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/9292//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/9292//console

This message is automatically generated., Any thoughts on this issue..? Thanks.., Kindly review the patch !!!, \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |   5m 21s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |
| {color:green}+1{color} | javac |   7m 31s | There were no new javac warning messages. |
| {color:green}+1{color} | release audit |   0m 20s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   0m 35s | There were no new checkstyle issues. |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 38s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 32s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   0m 47s | The patch does not introduce any new Findbugs (version 2.0.3) warnings. |
| {color:red}-1{color} | mapreduce tests | 102m 35s | Tests failed in hadoop-mapreduce-client-jobclient. |
| | | 119m 22s | |
\\
\\
|| Reason || Tests ||
| Timed out tests | org.apache.hadoop.mapreduce.v2.TestSpeculativeExecutionWithMRApp |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12693611/HDFS4929.patch |
| Optional Tests | javac unit findbugs checkstyle |
| git revision | trunk / 3d28611 |
| hadoop-mapreduce-client-jobclient test log | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5705/artifact/patchprocess/testrun_hadoop-mapreduce-client-jobclient.txt |
| Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5705/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf903.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5705/console |


This message was automatically generated., Thanks [~brahmareddy] for reporting and taking this issue.
{code}
doCreateWriteOp("file_" + hostName + "_" + Math.random(), reporter);
{code}
{{hostname + "_" + Math.random()}} is not sufficient because there's no guarantee to open_create files and open_read/rename/delete the same files, as [~haridsv] mentioned. Would you use taskid instead of random number? We can get the unique taskid in {{configure()}} method as follows:
{code}
      taskId = TaskAttemptID.forName(conf.get(MRJobConfig.TASK_ATTEMPT_ID))
          .getTaskID().getId();
{code}, [~ajisakaa] thanks a lot for taking a look into this issue..

Attached the patch to address your comment.. Kindly review.., Thanks [~brahmareddy] for updating the patch.
{code}
...
-          doCreateWriteOp("file_" + hostName + "_", reporter);
+          doCreateWriteOp("file_" + taskId + "_", reporter);
         } else if (op.equals(OP_OPEN_READ)) {
           startTimeTPmS = System.currentTimeMillis();
-          doOpenReadOp("file_" + hostName + "_", reporter);
+          doOpenReadOp("file_" + taskId + "_", reporter);
         } else if (op.equals(OP_RENAME)) {
           startTimeTPmS = System.currentTimeMillis();
-          doRenameOp("file_" + hostName + "_", reporter);
+          doRenameOp("file_" + taskId + "_", reporter);
         } else if (op.equals(OP_DELETE)) {
...
{code}
Would you create a variable such as {{filePrefix}} and reuse it as follows? That way we can avoid inconsistent file names by typo.
{code}
      if (barrier()) {
        String filePrefix = "file_" + taskId + "_";
        startTimeTPmS = System.currentTimeMillis();
        if (op.equals(OP_CREATE_WRITE)) {
          doCreateWriteOp(filePrefix, reporter);
        } else if (op.equals(OP_OPEN_READ)) {
          doOpenReadOp(filePrefix, reporter);
...
{code}
, Thanks again.. Attached the patch to address your comment.., +1 pending Jenkins. Thanks [~brahmareddy]., \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:red}-1{color} | pre-patch |   5m 41s | Findbugs (version ) appears to be broken on trunk. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |
| {color:green}+1{color} | javac |   7m 34s | There were no new javac warning messages. |
| {color:green}+1{color} | release audit |   0m 21s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   0m 13s | There were no new checkstyle issues. |
| {color:red}-1{color} | whitespace |   0m  0s | The patch has 1  line(s) that end in whitespace. Use git apply --whitespace=fix. |
| {color:green}+1{color} | install |   1m 36s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 32s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   0m 48s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:red}-1{color} | mapreduce tests | 102m 57s | Tests failed in hadoop-mapreduce-client-jobclient. |
| | | 119m 46s | |
\\
\\
|| Reason || Tests ||
| Failed unit tests | hadoop.mapred.TestReduceFetch |
|   | hadoop.mapred.TestMRIntermediateDataEncryption |
|   | hadoop.mapred.TestReduceFetchFromPartialMem |
|   | hadoop.mapred.TestMerge |
|   | hadoop.mapred.pipes.TestPipeApplication |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12739420/MAPREDUCE-6363-001.patch |
| Optional Tests | javac unit findbugs checkstyle |
| git revision | trunk / eef7b50 |
| whitespace | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5801/artifact/patchprocess/whitespace.txt |
| hadoop-mapreduce-client-jobclient test log | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5801/artifact/patchprocess/testrun_hadoop-mapreduce-client-jobclient.txt |
| Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5801/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf903.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5801/console |


This message was automatically generated., Test failures are unrelated to this patch ( will raise another jira to track testfailures)...Hope whitespace can be ignore while comitting., \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |   5m 52s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |
| {color:green}+1{color} | javac |   7m 30s | There were no new javac warning messages. |
| {color:green}+1{color} | release audit |   0m 20s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   0m 35s | There were no new checkstyle issues. |
| {color:red}-1{color} | whitespace |   0m  0s | The patch has 1  line(s) that end in whitespace. Use git apply --whitespace=fix. |
| {color:green}+1{color} | install |   1m 32s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 32s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   0m 47s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:red}-1{color} | mapreduce tests | 107m  0s | Tests failed in hadoop-mapreduce-client-jobclient. |
| | | 124m 11s | |
\\
\\
|| Reason || Tests ||
| Failed unit tests | hadoop.mapred.TestReduceFetch |
|   | hadoop.mapred.TestMRIntermediateDataEncryption |
|   | hadoop.mapred.pipes.TestPipeApplication |
|   | hadoop.mapred.TestReduceFetchFromPartialMem |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12739423/MAPREDUCE-6363-002.patch |
| Optional Tests | javac unit findbugs checkstyle |
| git revision | trunk / eef7b50 |
| whitespace | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5802/artifact/patchprocess/whitespace.txt |
| hadoop-mapreduce-client-jobclient test log | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5802/artifact/patchprocess/testrun_hadoop-mapreduce-client-jobclient.txt |
| Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5802/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf905.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5802/console |


This message was automatically generated., Committing this., Committed this to trunk and branch-2. Thanks [~brahmareddy] for the contribution and [~haridsv] for the comment., FAILURE: Integrated in Hadoop-trunk-Commit #8018 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/8018/])
MAPREDUCE-6363. [NNBench] Lease mismatch error when running with multiple mappers. Contributed by Brahma Reddy Battula. (aajisaka: rev 75a2560e51387ea31ef4609ef434475bbbc628f7)
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/hdfs/NNBench.java
* hadoop-mapreduce-project/CHANGES.txt
, Thanks a lot [~ajisakaa] for review and commiting!!! And thanks to others for looking into this issue.., FAILURE: Integrated in Hadoop-Yarn-trunk #960 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/960/])
MAPREDUCE-6363. [NNBench] Lease mismatch error when running with multiple mappers. Contributed by Brahma Reddy Battula. (aajisaka: rev 75a2560e51387ea31ef4609ef434475bbbc628f7)
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/hdfs/NNBench.java
, FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #230 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/230/])
MAPREDUCE-6363. [NNBench] Lease mismatch error when running with multiple mappers. Contributed by Brahma Reddy Battula. (aajisaka: rev 75a2560e51387ea31ef4609ef434475bbbc628f7)
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/hdfs/NNBench.java
, FAILURE: Integrated in Hadoop-Hdfs-trunk #2158 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2158/])
MAPREDUCE-6363. [NNBench] Lease mismatch error when running with multiple mappers. Contributed by Brahma Reddy Battula. (aajisaka: rev 75a2560e51387ea31ef4609ef434475bbbc628f7)
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/hdfs/NNBench.java
* hadoop-mapreduce-project/CHANGES.txt
, FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #219 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/219/])
MAPREDUCE-6363. [NNBench] Lease mismatch error when running with multiple mappers. Contributed by Brahma Reddy Battula. (aajisaka: rev 75a2560e51387ea31ef4609ef434475bbbc628f7)
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/hdfs/NNBench.java
* hadoop-mapreduce-project/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #228 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/228/])
MAPREDUCE-6363. [NNBench] Lease mismatch error when running with multiple mappers. Contributed by Brahma Reddy Battula. (aajisaka: rev 75a2560e51387ea31ef4609ef434475bbbc628f7)
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/hdfs/NNBench.java
* hadoop-mapreduce-project/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #2176 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2176/])
MAPREDUCE-6363. [NNBench] Lease mismatch error when running with multiple mappers. Contributed by Brahma Reddy Battula. (aajisaka: rev 75a2560e51387ea31ef4609ef434475bbbc628f7)
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/hdfs/NNBench.java
, This fix is not resolving the problem but rather alleviating it using unique output file names for each mapper to avoid write conflicts when multiple mappers are running on the name node. Now, nor usage of random number (OMG!), not TaskID would generate a stable output file names that can be (re-)used for following nnbench runs of READ and DELETE operations. This means that only CREATE will work, everything else is still broken., I have a different way to fix this that actually fixes all CREATE/READ/RENAME/DELETE ops. Will upload a new patch for review shortly., This patch fixes all CREATE/READ/RENAME/DELETE ops on NNBench test. The only limitation is that you have to run the same # mappers in READ/RENAME/DELETE ops and you have used in CREATE, which is kind of natural., MAPREDUCE-6363-003.patch is uploaded., Thanks [~uladz] for the comment and the patch.
bq. Now, nor usage of random number (OMG!), not TaskID would generate a stable output file names that can be (re-)used for following nnbench runs of READ and DELETE operations.
Would you please tell me why the taskid does not generate a stable output? The id is unique and sequential for each map task.

{code}
-        String filePrefix = "file_" + taskId + "_";
+        String fileName = "file_" + value;
{code}
Nice catch. We should remove the {{_}}., I'm thinking the task id is unique and sequential for each map task, so it can be reused by the following operations. Hi [~uladz], may I close this issue as fixed?

bq. Nice catch. We should remove the {{_}}.
By the way, let's remove {{_}} in a separate jira., Hi [~ajisakaa]

I think what [~uladz] is pointing, that when we run CREATE test, we will create files withe unique names, thanks to taskid, so CREATE is fine. But when we run rename or delete, the taskid will be new and it will not actually rename or delete the files(created by CREATE benchmark) because it will not find the file name based on "file_"+taskId as taskId will be new. right.?, bq. the taskid will be new
Not new. NNBench uses a sequential id in the task id (1, 2, ...)  instead of the entire task id.
{code}
      int taskId =
          TaskAttemptID.forName(conf.get(MRJobConfig.TASK_ATTEMPT_ID))
              .getTaskID().getId();
{code}
Therefore the number is the same in the following operation. I verified rename operation ran successfully. Attaching the console log., Sorry for coming late.. [~ajisakaa] thanks for clarification and pasting the testresult here..Seems {{taskId}} might have confused .. can we change this variable like {{attemptID}} and remove {{_}} in a separate jira.

And can we close this jira since [~uladz] not responding ..? what do you say..?, By the way, I'm thinking Vlad's patch looks better than parsing TaskAttemptID. I'll create a separate jira for the follow-up. Could you post the patch there?, Guys, one sec, let me read though comments and respond, don't close it just yet., So, theoretically task ID on a map task can be used as it will be stable due to the fact that control files can not be merged by Hadoop and it is guaranteed that the number of map tasks will be at least the same (or equal at this case) as the number of control input files. Said that I'm strongly advise against it due to the fact that that you rely on inability of Hadoop framework to merge inputs, which is a big issue and as I remember there is a Jira that tracks implementation of rack-aware inputs merge. My point is that while the task ID will work right now (and maybe even for any feature version), there is no guarantee that at some point Hadoop would not change its behaviour.

On another hand generating and passing a unique ID without control files as I have proposed in my implementation is a "natural" way as we just use value, which is already there but for some reason was set to 0 and not used before. We have one central functions that is responsible for unique number generation and each downstream task is guaranteed to use one unique IDs no matter what. I truly don't see any reason why to parse a task name and convert it into a task ID if each mapper get the value as input anyway.The IDs don't even need to ge sequential, jut unique!

One more remark - the new reduce code also collects statistics from all mappers/reducers, before it was broken.
And another remark - I had lots of trouble figuring out why NNBench does not work, so I've expanded error reporting too.

Said all that, the version of the code that I have uploaded is successfully running of daily basis in our lab cluster and produces stable results. Meaning that it is fully tested in production environment, and I highly recommend to use this approach., bq. I'll create a separate jira for the follow-up. Could you post the patch there?
or I can revert the commit.

Rethinking this, I'd like to revert the commit because the commit causes a bug (unnecessarily {{_}}). If we are to backport them to other branch, we need to backport two commits., Thanks [~uladz] for the detailed comment.

bq. you rely on inability of Hadoop framework to merge inputs, which is a big issue and as I remember there is a Jira that tracks implementation of rack-aware inputs merge.
Now Hadoop can use CombineFileInputFormat to merge inputs. NNBench does not use the feature.

bq. On another hand generating and passing a unique ID without control files as I have proposed in my implementation is a "natural" way as we just use value, which is already there but for some reason was set to 0 and not used before.
Agree.

bq. One more remark - the new reduce code also collects statistics from all mappers/reducers, before it was broken.
This issue looks to be reported by MAPREDUCE-6465. When your patch will be committed, then we can close it.

bq. And another remark - I had lots of trouble figuring out why NNBench does not work, so I've expanded error reporting too.
Thanks a lot.

I'll revert the commit shortly. Would you rebase the patch after reverting the commit?, bq. I'll revert the commit shortly. Would you rebase the patch after reverting the commit?
Sure!, I've reverted the commit., FAILURE: Integrated in Hadoop-trunk-Commit #8384 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/8384/])
Revert "MAPREDUCE-6363. [NNBench] Lease mismatch error when running with multiple mappers. Contributed by Brahma Reddy Battula." (aajisaka: rev 00804e24579083d03a67b86c2c57e70b910dda8d)
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/hdfs/NNBench.java
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #2281 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2281/])
Revert "MAPREDUCE-6363. [NNBench] Lease mismatch error when running with multiple mappers. Contributed by Brahma Reddy Battula." (aajisaka: rev 00804e24579083d03a67b86c2c57e70b910dda8d)
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/hdfs/NNBench.java
, FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #332 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/332/])
Revert "MAPREDUCE-6363. [NNBench] Lease mismatch error when running with multiple mappers. Contributed by Brahma Reddy Battula." (aajisaka: rev 00804e24579083d03a67b86c2c57e70b910dda8d)
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/hdfs/NNBench.java
* hadoop-mapreduce-project/CHANGES.txt
, FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #340 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/340/])
Revert "MAPREDUCE-6363. [NNBench] Lease mismatch error when running with multiple mappers. Contributed by Brahma Reddy Battula." (aajisaka: rev 00804e24579083d03a67b86c2c57e70b910dda8d)
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/hdfs/NNBench.java
, FAILURE: Integrated in Hadoop-Yarn-trunk #1067 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/1067/])
Revert "MAPREDUCE-6363. [NNBench] Lease mismatch error when running with multiple mappers. Contributed by Brahma Reddy Battula." (aajisaka: rev 00804e24579083d03a67b86c2c57e70b910dda8d)
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/hdfs/NNBench.java
, I'm having some troubles with rebase and commit..., Actually I've just grabbed the latest HEAD and ported the patch, I'll upload the new rebased patch in 10 mins., [~uladz] rebased patch for you.. Kindly check..., Thanks! But unfortunately there are several issue with this version of rebased patch. The file format is broken due to the first git line, this is not a patch format :). And all my changes of info message to errors were lost. Uploading my rebased version., Rebased version of MAPREDUCE-6363-003.patch., SUCCESS: Integrated in Hadoop-Hdfs-trunk #2262 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2262/])
Revert "MAPREDUCE-6363. [NNBench] Lease mismatch error when running with multiple mappers. Contributed by Brahma Reddy Battula." (aajisaka: rev 00804e24579083d03a67b86c2c57e70b910dda8d)
* hadoop-mapreduce-project/CHANGES.txt
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/hdfs/NNBench.java
, FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #323 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/323/])
Revert "MAPREDUCE-6363. [NNBench] Lease mismatch error when running with multiple mappers. Contributed by Brahma Reddy Battula." (aajisaka: rev 00804e24579083d03a67b86c2c57e70b910dda8d)
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/hdfs/NNBench.java
* hadoop-mapreduce-project/CHANGES.txt
, Thanks [~uladz] for rebaseing the patch. Minor comments from me:

1. Would you fix the formatting?
{code}
          }
          catch (IOException e) {
{code}
should be 
{code}
          } catch (IOException e) {
{code}
Hadoop code base is formatted according to Oracle's conventions except for indents. (http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-142311.html#449)

2. Would you raise the log level of the error message in doDeleteOp method as well?

I'll try NNBench with your patch later., \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |   6m 24s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |
| {color:green}+1{color} | javac |   7m 51s | There were no new javac warning messages. |
| {color:green}+1{color} | release audit |   0m 19s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | checkstyle |   0m 35s | There were no new checkstyle issues. |
| {color:red}-1{color} | whitespace |   0m  0s | The patch has 2  line(s) that end in whitespace. Use git apply --whitespace=fix. |
| {color:green}+1{color} | install |   1m 28s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 32s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   0m 49s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:red}-1{color} | mapreduce tests |  96m 12s | Tests failed in hadoop-mapreduce-client-jobclient. |
| | | 114m 13s | |
\\
\\
|| Reason || Tests ||
| Failed unit tests | hadoop.mapred.pipes.TestPipeApplication |
|   | hadoop.mapreduce.lib.output.TestJobOutputCommitter |
|   | hadoop.mapred.TestJobSysDirWithDFS |
|   | hadoop.mapreduce.TestMRJobClient |
|   | hadoop.mapreduce.security.TestMRCredentials |
|   | hadoop.mapred.TestMRTimelineEventHandling |
|   | hadoop.mapreduce.TestChild |
|   | hadoop.mapreduce.security.TestBinaryTokenFile |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12753708/MAPREDUCE-6363-005.patch |
| Optional Tests | javac unit findbugs checkstyle |
| git revision | trunk / 65ccf2b |
| whitespace | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5964/artifact/patchprocess/whitespace.txt |
| hadoop-mapreduce-client-jobclient test log | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5964/artifact/patchprocess/testrun_hadoop-mapreduce-client-jobclient.txt |
| Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5964/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf905.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/5964/console |


This message was automatically generated., Let me fix a couple of minor things and reupload the patch. Thanks [~ajisakaa]!, Any updates on this jira ?, Hi [~uladz], how is this issue going on?, | (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 0m 0s {color} | {color:blue} Docker mode activated. {color} |
| {color:green}+1{color} | {color:green} @author {color} | {color:green} 0m 0s {color} | {color:green} The patch does not contain any @author tags. {color} |
| {color:green}+1{color} | {color:green} test4tests {color} | {color:green} 0m 0s {color} | {color:green} The patch appears to include 1 new or modified test files. {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 7m 23s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 20s {color} | {color:green} trunk passed with JDK v1.8.0_66 {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 22s {color} | {color:green} trunk passed with JDK v1.7.0_85 {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 8s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 27s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 14s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 27s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 12s {color} | {color:green} trunk passed with JDK v1.8.0_66 {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 14s {color} | {color:green} trunk passed with JDK v1.7.0_85 {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 0m 25s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 18s {color} | {color:green} the patch passed with JDK v1.8.0_66 {color} |
| {color:red}-1{color} | {color:red} javac {color} | {color:red} 1m 37s {color} | {color:red} hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.8.0_66 with JDK v1.8.0_66 generated 1 new issues (was 189, now 189). {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 18s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 21s {color} | {color:green} the patch passed with JDK v1.7.0_85 {color} |
| {color:red}-1{color} | {color:red} javac {color} | {color:red} 2m 0s {color} | {color:red} hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.7.0_85 with JDK v1.7.0_85 generated 1 new issues (was 189, now 189). {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 21s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 7s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 27s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 13s {color} | {color:green} the patch passed {color} |
| {color:red}-1{color} | {color:red} whitespace {color} | {color:red} 0m 0s {color} | {color:red} The patch has 2 line(s) that end in whitespace. Use git apply --whitespace=fix. {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 34s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 12s {color} | {color:green} the patch passed with JDK v1.8.0_66 {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 14s {color} | {color:green} the patch passed with JDK v1.7.0_85 {color} |
| {color:red}-1{color} | {color:red} unit {color} | {color:red} 107m 54s {color} | {color:red} hadoop-mapreduce-client-jobclient in the patch failed with JDK v1.8.0_66. {color} |
| {color:red}-1{color} | {color:red} unit {color} | {color:red} 0m 17s {color} | {color:red} hadoop-mapreduce-client-jobclient in the patch failed with JDK v1.7.0_85. {color} |
| {color:red}-1{color} | {color:red} asflicense {color} | {color:red} 0m 28s {color} | {color:red} Patch generated 13 ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 122m 25s {color} | {color:black} {color} |
\\
\\
|| Reason || Tests ||
| JDK v1.8.0_66 Failed junit tests | hadoop.mapred.TestSpecialCharactersInOutputPath |
|   | hadoop.mapreduce.v2.TestMRJobsWithProfiler |
| JDK v1.8.0_66 Timed out junit tests | org.apache.hadoop.mapred.TestMRIntermediateDataEncryption |
| JDK v1.7.0_85 Failed junit tests | hadoop.mapred.TestSpecialCharactersInOutputPath |
|   | hadoop.mapreduce.v2.TestMRJobsWithProfiler |
\\
\\
|| Subsystem || Report/Notes ||
| Docker |  Image:yetus/hadoop:0ca8df7 |
| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12753708/MAPREDUCE-6363-005.patch |
| JIRA Issue | MAPREDUCE-6363 |
| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |
| uname | Linux 44185032385f 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |
| git revision | trunk / 28dfe72 |
| findbugs | v3.0.0 |
| javac | hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.8.0_66: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6184/artifact/patchprocess/diff-compile-javac-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.8.0_66.txt |
| javac | hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.7.0_85: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6184/artifact/patchprocess/diff-compile-javac-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.7.0_85.txt |
| whitespace | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6184/artifact/patchprocess/whitespace-eol.txt |
| unit | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6184/artifact/patchprocess/patch-unit-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.8.0_66.txt |
| unit | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6184/artifact/patchprocess/patch-unit-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.7.0_85.txt |
| unit test logs |  https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6184/artifact/patchprocess/patch-unit-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.8.0_66.txt https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6184/artifact/patchprocess/patch-unit-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.7.0_85.txt |
| JDK v1.7.0_85  Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6184/testReport/ |
| asflicense | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6184/artifact/patchprocess/patch-asflicense-problems.txt |
| modules | C: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient U: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient |
| Max memory used | 75MB |
| Powered by | Apache Yetus   http://yetus.apache.org |
| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6184/console |


This message was automatically generated.

, Attached rebased patch, | (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 0m 0s {color} | {color:blue} Docker mode activated. {color} |
| {color:green}+1{color} | {color:green} @author {color} | {color:green} 0m 0s {color} | {color:green} The patch does not contain any @author tags. {color} |
| {color:green}+1{color} | {color:green} test4tests {color} | {color:green} 0m 0s {color} | {color:green} The patch appears to include 1 new or modified test files. {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 7m 34s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 20s {color} | {color:green} trunk passed with JDK v1.8.0_66 {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 22s {color} | {color:green} trunk passed with JDK v1.7.0_91 {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 9s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 28s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 13s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 27s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 12s {color} | {color:green} trunk passed with JDK v1.8.0_66 {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 15s {color} | {color:green} trunk passed with JDK v1.7.0_91 {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 0m 22s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 17s {color} | {color:green} the patch passed with JDK v1.8.0_66 {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 17s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 19s {color} | {color:green} the patch passed with JDK v1.7.0_91 {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 19s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 9s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 25s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 11s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} whitespace {color} | {color:green} 0m 0s {color} | {color:green} Patch has no whitespace issues. {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 32s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 10s {color} | {color:green} the patch passed with JDK v1.8.0_66 {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 12s {color} | {color:green} the patch passed with JDK v1.7.0_91 {color} |
| {color:red}-1{color} | {color:red} unit {color} | {color:red} 97m 19s {color} | {color:red} hadoop-mapreduce-client-jobclient in the patch failed with JDK v1.8.0_66. {color} |
| {color:red}-1{color} | {color:red} unit {color} | {color:red} 103m 52s {color} | {color:red} hadoop-mapreduce-client-jobclient in the patch failed with JDK v1.7.0_91. {color} |
| {color:red}-1{color} | {color:red} asflicense {color} | {color:red} 0m 24s {color} | {color:red} Patch generated 17 ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 215m 11s {color} | {color:black} {color} |
\\
\\
|| Reason || Tests ||
| JDK v1.8.0_66 Failed junit tests | hadoop.mapred.TestNetworkedJob |
|   | hadoop.mapreduce.v2.TestMRJobsWithProfiler |
| JDK v1.7.0_91 Failed junit tests | hadoop.mapred.TestNetworkedJob |
\\
\\
|| Subsystem || Report/Notes ||
| Docker |  Image:yetus/hadoop:0ca8df7 |
| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12780986/MAPREDUCE-6363-006.patch |
| JIRA Issue | MAPREDUCE-6363 |
| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |
| uname | Linux e44d61c7120d 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |
| git revision | trunk / bac798a |
| Default Java | 1.7.0_91 |
| Multi-JDK versions |  /usr/lib/jvm/java-8-oracle:1.8.0_66 /usr/lib/jvm/java-7-openjdk-amd64:1.7.0_91 |
| findbugs | v3.0.0 |
| unit | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6258/artifact/patchprocess/patch-unit-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.8.0_66.txt |
| unit | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6258/artifact/patchprocess/patch-unit-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.7.0_91.txt |
| unit test logs |  https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6258/artifact/patchprocess/patch-unit-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.8.0_66.txt https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6258/artifact/patchprocess/patch-unit-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.7.0_91.txt |
| JDK v1.7.0_91  Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6258/testReport/ |
| asflicense | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6258/artifact/patchprocess/patch-asflicense-problems.txt |
| modules | C: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient U: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient |
| Max memory used | 75MB |
| Powered by | Apache Yetus 0.2.0-SNAPSHOT   http://yetus.apache.org |
| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6258/console |


This message was automatically generated.

, | (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 0m 0s {color} | {color:blue} Docker mode activated. {color} |
| {color:green}+1{color} | {color:green} @author {color} | {color:green} 0m 0s {color} | {color:green} The patch does not contain any @author tags. {color} |
| {color:green}+1{color} | {color:green} test4tests {color} | {color:green} 0m 0s {color} | {color:green} The patch appears to include 1 new or modified test files. {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 8m 1s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 21s {color} | {color:green} trunk passed with JDK v1.8.0_66 {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 24s {color} | {color:green} trunk passed with JDK v1.7.0_91 {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 8s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 31s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 13s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 29s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 13s {color} | {color:green} trunk passed with JDK v1.8.0_66 {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 15s {color} | {color:green} trunk passed with JDK v1.7.0_91 {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 0m 24s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 19s {color} | {color:green} the patch passed with JDK v1.8.0_66 {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 19s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 22s {color} | {color:green} the patch passed with JDK v1.7.0_91 {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 22s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 9s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 27s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 12s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} whitespace {color} | {color:green} 0m 0s {color} | {color:green} Patch has no whitespace issues. {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 34s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 10s {color} | {color:green} the patch passed with JDK v1.8.0_66 {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 12s {color} | {color:green} the patch passed with JDK v1.7.0_91 {color} |
| {color:red}-1{color} | {color:red} unit {color} | {color:red} 101m 33s {color} | {color:red} hadoop-mapreduce-client-jobclient in the patch failed with JDK v1.8.0_66. {color} |
| {color:red}-1{color} | {color:red} unit {color} | {color:red} 108m 6s {color} | {color:red} hadoop-mapreduce-client-jobclient in the patch failed with JDK v1.7.0_91. {color} |
| {color:red}-1{color} | {color:red} asflicense {color} | {color:red} 0m 27s {color} | {color:red} Patch generated 15 ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 224m 40s {color} | {color:black} {color} |
\\
\\
|| Reason || Tests ||
| JDK v1.8.0_66 Failed junit tests | hadoop.mapred.TestNetworkedJob |
|   | hadoop.mapreduce.v2.TestMRJobsWithProfiler |
| JDK v1.7.0_91 Failed junit tests | hadoop.mapred.TestNetworkedJob |
\\
\\
|| Subsystem || Report/Notes ||
| Docker |  Image:yetus/hadoop:0ca8df7 |
| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12780989/MAPREDUCE-6363-007.patch |
| JIRA Issue | MAPREDUCE-6363 |
| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |
| uname | Linux 6798e708d59b 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |
| git revision | trunk / 52b7757 |
| Default Java | 1.7.0_91 |
| Multi-JDK versions |  /usr/lib/jvm/java-8-oracle:1.8.0_66 /usr/lib/jvm/java-7-openjdk-amd64:1.7.0_91 |
| findbugs | v3.0.0 |
| unit | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6259/artifact/patchprocess/patch-unit-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.8.0_66.txt |
| unit | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6259/artifact/patchprocess/patch-unit-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.7.0_91.txt |
| unit test logs |  https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6259/artifact/patchprocess/patch-unit-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.8.0_66.txt https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6259/artifact/patchprocess/patch-unit-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.7.0_91.txt |
| JDK v1.7.0_91  Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6259/testReport/ |
| asflicense | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6259/artifact/patchprocess/patch-asflicense-problems.txt |
| modules | C: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient U: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient |
| Max memory used | 76MB |
| Powered by | Apache Yetus 0.2.0-SNAPSHOT   http://yetus.apache.org |
| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6259/console |


This message was automatically generated.

, Looks good to me. Thanks [~bibinchundatt] for updating the patch. One minor comment.
1. Would you fix the formatting?
{code}
+        }
+        else {
+          throw new IllegalArgumentException("unsupported operation ["+op+"]");
{code}
should be 
{code}
+        } else {
+          throw new IllegalArgumentException("unsupported operation ["+op+"]");
{code}
I'm +1 if that is addressed., [~ajisakaa]
Attaching patch after formatting. Thanks for the review, | (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 0m 0s {color} | {color:blue} Docker mode activated. {color} |
| {color:green}+1{color} | {color:green} @author {color} | {color:green} 0m 1s {color} | {color:green} The patch does not contain any @author tags. {color} |
| {color:green}+1{color} | {color:green} test4tests {color} | {color:green} 0m 0s {color} | {color:green} The patch appears to include 1 new or modified test files. {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 7m 37s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 20s {color} | {color:green} trunk passed with JDK v1.8.0_66 {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 23s {color} | {color:green} trunk passed with JDK v1.7.0_91 {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 8s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 29s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 14s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 28s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 13s {color} | {color:green} trunk passed with JDK v1.8.0_66 {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 15s {color} | {color:green} trunk passed with JDK v1.7.0_91 {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 0m 22s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 16s {color} | {color:green} the patch passed with JDK v1.8.0_66 {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 16s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 20s {color} | {color:green} the patch passed with JDK v1.7.0_91 {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 20s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 8s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 25s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 11s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} whitespace {color} | {color:green} 0m 0s {color} | {color:green} Patch has no whitespace issues. {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 34s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 10s {color} | {color:green} the patch passed with JDK v1.8.0_66 {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 12s {color} | {color:green} the patch passed with JDK v1.7.0_91 {color} |
| {color:red}-1{color} | {color:red} unit {color} | {color:red} 101m 15s {color} | {color:red} hadoop-mapreduce-client-jobclient in the patch failed with JDK v1.8.0_66. {color} |
| {color:red}-1{color} | {color:red} unit {color} | {color:red} 108m 39s {color} | {color:red} hadoop-mapreduce-client-jobclient in the patch failed with JDK v1.7.0_91. {color} |
| {color:red}-1{color} | {color:red} asflicense {color} | {color:red} 0m 27s {color} | {color:red} Patch generated 15 ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 224m 12s {color} | {color:black} {color} |
\\
\\
|| Reason || Tests ||
| JDK v1.8.0_66 Failed junit tests | hadoop.mapreduce.v2.TestMRJobsWithProfiler |
|   | hadoop.mapred.TestNetworkedJob |
| JDK v1.7.0_91 Failed junit tests | hadoop.mapred.TestNetworkedJob |
\\
\\
|| Subsystem || Report/Notes ||
| Docker |  Image:yetus/hadoop:0ca8df7 |
| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12781222/MAPREDUCE-6363-008.patch |
| JIRA Issue | MAPREDUCE-6363 |
| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |
| uname | Linux 72614300a565 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |
| git revision | trunk / ed18527 |
| Default Java | 1.7.0_91 |
| Multi-JDK versions |  /usr/lib/jvm/java-8-oracle:1.8.0_66 /usr/lib/jvm/java-7-openjdk-amd64:1.7.0_91 |
| findbugs | v3.0.0 |
| unit | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6261/artifact/patchprocess/patch-unit-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.8.0_66.txt |
| unit | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6261/artifact/patchprocess/patch-unit-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.7.0_91.txt |
| unit test logs |  https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6261/artifact/patchprocess/patch-unit-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.8.0_66.txt https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6261/artifact/patchprocess/patch-unit-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-jobclient-jdk1.7.0_91.txt |
| JDK v1.7.0_91  Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6261/testReport/ |
| asflicense | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6261/artifact/patchprocess/patch-asflicense-problems.txt |
| modules | C: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient U: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient |
| Max memory used | 76MB |
| Powered by | Apache Yetus 0.2.0-SNAPSHOT   http://yetus.apache.org |
| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6261/console |


This message was automatically generated.

, [~ajisakaa]
Testcase failures are not related to patch attached. Could you please help in reviewing patch., +1, committing this., Committed this to trunk, branch-2, branch-2.8, branch-2.7, and branch-2.6. Thanks [~bibinchundatt] for the contribution!, FAILURE: Integrated in Hadoop-trunk-Commit #9105 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/9105/])
MAPREDUCE-6363. [NNBench] Lease mismatch error when running with (aajisaka: rev 7b0964f354e90968c2dac2f7acc17214732aed64)
* hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/hdfs/NNBench.java
* hadoop-mapreduce-project/CHANGES.txt
, Reopen this because of missing {{doDeleteOp(fileName, reporter)}} in the v8 patch. Thanks [~andreina] for reporting this issue in HDFS-10191., Rethinking this, it would be better to add {{doDeleteOp}} in a separate jira because 2.6.4, the v8 patch was committed to, has been released., Closing the JIRA as part of 2.7.3 release.]