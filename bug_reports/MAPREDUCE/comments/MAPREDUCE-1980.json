[Attaching a patch the fixes the bug. test-patch and ant-tests passed on my box., Patch looks good. +1., The same problem is present in TaskAttemptFinishedEvent also. setup and cleanup tasks are always logged as MAP_ATTEMPT_FINISHED. Can you fix that also?, Attaching a patch that incorporates Amareshwari's comments. Modified the testcase too., Patch looks good. 
Amar, Can you post the test results? Will check-in this into trunk and branch 0.21., {{test-patch}} passed on my box. Few contrib tests failed but doesn't seem related to my patch. Looking into it., bq. Few contrib tests failed but doesn't seem related to my patch. Looking into it
I just checked the failing tests. This is because of MAPREDUCE-1920. completed job store is disabled for mapred unit tests by adding it to src/test. but contrib tests would not pickup mapred-site.xml from src/test. So, the tests are failing., All the tests pass after MAPREDUCE-2012
I just committed this to trunk and branch 0.21, Thanks Amar!, Integrated in Hadoop-Mapreduce-trunk-Commit #523 (See [https://hudson.apache.org/hudson/job/Hadoop-Mapreduce-trunk-Commit/523/])
    , Integrated in Hadoop-Mapreduce-trunk #643 (See [https://hudson.apache.org/hudson/job/Hadoop-Mapreduce-trunk/643/])
    ]