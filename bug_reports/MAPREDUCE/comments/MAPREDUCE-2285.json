[I think the difference is that, after we run test-patch, build/ivy/lib/Hadoop/javadoc gets populated and on the classpath of the contrib tests. Attached are the classpath for a bad invocation (post test-patch) vs a good one (post clean)

Maybe we need to straighten out our ivy confs?, maybe something like this patch? Including **/*.jar from build/ivy/lib is going to pull in all the jars from javadoc, releaseaudit, and jdiff, which apparently have conflicting dependencies which cause the JT to crash and the tests to time out.

After removing this we might be missing some dependencies which we'll have to add to the specific projects ivy.xml files, but that's more correct anyhow., The patch fixes the problem. I am no ivy expert, but it looks good to me., Patch looks good.
{quote}
After removing this we might be missing some dependencies which we'll have to add to the specific projects ivy.xml files,
 {quote}
I agree with Todd's point about adding deps to the ivy.xml., Making patch available and will manually run thru hudson to test MR precommit., This problem also causes failures in compiling mrunit's tests. eg this build: https://hudson.apache.org/hudson/job/Hadoop-Mapreduce-22-branch/25/
(failed with weird errors about assert methods not existing in junit)


The patch I attached last week fixes it. Giri: was your "looks good" a +1? (ie can I commit to branch and trunk?), Yes Todd, please commit to trunk and 0.22.  Thanks!, Integrated in Hadoop-Mapreduce-trunk-Commit #607 (See [https://hudson.apache.org/hudson/job/Hadoop-Mapreduce-trunk-Commit/607/])
    MAPREDUCE-2285. MiniMRCluster does not start after ant test-patch. Contributed by Todd Lipcon.
, Integrated in Hadoop-Mapreduce-22-branch #33 (See [https://hudson.apache.org/hudson/job/Hadoop-Mapreduce-22-branch/33/])
    , Integrated in Hadoop-Mapreduce-trunk #643 (See [https://hudson.apache.org/hudson/job/Hadoop-Mapreduce-trunk/643/])
    ]