{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12527117","self":"https://issues.apache.org/jira/rest/api/2/issue/12527117","key":"MAPREDUCE-3236","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2011-10-19T18:14:40.654+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Feb 24 22:37:56 UTC 2015","customfield_12310420":"85489","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-3236/watchers","watchCount":5,"isWatching":false},"created":"2011-10-13T22:24:46.949+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316391","id":"12316391","description":"Merge append/sync support with security","name":"0.20.205.0","archived":false,"released":true,"releaseDate":"2011-10-06"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-02-24T22:37:56.493+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312907","id":"12312907","name":"jobtracker"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12313041","id":"12313041","name":"security"}],"timeoriginalestimate":null,"description":"I tried to copy file from .20.204 to .20.205 by distcp over hdfs:// while using hadoop.security.token.service.use_ip=false in core-site.xml. The copy was successful but found error \" org.apache.hadoop.mapreduce.security.token.DelegationTokenRenewal:\" exception in .20.205 JT.\n\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12499726","id":"12499726","filename":"HDFS-2447.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2011-10-19T18:22:15.213+0000","size":2478,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12499726/HDFS-2447.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12499756","id":"12499756","filename":"HDFS-2447-1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2011-10-19T21:03:19.830+0000","size":7385,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12499756/HDFS-2447-1.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"74228","customfield_12312823":null,"summary":"Distcp with hdfs:// passed with error in JT log while copying from .20.204  to .20.205 ( with useIp=false)","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajsaha","name":"rajsaha","key":"rajsaha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajsaha&avatarId=16507","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajsaha&avatarId=16507","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajsaha&avatarId=16507","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajsaha&avatarId=16507"},"displayName":"Rajit Saha","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajsaha","name":"rajsaha","key":"rajsaha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajsaha&avatarId=16507","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajsaha&avatarId=16507","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajsaha&avatarId=16507","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajsaha&avatarId=16507"},"displayName":"Rajit Saha","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527117/comment/13127046","id":"13127046","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajsaha","name":"rajsaha","key":"rajsaha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajsaha&avatarId=16507","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajsaha&avatarId=16507","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajsaha&avatarId=16507","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajsaha&avatarId=16507"},"displayName":"Rajit Saha","active":true,"timeZone":"America/Los_Angeles"},"body":"Ran distcp in .20.205 Client to fetch data from 204 NN to 205\n$ hadoop distcp hdfs://<204 NN hostname>:8020/user/hadoopqa/23File out23hdfsfile\n11/10/13 00:13:52 INFO tools.DistCp: srcPaths=[hdfs://< 204 NN hostname>:8020/user/<USER>/23File]\n11/10/13 00:13:52 INFO tools.DistCp: destPath=out23hdfsfile\n11/10/13 00:13:52 INFO util.NativeCodeLoader: Loaded the native-hadoop library\n11/10/13 00:13:52 INFO security.JniBasedUnixGroupsMapping: Using JniBasedUnixGroupsMapping for Group resolution\n11/10/13 00:13:53 INFO hdfs.DFSClient: Created HDFS_DELEGATION_TOKEN token 28 for <USER> on\n< 204 NN hostname>:8020\n11/10/13 00:13:53 INFO security.TokenCache: Got dt for\nhdfs://< 204 NN hostname>:8020/user/<USER>/23File;uri=< 204 NN hostname>:8020;t.service=< 204 NN hostname>:8020\n11/10/13 00:13:54 INFO hdfs.DFSClient: Created HDFS_DELEGATION_TOKEN token 45 for <USER> on\n< 205 NN Hostname >:8020\n11/10/13 00:13:54 INFO security.TokenCache: Got dt for\nout23hdfsfile;uri=< 205 NN Hostname >:8020;t.service=< 205 NN Hostname >:8020\n11/10/13 00:13:54 INFO tools.DistCp: out23hdfsfile does not exist.\n11/10/13 00:13:54 INFO tools.DistCp: sourcePathsCount=1\n11/10/13 00:13:54 INFO tools.DistCp: filesToCopyCount=1\n11/10/13 00:13:54 INFO tools.DistCp: bytesToCopyCount=7.7k\n11/10/13 00:13:54 INFO mapred.JobClient: Running job: job_201110121725_0036\n11/10/13 00:13:55 INFO mapred.JobClient:  map 0% reduce 0%\n11/10/13 00:15:06 INFO mapred.JobClient: Task Id : attempt_201110121725_0036_m_000000_0, Status : FAILED\njava.io.IOException: Copied: 0 Skipped: 0 Failed: 1\n        at org.apache.hadoop.tools.DistCp$CopyFilesMapper.close(DistCp.java:582)\n        at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:57)\n        at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:436)\n        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)\n        at org.apache.hadoop.mapred.Child$4.run(Child.java:255)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:396)\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)\n        at org.apache.hadoop.mapred.Child.main(Child.java:249)\n\n11/10/13 00:15:13 INFO mapred.JobClient:  map 100% reduce 0%\n11/10/13 00:15:16 INFO mapred.JobClient: Job complete: job_201110121725_0036\n11/10/13 00:15:16 INFO mapred.JobClient: Counters: 22\n11/10/13 00:15:16 INFO mapred.JobClient:   Job Counters \n11/10/13 00:15:16 INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=76838\n11/10/13 00:15:16 INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0\n11/10/13 00:15:16 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0\n11/10/13 00:15:16 INFO mapred.JobClient:     Launched map tasks=2\n11/10/13 00:15:16 INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=0\n11/10/13 00:15:16 INFO mapred.JobClient:   File Input Format Counters \n11/10/13 00:15:16 INFO mapred.JobClient:     Bytes Read=236\n11/10/13 00:15:16 INFO mapred.JobClient:   File Output Format Counters \n11/10/13 00:15:16 INFO mapred.JobClient:     Bytes Written=0\n11/10/13 00:15:16 INFO mapred.JobClient:   FileSystemCounters\n11/10/13 00:15:16 INFO mapred.JobClient:     HDFS_BYTES_READ=8220\n11/10/13 00:15:16 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=32199\n11/10/13 00:15:16 INFO mapred.JobClient:     HDFS_BYTES_WRITTEN=7840\n11/10/13 00:15:16 INFO mapred.JobClient:   distcp\n11/10/13 00:15:16 INFO mapred.JobClient:     Files copied=1\n11/10/13 00:15:16 INFO mapred.JobClient:     Bytes copied=7840\n11/10/13 00:15:16 INFO mapred.JobClient:     Bytes expected=7840\n11/10/13 00:15:16 INFO mapred.JobClient:   Map-Reduce Framework\n11/10/13 00:15:16 INFO mapred.JobClient:     Map input records=1\n11/10/13 00:15:16 INFO mapred.JobClient:     Physical memory (bytes) snapshot=59052032\n11/10/13 00:15:16 INFO mapred.JobClient:     Spilled Records=0\n11/10/13 00:15:16 INFO mapred.JobClient:     CPU time spent (ms)=420\n11/10/13 00:15:16 INFO mapred.JobClient:     Total committed heap usage (bytes)=71761920\n11/10/13 00:15:16 INFO mapred.JobClient:     Virtual memory (bytes) snapshot=849117184\n11/10/13 00:15:16 INFO mapred.JobClient:     Map input bytes=136\n11/10/13 00:15:16 INFO mapred.JobClient:     Map output records=0\n11/10/13 00:15:16 INFO mapred.JobClient:     SPLIT_RAW_BYTES=144\n\n\n\nThe copy was successful\n========================\n$hadoop dfs -lsr .\ndrwx------   - <USER> hdfs          0 2011-10-13 00:15 /user/<USER>/.staging\ndrwx------   - <USER> hdfs          0 2011-10-13 00:15 /user/<USER>/_distcp_logs_4bu2mv\n-rw-------   3 <USER> hdfs          0 2011-10-13 00:15 /user/<USER>/_distcp_logs_4bu2mv/part-00000\n-rw-------   3 <USER> hdfs       7840 2011-10-13 00:15 /user/<USER>/out23hdfsfile\n\n\n205 JT  log snippet\n=====================\n2011-10-13 00:14:44,700 ERROR org.apache.hadoop.mapreduce.security.token.DelegationTokenRenewal: Exception renewing\ntokenIdent: 00 1c 68 61 64 6f 6f 70 71 61 40 44 45 56 2e 59 47 52 49 44 2e 59 41 48 4f 4f 2e 43 4f 4d 06 6d 61 70 72 65\n64 00 8a 01 32 fa a0 c8 c9 8a 01 33 1e ad 4c c9 1c 02, Pass: 54 79 88 dc 4d 48 09 90 d8 1b 15 6b bd ad 2d f4 d6 33 6c\ncb, Kind: HDFS_DELEGATION_TOKEN, Service: < 204 NN Hostname>:8020. Not rescheduled\njava.net.ConnectException: Call to < 204 NN Hostname>/< 204 NN IP>:8020 failed on connection exception:\njava.net.ConnectException: Connection refused\n        at org.apache.hadoop.ipc.Client.wrapException(Client.java:1095)\n        at org.apache.hadoop.ipc.Client.call(Client.java:1071)\n        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)\n        at $Proxy7.getProtocolVersion(Unknown Source)\n        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:396)\n        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:379)\n        at org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:118)\n        at org.apache.hadoop.hdfs.DFSClient.access$000(DFSClient.java:74)\n        at org.apache.hadoop.hdfs.DFSClient$Renewer.renew(DFSClient.java:360)\n        at org.apache.hadoop.security.token.Token.renew(Token.java:311)\n        at\norg.apache.hadoop.mapreduce.security.token.DelegationTokenRenewal$RenewalTimerTask$1.run(DelegationTokenRenewal.java:216)\n        at\norg.apache.hadoop.mapreduce.security.token.DelegationTokenRenewal$RenewalTimerTask$1.run(DelegationTokenRenewal.java:212)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:396)\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)\n        at\norg.apache.hadoop.mapreduce.security.token.DelegationTokenRenewal$RenewalTimerTask.run(DelegationTokenRenewal.java:211)\n        at java.util.TimerThread.mainLoop(Timer.java:512)\n        at java.util.TimerThread.run(Timer.java:462)\nCaused by: java.net.ConnectException: Connection refused\n        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)\n        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:574)\n        at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)\n        at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:604)\n        at org.apache.hadoop.ipc.Client$Connection.setupConnection(Client.java:434)\n        at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:560)\n        at org.apache.hadoop.ipc.Client$Connection.access$2000(Client.java:184)\n        at org.apache.hadoop.ipc.Client.getConnection(Client.java:1202)\n        at org.apache.hadoop.ipc.Client.call(Client.java:1046)\n        ... 16 more\n2011-10-13 00:14:44,701 INFO org.apache.hadoop.hdfs.DFSClient: Renewing HDFS_DELEGATION_TOKEN token 45 for hadoopqa on\n< 205 NN hostname>:8020\n2011-10-13 00:15:05,543 INFO org.apache.hadoop.mapred.TaskInProgress: Error from attempt_201110121725_0036_m_000000_0:\njava.io.IOException: Copied: 0 Skipped: 0 Failed: 1\n        at org.apache.hadoop.tools.DistCp$CopyFilesMapper.close(DistCp.java:582)\n        at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:57)\n        at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:436)\n        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)\n        at org.apache.hadoop.mapred.Child$4.run(Child.java:255)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:396)\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)\n        at org.apache.hadoop.mapred.Child.main(Child.java:249)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rajsaha","name":"rajsaha","key":"rajsaha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rajsaha&avatarId=16507","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rajsaha&avatarId=16507","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rajsaha&avatarId=16507","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rajsaha&avatarId=16507"},"displayName":"Rajit Saha","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-13T22:27:28.801+0000","updated":"2011-10-13T22:27:28.801+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527117/comment/13130845","id":"13130845","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"The problem was found to be that the JT couldn't contact the remote NN to renew a token due to a firewall.  The tasks on the DNs were however able to contact the remote NN so the job succeeded.  However, the job would have failed if it executed past the token expiration since the JT was unable to renew the token.\n\nIf the JT has to acquire tokens for a job, and acquisition fails, the job will fail.  This is the ideal behavior, but there's a loophole...  If the JT finds the token in the job's token cache, then it \"assumes\" the token must valid.  The reality may be that the token is invalid, canceled, long expired, or the NN can't even be reached.  In all of these cases, the tasks get fired off anyway, just to clog up a cluster while they die a long slow death.  Actually, on 23, it's been observed that tasks using an invalid token will pound on the NN every second -- on one cluster this happened for a month!\n\nThe JT immediately issues a token renewal and then uses a timer for future renewals.  However, all renewals are done in a thread which means if the initial renewal fails because the token is bad, the job starts anyway.  The simple solution is for the first renewal to occur in the job's context so an exception will kill the job, and future renewals to remain thread-based.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2011-10-19T18:14:40.654+0000","updated":"2011-10-19T18:14:40.654+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527117/comment/13130849","id":"13130849","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"Move privileged renew operation into new method.  The timer task calls it wrapped in an exception handler (as before).  The job thread invokes the method directly before scheduling for renewal.\n\nExisting commit tests are passing.  Will see if I can add a specific test case, and run full test suite overnight.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2011-10-19T18:22:15.277+0000","updated":"2011-10-19T18:22:15.277+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527117/comment/13130859","id":"13130859","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12499726/HDFS-2447.patch\n  against trunk revision .\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/1391//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-19T18:34:04.826+0000","updated":"2011-10-19T18:34:04.826+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527117/comment/13130994","id":"13130994","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"Add unit tests.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2011-10-19T21:03:19.925+0000","updated":"2011-10-19T21:03:19.925+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527117/comment/13131000","id":"13131000","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12499756/HDFS-2447-1.patch\n  against trunk revision .\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/1395//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-19T21:13:48.791+0000","updated":"2011-10-19T21:13:48.791+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527117/comment/13131935","id":"13131935","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12499756/HDFS-2447-1.patch\n  against trunk revision .\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/1086//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-20T19:34:09.615+0000","updated":"2011-10-20T19:34:09.615+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527117/comment/13131973","id":"13131973","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"body":" It is expected that JT can't renew tokens from a different cluster over hdfs:// (i.e. using rpc) if rpc ports are closed for outside cluster access. It is usually expected that http ports are open so it should work over hftp. It seems to me its not a bug.\n\nDaryn,\n  Lets address the issue you pointed out in a separate jira.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-20T20:07:22.310+0000","updated":"2011-10-20T20:07:22.310+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527117/comment/14335592","id":"14335592","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"Cancelling patch, as it no longer applies to trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2015-02-24T22:37:56.463+0000","updated":"2015-02-24T22:37:56.463+0000"}],"maxResults":9,"total":9,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-3236/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0d2sf:"}}