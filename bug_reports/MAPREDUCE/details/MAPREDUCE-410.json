{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12409477","self":"https://issues.apache.org/jira/rest/api/2/issue/12409477","key":"MAPREDUCE-410","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2015-03-16T19:54:41.328+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Mar 16 19:54:41 UTC 2015","customfield_12310420":"148775","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_198552340308_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-03-16T19:54:41.273+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-410/watchers","watchCount":1,"isWatching":false},"created":"2008-11-29T18:29:01.040+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/5","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/trivial.svg","name":"Trivial","id":"5"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-03-16T19:54:41.339+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"I wanted to test new release and have been trying to queue new job.\nBut it didn't work.\n\nThis error is found in JobTracker's log.\n\n========================================\n2008-11-29 21:39:00,276 ERROR org.apache.hadoop.mapred.EagerTaskInitializationListener: Job initialization failed:\njava.util.regex.PatternSyntaxException: Illegal/unsupported escape sequence near index 47\nLeibnitz_[0-9]+_job_200811292137_0001_leibnitz\\hadoop_\\Qwordcount\\E+\n                                               ^\n\tat java.util.regex.Pattern.error(Unknown Source)\n\tat java.util.regex.Pattern.escape(Unknown Source)\n\tat java.util.regex.Pattern.atom(Unknown Source)\n\tat java.util.regex.Pattern.sequence(Unknown Source)\n\tat java.util.regex.Pattern.expr(Unknown Source)\n\tat java.util.regex.Pattern.compile(Unknown Source)\n\tat java.util.regex.Pattern.<init>(Unknown Source)\n\tat java.util.regex.Pattern.compile(Unknown Source)\n\tat org.apache.hadoop.mapred.JobHistory$JobInfo.getJobHistoryFileName(JobHistory.java:638)\n\tat org.apache.hadoop.mapred.JobHistory$JobInfo.logSubmitted(JobHistory.java:803)\n\tat org.apache.hadoop.mapred.JobInProgress.initTasks(JobInProgress.java:353)\n\tat org.apache.hadoop.mapred.EagerTaskInitializationListener$JobInitThread.run(EagerTaskInitializationListener.java:55)\n\tat java.lang.Thread.run(Unknown Source)\n========================================\n\nleibnitz is Jobtracker's hostname and hadoop is username.\n\nThen I wanted to fix it and created  this patch.\n========================================\n--- src/mapred/org/apache/hadoop/mapred/JobHistory.java\t(revision 721683)\n+++ src/mapred/org/apache/hadoop/mapred/JobHistory.java\t(working copy)\n@@ -95,6 +95,10 @@\n   private static final String SECONDARY_FILE_SUFFIX = \".recover\";\n   private static long jobHistoryBlockSize = 0;\n   private static String jobtrackerHostname;\n+  /** Set to true on Windows platforms */\n+    public static final boolean WINDOWS /* borrowed from Path.WINDOWS */\n+                  = System.getProperty(\"os.name\").startsWith(\"Windows\");\n+\n   /**\n    * Record types are identifiers for each line of log in history files. \n    * A record type appears as the first token in a single line of log. \n@@ -634,6 +638,9 @@\n       \n       jobName = escapeRegexChars( jobName );\n \n+      if (WINDOWS) {\n+        user = escapeRegexChars( user );\n+      }\n       // Make the pattern matching the job's history file\n       final Pattern historyFilePattern = \n         Pattern.compile(jobtrackerHostname + \"_\" + \"[0-9]+\" + \"_\" \n========================================\n\nHadoop Core patched this seems to work well.\n\nMaybe my environment is wrong. But if this is bug, please fix.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"108203","customfield_12312823":null,"summary":"JobTracker TaskInitialization failure on cygwin","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shnya","name":"shnya","key":"shnya","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Masahiko","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shnya","name":"shnya","key":"shnya","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Masahiko","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Hadoop 0.19.0 on Cygwin (Windows Vista Ultimate) and Ubuntu Linux 8.10 cluster","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12409477/comment/14363786","id":"14363786","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"body":"This has gone stale. Checkout the windows support in branch-1-win (or branch-1, I can't recall if it was ever merged).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-03-16T19:54:41.328+0000","updated":"2015-03-16T19:54:41.328+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-410/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ivjb:"}}