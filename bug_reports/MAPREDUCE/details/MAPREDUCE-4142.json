{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12550626","self":"https://issues.apache.org/jira/rest/api/2/issue/12550626","key":"MAPREDUCE-4142","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2012-04-12T16:51:16.796+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sun May 06 00:13:04 UTC 2012","customfield_12310420":"235490","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_53868462_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-04-12T21:05:03.108+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-4142/watchers","watchCount":2,"isWatching":false},"created":"2012-04-12T06:07:14.696+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tgraves","name":"tgraves","key":"tgraves","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Graves","active":true,"timeZone":"America/Chicago"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-05-06T00:13:04.575+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"The following test classes are failing on branch-1: TestJobTrackerRestartWithLostTracker, TestJobTrackerSafeMode, TestMiniMRMapRedDebugScript, TestRecoveryManager, TestTaskTrackerLocalization.\n\nRecent MR changes, believe these tests were passing before these failures:\n- MAPREDUCE-4012 Hadoop Job setup error leaves no useful info to users. (tgrav\n- MAPREDUCE-1238. mapred metrics shows negative count of waiting maps and redu\n- MAPREDUCE-4017. Add jobname to jobsummary log (tgraves and Koji Noguchi via \n- MAPREDUCE-4003. log.index (No such file or directory) AND Task process exit \n    \n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"112807","customfield_12312823":null,"summary":"MR test failures on branch-1","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli2","name":"eli2","key":"eli2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli2","name":"eli2","key":"eli2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12550626/comment/13252229","id":"13252229","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli2","name":"eli2","key":"eli2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"Etc/UTC"},"body":"Here are details of the failures:\n\n{noformat}\nTestcase: testRestartWithLostTracker took 163.223 sec\n        FAILED\nTracker killed while the jobtracker was down did not get lost upon restart expected:<0> but was:<1>\njunit.framework.AssertionFailedError: Tracker killed while the jobtracker was down did not get lost upon restart expected:<0> but was:<1>\n        at org.apache.hadoop.mapred.TestJobTrackerRestartWithLostTracker.testRecoveryWithLostTracker(TestJobTrackerRestartWithLostTracker.java:112)\n        at org.apache.hadoop.mapred.TestJobTrackerRestartWithLostTracker.testRestartWithLostTracker(TestJobTrackerRestartWithLostTracker.java:163)\n\nTestcase: testJobTrackerSafeMode took 99.434 sec\n        FAILED\nJobTracker has opened up scheduling before all the trackers were recovered\njunit.framework.AssertionFailedError: JobTracker has opened up scheduling before all the trackers were recovered\n        at org.apache.hadoop.mapred.TestJobTrackerSafeMode.testSafeMode(TestJobTrackerSafeMode.java:177)\n        at org.apache.hadoop.mapred.TestJobTrackerSafeMode.testJobTrackerSafeMode(TestJobTrackerSafeMode.java:267)\n\nTestcase: testMapDebugScript took 89.257 sec\n        FAILED\nnull\njunit.framework.AssertionFailedError: null\n        at org.apache.hadoop.mapred.TestMiniMRMapRedDebugScript.testMapDebugScript(TestMiniMRMapRedDebugScript.java:212)\n\nTestcase: testRecoveryManager took 67.941 sec\n        FAILED\nRecovery manager failed to tolerate job failures expected:<2> but was:<0>\njunit.framework.AssertionFailedError: Recovery manager failed to tolerate job failures expected:<2> but was:<0>\n        at org.apache.hadoop.mapred.TestRecoveryManager.testRecoveryManager(TestRecoveryManager.java:250)\n\nTestcase: testRestartCount took 72.487 sec\n        Caused an ERROR\nnull\njava.lang.NullPointerException\n        at org.apache.hadoop.mapred.TestRecoveryManager.testRestartCount(TestRecoveryManager.java:361)\n\n\nTestcase: testTrackerReinit took 0.038 sec\n        Caused an ERROR\nCould not find any valid local directory for ttprivate/taskTracker/eli/jobcache/job_200907202331_0001/jobToken\norg.apache.hadoop.util.DiskChecker$DiskErrorException: Could not find any valid local directory for ttprivate/taskTracker/eli/jobcache/job_200907202331_0001/jobToken\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli2","name":"eli2","key":"eli2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-12T06:08:10.009+0000","updated":"2012-04-12T06:08:10.009+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12550626/comment/13252578","id":"13252578","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tgraves","name":"tgraves","key":"tgraves","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Graves","active":true,"timeZone":"America/Chicago"},"body":"All of these tests have @Ignore in them and if run individually have been failing for a long time before the listed jiras.\n\nI was running them with: ant test -Dtestcase=foo so I'm not sure why that isn't honoring the @Ignore.\n\nChecking a jenkins output of running all the tests shows:\n\n[junit] Running org.apache.hadoop.mapred.TestRecoveryManager\n    [junit] Tests run: 0, Failures: 0, Errors: 0, Time elapsed: 0.043 sec\n[junit] Running org.apache.hadoop.mapred.TestJobTrackerSafeMode\n    [junit] Tests run: 0, Failures: 0, Errors: 0, Time elapsed: 0.042 sec\n...\n\nI'm running a full test run now to verify that holds.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tgraves","name":"tgraves","key":"tgraves","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Graves","active":true,"timeZone":"America/Chicago"},"created":"2012-04-12T16:51:16.796+0000","updated":"2012-04-12T16:51:16.796+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12550626/comment/13252829","id":"13252829","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tgraves","name":"tgraves","key":"tgraves","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Graves","active":true,"timeZone":"America/Chicago"},"body":"I ran the tests on the 1.0.2 branch and the tests still fail:\n\n    [junit] Test org.apache.hadoop.mapred.TestJobTrackerRestart FAILED (timeout)\n    [junit] Running org.apache.hadoop.mapred.TestJobTrackerRestartWithLostTracker\n    [junit] Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 126.78 sec\n    [junit] Test org.apache.hadoop.mapred.TestJobTrackerRestartWithLostTracker FAILED\n    [junit] Running org.apache.hadoop.mapred.TestJobTrackerSafeMode\n    [junit] Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 75.936 sec\n\nNote that was using ant 1.8.2, I switched to use ant 1.7.1 and it honored the ignore:\n\nTestsuite: org.apache.hadoop.mapred.TestRecoveryManager\nTests run: 0, Failures: 0, Errors: 0, Time elapsed: 0.005 sec\n\nEli, you might check the version of ant you are using.  Please reopen if you think that isn't it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tgraves","name":"tgraves","key":"tgraves","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Graves","active":true,"timeZone":"America/Chicago"},"created":"2012-04-12T21:04:01.198+0000","updated":"2012-04-12T21:04:01.198+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12550626/comment/13252877","id":"13252877","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli2","name":"eli2","key":"eli2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"Etc/UTC"},"body":"bq. Note that was using ant 1.8.2, I switched to use ant 1.7.1 and it honored the ignore:\n\nThanks Thomas.  I'm using ant 1.8.2 as well, this a known issue with ant?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli2","name":"eli2","key":"eli2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-12T21:44:26.735+0000","updated":"2012-04-12T21:44:26.735+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12550626/comment/13252878","id":"13252878","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli2","name":"eli2","key":"eli2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"Etc/UTC"},"body":"Hm, actually, @Ignore works for me on hdfs tests using the same version of ant, wonder what's different about MR here.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli2","name":"eli2","key":"eli2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"Etc/UTC"},"created":"2012-04-12T21:45:39.342+0000","updated":"2012-04-12T21:45:39.342+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12550626/comment/13252887","id":"13252887","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tgraves","name":"tgraves","key":"tgraves","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Graves","active":true,"timeZone":"America/Chicago"},"body":"I remember the ant version thing coming up on the mailing list before but don't remember details.  \n\nperhaps its a dependency version issue or something in MR if hdfs works, I'll try to poke a bit more to see if I can find anything.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tgraves","name":"tgraves","key":"tgraves","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Graves","active":true,"timeZone":"America/Chicago"},"created":"2012-04-12T21:54:05.878+0000","updated":"2012-04-12T21:54:05.878+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12550626/comment/13269088","id":"13269088","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomwhite","name":"tomwhite","key":"tomwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom White","active":true,"timeZone":"Europe/London"},"body":"I think this is happening because the tests are JUnit 3 tests (extending TestCase), but @Ignore is a JUnit 4 construct. Converting these tests to JUnit 4 tests should fix the problem. (I'm not sure what changed to cause these tests to start failing though.)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomwhite","name":"tomwhite","key":"tomwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom White","active":true,"timeZone":"Europe/London"},"created":"2012-05-06T00:13:04.494+0000","updated":"2012-05-06T00:13:04.494+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-4142/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0jnxj:"}}