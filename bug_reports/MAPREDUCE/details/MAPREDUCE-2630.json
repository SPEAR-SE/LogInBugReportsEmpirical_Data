{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12512172","self":"https://issues.apache.org/jira/rest/api/2/issue/12512172","key":"MAPREDUCE-2630","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315570","id":"12315570","description":"","name":"0.23.0","archived":false,"released":true,"releaseDate":"2011-11-11"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-07-03T19:07:55.223+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jul 13 03:02:05 UTC 2011","customfield_12310420":"44086","customfield_12312320":null,"customfield_12310222":"3_*:*_1_*:*_46155_*|*_10002_*:*_1_*:*_39361078_*|*_1_*:*_1_*:*_1157195395_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-07-13T03:02:05.568+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-2630/watchers","watchCount":6,"isWatching":false},"created":"2011-06-29T06:38:42.957+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":3600,"aggregatetimeoriginalestimate":3600,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12340453","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12340453","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12385453","key":"MAPREDUCE-279","self":"https://issues.apache.org/jira/rest/api/2/issue/12385453","fields":{"summary":"Map-Reduce 2.0","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwills","name":"jwills","key":"jwills","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jwills&avatarId=15651","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jwills&avatarId=15651","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jwills&avatarId=15651","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jwills&avatarId=15651"},"displayName":"Josh Wills","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-11-15T00:50:07.812+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12314301","id":"12314301","name":"mrv2","description":"MR-279: Map Reduce Next."}],"timeoriginalestimate":3600,"description":"The RM's admin service exposes a method refreshQueues that is used to update the queue configuration when used with the CapacityScheduler, but if it is used with the FifoScheduler, it will set the containerTokenSecretManager/clusterTracker fields on the FifoScheduler to null, which eventually leads to NPE. Since the FifoScheduler only has one queue that cannot be refreshed, the correct behavior is for the refreshQueues call to be a no-op.\n\nI will attach a patch that fixes this by splitting the ResourceScheduler's reinitialize method into separate initialize/updateQueues methods.","customfield_10010":null,"timetracking":{"originalEstimate":"1h","remainingEstimate":"1h","originalEstimateSeconds":3600,"remainingEstimateSeconds":3600},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12485347","id":"12485347","filename":"MAPREDUCE-2630.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwills","name":"jwills","key":"jwills","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jwills&avatarId=15651","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jwills&avatarId=15651","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jwills&avatarId=15651","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jwills&avatarId=15651"},"displayName":"Josh Wills","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-07-05T23:12:04.284+0000","size":12604,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12485347/MAPREDUCE-2630.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12485614","id":"12485614","filename":"MAPREDUCE-2630-simple.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwills","name":"jwills","key":"jwills","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jwills&avatarId=15651","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jwills&avatarId=15651","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jwills&avatarId=15651","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jwills&avatarId=15651"},"displayName":"Josh Wills","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-07-07T16:11:30.493+0000","size":1863,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12485614/MAPREDUCE-2630-simple.patch"}],"aggregatetimeestimate":3600,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"52599","customfield_12312823":null,"summary":"MR-279: refreshQueues leads to NPEs when used w/FifoScheduler","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwills","name":"jwills","key":"jwills","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jwills&avatarId=15651","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jwills&avatarId=15651","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jwills&avatarId=15651","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jwills&avatarId=15651"},"displayName":"Josh Wills","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwills","name":"jwills","key":"jwills","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jwills&avatarId=15651","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jwills&avatarId=15651","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jwills&avatarId=15651","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jwills&avatarId=15651"},"displayName":"Josh Wills","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":3600,"percent":0},"customfield_12311024":null,"environment":"All","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":3600,"percent":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12512172/comment/13059261","id":"13059261","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"Josh, sorry, took me a while to get to this.\n\nThanks for the patch.\n\nCould we just add a check to FifoScheduler.reinit ala CS.reinit? That way we can keep a single method in Scheduler. I'm happy to rename it 'configure' or some such. Thoughts?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-07-03T19:07:55.223+0000","updated":"2011-07-03T19:07:55.223+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12512172/comment/13059291","id":"13059291","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwills","name":"jwills","key":"jwills","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jwills&avatarId=15651","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jwills&avatarId=15651","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jwills&avatarId=15651","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jwills&avatarId=15651"},"displayName":"Josh Wills","active":true,"timeZone":"America/Los_Angeles"},"body":"No worries Arun- it was a hectic week. Really enjoyed your talk at the Summit, lots of good questions from the audience.\n\nMy preference for the two separate methods was based on the idea that the containerTokenSecretManager and clusterTracker really should never change once the scheduler is init'd, and that having the two separate methods would prevent any other scheduler impls that came along from introducing the same kind of error. If that isn't true, i.e., there is some situation where we would want to change the value of the containerTokenSecretManager/clusterTracker, I'm fine to have the single reinit method.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwills","name":"jwills","key":"jwills","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jwills&avatarId=15651","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jwills&avatarId=15651","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jwills&avatarId=15651","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jwills&avatarId=15651"},"displayName":"Josh Wills","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-07-03T22:07:33.635+0000","updated":"2011-07-03T22:07:33.635+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12512172/comment/13060189","id":"13060189","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwills","name":"jwills","key":"jwills","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jwills&avatarId=15651","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jwills&avatarId=15651","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jwills&avatarId=15651","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jwills&avatarId=15651"},"displayName":"Josh Wills","active":true,"timeZone":"America/Los_Angeles"},"body":"Modified patch to include new tests.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwills","name":"jwills","key":"jwills","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jwills&avatarId=15651","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jwills&avatarId=15651","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jwills&avatarId=15651","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jwills&avatarId=15651"},"displayName":"Josh Wills","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-07-05T23:12:04.317+0000","updated":"2011-07-05T23:12:04.317+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12512172/comment/13061407","id":"13061407","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwills","name":"jwills","key":"jwills","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jwills&avatarId=15651","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jwills&avatarId=15651","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jwills&avatarId=15651","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jwills&avatarId=15651"},"displayName":"Josh Wills","active":true,"timeZone":"America/Los_Angeles"},"body":"Simpler patch that just updates the impl of FifoScheduler to make it differentiate between initialization and re-initialization, ala the CapacityScheduler.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwills","name":"jwills","key":"jwills","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jwills&avatarId=15651","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jwills&avatarId=15651","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jwills&avatarId=15651","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jwills&avatarId=15651"},"displayName":"Josh Wills","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-07-07T16:11:30.538+0000","updated":"2011-07-07T16:11:30.538+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12512172/comment/13063973","id":"13063973","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12485614/MAPREDUCE-2630-simple.patch\n  against trunk revision 1145424.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/456//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-12T16:13:39.228+0000","updated":"2011-07-12T16:13:39.228+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12512172/comment/13064311","id":"13064311","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"body":"I just pushed this. Thanks Josh.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahadev","name":"mahadev","key":"mahadev","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mahadev konar","active":true,"timeZone":"Etc/UTC"},"created":"2011-07-13T03:02:05.577+0000","updated":"2011-07-13T03:02:05.577+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-2630/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i09ddb:"}}