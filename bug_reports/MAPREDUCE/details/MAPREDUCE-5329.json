{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12652668","self":"https://issues.apache.org/jira/rest/api/2/issue/12652668","key":"MAPREDUCE-5329","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325257","id":"12325257","description":"2.3.0 release","name":"2.3.0","archived":false,"released":true,"releaseDate":"2014-02-20"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-06-13T18:04:16.019+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Oct 15 09:01:35 UTC 2013","customfield_12310420":"332992","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_2695129571_*|*_1_*:*_1_*:*_7866259759_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-10-13T20:20:47.926+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-5329/watchers","watchCount":6,"isWatching":false},"created":"2013-06-13T14:37:38.655+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324032","id":"12324032","description":"2.1.0-beta release","name":"2.1.0-beta","archived":false,"released":true,"releaseDate":"2013-08-22"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324812","id":"12324812","description":"2.0.6-alpha bug-fix release","name":"2.0.6-alpha","archived":false,"released":true,"releaseDate":"2013-08-22"}],"issuelinks":[{"id":"12370429","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12370429","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12547370","key":"MAPREDUCE-4049","self":"https://issues.apache.org/jira/rest/api/2/issue/12547370","fields":{"summary":"plugin for generic shuffle service","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}},{"id":"12370647","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12370647","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12653160","key":"YARN-841","self":"https://issues.apache.org/jira/rest/api/2/issue/12653160","fields":{"summary":"Annotate and document AuxService APIs","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}},{"id":"12371106","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12371106","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12654718","key":"YARN-886","self":"https://issues.apache.org/jira/rest/api/2/issue/12654718","fields":{"summary":"make APPLICATION_STOP consistent with APPLICATION_INIT","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12370428","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12370428","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12513701","key":"MAPREDUCE-2668","self":"https://issues.apache.org/jira/rest/api/2/issue/12513701","fields":{"summary":"MR-279: APPLICATION_STOP is never sent to AuxServices","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-03-10T04:30:39.468+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12315342","id":"12315342","name":"mr-am"}],"timeoriginalestimate":null,"description":"APPLICATION_INIT is never sent to AuxServices other than the built-in ShuffleHandler.  This means that 3rd party ShuffleProvider(s) will not be able to function, because APPLICATION_INIT enables the AuxiliaryService to map jobId->userId. This is needed for properly finding the MOFs of a job per reducers' requests.\n\nNOTE: The built-in ShuffleHandler does get APPLICATION_INIT events due to hard-coded expression in hadoop code. The current TaskAttemptImpl.java code explicitly call: serviceData.put (ShuffleHandler.MAPREDUCE_SHUFFLE_SERVICEID, ...) and ignores any additional AuxiliaryService. As a result, only the built-in ShuffleHandler will get APPLICATION_INIT events.  Any 3rd party AuxillaryService will never get APPLICATION_INIT events.\n\n\nI think a solution can be in one of two ways:\n1. Change TaskAttemptImpl.java to loop on all Auxiliary Services and register each of them, by calling serviceData.put (…) in loop.\n2. Change AuxServices.java similar to the fix in: MAPREDUCE-2668  \"APPLICATION_STOP is never sent to AuxServices\".  This means that in case the 'handle' method gets APPLICATION_INIT event it will demultiplex it to all Aux Services regardless of the value in event.getServiceID().\n\nI prefer the 2nd solution.  I am welcoming any ideas.  I can provide the needed patch for any option that people like.\n\nSee [Pluggable Shuffle in Hadoop documentation|http://hadoop.apache.org/docs/current/hadoop-mapreduce-client/hadoop-mapreduce-client-core/PluggableShuffleAndPluggableSort.html]\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324808","id":"12324808","description":"2.1.1-beta bug-fix release","name":"2.1.1-beta","archived":false,"released":true,"releaseDate":"2013-09-16"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12325050","id":"12325050","description":"2.2.0 release","name":"2.2.0","archived":false,"released":true,"releaseDate":"2013-10-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12325257","id":"12325257","description":"2.3.0 release","name":"2.3.0","archived":false,"released":true,"releaseDate":"2014-02-20"}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12607556","id":"12607556","filename":"MAPREDUCE-5329.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-10-09T13:28:38.400+0000","size":11408,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12607556/MAPREDUCE-5329.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12607543","id":"12607543","filename":"MAPREDUCE-5329.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-10-09T11:18:41.979+0000","size":11467,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12607543/MAPREDUCE-5329.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12602814","id":"12602814","filename":"MAPREDUCE-5329.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-09-12T15:39:44.030+0000","size":13061,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12602814/MAPREDUCE-5329.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"333320","customfield_12312823":null,"summary":"APPLICATION_INIT is never sent to AuxServices other than the builtin ShuffleHandler","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13682488","id":"13682488","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"Can the MR AM specify the service to be used via configuration, and set the service data accordingly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-13T18:04:16.019+0000","updated":"2013-06-13T18:04:16.019+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13682539","id":"13682539","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Hi Siddharth,\n\nI am not sure I understand the question.  Do you suggest that we'll have a configuration with sub-list of the AuxServices and only members of the new list will get the APPLICATION_INIT event?\n- This is possible, however, it will not match the current behavior with APPLICATION_STOP event, since the last event is being sent to ALL AuxServices.\n\nPlease elaborate.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-06-13T18:43:37.201+0000","updated":"2013-06-13T18:43:37.201+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13682724","id":"13682724","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"It should be possible to configure the MR AM with the shuffle service that needs to be used, in which case the MR AM sets up the service id correctly (in TaskAttemptImpl), and the NodeManager can send the init event to the correct service. We should probably change the stop to behave the same way. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-13T20:58:34.949+0000","updated":"2013-06-13T20:58:34.949+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13683102","id":"13683102","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"This idea will force us to restart mapred daemons any time we want to switch shuffle service and will limit us to having just 1 ShuffleProvider at a time.  I already discussed this idea in MAPREDUCE-4049 (look for the word multiple there).  I am pasting here one paragraph from that discussion:\n\n{quote}\nIt could be that a ShuffleConsumerX will be ideal for jobs of one type, while ShuffleConsumerY will be ideal for jobs of other type (for example Grep vs. TeraSort). Hence, multiple Shuffle-Consumer plugins may run in parallel in multiple jobs. Each of the consumers will contact its desired shuffle provider. Hence, all providers should be available in parallel (also, one shuffle service can be sensitive to type of network problems that doesn't disturb other shuffle services, hence, it should be possible to fallback to another shuffle on the fly).\n{quote}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-06-14T05:30:06.730+0000","updated":"2013-06-14T05:30:06.730+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13683579","id":"13683579","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"With YARN, a new AM (Application) is started per job. The initApp in the NM is per app - so each job/app can choose which shuffle provider it wants to use. The shuffle service configured for an AM will be specific to a single job only.\nFrom MAPREDUCE-4049\nbq.  A shuffle consumer instance will only contact one of the shuffle providers and will request its desired files only from from this provider.\n\nI'm assuming a single job will only use one shuffle provider - or do you see a situation where multiple shuffle providers can serve data to a single job ?\n\nIn case of multiple jobs being run by a single AM - this gets more complicated, and we may need to initialize multiple providers.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-14T17:40:56.483+0000","updated":"2013-06-14T17:40:56.483+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13684258","id":"13684258","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Thanks for the explanation about YARN.  Still this is not enough, for two reasons:\n\n1. It is true that *usually* \"A shuffle consumer instance will only contact one of the shuffle providers\". Still, as written in the quote I pasted , \"it should be possible to fallback to another shuffle on the fly\".  This means that one consumer can load another consumer and serve as proxy to the real consumer that will contact another provider.\n\n2. In a single job there are multiple reducers each with its own shuffle consumer instance; hence, we have *multiple shuffle consumers per job*.  It should be possible for each consumer to choose its preffered provider based on memory/network/... condition on its machine regardless of other consumers in the same job.  \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-06-15T18:58:18.943+0000","updated":"2013-06-15T18:58:18.943+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13684624","id":"13684624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"\nHi Siddharth\nIn addition to what I wrote, I just noticed that perhaps we have a misunderstanding.\nSee \"Implementing a Custom Shuffle\" from [Hadoop documentation about Pluggable Shuffle|http://hadoop.apache.org/docs/current/hadoop-mapreduce-client/hadoop-mapreduce-client-core/PluggableShuffleAndPluggableSort.html]\n{quote}\nA custom shuffle implementation requires a org.apache.hadoop.yarn.server.nodemanager.containermanager.AuxServices.AuxiliaryServiceimplementation class running in the NodeManagers and a org.apache.hadoop.mapred.ShuffleConsumerPlugin implementation class running in the Reducer tasks.\nThe default implementations provided by Hadoop can be used as references:\n•\torg.apache.hadoop.mapred.ShuffleHandler\n•\torg.apache.hadoop.mapreduce.task.reduce.Shuffle\n{quote}\n\nIn this issue we are talking about the *provider side of the Shuffle*, we want to have additional ShuffleProvider(s) in addition to the default ShuffleHandler.\nAll shuffle providers are AuxServices running in the NodeManager.  I see them as daemons like ShuffleHandler, they are not applications or jobs. If I understand correctly, in order to simultaneously support multiple jobs of multiple users that each can contact different Shuffle provider we must have all providers in the air in parallel.\nWith this, the ShuffleConsumer in each reducer will be able to request MOFs from its desired provider.  However, the provider must know where in the disks are the MOFs of a particular job.  The way to know that (see ShuffleHandler) is based on the mapping: jobId -> userId.  This data for this map arrive from the APPLICATION_INIT event.  Hence, all AuxServices that serve as ShuffleProviders need to get APPLICATION_INIT events.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-06-16T11:17:26.625+0000","updated":"2013-06-16T11:17:26.625+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13685110","id":"13685110","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. If I understand correctly, in order to simultaneously support multiple jobs of multiple users that each can contact different Shuffle provider we must have all providers in the air in parallel.\nMultiple providers can be run by the NodeManager in parallel. An application chooses which provider(s) it wants to use when it starts a container on a NodeManager.\n\nbq. This data for this map arrive from the APPLICATION_INIT event. Hence, all AuxServices that serve as ShuffleProviders need to get APPLICATION_INIT events.\nThe data in the APPLICAITON_INIT event is from the startContainer request (the serviceData in the ContainerLaunchConetxt). If the application wants the INIT event to go to multiple providers, it can set the service data accordingly. The MapReduce AM hardcodes this to the default SHUFFLE_PROVIDER which is why only that one gets the init event.\n\nThere may be auxillary services which are not responsible for shuffle, or are in general incompatible with the shuffle consumer configured by the job. I don't think they need to get an INIT event.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-17T09:01:24.328+0000","updated":"2013-06-17T09:01:24.328+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13685112","id":"13685112","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"Moved this over to MapReduce, since the MR-AM needs to set the serviceData correctly to initialize the correct ShuffleService on the nodemanager.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-17T09:03:06.004+0000","updated":"2013-06-17T09:03:06.004+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13685476","id":"13685476","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"{quote}\nThe data in the APPLICAITON_INIT event is from the startContainer request (the serviceData in the ContainerLaunchConetxt). If the application wants the INIT event to go to multiple providers, it can set the service data accordingly. The MapReduce AM hardcodes this to the default SHUFFLE_PROVIDER which is why only that one gets the init event.\n{quote}\n\nThanks. I was not aware of that!\nI have no experience in this, can you tell me, in case I want the INIT event to go to multiple providers, can I do that through XML configuration, or do I need to change the code of the application for that?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-06-17T11:55:39.336+0000","updated":"2013-06-17T11:55:39.336+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13685513","id":"13685513","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Another comment,\nI looked in the code of *createCommonContainerLaunchContext* in TaskAttemptImpl.java, it appears that this method *creates a brand new serviceData* and fills it explicitly with just the builtin \"ShuffleHandler\" using:\n{code}\n    // Service data\n    Map<String, ByteBuffer> serviceData = new HashMap<String, ByteBuffer>();\n...\n      // Add shuffle token\n      LOG.info(\"Putting shuffle token in serviceData\");\n      serviceData.put(ShuffleHandler.MAPREDUCE_SHUFFLE_SERVICEID,\n          ShuffleHandler.serializeServiceData(jobToken));\n{code}\n\nThe only external input to this code snippet is the jobToken which is truly an argument to the method.  Hence, *it seems that an application can only determine the jobToken in the serviceData, but NOT the services in the serviceData*.\n\nNow, If you don't want all AuxServices to get INIT event, we can create a new conf param with the sub-list of AuxServices that should get INIT event (and the default value will be the builtin 'ShuffleHandler' instead of hard-coded).  However, I don't think there is an AuxService that is incompatible with INIT event since the initApp method is part of the AuxiliaryService interface. Hence, my private opinion is that sending INIT to all AuxServices matches the current design. However, it is your call to decide. I am okay with any option that can work, and the best option is without code changes - if this is possible :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-06-17T12:51:09.930+0000","updated":"2013-06-17T12:51:09.930+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13685726","id":"13685726","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq.  I am okay with any option that can work, and the best option is without code changes - if this is possible.\nThat would be awesome :), but something needs to change - either the NM to send the event to all services, or the MR AM to get the list of handlers via config. I prefer the second option. Any new AuxServices should be capable of handling init/finish events though - since users can specify pretty much any service even if they aren't used.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-17T17:14:35.787+0000","updated":"2013-06-17T17:14:35.787+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13685942","id":"13685942","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"sounds very good.\nPlease let me know where in MR AM you want the code change, are we still talking about TaskAttemptImpl.java, or do you have something else in mind?\nAlso, I need to understand if you want new config for handlers/appliction-listeners, or that we can manage with the current aux-services config?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-06-17T20:32:48.404+0000","updated":"2013-06-17T20:32:48.404+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13686322","id":"13686322","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"This could end up being a complicated change depending on the kind of configuration information required by your providers / consumers. Does your custom shuffle handler have a port as the service data ? That's ingrained into the MR AM and tasks. See ContainerLauncherImpl. In this case it may not be too complicated. \n\nThis will likely need additional config parameters to configure the list of aux services being used, along with their service IDs. TaskAttemptImpl will also need change.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-18T02:48:19.258+0000","updated":"2013-06-18T02:48:19.258+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13686891","id":"13686891","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Hi Siddharth,\n\nA change in TaskAttemptImpl.java is enough for ShuffleProviders.\nIf a 3rd party ShuffleProvider need specific configuration, it can support extra new config fields for itself that will be set by the user and will be ignored by other components.\nAccording to my tests, a change in TaskAttemptImpl.java solves the issue. I have no problem to limit it to sub set of aux-services that will be in a new config.\nAvner\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-06-18T16:20:37.313+0000","updated":"2013-06-18T16:20:37.313+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13687028","id":"13687028","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"That sounds good for now. I'd change ContainerLauncherImpl as well though to deserialize the metadata returned by the specific provider.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-18T18:18:02.949+0000","updated":"2013-06-18T18:18:02.949+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13687123","id":"13687123","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"one littele concern though, In case we do the discussed change in TaskAttemptImpl.java then APPLICATION_INIT will be sent multiple times, one for each provider, which is good.  However, I believe our change will cause APPLICATION_STOP to be sent multiple times too.  Now, as a result of MAPREDUCE-2668, any time APPLICATION_STOP is arrived to AuxServices.handle() it is demultiplexed to ALL AuxServices; hence, each AuxService will receive stopApp() multiple times.\n\nIn order to prevent that, we may revert the demultiplexing in AuxServices.handle().  However, we currently have discrepency, because we send stopApp() to all AuxServices, but we suggested to send initApp() just to sub list of AuxServices.  Hence, I suggest again to send both initApp() and stopApp() to ALL AuxServices.  This also matches the interface of AuxiliaryService which declares both initApp() and stopApp() for ALL aux-services.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-06-18T20:01:56.713+0000","updated":"2013-06-18T20:01:56.713+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13689230","id":"13689230","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Hi Siddharth,\njust to let you know that you can ignore my previous comment.  I checked the log files and saw that, even when I changed the code and called serviceData.put(...) multiple times because of multiple handlers, still APPLICATION_STOP is arrived just once to AuxServices.handle (and demultiplexed just once to each service).  Hence, all is good and we can stay with the option you liked.\nThanks,\n  Avner\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-06-20T13:20:16.843+0000","updated":"2013-06-20T13:20:16.843+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13689589","id":"13689589","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"The start/stop behaviour should be consistent. We shouldn't send the stop to all service. Can you please open a YARN jira for this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-20T20:07:26.138+0000","updated":"2013-06-20T20:07:26.138+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13689711","id":"13689711","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Sure. I'll open it.\n\nI understand we are talking about new config with name, default value, and description like the below.  Right?\nIf yes, please feel free to edit anything in the below.\n\n{code}\n  <property>\n    <name>yarn.nodemanager.aux-services.application-listeners</name>\n    <value>mapreduce.shuffle</value>\n    <description> comma delimited list of aux-services that should receive\n                  APPLICATION_INIT/APPLICATION_STOP events.  \n                  This list must be sub list of yarn.nodemanager.aux-services \n    </description>\n  </property>\n{code}\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-06-20T21:38:37.623+0000","updated":"2013-06-20T21:38:37.623+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13690583","id":"13690583","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"If the change is in the MapReduce AM - the property should be defined for that.\nSomething like\n<name>mapreduce.shuffle.provider.class</name>\n<value>Either the class name, or the service name as long as the AM has enough information to convert this into a class - based on the configured shuffle providers</value>","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-21T18:42:56.383+0000","updated":"2013-06-21T18:42:56.383+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13692293","id":"13692293","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"got it!\nSo in general we are talking about a change in *TaskAttemptImpl.java*, in which we should remove the hard-coded:\n{code}\n      serviceData.put(ShuffleHandler.MAPREDUCE_SHUFFLE_SERVICEID,\n          ShuffleHandler.serializeServiceData(shuffleToken));\n{code}\nand replace it with something based on:\n{code}\n    Collection<String> shuffleProviders = conf.getStringCollection(\n        \"mapreduce.shuffle.provider.plugin.classes\"); // the constant will come from mapreduce/MRConfig.java\n\n    Collection<String> auxNames = conf.getStringCollection(\n        YarnConfiguration.NM_AUX_SERVICES);\n    for (final String serviceName : auxNames) {\n      try {\n        String serviceStr = String.format(YarnConfiguration.NM_AUX_SERVICE_FMT, serviceName);\n        String serviceClassName = conf.get(serviceStr);\n        if (shuffleProviders.contains(serviceClassName)) {\n                LOG.info(\"Adding \" + serviceName + \" to serviceData, serviceClassName=\" + serviceClassName);\n                serviceData.put(serviceName, ShuffleHandler.serializeServiceData(shuffleToken));\n        }\n\n      } catch (RuntimeException e) {\n        LOG.error(\"Failed in \" + serviceName+ \", \" + serviceClassName, e);\n        throw e;\n      }\n    }\n{code}\nIs this what you have in mind? Do you see anything else?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-06-24T19:33:51.696+0000","updated":"2013-06-24T19:33:51.696+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13693000","id":"13693000","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Hi Siddharth,\nBased on your request, I created YARN-886 make APPLICATION_STOP consistent with APPLICATION_INIT\nAvner","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-06-25T13:06:31.155+0000","updated":"2013-06-25T13:06:31.155+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13695601","id":"13695601","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. serviceData.put(serviceName, ShuffleHandler.serializeServiceData(shuffleToken));\nShouldn't this be specific to the shuffle provider ?\n\nAlso the alternate provider also works with a single shuffle port and makes use of job tokens, correct ? Shuffle port being ingrained in several places in the AM makes this a tough change for other types of providers.\n\nI believe you want to fall back to a different shuffle provider if one does not work. I assume they're running on different ports - am not sure the fallback will work in that case. \n\nContainerLauncherImpl likely needs some change as well - since the startContainer response contains service data set by the specific provider, and is deserialized in the AM to figure out the shuffle port. If you use a provider other than the default ShuffleHandler - the port should be read based on that providers service id.\n\nbq.  Based on your request, I created YARN-886 make APPLICATION_STOP consistent with APPLICATION_INIT\nThanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-28T17:48:21.986+0000","updated":"2013-06-28T17:48:21.986+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13696175","id":"13696175","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"{quote}\nserviceData.put(serviceName, ShuffleHandler.serializeServiceData(shuffleToken));\nShouldn't this be specific to the shuffle provider ?\n{quote}\nI don't know.  So far, I never used security.  Please let me know what do you suggest here?\n\n{quote}\nI believe you want to fall back to a different shuffle provider if one does not work. I assume they're running on different ports - am not sure the fallback will work in that case.\n{quote}\n\nThe fallback already works for me in many tests.\nRegarding the port, I expected that 3rd party shuffle providers will specify their port as a new user config in mapred-site.xml (according to the documentation of the shuffle service vendor).  The user will specify it in mapred-site.xml, than both the provider and the consumer will read it explicitly and use it.  This prevents the use of port=0, but other than that, I expect it to work.  In my case my provider uses an RDMA port (via JNI and C++) and I don't have any problem at all.  The consumer only takes the host machine from the URL in the MapDone event, but connects to the agreed RDMA port on that machine and ignores the builtin ShuffleHandler's port part in the URL.  I believe that the same can work for 3rd party provider that works over TCP.\n\n{quote}\nContainerLauncherImpl likely needs some change as well - since the startContainer response contains service data set by the specific provider, and is deserialized in the AM to figure out the shuffle port. If you use a provider other than the default ShuffleHandler - the port should be read based on that providers service id.\n{quote}\nPlease let me know if this is needed as part of this issue, or that we can create distinct issue for it, because as I told you, my provider already works with above patch including the fallback feature.\n\nThanks for all your comments and help.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-06-29T18:58:41.687+0000","updated":"2013-06-29T18:58:41.687+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13748477","id":"13748477","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Hi Siddharth,\n \nI read some documentation about Yarn architecture and I got a better understanding of your points.  I am trying to suggest a new solution:\n \nI see 4 issues in the current implementation of AuxiliaryServices / NodeManager in Yarn:\n# MAPREDUCE-5329: APPLICATION_INIT is never sent to AuxiliaryServices other than the built in ShuffleHandler.  This is in contrast to [the following Yarn/NodeManager documentation|http://hortonworks.com/blog/apache-hadoop-yarn-nodemanager/], which says: _\"Auxiliary services are notified when an application’s first container starts on the node\"_\n# YARN-886: APPLICATION_STOP is inconsistent with APPLICATION_INIT\n# New issue: We should consider shuffleToken to be specific to the shuffle provider\n# New issue: AM should support multiple AuxiliaryServices, each with a distinct service port\n \n\nfor #1 & #2 we have already created JIRA issues.  *I strongly suggest creating distinct JIRA issues for #3 & #4 as well*.  This will allow progressing in parallel and for the users to benefit from the fixes independently (without binding one fix to the other).\n  \nLast comment, regarding #3, I think that perhaps we should leave shuffleToken to be general to all shuffle providers.  This is for 2 reasons:\n* AFAICS, shuffleToken is based on jobToken and user credentials; hence, it is not specific to the provider but it is to the job&user.\n* In the shuffle-consumer side, the token is not specific to the shuffle-consumer, but it is part of the reduceTask; hence, it is general for all shuffle-consumers.\nHence all shuffle services can use the same ShuffleToken without any problem.\n\nPlease let me know what do you think.\n\nThanks for your help,\nAvner\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-08-23T11:39:14.843+0000","updated":"2013-08-23T11:39:14.843+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13748741","id":"13748741","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. \"Auxiliary services are notified when an application’s first container starts on the node\"\nThe documentation likely needs an update for this.\n\nbq. New issue: We should consider shuffleToken to be specific to the shuffle provider\nIsn't the ShuffleToken already specific to a shuffle provider (specifically an Aux service) - in terms of YARN. Regarding your follow up, an AM (MapReduce) in this case can choose to use the same ShuffleToken for multiple Aux services.\n\nbq. AM should support multiple AuxiliaryServices, each with a distinct service port\nThat would be a MapReduce specific jira. YARN-1065 is likely to be helpful towards supporting this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-23T17:26:09.519+0000","updated":"2013-08-23T17:26:09.519+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13749434","id":"13749434","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Hi Siddharth,\nThanks for your prompt answer.\n\n{quote}\n  --- AM should support multiple AuxiliaryServices, each with a distinct service port\nThat would be a MapReduce specific jira. YARN-1065 is likely to be helpful towards supporting this.\n{quote}\nI agree with you.  I think that for this we'll need to clarify which aux-services belong to the MapReduce AM.  Probably a new conf will be needed.  *Do you want me to open a ditinct MapReduce JIRA for that?*  I want to keep this one focused on APPLICATION_INIT.\n\nThanks,\n  Avner ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-08-24T17:51:53.585+0000","updated":"2013-08-24T17:51:53.585+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13751008","id":"13751008","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. I agree with you. I think that for this we'll need to clarify which aux-services belong to the MapReduce AM. Probably a new conf will be needed. Do you want me to open a ditinct MapReduce JIRA for that? I want to keep this one focused on APPLICATION_INIT.\nIf the MR AM knows how to handle multiple services, and informs the NM about all of these, APPLICATION_INIT should just go out to all of them. Sounds like this jira can be used to fix this ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-27T06:20:29.394+0000","updated":"2013-08-27T06:20:29.394+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13752353","id":"13752353","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Hi Siddharth,\n\n*Regarding your previous comment:*\n{quote}\nIsn't the ShuffleToken already specific to a shuffle provider (specifically an Aux service) - in terms of YARN\n{quote}\n\nI don’t think there is an architectural reason for having _shuffleToken_ specific per shuffle provider.  *It is safe and reasonable to have one _shuffleToken_ for all shuffle-providers and for all shuffle-consumers of a job.*\nLooking in the current code, _TaskAttemptImpl_ creates _shuffleToken_ on the fly for shuffle needs based on the job token and on user credentials.  The _shuffleToken_ is stored in _TokenCache/Credentials map_ under the general shuffle label _\"MapReduceShuffleToken\"_.  \nAlso, in the shuffle-consumer side, _shuffleToken_ is part of the ReduceTask and it is not specific to a shuffle-consumer in any way.\n\nThe only thing that may relate _shuffleToken_ to a specific aux-service is an existing biased in the current code. The code for serializing/deserializing _shuffleToken_ is located in 2 static methods in the _AuxiliaryService_ class _ShuffleHandler_.  However, I think there is no real justification for that and it is very easy to move these 2 simple methods to a more appropriate place like the _Token_ class itself.\n\n\n\n*Regarding your current comment:*\n{quote}\nIf the MR AM knows how to handle multiple services, and informs the NM about all of these, APPLICATION_INIT should just go out to all of them. Sounds like this jira can be used to fix this?\n{quote}\n\nI think that sending _APPLICATION_INIT_ message worth an issue for itself and fixing it can help a lot several aux-services regardless of any additional fix for service port (for example aux-services that rely on RDMA and do not use TCP at all, or aux-services that can read port from conf).\n\nThe purpose of the suggested new MAPREDUCE issue is one step further - for *configuring multiple aux-services* with service-port, regardless of shuffle-providers and regardless of _APPLICATION_INIT_.  Beside, the new issue is blocked on YARN-1065.  Hence, I prefer to fix this little issue without waiting for a comprehensive fix for all the “neighbor” issues.\n\nThanks for your help,\nAvner\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-08-28T12:46:34.700+0000","updated":"2013-08-28T12:46:34.700+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13753085","id":"13753085","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. The only thing that may relate shuffleToken to a specific aux-service is an existing biased in the current code. The code for serializing/deserializing shuffleToken is located in 2 static methods in the AuxiliaryService class ShuffleHandler. However, I think there is no real justification for that and it is very easy to move these 2 simple methods to a more appropriate place like the Token class itself.\nIn terms of the application - MR AM, ReduceTask etc - the shuffle token can be shared. In terms of YARN - each auxiliary servive that an app needs to know will only receive this bit of information if it is specified for that Aux service.\n\nThe MR AM is pretty tightly tied to it's current shuffle service. The AM itself is aware of the existing shuffle service, the fact that it uses ports, and how to construct URLs for the existing Shuffle consumer to use.\n\nI'm assuming you're planning to write a different auxiliary service running in the NodeManager as your alternate shuffle provider ? Does this need any node specific configuration. How will the consumers find out when and where to fetch data from ? The new ShuffleConsumer can fetch completion events from the AM - which will have a URL constructed based on the existing ShuffleProvider. Is this information sufficient for your consumer to fetch the data ?\n\nIf it is, to get your provider initialized by the NM (i.e. the APPLICATION_INIT event), you'll need to modify the {serviceData} in the startContainer call. That is a map containing the serviceId for the auxiliary service and data that it needs for initialization. In case of the current ShuffleProvider - this is ShuffleHandler.MAPREDUCE_SHUFFLE_SERVICEID and the token. You just need to add another entry to this map for your own Provider. If it's using the same token, send that as the payload.\nIf not, the changes are likely to be more extensive.\n\nbq. The purpose of the suggested new MAPREDUCE issue is one step further - for configuring multiple aux-services with service-port, regardless of shuffle-providers and regardless of APPLICATION_INIT. Beside, the new issue is blocked on YARN-1065.\nI'm not sure I understand your use case - and how this is separate, but if you think it's independent you should just create a jira with details.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-08-29T00:23:18.933+0000","updated":"2013-08-29T00:23:18.933+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13753691","id":"13753691","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Hi Siddharth,\n\n{quote}\nI'm assuming you're planning to write a different auxiliary service running in the NodeManager as your alternate shuffle provider ? \n{quote}\nRight\n\n{quote}\nDoes this need any node specific configuration? \n{quote}\nNo. The Configuration object that any AbstractService gets in its init() method is enough.\n\n{quote}\nHow will the consumers find out when and where to fetch data from? \n{quote}\nThe consumers will fetch completion events from the AM same as the vanilla ShuffleConsumer does\n\n{quote}\nThe new ShuffleConsumer can fetch completion events from the AM - which will have a URL constructed based on the existing ShuffleProvider. Is this information sufficient for your consumer to fetch the data?\n{quote}\nYes. The URL doesn't contain path to the MOF, but it contains the values of <jobid, mapid>. The consumer will extract <hostname, jobid, mapid> from the url.  It will contact the hostname over RDMA and ask its segment for <jobid, mapid>. This is all a provider need for finding the MOF on one of its local disks (in addition to the mapping jobid->userid that comes from APPLICATION_INIT messages) *and this is exactly what the vanilla provider does*.\n\n{quote}\nIf it is, to get your provider initialized by the NM (i.e. the APPLICATION_INIT event), you'll need to modify the _serviceData_ in the startContainer call. That is a map containing the serviceId for the auxiliary service and data that it needs for initialization. In case of the current ShuffleProvider - this is ShuffleHandler.MAPREDUCE_SHUFFLE_SERVICEID and the token. You just need to add another entry to this map for your own Provider. If it's using the same token, send that as the payload.\n{quote}\nGreat! I would like to do that! \nIf I understand correctly, startContainer gets ContainerLaunchContext that is created in createCommonContainerLaunchContext and this is the right place for adding entries to the serviceData map.\nI think the code for that should be similar to what I wrote above in my 24/Jun/13 comment.\n*Please let me know if I can continue based on this code.*\n\n{quote}\nIf not, the changes are likely to be more extensive.\n{quote}\nI prefer to go for the simple case :-)\n\n…\n\n{quote}\nbut if you think it's independent you should just create a jira with details\n{quote}\nThanks.  I’ll create another JIRA with details for supporting multiple aux-services with different ports and link it to this issue.\n\n\nI want to add I really appreciate all your efforts on this matter,\n Avner\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-08-29T15:00:36.345+0000","updated":"2013-08-29T15:00:36.345+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13757448","id":"13757448","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. I think the code for that should be similar to what I wrote above in my 24/Jun/13 comment.\nThis JIRA has been open a long time!\nYep, it does look like the change will be something along those lines. I don't particularly like the fact that the ShuffleHandler is being used to serialize data for additional Aux services. Unless the jobToken is required, how about sending an empty byte buffer to ensure the additional service is initialized.\nConsidering how the ShuffleHandler is tied into the TaskAttemptImpl as well as ContainerLauncher for the port information - I think this should just be left as it is - i.e. ShuffleHandler will always be used. To configure an additional ShuffleProvider - add a separate config like your previous patch. That's really an 'advanced' config - with restrictions on how it can be used in the MR case - i.e. any service data returned by the plugin is not used, service data sent to the plugin is either the jobToken or an empty ByteBuffer.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-04T04:03:48.083+0000","updated":"2013-09-04T04:03:48.083+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13757460","id":"13757460","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"fine.  I'll go for it :)\n\nI understand that in my code I'll need to add 'if' for filtering out the builtin ShuffleHandler in case the user will mistakenly specify ShuffleHandler among the providers in the \"advanced\" config. Right?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-09-04T04:39:17.135+0000","updated":"2013-09-04T04:39:17.135+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13765570","id":"13765570","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:green}+1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12602814/MAPREDUCE-5329.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/3996//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/3996//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-09-12T16:13:41.204+0000","updated":"2013-09-12T16:13:41.204+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13766295","id":"13766295","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Hi Siddharth,\n\nMy patch is ready for your review.  Its core part is ~25 lines.  The rest is mainly tests.\n\nThanks,\n  Avner\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-09-13T07:12:48.901+0000","updated":"2013-09-13T07:12:48.901+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13776065","id":"13776065","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"Comments on the patch.\n- Rename \"mapreduce.shuffle.provider.plugin.classes\" - this is a job specific configuration. mapreduce.job.shuffle.provider.plugin.classes. Also, this should be in MRJobConfig and not MRConfig\n- Given that this is not going to be used very often, I think it can be left out of mapred-default.xml - and instead documented in MRJobConfig itself.\n- Would prefer avoiding the fully qualified name (java.util.Collection)\n- Should the loading walk over the specified ShuffleProvider list, rather than the ones available on the NodeManager - and log providers which are not available.\n- For the unit test, is the security setup really required - kerberos, acl setup etc.\nAlso, you may want to change the service name to not have a \".\" in it. YARN-1229\n\nWill get to the next patch quicker. Thanks for the patience.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-24T07:18:20.436+0000","updated":"2013-09-24T07:18:20.436+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13776261","id":"13776261","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Hi Siddharth,\nI want to thank you for all your comments and advices.\n\nI have one comment back: \n{quote}\nRename \"mapreduce.shuffle.provider.plugin.classes\" - this is a job specific configuration. mapreduce.job.shuffle.provider.plugin.classes. Also, this should be in MRJobConfig and not MRConfig\n{quote}\n\nIt is true that *shuffle-consumer* is at job level.  However, here we are dealing with *shuffle-provider* which is an aux-service that serves multiple jobs.  Hence, it is not at job level.\nAlso, if possible, I prefer that we'll stay aligned with the names that were chosen in MAPREDUCE-4049 (for hadoop-1), there I was requested to fulfil an opposite comment: ??the value of the constant TT_SHUFFLE_PROVIDER_PLUGIN should not have 'job' as this plugin is not per job but per TT??\n\n\nPlease let me know if I can ignore this particular comment?\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-09-24T12:49:33.282+0000","updated":"2013-09-24T12:49:33.282+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13776378","id":"13776378","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"last comment, we already have shuffle.consumer.plugin in mapred-site.xml, wouldn't it will be appropriate to have the shuffle.provider.plugin next to it.  This is not critical for me, just let me know what you prefer.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-09-24T15:14:39.963+0000","updated":"2013-09-24T15:14:39.963+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13776648","id":"13776648","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"very last comment, \n{quote}\nShould the loading walk over the specified ShuffleProvider list, rather than the ones available on the NodeManager\n{quote}\n\nI found it difficult to do it, because it is easy to get service-class-name from service-name, but the opposite direction is harder.  Do you mind if I'll leave the loading as is, BUT I'll surround it with \n{code}\nif (! shuffleProviders.isEmpty())\n{code}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-09-24T19:18:13.642+0000","updated":"2013-09-24T19:18:13.642+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13776736","id":"13776736","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. It is true that shuffle-consumer is at job level. However, here we are dealing with shuffle-provider which is an aux-service that serves multiple jobs. Hence, it is not at job level.\nAn AM is per job - and the config being used is really a per AM/job configuration. The config is just saying that this particular job may use an alternate shuffle mechanism - but isn't related to what services will be run on the cluster. The NM would have this configured at a cluster level (equivalent to the TT config).\n\nbq. last comment, we already have shuffle.consumer.plugin in mapred-site.xml, wouldn't it will be appropriate to have the shuffle.provider.plugin next to it. This is not critical for me, just let me know what you prefer.\nI prefer leaving it out. Also it'd be good to have a comment which says that this needs to be able to work with the host:port information provided by the AM (i.e. plugins which require custom location / other configuration are not supported)\n\nbq. I'll surround it with ...\nShouldn't an attempt be made to initialize plugins which are specified by the job ? Walking over configured NM plugins ends up potentially skipping plugins which the job may have configured, but are not running in the NodeManager.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-24T20:52:01.867+0000","updated":"2013-09-24T20:52:01.867+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13776793","id":"13776793","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"let me summarize what I understand for making sure we are on the same page:\n1. you still want \"mapreduce.job.shuffle.provider.plugin.classes\" (that I don't like)\n2. I'll remove this propery from mapred-default.xml\n3. I'll add a comment next to serviceData.put saying that this needs to be able to work with the host:port ...\n\nnow, for the rest:\n{quote}\nShouldn't an attempt be made to initialize plugins which are specified by the job ? Walking over configured NM plugins ends up potentially skipping plugins which the job may have configured, but are not running in the NodeManager.\n{quote}\nIn this case, I don't know how to calculate serviceName from serviceClass.  I think we'll need to change the config to contain serviceNames instead of serviceClasses.  Is this what you mean?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-09-24T21:44:14.468+0000","updated":"2013-09-24T21:44:14.468+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13780443","id":"13780443","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq.  1. you still want \"mapreduce.job.shuffle.provider.plugin.classes\" (that I don't like)\nNot sure why you don't like that. This config is being used by the AM, on a per job-basis to configure ShuffleProviders that the job will use.\n\nbq. In this case, I don't know how to calculate serviceName from serviceClass. I think we'll need to change the config to contain serviceNames instead of serviceClasses. Is this what you mean?\nIs it possible to at least track which of the configured services have been found - i.e. the job wants X & Y, but the NM is only running X. The tracking can be independent of how you loop over the services.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-27T21:29:15.962+0000","updated":"2013-09-27T21:29:15.962+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13780902","id":"13780902","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"{quote}\nNot sure why you don't like that.\n{quote}\nThis is only because I prefer to have same config name in hadoop-1 & hadoop-2, as I wrote in aprevious comment.\n\n{quote}\nIs it possible to at least track which of the configured services have been found\n{quote}\nsure.  I understand you want log. right?\nIn this case I will add tracking log, and I will stay with the current loading and I will surround all with _\"if (! shuffleProviders.isEmpty())\"_\n\nIs this okay to go?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-09-28T17:17:23.353+0000","updated":"2013-09-28T17:17:23.353+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13780981","id":"13780981","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. In this case I will add tracking log, and I will stay with the current loading and I will surround all with \"if (! shuffleProviders.isEmpty())\"\nSounds good. The other question is, should this be a log of all missing services, or should the AM just die - saying the required services are not running.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-28T21:53:32.268+0000","updated":"2013-09-28T21:53:32.268+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13780982","id":"13780982","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. In this case I will add tracking log, and I will stay with the current loading and I will surround all with \"if (! shuffleProviders.isEmpty())\"\nSounds good. The other question is, should this be a log of all missing services, or should the AM just die - saying the required services are not running.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-28T21:53:40.332+0000","updated":"2013-09-28T21:53:40.332+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13781364","id":"13781364","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Hi Siddharth,\n\nAll sounds great!  Thank you.\n\nOne very last comment, regarding *mapreduce.job.shuffle.provider.plugin.classes*, can we change it to be *mapreduce.job.shuffle.provider.services* and list the *service names* instead of the *service classes*.  This will prevent confusion in the config name of hadoop-1 vs. hadoop-2 which is good for me.  Also, this will be good for your concern about services that are not running on the specific NM.\n\nIn this case the code will simply be something like this:\n{code}\n// add external shuffle-providers - if any\nCollection<String> shuffleProviders = conf.getStringCollection(\n    MRJobConfig.SHUFFLE_PROVIDER_SERVICES);\n\nfor (final String provider : shuffleProviders) {\n  if (provider.equals(ShuffleHandler.MAPREDUCE_SHUFFLE_SERVICEID)) {\n    continue; // skip built-in shuffle-provider that was already inserted with shuffle secret key\n  }\n  LOG.info(\"Adding \" + provider + \" to serviceData\");\n  // Please note, the shuffleProvider needs to be able to work with the host:port information provided\n  // by the AM (i.e. plugins which require custom location / other configuration are not supported)\n  serviceData.put(provider, ByteBuffer.allocate(0)); // This only serves for INIT_APP notifications\n}\n{code}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-09-29T13:25:38.607+0000","updated":"2013-09-29T13:25:38.607+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13781372","id":"13781372","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"PS, also, as you asked, I will add tracking of the configured services that have not been found - i.e. the job wants X & Y, but the NM is only running X.\nIn this case, I can die the AM (saying the required services are not running).  Unless, you think that a log of all missing services is better.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-09-29T13:34:05.655+0000","updated":"2013-09-29T13:34:05.655+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13782879","id":"13782879","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"I would just like to make sure that you know that I am waiting for your approval for changing *mapreduce.job.shuffle.provider.plugin.classes* to *mapreduce.job.shuffle.provider.services* and for listing the *service names* instead of *service classes*.\nI appreciate your help.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-10-01T12:34:41.204+0000","updated":"2013-10-01T12:34:41.204+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13788976","id":"13788976","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"Using service names sounds good to me. I'm in favour of killing the AM if there's missing services as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-08T06:47:06.696+0000","updated":"2013-10-08T06:47:06.696+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13790266","id":"13790266","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:green}+1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12607543/MAPREDUCE-5329.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4106//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4106//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-09T11:45:12.883+0000","updated":"2013-10-09T11:45:12.883+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13790361","id":"13790361","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:green}+1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12607556/MAPREDUCE-5329.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4107//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4107//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-09T13:55:03.086+0000","updated":"2013-10-09T13:55:03.086+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13790365","id":"13790365","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Hi Siddharth\n\n * The last patch that I just submitted closes all the points that we discussed.\n * Please note, In addition to the trunk, this patch itself should smoothly be applied to all the live svn 2.x branches: branch-2.1-beta, branch-2.2, branch-2\n\nThank you very much for your help,\n  Avner\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-10-09T13:59:19.364+0000","updated":"2013-10-09T13:59:19.364+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13793771","id":"13793771","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"+1. Thanks Avner!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-13T20:11:40.208+0000","updated":"2013-10-13T20:11:40.208+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13793773","id":"13793773","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"Committed to trunk, branch-2 and branch-2.2.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-13T20:20:47.958+0000","updated":"2013-10-13T20:20:47.958+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13793774","id":"13793774","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-trunk-Commit #4593 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/4593/])\nMAPREDUCE-5329. Allow MR applications to use additional AuxServices, which are compatible with the default MapReduce shuffle. Contributed by Avner BenHanoch. (sseth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1531741)\n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TaskAttemptImpl.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TestShuffleProvider.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/MRJobConfig.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-13T20:26:37.632+0000","updated":"2013-10-13T20:26:37.632+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13794041","id":"13794041","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Yarn-trunk #362 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/362/])\nMAPREDUCE-5329. Allow MR applications to use additional AuxServices, which are compatible with the default MapReduce shuffle. Contributed by Avner BenHanoch. (sseth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1531741)\n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TaskAttemptImpl.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TestShuffleProvider.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/MRJobConfig.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-14T10:43:45.584+0000","updated":"2013-10-14T10:43:45.584+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13794103","id":"13794103","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Hdfs-trunk #1552 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1552/])\nMAPREDUCE-5329. Allow MR applications to use additional AuxServices, which are compatible with the default MapReduce shuffle. Contributed by Avner BenHanoch. (sseth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1531741)\n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TaskAttemptImpl.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TestShuffleProvider.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/MRJobConfig.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-14T13:19:16.264+0000","updated":"2013-10-14T13:19:16.264+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13794136","id":"13794136","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk #1578 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1578/])\nMAPREDUCE-5329. Allow MR applications to use additional AuxServices, which are compatible with the default MapReduce shuffle. Contributed by Avner BenHanoch. (sseth: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1531741)\n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TaskAttemptImpl.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TestShuffleProvider.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/MRJobConfig.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-14T14:14:42.523+0000","updated":"2013-10-14T14:14:42.523+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13795015","id":"13795015","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Thanks for all Siddharth,\nIt was a pleasure working with you.  I appreciate all your help and the prompt commits to branch-2 and branch-2.2.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-10-15T08:57:53.340+0000","updated":"2013-10-15T08:57:53.340+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12652668/comment/13795017","id":"13795017","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"body":"Please let me know if you want me to open an issue for updating the [Pluggable Shuffle and Pluggable Sort documentation|http://hadoop.apache.org/docs/current/hadoop-mapreduce-client/hadoop-mapreduce-client-core/PluggableShuffleAndPluggableSort.html] with the new config - *mapreduce.job.shuffle.provider.services*, and if you want me to handle that task (I may need some explanation on the documentation creation).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=avnerb","name":"avnerb","key":"avnerb","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Avner BenHanoch","active":true,"timeZone":"Asia/Jerusalem"},"created":"2013-10-15T09:01:35.238+0000","updated":"2013-10-15T09:01:35.238+0000"}],"maxResults":61,"total":61,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-5329/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1lfzj:"}}