{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12398236","self":"https://issues.apache.org/jira/rest/api/2/issue/12398236","key":"MAPREDUCE-60","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/4","id":"4","description":"The problem is not completely described.","name":"Incomplete"},"customfield_12312322":null,"customfield_12310220":"2014-07-18T05:34:08.090+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jul 18 05:34:08 UTC 2014","customfield_12310420":"148464","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_73721_*|*_1_*:*_2_*:*_192295062086_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-07-18T05:34:08.012+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-60/watchers","watchCount":2,"isWatching":false},"created":"2008-06-13T14:15:12.298+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":"surelogic","customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":3600,"aggregatetimeoriginalestimate":3600,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-07-18T05:34:08.097+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":3600,"description":"The nested class TaskTracker.TaskInProgress needs additional synchronization to work properly with the Java Memory Model.  Presumably this class is accessed by more than one thread, because it already contains synchronization.  However, it needs additional synchronization, especially to protect access to the long fields lastProgressReport and taskTimeOut.  Long fields are not guaranteed to be read/written atomically, so not only do you risk reading stale values, but you risk reading corrupted values.\n\nThe field wasKilled also needs synchronization, as it is polled from within the TaskTracker class.  \n\nI suggest the following improvements to the class\n- Make the fields task and taskStatus final.  They are used this way already.  Making them final clarifies there behavior in a current environment.\n- Add the synchronized modifier to the methods getLastProgressReport() and getTaskTimeout().\n- Make the field wasKilled private and add a new public synchronized wasKilled() getter method.  Replace the use of the field with this method in TaskTracker.\n- Add a comment to localizeTask() indicating that the caller must be synchronized on this.\n","customfield_10010":null,"timetracking":{"originalEstimate":"1h","remainingEstimate":"1h","originalEstimateSeconds":3600,"remainingEstimateSeconds":3600},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12384068","id":"12384068","filename":"HADOOP-3553.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-16T16:04:49.285+0000","size":3535,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12384068/HADOOP-3553.patch"}],"aggregatetimeestimate":3600,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"107913","customfield_12312823":null,"summary":"Nested class TaskTracker.TaskInProgress needs additional synchronization","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":3600,"percent":0},"customfield_12311024":null,"environment":"All Java platforms","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":3600,"percent":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398236/comment/12604898","id":"12604898","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"body":"Patch that applies the changes that I propose to the 0.17.0 source code.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-13T14:31:39.415+0000","updated":"2008-06-13T14:31:39.415+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398236/comment/12605330","id":"12605330","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"body":"Per Nigel Daley's request, I should point out that this bug was discovered using Sierra from SureLogic to view FindBug results. The bug was correct with the assistance of JSure from SureLogic. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-16T16:03:53.303+0000","updated":"2008-06-16T16:03:53.303+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398236/comment/12605331","id":"12605331","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"body":"New patch file, correctly generated using SVN against the SVN trunk\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aarongreenhouse","name":"aarongreenhouse","key":"aarongreenhouse","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aaron Greenhouse","active":true,"timeZone":"Etc/UTC"},"created":"2008-06-16T16:04:49.312+0000","updated":"2008-06-16T16:04:49.312+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12398236/comment/14066074","id":"14066074","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"Closing this as stale.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2014-07-18T05:34:08.090+0000","updated":"2014-07-18T05:34:08.090+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-60/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0itqv:"}}