{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13038952","self":"https://issues.apache.org/jira/rest/api/2/issue/13038952","key":"MAPREDUCE-6839","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12334217","id":"12334217","description":"2.9.0 release","name":"2.9.0","archived":false,"released":true,"releaseDate":"2017-11-17"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12339181","id":"12339181","name":"3.0.0-alpha4","archived":false,"released":true,"releaseDate":"2017-07-07"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2017-01-30T18:45:27.080+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Apr 24 20:46:48 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_159548_*|*_3_*:*_1_*:*_58104_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_3123747941","customfield_12312321":null,"resolutiondate":"2017-03-07T21:43:13.680+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-6839/watchers","watchCount":5,"isWatching":false},"created":"2017-01-30T17:57:08.145+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12496149","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12496149","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"13048105","key":"MAPREDUCE-6856","self":"https://issues.apache.org/jira/rest/api/2/issue/13048105","fields":{"summary":"TestRecovery.testSpeculative fails if testCrashed fails","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pairg","name":"pairg","key":"pairg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pairg&avatarId=29544","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pairg&avatarId=29544","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pairg&avatarId=29544","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pairg&avatarId=29544"},"displayName":"Gergő Pásztor","active":true,"timeZone":"Europe/Budapest"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-04-24T20:46:48.909+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312904","id":"12312904","name":"test"}],"timeoriginalestimate":null,"description":"TestRecovery#testCrashed is a flaky test.\n\nError Message: \nReduce Task state not correct expected:<RUNNING> but was:<SCHEDULED>\n\nStack Trace:\njava.lang.AssertionError: Reduce Task state not correct expected:<RUNNING> but was:<SCHEDULED> \n        at org.junit.Assert.fail(Assert.java:88) \n        at org.junit.Assert.failNotEquals(Assert.java:743) \n        at org.junit.Assert.assertEquals(Assert.java:118) \n        at org.apache.hadoop.mapreduce.v2.app.TestRecovery.testCrashed(TestRecovery.java:164)","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12850018","id":"12850018","filename":"MAPREDUCE-6839_v1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pairg","name":"pairg","key":"pairg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pairg&avatarId=29544","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pairg&avatarId=29544","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pairg&avatarId=29544","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pairg&avatarId=29544"},"displayName":"Gergő Pásztor","active":true,"timeZone":"Europe/Budapest"},"created":"2017-01-30T18:16:24.700+0000","size":1414,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12850018/MAPREDUCE-6839_v1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12850198","id":"12850198","filename":"MAPREDUCE-6839_v2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pairg","name":"pairg","key":"pairg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pairg&avatarId=29544","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pairg&avatarId=29544","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pairg&avatarId=29544","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pairg&avatarId=29544"},"displayName":"Gergő Pásztor","active":true,"timeZone":"Europe/Budapest"},"created":"2017-01-31T13:46:52.452+0000","size":1932,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12850198/MAPREDUCE-6839_v2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12851423","id":"12851423","filename":"MAPREDUCE-6839_v3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pairg","name":"pairg","key":"pairg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pairg&avatarId=29544","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pairg&avatarId=29544","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pairg&avatarId=29544","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pairg&avatarId=29544"},"displayName":"Gergő Pásztor","active":true,"timeZone":"Europe/Budapest"},"created":"2017-02-07T17:25:21.177+0000","size":1980,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12851423/MAPREDUCE-6839_v3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12856605","id":"12856605","filename":"MAPREDUCE-6839_v4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pairg","name":"pairg","key":"pairg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pairg&avatarId=29544","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pairg&avatarId=29544","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pairg&avatarId=29544","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pairg&avatarId=29544"},"displayName":"Gergő Pásztor","active":true,"timeZone":"Europe/Budapest"},"created":"2017-03-07T14:13:01.476+0000","size":2304,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12856605/MAPREDUCE-6839_v4.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"TestRecovery.testCrashed failed","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pairg","name":"pairg","key":"pairg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pairg&avatarId=29544","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pairg&avatarId=29544","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pairg&avatarId=29544","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pairg&avatarId=29544"},"displayName":"Gergő Pásztor","active":true,"timeZone":"Europe/Budapest"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pairg","name":"pairg","key":"pairg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pairg&avatarId=29544","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pairg&avatarId=29544","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pairg&avatarId=29544","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pairg&avatarId=29544"},"displayName":"Gergő Pásztor","active":true,"timeZone":"Europe/Budapest"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15845602","id":"15845602","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pairg","name":"pairg","key":"pairg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pairg&avatarId=29544","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pairg&avatarId=29544","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pairg&avatarId=29544","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pairg&avatarId=29544"},"displayName":"Gergő Pásztor","active":true,"timeZone":"Europe/Budapest"},"body":"We are checking that the reduce task is in TaskState.RUNNING state or not. But sometimes it can't reach the RUNNING state before the check. We need to wait for the reducer's first TaskAttempt to be in the RUNNING state first.\n\nTask:\nSCHEDULED --- T_ATTEMPT_LUNCHED ---> RUNNING\n\nTaskAttempt:\nASSIGNED --- TA_CONTAINER_LAUNCHED ---> RUNNING\n\nThe TA_CONTAINER_LAUNCHED event triggering the T_ATTEMPT_LUNCHED event. If the reducer first task attempt is not launched yet we will have an error.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pairg","name":"pairg","key":"pairg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pairg&avatarId=29544","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pairg&avatarId=29544","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pairg&avatarId=29544","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pairg&avatarId=29544"},"displayName":"Gergő Pásztor","active":true,"timeZone":"Europe/Budapest"},"created":"2017-01-30T18:11:41.211+0000","updated":"2017-01-30T18:12:01.877+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15845660","id":"15845660","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 0m 19s {color} | {color:blue} Docker mode activated. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green} 0m 0s {color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green} 0m 0s {color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 17m 58s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 31s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 22s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 32s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 18s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 46s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 19s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 0m 28s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 28s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 28s {color} | {color:green} the patch passed {color} |\n| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red} 0m 17s {color} | {color:red} hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app: The patch generated 2 new + 118 unchanged - 1 fixed = 120 total (was 119) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 29s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 14s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green} 0m 0s {color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 54s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 16s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} unit {color} | {color:green} 10m 25s {color} | {color:green} hadoop-mapreduce-client-app in the patch passed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green} 0m 27s {color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 35m 48s {color} | {color:black} {color} |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:a9ad5d6 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12850014/MAPREDUCE-6839_v1.patch |\n| JIRA Issue | MAPREDUCE-6839 |\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |\n| uname | Linux f0113d3d3c8d 3.13.0-106-generic #153-Ubuntu SMP Tue Dec 6 15:44:32 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / 312b36d |\n| Default Java | 1.8.0_121 |\n| findbugs | v3.0.0 |\n| checkstyle | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6881/artifact/patchprocess/diff-checkstyle-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-app.txt |\n|  Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6881/testReport/ |\n| modules | C: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app U: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app |\n| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6881/console |\n| Powered by | Apache Yetus 0.3.0   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-01-30T18:45:27.080+0000","updated":"2017-01-30T18:45:27.080+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15845663","id":"15845663","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 0m 13s {color} | {color:blue} Docker mode activated. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green} 0m 0s {color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green} 0m 0s {color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 12m 38s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 22s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 17s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 24s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 14s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 36s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 15s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 0m 21s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 20s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 20s {color} | {color:green} the patch passed {color} |\n| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red} 0m 13s {color} | {color:red} hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app: The patch generated 2 new + 118 unchanged - 1 fixed = 120 total (was 119) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 22s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 11s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green} 0m 0s {color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 40s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 12s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} unit {color} | {color:green} 8m 59s {color} | {color:green} hadoop-mapreduce-client-app in the patch passed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green} 0m 16s {color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 27m 10s {color} | {color:black} {color} |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:a9ad5d6 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12850018/MAPREDUCE-6839_v1.patch |\n| JIRA Issue | MAPREDUCE-6839 |\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |\n| uname | Linux 353207041e99 3.13.0-106-generic #153-Ubuntu SMP Tue Dec 6 15:44:32 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / 312b36d |\n| Default Java | 1.8.0_121 |\n| findbugs | v3.0.0 |\n| checkstyle | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6882/artifact/patchprocess/diff-checkstyle-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-app.txt |\n|  Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6882/testReport/ |\n| modules | C: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app U: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app |\n| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6882/console |\n| Powered by | Apache Yetus 0.3.0   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-01-30T18:45:53.795+0000","updated":"2017-01-30T18:45:53.795+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15846145","id":"15846145","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haibochen","name":"haibochen","key":"haibochen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haibo Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~pairg] for reporting this and uploading a patch. I think the root cause is event-handler thread cannot catch up. The patch does help by adding more waiting. Notice the comment above \"Assert.assertEquals(\"Reduce Task state not correct\", \" is misleading, can you update it as well as the checkstyle issues in a new patch? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haibochen","name":"haibochen","key":"haibochen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haibo Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-01-30T23:34:40.442+0000","updated":"2017-01-30T23:34:40.442+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15846886","id":"15846886","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 0m 13s {color} | {color:blue} Docker mode activated. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green} 0m 0s {color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green} 0m 0s {color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 13m 35s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 24s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 17s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 26s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 16s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 35s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 16s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 0m 21s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 22s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 22s {color} | {color:green} the patch passed {color} |\n| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red} 0m 14s {color} | {color:red} hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app: The patch generated 1 new + 116 unchanged - 3 fixed = 117 total (was 119) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 24s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 11s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green} 0m 0s {color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 43s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 14s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} unit {color} | {color:green} 9m 10s {color} | {color:green} hadoop-mapreduce-client-app in the patch passed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green} 0m 16s {color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 28m 37s {color} | {color:black} {color} |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:a9ad5d6 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12850198/MAPREDUCE-6839_v2.patch |\n| JIRA Issue | MAPREDUCE-6839 |\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |\n| uname | Linux 7d7027b71ed5 3.13.0-106-generic #153-Ubuntu SMP Tue Dec 6 15:44:32 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / 4c6bae5 |\n| Default Java | 1.8.0_121 |\n| findbugs | v3.0.0 |\n| checkstyle | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6883/artifact/patchprocess/diff-checkstyle-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-app.txt |\n|  Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6883/testReport/ |\n| modules | C: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app U: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app |\n| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6883/console |\n| Powered by | Apache Yetus 0.3.0   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-01-31T14:17:21.324+0000","updated":"2017-01-31T14:17:21.324+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15846893","id":"15846893","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pairg","name":"pairg","key":"pairg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pairg&avatarId=29544","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pairg&avatarId=29544","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pairg&avatarId=29544","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pairg&avatarId=29544"},"displayName":"Gergő Pásztor","active":true,"timeZone":"Europe/Budapest"},"body":"I fixed another two \"too long line\" style error. I don't think that we should bother with the remaining \"@Test:3: Method length is 199 lines (max allowed is 150).\" style error, but let me know if I'm wrong.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pairg","name":"pairg","key":"pairg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pairg&avatarId=29544","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pairg&avatarId=29544","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pairg&avatarId=29544","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pairg&avatarId=29544"},"displayName":"Gergő Pásztor","active":true,"timeZone":"Europe/Budapest"},"created":"2017-01-31T14:27:18.247+0000","updated":"2017-01-31T14:27:18.247+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15854907","id":"15854907","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haibochen","name":"haibochen","key":"haibochen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haibo Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"Just one knit: I meant  the comments before you last line of change, that is, \"// reduces must be in NEW state\". We should probably say \"// reduce attempt must be in RUNNING state\"","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haibochen","name":"haibochen","key":"haibochen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haibo Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-06T23:01:24.391+0000","updated":"2017-02-06T23:01:24.391+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15856361","id":"15856361","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pairg","name":"pairg","key":"pairg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pairg&avatarId=29544","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pairg&avatarId=29544","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pairg&avatarId=29544","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pairg&avatarId=29544"},"displayName":"Gergő Pásztor","active":true,"timeZone":"Europe/Budapest"},"body":"[~haibochen] Fixed","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pairg","name":"pairg","key":"pairg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pairg&avatarId=29544","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pairg&avatarId=29544","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pairg&avatarId=29544","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pairg&avatarId=29544"},"displayName":"Gergő Pásztor","active":true,"timeZone":"Europe/Budapest"},"created":"2017-02-07T17:25:42.801+0000","updated":"2017-02-07T17:25:42.801+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15856594","id":"15856594","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 0m 45s {color} | {color:blue} Docker mode activated. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green} 0m 0s {color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green} 0m 0s {color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 17m 50s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 23s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 18s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 24s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 15s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 34s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 16s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 0m 21s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 19s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 19s {color} | {color:green} the patch passed {color} |\n| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red} 0m 14s {color} | {color:red} hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app: The patch generated 1 new + 116 unchanged - 3 fixed = 117 total (was 119) {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 21s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 11s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green} 0m 0s {color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 40s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 12s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} unit {color} | {color:green} 9m 30s {color} | {color:green} hadoop-mapreduce-client-app in the patch passed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green} 0m 18s {color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 33m 35s {color} | {color:black} {color} |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:a9ad5d6 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12851423/MAPREDUCE-6839_v3.patch |\n| JIRA Issue | MAPREDUCE-6839 |\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |\n| uname | Linux e16e7ad363e5 3.13.0-106-generic #153-Ubuntu SMP Tue Dec 6 15:44:32 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / 69b2363 |\n| Default Java | 1.8.0_121 |\n| findbugs | v3.0.0 |\n| checkstyle | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6896/artifact/patchprocess/diff-checkstyle-hadoop-mapreduce-project_hadoop-mapreduce-client_hadoop-mapreduce-client-app.txt |\n|  Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6896/testReport/ |\n| modules | C: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app U: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app |\n| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6896/console |\n| Powered by | Apache Yetus 0.3.0   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-02-07T19:15:09.257+0000","updated":"2017-02-07T19:15:09.257+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15861102","id":"15861102","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pbacsko","name":"pbacsko","key":"pbacsko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Bacsko","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for the fix Gergo.\n\nI noticed that {{testSpeculative}} in this test class fails every time {{testCrashed}} fails. I think the problem is that both test use the same temporary staging directory:\n\n{code}\n2017-02-06 17:58:06,334 INFO  [eventHandlingThread] jobhistory.JobHistoryEventHandler (JobHistoryEventHandler.java:setupEventWriter(469)) - Event Writer setup for JobId: job_0_0000, File: file:/data/jenkins/workspace/CDH5.7.x-Hadoop-MR-2.6.0/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/target/org.apache.hadoop.mapreduce.v2.app.TestRecovery/jenkins/.staging/job_0_0000/job_0_0000_1.jhist\n{code}\n\nThis folder is not specific to a testcase. So certain background thread(s) might do something which affects later tests if MRApp is not stopped explicitly. I think it would be worthwhile to re-structure it slightly, something like:\n\n{code}\nMRApp app;\ntry {\n  app = new MRAppWithHistory(2, 1, false, this.getClass().getName(), true, ++runCount);\n  ..\n} finally {\n   app.stop();\n}\n{code}\n\nSo we always stop the MRApp regardless of failures. Thoughts?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pbacsko","name":"pbacsko","key":"pbacsko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Bacsko","active":true,"timeZone":"Etc/UTC"},"created":"2017-02-10T10:57:45.798+0000","updated":"2017-02-10T10:57:45.798+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15888649","id":"15888649","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haibochen","name":"haibochen","key":"haibochen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haibo Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~pbacsko] for the addiontial information. Can you be more specific about what will be affected if the directory is not cleaned properly or how? Off the top of my head, I cannot think of why staging directory problem could delay task transition from Scheduled to Running state. If the staging directory is not directly causing testCrashed to fail, I'd like we include the app.stop fix in a separate patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haibochen","name":"haibochen","key":"haibochen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haibo Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-28T18:48:26.816+0000","updated":"2017-02-28T18:48:26.816+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15899501","id":"15899501","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pairg","name":"pairg","key":"pairg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pairg&avatarId=29544","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pairg&avatarId=29544","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pairg&avatarId=29544","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pairg&avatarId=29544"},"displayName":"Gergő Pásztor","active":true,"timeZone":"Europe/Budapest"},"body":"I uploaded a new patch. It resolves 3 problems:\n- TestRecovery.testCrashed fail\n- TestRecovery.testSpeculative fail, because of a conflict with the previous TestRecovery.testCrashed\n- TestRecovery.testRecoveryWithoutShuffleSecret fail sometimes, because of the same problem as the testCrashed has\n\nThe patched code ran through 3 days without issues.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pairg","name":"pairg","key":"pairg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pairg&avatarId=29544","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pairg&avatarId=29544","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pairg&avatarId=29544","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pairg&avatarId=29544"},"displayName":"Gergő Pásztor","active":true,"timeZone":"Europe/Budapest"},"created":"2017-03-07T14:17:15.966+0000","updated":"2017-03-07T14:18:48.773+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15899504","id":"15899504","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pbacsko","name":"pbacsko","key":"pbacsko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Bacsko","active":true,"timeZone":"Etc/UTC"},"body":"[~haibochen] I don't know exactly, but somehow the unstopped MRAppMaster either deletes the {{.jhist}} file or doesn't make it possible for the next appmaster to create it. It's not obvious what's happening, but {{testSpeculative}} never fails on its own. If the appmaster is properly stopped, the failure doesn't cascade.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pbacsko","name":"pbacsko","key":"pbacsko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Bacsko","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-07T14:18:37.767+0000","updated":"2017-03-07T14:18:37.767+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15899505","id":"15899505","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pbacsko","name":"pbacsko","key":"pbacsko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Bacsko","active":true,"timeZone":"Etc/UTC"},"body":"+1 (non-binding) LGTM","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pbacsko","name":"pbacsko","key":"pbacsko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Bacsko","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-07T14:19:01.054+0000","updated":"2017-03-07T14:19:01.054+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15899547","id":"15899547","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (/) *{color:green}+1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 0m 20s {color} | {color:blue} Docker mode activated. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green} 0m 0s {color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green} 0m 0s {color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 13m 1s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 23s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 16s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 24s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 14s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 35s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 16s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 0m 21s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 20s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 20s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 14s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 0m 23s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 11s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green} 0m 0s {color} | {color:green} The patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 0m 41s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 0m 13s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} unit {color} | {color:green} 9m 6s {color} | {color:green} hadoop-mapreduce-client-app in the patch passed. {color} |\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green} 0m 16s {color} | {color:green} The patch does not generate ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 27m 56s {color} | {color:black} {color} |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:a9ad5d6 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12856605/MAPREDUCE-6839_v4.patch |\n| JIRA Issue | MAPREDUCE-6839 |\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |\n| uname | Linux 2fae10ddb697 3.13.0-106-generic #153-Ubuntu SMP Tue Dec 6 15:44:32 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |\n| git revision | trunk / f597f4c |\n| Default Java | 1.8.0_121 |\n| findbugs | v3.0.0 |\n|  Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6913/testReport/ |\n| modules | C: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app U: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app |\n| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6913/console |\n| Powered by | Apache Yetus 0.3.0   http://yetus.apache.org |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-07T14:46:58.964+0000","updated":"2017-03-07T14:46:58.964+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15900198","id":"15900198","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkanter","name":"rkanter","key":"rkanter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Kanter","active":true,"timeZone":"America/Los_Angeles"},"body":"+1\n\nwill commit shortly","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkanter","name":"rkanter","key":"rkanter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Kanter","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-03-07T21:23:02.355+0000","updated":"2017-03-07T21:23:02.355+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15900230","id":"15900230","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkanter","name":"rkanter","key":"rkanter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Kanter","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~pairg] and other for reviews.  Committed to trunk and branch-2!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkanter","name":"rkanter","key":"rkanter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Kanter","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-03-07T21:43:13.718+0000","updated":"2017-03-07T21:43:13.718+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/15900287","id":"15900287","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #11367 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/11367/])\nMAPREDUCE-6839. TestRecovery.testCrashed failed (pairg via rkanter) (rkanter: rev 38d75dfd3a643f8a1acd52e025a466d65065b60e)\n* (edit) hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/TestRecovery.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-07T22:21:04.984+0000","updated":"2017-03-07T22:21:04.984+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13038952/comment/16450588","id":"16450588","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #14057 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/14057/])\nMAPREDUCE-6839. TestRecovery.testCrashed failed (pairg via rkanter) (aengineer: rev bb06ecf1ad05c1b953b44a35e846db7ee052808a)\n* (edit) hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/TestRecovery.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2018-04-24T20:46:48.909+0000","updated":"2018-04-24T20:46:48.909+0000"}],"maxResults":19,"total":19,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-6839/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i39dmn:"}}