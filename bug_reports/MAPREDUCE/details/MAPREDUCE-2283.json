{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12496854","self":"https://issues.apache.org/jira/rest/api/2/issue/12496854","key":"MAPREDUCE-2283","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314184","id":"12314184","description":"","name":"0.22.0","archived":false,"released":true,"releaseDate":"2011-12-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-01-26T18:56:57.208+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Apr 07 15:40:40 UTC 2011","customfield_12310420":"150111","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_94359946_*|*_5_*:*_2_*:*_11589721_*|*_4_*:*_1_*:*_3244391","customfield_12312321":null,"resolutiondate":"2011-01-28T00:24:42.241+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-2283/watchers","watchCount":6,"isWatching":false},"created":"2011-01-26T18:04:48.183+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315570","id":"12315570","description":"","name":"0.23.0","archived":false,"released":true,"releaseDate":"2011-11-11"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvadali","name":"rvadali","key":"rvadali","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramkumar Vadali","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-12-12T06:19:34.380+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313416","id":"12313416","name":"contrib/raid","description":"HDFS Raid Implementation"}],"timeoriginalestimate":null,"description":"TestBlockFixer (a raid contrib test) is hanging the precommit testing on Hudson","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12469590","id":"12469590","filename":"MAPREDUCE-2283.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvadali","name":"rvadali","key":"rvadali","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramkumar Vadali","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-01-27T20:01:52.450+0000","size":671,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12469590/MAPREDUCE-2283.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"52744","customfield_12312823":null,"summary":"TestBlockFixer hangs initializing MiniMRCluster","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/12987126","id":"12987126","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"body":"2 thread dumps of the process show this trace:\n {code}\n\n     [exec]     [junit] \"main\" prio=10 tid=0x0933ac00 nid=0x6aaf waiting on condition [0xf7d50000..0xf7d521e8]\n     [exec]     [junit]    java.lang.Thread.State: TIMED_WAITING (sleeping)\n     [exec]     [junit] \tat java.lang.Thread.sleep(Native Method)\n     [exec]     [junit] \tat org.apache.hadoop.ipc.Client$Connection.handleConnectionFailure(Client.java:611)\n     [exec]     [junit] \tat org.apache.hadoop.ipc.Client$Connection.setupConnection(Client.java:429)\n     [exec]     [junit] \t- locked <0xf13fdb20> (a org.apache.hadoop.ipc.Client$Connection)\n     [exec]     [junit] \tat org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:504)\n     [exec]     [junit] \t- locked <0xf13fdb20> (a org.apache.hadoop.ipc.Client$Connection)\n     [exec]     [junit] \tat org.apache.hadoop.ipc.Client$Connection.access$2000(Client.java:206)\n     [exec]     [junit] \tat org.apache.hadoop.ipc.Client.getConnection(Client.java:1164)\n     [exec]     [junit] \tat org.apache.hadoop.ipc.Client.call(Client.java:1008)\n     [exec]     [junit] \tat org.apache.hadoop.ipc.WritableRpcEngine$Invoker.invoke(WritableRpcEngine.java:198)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.$Proxy9.getProtocolVersion(Unknown Source)\n     [exec]     [junit] \tat org.apache.hadoop.ipc.WritableRpcEngine.getProxy(WritableRpcEngine.java:235)\n     [exec]     [junit] \tat org.apache.hadoop.ipc.RPC.getProxy(RPC.java:275)\n     [exec]     [junit] \tat org.apache.hadoop.ipc.RPC.waitForProxy(RPC.java:206)\n     [exec]     [junit] \tat org.apache.hadoop.ipc.RPC.waitForProxy(RPC.java:185)\n     [exec]     [junit] \tat org.apache.hadoop.ipc.RPC.waitForProxy(RPC.java:169)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.TaskTracker$2.run(TaskTracker.java:699)\n     [exec]     [junit] \tat java.security.AccessController.doPrivileged(Native Method)\n     [exec]     [junit] \tat javax.security.auth.Subject.doAs(Subject.java:396)\n     [exec]     [junit] \tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1142)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.TaskTracker.initialize(TaskTracker.java:695)\n     [exec]     [junit] \t- locked <0xb75cd778> (a org.apache.hadoop.mapred.TaskTracker)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.TaskTracker.<init>(TaskTracker.java:1391)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.MiniMRCluster$TaskTrackerRunner.createTaskTracker(MiniMRCluster.java:219)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.MiniMRCluster$TaskTrackerRunner$1.run(MiniMRCluster.java:203)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.MiniMRCluster$TaskTrackerRunner$1.run(MiniMRCluster.java:201)\n     [exec]     [junit] \tat java.security.AccessController.doPrivileged(Native Method)\n     [exec]     [junit] \tat javax.security.auth.Subject.doAs(Subject.java:396)\n     [exec]     [junit] \tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1142)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.MiniMRCluster$TaskTrackerRunner.<init>(MiniMRCluster.java:201)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.MiniMRCluster.startTaskTracker(MiniMRCluster.java:716)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.MiniMRCluster.<init>(MiniMRCluster.java:541)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.MiniMRCluster.<init>(MiniMRCluster.java:482)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.MiniMRCluster.<init>(MiniMRCluster.java:474)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.MiniMRCluster.<init>(MiniMRCluster.java:466)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.MiniMRCluster.<init>(MiniMRCluster.java:458)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.MiniMRCluster.<init>(MiniMRCluster.java:448)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.MiniMRCluster.<init>(MiniMRCluster.java:438)\n     [exec]     [junit] \tat org.apache.hadoop.mapred.MiniMRCluster.<init>(MiniMRCluster.java:429)\n     [exec]     [junit] \tat org.apache.hadoop.raid.TestBlockFixer.mySetup(TestBlockFixer.java:821)\n     [exec]     [junit] \tat org.apache.hadoop.raid.TestBlockFixer.implBlockFix(TestBlockFixer.java:155)\n     [exec]     [junit] \tat org.apache.hadoop.raid.TestBlockFixer.testBlockFixDist(TestBlockFixer.java:139)\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-26T18:05:00.822+0000","updated":"2011-01-26T18:05:00.822+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/12987163","id":"12987163","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"You sure this is actually hanging and not just *really* slow? I ran testBlockFixDist here and it passed, but took 115 seconds. Given there are 14 test cases in TestBlockFixer, maybe the test runs for 25-30 minutes?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-01-26T18:56:57.208+0000","updated":"2011-01-26T18:56:57.208+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/12987170","id":"12987170","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"body":"Todd, the test has been hung there for over 6 hours.\n\nFWIW, here's the output of top:\n{code}\ntop - 19:11:36 up 384 days, 10:55,  2 users,  load average: 0.00, 0.00, 0.00\nTasks: 166 total,   1 running, 165 sleeping,   0 stopped,   0 zombie\nCpu(s):  0.0%us,  0.0%sy,  0.0%ni,100.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st\nMem:  16257588k total,  9534092k used,  6723496k free,  3038084k buffers\nSwap: 24000984k total,        0k used, 24000984k free,  5331700k cached\n\n  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                                        \n27308 hudson    18  -2 1261m 222m  23m S    0  1.4   0:57.10 java                                                                                                                            \n28926 root      18  -2 19116 1368  992 R    0  0.0   0:00.03 top                                                                                                                             \n    1 root      20   0  4028  732  592 S    0  0.0   0:18.61 init                                                                                                                            \n    2 root      15  -5     0    0    0 S    0  0.0   0:00.00 kthreadd                                                                                                                        \n    3 root      RT  -5     0    0    0 S    0  0.0   0:00.96 migration/0                                                                                                                     \n...\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-26T19:11:57.552+0000","updated":"2011-01-26T19:11:57.552+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/12987303","id":"12987303","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvadali","name":"rvadali","key":"rvadali","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramkumar Vadali","active":true,"timeZone":"America/Los_Angeles"},"body":"I think this has something to do with the MR ports change. Is it possible that hudson does not do ant clean? This test has not changed recently, but MiniMRCluster has","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvadali","name":"rvadali","key":"rvadali","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramkumar Vadali","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-01-26T23:52:45.068+0000","updated":"2011-01-26T23:52:45.068+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/12987365","id":"12987365","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"body":"Looks like it is really hanging. \nhttps://hudson.apache.org/hudson/job/PreCommit-MAPREDUCE-Build/18/console\nIt's been 8.5 hours since Build/18 started, no progress. Just hanging after\n{code}\n[exec]     [junit] Running org.apache.hadoop.raid.TestBlockFixer\n{code}\nWhy it is not getting timed out by Hadson? Should we turn it off?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-01-27T03:49:37.237+0000","updated":"2011-01-27T03:49:37.237+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/12987399","id":"12987399","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvadali","name":"rvadali","key":"rvadali","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramkumar Vadali","active":true,"timeZone":"America/Los_Angeles"},"body":"Please turn it off while I figure out whats happening","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvadali","name":"rvadali","key":"rvadali","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramkumar Vadali","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-01-27T06:25:59.566+0000","updated":"2011-01-27T06:25:59.566+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/12987635","id":"12987635","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"body":"Ramkumar, any update on this?  AFAICT, there is no way to turn it off in the precommit testing without committing a change to the script and build.xml of the project.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nidaley","name":"nidaley","key":"nidaley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nigel Daley","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-27T16:33:08.854+0000","updated":"2011-01-27T16:33:08.854+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/12987669","id":"12987669","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvadali","name":"rvadali","key":"rvadali","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramkumar Vadali","active":true,"timeZone":"America/Los_Angeles"},"body":"Update:\n\nIf I run ant clean from the top-level and run `ant test -Dtestcase=TestBlockFixer`, it runs fine.\nBut if I run ant test-patch from the top level and run it again, it gets stuck. I ran with test.output=yes to see what was going on, and found this:\n\n{code}\n    [junit] 11/01/27 09:21:24 INFO mapred.TaskTracker: TaskTracker up at: localhost.localdomain/127.0.0.1:50197\n    [junit] 11/01/27 09:21:24 INFO mapred.TaskTracker: Starting tracker tracker_host0.foo.com:localhost.localdomain/127.0.0.1:50197\n    [junit] 11/01/27 09:21:25 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:0. Already tried 0 time(s).\n    [junit] 11/01/27 09:21:26 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:0. Already tried 1 time(s).\n    [junit] 11/01/27 09:21:27 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:0. Already tried 2 time(s).\n    [junit] 11/01/27 09:21:28 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:0. Already tried 3 time(s).\n    [junit] 11/01/27 09:21:29 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:0. Already tried 4 time(s).\n    [junit] 11/01/27 09:21:30 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:0. Already tried 5 time(s).\n    [junit] 11/01/27 09:21:31 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:0. Already tried 6 time(s).\n    [junit] 11/01/27 09:21:32 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:0. Already tried 7 time(s).\n    [junit] 11/01/27 09:21:33 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:0. Already tried 8 time(s).\n    [junit] 11/01/27 09:21:34 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:0. Already tried 9 time(s).\n    [junit] 11/01/27 09:21:34 INFO ipc.RPC: Server at localhost/127.0.0.1:0 not available yet, Zzzzz...\n{code}\n\nI think hudson does something like this, and ant test-patch is somehow pulling in a jar that prevents MiniMRCluster from starting. To check, I wrote a simple test that only tries to start a MiniMRCluster:\n\n{code}\npublic class TestStuckMiniMR extends TestCase {\n  public static final int NUM_DATANODES = 3;\n  Configuration conf;\n  String namenode = null;\n  MiniDFSCluster dfs = null;\n  MiniMRCluster mr = null;\n  String jobTrackerName = null;\n  FileSystem fileSys = null;\n  protected void setUp() throws Exception {\n\n    conf = new Configuration();\n\n    dfs = new MiniDFSCluster(conf, NUM_DATANODES, true, null);\n    dfs.waitActive();\n    fileSys = dfs.getFileSystem();\n    namenode = fileSys.getUri().toString();\n\n    FileSystem.setDefaultUri(conf, namenode);\n    mr = new MiniMRCluster(4, namenode, 3);\n    jobTrackerName = \"localhost:\" + mr.getJobTrackerPort();\n  }\n\n  protected void tearDown() {\n    dfs.shutdown();\n    mr.shutdown();\n  }\n\n  public void testStuck() throws Exception {\n    System.out.println(\"Done\");\n  }\n}\n{code}\nThis also gets stuck in setup. So I think the problem is outside RAID. Infact, just after I tried this, I tried running a test under contrib/streaming. That also gets stuck the same way.\n\n{code}\nant test -Dtestcase=TestFileArgs -Dtest.output=yes\n{code}\n\nThe output:\n\n{code}\n    [junit] 11/01/27 09:42:10 INFO mapred.TaskTracker: TaskTracker up at: localhost.localdomain/127.0.0.1:59339\n    [junit] 11/01/27 09:42:10 INFO mapred.TaskTracker: Starting tracker tracker_host0.foo.com:localhost.localdomain/127.0.0.1:59339\n    [junit] 11/01/27 09:42:11 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:0. Already tried 0 time(s).\n    [junit] 11/01/27 09:42:12 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:0. Already tried 1 time(s).\n    [junit] 11/01/27 09:42:13 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:0. Already tried 2 time(s).\n{code}\n\nCan someone try killing TestBlockFixer and run TestFileArgs on the machine thats running hudson?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvadali","name":"rvadali","key":"rvadali","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramkumar Vadali","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-01-27T17:44:59.239+0000","updated":"2011-01-27T17:44:59.239+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/12987724","id":"12987724","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvadali","name":"rvadali","key":"rvadali","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramkumar Vadali","active":true,"timeZone":"America/Los_Angeles"},"body":"This enables a timeout for RAID tests. This does not fix the MiniMRCluster problem though.\n{code}\ntest-junit:\n    [junit] WARNING: multiple versions of ant detected in path for junit\n    [junit]          jar:file:/home/rvadali/local/external/ant/lib/ant.jar!/org/apache/tools/ant/Project.class\n    [junit]      and jar:file:/home/rvadali/.ivy2/cache/ant/ant/jars/ant-1.6.5.jar!/org/apache/tools/ant/Project.class\n    [junit] Running org.apache.hadoop.raid.TestBlockFixer\n    [junit] Running org.apache.hadoop.raid.TestBlockFixer\n    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec\n    [junit] Test org.apache.hadoop.raid.TestBlockFixer FAILED (timeout)\n\nBUILD FAILED\n/data/users/rvadali/apache/hadoop-mapred-trunk/build.xml:821: The following error occurred while executing this line:\n/data/users/rvadali/apache/hadoop-mapred-trunk/build.xml:805: The following error occurred while executing this line:\n/data/users/rvadali/apache/hadoop-mapred-trunk/src/contrib/build.xml:60: The following error occurred while executing this line:\n/data/users/rvadali/apache/hadoop-mapred-trunk/src/contrib/raid/build.xml:60: Tests failed!\n\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvadali","name":"rvadali","key":"rvadali","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramkumar Vadali","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-01-27T20:01:52.502+0000","updated":"2011-01-27T20:01:52.502+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/12987726","id":"12987726","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schen","name":"schen","key":"schen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Scott Chen","active":true,"timeZone":"Etc/UTC"},"body":"+1 OK. At least, this will not hang and block hudson.\nBut someone should fix the problem caused by MiniMRCluster.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schen","name":"schen","key":"schen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Scott Chen","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-27T20:05:31.227+0000","updated":"2011-01-27T20:05:31.227+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/12987733","id":"12987733","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvadali","name":"rvadali","key":"rvadali","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramkumar Vadali","active":true,"timeZone":"America/Los_Angeles"},"body":"Jira for MiniMRCluster problem:  MAPREDUCE-2285","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvadali","name":"rvadali","key":"rvadali","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramkumar Vadali","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-01-27T20:16:20.561+0000","updated":"2011-01-27T20:16:20.561+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/12987734","id":"12987734","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schen","name":"schen","key":"schen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Scott Chen","active":true,"timeZone":"Etc/UTC"},"body":"I have committed the patch. At least now, this will not block Hudson build.\nBut we need to fix MiniMRCluster related tests.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schen","name":"schen","key":"schen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Scott Chen","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-27T20:17:28.080+0000","updated":"2011-01-27T20:17:28.080+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/12987748","id":"12987748","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Mapreduce-trunk-Commit #587 (See [https://hudson.apache.org/hudson/job/Hadoop-Mapreduce-trunk-Commit/587/])\n    MAPREDUCE-2283. Add timeout for Raid Tests (Ramkumar Vadali via schen)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-27T20:43:57.382+0000","updated":"2011-01-27T20:43:57.382+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/12987828","id":"12987828","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"body":"Could you please commit this also to 0.22. And then resolve.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-01-27T23:30:37.799+0000","updated":"2011-01-27T23:30:37.799+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/12987852","id":"12987852","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schen","name":"schen","key":"schen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Scott Chen","active":true,"timeZone":"Etc/UTC"},"body":"I just committed this to 0.22.\nThanks for the reminder, Konstantin.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schen","name":"schen","key":"schen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Scott Chen","active":true,"timeZone":"Etc/UTC"},"created":"2011-01-28T00:24:42.191+0000","updated":"2011-01-28T00:24:42.191+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/12993932","id":"12993932","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Mapreduce-22-branch #33 (See [https://hudson.apache.org/hudson/job/Hadoop-Mapreduce-22-branch/33/])\n    ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-02-12T14:30:47.144+0000","updated":"2011-02-12T14:30:47.144+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12496854/comment/13016907","id":"13016907","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Mapreduce-trunk #643 (See [https://hudson.apache.org/hudson/job/Hadoop-Mapreduce-trunk/643/])\n    ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-04-07T15:40:40.867+0000","updated":"2011-04-07T15:40:40.867+0000"}],"maxResults":17,"total":17,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-2283/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i09e9j:"}}