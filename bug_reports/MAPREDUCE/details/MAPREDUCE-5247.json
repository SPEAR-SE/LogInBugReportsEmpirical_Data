{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12647529","self":"https://issues.apache.org/jira/rest/api/2/issue/12647529","key":"MAPREDUCE-5247","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2013-06-11T23:56:45.334+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jul 19 16:59:58 UTC 2013","customfield_12310420":"327885","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_5700403710_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-07-19T15:02:57.929+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-5247/watchers","watchCount":5,"isWatching":false},"created":"2013-05-14T15:36:14.244+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12372336","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12372336","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12658685","key":"HADOOP-9750","self":"https://issues.apache.org/jira/rest/api/2/issue/12658685","fields":{"summary":" '._COPYING_' sufix temp file could prevent from running MapReduce job","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-07-19T16:59:58.819+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"FsShell copy/put creates staging files with '._COPYING_' suffix.  These files should be considered hidden by FileInputFormat.  (A simple fix is to add the following conjunct to the existing hiddenFilter: \n{code}\n!name.endsWith(\"._COPYING_\")\n{code}\nAfter upgrading to CDH 4.2.0 we encountered this bug. We have a legacy data loader which uses 'hadoop fs -put' to load data into hourly partitions.  We also have intra-hourly jobs which are scheduled to execute several times per hour using the same hourly partition as input.  Thus, as the new data is continuously loaded, these staging files (i.e., ._COPYING_) are breaking our jobs (since when copy/put completes staging files are moved).\n\nAs a workaround, we've defined a custom input path filter and loaded it with \"mapred.input.pathFilter.class\".","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"328229","customfield_12312823":null,"summary":"FileInputFormat should filter files with '._COPYING_' sufix","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srosenberg","name":"srosenberg","key":"srosenberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stan Rosenberg","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srosenberg","name":"srosenberg","key":"srosenberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stan Rosenberg","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647529/comment/13680830","id":"13680830","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sarutak","name":"sarutak","key":"sarutak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"},"displayName":"Kousuke Saruta","active":true,"timeZone":"Asia/Tokyo"},"body":"We should discuss just community version, not specific distribution.\nBut what you say seems to affect Hadoop-2 and trunc.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sarutak","name":"sarutak","key":"sarutak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"},"displayName":"Kousuke Saruta","active":true,"timeZone":"Asia/Tokyo"},"created":"2013-06-11T23:56:45.334+0000","updated":"2013-06-11T23:56:45.334+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647529/comment/13680846","id":"13680846","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srosenberg","name":"srosenberg","key":"srosenberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stan Rosenberg","active":true,"timeZone":"Etc/UTC"},"body":"Correct, the above holds in the community version; before submitting this jira I checked the (apache) trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srosenberg","name":"srosenberg","key":"srosenberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stan Rosenberg","active":true,"timeZone":"Etc/UTC"},"created":"2013-06-12T00:30:20.430+0000","updated":"2013-06-12T00:30:20.430+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647529/comment/13680872","id":"13680872","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sarutak","name":"sarutak","key":"sarutak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"},"displayName":"Kousuke Saruta","active":true,"timeZone":"Asia/Tokyo"},"body":"OK. I think we should change Affects Version/s to trunc.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sarutak","name":"sarutak","key":"sarutak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"},"displayName":"Kousuke Saruta","active":true,"timeZone":"Asia/Tokyo"},"created":"2013-06-12T01:13:21.217+0000","updated":"2013-06-12T01:13:21.217+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647529/comment/13686274","id":"13686274","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sarutak","name":"sarutak","key":"sarutak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"},"displayName":"Kousuke Saruta","active":true,"timeZone":"Asia/Tokyo"},"body":"I succeeded to reproduce in branch-2.1-beta.\nI saw a temporary file with prefix \"._COPYING_\" during putting a file into HDFS.\nAs you say, it causes something bad that we run MapReduce jobs when there are ._COPYING_ files in the directory where MapReduce jobs use for input path.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sarutak","name":"sarutak","key":"sarutak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"},"displayName":"Kousuke Saruta","active":true,"timeZone":"Asia/Tokyo"},"created":"2013-06-18T01:17:33.842+0000","updated":"2013-06-18T01:17:33.842+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647529/comment/13688335","id":"13688335","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sarutak","name":"sarutak","key":"sarutak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"},"displayName":"Kousuke Saruta","active":true,"timeZone":"Asia/Tokyo"},"body":"Stan, I think we should modify FsShell to create a file assigned the name with underscore prefix for a file being created so that FileInputFormat can ignore the file rather than modify FileInputFormat to handle a ._COPYING_ suffix file as a hidden file.\nIt's just HDFS matter and I think the specification change shouldn't affects MapReduce.\nHow do you think?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sarutak","name":"sarutak","key":"sarutak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"},"displayName":"Kousuke Saruta","active":true,"timeZone":"Asia/Tokyo"},"created":"2013-06-19T19:15:26.405+0000","updated":"2013-06-19T19:15:26.405+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647529/comment/13688399","id":"13688399","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srosenberg","name":"srosenberg","key":"srosenberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stan Rosenberg","active":true,"timeZone":"Etc/UTC"},"body":"I agree.  It appears this change is confined to FsShell and nothing else.  Do we know why this particular file naming convention was chosen or was it just an oversight?  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srosenberg","name":"srosenberg","key":"srosenberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stan Rosenberg","active":true,"timeZone":"Etc/UTC"},"created":"2013-06-19T20:23:24.667+0000","updated":"2013-06-19T20:23:24.667+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647529/comment/13688650","id":"13688650","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sarutak","name":"sarutak","key":"sarutak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"},"displayName":"Kousuke Saruta","active":true,"timeZone":"Asia/Tokyo"},"body":"I found the jira where the code which \"._COPYING_\" temporary file being created is added.\nhttps://issues.apache.org/jira/browse/HADOOP-7771\nIn that jira, they discussed NPE problem when using copyToLocal and the reason why the \"._COPYING_\"  is created is to copy file persistently.\nSo, I think the temporary file is not necessarily assigned the name with \"._COPYING_\" suffix.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sarutak","name":"sarutak","key":"sarutak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"},"displayName":"Kousuke Saruta","active":true,"timeZone":"Asia/Tokyo"},"created":"2013-06-19T23:39:09.863+0000","updated":"2013-06-19T23:39:09.863+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647529/comment/13689154","id":"13689154","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj.k","name":"devaraj.k","key":"devaraj.k","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj K","active":true,"timeZone":"America/Los_Angeles"},"body":"I don't think giving this responsibility to FileInputFormat is a good idea. FileInputFormat already provides extensibility to add new filters using \"mapred.input.pathFilter.class\" configuration. If the user want to filter some specific files from the input dir for some Jobs they can achieve the same using the current behavior.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj.k","name":"devaraj.k","key":"devaraj.k","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj K","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-20T11:22:07.366+0000","updated":"2013-06-20T11:22:07.366+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647529/comment/13690534","id":"13690534","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srosenberg","name":"srosenberg","key":"srosenberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stan Rosenberg","active":true,"timeZone":"Etc/UTC"},"body":"Kousuke,\n\nHADOOP-7771 is a very interesting find!  Based on my reading of the history, the naming convention uses the suffix explicitly to make the corresponding temporary (staging) file non-hidden.  Indeed, the last comment in that jira is a question by Daryn w.r.t. whether or not partially copied files should be visible; there are no follow-ups to the question but the jira is closed.  Since the decision to have temporary files visible seems to be arbitrary, I propose that we fix FsShell by making them hidden.  Otherwise, this notion of partially loaded files needs to be lifted to the level of FileInputFormat---jobs should not be failing under normal conditions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srosenberg","name":"srosenberg","key":"srosenberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stan Rosenberg","active":true,"timeZone":"Etc/UTC"},"created":"2013-06-21T18:06:03.158+0000","updated":"2013-06-21T18:06:03.158+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647529/comment/13691008","id":"13691008","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sarutak","name":"sarutak","key":"sarutak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"},"displayName":"Kousuke Saruta","active":true,"timeZone":"Asia/Tokyo"},"body":"As Devaraj said, we can use \"mapred.input.pathFilter.class\" but, as far as I know, the name of the temporary file is undocumented and I think changes of the specification or implementation of HDFS should not affect users who have ever used HDFS.\nSo, I think we should consider the name of the temporary file. It may good that the name of the temporary file starts with \".\" or \"_\".\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sarutak","name":"sarutak","key":"sarutak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"},"displayName":"Kousuke Saruta","active":true,"timeZone":"Asia/Tokyo"},"created":"2013-06-22T01:34:31.208+0000","updated":"2013-06-22T01:34:31.208+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647529/comment/13701539","id":"13701539","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sarutak","name":"sarutak","key":"sarutak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"},"displayName":"Kousuke Saruta","active":true,"timeZone":"Asia/Tokyo"},"body":"May I recreate this jira as HDFS issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sarutak","name":"sarutak","key":"sarutak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"},"displayName":"Kousuke Saruta","active":true,"timeZone":"Asia/Tokyo"},"created":"2013-07-07T09:47:35.887+0000","updated":"2013-07-07T09:47:35.887+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647529/comment/13701574","id":"13701574","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srosenberg","name":"srosenberg","key":"srosenberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stan Rosenberg","active":true,"timeZone":"Etc/UTC"},"body":"I have no objections, but, perhaps we can get committers in HADOOP-7771 to comment on whether or not they think this belongs to HDFS?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srosenberg","name":"srosenberg","key":"srosenberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stan Rosenberg","active":true,"timeZone":"Etc/UTC"},"created":"2013-07-07T13:59:47.317+0000","updated":"2013-07-07T13:59:47.317+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647529/comment/13709588","id":"13709588","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sarutak","name":"sarutak","key":"sarutak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"},"displayName":"Kousuke Saruta","active":true,"timeZone":"Asia/Tokyo"},"body":"Thanks Stan. I have asked in HADOOP-7771.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sarutak","name":"sarutak","key":"sarutak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"},"displayName":"Kousuke Saruta","active":true,"timeZone":"Asia/Tokyo"},"created":"2013-07-16T08:03:56.889+0000","updated":"2013-07-16T08:03:56.889+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647529/comment/13713743","id":"13713743","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"Why are you running a Map/Reduce job with input from a directory that has not finished being copied?  MR was not designed to run on data that is changing underneath it.  When the job is done how do you know which of the input files were actually used to produce the output?  This issue existed prior to 2.0 but was even worse without the ._COPYING_ suffix. In those cases the files were opened in place and data started to be copied into them.  You may have only even gotten a part of the file in your MR job, not all of it.  The file could have disappeared out from under the MR job if an error occurred.\n\nThis is not behavior that I want to make a common park of Map/Reduce.  If you want to do this and you know the risks then you can filter ._COPYING_ files out of your list of input files to the MR job.  But I don't want the framework to do it automatically for everyone.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2013-07-19T15:01:44.904+0000","updated":"2013-07-19T15:01:44.904+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647529/comment/13713745","id":"13713745","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"body":"I am happy to hear arguments as to why this is really necessary, but I would rather have my job fail then have the job give me partial/inconsistent results.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=revans2","name":"revans2","key":"revans2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Joseph Evans","active":true,"timeZone":"America/Chicago"},"created":"2013-07-19T15:02:57.949+0000","updated":"2013-07-19T15:02:57.949+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647529/comment/13713843","id":"13713843","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srosenberg","name":"srosenberg","key":"srosenberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stan Rosenberg","active":true,"timeZone":"Etc/UTC"},"body":"Robert, what is the intended operational meaning of 'hdfs fs -put local dst'?  Is it not that file denoted by local is \"atomically\" transferred into dst?  If that's the case, then I'd argue that it's broken---from MR perspective the transfer is not truly atomic since files with the suffix .COPYING are _visible_. \n\nAs I've indicated above, we have jobs which execute as soon as new data is available for that (hdfs) partition.  The external scheduler knows when new data has finished loading, namely when all pending hdfs 'put' operations complete. \n (Think of it as a special type of job in the sense that it runs many times per hour, every time processing a superset of the input files.)  \n\nYour claim that MR was not designed to run on data that is changing underneath it seems rather putative.  What is wrong with the above approach assuming that the intended semantics of 'put' is atomic transfer without (MR) observable side effect of .COPYING?  (In other words, if MR is oblivious to .COPYING, then data it not changing underneath it.)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srosenberg","name":"srosenberg","key":"srosenberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Stan Rosenberg","active":true,"timeZone":"Etc/UTC"},"created":"2013-07-19T16:59:58.819+0000","updated":"2013-07-19T16:59:58.819+0000"}],"maxResults":16,"total":16,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-5247/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1kkmf:"}}