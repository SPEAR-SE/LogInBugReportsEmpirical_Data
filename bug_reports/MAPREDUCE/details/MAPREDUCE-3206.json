{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12527686","self":"https://issues.apache.org/jira/rest/api/2/issue/12527686","key":"MAPREDUCE-3206","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2011-10-19T15:13:24.149+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Oct 25 00:13:02 UTC 2011","customfield_12310420":"89006","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-3206/watchers","watchCount":11,"isWatching":false},"created":"2011-10-19T01:20:34.020+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316391","id":"12316391","description":"Merge append/sync support with security","name":"0.20.205.0","archived":false,"released":true,"releaseDate":"2011-10-06"}],"issuelinks":[{"id":"12344456","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12344456","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12522665","key":"MAPREDUCE-2981","self":"https://issues.apache.org/jira/rest/api/2/issue/12522665","fields":{"summary":"Backport trunk fairscheduler to 0.20-security branch","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-07-10T21:27:09.118+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312901","id":"12312901","name":"contrib/fair-share"}],"timeoriginalestimate":null,"description":"Using the FairScheduler with kerberos authentication does not appear to work with 0.20.205.0.  When submitting a job, execution fails when storing the delegation tokens for the job:\n\n{noformat}\n11/10/18 21:48:53 INFO hdfs.DFSClient: Created HDFS_DELEGATION_TOKEN token 6 for hdfs on xxxx:8020\n11/10/18 21:48:53 INFO security.TokenCache: Got dt for hdfs://xxxx/user/hdfs/.staging/job_201110182148_0001;uri=xxxx:8020;t.service=xxxx:8020\n11/10/18 21:48:53 INFO mapred.FileInputFormat: Total input paths to process : 1\n11/10/18 21:48:53 INFO mapred.JobClient: Running job: job_201110182148_0001\n11/10/18 21:48:54 INFO mapred.JobClient:  map 0% reduce 0%\n11/10/18 21:48:54 INFO mapred.JobClient: Job complete: job_201110182148_0001\n11/10/18 21:48:54 INFO mapred.JobClient: Counters: 0\n11/10/18 21:48:54 INFO mapred.JobClient: Job Failed: Job initialization failed:\njava.io.IOException: Call to xxxx/xxxx:8020 failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Attempt to obtain new INITIATE credentials failed! (null))]\n\tat org.apache.hadoop.ipc.Client.wrapException(Client.java:1103)\n\tat org.apache.hadoop.ipc.Client.call(Client.java:1071)\n\tat org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)\n\tat $Proxy7.getProtocolVersion(Unknown Source)\n\tat org.apache.hadoop.ipc.RPC.getProxy(RPC.java:396)\n\tat org.apache.hadoop.ipc.RPC.getProxy(RPC.java:379)\n\tat org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:118)\n\tat org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:222)\n\tat org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:187)\n\tat org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:89)\n\tat org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1328)\n\tat org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:65)\n\tat org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1346)\n\tat org.apache.hadoop.fs.FileSystem.get(FileSystem.java:244)\n\tat org.apache.hadoop.fs.Path.getFileSystem(Path.java:187)\n\tat org.apache.hadoop.security.Credentials.writeTokenStorageFile(Credentials.java:175)\n\tat org.apache.hadoop.mapred.JobInProgress.generateAndStoreTokens(JobInProgress.java:3528)\n\tat org.apache.hadoop.mapred.JobInProgress.initTasks(JobInProgress.java:696)\n\tat org.apache.hadoop.mapred.JobTracker.initJob(JobTracker.java:4207)\n\tat org.apache.hadoop.mapred.FairScheduler$JobInitializer$InitJob.run(FairScheduler.java:291)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n\tat java.lang.Thread.run(Thread.java:662)\nCaused by: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Attempt to obtain new INITIATE credentials failed! (null))]\n\tat org.apache.hadoop.ipc.Client$Connection$1.run(Client.java:539)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:396)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)\n\tat org.apache.hadoop.ipc.Client$Connection.handleSaslConnectionFailure(Client.java:484)\n\tat org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:586)\n\tat org.apache.hadoop.ipc.Client$Connection.access$2000(Client.java:184)\n\tat org.apache.hadoop.ipc.Client.getConnection(Client.java:1202)\n\tat org.apache.hadoop.ipc.Client.call(Client.java:1046)\n\t... 21 more\nCaused by: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Attempt to obtain new INITIATE credentials failed! (null))]\n\tat com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(GssKrb5Client.java:194)\n\tat org.apache.hadoop.security.SaslRpcClient.saslConnect(SaslRpcClient.java:134)\n\tat org.apache.hadoop.ipc.Client$Connection.setupSaslConnection(Client.java:381)\n\tat org.apache.hadoop.ipc.Client$Connection.access$1100(Client.java:184)\n\tat org.apache.hadoop.ipc.Client$Connection$2.run(Client.java:579)\n\tat org.apache.hadoop.ipc.Client$Connection$2.run(Client.java:576)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:396)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)\n\tat org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:575)\n\t... 24 more\nCaused by: GSSException: No valid credentials provided (Mechanism level: Attempt to obtain new INITIATE credentials failed! (null))\n\tat sun.security.jgss.krb5.Krb5InitCredential.getTgt(Krb5InitCredential.java:333)\n\tat sun.security.jgss.krb5.Krb5InitCredential.getInstance(Krb5InitCredential.java:128)\n\tat sun.security.jgss.krb5.Krb5MechFactory.getCredentialElement(Krb5MechFactory.java:106)\n\tat sun.security.jgss.krb5.Krb5MechFactory.getMechanismContext(Krb5MechFactory.java:172)\n\tat sun.security.jgss.GSSManagerImpl.getMechanismContext(GSSManagerImpl.java:209)\n\tat sun.security.jgss.GSSContextImpl.initSecContext(GSSContextImpl.java:195)\n\tat sun.security.jgss.GSSContextImpl.initSecContext(GSSContextImpl.java:162)\n\tat com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(GssKrb5Client.java:175)\n\t... 33 more\nCaused by: javax.security.auth.login.LoginException: No LoginModules configured for \n\tat javax.security.auth.login.LoginContext.init(LoginContext.java:256)\n\tat javax.security.auth.login.LoginContext.<init>(LoginContext.java:499)\n\tat sun.security.jgss.GSSUtil.login(GSSUtil.java:244)\n\tat sun.security.jgss.krb5.Krb5Util.getTicket(Krb5Util.java:136)\n\tat sun.security.jgss.krb5.Krb5InitCredential$1.run(Krb5InitCredential.java:328)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat sun.security.jgss.krb5.Krb5InitCredential.getTgt(Krb5InitCredential.java:325)\n\t... 40 more\n{noformat}\n\nThe problem seems to have been introduced by the backported changes in MAPREDUCE-2981, which shifted the execution of JobTracker.initJob(), and hence JobInProgress.generateAndStoreTokens(), to underneath the call path for the RPC invocation.  As a result, the DFS write in TokenStorage.writeTokenStorageFile() in done under a UGI.doAs() block as the RPC client remote user, without a TGT for negotiating the connection.\n\nDoes this analysis seem right?  Previously it seems that JobTracker.initJob() was only called in a separate thread so it was picking up the credentials obtained for the configured JobTracker kerberos principal.  The same job runs successfully in a build with MAPREDUCE-2981 reverted.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12499620","id":"12499620","filename":"MAPREDUCE-3206_0.20.205.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ghelmling","name":"ghelmling","key":"ghelmling","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ghelmling&avatarId=29391","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ghelmling&avatarId=29391","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ghelmling&avatarId=29391","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ghelmling&avatarId=29391"},"displayName":"Gary Helmling","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-19T01:25:16.709+0000","size":978,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12499620/MAPREDUCE-3206_0.20.205.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"74249","customfield_12312823":null,"summary":"FairScheduler breaks writing of job tokens to MR system dir when using kerberos auth","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ghelmling","name":"ghelmling","key":"ghelmling","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ghelmling&avatarId=29391","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ghelmling&avatarId=29391","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ghelmling&avatarId=29391","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ghelmling&avatarId=29391"},"displayName":"Gary Helmling","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ghelmling","name":"ghelmling","key":"ghelmling","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ghelmling&avatarId=29391","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ghelmling&avatarId=29391","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ghelmling&avatarId=29391","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ghelmling&avatarId=29391"},"displayName":"Gary Helmling","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527686/comment/13130302","id":"13130302","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ghelmling","name":"ghelmling","key":"ghelmling","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ghelmling&avatarId=29391","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ghelmling&avatarId=29391","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ghelmling&avatarId=29391","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ghelmling&avatarId=29391"},"displayName":"Gary Helmling","active":true,"timeZone":"America/Los_Angeles"},"body":"This patch executes the token file writing to DFS as the logged in job tracker user.  I don't know if there is a better approach, but this resolves the issue for me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ghelmling","name":"ghelmling","key":"ghelmling","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ghelmling&avatarId=29391","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ghelmling&avatarId=29391","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ghelmling&avatarId=29391","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ghelmling&avatarId=29391"},"displayName":"Gary Helmling","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-19T01:25:16.770+0000","updated":"2011-10-19T01:25:16.770+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527686/comment/13130679","id":"13130679","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"I'm not familiar with the fair scheduler.  However it would seem to me that instead of flipping the user back to the JT, that perhaps the {{UGI.doAs()}} the remote user should be pushed down further in the callstack?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2011-10-19T15:13:24.149+0000","updated":"2011-10-19T15:13:24.149+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527686/comment/13130782","id":"13130782","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"body":"Patch that ported FairScheduler from trunk into 0.20-security branch seems to be the cause of this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ekoontz","name":"ekoontz","key":"ekoontz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ekoontz&avatarId=11640","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ekoontz&avatarId=11640","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ekoontz&avatarId=11640","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ekoontz&avatarId=11640"},"displayName":"Eugene Koontz","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-19T17:13:18.464+0000","updated":"2011-10-19T17:13:18.464+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527686/comment/13130865","id":"13130865","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ghelmling","name":"ghelmling","key":"ghelmling","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ghelmling&avatarId=29391","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ghelmling&avatarId=29391","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ghelmling&avatarId=29391","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ghelmling&avatarId=29391"},"displayName":"Gary Helmling","active":true,"timeZone":"America/Los_Angeles"},"body":"I'm not sure pushing down the remote user UGI.doAs() is really possible.  As I understand it, the current problem is the UGI.doAs() wrapping the entire RPC call invocation up in org.apache.hadoop.ipc.Server$Handler.run():\n{code}\nCurCall.set(call);\ntry {\n  // Make the call as the user via Subject.doAs, thus associating\n  // the call with the Subject\n  if (call.connection.user == null) {\n    value = call(call.connection.protocol, call.param, \n                 call.timestamp);\n  } else {\n    value = \n        call.connection.user.doAs\n            (new PrivilegedExceptionAction<Writable>() {\n               @Override\n               public Writable run() throws Exception {\n                 // make the call\n                 return call(call.connection.protocol, \n                             call.param, call.timestamp);\n\n               }\n             }\n            );\n  }\n{code}\n\nPrior to MAPREDUCE-2981, as I understand it, JobTracker.initJob() was being invoked in a separate thread by the scheduler, not under the RPC handler thread.  So it was picking up the JobTracker login user since it wasn't running under a UGI.doAs() block.\n\nI haven't checked the FairScheduler code in 0.23 or trunk to see how it's handled there.  Maybe that would provide another alternative.  Or changing FairScheduler$JobInitializer to run in a separate thread and pull jobs to initialize from a queue might work as well.  Maybe that's more along the lines of what you were thinking?  I just tried the least intrusive approach.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ghelmling","name":"ghelmling","key":"ghelmling","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ghelmling&avatarId=29391","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ghelmling&avatarId=29391","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ghelmling&avatarId=29391","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ghelmling&avatarId=29391"},"displayName":"Gary Helmling","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-19T18:41:48.493+0000","updated":"2011-10-19T18:41:48.493+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527686/comment/13130924","id":"13130924","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"That begs the question: was MAPREDUCE-2981 ported incorrectly?  Otherwise why doesn't 23/trunk have this issue?  If there is just a fundamental difference in 23 vs 205, the minimalist approach is probably best for 205.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2011-10-19T19:53:58.894+0000","updated":"2011-10-19T19:53:58.894+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12527686/comment/13134652","id":"13134652","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ghelmling","name":"ghelmling","key":"ghelmling","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ghelmling&avatarId=29391","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ghelmling&avatarId=29391","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ghelmling&avatarId=29391","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ghelmling&avatarId=29391"},"displayName":"Gary Helmling","active":true,"timeZone":"America/Los_Angeles"},"body":"From looking at the current code in branch-0.23, it seems that version of the fair scheduler code has the same problem.  But, according to MAPREDUCE-2736, the fair scheduler contrib is slated for removal in 0.23.  So I don't know if there is any point in attempting a more extensive refactoring of the fair scheduler code to avoid the problem, as opposed to the simpler fix that I posted.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ghelmling","name":"ghelmling","key":"ghelmling","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ghelmling&avatarId=29391","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ghelmling&avatarId=29391","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ghelmling&avatarId=29391","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ghelmling&avatarId=29391"},"displayName":"Gary Helmling","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-25T00:13:02.756+0000","updated":"2011-10-25T00:13:02.756+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-3206/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0d2x3:"}}