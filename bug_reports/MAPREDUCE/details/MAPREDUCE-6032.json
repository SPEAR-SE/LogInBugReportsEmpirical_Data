{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12733230","self":"https://issues.apache.org/jira/rest/api/2/issue/12733230","key":"MAPREDUCE-6032","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":86400,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327180","id":"12327180","description":"2.6.0 release","name":"2.6.0","archived":false,"released":true,"releaseDate":"2014-11-18"}],"aggregatetimespent":86400,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-08-11T14:16:25.109+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Aug 16 15:11:43 UTC 2014","customfield_12310420":"411258","customfield_12312320":null,"customfield_12310222":"3_*:*_2_*:*_53578022_*|*_10002_*:*_4_*:*_317068463_*|*_1_*:*_3_*:*_810036_*|*_5_*:*_2_*:*_650703_*|*_4_*:*_1_*:*_151820","customfield_12312321":null,"resolutiondate":"2014-08-15T20:36:11.646+0000","workratio":100,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-6032/watchers","watchCount":7,"isWatching":false},"created":"2014-08-11T13:11:52.640+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":0,"aggregatetimeoriginalestimate":86400,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324427","id":"12324427","description":"maintenance release on branch-2.0-alpha","name":"2.0.5-alpha","archived":false,"released":true,"releaseDate":"2013-06-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324808","id":"12324808","description":"2.1.1-beta bug-fix release","name":"2.1.1-beta","archived":false,"released":true,"releaseDate":"2013-09-16"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324812","id":"12324812","description":"2.0.6-alpha bug-fix release","name":"2.0.6-alpha","archived":false,"released":true,"releaseDate":"2013-08-22"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12325050","id":"12325050","description":"2.2.0 release","name":"2.2.0","archived":false,"released":true,"releaseDate":"2013-10-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12325257","id":"12325257","description":"2.3.0 release","name":"2.3.0","archived":false,"released":true,"releaseDate":"2014-02-20"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12325668","id":"12325668","description":"2.2.1 release","name":"2.2.1","archived":false,"released":true,"releaseDate":"2014-04-07"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326698","id":"12326698","description":"2.4.1 bug-fix release","name":"2.4.1","archived":false,"released":true,"releaseDate":"2014-06-30"}],"issuelinks":[{"id":"12394833","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12394833","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12735911","key":"MAPREDUCE-6044","self":"https://issues.apache.org/jira/rest/api/2/issue/12735911","fields":{"summary":"Fully qualified intermediate done directory will break per-user dir creation on Windows","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-12-01T03:08:27.621+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12315343","id":"12315343","name":"jobhistoryserver"}],"timeoriginalestimate":86400,"description":"When MRv2 job container runs in a context of non-default file system JobHistoryUtils.java obtains mapreduce.jobhistory.done-dir and\n mapreduce.jobhistory.intermediate-done-dir as a non-qualified paths (e.g. /mapred/history). This path is considered to belong to the current container's context. As result the application history is being written to another file system and job history server is unable to pick it up, because it expects it to be found on the default file system. Currently providing fully qualified path to those parameters is not supported as well, because of a bug in JobHistoryEventHandler.\n\nAfter this fix two scenarios will be supported:\n- mapreduce.jobhistory.done-dir and mapreduce.jobhistory.intermediate-done-dir (and the staging directory BTW) will support a fully qualified path\n- If a non-qualified path is configured then it will always be defaulted to the default file system (core-site.xml). That's how consistency of history location will be archived\n\nImplementation notes:\n - FileSystem#makeQualified throws exception if specified path belongs to another file system. However FileContext#makeQualified work properly in this case, and this is the meaning of the fix in JobHistoryEventHandler. I was not ready to change behavior FileSystem#makeQualified because much more thought is required. I afraid that many users expect such behavior, and fixing it would break their code.\n- The fix in JobHistoryUtils detects non-default namenode configuration only if it comes from some \"real\" configuration: core-default.xml is ignored. This is done primary as a kind of test hook, because otherwise setting fs.defaultFS value during test executions would be always recognized by  JobHistoryUtils  as a non-default namenode against 'file:///' specified in core-default.xml. \n\n(Remark. Note that makeQualified doesn't behave properly with file:/// filesystem, for example:\nnew Path(\"file:///dir/subdir\").makeQualified(new URI(\"hdfs://server:8020\"), new Path(\"/dir\"))\nReturns: \"file://server:8020/dir/subdir\" which doesn't make sense.\nHowever I don't believe it worth fixing, since nobody really case about local file system besides tests. My fix just ensures that all tests run smoothly by ignoring core-default.xml file system in the logic.)\n\n\n","customfield_10010":null,"timetracking":{"originalEstimate":"24h","remainingEstimate":"0h","timeSpent":"24h","originalEstimateSeconds":86400,"remainingEstimateSeconds":0,"timeSpentSeconds":86400},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12661701","id":"12661701","filename":"MAPREDUCE-6032.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"created":"2014-08-14T12:03:20.590+0000","size":21325,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12661701/MAPREDUCE-6032.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12660984","id":"12660984","filename":"MAPREDUCE-6032.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"created":"2014-08-11T13:23:04.940+0000","size":14123,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12660984/MAPREDUCE-6032.patch"}],"aggregatetimeestimate":0,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"411250","customfield_12312823":null,"summary":"Unable to check mapreduce job status if submitted using a non-default namenode","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"customfield_12310290":null,"aggregateprogress":{"progress":86400,"total":86400,"percent":100},"customfield_12311024":null,"environment":"Any","customfield_12313520":null,"customfield_12311020":null,"duedate":"2014-08-14","customfield_12310250":null,"progress":{"progress":86400,"total":86400,"percent":100},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14092750","id":"14092750","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"body":"Patch uploaded","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"created":"2014-08-11T13:23:04.945+0000","updated":"2014-08-11T13:23:04.945+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14092801","id":"14092801","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:green}+1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12660984/MAPREDUCE-6032.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4798//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4798//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-11T14:16:25.109+0000","updated":"2014-08-11T14:16:25.109+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14092840","id":"14092840","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"{{Filesystem#makeQualified(Path)}} is intended to fail if the fs is already qualified for another fs.\n\n{{Path#makeQualified(FileSystem)}}, which is oddly deprecated, is intended to qualify against the given fs only if the path isn't already qualified.  What you found with it mangling a localfs authority is a nasty bug!\n\nAll said, why even bother explicitly qualifying?  This should work:\n{code}\nstagingDirPath = new Path(stagingDirStr);\nstatingDirFS = stagingDirPath.getFileSystem(conf);\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2014-08-11T14:51:13.852+0000","updated":"2014-08-11T14:51:13.852+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14092986","id":"14092986","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"body":"No this is not working because conf is the job configuration which may (and does in our use cases) contain fs.defaultFS different from one specified in core-site.xml. As result in history server stagingDirPath.getFileSystem(conf) will return one file system but within a job it will return another one. Only stagingDirPath.getFileSystem(new Configuration()) works perfectly. This fix ensures that only default file system is used.\n\nThis issue was detected in our pre-production system when we tried to migrate to Hadoop-2 (2.4.1). The fix was tested there.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"created":"2014-08-11T17:04:40.081+0000","updated":"2014-08-11T17:04:40.081+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14093721","id":"14093721","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"body":"Resolved it by mistake, I still need somebody to finish review and commit it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"created":"2014-08-12T04:42:03.074+0000","updated":"2014-08-12T04:42:03.074+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14093727","id":"14093727","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"body":"Same patch, this issue just had a wrong status,  so I bring it back to radar.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"created":"2014-08-12T04:44:34.888+0000","updated":"2014-08-12T04:44:34.888+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14093731","id":"14093731","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"body":"[~benjzh], I'll review the patch, thanks for your contribution!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-12T04:48:15.213+0000","updated":"2014-08-12T04:48:15.213+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14094692","id":"14094692","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"body":"[~benjzh], agree with the solution in general. Here're some comments with the patch.\n\n1. Doesn't need \"JobHistoryUtils: \", the logger will take care of the source where the log record is generated.\n{code}\n+      LOG.info(\"JobHistoryUtils: default file system is set solely \" +\n+              \"by core-default.xml therefore -  ignoring\");\n{code}\n\n2. Maybe you want to make the logic here clearer. And path.toUri().getAuthority() \\!= null || path.toUri().getScheme()!= null -> &&?\n{code}\n+    if (fc == null ||\n+            fc.getDefaultFileSystem().getUri().toString().equals(\n+            conf.get(CommonConfigurationKeysPublic.FS_DEFAULT_NAME_KEY, \"\")) ||\n+            path.toUri().getAuthority() != null ||\n+            path.toUri().getScheme()!= null) {\n{code}\nChange it to:\n{code}\nboolean solyInCoreDefault = fc == null;\nboolean sameFS = fc.getDefaultFileSystem().getUri().toString().equals(conf.get(CommonConfigurationKeysPublic.FS_DEFAULT_NAME_KEY, \"\"));\nboolean qualified = path.toUri().getAuthority() != null &&  path.toUri().getScheme()!= null;\nif (solyInCoreDefault && sameFS && qualified) {\n...\n{code}\n\n3. Is it possible to add a test case in TestJobHistoryEventHandler to verify the JobHistoryHandler will write to the default FS as well?\n\n4. You may wan to fix the indents (for those sentences in multiple lines).\n\n5. Unlike makeQualified, the following method will work when stagingDirPath is on a different FS than the configure one, right?\n{code}\nstagingDirFS = FileSystem.get(stagingDirPath.toUri(), conf);\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-12T21:16:35.783+0000","updated":"2014-08-12T21:16:35.783+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14096886","id":"14096886","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"body":"{quote}1. Doesn't need \"JobHistoryUtils: \", the logger will take care of the source where the log record is generated.{quote} - Fixed\n{quote}2. Maybe you want to make the logic here clearer.{quote} - While your version is more readable it will fail on sameFS line with NullPointerException. This is because in the 'if' all conditions are ORed and if first condition is false then the next won't be calculated. That's why it is better to put everything in the 'if' in this case.\n{quote}2. ...And path.toUri().getAuthority() != null || path.toUri().getScheme()!= null -> &&?{quote} OR is more proper here because if path is partially qualified (e.g. there is a schema without autority) then we don't want to mess with it and just return it as-is. Consider following example:\n{code}new Path(\"s3:///dir/subdir\").makeQualified(new URI(\"hdfs://server:8020\"), new Path(\"/dir\"){code}\nwill return the following nonsense\n{code}s3://server:8020/dir/subdir{code}\n{quote}3. Is it possible to add a test case in TestJobHistoryEventHandler to verify the JobHistoryHandler will write to the default FS as well?{quote} - Done\n{quote}4. You may wan to fix the indents (for those sentences in multiple lines).{quote} - You was not specific, therefore please check that I fixed everything you meant.\n{quote}5. Unlike makeQualified, the following method will work when stagingDirPath is on a different FS than the configure one, right?{quote} - Right\n\nI will upload the updated patch soon.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"created":"2014-08-14T11:43:44.270+0000","updated":"2014-08-14T11:43:44.270+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14096896","id":"14096896","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"body":"Updated with review comments","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"created":"2014-08-14T12:03:20.596+0000","updated":"2014-08-14T12:03:20.596+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14096979","id":"14096979","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:green}+1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12661701/MAPREDUCE-6032.1.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 2 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4805//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4805//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-14T14:04:05.953+0000","updated":"2014-08-14T14:04:05.953+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14097156","id":"14097156","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"I'm a bit confused.  The snippet I posted above should allow you to specify a scheme qualified path in the config so you can specifically refer a NN independent of the defaultFS.  Are you saying that doesn't work?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2014-08-14T16:11:28.421+0000","updated":"2014-08-14T16:11:28.421+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14097638","id":"14097638","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"body":"[Daryn Sharp|https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daryn], first time I misunderstood your question. AFAIU now you suppose that *given* all my fixes in JobHistoryUtils we shouldn't bother to qualify the path in JobHistoryEventHandler, right?\nYou are right! However while it looks like we don't really have to qualify the paths right now, doing so is much safer for any future changes. If paths are qualified they will never be misused. Since there is only one-time overhead in this operation we won't suffer from mentionable performance penalties if we leave it as-is. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"created":"2014-08-14T20:51:58.951+0000","updated":"2014-08-14T20:51:58.951+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14097849","id":"14097849","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"body":"+1 for the latest patch. I'll commit it tomorrow if [~daryn] doesn't have further concern about the qualifying calls in JobHistoryEventHandler.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-14T22:48:07.087+0000","updated":"2014-08-14T22:48:07.087+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14099087","id":"14099087","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"body":"Committed to trunk and branch-2. Thanks, [~benjzh] for the patch, and [~daryn] for the review!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zjshen","name":"zjshen","key":"zjshen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10443","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10443","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10443","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10443"},"displayName":"Zhijie Shen","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-15T20:36:11.671+0000","updated":"2014-08-15T20:36:11.671+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14099095","id":"14099095","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-trunk-Commit #6079 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/6079/])\nMAPREDUCE-6032. Fix the non-unicode character in the change log in CHANGES.txt. (zjshen: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1618270)\n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\nMAPREDUCE-6032. Made MR jobs write job history files on the default FS when the current context’s FS is different. Contributed by Benjamin Zhitomirsky. (zjshen: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1618269)\n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/pom.xml\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/jobhistory/JobHistoryEventHandler.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/jobhistory/TestJobHistoryEventHandler.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/jobhistory/JobHistoryUtils.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/TestHistoryFileManager.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-15T20:38:39.206+0000","updated":"2014-08-15T20:38:39.206+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14099601","id":"14099601","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-Yarn-trunk #648 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/648/])\nMAPREDUCE-6032. Fix the non-unicode character in the change log in CHANGES.txt. (zjshen: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1618270)\n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\nMAPREDUCE-6032. Made MR jobs write job history files on the default FS when the current context’s FS is different. Contributed by Benjamin Zhitomirsky. (zjshen: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1618269)\n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/pom.xml\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/jobhistory/JobHistoryEventHandler.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/jobhistory/TestJobHistoryEventHandler.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/jobhistory/JobHistoryUtils.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/TestHistoryFileManager.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-16T11:27:18.550+0000","updated":"2014-08-16T11:27:18.550+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14099662","id":"14099662","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-Mapreduce-trunk #1865 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1865/])\nMAPREDUCE-6032. Fix the non-unicode character in the change log in CHANGES.txt. (zjshen: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1618270)\n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\nMAPREDUCE-6032. Made MR jobs write job history files on the default FS when the current context’s FS is different. Contributed by Benjamin Zhitomirsky. (zjshen: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1618269)\n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/pom.xml\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/jobhistory/JobHistoryEventHandler.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/jobhistory/TestJobHistoryEventHandler.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/jobhistory/JobHistoryUtils.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/TestHistoryFileManager.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-16T14:57:07.243+0000","updated":"2014-08-16T14:57:07.243+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/comment/14099672","id":"14099672","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Hdfs-trunk #1839 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1839/])\nMAPREDUCE-6032. Fix the non-unicode character in the change log in CHANGES.txt. (zjshen: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1618270)\n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\nMAPREDUCE-6032. Made MR jobs write job history files on the default FS when the current context’s FS is different. Contributed by Benjamin Zhitomirsky. (zjshen: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1618269)\n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/pom.xml\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/jobhistory/JobHistoryEventHandler.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/jobhistory/TestJobHistoryEventHandler.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/jobhistory/JobHistoryUtils.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/test/java/org/apache/hadoop/mapreduce/v2/hs/TestHistoryFileManager.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-16T15:11:43.079+0000","updated":"2014-08-16T15:11:43.079+0000"}],"maxResults":19,"total":19,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-6032/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":1,"worklogs":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12733230/worklog/16943","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=benjzh","name":"benjzh","key":"benjzh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=benjzh&avatarId=20363","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=benjzh&avatarId=20363","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=benjzh&avatarId=20363","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=benjzh&avatarId=20363"},"displayName":"Benjamin Zhitomirsky","active":true,"timeZone":"Asia/Damascus"},"comment":"","created":"2014-08-12T04:32:39.434+0000","updated":"2014-08-12T04:32:39.434+0000","started":"2014-08-12T04:32:00.000+0000","timeSpent":"1d","timeSpentSeconds":86400,"id":"16943","issueId":"12733230"}]},"customfield_12311820":"0|i1yr5b:"}}