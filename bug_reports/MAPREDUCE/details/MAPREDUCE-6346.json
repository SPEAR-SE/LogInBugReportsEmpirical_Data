{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12825945","self":"https://issues.apache.org/jira/rest/api/2/issue/12825945","key":"MAPREDUCE-6346","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2015-05-25T03:36:31.532+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue May 16 15:42:03 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_64635909927_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2017-05-16T15:42:26.939+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-6346/watchers","watchCount":10,"isWatching":false},"created":"2015-04-29T13:17:17.087+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12335734","id":"12335734","description":"3.0.0-alpha1 release","name":"3.0.0-alpha1","archived":false,"released":true,"releaseDate":"2016-09-03"}],"issuelinks":[{"id":"12503724","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12503724","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12857811","key":"MAPREDUCE-6459","self":"https://issues.apache.org/jira/rest/api/2/issue/12857811","fields":{"summary":"Native task crashes when merging spilled file on ppc64","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12435156","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12435156","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12857811","key":"MAPREDUCE-6459","self":"https://issues.apache.org/jira/rest/api/2/issue/12857811","fields":{"summary":"Native task crashes when merging spilled file on ppc64","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ayappan","name":"Ayappan","key":"ayappan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ayappan","active":true,"timeZone":"Asia/Kolkata"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-05-16T15:42:26.981+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Test org.apache.hadoop.mapred.nativetask.kvtest.KVTest (and 5 or 6 other tests) crashes on PPC64LE .\n\n....\n15/04/28 10:46:06 INFO Mid-spill: { id: 4, collect: 245 ms, in-memory sort: 32 ms, in-memory records: 48202, merge&spill: 80 ms, uncompressed size: 5031451, real size: 3739319 path: /tmp/hadoop-reixt/mapred/local/localRunner/reixt/jobcache/job_local408221154_0008/attempt_local408221154_0008_m_000000_0/output/spill4.out }\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00003fff6c7d8e50, pid=945, tid=70366264881616\n#\n# JRE version: OpenJDK Runtime Environment (7.0_79-b14) (build 1.7.0_79-mockbuild_2015_04_10_10_48-b00)\n# Java VM: OpenJDK 64-Bit Server VM (24.79-b02 mixed mode linux-ppc64 compressed oops)\n# Derivative: IcedTea 2.5.5\n# Distribution: Built on Red Hat Enterprise Linux Server release 7.1 (Maipo) (Fri Apr 10 10:48:01 EDT 2015)\n# Problematic frame:\n# C  [libnativetask.so.1.0.0+0x58e50]  NativeTask::WritableUtils::ReadVLongInner(char const*, unsigned int&)+0x40\n#\n# Core dump written. Default location: /home/reixt/HADOOP-2.7.0/hadoop-FromApache-Trunk-201504241115/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/core or core.945\n#\n# An error report file with more information is saved as:\n# /tmp/jvm-945/hs_error.log\n#\n# If you would like to submit a bug report, please include\n# instructions on how to reproduce the bug and visit:\n#   http://icedtea.classpath.org/bugzilla\n# The crash happened outside the Java Virtual Machine in native code.\n# See problematic frame for where to report the bug.\n#\n/bin/sh: line 1:   945 Aborted                 (core dumped) /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.79-2.5.5.1.ael7b_1.ppc64le/jre/bin/java -Xmx4096m -XX:MaxPermSize=768m -XX:+HeapDumpOnOutOfMemoryError -jar /home/reixt/HADOOP-2.7.0/hadoop-FromApache-Trunk-201504241115/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/target/surefire/surefirebooter9078773752877532263.jar /home/reixt/HADOOP-2.7.0/hadoop-FromApache-Trunk-201504241115/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/target/surefire/surefire4138802116387705281tmp /home/reixt/HADOOP-2.7.0/hadoop-FromApache-Trunk-201504241115/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/target/surefire/surefire_01525011254551870798tmp\n\n/tmp/jvm-945/hs_error.log :\n\n# C  [libnativetask.so.1.0.0+0x58e50]  NativeTask::WritableUtils::ReadVLongInner(char const*, unsigned int&)+0x40","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12734820","id":"12734820","filename":"TR","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-22T13:14:56.480+0000","size":39157,"mimeType":"text/html","content":"https://issues.apache.org/jira/secure/attachment/12734820/TR"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"mapred.nativetask.kvtest.KVTest crashes on PPC64LE","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"RHEL 7.1 - PPC64 LE - OpenJDK rhel-2.5.5.1.ael7b_1-ppc64le u79-b14","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/14519353","id":"14519353","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"body":"I've started to analyze the crash and to compare the run on PPC64LE with the run on x86è64.\nHowever, I do not understand what the test is aimed to do. That would help.\n\nHow to reproduce :\ncd hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask\n mvn -l mvn.Test.OpenJDK.KVTest7.res test -Pnative,src -Drequire.snappy -Dmaven.test.failure.ignore=true -Dsurefire.heap=-Xmx2048m -fn -X -Dtest=org.apache.hadoop.mapred.nativetask.kvtest.KVTest\n\nMaven/Java environment:\n$ mvn -version\nApache Maven 3.2.5 (12a6b3acb947671f09b81f49094c53f426d8cea1; 2014-12-14T11:29:23-06:00)\nMaven home: /opt/apache-maven-3.2.5\nJava version: 1.7.0_79, vendor: Oracle Corporation\nJava home: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.79-2.5.5.1.ael7b_1.ppc64le/jre\nDefault locale: en_US, platform encoding: ISO-8859-1\nOS name: \"linux\", version: \"3.10.0-229.ael7b.ppc64le\", arch: \"ppc64le\", family: \"unix\"\n\n\nStack is:\nCore was generated by `java -Xmx4096m -XX:MaxPermSize=768m -XX:+HeapDumpOnOutOfMemoryError -jar /home/'.\nProgram terminated with signal 6, Aborted.\n#0  0x00003fffa55ce6b8 in raise () from /lib64/libc.so.6\nMissing separate debuginfos, use: debuginfo-install glib2-2.40.0-4.ael7b.ppc64le glibc-2.17-78.ael7b.ppc64le libffi-3.0.13-16.ael7b.ppc64le libgcc-4.8.3-9.ael7b.ppc64le libselinux-2.2.2-6.ael7b.ppc64le libstdc++-4.8.3-9.ael7b.ppc64le pcre-8.32-14.ael7b.ppc64le snappy-1.1.0-3.ael7b.ppc64le xz-libs-5.1.2-9alpha.ael7b.ppc64le zlib-1.2.7-14.ael7b.ppc64le\n(gdb) bt\n#0  0x00003fffa55ce6b8 in raise () from /lib64/libc.so.6\n#1  0x00003fffa55d098c in abort () from /lib64/libc.so.6\n#2  0x00003fffa524edcc in os::abort (dump_core=<optimized out>) at /usr/src/debug/java-1.7.0-openjdk-1.7.0.79-2.5.5.1.ael7b_1.ppc64le/openjdk/hotspot/src/os/linux/vm/os_linux.cpp:1630\n#3  0x00003fffa542977c in VMError::report_and_die (this=0x3fff84f9c108) at /usr/src/debug/java-1.7.0-openjdk-1.7.0.79-2.5.5.1.ael7b_1.ppc64le/openjdk/hotspot/src/share/vm/utilities/vmError.cpp:1073\n#4  0x00003fffa525c264 in JVM_handle_linux_signal (sig=<optimized out>, info=0x3fff84f9d068, ucVoid=0x3fff84f9c2f0, abort_if_unrecognized=<optimized out>)\n    at /usr/src/debug/java-1.7.0-openjdk-1.7.0.79-2.5.5.1.ael7b_1.ppc64le/openjdk/hotspot/src/os_cpu/linux_ppc/vm/os_linux_ppc.cpp:437\n#5  0x00003fffa524b7dc in signalHandler (sig=<optimized out>, info=<optimized out>, uc=<optimized out>)\n    at /usr/src/debug/java-1.7.0-openjdk-1.7.0.79-2.5.5.1.ael7b_1.ppc64le/openjdk/hotspot/src/os/linux/vm/os_linux.cpp:4361\n#6  <signal handler called>\n\n#7  NativeTask::WritableUtils::ReadVLongInner (pos=0x3fff89dd0000 <Address 0x3fff89dd0000 out of bounds>, len=@0x3fff84f9d310: 4294967184)\n    at /home/reixt/HADOOP-2.7.0/hadoop-FromApache-Trunk-201504241115/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/util/WritableUtils.cc:68\n                value = (value << 8) | *(uint8_t*)pos;\n\n#8  0x00003fff853d7ebc in ReadVLong (len=<optimized out>, pos=<optimized out>)\n    at /home/reixt/HADOOP-2.7.0/hadoop-FromApache-Trunk-201504241115/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/util/WritableUtils.h:64\n                 return ReadVLongInner(pos, len);\n\n#9  ReadVInt (len=<optimized out>, pos=<optimized out>)\n    at /home/reixt/HADOOP-2.7.0/hadoop-FromApache-Trunk-201504241115/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/util/WritableUtils.h:69\n          inline static int32_t ReadVInt(const char * pos, uint32_t & len) {\n                return (int32_t)ReadVLong(pos, len);\n\n#10 nextKey (keyLen=@0x3fff89b75518: 0, this=0x3fff89b8dbe0)\n    at /home/reixt/HADOOP-2.7.0/hadoop-FromApache-Trunk-201504241115/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/lib/IFile.h:74\n\n const char * nextKey(uint32_t & keyLen) {\n    int64_t t1 = _reader.readVLong();\n    int64_t t2 = _reader.readVLong();\n    if (t1 == -1) {\n      return NULL;\n    }\n    const char * kvbuff = _reader.get((uint32_t)(t1 + t2));\n    uint32_t len;\n    switch (_kType) {\n    case TextType:\n        keyLen = WritableUtils::ReadVInt(kvbuff, len);  <---------------\n\n#11 NativeTask::IFileMergeEntry::next (this=0x3fff89b75500)\n    at /home/reixt/HADOOP-2.7.0/hadoop-FromApache-Trunk-201504241115/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/lib/Merge.h:211\n          virtual bool next() {\n    _key = _reader->nextKey(_keyLength);        <---------------\n\n#12 0x00003fff853d7774 in NativeTask::Merger::initHeap (this=0x3fff89b8db40)\n    at /home/reixt/HADOOP-2.7.0/hadoop-FromApache-Trunk-201504241115/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/lib/Merge.cc:83\n\n....\n\n\nTraces have been added in:\n- src/main/native/src/lib/IFile.h\n  const char * nextKey(uint32_t & keyLen) {\n    int64_t t1 = _reader.readVLong();\n    int64_t t2 = _reader.readVLong();\n    if (t1 == -1) {\n      return NULL;\n    }\n    const char * kvbuff = _reader.get((uint32_t)(t1 + t2));\n    uint32_t len;\n    switch (_kType) {\n    case TextType:\nstd::cout << \"nextKey 0 t1: \" << t1 << std::endl ;\nstd::cout << \"nextKey 0 t2: \" << t2 << std::endl ;\nstd::cout << \"nextKey 1 t12: \" << t1+t2 << std::endl ;\nstd::cout << \"nextKey 2 t12: \" << (uint32_t)(t1+t2) << std::endl ;\n      keyLen = WritableUtils::ReadVInt(kvbuff, len);\n      break;\n- src/main/native/src/util/WritableUtils.c\nint64_t WritableUtils::ReadVLongInner(const char * pos, uint32_t & len) {\nstd::cout << \"0 &pos: \" << &pos << std::endl ;\nstd::cout << \"1  pos: \" <<  pos << std::endl ;\nstd::cout << \"2 *pos: \" << *pos << std::endl ;\nstd::cout << \"2 (hex)*pos: \" << std::hex << (int) *pos << std::dec << std::endl ;\nstd::cout << \"2 (int)*pos: \" << (int)*pos << std::endl ;\nstd::cout << \"2 (int64_t)*pos: \" << (int64_t)*pos << std::endl ;\n  bool neg = *pos < -120;\nstd::cout << \"3  neg: \" << neg << std::endl ;\n  len = neg ? (-119 - *pos) : (-111 - *pos);\nstd::cout << \"4  len: \" << len << std::endl ;\n  const char * end = pos + len;\nstd::cout << \"5  end: \" << end << std::endl ;\n  int64_t value = 0;\n  while (++pos < end) {\n    value = (value << 8) | *(uint8_t*)pos;\n  }\n  return neg ? (value ^ -1LL) : value;\n}\n\n\nWith the above added traces, output is:\nnextKey 0 t1: 2\nnextKey 0 t2: 8\nnextKey 1 t12: 10\nnextKey 2 t12: 10\n0 &pos: 0x3fff80e2d2b0\n1  pos: ^A ��X~\\~Egv^B^H^...........8d\\x19\\xb2P~\\\n2 *pos: ^A\n2 (int)*pos: 1\n2 (int64_t)*pos: 1\n3  neg: 0\n4  len: 4294967184\n\n\nOn x86_64, I have (with same traces):\n......\n15/04/29 14:28:49 INFO Mid-spill: { id: 4, collect: 183 ms, in-memory sort: 13 ms, in-memory records: 48288, merge&spill: 49 ms, uncompressed size: 5030953, real size: 3742238 path: /tmp/hadoop-reixt/mapred/local/localRunner/reixt/jobcache/job_local2085218591_0015/attempt_local2085218591_0015_m_000000_0/output/spill4.out }\nnextKey 0 t1: 2\nnextKey 0 t2: 8\nnextKey 1 t12: 10\nnextKey 2 t12: 10\nnextKey 0 t1: 2\nnextKey 0 t2: 8\nnextKey 1 t12: 10\nnextKey 2 t12: 10\nnextKey 0 t1: 2\nnextKey 0 t2: 8\nnextKey 1 t12: 10\nnextKey 2 t12: 10\nnextKey 0 t1: 2\nnextKey 0 t2: 8\nnextKey 1 t12: 10\nnextKey 2 t12: 10\nnextKey 0 t1: 2\nnextKey 0 t2: 8\nnextKey 1 t12: 10\nnextKey 2 t12: 10\nnextKey 0 t1: 2\nnextKey 0 t2: 8\nnextKey 1 t12: 10\nnextKey 2 t12: 10\nnextKey 0 t1: 2\nnextKey 0 t2: 8\nnextKey 1 t12: 10\nnextKey 2 t12: 10\nnextKey 0 t1: 2\nnextKey 0 t2: 8\nnextKey 1 t12: 10\nnextKey 2 t12: 10\nnextKey 0 t1: 2\nnextKey 0 t2: 8\nnextKey 1 t12: 10\nnextKey 2 t12: 10\nnextKey 0 t1: 2\nnextKey 0 t2: 8\nnextKey 1 t12: 10\nnextKey 2 t12: 10\nnextKey 0 t1: 173\nnextKey 0 t2: 8\nnextKey 1 t12: 181\nnextKey 2 t12: 181\n0 &pos: 0x7fd5186f0098\n1  pos: ?? \"`\\xcc\\xe0\\xa4\\x85........\n2 *pos: ?\n2 (hex)*pos: ffffff8f\n2 (int)*pos: -113\n2 (int64_t)*pos: -113\n3  neg: 0\n4  len: 2\n5  end:  \"`\\xcc\\xe0\\xa4\\x85\\xc4r\\xb1........\nnextKey 0 t1: 2\nnextKey 0 t2: 8\nnextKey 1 t12: 10\nnextKey 2 t12: 10\nnextKey 0 t1: 2\nnextKey 0 t2: 8\nnextKey 1 t12: 10\nnextKey 2 t12: 10\nnextKey 0 t1: 166\nnextKey 0 t2: 8\nnextKey 1 t12: 174\nnextKey 2 t12: 174\n0 &pos: 0x7fd5186f0098\n1  pos: ??  \\x1a\\x16c\\x17\\xca\\x83\\xdeN\\xd0w9;C0........\n2 *pos: ?\n2 (hex)*pos: ffffff8f\n2 (int)*pos: -113\n2 (int64_t)*pos: -113\n3  neg: 0\n4  len: 2\n5  end:   \\x1a\\x16c\\x17\\xca\\x83\\xdeN\\xd0w9;C0........\n\nSo, on PPC64LE, pos is 1 instead of -113, generating a \"negative\" very big length (2^32-1)-111 = 4294967184 instead of  (-111 - *pos) = (-111 - (-113)) = 2 .\n\nSo, why *pos = 1 on PPC64LE instead of *pos = -113 on x86_64 ?\n\nI need help for adding more tracing.\n\nInterestingly, launching the Java command shown by \"Forking ...\" does not generate the crash.\nThe crash only appears when using \"mvn\".\nSo adding traces seems to me the easier way for getting more date.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-29T13:32:02.303+0000","updated":"2015-04-29T13:32:02.303+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/14521138","id":"14521138","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"body":"In short: I'd like to receive some help by experts of this code in order to quickly understand what is the root cause of this crash.\nIt looks that the crash appears long time after a bug has corrupted data, when reading data. And I have no idea about what this test is aimed to test and how it does it and what is the code to look at.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-30T08:38:34.907+0000","updated":"2015-04-30T08:38:34.907+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/14521147","id":"14521147","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"body":"All these tests seem to crash:\norg.apache.hadoop.mapred.nativetask.kvtest.KVTest\norg.apache.hadoop.mapred.nativetask.kvtest.LargeKVTest\norg.apache.hadoop.mapred.nativetask.compresstest.CompressTest\norg.apache.hadoop.mapred.nativetask.nonsorttest.NonSortTest\norg.apache.hadoop.mapred.nativetask.combinertest.OldAPICombinerTest\norg.apache.hadoop.mapred.nativetask.combinertest.CombinerTest\norg.apache.hadoop.mapred.nativetask.combinertest.LargeKVCombinerTest\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"created":"2015-04-30T08:46:30.440+0000","updated":"2015-04-30T08:46:30.440+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/14539868","id":"14539868","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"body":"All these tests seem to crash:\norg.apache.hadoop.mapred.nativetask.kvtest.KVTest\norg.apache.hadoop.mapred.nativetask.kvtest.LargeKVTest\norg.apache.hadoop.mapred.nativetask.compresstest.CompressTest\norg.apache.hadoop.mapred.nativetask.nonsorttest.NonSortTest\norg.apache.hadoop.mapred.nativetask.combinertest.OldAPICombinerTest\norg.apache.hadoop.mapred.nativetask.combinertest.CombinerTest\norg.apache.hadoop.mapred.nativetask.combinertest.LargeKVCombinerTest\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-12T14:18:35.471+0000","updated":"2015-05-12T14:18:35.471+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/14539869","id":"14539869","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"body":"In short: I'd like to receive some help by experts of this code in order to quickly understand what is the root cause of this crash.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-12T14:19:33.134+0000","updated":"2015-05-12T14:19:33.134+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/14556043","id":"14556043","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"body":"Mandotory patches for Hadoop on PPC64LE :\nHADOOP-11505.001.patch\nMAPREDUCE-6241.002.patch\n\nIssue is still there with yesterday's Hadoop trunk version. Still investigating.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-22T12:07:40.448+0000","updated":"2015-05-22T12:07:40.448+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/14556121","id":"14556121","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"body":"Here is a more complete trace file, with details before the crash.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-22T13:14:56.486+0000","updated":"2015-05-22T13:14:56.486+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/14556123","id":"14556123","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"body":"The crash appears when code is reading data that was built BEFORE.\nThus, it seems very complex to understand where data were corrupted before.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-22T13:16:06.179+0000","updated":"2015-05-22T13:16:06.179+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/14556164","id":"14556164","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"body":"It is trunk. Not 2.7.1 . Changed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-22T13:48:23.561+0000","updated":"2015-05-22T13:48:23.561+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/14557945","id":"14557945","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=decster","name":"decster","key":"decster","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Binglin Chang","active":true,"timeZone":"Asia/Shanghai"},"body":"Sorry for the late reply, from the bug descriptions, I suspect this is bigendian/littleendian or unaligned memory access issue. \nNot sure how PPC64LE handles unaligned memory access. I don't have a PPC64LE env, \nlooks like the crash occours when doing final merge & spill, basically mapper write mid-spill files, and read them to do merge at last, so could you diff the generatered mid-spill files to see if they are the same? If not, trace the IFile writing code?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=decster","name":"decster","key":"decster","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Binglin Chang","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-05-25T03:36:31.532+0000","updated":"2015-05-25T03:36:31.532+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/14559111","id":"14559111","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"body":"Hi Binglin, Thanks for answering !\nAbout BigEndian/LittleEndian, I'm now using RHEL7.1 on PPC64LE : Little Endian. So, there should not be an issue about this.\nAbout unaligned memory access, BLOCK_SIZE on PPC64LE is not 4096. So it may have an impact. Or it is something else.\nYes, it looks like something is corrupted at creation and generates the crash late, when reading and merging, long time after the issue appeared.\nThanks for the suggestions for finding the root cause: it is what I need, since the code is over-complicated for me.\nSince I have very few understanding of this code, I'm interested with detailed/precise suggestions and instructions about what to trace and where in the code. Would you mind indicating me where it would be useful to add trace instructions ? so that you or other experts of this could more easily locate the issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-26T13:49:21.362+0000","updated":"2015-05-26T13:49:21.362+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/14559195","id":"14559195","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=decster","name":"decster","key":"decster","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Binglin Chang","active":true,"timeZone":"Asia/Shanghai"},"body":"See the TR file you uploaded:\n{noformat}\n15/05/22 08:05:33 INFO Native Total MemoryBlockPool: num_partitions 1, min_block_size 1280K, max_block_size 4096K, capacity 5M\n15/05/22 08:05:34 INFO Mid-spill: { id: 0, collect: 1013 ms, in-memory sort: 36 ms, in-memory records: 262144, merge&spill: 80 ms, uncompressed size: 3670018, real size: 3523082 path: /tmp/hadoop-reixt/mapred/local/localRunner/reixt/jobcache/job_local739893329_0006/attempt_local739893329_0006_m_000000_0/output/spill0.out }\n15/05/22 08:05:35 INFO Mid-spill: { id: 1, collect: 975 ms, in-memory sort: 36 ms, in-memory records: 262144, merge&spill: 80 ms, uncompressed size: 3670018, real size: 3523317 path: /tmp/hadoop-reixt/mapred/local/localRunner/reixt/jobcache/job_local739893329_0006/attempt_local739893329_0006_m_000000_0/output/spill1.out }\n15/05/22 08:05:36 INFO Mid-spill: { id: 2, collect: 978 ms, in-memory sort: 36 ms, in-memory records: 262144, merge&spill: 80 ms, uncompressed size: 3670018, real size: 3523469 path: /tmp/hadoop-reixt/mapred/local/localRunner/reixt/jobcache/job_local739893329_0006/attempt_local739893329_0006_m_000000_0/output/spill2.out }\nMapOutputCollector::finalSpill 0 \nMapOutputCollector::finalSpill 1 IFileWriter::create:filepath        :/tmp/hadoop-reixt/mapred/local/localRunner/reixt/jobcache/job_local739893329_0006/attempt_local739893329_0006_m_000000_0/output/file.out\n{noformat}\nthe files spill0.out, spill1.out, spill2.out are input files for merge(previously written by , so could you stop the process when merge starts, and compare those files with x86_64 env, to see if they are the same? \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=decster","name":"decster","key":"decster","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Binglin Chang","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-05-26T14:47:11.235+0000","updated":"2015-05-26T14:47:11.235+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/14559247","id":"14559247","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"body":"Hi Binglin,\nI can see those spill*.out files on my PPC64LE machine. I guess that the clean step has not been executed since the process crashed before. All files are different.\nOn x86_64, these files do not appear. Probably that they have been removed by test.\n\nDo you confirm that these files are supposed to be the same whatever the architecture of the test machine ?\n\nWhere do you suggest me to stop the merge on x86_64 ?\nIn: src/main/native/src/lib/Merge.cc ?\nAt beg of void Merger::merge() ?\n\nThx","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-26T15:30:31.066+0000","updated":"2015-05-26T15:30:31.066+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/14560437","id":"14560437","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=decster","name":"decster","key":"decster","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Binglin Chang","active":true,"timeZone":"Asia/Shanghai"},"body":"Yes, that should work ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=decster","name":"decster","key":"decster","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Binglin Chang","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-05-27T05:33:28.757+0000","updated":"2015-05-27T05:33:28.757+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/15937963","id":"15937963","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Sonia","name":"Sonia","key":"sonia","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sonia Garudi","active":true,"timeZone":"Etc/UTC"},"body":"[~trex58] , have you resolved this issue yet? I am facing the same error in the tests mentioned by you. \nHere are my environment details:\nUbuntu 14.04 ppc64le \n$ java -version\nopenjdk version \"1.8.0_111\"\nOpenJDK Runtime Environment (build 1.8.0_111-8u111-b14-3~14.04.1-b14)\n\nBelow is the error i got :\n{code:borderStyle=solid}\n#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00003fff6f5b2e60, pid=10468, tid=0x00003fff6e30f1a0\n#\n# JRE version: OpenJDK Runtime Environment (8.0_111-b14) (build 1.8.0_111-8u111-b14-3~14.04.1-b14)\n# Java VM: OpenJDK 64-Bit Server VM (25.111-b14 mixed mode linux-ppc64 compressed oops)\n# Problematic frame:\n# C  [libnativetask.so.1.0.0+0x52e60]  NativeTask::WritableUtils::ReadVLongInner(char const*, unsigned int&)+0x40\n#\n# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try \"ulimit -c unlimited\" before starting Java again\n#\n# An error report file with more information is saved as:\n# /var/lib/jenkins/workspace/hadoop-master/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/hs_err_pid10468.log\n#\n{code}\n\nIn the hs_err_pid10468.log file , I found the following trace :\n{code:borderStyle=solid}\nEvent: 2.745 Thread 0x00003fff9000a000 Exception <a 'java/lang/ClassNotFoundException': org/apache/commons/configuration2/PropertiesConfigurationCustomizer> (0x00000000d7f19f40) thrown at [/build/openjdk-8-fVIxxI/openjdk-8-8u111-b14/src/hotspot/src/share/vm/classfile/systemDictionary.cpp, line\n{code}\nHowever, I am not sure whether this is related to the test failures. \n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Sonia","name":"Sonia","key":"sonia","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sonia Garudi","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-23T09:09:16.404+0000","updated":"2017-03-23T09:09:16.404+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/16010378","id":"16010378","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"body":"Hi Sonia,\nI no more work in this area. I'm trying to assign this defect to someone.\nRegards","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"created":"2017-05-15T11:50:11.834+0000","updated":"2017-05-15T11:50:11.834+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/16010694","id":"16010694","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"body":"Please assign this to Ayappan ( jira ID).\nThx","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trex58","name":"trex58","key":"trex58","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tony Reix","active":true,"timeZone":"Etc/UTC"},"created":"2017-05-15T15:23:10.014+0000","updated":"2017-05-15T15:23:10.014+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/16010707","id":"16010707","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haibochen","name":"haibochen","key":"haibochen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haibo Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"I have added Ayappan as a contributor and reassigned this jira per your request.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haibochen","name":"haibochen","key":"haibochen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haibo Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-05-15T15:28:14.554+0000","updated":"2017-05-15T15:28:14.554+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/16011934","id":"16011934","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ayappan","name":"Ayappan","key":"ayappan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ayappan","active":true,"timeZone":"Asia/Kolkata"},"body":"This issue is same as MAPREDUCE-6459. The latest patch attached with that jira fixes the issue in platforms where the default is unsigned char.\nPlease do the needful. Thanks\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Ayappan","name":"Ayappan","key":"ayappan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ayappan","active":true,"timeZone":"Asia/Kolkata"},"created":"2017-05-16T07:56:19.818+0000","updated":"2017-05-16T07:56:19.818+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12825945/comment/16012603","id":"16012603","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haibochen","name":"haibochen","key":"haibochen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haibo Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"Ok. I am going to close this a duplicate then, since [~Ayappan]/[~trex58] confirmed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=haibochen","name":"haibochen","key":"haibochen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haibo Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-05-16T15:42:03.258+0000","updated":"2017-05-16T15:42:03.258+0000"}],"maxResults":20,"total":20,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-6346/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2e2w7:"}}