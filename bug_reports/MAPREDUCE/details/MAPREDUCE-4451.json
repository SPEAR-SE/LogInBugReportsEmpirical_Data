{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12599098","self":"https://issues.apache.org/jira/rest/api/2/issue/12599098","key":"MAPREDUCE-4451","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321661","id":"12321661","description":"1.2.0 release","name":"1.2.0","archived":false,"released":true,"releaseDate":"2013-05-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-08-22T20:54:27.846+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed May 15 05:16:14 UTC 2013","customfield_12310420":"241702","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_10305133_*|*_1_*:*_2_*:*_7461004053_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-10-11T21:56:02.566+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-4451/watchers","watchCount":11,"isWatching":false},"created":"2012-07-17T10:34:13.401+0000","customfield_12310192":"Using FairScheduler with security configured, job initialization fails. The problem is that threads in JobInitializer runs as RPC user instead of jobtracker, pre-start all the threads fix this bug","customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320250","id":"12320250","description":"maintenance release on branch-1.0","name":"1.0.3","archived":false,"released":true,"releaseDate":"2012-05-07"}],"issuelinks":[{"id":"12359230","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12359230","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12597553","key":"MAPREDUCE-4398","self":"https://issues.apache.org/jira/rest/api/2/issue/12597553","fields":{"summary":"Fix mapred.system.dir permission error with FairScheduler","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12359231","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12359231","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12532617","key":"MAPREDUCE-3470","self":"https://issues.apache.org/jira/rest/api/2/issue/12532617","fields":{"summary":"Jobtracker sets permissions on mapred.system.dir to 700 preventing non-superusers from submitting jobs to multi-user cluster","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-15T05:16:14.368+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312901","id":"12312901","name":"contrib/fair-share"}],"timeoriginalestimate":null,"description":"Using FairScheduler in Hadoop 1.0.3 with kerberos authentication configured. Job initialization fails:\n\n{code}\n2012-07-17 15:15:09,220 ERROR org.apache.hadoop.mapred.JobTracker: Job initialization failed:\njava.io.IOException: Call to /192.168.7.80:8020 failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]\n        at org.apache.hadoop.ipc.Client.wrapException(Client.java:1129)\n        at org.apache.hadoop.ipc.Client.call(Client.java:1097)\n        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:229)\n        at $Proxy7.getProtocolVersion(Unknown Source)\n        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:411)\n        at org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:125)\n        at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:329)\n        at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:294)\n        at org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:100)\n        at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1411)\n        at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:66)\n        at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1429)\n        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:254)\n        at org.apache.hadoop.fs.Path.getFileSystem(Path.java:187)\n        at org.apache.hadoop.security.Credentials.writeTokenStorageFile(Credentials.java:169)\n        at org.apache.hadoop.mapred.JobInProgress.generateAndStoreTokens(JobInProgress.java:3558)\n        at org.apache.hadoop.mapred.JobInProgress.initTasks(JobInProgress.java:696)\n        at org.apache.hadoop.mapred.JobTracker.initJob(JobTracker.java:3911)\n        at org.apache.hadoop.mapred.FairScheduler$JobInitializer$InitJob.run(FairScheduler.java:301)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n        at java.lang.Thread.run(Thread.java:662)\nCaused by: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]\n        at org.apache.hadoop.ipc.Client$Connection$1.run(Client.java:543)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:396)\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1136)\n        at org.apache.hadoop.ipc.Client$Connection.handleSaslConnectionFailure(Client.java:488)\n        at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:590)\n        at org.apache.hadoop.ipc.Client$Connection.access$2100(Client.java:187)\n        at org.apache.hadoop.ipc.Client.getConnection(Client.java:1228)\n        at org.apache.hadoop.ipc.Client.call(Client.java:1072)\n        ... 20 more\nCaused by: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]\n        at com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(GssKrb5Client.java:194)\n        at org.apache.hadoop.security.SaslRpcClient.saslConnect(SaslRpcClient.java:134)\n        at org.apache.hadoop.ipc.Client$Connection.setupSaslConnection(Client.java:385)\n        at org.apache.hadoop.ipc.Client$Connection.access$1200(Client.java:187)\n        at org.apache.hadoop.ipc.Client$Connection$2.run(Client.java:583)\n        at org.apache.hadoop.ipc.Client$Connection$2.run(Client.java:580)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:396)\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1136)\n        at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:579)\n        ... 23 more\nCaused by: GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)\n        at sun.security.jgss.krb5.Krb5InitCredential.getInstance(Krb5InitCredential.java:130)\n        at sun.security.jgss.krb5.Krb5MechFactory.getCredentialElement(Krb5MechFactory.java:106)\n        at sun.security.jgss.krb5.Krb5MechFactory.getMechanismContext(Krb5MechFactory.java:172)\n        at sun.security.jgss.GSSManagerImpl.getMechanismContext(GSSManagerImpl.java:209)\n        at sun.security.jgss.GSSContextImpl.initSecContext(GSSContextImpl.java:195)\n        at sun.security.jgss.GSSContextImpl.initSecContext(GSSContextImpl.java:162)\n        at com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(GssKrb5Client.java:175)\n        ... 32 more\n\n{code}\n\nWhen a job is submitted, fairscheduler calls JobTracker.initJob, which calls JobInProgress.generateAndStoreTokens to write security keys to hdfs. However, the operation is involved in the server side rpc call path, using UGI created by UserGroupInformation.createRemoteUser in rpc server, which have no tgt. This should be done with UGI used by JobTracker.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321661","id":"12321661","description":"1.2.0 release","name":"1.2.0","archived":false,"released":true,"releaseDate":"2013-05-13"}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12546539","id":"12546539","filename":"MAPREDUCE-4451_branch-1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-09-25T16:39:27.150+0000","size":1849,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12546539/MAPREDUCE-4451_branch-1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12543140","id":"12543140","filename":"MAPREDUCE-4451_branch-1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-08-30T18:53:55.171+0000","size":1537,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12543140/MAPREDUCE-4451_branch-1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12542437","id":"12542437","filename":"MAPREDUCE-4451_branch-1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-08-26T03:32:40.085+0000","size":3183,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12542437/MAPREDUCE-4451_branch-1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12542284","id":"12542284","filename":"MAPREDUCE-4451_branch-1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-08-24T15:00:32.635+0000","size":3017,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12542284/MAPREDUCE-4451_branch-1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12536800","id":"12536800","filename":"MAPREDUCE-4451_branch-1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-07-17T10:40:15.590+0000","size":2434,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12536800/MAPREDUCE-4451_branch-1.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"11412","customfield_12312823":null,"summary":"fairscheduler fail to init job with kerberos authentication configured","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13416072","id":"13416072","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"body":"This Patch is for branch-1\n\nThis can be fixed by MAPREDUCE-3206, however. we'd better fix the problem introduced by fairscheduler in fairscheduler. I port the code in EagerTaskInitializationListener to seperate job initialization from RPC call path. It works in my cluster.\nAny comments or suggestion is appreciated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-07-17T10:40:15.654+0000","updated":"2012-07-17T10:40:15.654+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13439832","id":"13439832","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"body":"Thanks for the patch, Eric.\n\nI have the following minor comments:\n- Use {{jobInitManagerThread}} instead of {{JobInitManagerThread}} (field name starting with lower case)\n- In {{initJob()}}, we should probably use {{jobInitQueue.notify()}} instead of {{jobInitQueue.notifyAll()}}. It shouldn't be a problem in the current implementation. Should anyone use more job init threads later, only one of them should be notified.\n- In {terminate()}:\n-- Log a warning if the {{jobInitQueue}} is not empty.\n-- Clear the {{jobInitQueue}}.\n-- Not particular on this as it shouldn't affect functionality: we should probably add a {{jobInitManagerThread.join(TIMEOUT)}} in {{terminate()}} for proper clean up.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-08-22T20:54:27.846+0000","updated":"2012-08-22T20:54:27.846+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13441228","id":"13441228","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"body":"Hi Karthik,\n\nThanks for taking a look!\n\nHere's an updated patch address all your comments\n\nThanks,\nErik","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-08-24T15:00:32.637+0000","updated":"2012-08-24T15:00:32.637+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13441362","id":"13441362","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"body":"Thanks Erik. The patch looks mostly good.\n\nJust a couple of minor nits:\n- Can we add a timeout to the {{jobInitManagerThread.join()}}, just like the timeout on {{awaitTermination()}}. I am just wary of the terminate hanging because the JobInitManager didn't close. For that case, we can may be log a warning?\n- For the jobInitQueue not empty warning, can we add more information - \"Terminating FairScheduler even when the jobInitQueue is not empty\"?\n\nOtherwise, it should be good to go.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-08-24T18:26:50.652+0000","updated":"2012-08-24T18:26:50.652+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13442015","id":"13442015","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"body":"Hi Karthik,\n\nI've uploaded a new patch fixed all the nits:\n- add 1 sec timeout to join\n- log a warning if JobInitManager didn't close\n- fix jobInitQueue not empty warning message\n\nThanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-08-26T03:32:40.087+0000","updated":"2012-08-26T03:32:40.087+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13442523","id":"13442523","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"body":"Looks good to me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-08-27T16:57:12.729+0000","updated":"2012-08-27T16:57:12.729+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13442717","id":"13442717","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"body":"Why not using a ThreadPoolExecutor? I.e.:\n\n{code}\n        BlockingQueue<Runnable> queue = new ArrayBlockingQueue<Runnable>(MAX_QUEUE_SIZE);\n        executor = new ThreadPoolExecutor(MAX_THEADS, MAX_THREADS, 10, TimeUnit.SECONDS, queue);\n{code}\n\nThis will get rid of the JobInitMananager innerclass and the notify() calls. in the JobInitializer.\n\nJust be aware of the following trick you'll have to do together with the initialization of the executor.\n\n{code}\n        // IMPORTANT: The ThreadPoolExecutor does not always the execute\n        // commands out of the queue, there are\n        // certain conditions where commands are pushed directly to a thread.\n        // As we are using a queue with DELAYED semantics (i.e. execute the\n        // command in 5 mins) we need to make\n        // sure that the commands are always pushed to the queue.\n        // To achieve this (by looking a the ThreadPoolExecutor.execute()\n        // implementation, we are making the pool\n        // minimum size equals to the maximum size (thus threads are keep always\n        // running) and we are warming up\n        // all those threads (the for loop that runs dummy runnables).\n        for (int i = 0; i < threads; i++) {\n            executor.execute(new Runnable() {\n                public void run() {\n                    try {\n                        Thread.sleep(100);\n                    }\n                    catch (InterruptedException ex) {\n                        log.warn(\"Could not warm up threadpool {0}\", ex.getMessage(), ex);\n                    }\n                }\n            });\n        }\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"created":"2012-08-27T21:02:04.358+0000","updated":"2012-08-27T21:02:04.358+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13445191","id":"13445191","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"body":"Hi Alejandro,\nUsing a Blocking Queue and ThreadPoolExecutor can do the same job, while I mostly ported the codes in EagerTaskInitializationListener used by early version of fairscheduler.\n\nInspired by your comment, I look at the implementation of ThreadPoolExecutor.execute(), and find the root cause.\nThe main problem is where the threads in ThreadPoolExecutor created. When a new job arrives, threadPool.execute(new InitJob(jobInfo, job)) is called. If there is less than corePoolSize threads in the threadPool, a new thread is created ( in ThreadPoolExecutor.addIfUnderCorePoolSize() ), which is in the UGI.doAs() block as the RPC client remote user.\nSo we just warm up all the threads in the pool, using threadPool.prestartAllCoreThreads().\n\nThis can be easily demonstrated:\n{code} \npublic class testthreadpool {\n\tThreadPoolExecutor threadPool;\n\tUserGroupInformation u1;\n\tUserGroupInformation u2;\n\n\tclass task implements Runnable {\n\t\t@Override\n\t\tpublic void run() {\n\t\t\ttry {\n\t\t\t\tUserGroupInformation u = UserGroupInformation.getCurrentUser();\n\t\t\t\tSystem.out.println(u.getUserName());\n\t\t\t} catch (IOException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t}\n\t}\n\tpublic void init() throws IOException {\t\n\t\tu1 = UserGroupInformation.getCurrentUser();\n\t\tu2= UserGroupInformation.createRemoteUser(\"tony\");\t\n\t\tthreadPool = (ThreadPoolExecutor) Executors.newFixedThreadPool(1);\n\t\tthreadPool.prestartAllCoreThreads();\n\t}\n\tpublic void dowork() throws IOException, InterruptedException {\n\t\tu2.doAs(new PrivilegedExceptionAction<Object>() {\n\t\t\tpublic Object run() throws Exception {\n\t\t\t\tthreadPool.execute(new task());\n\t\t\t\treturn null;\n\t\t\t}\t\t\t\n\t\t});\n\t}\n\tpublic void done() {\n\t\tthreadPool.shutdown();\n\t}\n\tpublic static void main(String[] args) throws IOException, InterruptedException {\n\t\ttestthreadpool t = new testthreadpool();\n\t\tt.init();\n\t\tt.dowork();\n\t\tt.done();\n\t}\n}\n{code} \nthe result is \"erik\"\ncomment threadPool.prestartAllCoreThreads(), and we got \"tony\"\n\nnew Patch uploaded\n\nThanks,\nErik","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-08-30T18:53:55.172+0000","updated":"2012-08-30T18:53:55.172+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13462005","id":"13462005","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"body":"Hi Eric,\n\nThanks for re-visiting the patch, and sorry I couldn't get to this earlier. \n\nNice find on the behavior of {{ThreadPoolExecutor.execute()}} when threads are not pre-started. As the behavior might not be common knowledge, I have the following nits:\n# Add a comment before {{threadPool.prestartAllCoreThreads()}} to the effect of - Pre-starting all threads to ensure the threads are executed as JobTracker instead of the user initing the job.\n# Add a check {{threadPool.prestartAllCoreThreads() == numThreads}}, and throw an Exception if the check fails - otherwise, it would be hard to debug this\n\nOther than that, the patch looks good to go. Thanks to both Alejandro and you for this informative conversation.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-09-24T18:59:07.932+0000","updated":"2012-09-24T18:59:07.932+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13462935","id":"13462935","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"body":"Thanks Karthik,\n\nnew patch attached, add comment and pre-start threads check","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-09-25T16:39:27.152+0000","updated":"2012-09-25T16:39:27.152+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13463007","id":"13463007","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-09-25T17:27:28.264+0000","updated":"2012-09-25T17:27:28.264+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13463499","id":"13463499","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12546539/MAPREDUCE-4451_branch-1.patch\n  against trunk revision .\n\n    {color:red}-1 patch{color}.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/2881//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2012-09-26T03:52:35.518+0000","updated":"2012-09-26T03:52:35.518+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13463881","id":"13463881","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"body":"Erik, you can run src/test/bin/test-patch.sh manually and post the result.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"created":"2012-09-26T15:07:17.714+0000","updated":"2012-09-26T15:07:17.714+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13463980","id":"13463980","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"body":"Thanks for your suggestion, Kihwal\n\nManually ran test-patch.sh against branch-1\n{code}\n-1 overall.  \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no tests are needed for this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    -1 findbugs.  The patch appears to introduce 8 new Findbugs (version 1.3.9) warnings.\n{code}\n\n- tests: test not include because no behavior changed and no new function added\n- findbugs: these warnings is not actually introduced by this patch\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-09-26T17:46:26.045+0000","updated":"2012-09-26T17:46:26.045+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13463997","id":"13463997","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"body":"bq. tests: test not include because no behavior changed and no new function added\n\nI think the behavior has indeed changed, from wrong to right. A test in this case would prevent relapsing to the old behavior. However, I understand writing a test might prove to be hard in this case.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-09-26T18:00:56.534+0000","updated":"2012-09-26T18:00:56.534+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13469810","id":"13469810","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"body":"Erik, was not aware of the prestartAllCoreThreads() method, nice.\n\nI think I was not clear explaining the use of ThreadPoolExecutor, it would be something like this:\n\nINITIALIZATION:\n  queue = new LinkedBlockingQueue<Runnable> ();\n  threadPool = new ThreadPoolExecutor(numThreads, numThreads, 0L, TimeUnit.MILLISECONDS, queue);\n\nINITJOB:\n  queue.queue(new InitJob(jobInfo, job));\n\nThen you can queue more InitJobs that threads you have without blocking at INITJOB\n\nThx","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"created":"2012-10-04T22:54:53.741+0000","updated":"2012-10-04T22:54:53.741+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13469816","id":"13469816","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"body":"Please ignore my last comment, I was wrong there, how you are doing things is correct.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"created":"2012-10-04T23:08:39.888+0000","updated":"2012-10-04T23:08:39.888+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13473076","id":"13473076","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"body":"Given that the patch doesn't have tests, I was planning on running a secure cluster to ascertain the behavior, but haven't been able to get to it.\n\nWill you be able to validate the behavior and report the same? Otherwise, I ll see if I can do the same in the next couple of days?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-10-10T08:03:18.589+0000","updated":"2012-10-10T08:03:18.589+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13473090","id":"13473090","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"body":"Before upload the patch ,I have tested it in a 4-node dev-cluster with hadoop-1.0.3 to make sure it works. Maybe it is better to validate the patch with branch-1 compiled jars. I can do it today or tomorrow, and post the result.\n\nHowever, I can only post some jobtracker logs to show that job initialization fails before apply the patch and every thing works fine after apply the patch. Is that enough or any other ideas?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-10-10T08:32:08.984+0000","updated":"2012-10-10T08:32:08.984+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13473495","id":"13473495","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"body":"Thanks Erik. In my opinion, that should be good enough.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-10-10T19:33:08.110+0000","updated":"2012-10-10T19:33:08.110+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13473956","id":"13473956","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"body":"validate the patch with branch-1 revision 1396925\n\nFirst compile with \"ant package\", deploy hadoop-core-1.2.0-SNAPSHOT.jar and hadoop-fairscheduler-1.2.0-SNAPSHOT.jar to a 4-node cluster with security on.\nrun wordcount, job initialization fails. logs from jobtracker\n{code} \n2012-10-11 15:50:35,305 INFO org.apache.hadoop.mapred.JobInProgress: job_201210111545_0001: nMaps=5 nReduces=1 max=-1\n2012-10-11 15:50:35,425 INFO org.apache.hadoop.mapred.JobTracker: Initializing job_201210111545_0001\n2012-10-11 15:50:35,425 INFO org.apache.hadoop.mapred.JobTracker: Job job_201210111545_0001 added successfully for user 'hadoop' to queue 'default'\n2012-10-11 15:50:35,425 INFO org.apache.hadoop.mapred.JobInProgress: Initializing job_201210111545_0001\n2012-10-11 15:50:35,427 INFO org.apache.hadoop.mapred.AuditLogger: USER=hadoop\tIP=192.168.7.80\tOPERATION=SUBMIT_JOB\tTARGET=job_201210111545_0001\tRESULT=SUCCESS\n2012-10-11 15:50:35,601 ERROR org.apache.hadoop.security.UserGroupInformation: PriviledgedActionException as:hadoop@DIANPING.COM cause:javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]\n2012-10-11 15:50:35,602 WARN org.apache.hadoop.ipc.Client: Exception encountered while connecting to the server : javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]\n2012-10-11 15:50:35,602 ERROR org.apache.hadoop.security.UserGroupInformation: PriviledgedActionException as:hadoop@DIANPING.COM cause:java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]\n2012-10-11 15:50:35,603 ERROR org.apache.hadoop.mapred.JobTracker: Job initialization failed:\njava.io.IOException: Call to /192.168.7.80:8020 failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]\n\tat org.apache.hadoop.ipc.Client.wrapException(Client.java:1129)\n\tat org.apache.hadoop.ipc.Client.call(Client.java:1097)\n\tat org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:229)\n\tat $Proxy7.getProtocolVersion(Unknown Source)\n\tat org.apache.hadoop.ipc.RPC.getProxy(RPC.java:411)\n\tat org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:125)\n\tat org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:266)\n\tat org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:231)\n\tat org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:100)\n\tat org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1411)\n\tat org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:66)\n\tat org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1429)\n\tat org.apache.hadoop.fs.FileSystem.get(FileSystem.java:254)\n\tat org.apache.hadoop.fs.Path.getFileSystem(Path.java:187)\n\tat org.apache.hadoop.security.Credentials.writeTokenStorageFile(Credentials.java:169)\n\tat org.apache.hadoop.mapred.JobInProgress.generateAndStoreTokens(JobInProgress.java:3556)\n\tat org.apache.hadoop.mapred.JobInProgress.initTasks(JobInProgress.java:696)\n\tat org.apache.hadoop.mapred.JobTracker.initJob(JobTracker.java:4028)\n\tat org.apache.hadoop.mapred.FairScheduler$JobInitializer$InitJob.run(FairScheduler.java:301)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n\tat java.lang.Thread.run(Thread.java:662)\nCaused by: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]\n\tat org.apache.hadoop.ipc.Client$Connection$1.run(Client.java:543)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:396)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1136)\n\tat org.apache.hadoop.ipc.Client$Connection.handleSaslConnectionFailure(Client.java:488)\n\tat org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:590)\n\tat org.apache.hadoop.ipc.Client$Connection.access$2100(Client.java:187)\n\tat org.apache.hadoop.ipc.Client.getConnection(Client.java:1228)\n\tat org.apache.hadoop.ipc.Client.call(Client.java:1072)\n\t... 20 more\nCaused by: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]\n\tat com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(GssKrb5Client.java:194)\n\tat org.apache.hadoop.security.SaslRpcClient.saslConnect(SaslRpcClient.java:134)\n\tat org.apache.hadoop.ipc.Client$Connection.setupSaslConnection(Client.java:385)\n\tat org.apache.hadoop.ipc.Client$Connection.access$1200(Client.java:187)\n\tat org.apache.hadoop.ipc.Client$Connection$2.run(Client.java:583)\n\tat org.apache.hadoop.ipc.Client$Connection$2.run(Client.java:580)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:396)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1136)\n\tat org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:579)\n\t... 23 more\nCaused by: GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)\n\tat sun.security.jgss.krb5.Krb5InitCredential.getInstance(Krb5InitCredential.java:130)\n\tat sun.security.jgss.krb5.Krb5MechFactory.getCredentialElement(Krb5MechFactory.java:106)\n\tat sun.security.jgss.krb5.Krb5MechFactory.getMechanismContext(Krb5MechFactory.java:172)\n\tat sun.security.jgss.GSSManagerImpl.getMechanismContext(GSSManagerImpl.java:209)\n\tat sun.security.jgss.GSSContextImpl.initSecContext(GSSContextImpl.java:195)\n\tat sun.security.jgss.GSSContextImpl.initSecContext(GSSContextImpl.java:162)\n\tat com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(GssKrb5Client.java:175)\n\t... 32 more\n\n2012-10-11 15:50:35,603 INFO org.apache.hadoop.mapred.JobTracker: Failing job job_201210111545_0001\n2012-10-11 15:50:35,609 INFO org.apache.hadoop.mapred.JobInProgress$JobSummary: jobId=job_201210111545_0001,submitTime=1349941835229,launchTime=0,,finishTime=1349941835603,numMaps=0,numSlotsPerMap=1,numReduces=0,numSlotsPerReduce=1,user=hadoop,queue=default,status=FAILED,mapSlotSeconds=0,reduceSlotsSeconds=0,clusterMapCapacity=6,clusterReduceCapacity=6,jobName=word count\n2012-10-11 15:50:35,633 INFO org.apache.hadoop.mapred.JobHistory: Creating DONE subfolder at file:/data/logs/history/done/version-1/dev80.hadoop_1349941538601_/2012/10/11/000000\n2012-10-11 15:50:35,634 INFO org.apache.hadoop.mapred.JobHistory: Moving file:/data/logs/history/job_201210111545_0001_1349941835229_hadoop_word+count to file:/data/logs/history/done/version-1/dev80.hadoop_1349941538601_/2012/10/11/000000\n2012-10-11 15:50:35,638 INFO org.apache.hadoop.hdfs.DFSClient: Cancelling HDFS_DELEGATION_TOKEN token 459 for hadoop on 192.168.7.80:8020\n2012-10-11 15:50:35,642 INFO org.apache.hadoop.mapred.JobHistory: Moving file:/data/logs/history/job_201210111545_0001_conf.xml to file:/data/logs/history/done/version-1/dev80.hadoop_1349941538601_/2012/10/11/000000\n\n{code}\n\napply the patch with \"patch -p0 < MAPREDUCE-4451_branch-1.patch\"\ncompile with \"ant clean\"\"ant package\", deploy new hadoop-fairscheduler-1.2.0-SNAPSHOT.jar, and run wordcount. Everything works fine.\n{code}\n2012-10-11 16:10:40,253 INFO org.apache.hadoop.mapred.JobInProgress: job_201210111609_0001: nMaps=5 nReduces=1 max=-1\n2012-10-11 16:10:40,254 INFO org.apache.hadoop.hdfs.DFSClient: Renewing HDFS_DELEGATION_TOKEN token 460 for hadoop on 192.168.7.80:8020\n2012-10-11 16:10:40,379 INFO org.apache.hadoop.mapred.JobTracker: Initializing job_201210111609_0001\n2012-10-11 16:10:40,379 INFO org.apache.hadoop.mapred.JobInProgress: Initializing job_201210111609_0001\n2012-10-11 16:10:40,379 INFO org.apache.hadoop.mapred.JobTracker: Job job_201210111609_0001 added successfully for user 'hadoop' to queue 'default'\n2012-10-11 16:10:40,382 INFO org.apache.hadoop.mapred.AuditLogger: USER=hadoop\tIP=192.168.7.80\tOPERATION=SUBMIT_JOB\tTARGET=job_201210111609_0001\tRESULT=SUCCESS\n2012-10-11 16:10:40,524 INFO org.apache.hadoop.mapred.JobInProgress: jobToken generated and stored with users keys in /data/mapred/system/job_201210111609_0001/jobToken\n2012-10-11 16:10:40,540 INFO org.apache.hadoop.mapred.JobInProgress: Input size for job job_201210111609_0001 = 75545. Number of splits = 5\n2012-10-11 16:10:40,540 INFO org.apache.hadoop.mapred.JobInProgress: tip:task_201210111609_0001_m_000000 has split on node:/rack2/dev82.hadoop\n2012-10-11 16:10:40,540 INFO org.apache.hadoop.mapred.JobInProgress: tip:task_201210111609_0001_m_000000 has split on node:/rack2/dev83.hadoop\n2012-10-11 16:10:40,541 INFO org.apache.hadoop.mapred.JobInProgress: tip:task_201210111609_0001_m_000001 has split on node:/rack2/dev83.hadoop\n2012-10-11 16:10:40,541 INFO org.apache.hadoop.mapred.JobInProgress: tip:task_201210111609_0001_m_000001 has split on node:/rack2/dev82.hadoop\n2012-10-11 16:10:40,541 INFO org.apache.hadoop.mapred.JobInProgress: tip:task_201210111609_0001_m_000002 has split on node:/rack2/dev83.hadoop\n2012-10-11 16:10:40,541 INFO org.apache.hadoop.mapred.JobInProgress: tip:task_201210111609_0001_m_000002 has split on node:/rack2/dev82.hadoop\n2012-10-11 16:10:40,541 INFO org.apache.hadoop.mapred.JobInProgress: tip:task_201210111609_0001_m_000003 has split on node:/rack2/dev83.hadoop\n2012-10-11 16:10:40,542 INFO org.apache.hadoop.mapred.JobInProgress: tip:task_201210111609_0001_m_000003 has split on node:/rack2/dev82.hadoop\n2012-10-11 16:10:40,542 INFO org.apache.hadoop.mapred.JobInProgress: tip:task_201210111609_0001_m_000004 has split on node:/rack2/dev83.hadoop\n2012-10-11 16:10:40,542 INFO org.apache.hadoop.mapred.JobInProgress: tip:task_201210111609_0001_m_000004 has split on node:/rack2/dev82.hadoop\n2012-10-11 16:10:40,542 INFO org.apache.hadoop.mapred.JobInProgress: job_201210111609_0001 LOCALITY_WAIT_FACTOR=0.6666667\n2012-10-11 16:10:40,543 INFO org.apache.hadoop.mapred.JobInProgress: Job job_201210111609_0001 initialized successfully with 5 map tasks and 1 reduce tasks.\n2012-10-11 16:10:40,704 INFO org.apache.hadoop.mapred.JobTracker: Adding task (JOB_SETUP) 'attempt_201210111609_0001_m_000006_0' to tip task_201210111609_0001_m_000006, for tracker 'tracker_dev81.hadoop:localhost/127.0.0.1:55568'\n2012-10-11 16:10:43,157 INFO org.apache.hadoop.mapred.JobInProgress: Task 'attempt_201210111609_0001_m_000006_0' has completed task_201210111609_0001_m_000006 successfully.\n2012-10-11 16:10:43,730 INFO org.apache.hadoop.mapred.JobTracker: Adding task (MAP) 'attempt_201210111609_0001_m_000000_0' to tip task_201210111609_0001_m_000000, for tracker 'tracker_dev82.hadoop:localhost/127.0.0.1:59770'\n2012-10-11 16:10:43,731 INFO org.apache.hadoop.mapred.JobInProgress: Choosing data-local task task_201210111609_0001_m_000000\n2012-10-11 16:10:43,731 INFO org.apache.hadoop.mapred.JobTracker: Adding task (MAP) 'attempt_201210111609_0001_m_000001_0' to tip task_201210111609_0001_m_000001, for tracker 'tracker_dev82.hadoop:localhost/127.0.0.1:59770'\n2012-10-11 16:10:43,732 INFO org.apache.hadoop.mapred.JobInProgress: Choosing data-local task task_201210111609_0001_m_000001\n2012-10-11 16:10:43,732 INFO org.apache.hadoop.mapred.JobTracker: Adding task (MAP) 'attempt_201210111609_0001_m_000002_0' to tip task_201210111609_0001_m_000002, for tracker 'tracker_dev83.hadoop:localhost/127.0.0.1:60713'\n2012-10-11 16:10:43,733 INFO org.apache.hadoop.mapred.JobInProgress: Choosing data-local task task_201210111609_0001_m_000002\n2012-10-11 16:10:43,733 INFO org.apache.hadoop.mapred.JobTracker: Adding task (MAP) 'attempt_201210111609_0001_m_000003_0' to tip task_201210111609_0001_m_000003, for tracker 'tracker_dev83.hadoop:localhost/127.0.0.1:60713'\n2012-10-11 16:10:43,733 INFO org.apache.hadoop.mapred.JobInProgress: Choosing data-local task task_201210111609_0001_m_000003\n2012-10-11 16:10:44,975 INFO org.apache.hadoop.mapred.JobInProgress: Choosing a non-local task task_201210111609_0001_m_000004\n2012-10-11 16:10:44,975 INFO org.apache.hadoop.mapred.JobTracker: Adding task (MAP) 'attempt_201210111609_0001_m_000004_0' to tip task_201210111609_0001_m_000004, for tracker 'tracker_dev81.hadoop:localhost/127.0.0.1:55568'\n2012-10-11 16:10:46,486 INFO org.apache.hadoop.mapred.JobInProgress: Task 'attempt_201210111609_0001_m_000000_0' has completed task_201210111609_0001_m_000000 successfully.\n2012-10-11 16:10:46,489 INFO org.apache.hadoop.mapred.JobInProgress: Task 'attempt_201210111609_0001_m_000003_0' has completed task_201210111609_0001_m_000003 successfully.\n2012-10-11 16:10:46,494 INFO org.apache.hadoop.mapred.JobInProgress: Task 'attempt_201210111609_0001_m_000004_0' has completed task_201210111609_0001_m_000004 successfully.\n2012-10-11 16:10:46,792 INFO org.apache.hadoop.mapred.JobInProgress: Task 'attempt_201210111609_0001_m_000001_0' has completed task_201210111609_0001_m_000001 successfully.\n2012-10-11 16:10:46,798 INFO org.apache.hadoop.mapred.JobTracker: Adding task (REDUCE) 'attempt_201210111609_0001_r_000000_0' to tip task_201210111609_0001_r_000000, for tracker 'tracker_dev82.hadoop:localhost/127.0.0.1:59770'\n2012-10-11 16:10:46,799 INFO org.apache.hadoop.mapred.JobInProgress: Task 'attempt_201210111609_0001_m_000002_0' has completed task_201210111609_0001_m_000002 successfully.\n2012-10-11 16:10:55,568 INFO org.apache.hadoop.mapred.JobInProgress: Task 'attempt_201210111609_0001_r_000000_0' has completed task_201210111609_0001_r_000000 successfully.\n2012-10-11 16:10:55,573 INFO org.apache.hadoop.mapred.JobTracker: Adding task (JOB_CLEANUP) 'attempt_201210111609_0001_m_000005_0' to tip task_201210111609_0001_m_000005, for tracker 'tracker_dev82.hadoop:localhost/127.0.0.1:59770'\n2012-10-11 16:10:56,789 INFO org.apache.hadoop.mapred.JobInProgress: Task 'attempt_201210111609_0001_m_000005_0' has completed task_201210111609_0001_m_000005 successfully.\n2012-10-11 16:10:56,790 INFO org.apache.hadoop.mapred.JobInProgress: Job job_201210111609_0001 has completed successfully.\n2012-10-11 16:10:56,793 INFO org.apache.hadoop.mapred.JobInProgress$JobSummary: jobId=job_201210111609_0001,submitTime=1349943040191,launchTime=1349943040542,firstMapTaskLaunchTime=1349943043730,firstReduceTaskLaunchTime=1349943046794,firstJobSetupTaskLaunchTime=1349943040684,firstJobCleanupTaskLaunchTime=1349943055573,finishTime=1349943056790,numMaps=5,numSlotsPerMap=1,numReduces=1,numSlotsPerReduce=1,user=hadoop,queue=default,status=SUCCEEDED,mapSlotSeconds=9,reduceSlotsSeconds=8,clusterMapCapacity=6,clusterReduceCapacity=6,jobName=word count\n2012-10-11 16:10:56,822 INFO org.apache.hadoop.mapred.JobHistory: Creating DONE subfolder at file:/data/logs/history/done/version-1/dev80.hadoop_1349942948793_/2012/10/11/000000\n2012-10-11 16:10:56,824 INFO org.apache.hadoop.mapred.JobHistory: Moving file:/data/logs/history/job_201210111609_0001_1349943040191_hadoop_word+count to file:/data/logs/history/done/version-1/dev80.hadoop_1349942948793_/2012/10/11/000000\n2012-10-11 16:10:56,825 INFO org.apache.hadoop.mapred.JobTracker: Removing task 'attempt_201210111609_0001_m_000000_0'\n2012-10-11 16:10:56,833 INFO org.apache.hadoop.mapred.JobHistory: Moving file:/data/logs/history/job_201210111609_0001_conf.xml to file:/data/logs/history/done/version-1/dev80.hadoop_1349942948793_/2012/10/11/000000\n2012-10-11 16:10:56,827 INFO org.apache.hadoop.hdfs.DFSClient: Cancelling HDFS_DELEGATION_TOKEN token 460 for hadoop on 192.168.7.80:8020\n2012-10-11 16:10:56,835 INFO org.apache.hadoop.mapred.JobTracker: Removing task 'attempt_201210111609_0001_m_000001_0'\n2012-10-11 16:10:56,835 INFO org.apache.hadoop.mapred.JobTracker: Removing task 'attempt_201210111609_0001_m_000005_0'\n2012-10-11 16:10:56,835 INFO org.apache.hadoop.mapred.JobTracker: Removing task 'attempt_201210111609_0001_r_000000_0'\n2012-10-11 16:10:56,897 WARN org.apache.hadoop.mapred.JobHistory: JobHistory: existingDoneSubdirs doesn't contain file:/data/logs/history/done/version-1/dev80.hadoop_1346294197416_/2012/08/30/000000, but should.\n2012-10-11 16:10:56,899 WARN org.apache.hadoop.mapred.JobHistory: JobHistory: existingDoneSubdirs doesn't contain file:/data/logs/history/done/version-1/dev80.hadoop_1346351022278_/2012/08/31/000000, but should.\n2012-10-11 16:10:56,905 WARN org.apache.hadoop.mapred.JobHistory: JobHistory: existingDoneSubdirs doesn't contain file:/data/logs/history/done/version-1/dev80.hadoop_1346385661102_/2012/09/03/000000, but should.\n2012-10-11 16:10:56,908 WARN org.apache.hadoop.mapred.JobHistory: JobHistory: existingDoneSubdirs doesn't contain file:/data/logs/history/done/version-1/dev80.hadoop_1346385661102_/2012/08/31/000000, but should.\n2012-10-11 16:10:56,909 WARN org.apache.hadoop.mapred.JobHistory: JobHistory: existingDoneSubdirs doesn't contain file:/data/logs/history/done/version-1/dev80.hadoop_1346254764307_/2012/08/29/000000, but should.\n2012-10-11 16:10:56,911 WARN org.apache.hadoop.mapred.JobHistory: JobHistory: existingDoneSubdirs doesn't contain file:/data/logs/history/done/version-1/dev80.hadoop_1346350655601_/2012/08/31/000000, but should.\n2012-10-11 16:10:57,070 INFO org.apache.hadoop.mapred.JobTracker: Removing task 'attempt_201210111609_0001_m_000002_0'\n2012-10-11 16:10:57,070 INFO org.apache.hadoop.mapred.JobTracker: Removing task 'attempt_201210111609_0001_m_000003_0'\n2012-10-11 16:10:57,071 INFO org.apache.hadoop.mapred.JobTracker: Removing task 'attempt_201210111609_0001_m_000004_0'\n2012-10-11 16:10:57,071 INFO org.apache.hadoop.mapred.JobTracker: Removing task 'attempt_201210111609_0001_m_000006_0'\n\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=erik.fang","name":"erik.fang","key":"erik.fang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Erik.fang","active":true,"timeZone":"Asia/Shanghai"},"created":"2012-10-11T08:32:02.272+0000","updated":"2012-10-11T08:32:02.272+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13474308","id":"13474308","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kkambatl","name":"kkambatl","key":"kkambatl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthik Kambatla","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-10-11T16:51:42.963+0000","updated":"2012-10-11T16:51:42.963+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13474471","id":"13474471","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"created":"2012-10-11T19:57:35.395+0000","updated":"2012-10-11T19:57:35.395+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13474543","id":"13474543","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"body":"Thanks Erik. Committed to branch-1.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"created":"2012-10-11T21:56:02.582+0000","updated":"2012-10-11T21:56:02.582+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599098/comment/13658053","id":"13658053","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattf","name":"mattf","key":"mattf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Foley","active":true,"timeZone":"America/Los_Angeles"},"body":"Closed upon release of Hadoop 1.2.0.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattf","name":"mattf","key":"mattf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Foley","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-05-15T05:16:14.364+0000","updated":"2013-05-15T05:16:14.364+0000"}],"maxResults":25,"total":25,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-4451/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i02b6f:"}}