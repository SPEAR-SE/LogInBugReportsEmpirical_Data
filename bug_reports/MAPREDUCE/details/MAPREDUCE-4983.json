{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12631158","self":"https://issues.apache.org/jira/rest/api/2/issue/12631158","key":"MAPREDUCE-4983","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323449","id":"12323449","description":"Branch for adding windows support to trunk","name":"trunk-win","archived":true,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-02-07T01:34:07.269+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Feb 07 04:56:13 UTC 2013","customfield_12310420":"311654","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_18818496_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-02-07T04:05:56.746+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-4983/watchers","watchCount":3,"isWatching":false},"created":"2013-02-06T22:52:18.286+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323449","id":"12323449","description":"Branch for adding windows support to trunk","name":"trunk-win","archived":true,"released":false}],"issuelinks":[{"id":"12364045","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12364045","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"inwardIssue":{"id":"12597619","key":"MAPREDUCE-4401","self":"https://issues.apache.org/jira/rest/api/2/issue/12597619","fields":{"summary":"Enhancements to MapReduce for Windows Server and Windows Azure development and runtime environments","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-02-07T04:58:50.545+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312904","id":"12312904","name":"test"}],"timeoriginalestimate":null,"description":"Multiple MapReduce tests have code that makes platform-specific assumptions which do not hold true on Windows.  This includes assumptions about file path manipulation, the path separator used between classpath elements, environment variable syntax, and order of files returned from a directory listing of the local file system.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323449","id":"12323449","description":"Branch for adding windows support to trunk","name":"trunk-win","archived":true,"released":false}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12568327","id":"12568327","filename":"MAPREDUCE-4983-branch-trunk-win.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-06T23:34:14.439+0000","size":13252,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12568327/MAPREDUCE-4983-branch-trunk-win.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12568357","id":"12568357","filename":"MAPREDUCE-4983-branch-trunk-win.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-07T02:55:32.971+0000","size":13763,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12568357/MAPREDUCE-4983-branch-trunk-win.2.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"312000","customfield_12312823":null,"summary":"multiple MapReduce tests fail on Windows due to platform-specific assumptions in test code","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12631158/comment/13572963","id":"13572963","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"The impacted tests are: {{TestMRApps}}, {{TestMapProgress}}, {{TestMRJobs}}, and {{TestUberAM}}.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-06T22:52:55.205+0000","updated":"2013-02-06T22:52:55.205+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12631158/comment/13572998","id":"13572998","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"The attached patch changes the test code so that it's not platform-specific.  I tested the patch on Mac and Windows.  This patch is intended for branch-trunk-win (not trunk).\n\nHere is a summary of the kinds of changes that are in this patch:\n\n{code}\n   private static void delete(File dir) throws IOException {\n-    Path p = new Path(\"file://\"+dir.getAbsolutePath());\n     Configuration conf = new Configuration();\n-    FileSystem fs = p.getFileSystem(conf);\n+    FileSystem fs = FileSystem.getLocal(conf);\n+    Path p = fs.makeQualified(new Path(dir.getAbsolutePath()));\n     fs.delete(p, true);\n   }\n{code}\n\nThe prior code for path construction fails on Windows due to the drive spec and backslashes.  Using {{FileSystem#makeQualified}} against the local file system works cross-platform.\n\n{code}\n-    assertTrue(environment.get(\"CLASSPATH\").startsWith(\"$PWD:\"));\n+    assertTrue(environment.get(\"CLASSPATH\").startsWith(\n+      ApplicationConstants.Environment.PWD.$() + File.pathSeparator));\n{code}\n\nOn Windows, an environment variable shows up in the classpath as %VAR% instead of $VAR.  On branch-trunk-win, we have already changed {{ApplicationConstants#Environment#$}} to return the correct thing depending on platform, so I'm reusing that here.\n\n{code}\n-      yarnAppClasspath = yarnAppClasspath.replaceAll(\",\\\\s*\", \":\").trim();\n+      yarnAppClasspath = yarnAppClasspath.replaceAll(\",\\\\s*\", File.pathSeparator)\n+        .trim();\n{code}\n\nOn Windows, classpath entries are separated by ';' instead of ':'.  Using {{File#pathSeparator}} handles this correctly cross-platform.\n\n{code}\n-    assertSame(\"MAPREDUCE_JOB_USER_CLASSPATH_FIRST set, but not taking effect!\",\n-      env_str.indexOf(\"$PWD:job.jar/job.jar:job.jar/classes/:job.jar/lib/*:$PWD/*\"), 0);\n+    String expectedClasspath = StringUtils.join(File.pathSeparator,\n+      Arrays.asList(ApplicationConstants.Environment.PWD.$(), \"job.jar/job.jar\",\n+        \"job.jar/classes/\", \"job.jar/lib/*\",\n+        ApplicationConstants.Environment.PWD.$() + \"/*\"));\n+    assertTrue(\"MAPREDUCE_JOB_USER_CLASSPATH_FIRST set, but not taking effect!\",\n+      env_str.startsWith(expectedClasspath));\n{code}\n\nThis is a combination of the prior issues: handling environment variables and classpath entry separator in a way that works cross-platform.\n\n{code}\n-  private static String TEST_ROOT_DIR = new File(System.getProperty(\n-           \"test.build.data\", \"/tmp\")).getAbsolutePath() + \"/mapPahseprogress\";\n+  private static String TEST_ROOT_DIR;\n+  static {\n+    String root = new File(System.getProperty(\"test.build.data\", \"/tmp\"))\n+      .getAbsolutePath();\n+    TEST_ROOT_DIR = new Path(root, \"mapPahseprogress\").toString();\n+  }\n{code}\n\nThe old code would generate a path with a mix of backslashes and forward slashes.  Passing through {{Path#toString}} handles this correctly.\n\n{code}\n-        new Path(mrCluster.getTestWorkDir().getAbsolutePath(), \"random-output\");\n+        new Path(\"/tmp/\" + getClass().getSimpleName(), \"random-output\");\n{code}\n\nThe old code would attempt to use a path on HDFS with a drive spec.  HDFS would reject this, because it considers ':' invalid in a path.  See prior discussion in HDFS-4470, HADOOP-8487, and HDFS-4260 for discussion and justification for switching to a path of the form /tmp/<test name>.  Note that this does not change any paths used on the local file system.  This only changes paths used for creating files in HDFS.\n\n{code}\n       // Check lengths of the files\n-      Assert.assertEquals(1, localFs.getFileStatus(files[1]).getLen());\n-      Assert.assertTrue(localFs.getFileStatus(files[2]).getLen() > 1);\n+      Map<String, Path> filesMap = pathsToMap(files);\n+      Assert.assertTrue(filesMap.containsKey(\"distributed.first.symlink\"));\n+      Assert.assertEquals(1, localFs.getFileStatus(\n+        filesMap.get(\"distributed.first.symlink\")).getLen());\n+      Assert.assertTrue(filesMap.containsKey(\"distributed.second.jar\"));\n+      Assert.assertTrue(localFs.getFileStatus(\n+        filesMap.get(\"distributed.second.jar\")).getLen() > 1);\n{code}\n\nThe old code assumed that the directory listing would come back in a specific order.  The order can be different on Windows.  Additionally, Windows has an additional jar used to bundle a potentially long classpath into a jar manifest.  The new code creates a mapping based on name and then interrogates the map, so there is no assumption of order.\n\nWith this patch, we still have a failure in {{TestMRJobs#testDistributedCache}}, but it's a separate issue due to mishandling of symlinks in the distributed cache.  I'll file a separate jira for that.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-06T23:34:14.441+0000","updated":"2013-02-06T23:34:14.441+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12631158/comment/13573084","id":"13573084","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"body":"Mostly looks good. One comment:\n - Can you change TestMRJobs to use TEST_ROOT_DIR instead of hardcoding /tmp, but address the mixed slash issue with Path#toString()?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-07T01:34:07.269+0000","updated":"2013-02-07T01:34:07.269+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12631158/comment/13573086","id":"13573086","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. With this patch, we still have a failure in TestMRJobs#testDistributedCache, but it's a separate issue due to mishandling of symlinks in the distributed cache. I'll file a separate jira for that.\nPlease do.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-07T01:34:26.567+0000","updated":"2013-02-07T01:34:26.567+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12631158/comment/13573113","id":"13573113","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bikassaha","name":"bikassaha","key":"bikassaha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bikassaha&avatarId=29845","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bikassaha&avatarId=29845","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bikassaha&avatarId=29845","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bikassaha&avatarId=29845"},"displayName":"Bikas Saha","active":true,"timeZone":"America/Los_Angeles"},"body":"Clean fixes overall. Please do fix the existing typo \"mapPahseprogress\" :P","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bikassaha","name":"bikassaha","key":"bikassaha","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bikassaha&avatarId=29845","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bikassaha&avatarId=29845","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bikassaha&avatarId=29845","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bikassaha&avatarId=29845"},"displayName":"Bikas Saha","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-07T02:37:33.287+0000","updated":"2013-02-07T02:37:33.287+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12631158/comment/13573124","id":"13573124","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks, Vinod and Bikas.  I'm attaching version 2 of the patch to address your feedback.\n\n{quote}\nCan you change TestMRJobs to use TEST_ROOT_DIR instead of hardcoding /tmp, but address the mixed slash issue with Path#toString()?\n{quote}\n\nUnfortunately, no, we can't use TEST_ROOT_DIR for this.  In addition to the slash issue, TEST_ROOT_DIR will have a drive spec, and HDFS will reject any path with a ':' as invalid.  TEST_ROOT_DIR needs to stay fully qualified, with drive spec, for some of the local file system setup operations in the test.  I have introduced a new constant, OUTPUT_ROOT_DIR, so at least we don't repeat \"/tmp\" in multiple places.\n\n{quote}\nPlease do fix the existing typo \"mapPahseprogress\"{quote}\n\nI kept looking right past it.  :-)  Fixed.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-07T02:55:32.975+0000","updated":"2013-02-07T02:55:32.975+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12631158/comment/13573159","id":"13573159","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"body":"Thought this was a local FS path so was advising against /tmp, but realized otherwise now.\n\nBetter solution could have been Path itself taking care of mixed slashes?\n\nNever mind for this patch though.. Checking it in.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-07T04:03:29.675+0000","updated":"2013-02-07T04:03:29.675+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12631158/comment/13573162","id":"13573162","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"body":"Just committed this to branch-trunk-win. Thanks Chris!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-07T04:05:56.771+0000","updated":"2013-02-07T04:05:56.771+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12631158/comment/13573192","id":"13573192","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the commit!  I filed MAPREDUCE-4987 for the remaining failure.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-07T04:56:13.171+0000","updated":"2013-02-07T04:56:13.171+0000"}],"maxResults":9,"total":9,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-4983/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1hs87:"}}