{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12520604","self":"https://issues.apache.org/jira/rest/api/2/issue/12520604","key":"MAPREDUCE-2905","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317960","id":"12317960","description":"1.1.0 release","name":"1.1.0","archived":false,"released":true,"releaseDate":"2012-10-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-08-29T18:09:16.918+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Oct 17 18:27:24 UTC 2012","customfield_12310420":"17151","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_7352159794_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-11-22T19:36:13.280+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-2905/watchers","watchCount":7,"isWatching":false},"created":"2011-08-29T17:20:13.796+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"6.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314205","id":"12314205","description":"","name":"0.20.2","archived":false,"released":true,"releaseDate":"2010-02-16"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-10-17T18:27:24.546+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312901","id":"12312901","name":"contrib/fair-share"}],"timeoriginalestimate":null,"description":"We encountered a situation where in the same cluster, large jobs benefit from mapred.fairscheduler.assignmultiple, but small jobs with small numbers of mappers do not: the mappers all clump to fully occupy just a few nodes, which causes those nodes to saturate and bottleneck. The desired behavior is to spread the job across more nodes so that a relatively small job doesn't saturate any node in the cluster.\n\nTesting has shown that setting mapred.fairscheduler.assignmultiple to false gives the desired behavior for small jobs, but is unnecessary for large jobs. However, since this is a cluster-wide setting, we can't properly tune.\n\nIt'd be nice if jobs can set a param similar to mapred.fairscheduler.assignmultiple on submission to better control the task distribution of a particular job.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317960","id":"12317960","description":"1.1.0 release","name":"1.1.0","archived":false,"released":true,"releaseDate":"2012-10-13"}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12498917","id":"12498917","filename":"ASF.LICENSE.NOT.GRANTED--screenshot-1.jpg","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-13T20:09:37.690+0000","size":59305,"mimeType":"image/jpeg","content":"https://issues.apache.org/jira/secure/attachment/12498917/ASF.LICENSE.NOT.GRANTED--screenshot-1.jpg"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12498916","id":"12498916","filename":"MR-2905.10-13-2011","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-13T19:51:08.742+0000","size":12542,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12498916/MR-2905.10-13-2011"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12497947","id":"12497947","filename":"MR-2905.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-06T05:12:58.775+0000","size":4551,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12497947/MR-2905.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12498843","id":"12498843","filename":"MR-2905.patch.2","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-13T01:02:56.242+0000","size":4881,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12498843/MR-2905.patch.2"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12503954","id":"12503954","filename":"mr-2905.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-11-16T21:31:41.968+0000","size":11513,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12503954/mr-2905.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12499497","id":"12499497","filename":"mr-2905.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-10-18T03:46:48.008+0000","size":10066,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12499497/mr-2905.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"13597","customfield_12312823":null,"summary":"CapBasedLoadManager incorrectly allows assignment when assignMultiple is true (was: assignmultiple per job)","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13092995","id":"13092995","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"Example:\n\n5 node cluster, 5 slots per node.\n\nSet assign multiple to true.\n\nSubmit a sleep job with 7 mappers.\n\nAll 7 mappers are assigned to nodes A and B.\n\nSet assign multiple to false. Bounce job tracker.\n\nSubmit a sleep job with 7 mappers. \n\n7 mappers now spread evenly across cluster.\n\nI should be able to submit 2 sleep jobs, maybe job 1 has 7 mappers, job 2 has 700 mappers. I want to set assignmultiple on job 2 so that evey node saturates quickly, while job 1 has assignmultiple set to false, which means it gets one task assigned at a time and therefore spreads out more evently.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-08-29T17:33:39.424+0000","updated":"2011-08-29T17:33:39.424+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13093036","id":"13093036","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"There's code in the fair scheduler which tries to avoid doing this. I think something is broken about it, currently, though, since I've heard many people report the same behavior. Look at CapBasedLoadManager.java.\n\nEither way, I don't think doing this per-job is the right solution - better to avoid exposing the config, and just Do The Right Thing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-08-29T18:09:16.918+0000","updated":"2011-08-29T18:09:16.918+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13109136","id":"13109136","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"CapBasedLoadManager looks OK, but the endless loop in the fair scheduler that evaluates the output of CapBasedLoadManager, in the method AssignTasks looks suspect to me.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-21T00:38:51.615+0000","updated":"2011-09-21T00:38:51.615+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13115255","id":"13115255","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"I was mistaken. CapBasedLoadManager isn't working.\n\nThe problem is this:\n\n\t  public boolean canAssignMap(TaskTrackerStatus tracker,\n\t\t      int totalRunnableMaps, int totalMapSlots) {\n\t\t    return tracker.countMapTasks() < getCap(totalRunnableMaps,\n\t\t        tracker.getMaxMapSlots(), totalMapSlots);\n\t\t  }\n\nThe calls to tracker.countMapTasks() and tracker.countReduceTasks() always return 0 when called from the loop inside assignTasks. Even though tasks get assigned by the scheduler, countMapTasks() and countReduceTasks don't change what they return.\n\nNeed to either fix countMapTasks() or determine another way to pass in the information about the tasks which were just assigned by the scheduler.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-09-27T06:25:02.630+0000","updated":"2011-09-27T06:25:02.630+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13121727","id":"13121727","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"Please review and validate the approach.\n\nThe problem is that when AssignMultiple is turned on, canAssignMap and canAssignReduce gets called in a loop which causes the task tracker status to go out of date as new tasks are marked for assignment. Tasks get added to the list, but don't actually get assigned until AssignTasks exits. Hence, the task tracker status falls out of date.\n\nPatch modifies CapBasedLoadManager to track the number of times canAssignMap and canAssignReduce returns \"true\" to the same task tracker. It assumes that when it returns true, there's potentially another running task that needs to be considered when deciding whether we can assign a new task to this tracker.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-06T05:12:58.894+0000","updated":"2011-10-06T05:12:58.894+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13124603","id":"13124603","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"Verified that this fix works. Can someone please look at it?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-11T00:33:57.753+0000","updated":"2011-10-11T00:33:57.753+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13125843","id":"13125843","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"body":"Jeff,\n\nI'll leave the final review to people better suited to reviewing FairScheduler patches, but am gonna post some notes on getting this patch to an acceptable state:\n\nA few nits, hence:\n\n- Patch is mixing spaces and tabs. Follow the coding guidelines and use only spaces. 2 spaces per indent instead of hard tab characters which seem present right now.\n- If you'd like to get this included upstream, you'll have to re-up the patch with permission grants to ASF. This is doable when you attach a file (look for an option at the bottom -- or perhaps you missed it accidentally).\n\nIf possible, can we somehow have a test for this? Just asking.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-10-12T13:28:18.926+0000","updated":"2011-10-12T13:28:18.926+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13125904","id":"13125904","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"The test is a sleep job with slightly more mappers than slots on a node. Without the patch it clumps on one node. With the patch it evenly spreads. I also have a unit test that I used to discover the bug. Its a little messy. Let me know if you need that. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-12T15:02:19.309+0000","updated":"2011-10-12T15:02:19.309+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13125963","id":"13125963","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"We do need a junit test. Manual tests are generally insufficient since there's little guarantee they won't regress.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-10-12T16:42:24.750+0000","updated":"2011-10-12T16:42:24.750+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13126275","id":"13126275","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"I don't understand why the existing JUnit test for CapBasedLoadManager isn't sufficient to determine that the patch does not regress? It was sufficient before, so if the patched LoadManager still passes the test on the build, shouldn't that be sufficient now?\n\nThe JUnit test actually doesn't properly catch this bug. When AssignMultiple is on, CanAssignMap is called in a loop from the fair scheduler with the same TaskStatus object, and the junit test reinstantiates the task status object on each call to CanAssignMap. \n\nI can patch the existing JUnit test to reproduce the issue, which would make the existing CapBasedLoadManager fail. Is this sufficient?\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-13T00:52:23.592+0000","updated":"2011-10-13T00:52:23.592+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13126281","id":"13126281","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"Checked \"grant for inclusion\"\nFixed tab v. space issue per harsh","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-13T01:02:56.333+0000","updated":"2011-10-13T01:02:56.333+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13126350","id":"13126350","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"That's exactly the point. If the existing test didn't fail, even though there was a bug, then the existing test wasn't good enough. Hence you need to add a new test or improve the existing one in such a way that the test fails without this bug fix and passes with it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-10-13T05:10:38.170+0000","updated":"2011-10-13T05:10:38.170+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13126353","id":"13126353","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"Ok. That's different from testing for regressions but maybe I can do both. I have the code it's just not in junit form. Stay tuned!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-13T05:31:20.285+0000","updated":"2011-10-13T05:31:20.285+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13126358","id":"13126358","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"The point isn't to test that this code didn't introduce a regression - the point is to add a regression test for this bug so that _future_ code doesn't regress _this_ fix :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-10-13T05:45:36.554+0000","updated":"2011-10-13T05:45:36.554+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13126860","id":"13126860","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"Unit test included. Unit test found typo, which was fixed (\"assign map assign reduce, whatever\")","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-13T19:51:08.873+0000","updated":"2011-10-13T19:51:08.873+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13126876","id":"13126876","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"Unit test failure exposes the issue. When assignmultiple is true, a load manager might be asked to assign 3 maps in a loop, and it allows all of them.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-13T20:09:37.775+0000","updated":"2011-10-13T20:09:37.775+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13129451","id":"13129451","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"The patch seems to reformat a bunch of stuff to 4-space indentation instead of 2-space, making it tough to review. Since I've already made you do several iterations, let me take care of the next one for you... will upload an updated patch soon.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-10-18T03:18:13.409+0000","updated":"2011-10-18T03:18:13.409+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13129453","id":"13129453","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"Oh I'm happy to do it. Is two-space indentation an apache or hadoop standard?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-18T03:25:47.162+0000","updated":"2011-10-18T03:25:47.162+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13129460","id":"13129460","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"How does this patch look, Jeff? I took a slightly different approach and simply passed the number of already-assigned tasks in as part of the API. It breaks the LoadManager API, but in a very simple way, and it's only very rarely extended (and by expert users).\n\nThis made the changes in CapBasedLoadManager much simpler.\n\nIf you're able to perform the manual sleep-job test to verify this, that would be awesome.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-10-18T03:46:48.079+0000","updated":"2011-10-18T03:46:48.079+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13129536","id":"13129536","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"Hi Todd, I considered your patch but thought it was illegal to break an API.\n\nAnyway, I tested your patch and it's adequate. On a 5 node cluster with 7 slots per node, I run the test:\n\nhadoop jar /usr/lib/hadoop/hadoop-examples.jar sleep -m 12 -mt 300000\n\nyour patch divvies up the tasks 3, 3, 3, 3, 0. \n\nMy patch divvies up the tasks 2, 2, 2, 2, 2.\n\nMine's a little better, but I'm not complaining: without either patch tasks are distributed as follows:\n\n7, 5, 0, 0, 0.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-10-18T06:26:58.809+0000","updated":"2011-10-18T06:26:58.809+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13137787","id":"13137787","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matei","name":"matei","key":"matei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matei Zaharia","active":true,"timeZone":"America/Los_Angeles"},"body":"Sorry for taking a bit of time to get to this, but I agree with Todd that the approach where we change the LoadManager API a little is better. LoadManager was defined as an extension point but it's a pretty advanced feature that I don't think anyone except Facebook has looked at changing. The benefits in understandability from Todd's approach (from not having to maintain state in the LoadManager object) outweigh the cost.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matei","name":"matei","key":"matei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matei Zaharia","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-28T00:43:13.595+0000","updated":"2011-10-28T00:43:13.595+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13150050","id":"13150050","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Matei,\nAre you +1 on Todd's patch or just the approach, ie does the patch look good to go?\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-11-14T23:03:04.483+0000","updated":"2011-11-14T23:03:04.483+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13150690","id":"13150690","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matei","name":"matei","key":"matei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matei Zaharia","active":true,"timeZone":"America/Los_Angeles"},"body":"Yup, the patch itself also looks good.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matei","name":"matei","key":"matei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matei Zaharia","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-11-15T19:17:20.791+0000","updated":"2011-11-15T19:17:20.791+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13150706","id":"13150706","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"TestFairScheduler is failing with this patch - so need to either fix up the test case or figure out what bug it might have introduced.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-11-15T19:37:07.091+0000","updated":"2011-11-15T19:37:07.091+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13150716","id":"13150716","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"More info about the failure?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-15T19:44:57.412+0000","updated":"2011-11-15T19:44:57.412+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13150964","id":"13150964","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"testFairScheduler is buggy. In one instance it actually looks for the bug condition and passes it by asserting that tt1 fills to capacity on small jobs that shouldn't clump together:\n\n    checkAssignment(\"tt1\", \"attempt_test_0001_m_000000_0 on tt1\",\n                           \"attempt_test_0001_r_000000_0 on tt1\",\n                           \"attempt_test_0002_m_000000_0 on tt1\",\n                           \"attempt_test_0002_r_000000_0 on tt1\");\n    checkAssignment(\"tt2\", \"attempt_test_0001_m_000001_0 on tt2\",\n                           \"attempt_test_0002_r_000001_0 on tt2\");\n\nIf tt1 has a capacity of 2 mappers and 2 reducers, I expect 1 mapper and 1 reducer to be assigned each as to assign all 4 slots would be the clumping condition that this patch is trying to address.\n\nOn every instance of checkAssignment that gets multiple tasks, the test fails on the length of the task list. The assignMultiple tests are broken for the reason I describe above. The other tests that fail are the testDelaySchedulingAtNodeLevel, testDelaySchedulingAtRackLevel, and testDelaySchedulingOffRack. In all three of those cases a task list length of 2 of the same type of is expected and a task list length of 1 is returned. Again, with a default capacity of 2 slots per task type, we'd be over capacity and actually looking for the condition this patch fixes.\n\nRelevant output from failure:\n\nTestcase: testSmallJobsWithAssignMultiple took 0.58 sec\n        FAILED\nexpected:<4> but was:<2>\njunit.framework.AssertionFailedError: expected:<4> but was:<2>\n        at org.apache.hadoop.mapred.TestFairScheduler.checkAssignment(TestFairScheduler.java:2810)\n        at org.apache.hadoop.mapred.TestFairScheduler.testSmallJobsWithAssignMultiple(TestFairScheduler.java:784)\n\nTestcase: testLargeJobs took 0.432 sec\nTestcase: testLargeJobsWithAssignMultiple took 0.435 sec\n        FAILED\nexpected:<4> but was:<2>\njunit.framework.AssertionFailedError: expected:<4> but was:<2>\n        at org.apache.hadoop.mapred.TestFairScheduler.checkAssignment(TestFairScheduler.java:2810)\n        at org.apache.hadoop.mapred.TestFairScheduler.testLargeJobsWithAssignMultiple(TestFairScheduler.java:954)\n\nTestcase: testJobsWithPriorities took 0.432 sec\nTestcase: testLargeJobsWithPools took 0.672 sec\nTestcase: testLargeJobsWithExcessCapacity took 0.598 sec\nTestcase: testLargeJobsWithExcessCapacityAndAssignMultiple took 0.594 sec\n        FAILED\nexpected:<4> but was:<2>\njunit.framework.AssertionFailedError: expected:<4> but was:<2>\n        at org.apache.hadoop.mapred.TestFairScheduler.checkAssignment(TestFairScheduler.java:2810)\n        at org.apache.hadoop.mapred.TestFairScheduler.testLargeJobsWithExcessCapacityAndAssignMultiple(TestFairScheduler.java:1301)\n\nTestcase: testSmallJobInLargePool took 0.517 sec\nTestcase: testPoolMaxJobs took 0.842 sec\nTestcase: testUserMaxJobs took 0.73 sec\nTestcase: testComplexJobLimits took 2.053 sec\nTestcase: testSizeBasedWeight took 0.387 sec\nTestcase: testPoolWeights took 0.851 sec\nTestcase: testPoolWeightsWhenNoMaps took 0.637 sec\nTestcase: testPoolMaxMapsReduces took 0.404 sec\nTestcase: testCapBasedLoadManager took 0.119 sec\nTestcase: testMinSharePreemption took 0.487 sec\nTestcase: testMinSharePreemptionWithSmallJob took 0.426 sec\nTestcase: testFairSharePreemption took 0.612 sec\nTestcase: testFairSharePreemptionFromMultiplePools took 0.602 sec\nTestcase: testMinAndFairSharePreemption took 0.42 sec\nTestcase: testNoPreemptionIfDisabled took 0.457 sec\nTestcase: testNoPreemptionIfOnlyLogging took 0.458 sec\nTestcase: testDelaySchedulingAtNodeLevel took 0.366 sec\n        FAILED\nexpected:<2> but was:<1>\njunit.framework.AssertionFailedError: expected:<2> but was:<1>\n        at org.apache.hadoop.mapred.TestFairScheduler.checkAssignment(TestFairScheduler.java:2810)\n        at org.apache.hadoop.mapred.TestFairScheduler.testDelaySchedulingAtNodeLevel(TestFairScheduler.java:2301)\n\nTestcase: testDelaySchedulingAtRackLevel took 0.521 sec\n        FAILED\nexpected:<2> but was:<1>\njunit.framework.AssertionFailedError: expected:<2> but was:<1>\n        at org.apache.hadoop.mapred.TestFairScheduler.checkAssignment(TestFairScheduler.java:2810)\n        at org.apache.hadoop.mapred.TestFairScheduler.testDelaySchedulingAtRackLevel(TestFairScheduler.java:2349)\n\nTestcase: testDelaySchedulingOffRack took 0.261 sec\n        FAILED\nexpected:<2> but was:<1>\njunit.framework.AssertionFailedError: expected:<2> but was:<1>\n\n\nThis is every time checkAssignment() gets called with more than one task as a parameter. This is a buggy test. For example, in one instance it actuall \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-16T01:50:09.436+0000","updated":"2011-11-16T01:50:09.436+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13150968","id":"13150968","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"(strike the last incomplete sentence of the last comment.)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-16T01:57:39.636+0000","updated":"2011-11-16T01:57:39.636+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13150969","id":"13150969","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"trying to think about how to fix the test, though. can we increase the slot count per tracker of the test cluster so as not to hit the clumping? Or maybe just comment out those particular tests?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-16T02:08:34.669+0000","updated":"2011-11-16T02:08:34.669+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13150994","id":"13150994","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"Hey Jeff - hope you didnt spend much time on it. After my earlier comment I looked into it and came to similar conclusions... i'll post a new patch here soon.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-11-16T03:17:59.484+0000","updated":"2011-11-16T03:17:59.484+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13151008","id":"13151008","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"body":"just a bunch of tuesday. no big deal.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwfbean","name":"jwfbean","key":"jwfbean","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Bean","active":true,"timeZone":"Etc/UTC"},"created":"2011-11-16T04:04:59.214+0000","updated":"2011-11-16T04:04:59.214+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13151533","id":"13151533","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"So, I disagree with some of what you said above. The test was broken, but not quite in the way you described.\n\nThe issue is that the test was asserting correct behavior, but the mocking didn't accurately reflect the way the true scheduler interacts with JobInProgress, etc. In the mocks, as soon as \"obtainNewMapTask\" was called, the new task was inserted into the TaskTrackerStatus's taskReports structure, so that the \"countMapTasks\" and \"countReduceTasks\" functions included the just-scheduled tasks. So, the old code in LoadManager actually did the right thing as far as the test/mock setup was concerned.\n\nOnce we fixed the LoadManager to work correctly with the real code (which doesn't insert anything into TaskTrackerStatus when the tasks are allocated), it ended up basically double-counting each assigned task when running against the mocks. So, only half as many tasks were scheduled as were supposed to.\n\nThe fix was to change the mock to obtain all of the scheduled tasks, and only then add them to the task report structure.\n\nI also had to change the code in the assignment loop to add mapsAssigned and reducesAssigned around line 476 of FairScheduler.java. Otherwise the \"flip flopping\" back and forth between map and reduce task assignment broke.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-11-16T21:30:24.339+0000","updated":"2011-11-16T21:30:24.339+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13151534","id":"13151534","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"Updated patch against 0.20-security. Matei: if you wouldn't mind taking a quick look at the new rev, I'd appreciate it.\n\nThis version passes all the fairScheduler tests.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-11-16T21:31:42.119+0000","updated":"2011-11-16T21:31:42.119+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13155358","id":"13155358","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matei","name":"matei","key":"matei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matei Zaharia","active":true,"timeZone":"America/Los_Angeles"},"body":"The patch looks good, except that there's an extra space on a line in TestFairScheduler:\n\n{code:java}\n     List<Task> tasks = scheduler.assignTasks(tracker(taskTrackerName))\n{code}\n\nOther than that, I think it's good to go.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matei","name":"matei","key":"matei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matei Zaharia","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-11-22T19:19:45.657+0000","updated":"2011-11-22T19:19:45.657+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13155363","id":"13155363","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"Thanks Matei. Will fix that on commit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-11-22T19:29:35.725+0000","updated":"2011-11-22T19:29:35.725+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13155365","id":"13155365","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"Committed to 0.20-security.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-11-22T19:36:13.430+0000","updated":"2011-11-22T19:36:13.430+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520604/comment/13478128","id":"13478128","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattf","name":"mattf","key":"mattf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Foley","active":true,"timeZone":"America/Los_Angeles"},"body":"Closed upon release of Hadoop-1.1.0.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattf","name":"mattf","key":"mattf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Foley","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-10-17T18:27:24.538+0000","updated":"2012-10-17T18:27:24.538+0000"}],"maxResults":36,"total":36,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-2905/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i02onz:"}}