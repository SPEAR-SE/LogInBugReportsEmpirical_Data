{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12492584","self":"https://issues.apache.org/jira/rest/api/2/issue/12492584","key":"MAPREDUCE-2211","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2010-12-07T07:01:59.017+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Dec 22 04:43:06 UTC 2010","customfield_12310420":"150066","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-2211/watchers","watchCount":3,"isWatching":false},"created":"2010-12-07T06:56:55.795+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-12-22T04:43:06.683+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312905","id":"12312905","name":"contrib/streaming"}],"timeoriginalestimate":null,"description":"I had generated the 3GB input data by using the random text writer. Later I submitted the high ram streaming job in the command line. However, I found that an out of memory error in one of the task attempt of reducer.\n\nFor reproducing the issue please follow the below steps.\n\n1.\tRun the below command for generating the input data.\n\n${HADOOP_HOME}/bin/hadoop jar \\\n  ${HADOO_HOME}/hadoop-mapred-examples-0.22.0-SNAPSHOT.jar randomtextwriter \\\n  -D mapreduce.randomtextwriter.totalbytes= 3221225472 \\\n  -D mapreduce.randomtextwriter.bytespermap=$(( 3221225472/10)) \\\n  -D mapreduce.randomtextwriter.minwordskey=1 \\\n  -D mapreduce.randomtextwriter.maxwordskey=10 \\\n  -D mapreduce.randomtextwriter.minwordsvalue=0 \\\n  -D mapreduce.randomtextwriter.maxwordsvalue=50 \\\n  -D mapred.output.compress=false \\\n  -D mapreduce.jobtracker.maxmapmemory.mb=1024 \\\n  -D mapreduce.jobtracker.maxreducememory.mb=1024 \\\n  -D mapreduce.cluster.mapmemory.mb=800 \\\n  -D mapreduce.cluster.reducememory.mb=800 \\\n  -D mapreduce.map.memory.mb=2048 \\\n  -D mapreduce.reduce.memory.mb=2048 \\\n  -outFormat org.apache.hadoop.mapreduce.lib.output.TextOutputFormat \\\n  highramjob_unsort_input\n\n2.\tRun the below command for submitting the streaming job.\n\n$HADOOP_HOME/bin/hadoop jar ${HADOOP_HOME}/contrib/streaming/hadoop-0.22.0-SNAPSHOT-streaming.jar \\\n -D mapreduce.jobtracker.maxmapmemory.mb=1024 \\\n -D mapreduce.jobtracker.maxreducememory.mb=1024 \\\n -D mapreduce.cluster.mapmemory.mb=800 \\\n -D mapreduce.cluster.reducememory.mb=800 \\\n -D mapreduce.map.memory.mb=2048 \\\n -D mapreduce.reduce.memory.mb=2048 \\\n -D mapreduce.job.name=\"StreamingWordCount\" \\\n -input highramjob_unsort_input \\\n -output highramjob_output1 \\\n -mapper cat \\\n -reducer wc\n\nI have using the 10 node security cluster with trunk 0.22 branch.\n\nError details:\n==========\n2010-12-07 06:32:39,963 WARN org.apache.hadoop.mapred.Child: Exception running child : org.apache.hadoop.mapreduce.task.reduce.Shuffle$ShuffleError: error in shuffle in fetcher#3\n\tat org.apache.hadoop.mapreduce.task.reduce.Shuffle.run(Shuffle.java:124)\n\tat org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:362)\n\tat org.apache.hadoop.mapred.Child$4.run(Child.java:223)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:396)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1115)\n\tat org.apache.hadoop.mapred.Child.main(Child.java:217)\nCaused by: java.lang.OutOfMemoryError: Java heap space\n\tat org.apache.hadoop.io.BoundedByteArrayOutputStream.<init>(BoundedByteArrayOutputStream.java:58)\n\tat org.apache.hadoop.io.BoundedByteArrayOutputStream.<init>(BoundedByteArrayOutputStream.java:45)\n\tat org.apache.hadoop.mapreduce.task.reduce.MapOutput.<init>(MapOutput.java:104)\n\tat org.apache.hadoop.mapreduce.task.reduce.MergeManager.unconditionalReserve(MergeManager.java:267)\n\tat org.apache.hadoop.mapreduce.task.reduce.MergeManager.reserve(MergeManager.java:257)\n\tat org.apache.hadoop.mapreduce.task.reduce.Fetcher.copyMapOutput(Fetcher.java:305)\n\tat org.apache.hadoop.mapreduce.task.reduce.Fetcher.copyFromHost(Fetcher.java:251)\n\tat org.apache.hadoop.mapreduce.task.reduce.Fetcher.run(Fetcher.java:149)\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"74360","customfield_12312823":null,"summary":"java.lang.OutOfMemoryError occurred while running the high ram streaming job.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinaythota","name":"vinaythota","key":"vinaythota","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinay Kumar Thota","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinaythota","name":"vinaythota","key":"vinaythota","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinay Kumar Thota","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492584/comment/12968603","id":"12968603","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"This error has been observed on 64-bit JVMs. Which JVM version are you running?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-12-07T07:01:59.017+0000","updated":"2010-12-07T07:01:59.017+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492584/comment/12968788","id":"12968788","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=farazahmad","name":"farazahmad","key":"farazahmad","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Faraz Ahmad","active":true,"timeZone":"America/New_York"},"body":"Does this error occur with any value of -Xmx argument for Java VM heap? Which values did you use for your test ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=farazahmad","name":"farazahmad","key":"farazahmad","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Faraz Ahmad","active":true,"timeZone":"America/New_York"},"created":"2010-12-07T15:27:57.142+0000","updated":"2010-12-07T15:27:57.142+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492584/comment/12974051","id":"12974051","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinaythota","name":"vinaythota","key":"vinaythota","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinay Kumar Thota","active":true,"timeZone":"Etc/UTC"},"body":"bq. Which JVM version are you running? \n\njava version \"1.6.0_18\"\nJava(TM) SE Runtime Environment (build 1.6.0_18-b07)\nJava HotSpot(TM) Server VM (build 16.0-b13, mixed mode)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinaythota","name":"vinaythota","key":"vinaythota","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinay Kumar Thota","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-22T04:37:43.893+0000","updated":"2010-12-22T04:37:43.893+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12492584/comment/12974053","id":"12974053","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinaythota","name":"vinaythota","key":"vinaythota","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinay Kumar Thota","active":true,"timeZone":"Etc/UTC"},"body":"\nbq. Which values did you use for your test ?\n-Xmx1024m","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinaythota","name":"vinaythota","key":"vinaythota","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinay Kumar Thota","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-22T04:43:06.661+0000","updated":"2010-12-22T04:43:06.661+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-2211/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0d3lr:"}}