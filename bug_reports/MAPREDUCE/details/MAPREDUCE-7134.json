{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13183095","self":"https://issues.apache.org/jira/rest/api/2/issue/13183095","key":"MAPREDUCE-7134","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2018-09-05T14:30:52.508+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Sep 05 14:30:52 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-7134/watchers","watchCount":1,"isWatching":false},"created":"2018-09-05T10:58:41.198+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10342","value":"Incompatible change","id":"10342"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-09-05T14:30:52.508+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"components":[],"timeoriginalestimate":null,"description":"Information about \"setupProgress\" and \"cleanupProgress\" are not available after a job completion. These properties are ignored during creating JobReport since they were not added to jhist file.\r\nWe can get this information during a job is running:\r\n{code}\r\nimport org.apache.hadoop.mapred.JobClient\r\nimport org.apache.hadoop.conf.Configuration\r\nval client = new JobClient(new Configuration())\r\nval job = client.getJob(\"job_1535984902382_0006\")\r\nval setup = job.setupProgress()\r\n{code}\r\nWhen job runnin:\r\n{code}\r\nscala> val setup = job.setupProgress()\r\nsetup: Float = 1.0\r\n{code}\r\nWhen job already finished:\r\n{code}\r\nscala> val setup = job.setupProgress()\r\nsetup: Float = 0.0\r\n{code}\r\n\r\nJobReport interface includes getCleanupProgress and getSetupProgress methods. But these methods ignore during creating JobReport in CompletedJob#constructJobReport(). setupProgress and cleanupProgress properties set in JobImpl class but JobFinishedEvent and JobUnsuccessfulCompletionEvent do not include this information. As the result, these properties do not include in jhist file.\r\nWe can add these properties to jhist file but of course, this is the incompatible change. These changes should be applied for a major release.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12938447","id":"12938447","filename":"MAPREDUCE-7134.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=oshevchenko","name":"oshevchenko","key":"oshevchenko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=oshevchenko&avatarId=36674","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=oshevchenko&avatarId=36674","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=oshevchenko&avatarId=36674","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=oshevchenko&avatarId=36674"},"displayName":"Oleksandr Shevchenko","active":true,"timeZone":"Europe/Kiev"},"created":"2018-09-05T11:00:26.842+0000","size":185305,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12938447/MAPREDUCE-7134.001.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Setup and cleanup progress information are not available after job completion","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=oshevchenko","name":"oshevchenko","key":"oshevchenko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=oshevchenko&avatarId=36674","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=oshevchenko&avatarId=36674","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=oshevchenko&avatarId=36674","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=oshevchenko&avatarId=36674"},"displayName":"Oleksandr Shevchenko","active":true,"timeZone":"Europe/Kiev"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=oshevchenko","name":"oshevchenko","key":"oshevchenko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=oshevchenko&avatarId=36674","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=oshevchenko&avatarId=36674","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=oshevchenko&avatarId=36674","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=oshevchenko&avatarId=36674"},"displayName":"Oleksandr Shevchenko","active":true,"timeZone":"Europe/Kiev"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13183095/comment/16604475","id":"16604475","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (/) *{color:green}+1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 34s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 12 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  5m 45s{color} | {color:blue} Maven dependency ordering for branch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 22m 16s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 25m 19s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  4m  6s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  4m  0s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 22m  4s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  4m 44s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  2m 49s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 24s{color} | {color:blue} Maven dependency ordering for patch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  2m 55s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 21m 37s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 21m 37s{color} | {color:green} the patch passed {color} |\r\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  3m 50s{color} | {color:orange} root: The patch generated 43 new + 881 unchanged - 7 fixed = 924 total (was 888) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  3m 12s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 12m 10s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  4m  1s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  2m 20s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} unit {color} | {color:green}  4m 10s{color} | {color:green} hadoop-mapreduce-client-core in the patch passed. {color} |\r\n| {color:green}+1{color} | {color:green} unit {color} | {color:green}  9m 27s{color} | {color:green} hadoop-mapreduce-client-app in the patch passed. {color} |\r\n| {color:green}+1{color} | {color:green} unit {color} | {color:green}  3m 23s{color} | {color:green} hadoop-mapreduce-client-hs in the patch passed. {color} |\r\n| {color:green}+1{color} | {color:green} unit {color} | {color:green}  0m 36s{color} | {color:green} hadoop-rumen in the patch passed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 44s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black}156m 13s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:ba1ab08 |\r\n| JIRA Issue | MAPREDUCE-7134 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12938447/MAPREDUCE-7134.001.patch |\r\n| Optional Tests |  dupname  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux b3df6d92b898 3.13.0-144-generic #193-Ubuntu SMP Thu Mar 15 17:03:53 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / c7403a4 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_181 |\r\n| findbugs | v3.1.0-RC1 |\r\n| checkstyle | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/7471/artifact/out/diff-checkstyle-root.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/7471/testReport/ |\r\n| Max. process+thread count | 571 (vs. ulimit of 10000) |\r\n| modules | C: hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs hadoop-tools/hadoop-rumen U: . |\r\n| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/7471/console |\r\n| Powered by | Apache Yetus 0.8.0   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2018-09-05T14:30:52.508+0000","updated":"2018-09-05T14:30:52.508+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-7134/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3xr27:"}}