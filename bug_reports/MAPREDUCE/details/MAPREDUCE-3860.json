{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12542656","self":"https://issues.apache.org/jira/rest/api/2/issue/12542656","key":"MAPREDUCE-3860","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2013-10-11T23:18:35.714+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Oct 30 20:31:32 UTC 2013","customfield_12310420":"227942","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-3860/watchers","watchCount":6,"isWatching":false},"created":"2012-02-15T10:23:20.685+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"9.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12386379","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12386379","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12628015","key":"HADOOP-9219","self":"https://issues.apache.org/jira/rest/api/2/issue/12628015","fields":{"summary":"coverage fixing for org.apache.hadoop.tools.rumen","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/6","id":"6","description":"A new unit, integration or system test.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/requirement.png","name":"Test","subtask":false}}}},{"id":"12348223","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12348223","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12539220","key":"MAPREDUCE-3705","self":"https://issues.apache.org/jira/rest/api/2/issue/12539220","fields":{"summary":"ant build fails on 0.23 branch ","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12348222","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12348222","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12535831","key":"MAPREDUCE-3582","self":"https://issues.apache.org/jira/rest/api/2/issue/12535831","fields":{"summary":"Move successfully passing MR1 tests to MR2 maven tree.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-04-11T16:10:37.966+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313617","id":"12313617","name":"tools/rumen","description":"A tool for parsing and manipulating job history traces for use in simulation and benchmarking."}],"timeoriginalestimate":null,"description":"MAPREDUCE-3582 did not move some of the Rumen unit tests to the new folder and then MAPREDUCE-3705 deleted those unit tests. These Rumen unit tests need to be brought back:\nTestZombieJob.java\nTestRumenJobTraces.java\nTestRumenFolder.java\nTestRumenAnonymization.java\nTestParsedLine.java\nTestConcurrentRead.java","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12610439","id":"12610439","filename":"linux-surefire-reports.tar","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2013-10-26T03:51:54.036+0000","size":798720,"mimeType":"application/x-tar","content":"https://issues.apache.org/jira/secure/attachment/12610439/linux-surefire-reports.tar"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12610437","id":"12610437","filename":"mac-surfire-reports.tar","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2013-10-26T03:15:15.071+0000","size":980992,"mimeType":"application/x-tar","content":"https://issues.apache.org/jira/secure/attachment/12610437/mac-surfire-reports.tar"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12608100","id":"12608100","filename":"MAPREDUCE-3860.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-11T23:18:35.710+0000","size":757240,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12608100/MAPREDUCE-3860.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12609058","id":"12609058","filename":"MAPREDUCE-3860--n2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-17T23:30:23.802+0000","size":757467,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12609058/MAPREDUCE-3860--n2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12610619","id":"12610619","filename":"MAPREDUCE-3860--n3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-28T18:38:46.071+0000","size":758080,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12610619/MAPREDUCE-3860--n3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12611162","id":"12611162","filename":"MAPREDUCE-3860--n4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-30T20:29:08.920+0000","size":754704,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12611162/MAPREDUCE-3860--n4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12610959","id":"12610959","filename":"org.apache.hadoop.tools.rumen.TestRumenAnonymization-output.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2013-10-30T00:45:50.637+0000","size":766427,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12610959/org.apache.hadoop.tools.rumen.TestRumenAnonymization-output.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12610960","id":"12610960","filename":"org.apache.hadoop.tools.rumen.TestRumenJobTraces-output.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2013-10-30T00:45:50.640+0000","size":160949,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12610960/org.apache.hadoop.tools.rumen.TestRumenJobTraces-output.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12608099","id":"12608099","filename":"rumen-test-data.tar.gz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-11T23:18:35.706+0000","size":379916,"mimeType":"application/x-gzip","content":"https://issues.apache.org/jira/secure/attachment/12608099/rumen-test-data.tar.gz"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"80749","customfield_12312823":null,"summary":"[Rumen] Bring back the removed Rumen unit tests","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13793130","id":"13793130","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"body":"Attaching a patch and a tarball with gzip'ped test data. The robot wouldn't be able to run tests.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-11T23:18:35.714+0000","updated":"2013-10-11T23:18:35.714+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13793184","id":"13793184","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12608100/MAPREDUCE-3860.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 28 new or modified test files.\n\n      {color:red}-1 javac{color}.  The applied patch generated 1525 javac compiler warnings (more than the trunk's current 1524 warnings).\n\n    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n        {color:red}-1 release audit{color}.  The applied patch generated 16 release audit warnings.\n\n    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient hadoop-tools/hadoop-rumen hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-tests:\n\n                  org.apache.hadoop.mapred.TestClusterMapReduceTestCase\n\n                                      The following test timeouts occurred in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient hadoop-tools/hadoop-rumen hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-tests:\n\norg.apache.hadoop.mapreduce.v2.TestUberAM\norg.apache.hadoop.conf.TestNoDefaultsJobConf\n\n                                      The test build failed in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-tests hadoop-tools/hadoop-rumen \n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4112//testReport/\nRelease audit warnings: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4112//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt\nJavac warnings: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4112//artifact/trunk/patchprocess/diffJavacWarnings.txt\nConsole output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4112//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-12T00:53:16.032+0000","updated":"2013-10-12T00:53:16.032+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13797329","id":"13797329","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raviprak","name":"raviprak","key":"raviprak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=raviprak&avatarId=10113","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=raviprak&avatarId=10113","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=raviprak&avatarId=10113","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=raviprak&avatarId=10113"},"displayName":"Ravi Prakash","active":true,"timeZone":"America/Los_Angeles"},"body":"I compared the patch with branch-1. Here's my synopsis of the changes that I noticed\n\nh6. added files in src/test/resources\n- Most of the files are the same. I haven't checked the rumen-test-data.tar.gz . I presume the files in there are just the gzipped versions of the files in the patch file. Andrey? In either case I am guessing the committer will like to gzip the files her/himself.\n- sample-conf.file.new.xml is a new file. It differs from sample-conf.file.xml only in the older and newer mapred vs mapreduce config properties. This is fine\n- job-tracker-logs-topology-output is different from the branch-1 file. I wasn't entirely sure why. Andrey? Perhaps you can point me to the right branch to look at?\n\nh6. hadoop-mapreduce-client-hs/src/main changes seem fine\n- Some methods have been made VisibleForTesting.\n- createJobHistory() has been introduced so that tests may be able to override it. \n\nh6. hadoop-mapreduce-client-jobclient/src/test changes seem fine\n- Changes to get JobFileInfo\n\nh6. src/main/java/org/apache/hadoop/tools/rumen/anonymization/WordList.java \n- Any reason for this change? I couldn't find anywhere setSize() being used.\n\nh6. hadoop-tools/hadoop-rumen/src/test/java/org/apache/hadoop/tools/rumen changes\n- TestConcurrentRead.java,TestZombieJob changes seem fine\n- TestParsedLine is same as in branch-1\n- I couldn't find TestRumenAnonymization,TestRumenFolder in branch-1. Any pointers on where I may be able to find these files?\n- TestRumenJobTraces had a lot of changes. I am wondering if a different branch-1 has a closer match. Andrey? Otherwise I'll review the changes in another comment. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raviprak","name":"raviprak","key":"raviprak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=raviprak&avatarId=10113","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=raviprak&avatarId=10113","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=raviprak&avatarId=10113","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=raviprak&avatarId=10113"},"displayName":"Ravi Prakash","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-16T22:02:48.005+0000","updated":"2013-10-16T22:02:48.005+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13797333","id":"13797333","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raviprak","name":"raviprak","key":"raviprak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=raviprak&avatarId=10113","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=raviprak&avatarId=10113","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=raviprak&avatarId=10113","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=raviprak&avatarId=10113"},"displayName":"Ravi Prakash","active":true,"timeZone":"America/Los_Angeles"},"body":"A minor nit was the in TestZombieJob, the deprecation was suppressed. Rather than modify the method signature, like you did in one of the other tests. I'd prefer that, but lets do it only if you have to rework the patch. Otherwise, its fine","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raviprak","name":"raviprak","key":"raviprak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=raviprak&avatarId=10113","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=raviprak&avatarId=10113","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=raviprak&avatarId=10113","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=raviprak&avatarId=10113"},"displayName":"Ravi Prakash","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-16T22:04:46.803+0000","updated":"2013-10-16T22:04:46.803+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13797413","id":"13797413","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"body":"Ravi, thanks a lot for this summary. I should have written this myself when submitting the patch. Now answering your questions.\n\nThe old tests were deleted by the following commit:\n{code}\ncommit 00ac37838c4a55a2b855983e9730cbd26e6f3477\nAuthor: Mahadev Konar <mahadev@apache.org>\nDate:   Sat Jan 21 01:15:24 2012 +0000\n\n    MAPREDUCE-3705. ant build fails on 0.23 branch. (Thomas Graves via mahadev)\n\n    git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1234227 13f79535-47bb-0310-9956-ffa450edef68\n{code}\n\nSo I got the tests from the preceding commit, namely:\n\n{code}\ncommit 6b8a6a701a972f9528b9a2672401db51a31f52fb\nAuthor: Mahadev Konar <mahadev@apache.org>\nDate:   Sat Jan 21 00:53:02 2012 +0000\n\n    MAPREDUCE-3549. write api documentation for web service apis for RM, NM, mapreduce app master, and job history server (Thoma\n\n    git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1234222 13f79535-47bb-0310-9956-ffa450edef68\n{code}\n\nThe tests are under {{hadoop-mapreduce-project/src/test/mapred/org/apache/hadoop/tools/rumen}}. The data is under {{hadoop-mapreduce-project/src/test/tools/data/rumen}}.\n\nThe {{rumen-test-data.tar.gz}} file contains those data files which are in binary form, so I couldn't put those into a patch file. The non-binary (non-gzipped) files are in the patch file itself. So to put the changes properly it's need to apply the patch and also to un-tar {{rumen-test-data.tar.gz}}. \n\nI did not create {{sample-conf.file.new.xml}} file, it existed in the old tests. Also, see {{TestRumenAnonymization}}, {{TestRumenFolder}} there.\n\nI did change {{job-tracker-logs-topology-output}} to make tests succeed. As I understand this is caused by newer versions of Rumen  doing \"time adjustment\", so the expected data in {{job-tracker-logs-topology-output}} is not what's being produced by Rumen currently. See {{Folder.adjustJobTimes}} method. \n\nThe change in {{WordList}} is actually a bug fix. I figured it doesn't make much sense to file a separate Jira for that. Sometimes when WordList instance is being deserialized from the disk, the \"size\" attribute is read after the words themselves are read, and so when deserializing \"size\" the words list is cleared (a bug in deserialization).\n\nI did make many changes in {{TestRumenJobTraces}} and {{TestRumenAnonymization}}, that was required due to changes in Hadoop itself.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-16T23:17:54.858+0000","updated":"2013-10-16T23:17:54.858+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13798439","id":"13798439","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raviprak","name":"raviprak","key":"raviprak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=raviprak&avatarId=10113","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=raviprak&avatarId=10113","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=raviprak&avatarId=10113","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=raviprak&avatarId=10113"},"displayName":"Ravi Prakash","active":true,"timeZone":"America/Los_Angeles"},"body":"Aleksey!\n\nTests are failing and erring.\n{noformat}\nRunning org.apache.hadoop.tools.rumen.TestRumenJobTraces\nTests run: 12, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 63.803 sec <<< FAILURE! - in org.apache.hadoop.tools.rumen.TestRumenJobTraces\nRunning org.apache.hadoop.tools.rumen.TestRumenAnonymization\nTests run: 29, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 10.742 sec <<< FAILURE! - in org.apache.hadoop.tools.rumen.TestRumenAnonymization\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raviprak","name":"raviprak","key":"raviprak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=raviprak&avatarId=10113","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=raviprak&avatarId=10113","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=raviprak&avatarId=10113","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=raviprak&avatarId=10113"},"displayName":"Ravi Prakash","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-17T21:20:53.495+0000","updated":"2013-10-17T21:20:53.495+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13798459","id":"13798459","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"body":"Ravi,\nCan you please provide more info? I can't reproduce it in my environment. Surefire logs would be fine.\nBTW my name is Andrey :-)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-17T21:37:24.463+0000","updated":"2013-10-17T21:37:24.463+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13798551","id":"13798551","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raviprak","name":"raviprak","key":"raviprak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=raviprak&avatarId=10113","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=raviprak&avatarId=10113","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=raviprak&avatarId=10113","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=raviprak&avatarId=10113"},"displayName":"Ravi Prakash","active":true,"timeZone":"America/Los_Angeles"},"body":"Oops! Sorry Andrey!\nHere are the messages:\n{code}\ntestCurrentJHParser(org.apache.hadoop.tools.rumen.TestRumenJobTraces)  Time elapsed: 35.14 sec  <<< FAILURE!\njava.lang.AssertionError: Job failed\n\tat org.junit.Assert.fail(Assert.java:93)\n\tat org.junit.Assert.assertTrue(Assert.java:43)\n\tat org.apache.hadoop.tools.rumen.TestRumenJobTraces.testCurrentJHParser(TestRumenJobTraces.java:430)\n\ntestProcessInputArgument(org.apache.hadoop.tools.rumen.TestRumenJobTraces)  Time elapsed: 0.081 sec  <<< FAILURE!\njava.lang.AssertionError: Some of the history log files do not match the expected.\n\tat org.junit.Assert.fail(Assert.java:93)\n\tat org.junit.Assert.assertTrue(Assert.java:43)\n\tat org.apache.hadoop.tools.rumen.TestRumenJobTraces.validateHistoryLogPaths(TestRumenJobTraces.java:315)\n\tat org.apache.hadoop.tools.rumen.TestRumenJobTraces.testProcessInputArgument(TestRumenJobTraces.java:278)\n\ntestRumenAnonymization(org.apache.hadoop.tools.rumen.TestRumenAnonymization)  Time elapsed: 6.799 sec  <<< ERROR!\norg.apache.hadoop.yarn.exceptions.YarnRuntimeException: java.lang.OutOfMemoryError: unable to create new native thread\n\tat java.lang.Thread.start0(Native Method)\n\tat java.lang.Thread.start(Thread.java:693)\n\tat org.apache.hadoop.mapreduce.v2.MiniMRYarnCluster$JobHistoryServerWrapper.serviceStart(MiniMRYarnCluster.java:214)\n\tat org.apache.hadoop.service.AbstractService.start(AbstractService.java:193)\n\tat org.apache.hadoop.service.CompositeService.serviceStart(CompositeService.java:121)\n\tat org.apache.hadoop.service.AbstractService.start(AbstractService.java:193)\n\tat org.apache.hadoop.mapred.MiniMRClientClusterFactory.create(MiniMRClientClusterFactory.java:80)\n\tat org.apache.hadoop.mapred.MiniMRClientClusterFactory.create(MiniMRClientClusterFactory.java:41)\n\tat org.apache.hadoop.tools.rumen.TestRumenAnonymization.testRumenAnonymization(TestRumenAnonymization.java:786)\n{code}\n\nI'm running Linux 3.9 with Sun JDK1.7","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raviprak","name":"raviprak","key":"raviprak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=raviprak&avatarId=10113","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=raviprak&avatarId=10113","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=raviprak&avatarId=10113","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=raviprak&avatarId=10113"},"displayName":"Ravi Prakash","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-17T22:47:43.937+0000","updated":"2013-10-17T22:47:43.937+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13798598","id":"13798598","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"body":"Ravi,\nI reproduced the bug in {{testProcessInputArgument}} on a Linux machine, will attach a fixed patch shortly. Also I tried to reproduce the job failure in {{testCurrentJHParser}} and made a few runs of the test on 2 machines with 2.x and 3.x Linux kernels and different flavors of JDK7, but all runs succeeded. Worked on OSX too. Didn't see any issues caused by OOM. If it happens again, try giving more memory to Maven.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-17T23:30:07.812+0000","updated":"2013-10-17T23:30:07.812+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13800761","id":"13800761","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raviprak","name":"raviprak","key":"raviprak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=raviprak&avatarId=10113","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=raviprak&avatarId=10113","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=raviprak&avatarId=10113","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=raviprak&avatarId=10113"},"displayName":"Ravi Prakash","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the update Andrey! I was able to get clean runs. I had inadvertently left my local dev single node cluster up and running while running the test. *facepalm*\n\nSo far most of the changes seem fine. However I am having doubts about whether these unit tests are the right way to go about unit testing. Most of them depend on these resource files which will be checked in. I am wondering how many of these files will become stale when the state transitions are changed. And then even if these unit tests pass, rumen functionality would be broken because it would not be able to parse the JH files. Maybe the correct way of testing would be to generate these resource files using fake jobs? What do you think? I can't help but think that these tests were removed in the first place because of their poor design.\n\nAnyway, here are some other things I had concerns about:\nh6. TestRumenAnonymization\n• Line 822 catch (Exception e) I shouldn't have to wait 100 seconds if there was an exception. Same in TestRumenJobTraces:testCurrentJHParser()\n• You've made Conf common for all tests. Changes to conf in 1 test will affect the others. I'm not sure that is a good change. Should we mark rootInputDir final?\n• Line 868: Is null a valid anonymization of the job's username? \n• Why did you remove the \"lfs.delete(tempDir, true);\" lines?\n\nTestRumenJobTraces:\n• Line 923:    int[][] splits = new int[4][12];\n\nI've stopped reviewing in the middle hoping to get your thoughts about what we should do. I am a lot more interested in the long term solution rather than the short term solution.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raviprak","name":"raviprak","key":"raviprak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=raviprak&avatarId=10113","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=raviprak&avatarId=10113","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=raviprak&avatarId=10113","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=raviprak&avatarId=10113"},"displayName":"Ravi Prakash","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-21T16:00:57.379+0000","updated":"2013-10-21T16:00:57.379+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13800884","id":"13800884","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"body":"Ravi,\nWell, to begin with, majority of Hadoop \"unit\" tests are not true unit tests. I mean all these mini cluster based tests and similar ones. Still I think that with a mature and slowly evolving codebase, and priorities shifted to maturity rather than quick changes, it makes sense to have such kinds of tests, especially when the alternative is not to have any. Currently Rumen code coverage by tests is almost zero, and this has been the case for a long time. Knowing that it is probably one of the slowest changing parts of the codebase, I think having that old tests which are indeed based on static files generated manually are better than having none. As I understand some of the tests like {{TestRumenJobTraces.testHadoop20JHParser}} use static pre-generated files to test compatibility with older versions of Hadoop, and in case of {{TestRumenJobTraces}} there is {{testCurrentJHParser}} which does use a real job to generate logs and then parse them, e.g. this is the test which works with the current version of the codebase. Having said that, I agree that improving these tests to use mini clusters as much as possible, instead of using pre-generated files, is a proper way of improving the tests further. The meaning of this task is to bring back old tests, which as I understand were broken when switching to Yarn, and were removed just to fix the builds quickly.\n\nOn questions for {{TestRumentAnonymization}}. \n1. It's waiting for 100 *milli*seconds, not 100 seconds. Which is tolerable. \n2. No, having an instance of {{Configuration}} as the field in the class may not affect tests in these way. JUnit creates a dedicated instance of the class for each test execution.\n3. Not sure if this is a valid anonymization to have a null in the username. Is it?\n4. Why should those temp dirs be deleted after test runs? It makes troubleshooting more difficult. Those dirs do not interfere with each other or other tests.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-21T17:58:35.906+0000","updated":"2013-10-21T17:58:35.906+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13801931","id":"13801931","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raviprak","name":"raviprak","key":"raviprak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=raviprak&avatarId=10113","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=raviprak&avatarId=10113","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=raviprak&avatarId=10113","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=raviprak&avatarId=10113"},"displayName":"Ravi Prakash","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Andrey!\n\nThanks for your answers. \n1. It will wait for 10s (100ms * 100), but you're right, that is tolerable too. \n2. Aah! I did not know that. Thanks.\n3. I agree that username should not be null after anonymization. So maybe we should remove the line \"anonymizedJob.getUser() != null &&\"\n4. I can see it either way and I'm not a stickler about either way. I'm fine with how it is.\n\nI would probaly classify all my comments as nits above. So I'm fine with this patch. I'll let a committer make the final judgement call. Thanks Andrey!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=raviprak","name":"raviprak","key":"raviprak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=raviprak&avatarId=10113","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=raviprak&avatarId=10113","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=raviprak&avatarId=10113","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=raviprak&avatarId=10113"},"displayName":"Ravi Prakash","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-22T15:35:59.405+0000","updated":"2013-10-22T15:35:59.405+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13805723","id":"13805723","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"body":"These tests don't pass using jdk7 or on mac. Andrey, do you have a way of testing builds in that env?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2013-10-25T21:34:26.566+0000","updated":"2013-10-25T21:34:26.566+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13805741","id":"13805741","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"body":"Jonathan, I'm using exactly OSX and jdk7. Can you please give more info on failures?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-25T21:55:14.220+0000","updated":"2013-10-25T21:55:14.220+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13805756","id":"13805756","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"body":"This fails on two distinct environments and passes on one environment I have access to.\n\nFAILS\n1. Linux x86_64 javac 1.7.0_40\n2. Mac x86_64 javac 1.6.0_65\n\nSUCCESS\nLinux x86_64 javac 1.6.0_45\n\nCommand used to test.\nmvn clean test -Dtest=TestConcurrentRead,TestParsedLine,TestRumenAnonymization,TestRumenFolder,TestRumenJobTraces,TestZombieJob","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2013-10-25T22:14:52.312+0000","updated":"2013-10-25T22:14:52.312+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13805787","id":"13805787","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"body":"Still I can't reproduce failures, tried Linux x86_64 with java 1.7.0_13 and OSX with java 1.7.0_17. Please attach Surefire logs.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-25T22:57:00.447+0000","updated":"2013-10-25T22:57:00.447+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13805982","id":"13805982","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"body":"Attached failures for the tests on mac with javac 1.6.0_65","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2013-10-26T03:15:15.086+0000","updated":"2013-10-26T03:15:15.086+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13805984","id":"13805984","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12610437/mac-surfire-reports.tar\n  against trunk revision .\n\n    {color:red}-1 patch{color}.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4145//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-26T03:22:18.375+0000","updated":"2013-10-26T03:22:18.375+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13805987","id":"13805987","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"body":"Attached failures for the tests on linux with javac 1.7.0_40","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2013-10-26T03:51:54.040+0000","updated":"2013-10-26T03:51:54.040+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13805990","id":"13805990","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12610439/linux-surefire-reports.tar\n  against trunk revision .\n\n    {color:red}-1 patch{color}.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/4146//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-10-26T04:02:17.018+0000","updated":"2013-10-26T04:02:17.018+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13807082","id":"13807082","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"body":"As I see in the logs failures on Linux environment were caused by tests timeouts being too low. Attaching a patch which fixes that.\n\nAs for failures on Mac env, I see that all M/R jobs failed there. I saw similar issues when running tests without having JAVA_HOME set. Can't find more out of the logs. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-28T18:38:46.073+0000","updated":"2013-10-28T18:38:46.073+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13807263","id":"13807263","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"body":"Mac errors are due to java_home not being set. However, linux with jdk 1.7.0_40 still fails consistently even with the new patch. Will try to attach more logs with details.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2013-10-28T21:38:14.644+0000","updated":"2013-10-28T21:38:14.644+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13807668","id":"13807668","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"body":"Part of the issue is that the individual tests can't run independently. For example, the following three tests always fail when run by themselves. This type of failure is problematic for jdk 7 since test order is random. This is not an exhaustive list and there are more than this.\n\nmvn clean test -Dtest=TestRumenJobTraces#testHadoop20JHParser\nmvn clean test -Dtest=TestRumenJobTraces#testResourceUsageMetricsWithHadoopLogsAnalyzer\nmvn clean test -Dtest=TestRumenJobTraces#testTopologyBuilder","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2013-10-29T04:30:42.516+0000","updated":"2013-10-29T04:30:42.516+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13807680","id":"13807680","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"body":"Even when running the above three tests with jdk6, I am able to make the tests fail. The seem to be assuming some setup not present in the test.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2013-10-29T05:02:09.470+0000","updated":"2013-10-29T05:02:09.470+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13807693","id":"13807693","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"body":"Jonathan, thanks for testing this. Can you please attach surefire logs? I'm still missing a possible reason for the failures you see. I just tried to run the 3 commands you mentioned, and all three passed on my osx with jdk7. I'm not trying to use \"works for me\" argument, but I can't reproduce this, so logs would be really helpful. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-29T05:31:51.911+0000","updated":"2013-10-29T05:31:51.911+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13808632","id":"13808632","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"body":"Attached output for 2 failed tests that are still found. Sometimes they pass. If they do it is around a minute. If they fail they timeout.\n\nTestRumenJobTraces#testCurrentJHParser\nTestRumenAnonymization#testRumenAnonymization","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeagles","name":"jeagles","key":"jeagles","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jonathan Eagles","active":true,"timeZone":"America/Chicago"},"created":"2013-10-30T00:45:50.645+0000","updated":"2013-10-30T00:45:50.645+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13809574","id":"13809574","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"body":"Jonathan,\nThe logs don't provide much info on why tests fail. Per your description it seems that the tests hang indefinitely, so probably printing thread dumps on test timeouts would help. I'm attaching a patch which modifyis Rumen's pom.xml by adding a JUnit listener that prints thread dumps. I could not reproduce any failures in Rumen tests, tried to use 4 different machines (osx, centos, fedora on h/w nodes, and rhel on a VM). Please reproduce the failures in your environment one more time and attach Console output of Maven and all Surefire logs (not just *-output.txt). Thanks for working on this. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-30T20:29:08.924+0000","updated":"2013-10-30T20:29:08.924+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12542656/comment/13809577","id":"13809577","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"body":"Also, it could be that the timeouts I set in the tests are still too low for you, if your machine is that slow. Can you increase them by up to an order of magnitude to check that? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aklochkov","name":"aklochkov","key":"aklochkov","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrey Klochkov","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-30T20:31:32.804+0000","updated":"2013-10-30T20:31:32.804+0000"}],"maxResults":28,"total":28,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-3860/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0e63b:"}}