{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12498591","self":"https://issues.apache.org/jira/rest/api/2/issue/12498591","key":"MAPREDUCE-2325","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2011-02-17T23:14:49.955+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Feb 24 05:40:52 UTC 2011","customfield_12310420":"150136","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-2325/watchers","watchCount":4,"isWatching":false},"created":"2011-02-14T23:44:49.176+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":3600,"aggregatetimeoriginalestimate":3600,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314045","id":"12314045","description":"","name":"0.21.0","archived":false,"released":true,"releaseDate":"2010-08-23"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-02-24T05:40:52.797+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312982","id":"12312982","name":"client","description":"Code for submitting and monitoring jobs"}],"timeoriginalestimate":3600,"description":"o.a.h.mapreduce.TaskReport is returned by Job.getTaskReports(TaskType), which is marked as Public/Evolving. TaskReport, however, is marked as Private. This looks like an oversight: The last time it was mentioned in HADOOP-1623, Tom White [suggested|https://issues.apache.org/jira/browse/MAPREDUCE-1623?focusedCommentId=12863494&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12863494] that it should be Public, but all of the patches continued to use Private.\n\nIf this _isn't_ supposed to be public, where is the best place to get the list of running tasks (not just completed ones)?","customfield_10010":null,"timetracking":{"originalEstimate":"1h","remainingEstimate":"1h","originalEstimateSeconds":3600,"remainingEstimateSeconds":3600},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12471779","id":"12471779","filename":"MAPREDUCE-2325.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cimbul","name":"cimbul","key":"cimbul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Yates","active":true,"timeZone":"Etc/UTC"},"created":"2011-02-23T22:55:30.519+0000","size":7457,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12471779/MAPREDUCE-2325.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12471445","id":"12471445","filename":"MAPREDUCE-2325.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cimbul","name":"cimbul","key":"cimbul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Yates","active":true,"timeZone":"Etc/UTC"},"created":"2011-02-18T23:17:38.841+0000","size":1056,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12471445/MAPREDUCE-2325.patch"}],"aggregatetimeestimate":3600,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"111964","customfield_12312823":null,"summary":"Mark o.a.h.mapreduce.TaskReport as public?","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cimbul","name":"cimbul","key":"cimbul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Yates","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cimbul","name":"cimbul","key":"cimbul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Yates","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":3600,"percent":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":3600,"percent":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12498591/comment/12996149","id":"12996149","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomwhite","name":"tomwhite","key":"tomwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom White","active":true,"timeZone":"Europe/London"},"body":"+1 to making TaskReport Public Evolving. We should then make getCurrentStatus() Private (or TIPStatus Public).\n\nWould you like to provide a patch? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomwhite","name":"tomwhite","key":"tomwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom White","active":true,"timeZone":"Europe/London"},"created":"2011-02-17T23:14:49.955+0000","updated":"2011-02-17T23:14:49.955+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12498591/comment/12996649","id":"12996649","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cimbul","name":"cimbul","key":"cimbul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Yates","active":true,"timeZone":"Etc/UTC"},"body":"Makes TaskReport Public Evolving and TIPStatus Public Unstable","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cimbul","name":"cimbul","key":"cimbul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Yates","active":true,"timeZone":"Etc/UTC"},"created":"2011-02-18T23:17:38.888+0000","updated":"2011-02-18T23:17:38.888+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12498591/comment/12996655","id":"12996655","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cimbul","name":"cimbul","key":"cimbul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Yates","active":true,"timeZone":"Etc/UTC"},"body":"Oops. Not used to JIRA...\n\nThe patch is easy enough, but TIPStatus opens a can of worms. On the one hand, making getCurrentStatus() private modifies the interface of the Public Stable subclass o.a.h.mapred.TaskReport. On the other, making TIPStatus public would expose an o.a.h.mapred class through an o.a.h.mapreduce one.\n\nSome options:\n- Move getCurrentStatus() to o.a.h.mapred.TaskReport and remove it from the o.a.h.mapreduce.TaskReport.\n- Make a separate o.a.h.mapreduce.TIPStatus enum and convert back and forth from its o.a.h.mapred counterpart.\n- Make a completely new status enum.\n\nI'm not sure I like any of these. I would hate to get rid of the status information, but making new enums sounds messy. Other suggestions?\n\nFor now, I just make TIPStatus Public Unstable, which is unorthodox, but it led to fewer build errors than making getCurrentStatus() private.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cimbul","name":"cimbul","key":"cimbul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Yates","active":true,"timeZone":"Etc/UTC"},"created":"2011-02-18T23:30:36.215+0000","updated":"2011-02-18T23:30:36.215+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12498591/comment/12996665","id":"12996665","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomwhite","name":"tomwhite","key":"tomwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom White","active":true,"timeZone":"Europe/London"},"body":"How about doing the first two options together: move getCurrentStatus() to o.a.h.mapred.TaskReport and add a new method getTIPStatus() to o.a.h.mapreduce.TaskReport which returns a new enum o.a.h.mapreduce.TIPStatus.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomwhite","name":"tomwhite","key":"tomwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom White","active":true,"timeZone":"Europe/London"},"created":"2011-02-19T00:01:57.000+0000","updated":"2011-02-19T00:01:57.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12498591/comment/12998593","id":"12998593","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cimbul","name":"cimbul","key":"cimbul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Yates","active":true,"timeZone":"Etc/UTC"},"body":"I followed your suggestion, creating a new enum and moving the old method to the old class. A few questions:\n- I made both enums Public/Evolving. Is this reasonable?\n- I added a standard downgrade() method to o.a.h.mapred.TIPStatus. Because this is an enum and you can't simply upcast to o.a.h.mapreduce.TIPStatus, I also added an upgrade() method:\n-- Are there better or more standard alternatives? Have you encountered this problem elsewhere?\n-- Is this method in the right place (the old enum, like downgrade)?\n-- Should it be a static method (like downgrade), or is an instance method better (like I have now)?\n\nThe only code that this change seemed to affect was o.a.h.mapreduce.tools.CLI, which was an easy fix. Everything else built fine on my system, including contrib.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cimbul","name":"cimbul","key":"cimbul","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Yates","active":true,"timeZone":"Etc/UTC"},"created":"2011-02-23T22:55:30.546+0000","updated":"2011-02-23T22:55:30.546+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12498591/comment/12998700","id":"12998700","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomwhite","name":"tomwhite","key":"tomwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom White","active":true,"timeZone":"Europe/London"},"body":"Public/Evolving is fine for the enums. Also, the downgrade/upgrade methods look good (and are consistent with the way a similar thing is done in Counters, for example). I would make these methods package private (or mark them as Private if that's not possible), since they are not a part of the public API.\n\nA couple of nits: the indentation should be 2 spaces (you have 4 in places); and the brace style in the downgrade and upgrade methods is different to the usual style in the rest of the code.\n\nCan you run test patch and the unit tests? Let me know if you need any help doing so (normally Hudson would run this when marked as patch available, but I'm not sure it's running at the moment).\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomwhite","name":"tomwhite","key":"tomwhite","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tom White","active":true,"timeZone":"Europe/London"},"created":"2011-02-24T05:40:52.761+0000","updated":"2011-02-24T05:40:52.761+0000"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-2325/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0jiq7:"}}