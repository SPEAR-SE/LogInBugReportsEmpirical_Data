{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12403495","self":"https://issues.apache.org/jira/rest/api/2/issue/12403495","key":"MAPREDUCE-593","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2008-09-01T13:44:48.370+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jul 18 22:39:42 UTC 2014","customfield_12310420":"148921","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_185446532200_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-07-18T22:39:42.124+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-593/watchers","watchCount":1,"isWatching":false},"created":"2008-09-01T13:44:10.099+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12346512","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12346512","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12536180","key":"MAPREDUCE-3594","self":"https://issues.apache.org/jira/rest/api/2/issue/12536180","fields":{"summary":"Contrib/Streaming - Test org.apache.hadoop.streaming.TestUlimit fails on VM","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-07-18T22:39:42.257+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312905","id":"12312905","name":"contrib/streaming"}],"timeoriginalestimate":null,"description":"the testUlimit test sets a memory limit that is too small for Java to start. So it fails with a -1 response instead, which breaks the test. ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"108034","customfield_12312823":null,"summary":"org.apache.hadoop.streaming.TestUlimit fails on JRockit 64-bit; not enough memory","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Linux morzine 2.6.22-15-generic #1 SMP Fri Jul 11 18:56:36 UTC 2008 x86_64 GNU/Linux\njava version \"1.6.0_02\"\nJava(TM) SE Runtime Environment (build 1.6.0_02-b05)\nBEA JRockit(R) (build R27.4.0-90-89592-1.6.0_02-20070928-1715-linux-x86_64, compiled mode)","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12403495/comment/12627457","id":"12627457","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"body":"stack trace in the test\n\n08/09/01 13:47:05 [Thread-84] INFO mapred.TaskTracker : LaunchTaskAction: attempt_200809011346_0001_m_000002_0\n08/09/01 13:47:05 [IPC Server handler 9 on 43325] INFO mapred.TaskInProgress : Error from attempt_200809011346_0001_m_000001_0: java.io.IOException: Task process exit with nonzero status of 1: bash -c \"'ulimit' '-v' '786432' ;exec '/usr/java/jrockit-1.6.0_02/jre/bin/java' '-Djava.library.path=/usr/java/jrockit-1.6.0_02/jre/lib/amd64/jrockit:/usr/java/jrockit-1.6.0_02/jre/lib/amd64:/usr/java/jrockit-1.6.0_02/jre/../lib/amd64:/home/slo/Java/Apache/hadoop-core/build/contrib/streaming/test/mapred/local/1_0/taskTracker/jobcache/job_200809011346_0001/attempt_200809011346_0001_m_000001_0/work' '-Xmx200m' '-Djava.io.tmpdir=/home/slo/Java/Apache/hadoop-core/build/contrib/streaming/test/mapred/local/1_0/taskTracker/jobcache/job_200809011346_0001/attempt_200809011346_0001_m_000001_0/work/tmp' '-classpath' '/home/slo/Java/Apache/hadoop-core/build/contrib/streaming/test:/home/slo/Java/Apache/hadoop-core/build/test/classes:/home/slo/Java/Apache/hadoop-core/src/contrib/test:/home/slo/Java/Apache/hadoop-core/conf:/home/slo/Java/Apache/hadoop-core/build:/home/slo/Java/Apache/hadoop-core/build/contrib/streaming/examples:/home/slo/Java/Apache/hadoop-core/build/contrib/streaming/classes:/home/slo/Java/Apache/hadoop-core/build/classes:/home/slo/Java/Apache/hadoop-core/lib/commons-cli-2.0-SNAPSHOT.jar:/home/slo/Java/Apache/hadoop-core/lib/commons-codec-1.3.jar:/home/slo/Java/Apache/hadoop-core/lib/commons-httpclient-3.0.1.jar:/home/slo/Java/Apache/hadoop-core/lib/commons-logging-1.0.4.jar:/home/slo/Java/Apache/hadoop-core/lib/commons-logging-api-1.0.4.jar:/home/slo/Java/Apache/hadoop-core/lib/commons-net-1.4.1.jar:/home/slo/Java/Apache/hadoop-core/lib/jets3t-0.6.1.jar:/home/slo/Java/Apache/hadoop-core/lib/jetty-5.1.4.jar:/home/slo/Java/Apache/hadoop-core/lib/jetty-ext/commons-el.jar:/home/slo/Java/Apache/hadoop-core/lib/jetty-ext/jasper-compiler.jar:/home/slo/Java/Apache/hadoop-core/lib/jetty-ext/jasper-runtime.jar:/home/slo/Java/Apache/hadoop-core/lib/jetty-ext/jsp-api.jar:/home/slo/Java/Apache/hadoop-core/lib/junit-3.8.1.jar:/home/slo/Java/Apache/hadoop-core/lib/kfs-0.2.0.jar:/home/slo/Java/Apache/hadoop-core/lib/log4j-1.2.15.jar:/home/slo/Java/Apache/hadoop-core/lib/oro-2.0.8.jar:/home/slo/Java/Apache/hadoop-core/lib/servlet-api.jar:/home/slo/Java/Apache/hadoop-core/lib/slf4j-api-1.4.3.jar:/home/slo/Java/Apache/hadoop-core/lib/slf4j-log4j12-1.4.3.jar:/home/slo/Java/Apache/hadoop-core/lib/xmlenc-0.52.jar:/home/slo/Java/Apache/ant/lib/junit-3.8.2.jar:/home/slo/Java/Apache/ant/lib/ant-launcher.jar:/home/slo/Java/Apache/ant/lib/ant.jar:/home/slo/Java/Apache/ant/lib/ant-junit.jar::/home/slo/Java/Apache/hadoop-core/build/contrib/streaming/test/mapred/local/1_0/taskTracker/jobcache/job_200809011346_0001/jars/classes:/home/slo/Java/Apache/hadoop-core/build/contrib/streaming/test/mapred/local/1_0/taskTracker/jobcache/job_200809011346_0001/jars:/home/slo/Java/Apache/hadoop-core/build/contrib/streaming/test/mapred/local/1_0/taskTracker/jobcache/job_200809011346_0001/attempt_200809011346_0001_m_000001_0/work' '-Dhadoop.log.dir=/home/slo/Java/Apache/hadoop-core/build/contrib/streaming/test/logs' '-Dhadoop.root.logger=INFO,TLA' '-Dhadoop.tasklog.taskid=attempt_200809011346_0001_m_000001_0' '-Dhadoop.tasklog.totalLogFileSize=0' 'org.apache.hadoop.mapred.TaskTracker$Child' '127.0.0.1' '60775' 'attempt_200809011346_0001_m_000001_0'  < /dev/null  1>> /home/slo/Java/Apache/hadoop-core/build/contrib/streaming/test/logs/userlogs/attempt_200809011346_0001_m_000001_0/stdout 2>> /home/slo/Java/Apache/hadoop-core/build/contrib/streaming/test/logs/userlogs/attempt_200809011346_0001_m_000001_0/stderr\" \n\tat org.apache.hadoop.mapred.TaskRunner.runChild(TaskRunner.java:463)\n\tat org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:404)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"created":"2008-09-01T13:44:48.370+0000","updated":"2008-09-01T13:44:48.370+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12403495/comment/12627458","id":"12627458","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"body":"And what happens when you set a ulimit of that size: JRockit refuses to play\n\n> bash\nslo@morzine:~/Java/Apache/hadoop-core$ ulimit -v 786432\nslo@morzine:~/Java/Apache/hadoop-core$ java -version\n[ERROR] Not enough virtual memory to start JRockit. \n[INFO ] If you use 'ulimit -v <amount>', make sure you specify the amount to at least 1100000\nCould not create the Java virtual machine.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"created":"2008-09-01T13:46:45.403+0000","updated":"2008-09-01T13:46:45.403+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12403495/comment/12627459","id":"12627459","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"body":"What would seem a good solution here would be allow anyone to override the memory limit in their build.properties file; have a test.ulimit value that could be overridden. \nThat avoids the test having to be clever about JVM size; make it up to the user whose tests fail.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"created":"2008-09-01T13:49:26.213+0000","updated":"2008-09-01T13:49:26.213+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12403495/comment/12794238","id":"12794238","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"body":"Since Oracle stopped making new releases of the JRockit JVM public, and the old version not up to date w/r/t security patches, I've stopped using JRockit. So I can no longer replicate this. \n\nThat doesn't mean that the ulimit should not be overrideable, as the problem may arise again in future. Only that we won't be able to check any fix works. \n\nWhy not downgrade to WONTFIX or WORKSFORME until someone else re-encounters the problem?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"created":"2009-12-23T21:57:53.589+0000","updated":"2009-12-23T21:57:53.589+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12403495/comment/14067018","id":"14067018","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"Won't Fix works for me, historical Steve.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2014-07-18T22:39:42.245+0000","updated":"2014-07-18T22:39:42.245+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-593/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0iuhr:"}}