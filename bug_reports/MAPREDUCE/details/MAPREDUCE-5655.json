{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12681259","self":"https://issues.apache.org/jira/rest/api/2/issue/12681259","key":"MAPREDUCE-5655","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2013-11-26T15:03:15.165+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Apr 10 04:16:23 UTC 2014","customfield_12310420":"360524","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_47135_*|*_1_*:*_2_*:*_537505617_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-12-02T18:35:29.676+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-5655/watchers","watchCount":8,"isWatching":false},"created":"2013-11-26T13:16:16.994+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325050","id":"12325050","description":"2.2.0 release","name":"2.2.0","archived":false,"released":true,"releaseDate":"2013-10-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12325257","id":"12325257","description":"2.3.0 release","name":"2.3.0","archived":false,"released":true,"releaseDate":"2014-02-20"}],"issuelinks":[{"id":"12379285","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12379285","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12547545","key":"MAPREDUCE-4052","self":"https://issues.apache.org/jira/rest/api/2/issue/12547545","fields":{"summary":"Windows eclipse cannot submit job from Windows client to Linux/Unix Hadoop cluster.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=JoyoungZhang%40gmail.com","name":"JoyoungZhang@gmail.com","key":"joyoungzhang@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"JoneZhang","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-04-10T04:16:23.357+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312982","id":"12312982","name":"client","description":"Code for submitting and monitoring jobs"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12313413","id":"12313413","name":"job submission"}],"timeoriginalestimate":null,"description":"I was trying to run a java class on my client, windows 7 developer environment, which submits a job to the remote Hadoop cluster, initiates a mapreduce there, and then downloads the results back to the local machine.\n\nGeneral use case is to use hadoop services from a web application installed on a non-cluster computer, or as part of a developer environment.\n\nThe problem was, that the ApplicationMaster's startup shell script (launch_container.sh) was generated with wrong CLASSPATH entry. Together with the java process call on the bottom of the file, these entries were generated in windows style, using % as shell variable marker and ; as the CLASSPATH delimiter.\n\nI tracked down the root cause, and found that the MrApps.java, and the YarnRunner.java classes create these entries, and is passed forward to the ApplicationMaster, assuming that the OS that runs these classes will match the one running the ApplicationMaster. But it's not the case, these are in 2 different jvm, and also the OS can be different, the strings are generated based on the client/submitter side's OS.\n\nI made some workaround changes to these 2 files, so i could launch my job, however there may be more problems ahead.\n\nupdate\n error message:\n13/12/04 16:33:15 INFO mapreduce.Job: Job job_1386170530016_0001 failed with state FAILED due to: Application application_1386170530016_0001 failed 2 times due to AM Container for appattempt_1386170530016_0001_000002 exited with  exitCode: 1 due to: Exception from container-launch: \norg.apache.hadoop.util.Shell$ExitCodeException: /bin/bash: line 0: fg: no job control\n\nat org.apache.hadoop.util.Shell.runCommand(Shell.java:464)\n\tat org.apache.hadoop.util.Shell.run(Shell.java:379)\n\tat org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:589)\n\tat org.apache.hadoop.yarn.server.nodemanager.DefaultContainerExecutor.launchContainer(DefaultContainerExecutor.java:195)\n\tat org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:283)\n\tat org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:79)\n\tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:166)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\tat java.lang.Thread.run(Thread.java:724)\n\nupdate2: \n It also reqires to add the following property to \n mapred-site.xml (or mapred-default.xml), on the windows box, so that the job launcher knows, that the job runner will be a linux:\n  <property>\n  <name>mapred.remote.os</name>\n  <value>Linux</value>\n  <description>Remote MapReduce framework's OS, can be either Linux or Windows</description>\n </property\n\nwithout this entry, the patched jar does the same as the unpatched, so it's required to work!","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12616981","id":"12616981","filename":"MRApps.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=padisah","name":"padisah","key":"padisah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Attila Pados","active":true,"timeZone":"Europe/Berlin"},"created":"2013-12-04T13:44:57.639+0000","size":5258,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12616981/MRApps.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12616982","id":"12616982","filename":"YARNRunner.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=padisah","name":"padisah","key":"padisah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Attila Pados","active":true,"timeZone":"Europe/Berlin"},"created":"2013-12-04T13:44:57.643+0000","size":720,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12616982/YARNRunner.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"360823","customfield_12312823":null,"summary":"Remote job submit from windows to a linux hadoop cluster fails due to wrong classpath","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=padisah","name":"padisah","key":"padisah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Attila Pados","active":true,"timeZone":"Europe/Berlin"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=padisah","name":"padisah","key":"padisah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Attila Pados","active":true,"timeZone":"Europe/Berlin"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Client machine is a Windows 7 box, with Eclipse\nRemote: there is a multi node hadoop cluster, installed on Ubuntu boxes (any linux)","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12681259/comment/13832593","id":"13832593","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=padisah","name":"padisah","key":"padisah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Attila Pados","active":true,"timeZone":"Europe/Berlin"},"body":"I wanted to upload 2 patch files, however the jira tool's Submit Patch dialog was instead a \"Submit bug\" dialog, without any patch upload input field whatever, so i skipped it.\nIf someone helps me to find the correct way to upload them i will do it, though this is a workaround, and should not mean a long term solution.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=padisah","name":"padisah","key":"padisah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Attila Pados","active":true,"timeZone":"Europe/Berlin"},"created":"2013-11-26T13:48:14.252+0000","updated":"2013-11-26T13:48:14.252+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12681259/comment/13832638","id":"13832638","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj.k","name":"devaraj.k","key":"devaraj.k","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj K","active":true,"timeZone":"America/Los_Angeles"},"body":"Duplicate of MAPREDUCE-4052.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj.k","name":"devaraj.k","key":"devaraj.k","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj K","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-11-26T15:03:15.165+0000","updated":"2013-11-26T15:03:15.165+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12681259/comment/13832751","id":"13832751","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=padisah","name":"padisah","key":"padisah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Attila Pados","active":true,"timeZone":"Europe/Berlin"},"body":"MAPREDUCE-4052 affects 0.23.1, and the relevant codes are also different, \nthis bug is for version 2.2.0\n\nalso, in this case the java process call was referring to the java_home as %JAVA_HOME%, which wasn't mentioned in that bug, and here part of the problem\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=padisah","name":"padisah","key":"padisah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Attila Pados","active":true,"timeZone":"Europe/Berlin"},"created":"2013-11-26T16:46:43.940+0000","updated":"2013-11-26T16:46:43.940+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12681259/comment/13836763","id":"13836763","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi, [~padisah].  Thanks for the bug report.\n\nI do think this is a duplicate of MAPREDUCE-4052.  The 0.23.x code line is similar to the 2.2.x code line.  It's often the case that a bug in 2.2.x is also a bug in 0.23.x.  I've just updated MAPREDUCE-4052 to make the title clearer and indicate that it also affects version 2.2.0.\n\nI recommend that your participate on MAPREDUCE-4052.  There is a patch attached to that issue, but it's a few months old, so it's likely to be out-of-date at this point.  Seeing your latest patch would be valuable.  You can upload your patch by clicking the More button at the top and then going through the Attach Files dialog.  The Submit Patch button is used to submit your patch to Jenkins for a test run against current trunk.\n\nThanks again!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-02T18:35:29.715+0000","updated":"2013-12-02T18:35:29.715+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12681259/comment/13838899","id":"13838899","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=padisah","name":"padisah","key":"padisah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Attila Pados","active":true,"timeZone":"Europe/Berlin"},"body":"These 2 patches intend to fix different jobLaunch/jobExecution OS problems with MapReduce. It also reqires to add the following property to \nmapred-site.xml (or mapred-default.xml):\n\n<property>\n  <name>mapred.remote.os</name>\n  <value>Linux</value>\n  <description>Remote MapReduce framework's OS, can be either Linux or Windows</description>\n</property\n\nThis is used when job launched from windows, executed in Linux.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=padisah","name":"padisah","key":"padisah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Attila Pados","active":true,"timeZone":"Europe/Berlin"},"created":"2013-12-04T13:44:57.648+0000","updated":"2013-12-04T13:44:57.648+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12681259/comment/13838908","id":"13838908","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=padisah","name":"padisah","key":"padisah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Attila Pados","active":true,"timeZone":"Europe/Berlin"},"body":"I checked the patches of MAPREDUCE-4052, the patch for ContainerLaunch.java finds the part to modify in the 136th line. The same code in the 2.2.0 version begins at 173th line. So, i think the patch for 0.23.x is not compatible with 2.2.0, and vice versa. The 2 bugs originate from the same problem, but they are also different, the first problem i faced was that the launch_container.sh tried to start java with %JAVA_HOME% and i got  a \"task returned with -1\" or similar error, because the shell script could not be executed. \n\nMy patch fixes this issue too.\n\nThere is a config entry in mapred-default.xml:\n\n<property>\n  <description>...</description>\n   <name>mapreduce.application.classpath</name>\n   <value>$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*,\n  $HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*.</value>\n</property>\n\nThis probably needs to be altered also, due to the $ - %--% difference between windows- linux as well.\nIf you set up your environment to run the job in local/windows, you need to set it it to %, but when the job will run on a linux cluster, it must be set back to the $ which is the default i think.\n\nThe patch may cause the failure of a unit test, if the mapred.remote.os is set, and the test runs a job in local mode. This is not tested by me, because i had several other issues with running the unit tests, so i skipped this.\n\nI have to repeat, that this is merely a workaround, probably more deep changes would be needed, that the launch_container.sh would be created by a java component running on the cluster side instead of the client side, but i don't feel myself capable of doing that. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=padisah","name":"padisah","key":"padisah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Attila Pados","active":true,"timeZone":"Europe/Berlin"},"created":"2013-12-04T14:07:12.619+0000","updated":"2013-12-04T14:07:12.619+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12681259/comment/13838923","id":"13838923","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=padisah","name":"padisah","key":"padisah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Attila Pados","active":true,"timeZone":"Europe/Berlin"},"body":"the vice versa case: linux client, windows cluster is not handled by this patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=padisah","name":"padisah","key":"padisah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Attila Pados","active":true,"timeZone":"Europe/Berlin"},"created":"2013-12-04T14:21:45.026+0000","updated":"2013-12-04T14:21:45.026+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12681259/comment/13839082","id":"13839082","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"Regarding the {{mapreduce.application.classpath}} configuration property, this part was already fixed in MAPREDUCE-5442.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-04T17:19:24.421+0000","updated":"2013-12-04T17:19:24.421+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12681259/comment/13899968","id":"13899968","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=irudyak","name":"irudyak","key":"irudyak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=irudyak&avatarId=29033","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=irudyak&avatarId=29033","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=irudyak&avatarId=29033","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=irudyak&avatarId=29033"},"displayName":"Igor Rudyak","active":true,"timeZone":"Etc/GMT-8"},"body":"In addition to applying attached patches and recompiling appropriate client jars, you should also do such things:\n\n1) Add such config property to your mapred-site.xml (client side only):\n\n\t<property>\n\t\t<name>mapreduce.application.classpath</name>\n\t\t<value>\n\t\t\t$HADOOP_CONF_DIR,\n\t\t\t$HADOOP_COMMON_HOME/share/hadoop/common/*,\n\t\t\t$HADOOP_COMMON_HOME/share/hadoop/common/lib/*,\n\t\t\t$HADOOP_HDFS_HOME/share/hadoop/hdfs/*,\n\t\t\t$HADOOP_HDFS_HOME/share/hadoop/hdfs/lib/*,\n\t\t\t$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*,\n\t\t\t$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*,\n\t\t\t$HADOOP_YARN_HOME/share/hadoop/yarn/*,\n\t\t\t$HADOOP_YARN_HOME/share/hadoop/yarn/lib/*\n\t\t</value>\n\t</property>\n\t\n2) Add such config property to your yarn-site.xml (client side only):\n\n\t<property>\n\t\t<name>mapreduce.application.classpath</name>\n\t\t<value>\n\t\t\t$HADOOP_CONF_DIR,\n\t\t\t$HADOOP_COMMON_HOME/share/hadoop/common/*,\n\t\t\t$HADOOP_COMMON_HOME/share/hadoop/common/lib/*,\n\t\t\t$HADOOP_HDFS_HOME/share/hadoop/hdfs/*,\n\t\t\t$HADOOP_HDFS_HOME/share/hadoop/hdfs/lib/*,\n\t\t\t$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*,\n\t\t\t$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*,\n\t\t\t$HADOOP_YARN_HOME/share/hadoop/yarn/*,\n\t\t\t$HADOOP_YARN_HOME/share/hadoop/yarn/lib/*\n\t\t</value>\n\t</property>\n\nWithout such configuration on the client side you will have issues like this:\n\nhttps://issues.apache.org/jira/browse/YARN-1532\nhttps://issues.apache.org/jira/browse/MAPREDUCE-4052\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=irudyak","name":"irudyak","key":"irudyak","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=irudyak&avatarId=29033","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=irudyak&avatarId=29033","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=irudyak&avatarId=29033","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=irudyak&avatarId=29033"},"displayName":"Igor Rudyak","active":true,"timeZone":"Etc/GMT-8"},"created":"2014-02-13T03:02:06.865+0000","updated":"2014-02-13T03:02:06.865+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12681259/comment/13920609","id":"13920609","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jianhe","name":"jianhe","key":"jianhe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jian He","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~padisah], are you still working on this?  I'd like to take it over.\nWe should give a more generic solution and instead of forcing client to make the configuration, we can give a platform-agnostic syntax to the NM and have the NM itself to replace that with the appropriate syntax according to the OS its running with, just like the way we are doing with nm-log-dir.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jianhe","name":"jianhe","key":"jianhe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jian He","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-03-05T07:32:27.364+0000","updated":"2014-03-05T07:32:27.364+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12681259/comment/13920695","id":"13920695","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=padisah","name":"padisah","key":"padisah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Attila Pados","active":true,"timeZone":"Europe/Berlin"},"body":"Hi Jian,\n no i am not working on it, i only wanted to drop in a quick workaround patch for people who stumble upon this problem. I am happy that someone takes it over and gives a more generic solution!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=padisah","name":"padisah","key":"padisah","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Attila Pados","active":true,"timeZone":"Europe/Berlin"},"created":"2014-03-05T09:33:13.626+0000","updated":"2014-03-05T09:33:13.626+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12681259/comment/13959593","id":"13959593","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Daniel+Crabtree","name":"Daniel Crabtree","key":"daniel crabtree","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Crabtree","active":true,"timeZone":"Pacific/Auckland"},"body":"This bug also affects 2.3.0. \n\nI've tested this patch on 2.3.0 and it fixes the problem. However, in addition to applying attached patches and recompiling appropriate client jars, and the additions mentioned by Igor Rudyak, I also had to create a jar for the client side map reduce job and set \"mapreduce.job.jar\" to that jar on the client side. \n\nThis can be done programatically on a Configuration object as follows: \nconf.set(\"mapreduce.job.jar\",\"C:\\application.jar\");","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Daniel+Crabtree","name":"Daniel Crabtree","key":"daniel crabtree","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Crabtree","active":true,"timeZone":"Pacific/Auckland"},"created":"2014-04-04T03:22:11.527+0000","updated":"2014-04-04T03:22:11.527+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12681259/comment/13964931","id":"13964931","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=JoyoungZhang%40gmail.com","name":"JoyoungZhang@gmail.com","key":"joyoungzhang@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"JoneZhang","active":true,"timeZone":"Etc/UTC"},"body":"I've tested this patch on 2.2.0,it words fine. It should be pointed out that there are two aspects of the problem\n1.It's vargs.add(\"Linux\".equals(remoteOs) ?   \"$JAVA_HOME/bin/java\" : Environment.JAVA_HOME.$() + \"/bin/java\"); \nbut vargs.add(\"Linux\".equals(remoteOs) ?   \"$JAVA_HOME/bin/java\" : Environment.JAVA_HOME.$()); in YARNRunner.patch\n2.you should add \"mapreduce.application.classpath\" to Configuration on the windows box","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=JoyoungZhang%40gmail.com","name":"JoyoungZhang@gmail.com","key":"joyoungzhang@gmail.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"JoneZhang","active":true,"timeZone":"Etc/UTC"},"created":"2014-04-10T03:15:28.389+0000","updated":"2014-04-10T03:15:28.389+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12681259/comment/13964967","id":"13964967","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jianhe","name":"jianhe","key":"jianhe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jian He","active":true,"timeZone":"America/Los_Angeles"},"body":"Please refer to MAPREDUCE-4052 for the fix,  the patch uploaded here is dead.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jianhe","name":"jianhe","key":"jianhe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jian He","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-10T04:16:23.357+0000","updated":"2014-04-10T04:16:23.357+0000"}],"maxResults":14,"total":14,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-5655/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1q5db:"}}