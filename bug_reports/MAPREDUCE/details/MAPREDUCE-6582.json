{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12923249","self":"https://issues.apache.org/jira/rest/api/2/issue/12923249","key":"MAPREDUCE-6582","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2015-12-19T21:58:56.175+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Dec 19 22:09:27 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-6582/watchers","watchCount":2,"isWatching":false},"created":"2015-12-19T21:38:45.729+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12331978","id":"12331978","description":"2.7.1 release","name":"2.7.1","archived":false,"released":true,"releaseDate":"2015-07-06"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-12-24T23:37:10.057+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312982","id":"12312982","name":"client","description":"Code for submitting and monitoring jobs"}],"timeoriginalestimate":null,"description":"In MapReduce, a list of default configuration values in the source code are inconsistent with what is specified in {{mapred-default.xml}},\n(https://hadoop.apache.org/docs/r2.7.1/hadoop-mapreduce-client/hadoop-mapreduce-client-core/)\n\nI suppose the inconsistency are caused by obsoleteness (either the code or the xml), and #2 is more like a bug...\n\\\\\n\\\\\n\n*1. {{mapreduce.reduce.shuffle.fetch.retry.timeout-ms}}*\nIn mapred-default.xml, the value is {{30000}}, while it is {{180000}} in the code,\n\n{code:title=Fetcher.java (only usage)|borderStyle=solid}\n 60   private static final int DEFAULT_STALLED_COPY_TIMEOUT = 3 * 60 * 1000;\n...\n152     this.fetchRetryTimeout = job.getInt(MRJobConfig.SHUFFLE_FETCH_RETRY_TIMEOUT_MS,\n153         DEFAULT_STALLED_COPY_TIMEOUT);\n{code}\n\\\\\n\n*2. {{mapreduce.shuffle.ssl.file.buffer.size}}*\nIn mapred-default.xml, the value is {{65536}}, while it is {{61440}} in the code,\n{code:title=ShuffleHandler.java  (only usage)|borderStyle=solid}\n 203   public static final int DEFAULT_SUFFLE_SSL_FILE_BUFFER_SIZE = 60 * 1024;\n...\n 396     sslFileBufferSize = conf.getInt(SUFFLE_SSL_FILE_BUFFER_SIZE_KEY,\n 397                                     DEFAULT_SUFFLE_SSL_FILE_BUFFER_SIZE);\n{code}\n\nThis one looks quite weird, because normally it should be {{64 * 1024}} (i.e., {{65536}}). _I don't know whether it's a typo..._\n\\\\\n\\\\\n\n*3. {{mapreduce.reduce.shuffle.merge.percent}}*\nIn mapred-default.xml, the value is {{0.66}}, while it is {{0.9}} in the code,\n{code:title=MergeManagerImpl.java  (only usage)|borderStyle=solid}\n194                           jobConf.getFloat(MRJobConfig.SHUFFLE_MERGE_PERCENT,\n195                                            0.90f));\n{code}\n\\\\\n\n*4. {{mapreduce.task.timeout}}*\nIn mapred-default.xml, the value is {{600000}}, while it is {{300000}} in the code,\n{code:title=TaskHeartbeatHandler.java  (only usage)|borderStyle=solid}\n 90     taskTimeOut = conf.getInt(MRJobConfig.TASK_TIMEOUT, 5 * 60 * 1000);\n{code}\n\\\\\n\n*5. {{mapreduce.task.io.sort.factor}}*\nIn mapred-default.xml, the value is {{10}}, while it is {{100}} in the code,\n{code:title=MergeManagerImpl.java  (Usage #1)|borderStyle=solid}\n175     this.ioSortFactor = jobConf.getInt(MRJobConfig.IO_SORT_FACTOR, 100);\n{code}\n{code:title=MapTask.java  (Usage #2)|borderStyle=solid}\n 970       final int sortmb = job.getInt(JobContext.IO_SORT_MB, 100);\n{code}\n\\\\\n\n*6. {{mapreduce.input.fileinputformat.split.minsize}}*\nIn mapred-default.xml, the value is {{0}}, while it is {{1}} in the code,\n{code:title=.../mapred/FileInputFormat.java  (Usage #1)|borderStyle=solid}\n 328     long minSize = Math.max(job.getLong(org.apache.hadoop.mapreduce.lib.input.\n 329       FileInputFormat.SPLIT_MINSIZE, 1), minSplitSize);\n{code}\n{code:title=...//lib/input/FileInputFormat.java  (Usage #2)|borderStyle=solid}\n 191     return job.getConfiguration().getLong(SPLIT_MINSIZE, 1L);\n{code}\n\\\\\n\n*7. {{mapreduce.job.end-notification.max.attempts}}*\nIn mapred-default.xml, the value is {{5}}, while it is {{1}} in the code,\n{code:title=JobEndNotifier.java  (only usage)|borderStyle=solid}\n 72       , conf.getInt(MRJobConfig.MR_JOB_END_NOTIFICATION_MAX_ATTEMPTS, 1)\n{code}\n\\\\\n\n*8. {{mapreduce.job.end-notification.retry.interval}}*\nIn mapred-default.xml, the value is {{1000}}. In the code, the default value is {{30000}}.\n(actually the two usages are even not the same...) \n{code:title=.../mapred/JobEndNotifier.java  (Usage #1)|borderStyle=solid}\n 50       long retryInterval = conf.getInt(JobContext.MR_JOB_END_RETRY_INTERVAL, 30000);\n{code}\n{code:title=.../v2/app/JobEndNotifier.java  (Usage #2)|borderStyle=solid}\n 75     conf.getInt(MRJobConfig.MR_JOB_END_RETRY_INTERVAL, 5000)\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12778719","id":"12778719","filename":"MAPREDUCE.5682.patch.001","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tianyin","name":"tianyin","key":"tianyin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tianyin Xu","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-19T22:03:06.866+0000","size":2621,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12778719/MAPREDUCE.5682.patch.001"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"A number of inconsistent default configuration values","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tianyin","name":"tianyin","key":"tianyin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tianyin Xu","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tianyin","name":"tianyin","key":"tianyin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tianyin Xu","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12923249/comment/15065541","id":"15065541","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:red}-1{color} | {color:red} patch {color} | {color:red} 0m 4s {color} | {color:red} MAPREDUCE-6582 does not apply to trunk. Rebase required? Wrong Branch? See https://wiki.apache.org/hadoop/HowToContribute for help. {color} |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12778717/MAPREDUCE.5682.patch |\n| JIRA Issue | MAPREDUCE-6582 |\n| Powered by | Apache Yetus 0.2.0-SNAPSHOT   http://yetus.apache.org |\n| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6220/console |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-12-19T21:58:56.175+0000","updated":"2015-12-19T21:58:56.175+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12923249/comment/15065544","id":"15065544","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} patch {color} | {color:blue} 0m 3s {color} | {color:blue} The patch file was not named according to hadoop's naming conventions. Please see https://wiki.apache.org/hadoop/HowToContribute for instructions. {color} |\n| {color:red}-1{color} | {color:red} patch {color} | {color:red} 0m 6s {color} | {color:red} MAPREDUCE-6582 does not apply to trunk. Rebase required? Wrong Branch? See https://wiki.apache.org/hadoop/HowToContribute for help. {color} |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12778719/MAPREDUCE.5682.patch.001 |\n| JIRA Issue | MAPREDUCE-6582 |\n| Powered by | Apache Yetus 0.2.0-SNAPSHOT   http://yetus.apache.org |\n| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6221/console |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-12-19T22:09:27.859+0000","updated":"2015-12-19T22:09:27.859+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-6582/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2q4nb:"}}