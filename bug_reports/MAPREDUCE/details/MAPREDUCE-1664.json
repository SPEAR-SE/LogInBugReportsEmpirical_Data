{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12460904","self":"https://issues.apache.org/jira/rest/api/2/issue/12460904","key":"MAPREDUCE-1664","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314184","id":"12314184","description":"","name":"0.22.0","archived":false,"released":true,"releaseDate":"2011-12-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-04-28T23:30:05.802+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Oct 29 02:03:39 UTC 2010","customfield_12310420":"37052","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_14596818524_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2010-09-17T07:38:02.822+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-1664/watchers","watchCount":4,"isWatching":false},"created":"2010-04-01T08:57:44.298+0000","customfield_12310192":"<!-- markdown -->\n* Removed aclsEnabled flag from queues configuration files.\n* Removed the configuration property mapreduce.cluster.job-authorization-enabled.\n* Added mapreduce.cluster.acls.enabled as the single configuration property in mapred-default.xml that enables the authorization checks for all job level and queue level operations.\n* To enable authorization of users to do job level and queue level operations, mapreduce.cluster.acls.enabled is to be set to true in JobTracker's configuration and in all TaskTrackers' configurations.\n* To get access to a job, it is enough for a user to be part of one of the access lists i.e. either job-acl or queue-admins-acl(unlike before, when, one has to be part of both the lists).\n* Queue administrators(configured via acl-administer-jobs) of a queue can do all view-job and modify-job operations on all jobs submitted to that queue. \n* ClusterOwner(who started the mapreduce cluster) and cluster administrators(configured via mapreduce.cluster.permissions.supergroup) can do all job level operations and queue level operations on all jobs on all queues in that cluster irrespective of job-acls and queue-acls configured.\n* JobOwner(who submitted job to a queue) can do all view-job and modify-job operations on his/her job irrespective of job-acls and queue-acls.\n* Since aclsEnabled flag is removed from queues configuration files, \"refresh of queues configuration\" will not change mapreduce.cluster.acls.enabled on the fly. mapreduce.cluster.acls.enabled can be modified only when restarting the mapreduce cluster.","customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10342","value":"Incompatible change","id":"10342"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"8.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314184","id":"12314184","description":"","name":"0.22.0","archived":false,"released":true,"releaseDate":"2011-12-10"}],"issuelinks":[{"id":"12331846","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12331846","type":{"id":"10032","name":"Blocker","inward":"is blocked by","outward":"blocks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"},"outwardIssue":{"id":"12463870","key":"MAPREDUCE-1759","self":"https://issues.apache.org/jira/rest/api/2/issue/12463870","fields":{"summary":"Exception message for unauthorized user doing killJob, killTask, setJobPriority needs to be improved","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12333803","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12333803","type":{"id":"10032","name":"Blocker","inward":"is blocked by","outward":"blocks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"},"inwardIssue":{"id":"12457907","key":"MAPREDUCE-1550","self":"https://issues.apache.org/jira/rest/api/2/issue/12457907","fields":{"summary":"UGI.doAs should not be used for getting the history file of jobs","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12333742","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12333742","type":{"id":"10032","name":"Blocker","inward":"is blocked by","outward":"blocks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"},"inwardIssue":{"id":"12472344","key":"HADOOP-6922","self":"https://issues.apache.org/jira/rest/api/2/issue/12472344","fields":{"summary":"COMMON part of MAPREDUCE-1664","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-02-11T23:12:18.707+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313041","id":"12313041","name":"security"}],"timeoriginalestimate":null,"description":"MAPREDUCE-1307 introduced job ACLs for securing job level operations. So in current trunk, queue ACLs and job ACLs are checked(with AND for both acls) for allowing job level operations. So for doing operations like killJob, killTask and setJobPriority user should be part of both mapred.queue.{queuename}.acl-administer-jobs and in mapreduce.job.acl-modify-job. This needs to change so that users who are part of mapred.queue.{queuename}.acl-administer-jobs will be able to do killJob,killTask,setJobPriority and users part of mapreduce.job.acl-modify-job will be able to do killJob,killTask,setJobPriority.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12442697","id":"12442697","filename":"1664.20S.3.4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-04-23T18:55:17.583+0000","size":126070,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12442697/1664.20S.3.4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12452915","id":"12452915","filename":"1664.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-24T09:42:40.315+0000","size":198955,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12452915/1664.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12444782","id":"12444782","filename":"1664.qAdminsJobView.20S.v1.6.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-18T10:58:55.861+0000","size":99015,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12444782/1664.qAdminsJobView.20S.v1.6.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12454189","id":"12454189","filename":"1664.v1.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-09-09T07:12:21.712+0000","size":216731,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12454189/1664.v1.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12454746","id":"12454746","filename":"1664.v1.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-09-16T08:11:44.408+0000","size":229931,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12454746/1664.v1.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12453922","id":"12453922","filename":"1664.v1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-09-06T08:04:52.337+0000","size":215543,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12453922/1664.v1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12443139","id":"12443139","filename":"M1664y20s-testfix.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-04-28T23:30:05.748+0000","size":9209,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12443139/M1664y20s-testfix.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12444043","id":"12444043","filename":"mr-1664-20-bugfix.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2010-05-08T23:35:01.810+0000","size":2188,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12444043/mr-1664-20-bugfix.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"13911","customfield_12312823":null,"summary":"Job Acls affect Queue Acls","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12860349","id":"12860349","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"body":"Attaching patch for earlier version of hadoop. Not for commit here.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-04-23T18:55:17.667+0000","updated":"2010-04-23T18:55:17.667+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12861995","id":"12861995","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"body":"Attaching fix to testcases on Ravi's behalf","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-04-28T23:30:05.802+0000","updated":"2010-04-28T23:30:05.802+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12865514","id":"12865514","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"body":"Bugfix on the top of the previous patch. Not for commit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=devaraj","name":"devaraj","key":"devaraj","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Devaraj Das","active":true,"timeZone":"Pacific/Pitcairn"},"created":"2010-05-08T23:35:01.885+0000","updated":"2010-05-08T23:35:01.885+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12868603","id":"12868603","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"body":"Attaching patch for earlier version of hadoop, not for commit here. This patch is on top of previous patches. This patch enables queue administrators of a queue to view job details(job counters, task logs, etc) of jobs submitted to that queue even though they are not part of acl-view-job.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-18T10:58:55.967+0000","updated":"2010-05-18T10:58:55.967+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12868702","id":"12868702","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"Isn't getting access to task logs a security risk?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2010-05-18T16:07:12.506+0000","updated":"2010-05-18T16:07:12.506+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12868760","id":"12868760","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"body":"Access to task logs is given to the administrators of the queue only as they should have access to everything on the jobs of the queue. No ?\nSo the users part of the queue ACL acl-administer-jobs will be able to \"view job details\" in addition to the allowed operations SET_JOB_PRIORITY, KILL_TASK, KILL_JOB.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-18T17:50:37.427+0000","updated":"2010-05-18T17:50:37.427+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12869767","id":"12869767","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ramach","name":"ramach","key":"ramach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krishna Ramachandran","active":true,"timeZone":"Etc/UTC"},"body":"Ravi \nwhere are  we on this now (also the forward port)? I finished mapreduce-1759 and requires 1664","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ramach","name":"ramach","key":"ramach","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krishna Ramachandran","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-20T20:55:13.174+0000","updated":"2010-05-20T20:55:13.174+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12869854","id":"12869854","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"body":"I haven't started on the forward port. It would involve porting of all the 4 patches uploaded to this JIRA. Would need some discussion here on the design/implementation decisions before finalizing the design for trunk. Feel free to assign this JIRA to you and work on this if you have time.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-05-21T04:15:24.280+0000","updated":"2010-05-21T04:15:24.280+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12901782","id":"12901782","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"body":"Already attached 4 patches form the combined patch for Yahoo security branch 20.1xx.\n\nAt a higher level, the above 4 patches did the following:\n\n(1) Removed the flag mapreduce.cluster.job-authorization-enabled and let the flag mapred.acls.enabled drive both queue acls checks and job acls checks. All users will be able to do queue level and job level operations if mapred.acls.enabled is set to false. If mapred.acls.enabled is set to true, then the UNION of users part of queue ACLs and job ACLs will be able to do operation if that operation is driven by both queue ACLs and job ACLs --- like killJob, killTask and setJobPriority.\n\n(2) JobHistory is changed to have \"*\" as value for the job acls' keys VIEW_JOB and MODIFY_JOB in the line of job submission in history file when mapred.acls.enabled is false. This would allow all users to view job-history of this job even when we restart the cluster with mapred.acls.enabled set to true.\n\n(3) JobHistory is changed to have job queue name in the job submission line in history file. This is used to allow queue admins of that queue to view history details when serving job history based queries.\n\n(4) Created new enum \"Operation\" that contains the actual operations like SUBMIT_JOB, KILL_TASK, FAIL_TASK, KILL_JOB,SET_JOB_PRIORITY, VIEW_TASK_LOGS, VIEW_JOB_DETAILS, VIEW_JOB_COUNTERS.\n\n(5) Added new class ACLsManager that is responsible for authorization of all queue level and job level operations.\nACLsManager internally maintains MROwner(user who started mapreduce cluster), cluster administrators(configured by MROwner via mapreduce.cluster.permissions.supergroup). ACLsManager uses QueueManager and JobACLsManager for checking queue acls and job acls respectively for authorizing users to do various operations.\n\n(6) Operation SUBMIT_JOB is solely driven by the queue acl acl-submit-job. The operations VIEW_JOB_DETAILS, VIEW_JOB_COUNTERS, VIEW_TASK_LOGS, FAIL_TASK, KILL_TASK, KILL_JOB, SET_JOB_PRIORITY are driven by both job acls(either acl-view-job OR acl-modify-job based on the operation) and queue acl acl-administer-jobs. If a user is part of job acl that drives the specific operation OR part of the queue acl acl-administer-jobs, then he/she is an authorized user to perform the operation. Irrespective of queue acls and job acls configured, any operation can be done by MROwner and cluster administrators(members of supergroup).\n\n(7) Default values for the queue acls is changed from \"*\"(all users allowed by default) to \" \"(no user is allowed by default). This is to make the default values of queue acls consistent with job acls.\n\n(8) Since TaskTracker will not have job acls once the job finishes execution, the job acls are persisted to userlogs/$jobid/job-acls.xml so that single file per job is maintained. This file contains job's acl-view-job, job queue name, job owner name, queue admins acl of the queue to which this job was submitted to. These info will be used by TaskTracker to do authorization of users for accessing task logs(in TaskLogServlet).\n\n(9) Made LinuxTaskController to set permissions for job acls file also when permissions are being set for job userlog dir.\n\n(10) For TaskTrackers to write queue admins of specific job queue to job-acls.xml file, the queue admins acl is written to job conf by job client. Made JobClient to get queue admins(of the queue to which the job is being submitted to) from JobTracker and set this ACL in job conf. Tasktracker reads this queue admins ACL from job conf and writes to job-acls.xml file at the time of job localization.\n\n(11) TaskLogServlet checks the queue admins ACL explicitly(as there is no Queuemanager on TaskTracker) before checking for other things like jobOwner, cluster admins and view-job-acl. The queue admins ACL and view-job-acl are obtained from job-acls.xml file.\n\n(12) Changed readCounters() in CompletedJobStatusStore so that queue name is obtained from job profile and thus allowing job-view of that job for the queue admins of that queue.\n\n(13) Since the newly added method getQueueAdmins() in ClientProtocol returns AccessControlList object directly,  creation of AccessControlList object through Reflection utils is needed. This needed a new constructor for AccessControlList and that to be registered in WritableFactories.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-24T09:03:16.151+0000","updated":"2010-08-24T09:03:16.151+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12901785","id":"12901785","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"body":"Working on the forward port(to trunk) of the combined patch of the 4 patches attached earlier.\n\nSome of the new issues for this patch in trunk are\n(1) mapred.acls.enabled is removed from mapred-default.xml and moved to mapred-queues.xml.\n(2) Configuration of queue acls is moved to mapred-queues.xml.\n\nIn this forward port patch, I am adding the config property mapred.acls.enabled back into mapred-default.xml and this drives the need for authorization of both queue level operations and job level operations.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-24T09:10:17.417+0000","updated":"2010-08-24T09:10:17.417+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12901789","id":"12901789","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"body":"For changes to AccessControlList.java mentioned in (13) in earlier comment and for the documentation changes to cluster_setup.xml, a new JIRA in COMMON project is created. It is HADOOP-6922. Attached patch for HADOOP-6922.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-24T09:20:11.557+0000","updated":"2010-08-24T09:20:11.557+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12901800","id":"12901800","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"body":"Attaching patch for trunk.\n\nUnit tests passed on my local machine. Will do some web UI based testing with a single node cluster on my local machine.\nMeanwhile, please review and provide your comments.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-24T09:42:40.509+0000","updated":"2010-08-24T09:42:40.509+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12902812","id":"12902812","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"body":"Started looking at the patch. It's big. So I am summarizing user facing changes to be explicit.\n\nh3. User facing changes\n - The main change is that, now, access to view or modify a job is controlled by job-acls and queue-acls. To get access to a job, it is enough for a user to be part of *one of* the access lists. (unlike before, when, one has to be part of both the lists).\n - job-authorization configuration boolean flag is removed.\n - both job and queue acls are now driven by \"mapred.acls.enabled\"\n - mapred.acls.enabled is now also needed in TTs conf. (0.20 and pre-0.20 it was only needed on JT)\n - In 21, admins could do refresh queues and switch off and on the queue-acls feature. This isn't going to happen anymore. Note that this on and off feature wasn't there in 0.20, and even in 0.21, I can hazard-guess and say it is an 'accidental' feature.\n\n--------------------------------------------------------------------------------------------------------------------------------------\n\nCode-review comments:\n\n - mapred-default.xml: Fix documentation for mapred.acls.enabled to mention that it is now needed in both JT's and TT's conf files, if at all.\n - Deprecate mapred.acls.enabled (fix the documentation too) in favour of mapreduce.acls.enabled\n -  aclsEnabled should still be read for the sake of spitting out deprecation warnings?\n - I think its more natural to still keep QueueManager.getQueueConfigurationParser() as a static factory, that was its original intention. You can simply pass in the acls enabled flag also as an argument to the factory method.\n - Once you do the above, QueueManager.dumpConfiguration also can remain static, with no additional arguments.\n - JobInProgress.java:  you accidentally deleted a line     if (jobname == null) { jobname = \"\"; } +720 line after applying patch and +727 before\n - JobSubmittedEvent: Please don't mess with deprecated constructors. Create new ones as you wish. Once you do this, the changes in rumen/20history parser will not be needed at all.\n - JobSubmitter.java: Hard coded internal acl config names are bad. Please use a constant/method/utility but mark it internal only.\n - We should really not bring back the old constant DeprecatedQueueConfigurationParser.MAPRED_QUEUE_NAMES_KEY and the corresponding deprecated conf name \"mapred.queue.names\". Please replace all the uses of this with the new config file and properties (except possibly when testing the deprecated configuration)\n - JobTracker.java: You can remove AuditLogger.logSuccess call in addJob(). This will be duplicated by the one in aclsmanager.\n\nTests:\n - TestQueueManagerWithJobTracker.testAclsDisabled(), you can remove the refreshing of queues operation.. it doesn't add any value now.\n - TestTaskTrackerLocalization: we were earlier checking permissions of job-acls file. The file got moved into job-log-dir, but the permissions checks are missed now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-08-26T10:35:52.474+0000","updated":"2010-08-26T10:35:52.474+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12905489","id":"12905489","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"body":">> JobInProgress.java: you accidentally deleted a line if (jobname == null) { jobname = \"\"; } +720 line after applying patch and +727 before\n\nThis is intentionally removed because jobName cannot be null here.\n\n>> JobSubmittedEvent: Please don't mess with deprecated constructors. Create new ones as you wish. Once you do this, the changes in rumen/20history parser will not be needed at all.\n\nAs JobSubmittedEvent is flagged as @InterfaceAudience.Private, am fully removing the unnecessary constructors and keeping the only (modified)one that is needed.\n\n>> TestTaskTrackerLocalization: we were earlier checking permissions of job-acls file. The file got moved into job-log-dir, but the permissions checks are missed now.\n\nThis was not missed. File permissions are validated first and then file content.\n\n\nIncorporating other review comments.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-09-02T12:30:06.626+0000","updated":"2010-09-02T12:30:06.626+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12906444","id":"12906444","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"body":"Attaching new patch incorporating review comments.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-09-06T08:04:52.430+0000","updated":"2010-09-06T08:04:52.430+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12907107","id":"12907107","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"body":"Minor comments:\n - mapred-default.xml: \"For enabling this flag, this is to be set to true on JobTracker's configuration file and in all TaskTracker's configuration files.\" can better be \"For enabling this flag, this is to be set to true on the configuration files of JobTracker and all the TaskTrackers\"\n - QueueConfigurationParser: aclsEnabled isn't really deprecated as we ignore it completely. May be we should simply say that in the message.\n - QueueInfo.toFullPropertyName(): QueueInfo is public API. Let's not put this method in there. You can let it be in QueueManager by making QueueManager public but with private visibility classification. Java public scope identifier doesn't really promise the public nature of a class/api anymore at all. You should definitely also put java comments as to where all this method can be used.\n - ClusterMapReduceTestCase.startCluster() with the added parameter argument seems like a very weird API to have, it isn't even generic enough to accept other information. We can just have this in TestWebUIAuthorization.\n - QueueManagerTestUtils.createQueuesConfigFile() doesn't need to return a configuration. Adding the mapred-queues.xml as a resource to a configuration object is also useless.\n - TestJobHistory.testJobHistory(). Do we need a call to createQueuesConfigFile here? It is configuring default queue again, yet the file isn't being put in the classpath. Same in TestRecoveryManager.\n - TestQueueAclsForCurrentUser.setupConfForNoAccess() : The admin acls configured are different now. Earlier they were u1 for qu1 and \" g2\" for qu2.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-09-08T06:26:53.387+0000","updated":"2010-09-08T06:26:53.387+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12907543","id":"12907543","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"body":"Attaching new patch incorporating review comments.\n\nThis patch is on top of patch for MAPREDUCE-1550.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-09-09T07:12:21.832+0000","updated":"2010-09-09T07:12:21.832+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12910040","id":"12910040","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"body":"Attaching new patch with minor changes and to make the patch not dependent on the patch of MAPREDUCE-1550 as MAPREDUCE-1550 is resolved as invalid for trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-09-16T08:11:44.534+0000","updated":"2010-09-16T08:11:44.534+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12910069","id":"12910069","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"body":"+1 for the patch. Please post the test-patch and test results so I can commit it together with HADOOP-6922.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-09-16T09:52:33.860+0000","updated":"2010-09-16T09:52:33.860+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12910488","id":"12910488","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"body":"ant test passed on my local machine.\n\nant test-patch gave:\n\n     [exec] +1 overall.\n     [exec]\n     [exec]     +1 @author.  The patch does not contain any @author tags.\n     [exec]\n     [exec]     +1 tests included.  The patch appears to include 63 new or modified tests.\n     [exec]\n     [exec]     +1 javadoc.  The javadoc tool did not generate any warning messages.\n     [exec]\n     [exec]     +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n     [exec]\n     [exec]     +1 findbugs.  The patch does not introduce any new Findbugs warnings.\n     [exec]\n     [exec]     +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n     [exec]\n     [exec]     +1 system tests framework.  The patch passed system tests framework compile.\n\n\n\n\nOn a single node cluster, tested different cases for job acls and queue acls and supergroup and cluster-owner(user who started the cluster) and job-owner. Everything seem to be working as expected.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravidotg","name":"ravidotg","key":"ravidotg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ravi Gummadi","active":true,"timeZone":"Etc/UTC"},"created":"2010-09-17T07:16:58.725+0000","updated":"2010-09-17T07:16:58.725+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12910495","id":"12910495","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"body":"I just committed this to trunk. Thanks Ravi!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-09-17T07:38:02.756+0000","updated":"2010-09-17T07:38:02.756+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12910540","id":"12910540","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Common-trunk #453 (See [https://hudson.apache.org/hudson/job/Hadoop-Common-trunk/453/])\n    HADOOP-6922. COMMON part of MAPREDUCE-1664. Makes AccessControlList a writable and updates documentation for Job ACLs. Contributed by Ravi Gummadi.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2010-09-17T11:18:28.786+0000","updated":"2010-09-17T11:18:28.786+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12914646","id":"12914646","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Common-trunk-Commit #378 (See [https://hudson.apache.org/hudson/job/Hadoop-Common-trunk-Commit/378/])\n    ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2010-09-24T21:02:51.773+0000","updated":"2010-09-24T21:02:51.773+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12460904/comment/12926088","id":"12926088","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Mapreduce-trunk-Commit #523 (See [https://hudson.apache.org/hudson/job/Hadoop-Mapreduce-trunk-Commit/523/])\n    ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2010-10-29T02:03:39.188+0000","updated":"2010-10-29T02:03:39.188+0000"}],"maxResults":24,"total":24,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-1664/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i02qlr:"}}