{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12536069","self":"https://issues.apache.org/jira/rest/api/2/issue/12536069","key":"MAPREDUCE-3592","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2012-05-03T20:19:26.785+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu May 03 20:19:26 UTC 2012","customfield_12310420":"221752","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-3592/watchers","watchCount":2,"isWatching":false},"created":"2011-12-21T18:54:45.791+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314184","id":"12314184","description":"","name":"0.22.0","archived":false,"released":true,"releaseDate":"2011-12-10"}],"issuelinks":[{"id":"12346500","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12346500","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12535977","key":"HDFS-2712","self":"https://issues.apache.org/jira/rest/api/2/issue/12535977","fields":{"summary":"setTimes should support only for files and move the atime field down to iNodeFile.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-05-03T20:19:26.821+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312902","id":"12312902","name":"distcp"}],"timeoriginalestimate":null,"description":"On finalize() stage DistCp attempts to updateDestStatus(), which includes calling setTimes(). In HDFS setTimes() is not supported for directories, therefore DistCp fails if there are directories in the tree.\nIt looks the failure occurs only when there are no files to copy.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12319242","id":"12319242","name":"0.22.1","archived":true,"released":false}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"80790","customfield_12312823":null,"summary":"DistCp should not setTimes on directories","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12536069/comment/13174316","id":"13174316","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"body":"This happened in -update mode, when the source and destination turned out to be in sync.\nI think DistCp does not need to update anything at all. But it does and gets this exception. The exception is confusing, but it means setTimes() is not supported for directories.\n{code}\n11/12/20 15:55:49 INFO tools.DistCp: sourcePathsCount(files+directories)=11602\n11/12/20 15:55:49 INFO tools.DistCp: filesToCopyCount=0\n11/12/20 15:55:49 INFO tools.DistCp: bytesToCopyCount=0\n11/12/20 15:55:49 INFO tools.DistCp: filesToSkipCopyCount=5676\n11/12/20 15:55:49 INFO tools.DistCp: bytesToSkipCopyCount=5339.3g\n11/12/20 15:56:01 INFO tools.DistCp: deletedPathsFromDestCount(files+directories)=0\n11/12/20 15:56:01 INFO tools.DistCp: sourcePathsCount=11602\n11/12/20 15:56:01 INFO tools.DistCp: filesToCopyCount=0\n11/12/20 15:56:01 INFO tools.DistCp: bytesToCopyCount=0\nWith failures, global counters are inaccurate; consider running with -i\nCopy failed: java.io.FileNotFoundException: File /my-backup/my-data-input does not exist.\n     at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.setTimes(FSNamesystem.java:1096)\n     at org.apache.hadoop.hdfs.server.namenode.NameNode.setTimes(NameNode.java:1269)\n     at sun.reflect.GeneratedMethodAccessor34.invoke(Unknown Source)\n     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n     at java.lang.reflect.Method.invoke(Method.java:597)\n     at org.apache.hadoop.ipc.WritableRpcEngine$Server.call(WritableRpcEngine.java:349)\n     at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1482)\n     at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1478)\n     at java.security.AccessController.doPrivileged(Native Method)\n     at javax.security.auth.Subject.doAs(Subject.java:396)\n     at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1153)\n     at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1476)\n \n     at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n     at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\n     at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n     at java.lang.reflect.Constructor.newInstance(Constructor.java:513)\n     at org.apache.hadoop.ipc.RemoteException.instantiateException(RemoteException.java:90)\n     at org.apache.hadoop.ipc.RemoteException.unwrapRemoteException(RemoteException.java:57)\n     at org.apache.hadoop.hdfs.DFSClient.setTimes(DFSClient.java:1347)\n     at org.apache.hadoop.hdfs.DistributedFileSystem.setTimes(DistributedFileSystem.java:777)\n     at org.apache.hadoop.tools.DistCp.updateDestStatus(DistCp.java:827)\n     at org.apache.hadoop.tools.DistCp.finalize(DistCp.java:853)\n     at org.apache.hadoop.tools.DistCp.copy(DistCp.java:794)\n     at org.apache.hadoop.tools.DistCp.run(DistCp.java:1028)\n     at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:69)\n     at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:83)\n     at org.apache.hadoop.tools.DistCp.main(DistCp.java:1055)\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-12-21T19:03:33.550+0000","updated":"2011-12-21T19:03:33.550+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12536069/comment/13174323","id":"13174323","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"body":"See HDFS-2712 for the discussion on mTime / aTime semantic.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-12-21T19:07:19.454+0000","updated":"2011-12-21T19:07:19.454+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12536069/comment/13267770","id":"13267770","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lohit.giri","name":"lohit.giri","key":"lohit.giri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lohit giri","active":true,"timeZone":"America/Los_Angeles"},"body":"i can see the exceptions still coming when there is a new file gets copied. Job finishes fine but Distp client still throws this exception.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lohit.giri","name":"lohit.giri","key":"lohit.giri","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"lohit giri","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-05-03T20:19:26.785+0000","updated":"2012-05-03T20:19:26.785+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-3592/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0e6cf:"}}