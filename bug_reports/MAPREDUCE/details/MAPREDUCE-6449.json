{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12855389","self":"https://issues.apache.org/jira/rest/api/2/issue/12855389","key":"MAPREDUCE-6449","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2015-09-23T16:05:02.429+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Oct 23 14:06:14 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-6449/watchers","watchCount":4,"isWatching":false},"created":"2015-08-11T23:25:57.615+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["mapreduce"],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12434011","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12434011","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12850372","key":"MAPREDUCE-6439","self":"https://issues.apache.org/jira/rest/api/2/issue/12850372","fields":{"summary":"AM may fail instead of retrying if RM shuts down during the allocate call","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-10-23T14:06:14.388+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"components":[],"timeoriginalestimate":null,"description":"In discussion of MAPREDUCE-6439 we discussed how throwing and catching YarnRuntimeException in MR code is incorrect and we should instead use some MR specific exception.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12762165","id":"12762165","filename":"MAPREDUCE-6449.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"created":"2015-09-24T15:41:02.556+0000","size":74586,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12762165/MAPREDUCE-6449.001.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12766819","id":"12766819","filename":"MAPREDUCE-6449.002.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"created":"2015-10-15T16:45:52.618+0000","size":76621,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12766819/MAPREDUCE-6449.002.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12765630","id":"12765630","filename":"MAPREDUCE-6499-prelim.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"created":"2015-10-08T17:12:03.543+0000","size":19550,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12765630/MAPREDUCE-6499-prelim.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"MR Code should not throw and catch YarnRuntimeException to communicate internal exceptions","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adhoot","name":"adhoot","key":"adhoot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anubhav Dhoot","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adhoot","name":"adhoot","key":"adhoot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anubhav Dhoot","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12855389/comment/14904725","id":"14904725","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"body":"Started on the version 1 of this patch.\nQuestions to confirm my understanding:\n1) As mentioned in MAPREDUCE-6439, I agree that there are 3 files in MR that have the \ncatch (YarnRuntimeException e) {} block that needs to be addressed in this JIRA.\nThese files include \n~/mapreduce/v2/app/MRAppMaster.java \n~/mapreduce/v2/hs/webapp/HsWebServices.java\n~/mapreduce/v2/app/webapp/AMWebServices.java\nThe other occurrences are under YARN which I believe is taken in YARN-4021.\n\n2) The objective in this JIRA is to distinguish the calls for the Exception from remote versus local and wrap these under a unified Exception in MR that also helps in backwards compatiibility.\n\n3) I observed that each of the other files in the mapred modules have specific actions in the catch block.\nLike in TestRecordFactory:\n\ncatch (YarnRuntimeException e) {\n      e.printStackTrace();\n      Assert.fail(\"Failed to crete record\");\n    }\n\nSo, the idea in this JIRA is to simply map the name of YarnRuntimeException to a single Wrapper for MR Exception?\nThere are instances where the YarnException is expected to be caught:\nAs in TestLocalContainerAllocator which is the local exception catch block.\ncatch (YarnException e) {\n      // YarnException is expected\n}\n\nPlease correct/augment this comment to help confirm my understanding.\n\nThank you.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"created":"2015-09-23T16:05:02.429+0000","updated":"2015-09-23T16:05:02.429+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12855389/comment/14904749","id":"14904749","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adhoot","name":"adhoot","key":"adhoot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anubhav Dhoot","active":true,"timeZone":"America/Los_Angeles"},"body":"You are mostly right. The objective is to distinguish a local exception versus a remote exception which happens because of incorrect reuse of YarnRuntimeException in MR. We do not want to wrap these exception, but use a MR specific exception type to distinguish between the 2 cases. This is clear in the case of MRApps.taskType throwing this exception and its callers catching this exception such as HsWebServices and AMWebServices as you pointed out. If we are simply using it as an unchecked exception and not expecting to catch it, we can create a MR specific RuntimeException.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adhoot","name":"adhoot","key":"adhoot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anubhav Dhoot","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-23T16:24:52.853+0000","updated":"2015-09-23T16:24:52.853+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12855389/comment/14904758","id":"14904758","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"body":"Found a bunch in the mapred-client modules that  throw new YarnRuntimeException();\nNeed to replace those as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"created":"2015-09-23T16:30:41.964+0000","updated":"2015-09-23T16:30:41.964+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12855389/comment/14906518","id":"14906518","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"body":"Attached the 1st version of this patch. \n1) I created MRRuntimeException.java to be equivalent to YarnRuntimeException and extends RuntimeException to help being replaced in the catch and throw blocks.\n\n2) Replaced the calls to YarnRuntimeException in most of the files.\n\nConcerns and questions:\n1) Would the v2/app/exceptions be the right location for such a file or should it be in hadoop-mapreduce-client-common to be better accessible?\n2) I went ahead and pointed all the YarnRuntimeException to MRRuntimeException. Should this cover all the places including the ones that catch(IOException e) { throws new YarnRuntimeException (e)}\n\nSeen this in multiple instances, and I was not too sure about modifying this.\n\nRequesting review on this version.\nI will change/augment based on the review and add tests accordingly.\nPlanning to have TestSuite.java for exceptions.\n\nThank you.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"created":"2015-09-24T15:41:02.560+0000","updated":"2015-09-24T15:41:02.560+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12855389/comment/14907284","id":"14907284","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  19m 12s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 14 new or modified test files. |\n| {color:red}-1{color} | javac |   4m 26s | The patch appears to cause the build to fail. |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12762165/MAPREDUCE-6449.001.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / d1b9b85 |\n| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6016/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-09-25T00:14:42.797+0000","updated":"2015-09-25T00:14:42.797+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12855389/comment/14935362","id":"14935362","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"body":"Fixing the patch on my end. Will add one soon with test(s).\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"created":"2015-09-29T16:00:54.132+0000","updated":"2015-09-29T16:00:54.132+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12855389/comment/14949001","id":"14949001","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"body":"Uploading a Prelim patch to start off the MRRuntimeException replacement in local calls.\nThe effort is to find the pairs of throw and catch and replace it with a MRRuntimeException which is a YarnRuntimeException.\n\nI added a few additions because there are few places where the YarnRuntimeException was thrown and not caught but it's exception is not necessary a \"RuntimeException\".\n\nThis is a first sweep of the throw new YarnRuntimeException () that I did to see where I can change the code.\nI will add more based on the feedback for this prelim patch and include tests.\n\nRequesting Review. Haven't submitted the patch.\n\nThank you.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"created":"2015-10-08T17:12:03.548+0000","updated":"2015-10-08T17:12:03.548+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12855389/comment/14953851","id":"14953851","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adhoot","name":"adhoot","key":"adhoot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anubhav Dhoot","active":true,"timeZone":"America/Los_Angeles"},"body":"Changes look good overall\n\nAMWebServices and MRApps pair seems safe to replace. This is of the variety where you are replacing an existing try catch pair of YarnRuntimeException with MRRuntimeException.\nTypeConverter#toYarn also looks like  a candidate.\n\nCachedHistoryStorage, ClientCache, DefaultSpeculator, HistoryFileManager, LocalContainerAllocator seems of the type where this is no existing catch block in the callers and is basically replacing one uncaught RuntimeException with another. So seems fine.\n\nYarnRunner change seems unnecessary.\nMinor comment, you can remove unused imports of YarnRuntimeException as you go along for eg in MRApps.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adhoot","name":"adhoot","key":"adhoot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anubhav Dhoot","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-10-12T22:09:05.603+0000","updated":"2015-10-12T22:09:05.603+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12855389/comment/14953944","id":"14953944","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"body":"[~adhoot] thanks for the review. \nI'll address the comments in the next patch. Not sure if there can be a good test for this.\nWill test if it keeps the project stable.\n\nThank you.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"created":"2015-10-12T22:56:14.213+0000","updated":"2015-10-12T22:56:14.213+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12855389/comment/14959202","id":"14959202","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"body":"Adding patch version 2 with changes to other files that I found in the MR project with YarnRuntimeException.\n\nLooked for pairs to see if there is a throw-catch pair to adjust to MRRuntimeException and removed the YarnRuntimeException from places it was just kept as an Exception encapsulation.\n\nRequesting Review on Version 2.\n\nThank you.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"created":"2015-10-15T16:45:52.622+0000","updated":"2015-10-15T16:45:52.622+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12855389/comment/14959419","id":"14959419","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  19m 36s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 11 new or modified test files. |\n| {color:green}+1{color} | javac |   7m 59s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |  10m 27s | There were no new javadoc warning messages. |\n| {color:red}-1{color} | release audit |   0m 19s | The applied patch generated 1 release audit warnings. |\n| {color:red}-1{color} | checkstyle |   1m 36s | The applied patch generated  9 new checkstyle issues (total was 78, now 86). |\n| {color:red}-1{color} | whitespace |   0m 13s | The patch has 1  line(s) that end in whitespace. Use git apply --whitespace=fix. |\n| {color:green}+1{color} | install |   1m 33s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 33s | The patch built with eclipse:eclipse. |\n| {color:green}+1{color} | findbugs |   3m 57s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |\n| {color:green}+1{color} | mapreduce tests |   9m 36s | Tests passed in hadoop-mapreduce-client-app. |\n| {color:green}+1{color} | mapreduce tests |   0m 47s | Tests passed in hadoop-mapreduce-client-common. |\n| {color:green}+1{color} | mapreduce tests |   5m 55s | Tests passed in hadoop-mapreduce-client-hs. |\n| {color:red}-1{color} | mapreduce tests |  63m 51s | Tests failed in hadoop-mapreduce-client-jobclient. |\n| | | 126m 41s | |\n\\\\\n\\\\\n|| Reason || Tests ||\n| Failed unit tests | hadoop.mapred.TestReduceFetch |\n|   | hadoop.mapreduce.lib.output.TestJobOutputCommitter |\n|   | hadoop.mapreduce.v2.TestSpeculativeExecution |\n|   | hadoop.mapreduce.v2.TestMROldApiJobs |\n|   | hadoop.mapred.TestClientRedirect |\n|   | hadoop.mapreduce.v2.TestMRJobsWithProfiler |\n|   | hadoop.mapreduce.TestMapReduceLazyOutput |\n|   | hadoop.mapreduce.security.TestMRCredentials |\n|   | hadoop.ipc.TestMRCJCSocketFactory |\n|   | hadoop.conf.TestNoDefaultsJobConf |\n|   | hadoop.mapreduce.TestChild |\n|   | hadoop.mapred.TestYARNRunner |\n|   | hadoop.mapreduce.v2.TestMiniMRProxyUser |\n|   | hadoop.mapreduce.v2.TestUberAM |\n|   | hadoop.mapreduce.v2.TestMRJobsWithHistoryService |\n|   | hadoop.mapreduce.v2.TestMRAppWithCombiner |\n|   | hadoop.mapreduce.v2.TestRMNMInfo |\n|   | hadoop.mapreduce.v2.TestNonExistentJob |\n|   | hadoop.mapreduce.security.TestBinaryTokenFile |\n|   | hadoop.mapred.TestJobSysDirWithDFS |\n|   | hadoop.mapreduce.TestLargeSort |\n|   | hadoop.mapreduce.TestMRJobClient |\n|   | hadoop.mapreduce.v2.TestMRJobs |\n|   | hadoop.mapreduce.v2.TestMRAMWithNonNormalizedCapabilities |\n|   | hadoop.mapred.TestClusterMRNotification |\n|   | hadoop.mapred.TestNetworkedJob |\n|   | hadoop.mapreduce.security.ssl.TestEncryptedShuffle |\n|   | hadoop.mapred.TestSpecialCharactersInOutputPath |\n| Timed out tests | org.apache.hadoop.mapred.TestMRIntermediateDataEncryption |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12766819/MAPREDUCE-6449.002.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / c7c36cb |\n| Release Audit | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6069/artifact/patchprocess/patchReleaseAuditProblems.txt |\n| checkstyle |  https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6069/artifact/patchprocess/diffcheckstylehadoop-mapreduce-client-common.txt |\n| whitespace | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6069/artifact/patchprocess/whitespace.txt |\n| hadoop-mapreduce-client-app test log | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6069/artifact/patchprocess/testrun_hadoop-mapreduce-client-app.txt |\n| hadoop-mapreduce-client-common test log | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6069/artifact/patchprocess/testrun_hadoop-mapreduce-client-common.txt |\n| hadoop-mapreduce-client-hs test log | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6069/artifact/patchprocess/testrun_hadoop-mapreduce-client-hs.txt |\n| hadoop-mapreduce-client-jobclient test log | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6069/artifact/patchprocess/testrun_hadoop-mapreduce-client-jobclient.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6069/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf906.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/6069/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-15T18:56:34.674+0000","updated":"2015-10-15T18:56:34.674+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12855389/comment/14963606","id":"14963606","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"body":"These passed locally for me except Profiler.\nWill upload a patch with changes and testing locally.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neelesh77","name":"neelesh77","key":"neelesh77","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=neelesh77&avatarId=24299","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=neelesh77&avatarId=24299","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=neelesh77&avatarId=24299","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=neelesh77&avatarId=24299"},"displayName":"Neelesh Srinivas Salian","active":true,"timeZone":"America/Dawson"},"created":"2015-10-19T16:57:51.434+0000","updated":"2015-10-19T16:57:51.434+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12855389/comment/14971033","id":"14971033","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djp","name":"djp","key":"djp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=djp&avatarId=16954","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=djp&avatarId=16954","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=djp&avatarId=16954","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=djp&avatarId=16954"},"displayName":"Junping Du","active":true,"timeZone":"Asia/Shanghai"},"body":"Is this patch breaking our MR rolling upgrade story that old MR job and new MR job can coexist in a single cluster (during upgrade)? At least, changes on hs part sounds like this. If so, I would be very concern on this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djp","name":"djp","key":"djp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=djp&avatarId=16954","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=djp&avatarId=16954","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=djp&avatarId=16954","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=djp&avatarId=16954"},"displayName":"Junping Du","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-10-23T14:06:14.388+0000","updated":"2015-10-23T14:06:14.388+0000"}],"maxResults":13,"total":13,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-6449/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2ispb:"}}