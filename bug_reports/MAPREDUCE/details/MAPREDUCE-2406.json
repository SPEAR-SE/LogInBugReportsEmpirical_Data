{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12502626","self":"https://issues.apache.org/jira/rest/api/2/issue/12502626","key":"MAPREDUCE-2406","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2011-07-09T20:25:34.019+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Dec 19 12:29:02 UTC 2011","customfield_12310420":"68655","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-2406/watchers","watchCount":4,"isWatching":false},"created":"2011-03-28T20:44:51.409+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314045","id":"12314045","description":"","name":"0.21.0","archived":false,"released":true,"releaseDate":"2010-08-23"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-12-19T12:29:02.986+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"Each time the distcp is done, {{validateCopy(srcstat, absdst)}} will be called. \nWhen doing distcp, if the -pb(preserve block size) is not set, the dst will use the default block size. However, if the src file use block size other than the default block size, and -pb is not set, after copying, the src and dst will have different block size. It will not pass the validateCopy check in this case.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"111981","customfield_12312823":null,"summary":"Failed validate copy in distcp","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rosieli","name":"rosieli","key":"rosieli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rosie Li","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rosieli","name":"rosieli","key":"rosieli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rosie Li","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502626/comment/13062613","id":"13062613","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"body":"Looking at validateCopy in trunk tells me that it does not seem to check anything beyond the crc (if available, and if asked for) and the length of whole files. That doesn't seem to be a cause for a failure due to differing block sizes here?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-07-09T20:25:34.019+0000","updated":"2011-07-09T20:25:34.019+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502626/comment/13172226","id":"13172226","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markus17","name":"markus17","key":"markus17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markus17&avatarId=25064","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markus17&avatarId=25064","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markus17&avatarId=25064","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markus17&avatarId=25064"},"displayName":"Markus Jelsma","active":true,"timeZone":"Europe/Berlin"},"body":"I can confirm -pb solves this problem:\nhttp://mail-archives.apache.org/mod_mbox/hadoop-hdfs-user/201112.mbox/%3C201112190922.39970.markus.jelsma@openindex.io%3E\n\nDuring the first run many files fail. When i retry most files are skipped because they were already copied and a few files succeed. With a third try all files fail consistently. When i finally try again with -pb set all files are copied properly and thus solves this problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markus17","name":"markus17","key":"markus17","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markus17&avatarId=25064","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markus17&avatarId=25064","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markus17&avatarId=25064","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markus17&avatarId=25064"},"displayName":"Markus Jelsma","active":true,"timeZone":"Europe/Berlin"},"created":"2011-12-19T12:29:02.913+0000","updated":"2011-12-19T12:29:02.913+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-2406/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0jitz:"}}