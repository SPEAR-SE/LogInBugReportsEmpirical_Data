{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12652148","self":"https://issues.apache.org/jira/rest/api/2/issue/12652148","key":"MAPREDUCE-5320","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"2013-06-11 04:52:25.313","customfield_12310420":"332472","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-5320/watchers","watchCount":1,"isWatching":false},"created":"2013-06-11T04:52:25.313+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324138","id":"12324138","description":"2.0.4-alpha bug-fix release","name":"2.0.4-alpha","archived":false,"released":true,"releaseDate":"2013-04-25"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.douglas","name":"chris.douglas","key":"chris.douglas","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Douglas","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-06-11T04:52:25.313+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"For MapReduce jobs run through mapreduce.Job.waitForCompletion(), Cluster.close() never seems to get called.\n\nI noticed this problem in my own customized MapReduce environment, which uses a custom ClientProtocolProvider.  My provider creates ClientProtocol instances that contain resources that need to be cleaned up, such as thread pools.\n\nCluster.close() calls ClientProtocolProvider.close(ClientProtocol), which should clean up these resources.  Cluster.close() is called by mapred.JobClient code and by the CLI, but it doesn't seem to get called for jobs started through mapred.Job.waitForCompletion().  This leads to resource leaks in my application.\n\nThis seems like a bug, since mapreduce.Job creates a resource (the Cluster instance) that it never cleans up.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"332801","customfield_12312823":null,"summary":"Cluster.close() is not called by mapreduce.Job","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joshrosen","name":"joshrosen","key":"joshrosen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=joshrosen&avatarId=24981","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=joshrosen&avatarId=24981","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=joshrosen&avatarId=24981","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=joshrosen&avatarId=24981"},"displayName":"Josh Rosen","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=joshrosen","name":"joshrosen","key":"joshrosen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=joshrosen&avatarId=24981","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=joshrosen&avatarId=24981","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=joshrosen&avatarId=24981","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=joshrosen&avatarId=24981"},"displayName":"Josh Rosen","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[],"maxResults":0,"total":0,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-5320/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1lcsf:"}}