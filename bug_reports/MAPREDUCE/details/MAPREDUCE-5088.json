{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12637233","self":"https://issues.apache.org/jira/rest/api/2/issue/12637233","key":"MAPREDUCE-5088","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324138","id":"12324138","description":"2.0.4-alpha bug-fix release","name":"2.0.4-alpha","archived":false,"released":true,"releaseDate":"2013-04-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-03-15T18:03:07.391+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Oct 01 18:59:43 UTC 2013","customfield_12310420":"317725","customfield_12312320":null,"customfield_12310222":"10002_*:*_3_*:*_1099487621_*|*_1_*:*_3_*:*_483616895_*|*_5_*:*_2_*:*_14016737_*|*_4_*:*_1_*:*_47606468","customfield_12312321":null,"resolutiondate":"2013-04-03T18:47:16.327+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-5088/watchers","watchCount":12,"isWatching":false},"created":"2013-03-15T17:55:08.633+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323275","id":"12323275","description":"2.0.3-alpha release","name":"2.0.3-alpha","archived":false,"released":true,"releaseDate":"2013-02-14"}],"issuelinks":[{"id":"12366172","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12366172","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12638519","key":"MAPREDUCE-5093","self":"https://issues.apache.org/jira/rest/api/2/issue/12638519","fields":{"summary":"Improve RM and HS token acquisition during job submission","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-10-01T18:59:43.708+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"After the fix for HADOOP-9299 I'm now getting the following bizzare exception in Oozie while trying to submit a job. This also seems to be KRB related:\n\n{noformat}\n2013-03-15 13:34:16,555  WARN ActionStartXCommand:542 - USER[hue] GROUP[-] TOKEN[] APP[MapReduce] JOB[0000001-130315123130987-oozie-oozi-W] ACTION[0000001-130315123130987-oozie-oozi-W@Sleep] Error starting action [Sleep]. ErrorType [ERROR], ErrorCode [UninitializedMessageException], Message [UninitializedMessageException: Message missing required fields: renewer]\norg.apache.oozie.action.ActionExecutorException: UninitializedMessageException: Message missing required fields: renewer\n\tat org.apache.oozie.action.ActionExecutor.convertException(ActionExecutor.java:401)\n\tat org.apache.oozie.action.hadoop.JavaActionExecutor.submitLauncher(JavaActionExecutor.java:738)\n\tat org.apache.oozie.action.hadoop.JavaActionExecutor.start(JavaActionExecutor.java:889)\n\tat org.apache.oozie.command.wf.ActionStartXCommand.execute(ActionStartXCommand.java:211)\n\tat org.apache.oozie.command.wf.ActionStartXCommand.execute(ActionStartXCommand.java:59)\n\tat org.apache.oozie.command.XCommand.call(XCommand.java:277)\n\tat org.apache.oozie.service.CallableQueueService$CompositeCallable.call(CallableQueueService.java:326)\n\tat org.apache.oozie.service.CallableQueueService$CompositeCallable.call(CallableQueueService.java:255)\n\tat org.apache.oozie.service.CallableQueueService$CallableWrapper.run(CallableQueueService.java:175)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n\tat java.lang.Thread.run(Thread.java:662)\nCaused by: com.google.protobuf.UninitializedMessageException: Message missing required fields: renewer\n\tat com.google.protobuf.AbstractMessage$Builder.newUninitializedMessageException(AbstractMessage.java:605)\n\tat org.apache.hadoop.security.proto.SecurityProtos$GetDelegationTokenRequestProto$Builder.build(SecurityProtos.java:973)\n\tat org.apache.hadoop.mapreduce.v2.api.protocolrecords.impl.pb.GetDelegationTokenRequestPBImpl.mergeLocalToProto(GetDelegationTokenRequestPBImpl.java:84)\n\tat org.apache.hadoop.mapreduce.v2.api.protocolrecords.impl.pb.GetDelegationTokenRequestPBImpl.getProto(GetDelegationTokenRequestPBImpl.java:67)\n\tat org.apache.hadoop.mapreduce.v2.api.impl.pb.client.MRClientProtocolPBClientImpl.getDelegationToken(MRClientProtocolPBClientImpl.java:200)\n\tat org.apache.hadoop.mapred.YARNRunner.getDelegationTokenFromHS(YARNRunner.java:194)\n\tat org.apache.hadoop.mapred.YARNRunner.submitJob(YARNRunner.java:273)\n\tat org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:392)\n\tat org.apache.hadoop.mapreduce.Job$11.run(Job.java:1218)\n\tat org.apache.hadoop.mapreduce.Job$11.run(Job.java:1215)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:396)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1439)\n\tat org.apache.hadoop.mapreduce.Job.submit(Job.java:1215)\n\tat org.apache.hadoop.mapred.JobClient$1.run(JobClient.java:581)\n\tat org.apache.hadoop.mapred.JobClient$1.run(JobClient.java:576)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:396)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1439)\n\tat org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:576)\n\tat org.apache.oozie.action.hadoop.JavaActionExecutor.submitLauncher(JavaActionExecutor.java:723)\n\t... 10 more\n2013-03-15 13:34:16,555  WARN ActionStartXCommand:542 - USER[hue] GROUP[-] TOKEN[] APP[MapReduce] JOB[0000001-13031512313\n{noformat}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324138","id":"12324138","description":"2.0.4-alpha bug-fix release","name":"2.0.4-alpha","archived":false,"released":true,"releaseDate":"2013-04-25"}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12574624","id":"12574624","filename":"HADOOP-9409.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2013-03-20T20:33:37.639+0000","size":5870,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12574624/HADOOP-9409.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12574353","id":"12574353","filename":"HADOOP-9409.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2013-03-19T15:35:25.166+0000","size":5790,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12574353/HADOOP-9409.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12574861","id":"12574861","filename":"MAPREDUCE-5088.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2013-03-21T19:31:37.419+0000","size":6346,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12574861/MAPREDUCE-5088.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12574791","id":"12574791","filename":"MAPREDUCE-5088.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2013-03-21T12:52:16.864+0000","size":6095,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12574791/MAPREDUCE-5088.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12575662","id":"12575662","filename":"MAPREDUCE-5088.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-03-27T05:16:44.439+0000","size":18259,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12575662/MAPREDUCE-5088.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"318066","customfield_12312823":null,"summary":"MR Client gets an renewer token exception while Oozie is submitting a job","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13603609","id":"13603609","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"body":"This seems to be related to what Sidd commented in HADOOP-9299, https://issues.apache.org/jira/browse/HADOOP-9299?focusedCommentId=13596283&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13596283","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"created":"2013-03-15T18:03:07.391+0000","updated":"2013-03-15T18:03:07.391+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13603909","id":"13603909","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"Alejandro, what do you think the behaviour should be with security disabled ?\nThe NN returns a null token (similar behaviour by the RM/HS I believe will be backward incompatible and a problem for Oozie). The MR client only asks for DFS tokens if security is enabled.\nIn terms of security being disabled, MR client could short-circuit requests and send back a null or fake token.\n\nIn this particular case, Oozie seems to be sending in a null renewer which is not valid. This likely needs to be fixed in Oozie.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-03-15T22:08:38.056+0000","updated":"2013-03-15T22:08:38.056+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13603929","id":"13603929","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"body":"Updating the description to match the insight from Sid","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-03-15T22:23:37.867+0000","updated":"2013-03-15T22:23:37.867+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13605120","id":"13605120","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"If we hope to allow a client to work with heterogenous clusters with security enabled/disabled, then clients must properly deal with a null response to a token request.  As an aside: in a generic sense, null means \"no token is required\" which currently means security is disabled but it doesn't necessarily have to mean that.  Semi-recent changes to MR will propagate credentials (tokens & secrets), even if security is off, because 1.x did that and I think hive was relying on it to pass a secret.  So a heterogeneous security mix will \"sorta kinda\" work.  Job submission really shouldn't be shorting out the request for fs tokens because it already properly handles null responses.\n\nGiven the error, the job submission explicitly requested a RM token which \"succeeded\", which triggered an internal fetch of a HS token.  The implicit HS token request's renewer is the value of {{yarn.resourcemanager.principal}} which in this case appears to be null.  A RM token request requires an explicit renewer which should be that exact same value - which implies that oozie is using a different value or the RM protobuf is allowing a null (valid).\n\nSo we need to know what conf value oozie is passing as the renewer for a RM token.  Technically I think oozie or other components shouldn't have to supply the renewer, the job submission should use the right value but that's a separate issue.  So for now, this may be an oozie issue and/or due to {{yarn.resourcemanager.principal}} not being set.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2013-03-18T13:39:59.783+0000","updated":"2013-03-18T13:39:59.783+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13605977","id":"13605977","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. So we need to know what conf value oozie is passing as the renewer for a RM token. Technically I think oozie or other components shouldn't have to supply the renewer, the job submission should use the right value but that's a separate issue. So for now, this may be an oozie issue and/or due to yarn.resourcemanager.principal not being set.\nOozie is passing in a non-null renewer for the RM call to have worked (ignore my last post - didn't notice the failure was on the HS token). I don't think yarn.resourcemanager.principal is required for a non-secure cluster. We should likely revert part of MAPREDUCE-4921, to fall back to using the specified renewer if it can't figure out a valid one.\n\nWhether we should return a token if security is disabled is another matter. This should likely be null, but that would be a backward incompatible change.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-03-19T03:01:00.631+0000","updated":"2013-03-19T03:01:00.631+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13606345","id":"13606345","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"bq. Oozie is passing in a non-null renewer for the RM call to have worked (ignore my last post - didn't notice the failure was on the HS token).\n\nYes, it must have passed a non-null value for the RM token request - I verified the RM token request also NPEs on null renewer.  This begs the question of where is oozie obtaining the renewer to send?  A hardcoded value?\n\nbq.  Whether we should return a token if security is disabled is another matter. This should likely be null, but that would be a backward incompatible change.\n\nSorry, I didn't mean to imply returning a token with security off.  I only meant it's correct for a non-secure server to return null to signify \"no token required\".  I think we are in agreement on that point?  Or do you believe returning null is backwards incompat too?  If so, why?\n\nbq.  We should likely revert part of MAPREDUCE-4921, to fall back to using the specified renewer if it can't figure out a valid one.\n\nA basic question to ponder is whether we should allow the submitter to \"shoot themselves in the foot\" with the wrong renewer?  If no, a trivial and arguably hacky solution might be for the HS token request to sub a null renewer with an empty {{Text}}?\n\nIn any case, it will be useful to know what renewer is oozie passing for the RM token?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2013-03-19T13:44:52.409+0000","updated":"2013-03-19T13:44:52.409+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13606412","id":"13606412","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"It looks like the RM throws an exception for token requests if security is off, so I don't oozie is requesting a RM token.  If true, is oozie maybe explicitly setting {{mapreduce.history.server.delegationtoken.required}} to true?\n\nHere's an proposed/untested patch that checks if a RM token is present rather than using a conf setting that was marked as a hack.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2013-03-19T15:35:25.169+0000","updated":"2013-03-19T15:35:25.169+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13606582","id":"13606582","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"body":"Oozie is setting a renewer, following is the code. This was working fine before.\n\n{code}\n    static Text getMRTokenRenewerInternal(JobConf jobConf) throws IOException {\n        // Getting renewer correctly for JT principal also though JT in hadoop 1.x does not have\n        // support for renewing/cancelling tokens\n        String servicePrincipal = jobConf.get(RM_PRINCIPAL, jobConf.get(JT_PRINCIPAL));\n        Text renewer;\n        if (servicePrincipal != null) { // secure cluster\n            renewer = mrTokenRenewers.get(servicePrincipal);\n            if (renewer == null) {\n                // Mimic org.apache.hadoop.mapred.Master.getMasterPrincipal()\n                String target = jobConf.get(HADOOP_YARN_RM, jobConf.get(HADOOP_JOB_TRACKER_2));\n                if (target == null) {\n                    target = jobConf.get(HADOOP_JOB_TRACKER);\n                }\n                String addr = NetUtils.createSocketAddr(target).getHostName();\n                renewer = new Text(SecurityUtil.getServerPrincipal(servicePrincipal, addr));\n                LOG.info(\"Delegation Token Renewer details: Principal=\" + servicePrincipal + \",Target=\" + target\n                        + \",Renewer=\" + renewer);\n                mrTokenRenewers.put(servicePrincipal, renewer);\n            }\n        }\n        else {\n            renewer = MR_TOKEN_ALIAS; //Doesn't matter what we pass as renewer\n        }\n        return renewer;\n    }\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"created":"2013-03-19T17:49:24.171+0000","updated":"2013-03-19T17:49:24.171+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13606633","id":"13606633","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Sorry, I didn't mean to imply returning a token with security off. I only meant it's correct for a non-secure server to return null to signify \"no token required\". I think we are in agreement on that point? Or do you believe returning null is backwards incompat too? If so, why?\nYep, I agree a non-secure server should return null - which would effectively signify no token required. Backward incompatible because the call in 1.X returns a token irrespective of the security settings (may not have been intentional). From a brief look at the Oozie code, looks like a null would be problematic.\n\nbq. It looks like the RM throws an exception for token requests if security is off, so I don't oozie is requesting a RM token. If true, is oozie maybe explicitly setting mapreduce.history.server.delegationtoken.required to true?\nI don't think the RM throws an exception in this case. isAllowedDelegationTokenOp returns true if security is disabled.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-03-19T18:25:49.754+0000","updated":"2013-03-19T18:25:49.754+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13606818","id":"13606818","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"Oh my, I feel sorry for the contortions oozie has to perform.  You're right on the exception, I assumed {{isAllowedDelegationTokenOp}} and its subsequent \"you need kerberos\" exception meant it rejected all non-kerberos.  It does indeed always return a token, even though it will never be used...\n\nAn aside: It sure would be been nice if there was simply a key named something like \"mapreduce.job.submit.allowed\".  We could use it to trigger both getting a RM and HS token, if necessary, with the correct renewer.\n\nAnyway, is the dummy HS token actually required somewhere?  If not, what if the {noformat}if (hsProxy != null) { ...get hs token...}{noformat} is changed to: {noformat}if (hsProxy != null && Master.getMasterPrincipal(conf) != null) { ...get hs token...}{noformat}\n\nI think the HS token is invisible to the submitter so it's presence or lack thereof shouldn't have a compat issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2013-03-19T21:09:18.464+0000","updated":"2013-03-19T21:09:18.464+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13607048","id":"13607048","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"body":"bq. Yep, I agree a non-secure server should return null - which would effectively signify no token required. Backward incompatible because the call in 1.X returns a token irrespective of the security settings (may not have been intentional). From a brief look at the Oozie code, looks like a null would be problematic.\n\n I think it is intentional to preserve the user that submitted the launcher job when the launcher submits the real job.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"created":"2013-03-19T23:42:08.461+0000","updated":"2013-03-19T23:42:08.461+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13607613","id":"13607613","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"bq. I think it is intentional to preserve the user that submitted the launcher job when the launcher submits the real job.\n\nI believe it already does w/o a token.  The ctors in {{Job}} and {{JobClient}} appear to capture the ugi and reuse the ugi for subsequent operations.\n\nUntil my semi-recent SASL changes, I don't think the RPC client would even attempt to use a token if security is disabled - which rendered the RM token moot.  Now the client does attempt to use the token, but a non-secure RPC server will kick a client using a token back into simple auth - which again renders the token moot.  Overall the behavior hasn't changed in this case.  The captured ugi tracks the submitter which would match the token anyway.\n\nPer my last suggestion above, is it problematic to short-circuit obtaining a HS token?  I don't believe oozie has any special logic for the HS since it's \"new\" and implicitly obtained during submission?  The token isn't useful as explained above.  If there is an issue with not obtaining a HS token, I guess we could revert to track & reuse the renewer passed to get the RM token.  Thoughts?\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2013-03-20T13:48:04.605+0000","updated":"2013-03-20T13:48:04.605+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13608094","id":"13608094","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Per my last suggestion above, is it problematic to short-circuit obtaining a HS token? I don't believe oozie has any special logic for the HS since it's \"new\" and implicitly obtained during submission? The token isn't useful as explained above. If there is an issue with not obtaining a HS token, I guess we could revert to track & reuse the renewer passed to get the RM token. Thoughts?\nI think skipping the history token is oK, based on what you say about token usage. Can we make it more explicit though, with a UGI.isSecurityEnabled() check rather than just a null renewer ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-03-20T19:58:32.254+0000","updated":"2013-03-20T19:58:32.254+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13608140","id":"13608140","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"bq.  Can we make it more explicit though, with a UGI.isSecurityEnabled() check rather than just a null renewer ?\n\nSure, it will just compound the sorta/kinda works problem for an \"insecure\" client with kerberos credentials being able to work with a secure cluster.  Mark your calendar for me saying:  I guess we can fix it later.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2013-03-20T20:25:14.596+0000","updated":"2013-03-20T20:25:14.596+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13608153","id":"13608153","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"Patch should work, but it doesn't look like it'll be easy to write a unit test.  Unfortunately I don't have time at the moment to figure it out, so I'd appreciate if someone could help out.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2013-03-20T20:33:37.642+0000","updated":"2013-03-20T20:33:37.642+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13608266","id":"13608266","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12574624/HADOOP-9409.patch\n  against trunk revision .\n\n    {color:red}-1 patch{color}.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HADOOP-Build/2347//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-03-20T21:42:39.130+0000","updated":"2013-03-20T21:42:39.130+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13608544","id":"13608544","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"Daryn, I don't think we can remove the check on JobClient.HS_DELEGATION_TOKEN_REQUIRED . Getting a HS delegation token is only required if JobClient.getDelegationToken() is called. I'll try updating the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-03-21T02:16:33.361+0000","updated":"2013-03-21T02:16:33.361+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13608885","id":"13608885","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"The last patch (which accidentally I made a level deep in the tree...) only gets a token if a RM token is present which implies that getDelegationToken was called.  I am attempting to make the comment described \"hack\" a little less hacky by not propagating/using a conf value set by submission.  Although the conf key appears to be considered private, I'd rather not having it become a defacto supported key if people start using it directly?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2013-03-21T12:52:16.867+0000","updated":"2013-03-21T12:52:16.867+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13608945","id":"13608945","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12574791/MAPREDUCE-5088.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/3449//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/3449//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-03-21T13:58:29.328+0000","updated":"2013-03-21T13:58:29.328+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13609053","id":"13609053","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. The last patch (which accidentally I made a level deep in the tree...) only gets a token if a RM token is present which implies that getDelegationToken was called. \nSorry, missed that last time. I could be missing something again :), but I think the RM token will be present when the oozie launcher submits a job (that's when it's really required). Trying to get a history token at that point will end up failing since krb auth isn't available.\n\nbq. I am attempting to make the comment described \"hack\" a little less hacky by not propagating/using a conf value set by submission. Although the conf key appears to be considered private, I'd rather not having it become a defacto supported key if people start using it directly?\nThis is a private key (should at least be annotated if it isn't already). Maybe we need to change the method to getDelgationTokens and deprecate the current method.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-03-21T15:53:51.306+0000","updated":"2013-03-21T15:53:51.306+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13609137","id":"13609137","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"body":"Guys, thanks a million for the patch. So far I tried the one from yesterday (20/Mar/13) and it completely unblocks Oozie in my Bigtop fully distributed testing.\n\nI will try your latest patch today and report back.\n\nOn a related note it seems like  MAPREDUCE-4820 is biting us again -- I'll reopen it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-03-21T17:14:47.428+0000","updated":"2013-03-21T17:14:47.428+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13609254","id":"13609254","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"bq. I think the RM token will be present when the oozie launcher submits a job (that's when it's really required). Trying to get a history token at that point will end up failing since krb auth isn't available\n\nAarg, good catch.\n\nbq. This is a private key (should at least be annotated if it isn't already). Maybe we need to change the method to getDelgationTokens and deprecate the current method.\n\nUnfortunately you can see in the patch that I removed it and it's not annotated, but annotations haven't stopped anyone in the past...  If we are going to change the api, I'd rather match {{FileSystem#addDelegationTokens(renewer, creds)}} because ideally that could be an interface.  I'd also favor a conf setting to trigger the new {{addDelegationTokens}}.  Job submitters really shouldn't have to deal with managing tokens - I mean just look at the contortions oozie has to do!  Ideally tokens should be a transparent implementation detail.  That would make other component maintainers life easier, as well as mine.\n\nShould we make a compatible fix here, and file another jira for a better fix, to avoid a co-dep on oozie?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2013-03-21T18:17:37.217+0000","updated":"2013-03-21T18:17:37.217+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13609356","id":"13609356","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"Small tweak to get a HS token only if:\n# security is enabled\n# the job has a RM token\n# the job lacks a HS token ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2013-03-21T19:31:37.421+0000","updated":"2013-03-21T19:31:37.421+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13609441","id":"13609441","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12574861/MAPREDUCE-5088.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/3451//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/3451//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-03-21T20:37:19.294+0000","updated":"2013-03-21T20:37:19.294+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13609466","id":"13609466","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Should we make a compatible fix here, and file another jira for a better fix, to avoid a co-dep on oozie?\nAgree, a separate jira for the api change, which can be used to figure out the API changes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-03-21T21:00:38.315+0000","updated":"2013-03-21T21:00:38.315+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13612326","id":"13612326","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"body":"Guys, what's the latest on this patch? I've tested it in Bigtop and it seems to do exactly what it needs as far as unblocking Oozie is concerned. What else is left before we can commit it to trunk and all the relevant branches?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-03-25T00:35:19.075+0000","updated":"2013-03-25T00:35:19.075+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13613177","id":"13613177","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cos","name":"cos","key":"cos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cos&avatarId=16741","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cos&avatarId=16741","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cos&avatarId=16741","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cos&avatarId=16741"},"displayName":"Konstantin Boudnik","active":true,"timeZone":"America/Los_Angeles"},"body":"Mapreduce patch looks correct to me, but I am perhaps not the world's foremost expert on Kerb.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cos","name":"cos","key":"cos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cos&avatarId=16741","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cos&avatarId=16741","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cos&avatarId=16741","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cos&avatarId=16741"},"displayName":"Konstantin Boudnik","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-03-25T21:36:58.393+0000","updated":"2013-03-25T21:36:58.393+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13614945","id":"13614945","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"+1 for the previous patch. Adding a unit test to it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-03-27T05:16:44.442+0000","updated":"2013-03-27T05:16:44.442+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13614970","id":"13614970","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:green}+1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12575662/MAPREDUCE-5088.txt\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/3473//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/3473//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-03-27T06:19:58.856+0000","updated":"2013-03-27T06:19:58.856+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13616835","id":"13616835","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"body":"Sid, would you mind taking a look at MAPREDUCE-5117 ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-03-28T23:44:55.357+0000","updated":"2013-03-28T23:44:55.357+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13620309","id":"13620309","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cos","name":"cos","key":"cos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cos&avatarId=16741","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cos&avatarId=16741","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cos&avatarId=16741","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cos&avatarId=16741"},"displayName":"Konstantin Boudnik","active":true,"timeZone":"America/Los_Angeles"},"body":"I can confirm that patch addressed oozie issue. I will commit it by the end of today if there's no objections.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cos","name":"cos","key":"cos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cos&avatarId=16741","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cos&avatarId=16741","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cos&avatarId=16741","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cos&avatarId=16741"},"displayName":"Konstantin Boudnik","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-02T21:45:45.775+0000","updated":"2013-04-02T21:45:45.775+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13620497","id":"13620497","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cos","name":"cos","key":"cos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cos&avatarId=16741","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cos&avatarId=16741","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cos&avatarId=16741","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cos&avatarId=16741"},"displayName":"Konstantin Boudnik","active":true,"timeZone":"America/Los_Angeles"},"body":"Patch committed to branch-2.0.4-alpha as r1463804. Thanks Daryn!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cos","name":"cos","key":"cos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cos&avatarId=16741","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cos&avatarId=16741","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cos&avatarId=16741","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cos&avatarId=16741"},"displayName":"Konstantin Boudnik","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-03T01:40:13.144+0000","updated":"2013-04-03T01:40:13.144+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13620635","id":"13620635","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Patch committed to branch-2.0.4-alpha as r1463804. Thanks Daryn!\n[~cos], looks like this went to branch-2.0.4-alpha only. Would you mind pulling this into trunk and beanch-2 as well ? Thanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sseth","name":"sseth","key":"sseth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Seth","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-03T05:33:49.881+0000","updated":"2013-04-03T05:33:49.881+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13621140","id":"13621140","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"body":"Sid, can you please commit to trunk and branch-2? Tx.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=acmurthy","name":"acmurthy","key":"acmurthy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arun C Murthy","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-03T18:20:55.819+0000","updated":"2013-04-03T18:20:55.819+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13621170","id":"13621170","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cos","name":"cos","key":"cos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cos&avatarId=16741","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cos&avatarId=16741","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cos&avatarId=16741","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cos&avatarId=16741"},"displayName":"Konstantin Boudnik","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. [~cos], looks like this went to branch-2.0.4-alpha only. Would you mind pulling this into trunk and beanch-2 as well?\n\nYeah, the ticket _is_ marked for 2.0.4-alpha only. \nI have committed it now both to trunk and branch-2. Will update the versions of the ticket as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cos","name":"cos","key":"cos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cos&avatarId=16741","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cos&avatarId=16741","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cos&avatarId=16741","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cos&avatarId=16741"},"displayName":"Konstantin Boudnik","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-03T18:46:26.082+0000","updated":"2013-04-03T18:46:26.082+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13621172","id":"13621172","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cos","name":"cos","key":"cos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cos&avatarId=16741","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cos&avatarId=16741","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cos&avatarId=16741","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cos&avatarId=16741"},"displayName":"Konstantin Boudnik","active":true,"timeZone":"America/Los_Angeles"},"body":"The patch is merged to all corresponding branches now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cos","name":"cos","key":"cos","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cos&avatarId=16741","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cos&avatarId=16741","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cos&avatarId=16741","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cos&avatarId=16741"},"displayName":"Konstantin Boudnik","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-03T18:47:16.349+0000","updated":"2013-04-03T18:47:16.349+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13621202","id":"13621202","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-trunk-Commit #3554 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/3554/])\n    MAPREDUCE-5088. MR Client gets an renewer token exception while Oozie is submitting a job (daryn)\n\n    merge -c1463804 from branch-2.0.4-alpha (Revision 1464153)\n\n     Result = SUCCESS\ncos : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1464153\nFiles : \n* /hadoop/common/trunk\n* /hadoop/common/trunk/hadoop-mapreduce-project\n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/JobClient.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/main/java/org/apache/hadoop/mapred/ResourceMgrDelegate.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/main/java/org/apache/hadoop/mapred/YARNRunner.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestYARNRunner.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-04-03T19:06:55.579+0000","updated":"2013-04-03T19:06:55.579+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13621482","id":"13621482","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hitesh","name":"hitesh","key":"hitesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hitesh Shah","active":true,"timeZone":"America/Los_Angeles"},"body":"Updated fixed version to 2.0.4-alpha as assumption is that anything committed to 2.0.4-alpha should also have been committed to trunk and branch-2.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hitesh","name":"hitesh","key":"hitesh","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hitesh Shah","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-04-03T23:14:50.030+0000","updated":"2013-04-03T23:14:50.030+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13622024","id":"13622024","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Yarn-trunk #174 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/174/])\n    MAPREDUCE-5088. MR Client gets an renewer token exception while Oozie is submitting a job (daryn)\n\n    merge -c1463804 from branch-2.0.4-alpha (Revision 1464153)\n\n     Result = SUCCESS\ncos : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1464153\nFiles : \n* /hadoop/common/trunk\n* /hadoop/common/trunk/hadoop-mapreduce-project\n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/JobClient.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/main/java/org/apache/hadoop/mapred/ResourceMgrDelegate.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/main/java/org/apache/hadoop/mapred/YARNRunner.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestYARNRunner.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-04-04T10:48:35.143+0000","updated":"2013-04-04T10:48:35.143+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13622150","id":"13622150","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Hdfs-trunk #1363 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1363/])\n    MAPREDUCE-5088. MR Client gets an renewer token exception while Oozie is submitting a job (daryn)\n\n    merge -c1463804 from branch-2.0.4-alpha (Revision 1464153)\n\n     Result = FAILURE\ncos : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1464153\nFiles : \n* /hadoop/common/trunk\n* /hadoop/common/trunk/hadoop-mapreduce-project\n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/JobClient.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/main/java/org/apache/hadoop/mapred/ResourceMgrDelegate.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/main/java/org/apache/hadoop/mapred/YARNRunner.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestYARNRunner.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-04-04T13:09:04.523+0000","updated":"2013-04-04T13:09:04.523+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13622345","id":"13622345","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Mapreduce-trunk #1390 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1390/])\n    MAPREDUCE-5088. MR Client gets an renewer token exception while Oozie is submitting a job (daryn)\n\n    merge -c1463804 from branch-2.0.4-alpha (Revision 1464153)\n\n     Result = SUCCESS\ncos : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1464153\nFiles : \n* /hadoop/common/trunk\n* /hadoop/common/trunk/hadoop-mapreduce-project\n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/JobClient.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/main/java/org/apache/hadoop/mapred/ResourceMgrDelegate.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/main/java/org/apache/hadoop/mapred/YARNRunner.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-jobclient/src/test/java/org/apache/hadoop/mapred/TestYARNRunner.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-04-04T14:05:53.630+0000","updated":"2013-04-04T14:05:53.630+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13782364","id":"13782364","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkanter","name":"rkanter","key":"rkanter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Kanter","active":true,"timeZone":"America/Los_Angeles"},"body":"We're seeing an issue where Oozie can't submit to a secure cluster when the JHS is down because it can't get a delegation token from the Job History Server.  However, if I submit a job without Oozie (i.e. hadoop jar ....) it works fine.  When investigating, it looks like this JIRA may be the cause, or is at least related.  Any ideas on why this is happening?\n\n{noformat}\n2013-09-30 13:14:48,544  WARN ActionStartXCommand:542 - USER[testuser] GROUP[-] TOKEN[] APP[map-reduce-wf] JOB[0000055-130929201011702-oozie-oozi-W] ACTION[0000055-130929201011702-oozie-oozi-W@mr-node] Er\nror starting action [mr-node]. ErrorType [TRANSIENT], ErrorCode [  JA006], Message [  JA006: Connection refused]\norg.apache.oozie.action.ActionExecutorException:   JA006: Connection refused\n        at org.apache.oozie.action.ActionExecutor.convertExceptionHelper(ActionExecutor.java:412)\n        at org.apache.oozie.action.ActionExecutor.convertException(ActionExecutor.java:392)\n        at org.apache.oozie.action.hadoop.JavaActionExecutor.submitLauncher(JavaActionExecutor.java:794)\n        at org.apache.oozie.action.hadoop.JavaActionExecutor.start(JavaActionExecutor.java:948)\n        at org.apache.oozie.command.wf.ActionStartXCommand.execute(ActionStartXCommand.java:215)\n        at org.apache.oozie.command.wf.ActionStartXCommand.execute(ActionStartXCommand.java:60)\n        at org.apache.oozie.command.XCommand.call(XCommand.java:280)\n        at org.apache.oozie.service.CallableQueueService$CompositeCallable.call(CallableQueueService.java:326)\n        at org.apache.oozie.service.CallableQueueService$CompositeCallable.call(CallableQueueService.java:255)\n        at org.apache.oozie.service.CallableQueueService$CallableWrapper.run(CallableQueueService.java:175)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        at java.lang.Thread.run(Thread.java:722)\nCaused by: java.net.ConnectException: Connection refused\n        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)\n        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:692)\n        at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)\n        at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:529)\n        at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:493)\n        at org.apache.hadoop.ipc.Client$Connection.setupConnection(Client.java:547)\n        at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:642)\n        at org.apache.hadoop.ipc.Client$Connection.access$2600(Client.java:314)\n        at org.apache.hadoop.ipc.Client.getConnection(Client.java:1399)\n        at org.apache.hadoop.ipc.Client.call(Client.java:1318)\n        at org.apache.hadoop.ipc.Client.call(Client.java:1300)\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:206)\n        at com.sun.proxy.$Proxy31.getDelegationToken(Unknown Source)\n        at org.apache.hadoop.mapreduce.v2.api.impl.pb.client.MRClientProtocolPBClientImpl.getDelegationToken(MRClientProtocolPBClientImpl.java:211)\n        at org.apache.hadoop.mapred.YARNRunner.getDelegationTokenFromHS(YARNRunner.java:208)\n        at org.apache.hadoop.mapred.YARNRunner.addHistoryToken(YARNRunner.java:195)\n        at org.apache.hadoop.mapred.YARNRunner.submitJob(YARNRunner.java:280)\n        at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:430)\n        at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1268)\n        at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1265)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:415)\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1477)\n        at org.apache.hadoop.mapreduce.Job.submit(Job.java:1265)\n        at org.apache.hadoop.mapred.JobClient$1.run(JobClient.java:557)\n        at org.apache.hadoop.mapred.JobClient$1.run(JobClient.java:552)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:415)\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1477)\n        at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:552)\n        at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:543)\n        at org.apache.oozie.action.hadoop.JavaActionExecutor.submitLauncher(JavaActionExecutor.java:779)\n        ... 10 more\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkanter","name":"rkanter","key":"rkanter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Kanter","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-30T22:43:40.279+0000","updated":"2013-09-30T22:43:40.279+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13783113","id":"13783113","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"Unlike normal job submissions, oozie requires a JHS token to query job status if the AM is no longer running.  This is especially true for pig jobs to monitor its sub-jobs.  So oozie job submissions are expected to fail if the JHS is down.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2013-10-01T16:49:51.660+0000","updated":"2013-10-01T16:49:51.660+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12637233/comment/13783222","id":"13783222","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"body":"This means that we need to have JHS HA, correct?]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"created":"2013-10-01T18:59:43.708+0000","updated":"2013-10-01T18:59:43.708+0000"}],"maxResults":44,"total":44,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-5088/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1itnr:"}}