{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12539819","self":"https://issues.apache.org/jira/rest/api/2/issue/12539819","key":"MAPREDUCE-3728","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310941","id":"12310941","key":"MAPREDUCE","name":"Hadoop Map/Reduce","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310941&avatarId=10096","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310941&avatarId=10096","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310941&avatarId=10096","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310941&avatarId=10096"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320060","id":"12320060","description":"0.23.3","name":"0.23.3","archived":false,"released":true,"releaseDate":"2012-09-20"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12322471","id":"12322471","description":"2.0.2-alpha release","name":"2.0.2-alpha","archived":false,"released":true,"releaseDate":"2012-10-09"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-01-25T21:41:20.388+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jul 11 13:26:54 UTC 2012","customfield_12310420":"225322","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_554058590_*|*_1_*:*_1_*:*_2471060643_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-02-29T20:06:52.384+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-3728/watchers","watchCount":14,"isWatching":false},"created":"2012-01-25T19:48:13.301+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315570","id":"12315570","description":"","name":"0.23.0","archived":false,"released":true,"releaseDate":"2011-11-11"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dyuan3","name":"dyuan3","key":"dyuan3","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ding Yuan","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-07-30T00:12:00.994+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12314301","id":"12314301","name":"mrv2","description":"MR-279: Map Reduce Next."},{"self":"https://issues.apache.org/jira/rest/api/2/component/12315341","id":"12315341","name":"nodemanager"}],"timeoriginalestimate":null,"description":"While running the simplest of jobs (Pi) on MR2 in a fully secure configuration I have noticed that the job was failing on the reduce side with the following messages littering the nodemanager logs:\n\n{noformat}\n2012-01-19 08:35:32,544 ERROR org.apache.hadoop.mapred.ShuffleHandler: Shuffle error\norg.apache.hadoop.util.DiskChecker$DiskErrorException: Could not find usercache/rvs/appcache/application_1326928483038_0001/output/attempt_1326928483038_0001_m_000003_0/file.out.index in any of the configured local directories\n{noformat}\n\nWhile digging further I found out that the permissions on the files/dirs were prohibiting nodemanager (running under the user yarn) to access these files:\n\n{noformat}\n$ ls -l /data/3/yarn/usercache/testuser/appcache/application_1327102703969_0001/output/attempt_1327102703969_0001_m_000001_0\n-rw-r----- 1 testuser testuser 28 Jan 20 15:41 file.out\n-rw-r----- 1 testuser testuser 32 Jan 20 15:41 file.out.index\n{noformat}\n\nDigging even further revealed that the group-sticky bit that was faithfully put on all the subdirectories between testuser and application_1327102703969_0001 was gone from output and attempt_1327102703969_0001_m_000001_0. \n\nLooking into how these subdirectories are created (org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer.ContainerLocalizer.initDirs())\n{noformat}\n      // $x/usercache/$user/appcache/$appId/filecache\n      Path appFileCacheDir = new Path(appBase, FILECACHE);\n      appsFileCacheDirs[i] = appFileCacheDir.toString();\n      lfs.mkdir(appFileCacheDir, null, false);\n      // $x/usercache/$user/appcache/$appId/output\n      lfs.mkdir(new Path(appBase, OUTPUTDIR), null, false);\n{noformat}\n\nReveals that lfs.mkdir ends up manipulating permissions and thus clears sticky bit from output and filecache.\n\nAt this point I'm at a loss about how this is supposed to work. My understanding was\nthat the whole sequence of events here was predicated on a sticky bit set so\nthat daemons running under the user yarn (default group yarn) can have access\nto the resulting files and subdirectories down at output and below. Please let\nme know if I'm missing something or whether this is just a bug that needs to be fixed.\n\nOn a related note, when the shuffle side of the Pi job failed the job itself didn't.\nIt went into the endless loop and only exited when it exhausted all the local storage\nfor the log files (at which point the nodemanager died and thus the job ended). Perhaps\nthis is even more serious side effect of this issue that needs to be investigated \nseparately.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12515738","id":"12515738","filename":"MAPREDUCE-3728.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ahmed.radwan","name":"ahmed.radwan","key":"ahmed.radwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ahmed Radwan","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-02-23T10:11:05.861+0000","size":2696,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12515738/MAPREDUCE-3728.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"44337","customfield_12312823":null,"summary":"ShuffleHandler can't access results when configured in a secure mode","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13193358","id":"13193358","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Reveals that lfs.mkdir ends up manipulating permissions and thus clears sticky bit from output and filecache.\nMay be I am missing something, but I don't understand this. The output-dir is being created with null FilePermissions which becomes 0777.\n\nInstead I suspect that the umask for your testuser is strict. That my be the reason why the files are getting created with 640. Can you please check?\n\nAlso, just to be sure, you are using DefaultContainerExecutor or LinuxContainerExecutor? It is mostly the later, but just confirming.\n\nbq. My understanding was that the whole sequence of events here was predicated on a sticky bit set so that daemons running under the user yarn (default group yarn) can have access to the resulting files and subdirectories down at output and below.\nYes, that is the case with YARN and even mrv1/1.0.\n\nbq. On a related note, when the shuffle side of the Pi job failed the job itself didn't. It went into the endless loop [..]\nYes, this is a known issue MAPREDUCE-3418.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-01-25T21:41:20.388+0000","updated":"2012-01-25T21:41:20.388+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13193377","id":"13193377","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"body":".bq May be I am missing something, but I don't understand this. The output-dir is being created with null FilePermissions which becomes 0777.\n\nI suspect this is not about *what* permissions it is create with, but the sheer fact that permissions are set at all. Here's an example of how it goes wrong when permissions are set explicitly. When that happens sticky bit gets lost.\nHere's a trivial example. As you can see, when a subdir is created it is, at first, retains the sticky bit. But when\nI set permissions explicitly it gets cleared (as it should):\n\n{noformat}\nrvs@ahmed-laptop:/tmp$ cd /tmp\nrvs@ahmed-laptop:/tmp$ mkdir sticky.dir\nrvs@ahmed-laptop:/tmp$ sudo chgrp root sticky.dir \nrvs@ahmed-laptop:/tmp$ sudo chmod g+s sticky.dir\nrvs@ahmed-laptop:/tmp$ mkdir sticky.dir/subdir\nrvs@ahmed-laptop:/tmp$ ls -l sticky.dir\ntotal 4\ndrwxr-sr-x 2 rvs root 4096 2012-01-25 13:50 subdir\nrvs@ahmed-laptop:/tmp$ chmod 777 sticky.dir/subdir\nrvs@ahmed-laptop:/tmp$ ls -l sticky.dir\ntotal 4\ndrwxrwxrwx 2 rvs root 4096 2012-01-25 13:50 subdir\n{noformat}\n\n.bq Instead I suspect that the umask for your testuser is strict. That my be the reason why the files are getting created with 640. Can you please check?\n\nThe problem is not file permissions per se, but the fact that subdirs (starting from output) have lost a group sticky bit and thus everything that is created underneath them has user group as a default (and of course no longer retains the sticky group bit on the subdirectories). But anyway, I've checked and the umask for testuser is 0022\n\n.bq Also, just to be sure, you are using DefaultContainerExecutor or LinuxContainerExecutor? It is mostly the later, but just confirming.\n\nThis is LinuxContainerExecutor since, to the best of my knowledge, one has to configure it for the fully secure cluster.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-01-25T21:54:32.727+0000","updated":"2012-01-25T21:54:32.727+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13203804","id":"13203804","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli2","name":"eli2","key":"eli2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"Etc/UTC"},"body":"Bumping priority, seems pretty critical that MR2 work with security.  MR guys, is there something we're missing?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli2","name":"eli2","key":"eli2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-08T18:19:21.061+0000","updated":"2012-02-08T18:19:21.061+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13204799","id":"13204799","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"body":"Here's a more direct way to reproduce the problem.\n\n{noformat}\n# sudo - yarn\nyarn$ mkdir -p /tmp/TEST/{logs,locs} /tmp/TEST/locs/usercache\nyarn$ cp /tmp/cont1.tokens /tmp/TEST/cont1.tokens\nyarn$ container-executor rvs 0 app1 /tmp/TEST/cont1.tokens /tmp/TEST/locs /tmp/TEST/logs /usr/java/jdk1.6.0_26/jre/bin/java -classpath /usr/lib/hadoop/lib/\\*:/usr/lib/hadoop/\\*:/etc/hadoop/conf/nm-config/log4j.properties:/etc/hadoop/conf -Djava.library.path=/usr/lib/hadoop/lib/native org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer.ContainerLocalizer rvs app1 cont1 0.0.0.0 4344 /tmp/TEST/locs \n\nmain : command provided 0\nmain : user is rvs\n12/02/09 11:54:40 WARN conf.Configuration: mapred-site.xml:an attempt to override final parameter: mapreduce.cluster.local.dir;  Ignoring.\n12/02/09 11:54:40 WARN conf.Configuration: mapred-site.xml:an attempt to override final parameter: mapreduce.cluster.local.dir;  Ignoring.\n12/02/09 11:54:40 WARN conf.Configuration: mapred-site.xml:an attempt to override final parameter: mapreduce.cluster.local.dir;  Ignoring.\n12/02/09 11:54:40 INFO util.NativeCodeLoader: Loaded the native-hadoop library\n12/02/09 11:54:40 WARN conf.Configuration: mapred-site.xml:an attempt to override final parameter: mapreduce.cluster.local.dir;  Ignoring.\n12/02/09 11:54:40 WARN conf.Configuration: mapred-site.xml:an attempt to override final parameter: mapreduce.cluster.local.dir;  Ignoring.\n12/02/09 11:54:40 WARN conf.Configuration: mapred-site.xml:an attempt to override final parameter: mapreduce.cluster.local.dir;  Ignoring.\n=========== Using localizerTokenSecurityInfo12/02/09 11:54:41 INFO ipc.Client: Retrying connect to server: 0.0.0.0/0.0.0.0:4344. Already tried 0 time(s).\n12/02/09 11:54:42 INFO ipc.Client: Retrying connect to server: 0.0.0.0/0.0.0.0:4344. Already tried 1 time(s).\n12/02/09 11:54:43 INFO ipc.Client: Retrying connect to server: 0.0.0.0/0.0.0.0:4344. Already tried 2 time(s).\n12/02/09 11:54:44 INFO ipc.Client: Retrying connect to server: 0.0.0.0/0.0.0.0:4344. Already tried 3 time(s).\n12/02/09 11:54:45 INFO ipc.Client: Retrying connect to server: 0.0.0.0/0.0.0.0:4344. Already tried 4 time(s).\n12/02/09 11:54:46 INFO ipc.Client: Retrying connect to server: 0.0.0.0/0.0.0.0:4344. Already tried 5 time(s).\n12/02/09 11:54:47 INFO ipc.Client: Retrying connect to server: 0.0.0.0/0.0.0.0:4344. Already tried 6 time(s).\n12/02/09 11:54:48 INFO ipc.Client: Retrying connect to server: 0.0.0.0/0.0.0.0:4344. Already tried 7 time(s).\n12/02/09 11:54:49 INFO ipc.Client: Retrying connect to server: 0.0.0.0/0.0.0.0:4344. Already tried 8 time(s).\n12/02/09 11:54:50 INFO ipc.Client: Retrying connect to server: 0.0.0.0/0.0.0.0:4344. Already tried 9 time(s).\njava.lang.reflect.UndeclaredThrowableException\n\tat org.apache.hadoop.yarn.server.nodemanager.api.impl.pb.client.LocalizationProtocolPBClientImpl.heartbeat(LocalizationProtocolPBClientImpl.java:62)\n\tat org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer.ContainerLocalizer.localizeFiles(ContainerLocalizer.java:221)\n\tat org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer.ContainerLocalizer.runLocalization(ContainerLocalizer.java:169)\n\tat org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer.ContainerLocalizer.main(ContainerLocalizer.java:345)\nCaused by: com.google.protobuf.ServiceException: java.net.ConnectException: Call From c0506.hal.cloudera.com/172.29.81.158 to 0.0.0.0:4344 failed on connection exception: java.net.ConnectException: Connection refused; For more details see:  http://wiki.apache.org/hadoop/ConnectionRefused\n\tat org.apache.hadoop.yarn.ipc.ProtoOverHadoopRpcEngine$Invoker.invoke(ProtoOverHadoopRpcEngine.java:148)\n\tat $Proxy6.heartbeat(Unknown Source)\n\tat org.apache.hadoop.yarn.server.nodemanager.api.impl.pb.client.LocalizationProtocolPBClientImpl.heartbeat(LocalizationProtocolPBClientImpl.java:54)\n\t... 3 more\nCaused by: java.net.ConnectException: Call From c0506.hal.cloudera.com/172.29.81.158 to 0.0.0.0:4344 failed on connection exception: java.net.ConnectException: Connection refused; For more details see:  http://wiki.apache.org/hadoop/ConnectionRefused\n\tat org.apache.hadoop.net.NetUtils.wrapException(NetUtils.java:686)\n\tat org.apache.hadoop.ipc.Client.call(Client.java:1141)\n\tat org.apache.hadoop.ipc.Client.call(Client.java:1100)\n\tat org.apache.hadoop.yarn.ipc.ProtoOverHadoopRpcEngine$Invoker.invoke(ProtoOverHadoopRpcEngine.java:145)\n\t... 5 more\nCaused by: java.net.ConnectException: Connection refused\n\tat sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)\n\tat sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)\n\tat org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)\n\tat org.apache.hadoop.net.NetUtils.connect(NetUtils.java:488)\n\tat org.apache.hadoop.ipc.Client$Connection.setupConnection(Client.java:469)\n\tat org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:563)\n\tat org.apache.hadoop.ipc.Client$Connection.access$2000(Client.java:211)\n\tat org.apache.hadoop.ipc.Client.getConnection(Client.java:1247)\n\tat org.apache.hadoop.ipc.Client.call(Client.java:1117)\n\t... 7 more\n{noformat}\n\nas you can see the localication process got to a point where it was\ntrying to fetch the files for localization. This means that it has\ncompleted all the filesystem manipulations. Next step would have been\nlaunching a container under the user id of 'rvs'. So lets see where\nthat container would have put its intermediate results: \n\n{noformat}\n  yarn$ ls -ld /tmp/TEST/locs/usercache/rvs/appcache/app1/output/\n  drwxr-xr-x 2 rvs yarn 4096 Feb  9 11:54 /tmp/TEST/locs/usercache/rvs/appcache/app1/output/\n{noformat}\n\nquite naturally, given that the sticky bit is no longer present on the output dir\nAND the fact that user rvs has a group of rvs as the default group the resulting\nfiles are totally out of reach for something running under the yarn account.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-02-09T20:01:18.670+0000","updated":"2012-02-09T20:01:18.670+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13214521","id":"13214521","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ahmed.radwan","name":"ahmed.radwan","key":"ahmed.radwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ahmed Radwan","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks Roman! I was able to reproduce this issue on a secure cluster. \n\nHere is more explanation of what is happening: For each application, the $x/usercache/$user/appcache/$appId directory has the setgid permission, the intention here is to have files and sub-directories created within it to inherit its group ID (i.e., hadoop), and not the primary group ID of the user who created the files/sub-directories. However the explicit creation of $x/usercache/$user/appcache/$appId/output in ContainerLocalizer.java: \n{code}\nlfs.mkdir(new Path(appBase, OUTPUTDIR), null, false);\n{code}\ncauses the \"output\" directory to lose the setguid, and accordingly the attempts' outputs created inside it has the user's group ID, and hence user \"yarn\" is now unable to access these map outputs. Note that, yarn has group ID \"hadoop\", so if setguid was preserved, then it would have been able to access the files.\n\nThe attached patch addresses this issue, it simply avoids this way of creation of the output directory, as it is later correctly created when map outputs are written.\n \nI have tested it by running example pi and wordcount jobs on a single-node secure cluster, and also on an insecure single-node cluster.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ahmed.radwan","name":"ahmed.radwan","key":"ahmed.radwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ahmed Radwan","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-02-23T10:11:05.963+0000","updated":"2012-02-23T10:11:05.963+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13214553","id":"13214553","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"+1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12515738/MAPREDUCE-3728.patch\n  against trunk revision .\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed unit tests in .\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/1914//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-MAPREDUCE-Build/1914//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-23T11:17:12.775+0000","updated":"2012-02-23T11:17:12.775+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13218324","id":"13218324","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"body":"This patch seems to be working in my case. I'd recommend including it in the trunk and .23 branch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rvs","name":"rvs","key":"rvs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rvs&avatarId=13930","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rvs&avatarId=13930","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rvs&avatarId=13930","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rvs&avatarId=13930"},"displayName":"Roman Shaposhnik","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-02-28T16:29:13.426+0000","updated":"2012-02-28T16:29:13.426+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13219461","id":"13219461","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ahmed.radwan","name":"ahmed.radwan","key":"ahmed.radwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ahmed Radwan","active":true,"timeZone":"America/Los_Angeles"},"body":"As I mentioned earlier, it seems that the problem is mainly on how the output directory is created in ContainerLocalizer.java. The setgid is lost in the process. I have even tried to set the permissions explicitly and setting setgid but also this doesn't seem to solve the issue. \n\nSo I think the current patch, where the output directory creation is postponed is appropriate as it is correctly created afterwards by FileSystem.create(). We may also need to investigate more why mkdir in AbstractFileSystem in this case is causing the loss of setgid, and see if this a bug or it is an intentional behavior.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ahmed.radwan","name":"ahmed.radwan","key":"ahmed.radwan","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ahmed Radwan","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-02-29T19:51:33.365+0000","updated":"2012-02-29T19:51:33.365+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13219474","id":"13219474","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"body":"+1. I cannot think of any side effect by this change. Please open a JIRA against the Local impl of the LoginContext regarding the lost of the gid.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"created":"2012-02-29T20:03:16.342+0000","updated":"2012-02-29T20:03:16.342+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13219480","id":"13219480","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"body":"Thanks Ahmed. Committed to trunk and branch-0.23","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tucu00","name":"tucu00","key":"tucu00","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alejandro Abdelnur","active":true,"timeZone":"Europe/Madrid"},"created":"2012-02-29T20:06:52.473+0000","updated":"2012-02-29T20:06:52.473+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13219487","id":"13219487","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Common-trunk-Commit #1811 (See [https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1811/])\n    MAPREDUCE-3728. ShuffleHandler can't access results when configured in a secure mode (ahmed via tucu) (Revision 1295245)\n\n     Result = SUCCESS\ntucu : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1295245\nFiles : \n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ContainerLocalizer.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-29T20:11:02.043+0000","updated":"2012-02-29T20:11:02.043+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13219493","id":"13219493","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Common-0.23-Commit #620 (See [https://builds.apache.org/job/Hadoop-Common-0.23-Commit/620/])\n    Merge -r 1295244:1295245 from trunk to branch. FIXES: MAPREDUCE-3728 (Revision 1295246)\n\n     Result = SUCCESS\ntucu : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1295246\nFiles : \n* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ContainerLocalizer.java\n* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-29T20:12:48.519+0000","updated":"2012-02-29T20:12:48.519+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13219498","id":"13219498","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Hdfs-trunk-Commit #1886 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1886/])\n    MAPREDUCE-3728. ShuffleHandler can't access results when configured in a secure mode (ahmed via tucu) (Revision 1295245)\n\n     Result = SUCCESS\ntucu : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1295245\nFiles : \n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ContainerLocalizer.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-29T20:16:20.227+0000","updated":"2012-02-29T20:16:20.227+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13219499","id":"13219499","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Hdfs-0.23-Commit #609 (See [https://builds.apache.org/job/Hadoop-Hdfs-0.23-Commit/609/])\n    Merge -r 1295244:1295245 from trunk to branch. FIXES: MAPREDUCE-3728 (Revision 1295246)\n\n     Result = SUCCESS\ntucu : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1295246\nFiles : \n* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ContainerLocalizer.java\n* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-29T20:16:40.842+0000","updated":"2012-02-29T20:16:40.842+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13219557","id":"13219557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Mapreduce-0.23-Commit #620 (See [https://builds.apache.org/job/Hadoop-Mapreduce-0.23-Commit/620/])\n    Merge -r 1295244:1295245 from trunk to branch. FIXES: MAPREDUCE-3728 (Revision 1295246)\n\n     Result = ABORTED\ntucu : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1295246\nFiles : \n* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ContainerLocalizer.java\n* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-29T21:19:36.838+0000","updated":"2012-02-29T21:19:36.838+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13219561","id":"13219561","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Mapreduce-trunk-Commit #1818 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/1818/])\n    MAPREDUCE-3728. ShuffleHandler can't access results when configured in a secure mode (ahmed via tucu) (Revision 1295245)\n\n     Result = ABORTED\ntucu : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1295245\nFiles : \n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ContainerLocalizer.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-02-29T21:19:45.550+0000","updated":"2012-02-29T21:19:45.550+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13219993","id":"13219993","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Hdfs-trunk #971 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/971/])\n    MAPREDUCE-3728. ShuffleHandler can't access results when configured in a secure mode (ahmed via tucu) (Revision 1295245)\n\n     Result = SUCCESS\ntucu : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1295245\nFiles : \n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ContainerLocalizer.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-01T12:40:17.556+0000","updated":"2012-03-01T12:40:17.556+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13220041","id":"13220041","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Mapreduce-trunk #1006 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1006/])\n    MAPREDUCE-3728. ShuffleHandler can't access results when configured in a secure mode (ahmed via tucu) (Revision 1295245)\n\n     Result = SUCCESS\ntucu : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1295245\nFiles : \n* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ContainerLocalizer.java\n* /hadoop/common/trunk/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-03-01T13:58:05.608+0000","updated":"2012-03-01T13:58:05.608+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539819/comment/13411480","id":"13411480","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Hdfs-0.23-Build #310 (See [https://builds.apache.org/job/Hadoop-Hdfs-0.23-Build/310/])\n    svn merge -c 1295245 FIXES: MAPREDUCE-3728. ShuffleHandler can't access results when configured in a secure mode (ahmed via tucu) (Revision 1359724)\n\n     Result = UNSTABLE\nbobby : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1359724\nFiles : \n* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/CHANGES.txt\n* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ContainerLocalizer.java\n* /hadoop/common/branches/branch-0.23/hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/test/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/TestContainerLocalizer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-11T13:26:54.174+0000","updated":"2012-07-11T13:26:54.174+0000"}],"maxResults":19,"total":19,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAPREDUCE-3728/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i07ydr:"}}