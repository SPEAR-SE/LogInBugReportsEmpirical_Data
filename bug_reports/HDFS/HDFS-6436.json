{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": null,
        "components": [{
            "description": "WebHDFS: HTTP REST API for HDFS",
            "id": "12319200",
            "name": "webhdfs",
            "self": "https://issues.apache.org/jira/rest/api/2/component/12319200"
        }],
        "created": "2014-05-20T10:47:25.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Bangtao Zhou",
            "key": "zhoubangtao",
            "name": "zhoubangtao",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=zhoubangtao",
            "timeZone": "Asia/Shanghai"
        },
        "customfield_10010": null,
        "customfield_12310191": null,
        "customfield_12310192": "WebHdfsFileSystem execute get, renew and cancel delegationtoken should use spnego to authenticate",
        "customfield_12310220": "2014-05-20T13:53:35.294+0000",
        "customfield_12310222": "1_*:*_2_*:*_6599598_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_2_*:*_47651507910",
        "customfield_12310230": null,
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "1.0",
        "customfield_12310320": [{
            "archived": false,
            "description": "2.8.0 release",
            "id": "12329057",
            "name": "2.8.0",
            "releaseDate": "2017-03-22",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12329057"
        }],
        "customfield_12310420": "393698",
        "customfield_12310920": "393860",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i1vskn:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Mon Nov 23 01:09:12 UTC 2015",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "while in kerberos secure mode, when using WebHdfsFileSystem to access HDFS, it allways get an *org.apache.hadoop.security.authentication.client.AuthenticationException: Unauthorized*, for example, when call WebHdfsFileSystem.listStatus it will execute a LISTSTATUS Op, and this Op should authenticate via *delegation token*, so it will execute a GETDELEGATIONTOKEN Op to get a delegation token(actually GETDELEGATIONTOKEN authenticates via *SPNEGO*), but it still use delegation token to authenticate, so it allways get an Unauthorized Exception.\nException is like this:\n{code:java}\n19:05:11.758 [main] DEBUG o.a.h.hdfs.web.URLConnectionFactory - open URL connection\njava.io.IOException: org.apache.hadoop.security.authentication.client.AuthenticationException: Unauthorized\n\tat org.apache.hadoop.hdfs.web.WebHdfsFileSystem.validateResponse(WebHdfsFileSystem.java:287)\n\tat org.apache.hadoop.hdfs.web.WebHdfsFileSystem.access$200(WebHdfsFileSystem.java:82)\n\tat org.apache.hadoop.hdfs.web.WebHdfsFileSystem$AbstractRunner.runWithRetry(WebHdfsFileSystem.java:538)\n\tat org.apache.hadoop.hdfs.web.WebHdfsFileSystem$AbstractRunner.access$100(WebHdfsFileSystem.java:406)\n\tat org.apache.hadoop.hdfs.web.WebHdfsFileSystem$AbstractRunner$1.run(WebHdfsFileSystem.java:434)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:415)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1614)\n\tat org.apache.hadoop.hdfs.web.WebHdfsFileSystem$AbstractRunner.run(WebHdfsFileSystem.java:430)\n\tat org.apache.hadoop.hdfs.web.WebHdfsFileSystem.getDelegationToken(WebHdfsFileSystem.java:1058)\n19:05:11.766 [main] DEBUG o.a.h.security.UserGroupInformation - PrivilegedActionException as:bangtao@CYHADOOP.COM (auth:KERBEROS) cause:java.io.IOException: org.apache.hadoop.security.authentication.client.AuthenticationException: Unauthorized\n\tat org.apache.hadoop.hdfs.web.TokenAspect.ensureTokenInitialized(TokenAspect.java:134)\n19:05:11.767 [main] DEBUG o.a.h.security.UserGroupInformation - PrivilegedActionException as:bangtao@CYHADOOP.COM (auth:KERBEROS) cause:java.io.IOException: org.apache.hadoop.security.authentication.client.AuthenticationException: Unauthorized\n\tat org.apache.hadoop.hdfs.web.WebHdfsFileSystem.getDelegationToken(WebHdfsFileSystem.java:213)\n\tat org.apache.hadoop.hdfs.web.WebHdfsFileSystem.getAuthParameters(WebHdfsFileSystem.java:371)\n\tat org.apache.hadoop.hdfs.web.WebHdfsFileSystem.toUrl(WebHdfsFileSystem.java:392)\n\tat org.apache.hadoop.hdfs.web.WebHdfsFileSystem$AbstractFsPathRunner.getUrl(WebHdfsFileSystem.java:602)\n\tat org.apache.hadoop.hdfs.web.WebHdfsFileSystem$AbstractRunner.runWithRetry(WebHdfsFileSystem.java:533)\n\tat org.apache.hadoop.hdfs.web.WebHdfsFileSystem$AbstractRunner.access$100(WebHdfsFileSystem.java:406)\n\tat org.apache.hadoop.hdfs.web.WebHdfsFileSystem$AbstractRunner$1.run(WebHdfsFileSystem.java:434)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:415)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1614)\n\tat org.apache.hadoop.hdfs.web.WebHdfsFileSystem$AbstractRunner.run(WebHdfsFileSystem.java:430)\n\tat org.apache.hadoop.hdfs.web.WebHdfsFileSystem.listStatus(WebHdfsFileSystem.java:1037)\n\tat org.apache.hadoop.fs.FileSystem.listStatus(FileSystem.java:1483)\n\tat org.apache.hadoop.fs.FileSystem.listStatus(FileSystem.java:1523)\n\tat org.apache.hadoop.fs.FileSystem$4.<init>(FileSystem.java:1679)\n\tat org.apache.hadoop.fs.FileSystem.listLocatedStatus(FileSystem.java:1678)\n\tat org.apache.hadoop.fs.FileSystem.listLocatedStatus(FileSystem.java:1661)\n\tat org.apache.hadoop.fs.FileSystem$5.<init>(FileSystem.java:1723)\n\tat org.apache.hadoop.fs.FileSystem.listFiles(FileSystem.java:1720)\n\tat com.cyou.marketing.hop.filesystem.App$1.run(App.java:34)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:356)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1594)\n\tat com.cyou.marketing.hop.filesystem.App.main(App.java:24)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)\nCaused by: org.apache.hadoop.security.authentication.client.AuthenticationException: Unauthorized\n\t... 40 more\n{code}",
        "duedate": null,
        "environment": "Kerberos",
        "fixVersions": [],
        "issuelinks": [],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": ["BB2015-05-TBR"],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "id": "3",
            "name": "Major",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094"
            },
            "id": "12310942",
            "key": "HDFS",
            "name": "Hadoop HDFS",
            "projectCategory": {
                "description": "Scalable Distributed Computing",
                "id": "10292",
                "name": "Hadoop",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10292"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12310942"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Bangtao Zhou",
            "key": "zhoubangtao",
            "name": "zhoubangtao",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=zhoubangtao",
            "timeZone": "Asia/Shanghai"
        },
        "resolution": {
            "description": "All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.",
            "id": "5",
            "name": "Cannot Reproduce",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/5"
        },
        "resolutiondate": "2015-11-23T01:09:12.000+0000",
        "status": {
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "id": "5",
            "name": "Resolved",
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [],
        "summary": "WebHdfsFileSystem execute get, renew and cancel delegationtoken operation should use spnego to authenticate",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2016-05-12T18:16:42.000+0000",
        "versions": [
            {
                "archived": false,
                "description": "2.4.0 release",
                "id": "12326143",
                "name": "2.4.0",
                "releaseDate": "2014-04-07",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12326143"
            },
            {
                "archived": false,
                "description": "3.0.0-alpha1 release",
                "id": "12335732",
                "name": "3.0.0-alpha1",
                "releaseDate": "2016-09-03",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12335732"
            }
        ],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HDFS-6436/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HDFS-6436/watchers",
            "watchCount": 4
        },
        "workratio": -1
    },
    "id": "12715412",
    "key": "HDFS-6436",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/12715412"
}