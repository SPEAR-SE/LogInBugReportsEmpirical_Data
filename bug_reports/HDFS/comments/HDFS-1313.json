[patch for y20.1xx, It seems that your patch is not simply copying codes from HDFS-481-NEW.patch but also contains some additional codes.  Could you explain what are the additional codes for?

Also, you need to use the --no-prefix option in git for generating patches., Attached patch with --no-prefix. 

Nicholas,
   HDFS-481 patch on StreamFile did not cleanly apply on y20.1.xx. So I had to port the changes. The additional change is build.xml where jetty jars are made part of the war file. Had to add it because reference to DataNode in StreamFile which has a HttpServer with lot of jetty dependencies caused ClassNotFoundException errors. I added it few weeks back for the internal builds, but forgot it was not part of the original patch. , +1 Patch looks good., Changes checked into y20.1xx.]