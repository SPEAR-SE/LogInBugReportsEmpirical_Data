[Since {{ReplicationMonitor}} is not running or not generating any work on SBN, {{invalidateBlocks}} is not consumed. Only when SBN becomes active, it will be cleared.  {{invalidateBlocks}} is populated during  block report processing. I think no queues including {{invalidateBlocks}} should be populated in standby., Block report processing is actually okay. All types of block report processing goes through {{BlockManager#processReportedBlock()}} and any report from future is queued.  It is {{delete()}} that causes this queue to be populated. After collecting all blocks to be invalidated, {{BlockManager#removeBlock()}}  is called, which calls {{addToInvalidates()}}.  If NN is in standby, {{addToInvalidates()}} should not be called.
, It's already fixed by HDFS-6424!]