[I have attached patch, please someone can review it.
Thanks in advance 
, {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12699135/HDFS-7805.patch
  against trunk revision 814afa4.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy.

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/9593//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/9593//console

This message is automatically generated., Thanks for taking a look at this, [~surendrasingh].  This is a tough JIRA because I do think it would be nice to have this information in the log file.  But I'm not sure how to get it there exactly if we use {{System.err.printf}}.  There are also a bunch of other log messages in recovery mode not affected by your patch, so this isn't a complete solution.

Do you think it's possible to programmatically modify the log4j configuration so that stderr is one of the targets when recovery mode is enabled?  That seems easier than converting so many LOG messages to printf, and better for people who want to keep the logs as well., Thanks [~cmccabe] for comment

You are right, all log should be in log file only.
But I want to print only prompt message where we will wait for user input

For example we are doing in {{ToolRunner.confirmPrompt()}}.

{code}
 while (true) {
      System.err.print(prompt + " (Y or N) ");
      StringBuilder responseBuilder = new StringBuilder();
      while (true) {
        int c = System.in.read();
        if (c == -1 || c == '\r' || c == '\n') {
          break;
        }
        responseBuilder.append((char)c);
      }
{code}

here we are waiting for user input using {{System.in.read()}}

If prompt message not printed one console then user not knows what input he needs to give.
Same I want for {{MetaRecoveryContext.ask()}} prompt message.

Please give your suggestion.
Thanks in advance for your suggestions.
, This should also be a System.out.println:

{code}
        LOG.info("automatically choosing " + firstChoice);
{code}

+1 once that's resolved.  Thanks, surendra., [~cmccabe] Thanks :)

Attached new patch., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12700008/HDFS-7805_1.patch
  against trunk revision 6f01330.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:red}-1 core tests{color}.  The following test timeouts occurred in hadoop-hdfs-project/hadoop-hdfs:

org.apache.hadoop.hdfs.server.namenode.ha.TestHAAppend

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/9635//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/9635//console

This message is automatically generated., +1.  TestHAAppend failure is unrelated., committed to 2.7, FAILURE: Integrated in Hadoop-trunk-Commit #7183 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/7183/])
HDFS-7805. NameNode recovery prompt should be printed on console (Surendra Singh Lilhore via Colin P. McCabe) (cmccabe: rev faaddb6ecb44cdc9ef82a2ab392f64fc2561e938)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
, FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #114 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/114/])
HDFS-7805. NameNode recovery prompt should be printed on console (Surendra Singh Lilhore via Colin P. McCabe) (cmccabe: rev faaddb6ecb44cdc9ef82a2ab392f64fc2561e938)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
, SUCCESS: Integrated in Hadoop-Yarn-trunk #848 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/848/])
HDFS-7805. NameNode recovery prompt should be printed on console (Surendra Singh Lilhore via Colin P. McCabe) (cmccabe: rev faaddb6ecb44cdc9ef82a2ab392f64fc2561e938)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
, FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #105 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/105/])
HDFS-7805. NameNode recovery prompt should be printed on console (Surendra Singh Lilhore via Colin P. McCabe) (cmccabe: rev faaddb6ecb44cdc9ef82a2ab392f64fc2561e938)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
, SUCCESS: Integrated in Hadoop-Hdfs-trunk #2046 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2046/])
HDFS-7805. NameNode recovery prompt should be printed on console (Surendra Singh Lilhore via Colin P. McCabe) (cmccabe: rev faaddb6ecb44cdc9ef82a2ab392f64fc2561e938)
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.java
, FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #114 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/114/])
HDFS-7805. NameNode recovery prompt should be printed on console (Surendra Singh Lilhore via Colin P. McCabe) (cmccabe: rev faaddb6ecb44cdc9ef82a2ab392f64fc2561e938)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #2064 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2064/])
HDFS-7805. NameNode recovery prompt should be printed on console (Surendra Singh Lilhore via Colin P. McCabe) (cmccabe: rev faaddb6ecb44cdc9ef82a2ab392f64fc2561e938)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
]