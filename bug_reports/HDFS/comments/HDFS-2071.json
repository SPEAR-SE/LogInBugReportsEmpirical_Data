[The bug introduced in HDFS-941, The system functions without patch with almost no noticeable timing difference.
No test is added since the correctness cannot be checked by running tests., Kihwal - Since HDFS-941 is not yet committed, I think you can comment/review on that JIRA regarding this bug. Would be worth putting into as a single commit than having this follow up to that?, HDFS-941 is already in trunk. The current discussion mainly for 0.22., Gah, missed that, and the comments there. I take back my suggestion :-), -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12482696/HDFS-2071.patch
  against trunk revision 1136132.

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed these core unit tests:
                  org.apache.hadoop.cli.TestHDFSCLI
                  org.apache.hadoop.hdfs.TestHDFSTrash

    +1 contrib tests.  The patch passed contrib unit tests.

    +1 system test framework.  The patch passed system test framework compile.

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/787//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HDFS-Build/787//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/787//console

This message is automatically generated., Test failures:
* TestHDFSCLI: The quota related test failures are not due to this patch. They also failed in build #696.
* TestHDFSTrash : It was failing in other recent pre-commit builds: e.g. https://builds.apache.org/job/PreCommit-HDFS-Build/786/

Tests included: No test is included as justified above., +1, committed. Thanks Kihwal, Integrated in Hadoop-Hdfs-trunk-Commit #746 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/746/])
    , Integrated in Hadoop-Hdfs-22-branch #70 (See [https://builds.apache.org/job/Hadoop-Hdfs-22-branch/70/])
    ]