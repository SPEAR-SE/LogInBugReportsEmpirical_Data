[Does this look good as a fix?, Looks like it should fix the dfsadmin issue. Would it be easy to plumb through the NN's configuration all the way to the TransferFsImage calls as well? I seem to remember us now supporting passing configuration on the command line for NameNode - would be nice if those were reflecting here. If that's too ugly, let's just keep the partial fix you've done., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12575730/HDFS-4638.patch
  against trunk revision b375d1f.

    {color:red}-1 patch{color}.  The patch command could not apply the patch.

Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/10028//console

This message is automatically generated., | (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m  0s{color} | {color:blue} Docker mode activated. {color} |
| {color:red}-1{color} | {color:red} patch {color} | {color:red}  0m  5s{color} | {color:red} HDFS-4638 does not apply to trunk. Rebase required? Wrong Branch? See https://wiki.apache.org/hadoop/HowToContribute for help. {color} |
\\
\\
|| Subsystem || Report/Notes ||
| JIRA Issue | HDFS-4638 |
| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12575730/HDFS-4638.patch |
| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/24213/console |
| Powered by | Apache Yetus 0.8.0-SNAPSHOT   http://yetus.apache.org |


This message was automatically generated.

]