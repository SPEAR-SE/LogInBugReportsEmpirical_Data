[Hi  [~Harsha1206], Thank you for taking time to file this JIRA. I appreciate it. From a high level, I do agree with your thought process. In an ideal world, the execute should have returned an error code. However, disk balancer works slightly differently, understanding what happens under the covers might help you realize what is happening, though you may not agree with the behavior.

When DiskBalancer executes the plan, it is the beginning of an asynchronous process that can take a long time. So execute command directly hands over the disk balancer plan file to the data node and data node executes the plan.

Hence a return code from execute indicates merely that the command was successful in handing over the plan file to data node to perform balancing at a later point in time.

DiskBalancer also supports a command called query, that will give you information about the current status, a failure during runtime will be reflected in the query command, and as you rightly discovered, in the data node logs.

if you believe that Apache Hadoop user documentation does not adequately explain this process, please feel free to convert this Jira to a doc Jira, and one of us can get this fixed.

if you would like to pursue the architecture of Disk balancer, there are two documents – the proposal and the architecture and test plan in this Jira https://issues.apache.org/jira/browse/HDFS-1312 which explains how disk balancer works in great detail.

Thank you very much for taking time out to file the Jira and bringing this issue to my attention.

 

 

 

 , [~anu] Thanks for watching this issue and Good Explanation about Execute command.

bq.please feel free to convert this Jira to a doc Jira, and one of us can get this fixed.

Okay.]