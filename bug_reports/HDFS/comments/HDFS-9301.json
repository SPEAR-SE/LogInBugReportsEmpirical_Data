[As discussion in common-dev@, we may fix this by make the {{hadoop-client}} depend on {{hadoop-hdfs}} instead of {{hadoop-hdfs-client}}. Downstream users are free to exclude the server code by making it depend on {{hadoop-hdfs-client}} for thin dependency., lets see what happens in the discussion before voting on this, Thanks for reporting this [~steve_l]. I'll update the patch accordingly., \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | pre-patch |  20m 13s | Pre-patch trunk compilation is healthy. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |
| {color:green}+1{color} | javac |  10m 15s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |  13m 41s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 29s | The applied patch does not increase the total number of release audit warnings. |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   2m  0s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 45s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | client tests |   0m 17s | Tests passed in hadoop-client. |
| | |  47m 43s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12766630/HDFS-9241.000.patch |
| Optional Tests | javadoc javac unit |
| git revision | trunk / 3d50855 |
| hadoop-client test log | https://builds.apache.org/job/PreCommit-HDFS-Build/12991/artifact/patchprocess/testrun_hadoop-client.txt |
| Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/12991/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf907.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/12991/console |


This message was automatically generated., One other thing to consider is "would we expect thin clients to ever instantiate this class?". If so, should it be in that JAR. 

until now, creating it has been the way to force hdfs-site in, just as creating a {{YarnConfiguration()}} forced that in. After hitting problems with race conditions in UGI init, I now load all of these on startup. Should this be necessary?, bq. One other thing to consider is "would we expect thin clients to ever instantiate this class?". If so, should it be in that JAR.

My answer is no -- the current implementation has a class {{HdfsConfigurationLoader}} to load the configurations that serves the original purposes of {{HdfsConfiguration}} on the client side.

The reason is that {{HdfsConfiguration}} are used by both the client and the server side. It contains deprecated keys for the server side, which IMO should not be exposed to the clients at all., bq. the changes for the hdfs client classpath make instantiating HdfsConfiguration from the client impossible; it only lives server side. This breaks any app which creates one.

I'm trying to understand the use cases of applications creating a {{HdfsConfiguration}} instance. Is it because that the apps need a way to force the hdfs configurations to be loaded?

Old applications can still depend on {{hadoop-hdfs}} and nothing will break. However, the application might need to change a couple lines of code if it only wants to depend on {{hadoop-hdfs-client}}. Thoughts?, {quote}
Old applications can still depend on hadoop-hdfs and nothing will break. However, the application might need to change a couple lines of code if it only wants to depend on hadoop-hdfs-client. 
{quote}
It makes sense to me. Do you think we need to make {{HdfsConfigurationLoader}} public so that code depending on {{hadoop-hdfs-client}} is able to load the default resource forcefully (in case)?, bq. My answer is no â€“ the current implementation has a class HdfsConfigurationLoader to load the configurations that serves the original purposes of HdfsConfiguration on the client side.

You've just created an incompatible change on branch-2. I've hit this problem in Slider, which we build against 2.6, only now find it doesn't. Others may have similar problem.

bq. The reason is that HdfsConfiguration are used by both the client and the server side. It contains deprecated keys for the server side, which IMO should not be exposed to the clients at all.

welll, they are tagged as deprecated. Again, they may get used., to clarify then

# the thin client doesn't have a backwards compatible way to force load hdfs-site
# the "two lines of code"  proposed as a workaround is in fact package private
# the reason for introducing this change is because there are some deprecated tags

I don't want to come over all [~aw] here but this isn't justification for making things incompatible. And while, yes, I can include the hdfs all JAR, that misses the purpose of the hdfs-client package: to produce a leaner client-side only package.

We've long hand a problem in HDFS, that whereas Yarn's {{YarnConfiguration}}, and indeed {{JobConfiguration}} have been public with stable string constants designed for public consumption, the sole set of string constants in HDFS have been considered private, free to change on a whim. Either we downstream developers  end up importing and something which has a history of being broken (HDFS-6418) on the grounds that "people downstream should have cut and paste strings into their source". At least when people use {{DFSConfigKeys}} values, you can use the IDE to find the load points.

I propose 
# accepting that yes, there are deprecated constants in {{DFSConfigKeys}}, but they are used in client apps
# moving it and the HdfsConfiguration class into hdfs-client

It's not going to add new dependencies, and it will retain compatibility. , Though I don't think this is a strictly incompatible change as the applications won't break if they still depend on hadoop-hdfs, I see a lot of values to allow the applications to just change their dependency to hadoop-hdfs-client and without changing the code.

I think the proposal makes a lot of sense. +1 on the proposal. [~liuml07], do you agree?, I see your point, but I will note that it loses part of the benefit of the whole idea of a leaner client "you miss out all the server-side dependencies", Totally agree. Let's go ahead with your proposals :-), I think you two [~wheat9] and [~steve_l] have made good points. I'll update the patch soon., bq. I see your point, but I will note that it loses part of the benefit of the whole idea of a leaner client "you miss out all the server-side dependencies"

As we commented when the project started, the client is not "thin"-- most of the problematic dependencies like Jackson, Guava, Jetty, Jersey, Netty, Xerces, Protobuf are included in the client anyway.  So the client/server split provides no meaningful dependency isolation with or without this change., bq. most of the problematic dependencies like Jackson, Guava, Jetty, Jersey, Netty, Xerces, Protobuf are included in the client anyway

I found that the above statement inaccurate. Many of the above dependency comes as transitive dependency from hadoop-common. They are not needed from hadoop-hdfs-client. They can be excluded as what have been done in hadoop client. Just to give an example, we cleaned up the implementation of log4j in the module (HDFS-6564). I don't see how this can be done correctly without the breakdown.

As the refactor continues to break down hadoop-common into server / client modules, I anticipate that this is a non-issue. The shadowing approach is complementary. However, having a client that shadows 2000 classes that it doesn't need that it happens to work at a first glance but it doesn't seems elegant and responsible in the long term., Protobuf is used in RPCv9.  The client must speak that.  Guava is used extensively in the client as well.  You will need commons-logging, and all the other logging stuff too.  commons-codec and commons-io will be needed to decompress data.  Those are just the ones I can think of off the top of my head., Netty? client side? I thought changes in ZK's dependencies there was what was breaking hadoop-hdfs builds on bigtop (HADOOP-12415). hdfs-client shouldn't be needing netty. There's no jersey, none of its bits, and you could probably cull curator. , The v1 patch moves the {{HdfsConfiguration}} class from {{hadoop-hdfs}} to {{hadoop-hdfs-client}} module so that the current downstream code will not be broken if it uses {{HdfsConfiguration.init()}} to forcefully load default HDFS resources.

To add deprecated keys in {{HdfsConfiguration}}, some config keys are moved to {{hadoop-hdfs-client}} module as well., \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:red}-1{color} | pre-patch |  20m  3s | Pre-patch trunk has 1 extant Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |
| {color:green}+1{color} | javac |   7m 57s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |  10m 29s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 24s | The applied patch does not increase the total number of release audit warnings. |
| {color:red}-1{color} | checkstyle |   2m 29s | The applied patch generated  91 new checkstyle issues (total was 104, now 194). |
| {color:green}+1{color} | whitespace |   0m  1s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 39s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 34s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   4m 34s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | native |   3m 13s | Pre-build of native portion |
| {color:green}+1{color} | hdfs tests |  50m 18s | Tests passed in hadoop-hdfs. |
| {color:green}+1{color} | hdfs tests |   0m 32s | Tests passed in hadoop-hdfs-client. |
| | | 102m 18s | |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12767728/HDFS-9241.001.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / 0c4af0f |
| Pre-patch Findbugs warnings | https://builds.apache.org/job/PreCommit-HDFS-Build/13102/artifact/patchprocess/trunkFindbugsWarningshadoop-hdfs.html |
| checkstyle |  https://builds.apache.org/job/PreCommit-HDFS-Build/13102/artifact/patchprocess/diffcheckstylehadoop-hdfs-client.txt |
| hadoop-hdfs test log | https://builds.apache.org/job/PreCommit-HDFS-Build/13102/artifact/patchprocess/testrun_hadoop-hdfs.txt |
| hadoop-hdfs-client test log | https://builds.apache.org/job/PreCommit-HDFS-Build/13102/artifact/patchprocess/testrun_hadoop-hdfs-client.txt |
| Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/13102/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf903.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/13102/console |


This message was automatically generated., I like this. I'll still have to move my code off DFSConfigKeys, which means some inlining of constants, but at least the critical issue, getting those hdfs-site and hdfs-default XML resources loaded will be addressed. That's the thing that would have really caused problems.

I'll leave for others to give a final vote, but I'm personally +1 here, {code}
+  String  DFS_NAMENODE_BACKUP_ADDRESS_KEY = "dfs.namenode.backup.address";
+  String  DFS_NAMENODE_BACKUP_HTTP_ADDRESS_KEY = "dfs.namenode.backup.http-address";
...
{code}

It makes sense to wrap all these strings into an interface to explicitly state that they are deprecated keys. For example.

{code}
/**
 * Some comments here
 **/
interface DeprecatedKeys {
  String ...
}
{code}

, Thanks for your review [~stevel@apache.org] and [~wheat9]. The v2 patch puts the deprecated keys in a nested interface of {{HdfsClientConfigKeys}}., \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:red}-1{color} | pre-patch |  20m 30s | Pre-patch trunk has 1 extant Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |
| {color:green}+1{color} | javac |   8m 12s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |  10m 36s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 24s | The applied patch does not increase the total number of release audit warnings. |
| {color:red}-1{color} | checkstyle |   2m 32s | The applied patch generated  108 new checkstyle issues (total was 105, now 212). |
| {color:green}+1{color} | whitespace |   0m  1s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 37s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 33s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   4m 31s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | native |   3m 13s | Pre-build of native portion |
| {color:red}-1{color} | hdfs tests |   0m 21s | Tests failed in hadoop-hdfs. |
| {color:green}+1{color} | hdfs tests |   0m 29s | Tests passed in hadoop-hdfs-client. |
| | |  53m  3s | |
\\
\\
|| Reason || Tests ||
| Failed build | hadoop-hdfs |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12767860/HDFS-9241.002.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / 25f8f80 |
| Pre-patch Findbugs warnings | https://builds.apache.org/job/PreCommit-HDFS-Build/13114/artifact/patchprocess/trunkFindbugsWarningshadoop-hdfs.html |
| checkstyle |  https://builds.apache.org/job/PreCommit-HDFS-Build/13114/artifact/patchprocess/diffcheckstylehadoop-hdfs-client.txt |
| hadoop-hdfs test log | https://builds.apache.org/job/PreCommit-HDFS-Build/13114/artifact/patchprocess/testrun_hadoop-hdfs.txt |
| hadoop-hdfs-client test log | https://builds.apache.org/job/PreCommit-HDFS-Build/13114/artifact/patchprocess/testrun_hadoop-hdfs-client.txt |
| Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/13114/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf904.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/13114/console |


This message was automatically generated., The v3 patch is to address the checkstyle warnings., The v2 patch can be built locally (Mac and Linux), and the v3 patch did not trigger Jenkins successfully (cancel patch and submit patch won't trigger it either).

The v4 patch rebases from trunk., \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:red}-1{color} | pre-patch |  24m 53s | Pre-patch trunk has 1 extant Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |
| {color:green}+1{color} | javac |   8m 38s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |  10m 42s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 27s | The applied patch does not increase the total number of release audit warnings. |
| {color:red}-1{color} | checkstyle |   2m 47s | The applied patch generated  17 new checkstyle issues (total was 104, now 120). |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 42s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 35s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   4m 36s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | native |   3m 13s | Pre-build of native portion |
| {color:red}-1{color} | hdfs tests |  44m  3s | Tests failed in hadoop-hdfs. |
| {color:green}+1{color} | hdfs tests |   0m 31s | Tests passed in hadoop-hdfs-client. |
| | | 102m 12s | |
\\
\\
|| Reason || Tests ||
| Failed unit tests | hadoop.hdfs.TestHFlush |
|   | hadoop.hdfs.TestModTime |
|   | hadoop.hdfs.TestRemoteBlockReader2 |
|   | hadoop.hdfs.TestReplication |
|   | hadoop.hdfs.qjournal.client.TestQJMWithFaults |
|   | hadoop.hdfs.TestDFSInotifyEventInputStream |
|   | hadoop.hdfs.TestAbandonBlock |
|   | hadoop.hdfs.TestSetTimes |
|   | hadoop.hdfs.TestDFSFinalize |
|   | hadoop.hdfs.server.blockmanagement.TestNodeCount |
|   | hadoop.hdfs.TestAppendDifferentChecksum |
|   | hadoop.hdfs.TestHDFSFileSystemContract |
|   | hadoop.hdfs.TestFileCreationClient |
|   | hadoop.hdfs.TestDefaultNameNodePort |
|   | hadoop.hdfs.web.TestWebHDFS |
|   | hadoop.hdfs.TestHdfsAdmin |
|   | hadoop.hdfs.TestReadStripedFileWithDecoding |
|   | hadoop.hdfs.TestReadWhileWriting |
|   | hadoop.hdfs.TestFileCreation |
|   | hadoop.hdfs.TestRead |
|   | hadoop.hdfs.qjournal.server.TestJournalNodeMXBean |
|   | hadoop.hdfs.crypto.TestHdfsCryptoStreams |
|   | hadoop.hdfs.qjournal.TestSecureNNWithQJM |
|   | hadoop.hdfs.TestClientProtocolForPipelineRecovery |
|   | hadoop.hdfs.TestWriteConfigurationToDFS |
|   | hadoop.hdfs.TestParallelShortCircuitReadNoChecksum |
|   | hadoop.hdfs.util.TestBestEffortLongFile |
|   | hadoop.hdfs.qjournal.client.TestQuorumJournalManager |
|   | hadoop.hdfs.TestSnapshotCommands |
|   | hadoop.hdfs.TestEncryptionZonesWithKMS |
|   | hadoop.hdfs.TestFileAppend |
|   | hadoop.hdfs.qjournal.server.TestJournal |
|   | hadoop.hdfs.TestRecoverStripedFile |
|   | hadoop.hdfs.TestFileCorruption |
|   | hadoop.hdfs.TestQuota |
|   | hadoop.hdfs.TestRemoteBlockReader |
|   | hadoop.hdfs.TestDFSShellGenericOptions |
|   | hadoop.hdfs.TestHDFSServerPorts |
|   | hadoop.hdfs.qjournal.server.TestJournalNode |
|   | hadoop.hdfs.TestFileStatusWithECPolicy |
|   | hadoop.hdfs.TestLocalDFS |
|   | hadoop.hdfs.TestLease |
|   | hadoop.hdfs.TestIsMethodSupported |
|   | hadoop.hdfs.TestWriteRead |
|   | hadoop.hdfs.TestFileAppend2 |
|   | hadoop.hdfs.TestSetrepIncreasing |
|   | hadoop.hdfs.TestDatanodeDeath |
|   | hadoop.hdfs.TestDFSStripedOutputStream |
|   | hadoop.hdfs.TestBlockReaderFactory |
|   | hadoop.hdfs.qjournal.client.TestEpochsAreUnique |
|   | hadoop.hdfs.TestClose |
|   | hadoop.hdfs.TestDeprecatedKeys |
|   | hadoop.hdfs.TestDataTransferKeepalive |
|   | hadoop.hdfs.TestDatanodeLayoutUpgrade |
|   | hadoop.hdfs.TestDFSUtil |
|   | hadoop.hdfs.TestPersistBlocks |
|   | hadoop.hdfs.TestErasureCodingPolicies |
|   | hadoop.hdfs.TestHDFSTrash |
|   | hadoop.hdfs.TestFileCreationEmpty |
|   | hadoop.hdfs.TestFileCreationDelete |
|   | hadoop.hdfs.TestDatanodeStartupFixesLegacyStorageIDs |
|   | hadoop.hdfs.TestListFilesInDFS |
|   | hadoop.hdfs.TestDatanodeConfig |
|   | hadoop.hdfs.TestEncryptionZonesWithHA |
|   | hadoop.hdfs.TestDFSStripedOutputStreamWithFailure010 |
|   | hadoop.hdfs.shortcircuit.TestShortCircuitLocalRead |
|   | hadoop.hdfs.TestDFSStorageStateRecovery |
|   | hadoop.hdfs.TestDFSUpgradeFromImage |
|   | hadoop.hdfs.TestDisableConnCache |
|   | hadoop.hdfs.TestPipelines |
|   | hadoop.hdfs.TestCrcCorruption |
|   | hadoop.hdfs.TestClientBlockVerification |
|   | hadoop.hdfs.TestMultiThreadedHflush |
|   | hadoop.hdfs.TestParallelShortCircuitReadUnCached |
|   | hadoop.hdfs.TestMiniDFSCluster |
|   | hadoop.hdfs.TestFileConcurrentReader |
|   | hadoop.hdfs.TestDFSOutputStream |
|   | hadoop.hdfs.TestDFSStripedOutputStreamWithFailure |
|   | hadoop.hdfs.TestWriteReadStripedFile |
|   | hadoop.hdfs.qjournal.TestMiniJournalCluster |
|   | hadoop.hdfs.TestDFSMkdirs |
|   | hadoop.hdfs.TestDecommission |
|   | hadoop.hdfs.TestListFilesInFileContext |
|   | hadoop.hdfs.qjournal.TestNNWithQJM |
|   | hadoop.hdfs.protocol.datatransfer.sasl.TestSaslDataTransfer |
|   | hadoop.hdfs.TestEncryptionZones |
|   | hadoop.hdfs.TestRollingUpgrade |
|   | hadoop.hdfs.TestGetBlocks |
|   | hadoop.hdfs.TestRestartDFS |
|   | hadoop.hdfs.TestDFSStartupVersions |
|   | hadoop.hdfs.TestDFSRollback |
|   | hadoop.hdfs.TestWriteBlockGetsBlockLengthHint |
|   | hadoop.hdfs.TestDataTransferProtocol |
|   | hadoop.hdfs.shortcircuit.TestShortCircuitCache |
|   | hadoop.hdfs.TestRollingUpgradeDowngrade |
|   | hadoop.hdfs.qjournal.client.TestIPCLoggerChannel |
|   | hadoop.hdfs.TestDFSPermission |
|   | hadoop.hdfs.TestDFSAddressConfig |
|   | hadoop.hdfs.TestDFSStripedInputStream |
|   | hadoop.hdfs.TestBlockStoragePolicy |
|   | hadoop.hdfs.TestInjectionForSimulatedStorage |
|   | hadoop.hdfs.TestFileAppendRestart |
|   | hadoop.hdfs.TestConnCache |
|   | hadoop.hdfs.TestRollingUpgradeRollback |
|   | hadoop.hdfs.TestEncryptedTransfer |
|   | hadoop.hdfs.TestBalancerBandwidth |
|   | hadoop.hdfs.TestDFSRemove |
|   | hadoop.hdfs.TestDistributedFileSystem |
|   | hadoop.hdfs.TestSetrepDecreasing |
|   | hadoop.hdfs.TestAppendSnapshotTruncate |
|   | hadoop.hdfs.TestFsShellPermission |
|   | hadoop.hdfs.TestGetFileChecksum |
|   | hadoop.hdfs.TestLeaseRecovery |
|   | hadoop.hdfs.web.TestWebHDFSAcl |
|   | hadoop.hdfs.TestSafeModeWithStripedFile |
|   | hadoop.hdfs.TestParallelShortCircuitLegacyRead |
|   | hadoop.hdfs.TestDFSStripedOutputStreamWithFailure000 |
|   | hadoop.hdfs.TestLeaseRecovery2 |
|   | hadoop.hdfs.TestDFSUpgrade |
|   | hadoop.hdfs.TestParallelUnixDomainRead |
|   | hadoop.hdfs.TestParallelShortCircuitRead |
|   | hadoop.hdfs.TestSeekBug |
| Timed out tests | org.apache.hadoop.hdfs.web.TestWebHdfsWithMultipleNameNodes |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12768099/HDFS-9241.004.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / 960201b |
| Pre-patch Findbugs warnings | https://builds.apache.org/job/PreCommit-HDFS-Build/13134/artifact/patchprocess/trunkFindbugsWarningshadoop-hdfs.html |
| checkstyle |  https://builds.apache.org/job/PreCommit-HDFS-Build/13134/artifact/patchprocess/diffcheckstylehadoop-hdfs-client.txt |
| hadoop-hdfs test log | https://builds.apache.org/job/PreCommit-HDFS-Build/13134/artifact/patchprocess/testrun_hadoop-hdfs.txt |
| hadoop-hdfs-client test log | https://builds.apache.org/job/PreCommit-HDFS-Build/13134/artifact/patchprocess/testrun_hadoop-hdfs-client.txt |
| Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/13134/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf905.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/13134/console |


This message was automatically generated., The failing tests can pass locally. It seems the Jenkins is broken.

The v5 patch fixes checkstyle warnings and rebase from the {{trunk}} branch., \\
\\
| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:red}-1{color} | pre-patch |  21m 22s | Pre-patch trunk has 1 extant Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |
| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |
| {color:green}+1{color} | javac |   9m  0s | There were no new javac warning messages. |
| {color:green}+1{color} | javadoc |  11m 45s | There were no new javadoc warning messages. |
| {color:green}+1{color} | release audit |   0m 25s | The applied patch does not increase the total number of release audit warnings. |
| {color:red}-1{color} | checkstyle |   2m 54s | The applied patch generated  1 new checkstyle issues (total was 104, now 104). |
| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |
| {color:green}+1{color} | install |   1m 53s | mvn install still works. |
| {color:green}+1{color} | eclipse:eclipse |   0m 35s | The patch built with eclipse:eclipse. |
| {color:green}+1{color} | findbugs |   4m 56s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |
| {color:green}+1{color} | native |   3m 44s | Pre-build of native portion |
| {color:red}-1{color} | hdfs tests |  54m 47s | Tests failed in hadoop-hdfs. |
| {color:green}+1{color} | hdfs tests |   0m 34s | Tests passed in hadoop-hdfs-client. |
| | | 111m 59s | |
\\
\\
|| Reason || Tests ||
| Failed unit tests | hadoop.fs.contract.hdfs.TestHDFSContractMkdir |
|   | hadoop.hdfs.qjournal.TestMiniJournalCluster |
|   | hadoop.cli.TestDeleteCLI |
|   | hadoop.hdfs.TestFileLengthOnClusterRestart |
|   | hadoop.hdfs.TestAppendSnapshotTruncate |
|   | hadoop.fs.contract.hdfs.TestHDFSContractRootDirectory |
|   | hadoop.cli.TestHDFSCLI |
|   | hadoop.hdfs.TestReplaceDatanodeOnFailure |
|   | hadoop.hdfs.TestDFSStorageStateRecovery |
|   | hadoop.fs.contract.hdfs.TestHDFSContractRename |
|   | hadoop.cli.TestCacheAdminCLI |
|   | hadoop.hdfs.TestDFSStripedOutputStreamWithFailure |
|   | hadoop.fs.loadGenerator.TestLoadGenerator |
|   | hadoop.fs.TestFcHdfsSetUMask |
|   | hadoop.hdfs.crypto.TestHdfsCryptoStreams |
|   | hadoop.fs.viewfs.TestViewFsFileStatusHdfs |
|   | hadoop.tracing.TestTracingShortCircuitLocalRead |
|   | hadoop.tracing.TestTracing |
|   | hadoop.hdfs.TestDFSStripedInputStream |
|   | hadoop.fs.TestWebHdfsFileContextMainOperations |
|   | hadoop.hdfs.TestParallelShortCircuitReadNoChecksum |
|   | hadoop.hdfs.TestParallelShortCircuitLegacyRead |
|   | hadoop.net.TestNetworkTopology |
|   | hadoop.fs.TestFcHdfsCreateMkdir |
|   | hadoop.fs.TestFcHdfsPermission |
|   | hadoop.hdfs.TestQuota |
|   | hadoop.hdfs.qjournal.server.TestJournal |
|   | hadoop.hdfs.TestDFSStartupVersions |
|   | hadoop.fs.viewfs.TestViewFsWithXAttrs |
|   | hadoop.cli.TestErasureCodingCLI |
|   | hadoop.tools.TestJMXGet |
|   | hadoop.TestGenericRefresh |
|   | hadoop.hdfs.TestRecoverStripedFile |
|   | hadoop.hdfs.TestDataTransferKeepalive |
|   | hadoop.fs.TestSWebHdfsFileContextMainOperations |
|   | hadoop.fs.contract.hdfs.TestHDFSContractDelete |
|   | hadoop.fs.contract.hdfs.TestHDFSContractSetTimes |
|   | hadoop.hdfs.TestConnCache |
|   | hadoop.hdfs.TestFileAppend |
|   | hadoop.hdfs.TestReadStripedFileWithDecoding |
|   | hadoop.TestRefreshCallQueue |
|   | hadoop.hdfs.TestDisableConnCache |
|   | hadoop.cli.TestXAttrCLI |
|   | hadoop.fs.TestUrlStreamHandler |
|   | hadoop.tools.TestTools |
|   | hadoop.fs.TestEnhancedByteBufferAccess |
|   | hadoop.hdfs.TestRollingUpgrade |
|   | hadoop.fs.viewfs.TestViewFileSystemWithXAttrs |
|   | hadoop.fs.TestHDFSFileContextMainOperations |
|   | hadoop.hdfs.qjournal.client.TestEpochsAreUnique |
|   | hadoop.hdfs.TestExternalBlockReader |
|   | hadoop.fs.contract.hdfs.TestHDFSContractAppend |
|   | hadoop.hdfs.TestDFSStripedOutputStream |
|   | hadoop.hdfs.TestHdfsAdmin |
|   | hadoop.fs.contract.hdfs.TestHDFSContractOpen |
|   | hadoop.hdfs.TestFileCreation |
|   | hadoop.hdfs.TestClientReportBadBlock |
|   | hadoop.tracing.TestTraceAdmin |
|   | hadoop.hdfs.TestAbandonBlock |
|   | hadoop.hdfs.TestDFSInputStream |
|   | hadoop.hdfs.TestWriteBlockGetsBlockLengthHint |
|   | hadoop.fs.viewfs.TestViewFsHdfs |
|   | hadoop.fs.contract.hdfs.TestHDFSContractConcat |
|   | hadoop.fs.viewfs.TestViewFileSystemAtHdfsRoot |
|   | hadoop.cli.TestCryptoAdminCLI |
|   | hadoop.hdfs.TestFileCreationDelete |
|   | hadoop.hdfs.qjournal.server.TestJournalNodeMXBean |
|   | hadoop.hdfs.TestReplication |
|   | hadoop.cli.TestAclCLI |
|   | hadoop.fs.viewfs.TestViewFileSystemWithAcls |
|   | hadoop.fs.TestSymlinkHdfsFileContext |
|   | hadoop.fs.TestSymlinkHdfsFileSystem |
|   | hadoop.hdfs.TestFileAppend3 |
|   | hadoop.fs.TestUnbuffer |
|   | hadoop.hdfs.qjournal.client.TestQuorumJournalManager |
|   | hadoop.hdfs.qjournal.TestSecureNNWithQJM |
|   | hadoop.fs.viewfs.TestViewFsWithAcls |
|   | hadoop.fs.TestResolveHdfsSymlink |
|   | hadoop.hdfs.TestFileConcurrentReader |
|   | hadoop.fs.viewfs.TestViewFsDefaultValue |
|   | hadoop.hdfs.qjournal.server.TestJournalNode |
|   | hadoop.hdfs.qjournal.client.TestIPCLoggerChannel |
|   | hadoop.fs.contract.hdfs.TestHDFSContractGetFileStatus |
|   | hadoop.fs.viewfs.TestViewFileSystemHdfs |
|   | hadoop.hdfs.TestParallelUnixDomainRead |
|   | hadoop.hdfs.qjournal.client.TestQJMWithFaults |
|   | hadoop.hdfs.TestDFSRemove |
|   | hadoop.fs.viewfs.TestViewFsAtHdfsRoot |
|   | hadoop.hdfs.qjournal.TestNNWithQJM |
|   | hadoop.hdfs.TestFileCreationClient |
|   | hadoop.fs.contract.hdfs.TestHDFSContractCreate |
|   | hadoop.fs.permission.TestStickyBit |
|   | hadoop.hdfs.TestEncryptionZonesWithKMS |
|   | hadoop.fs.TestSymlinkHdfsDisable |
|   | hadoop.hdfs.TestDFSUtil |
|   | hadoop.hdfs.TestLease |
|   | hadoop.fs.TestGlobPaths |
|   | hadoop.hdfs.TestWriteStripedFileWithFailure |
|   | hadoop.fs.contract.hdfs.TestHDFSContractSeek |
|   | hadoop.fs.shell.TestHdfsTextCommand |
\\
\\
|| Subsystem || Report/Notes ||
| Patch URL | http://issues.apache.org/jira/secure/attachment/12768203/HDFS-9241.005.patch |
| Optional Tests | javadoc javac unit findbugs checkstyle |
| git revision | trunk / 124a412 |
| Pre-patch Findbugs warnings | https://builds.apache.org/job/PreCommit-HDFS-Build/13145/artifact/patchprocess/trunkFindbugsWarningshadoop-hdfs.html |
| checkstyle |  https://builds.apache.org/job/PreCommit-HDFS-Build/13145/artifact/patchprocess/diffcheckstylehadoop-hdfs-client.txt |
| hadoop-hdfs test log | https://builds.apache.org/job/PreCommit-HDFS-Build/13145/artifact/patchprocess/testrun_hadoop-hdfs.txt |
| hadoop-hdfs-client test log | https://builds.apache.org/job/PreCommit-HDFS-Build/13145/artifact/patchprocess/testrun_hadoop-hdfs-client.txt |
| Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/13145/testReport/ |
| Java | 1.7.0_55 |
| uname | Linux asf909.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/13145/console |


This message was automatically generated., Moving the bug to HADOOP trigger the Yetus variant of Jenkins., | (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 0m 9s {color} | {color:blue} docker + precommit patch detected. {color} |
| {color:green}+1{color} | {color:green} @author {color} | {color:green} 0m 0s {color} | {color:green} The patch does not contain any @author tags. {color} |
| {color:red}-1{color} | {color:red} test4tests {color} | {color:red} 0m 0s {color} | {color:red} The patch doesn't appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 4m 17s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 1m 1s {color} | {color:green} trunk passed with JDK v1.8.0_60 {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 53s {color} | {color:green} trunk passed with JDK v1.7.0_79 {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 0m 22s {color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 26s {color} | {color:green} trunk passed {color} |
| {color:red}-1{color} | {color:red} findbugs {color} | {color:red} 1m 59s {color} | {color:red} hadoop-hdfs-project/hadoop-hdfs in trunk cannot run convertXmlToText from findbugs {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 1m 25s {color} | {color:green} trunk passed with JDK v1.8.0_60 {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 2m 7s {color} | {color:green} trunk passed with JDK v1.7.0_79 {color} |
| {color:red}-1{color} | {color:red} mvninstall {color} | {color:red} 0m 21s {color} | {color:red} hadoop-hdfs in the patch failed. {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 57s {color} | {color:green} the patch passed with JDK v1.8.0_60 {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 57s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 0m 55s {color} | {color:green} the patch passed with JDK v1.7.0_79 {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green} 0m 55s {color} | {color:green} the patch passed {color} |
| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red} 0m 19s {color} | {color:red} Patch generated 9 new checkstyle issues in hadoop-hdfs-project (total was 590, now 489). {color} |
| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 27s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} whitespace {color} | {color:green} 0m 0s {color} | {color:green} Patch has no whitespace issues. {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 4m 4s {color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 1m 28s {color} | {color:green} the patch passed with JDK v1.8.0_60 {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 2m 10s {color} | {color:green} the patch passed with JDK v1.7.0_79 {color} |
| {color:red}-1{color} | {color:red} unit {color} | {color:red} 66m 37s {color} | {color:red} hadoop-hdfs in the patch failed with JDK v1.8.0_60. {color} |
| {color:green}+1{color} | {color:green} unit {color} | {color:green} 0m 31s {color} | {color:green} hadoop-hdfs-client in the patch passed with JDK v1.8.0_60. {color} |
| {color:red}-1{color} | {color:red} unit {color} | {color:red} 72m 48s {color} | {color:red} hadoop-hdfs in the patch failed with JDK v1.7.0_79. {color} |
| {color:green}+1{color} | {color:green} unit {color} | {color:green} 0m 33s {color} | {color:green} hadoop-hdfs-client in the patch passed with JDK v1.7.0_79. {color} |
| {color:red}-1{color} | {color:red} asflicense {color} | {color:red} 0m 26s {color} | {color:red} Patch generated 58 ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 169m 23s {color} | {color:black} {color} |
\\
\\
|| Reason || Tests ||
| JDK v1.7.0_79 Failed junit tests | hadoop.hdfs.server.namenode.ha.TestHAAppend |
|   | hadoop.hdfs.TestReplaceDatanodeOnFailure |
|   | hadoop.hdfs.TestRollingUpgrade |
|   | hadoop.hdfs.server.namenode.ha.TestSeveralNameNodes |
|   | hadoop.hdfs.server.namenode.ha.TestFailureToReadEdits |
|   | hadoop.hdfs.server.datanode.TestNNHandlesBlockReportPerStorage |
\\
\\
|| Subsystem || Report/Notes ||
| Docker | Client=1.7.1 Server=1.7.1 Image:test-patch-base-hadoop-date2015-10-23 |
| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12768203/HDFS-9241.005.patch |
| JIRA Issue | HADOOP-12506 |
| Optional Tests |  asflicense  javac  javadoc  mvninstall  unit  findbugs  checkstyle  compile  |
| uname | Linux 448a92c99853 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /home/jenkins/jenkins-slave/workspace/PreCommit-HADOOP-Build/patchprocess/apache-yetus-28a3a3d/dev-support/personality/hadoop.sh |
| git revision | trunk / eb6379c |
| Default Java | 1.7.0_79 |
| Multi-JDK versions |  /usr/lib/jvm/java-8-oracle:1.8.0_60 /usr/lib/jvm/java-7-openjdk-amd64:1.7.0_79 |
| findbugs | v3.0.0 |
| findbugs | https://builds.apache.org/job/PreCommit-HADOOP-Build/7919/artifact/patchprocess/branch-findbugs-hadoop-hdfs-project_hadoop-hdfs.html |
| mvninstall | https://builds.apache.org/job/PreCommit-HADOOP-Build/7919/artifact/patchprocess/patch-mvninstall-hadoop-hdfs-project_hadoop-hdfs.txt |
| checkstyle | https://builds.apache.org/job/PreCommit-HADOOP-Build/7919/artifact/patchprocess/diff-checkstyle-hadoop-hdfs-project.txt |
| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/7919/artifact/patchprocess/patch-unit-hadoop-hdfs-project_hadoop-hdfs-jdk1.8.0_60.txt |
| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/7919/artifact/patchprocess/patch-unit-hadoop-hdfs-project_hadoop-hdfs-jdk1.7.0_79.txt |
| unit test logs |  https://builds.apache.org/job/PreCommit-HADOOP-Build/7919/artifact/patchprocess/patch-unit-hadoop-hdfs-project_hadoop-hdfs-jdk1.8.0_60.txt https://builds.apache.org/job/PreCommit-HADOOP-Build/7919/artifact/patchprocess/patch-unit-hadoop-hdfs-project_hadoop-hdfs-jdk1.7.0_79.txt |
| JDK v1.7.0_79  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/7919/testReport/ |
| asflicense | https://builds.apache.org/job/PreCommit-HADOOP-Build/7919/artifact/patchprocess/patch-asflicense-problems.txt |
| Max memory used | 229MB |
| Powered by | Apache Yetus   http://yetus.apache.org |
| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/7919/console |


This message was automatically generated.

, +1. Ran the test locally and all passed. I'll commit it shortly., I've committed the patch to trunk and branch-2. Thanks [~liuml07] for the contribution and Steve for the reviews., FAILURE: Integrated in Hadoop-trunk-Commit #8698 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/8698/])
HDFS-9301. HDFS clients can't construct HdfsConfiguration instances. (wheat9: rev 15eb84b37e6c0195d59d3a29fbc5b7417bf022ff)
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSClient.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/client/HdfsClientConfigKeys.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DistributedFileSystem.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/HdfsConfigurationLoader.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/HdfsConfiguration.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/HdfsConfiguration.java
, FAILURE: Integrated in Hadoop-Yarn-trunk #1312 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/1312/])
HDFS-9301. HDFS clients can't construct HdfsConfiguration instances. (wheat9: rev 15eb84b37e6c0195d59d3a29fbc5b7417bf022ff)
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/HdfsConfigurationLoader.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DistributedFileSystem.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/HdfsConfiguration.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSClient.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/HdfsConfiguration.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/client/HdfsClientConfigKeys.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java
, FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #577 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/577/])
HDFS-9301. HDFS clients can't construct HdfsConfiguration instances. (wheat9: rev 15eb84b37e6c0195d59d3a29fbc5b7417bf022ff)
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DistributedFileSystem.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/client/HdfsClientConfigKeys.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/HdfsConfiguration.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSClient.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/HdfsConfigurationLoader.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/HdfsConfiguration.java
, FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #590 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/590/])
HDFS-9301. HDFS clients can't construct HdfsConfiguration instances. (wheat9: rev 15eb84b37e6c0195d59d3a29fbc5b7417bf022ff)
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSClient.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/HdfsConfiguration.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/HdfsConfigurationLoader.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DistributedFileSystem.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/client/HdfsClientConfigKeys.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/HdfsConfiguration.java
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #2522 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2522/])
HDFS-9301. HDFS clients can't construct HdfsConfiguration instances. (wheat9: rev 15eb84b37e6c0195d59d3a29fbc5b7417bf022ff)
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/HdfsConfiguration.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DistributedFileSystem.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/HdfsConfiguration.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSClient.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/client/HdfsClientConfigKeys.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/HdfsConfigurationLoader.java
, FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #532 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/532/])
HDFS-9301. HDFS clients can't construct HdfsConfiguration instances. (wheat9: rev 15eb84b37e6c0195d59d3a29fbc5b7417bf022ff)
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/client/HdfsClientConfigKeys.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSClient.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DistributedFileSystem.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/HdfsConfiguration.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/HdfsConfiguration.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/HdfsConfigurationLoader.java
, FAILURE: Integrated in Hadoop-Hdfs-trunk #2468 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2468/])
HDFS-9301. HDFS clients can't construct HdfsConfiguration instances. (wheat9: rev 15eb84b37e6c0195d59d3a29fbc5b7417bf022ff)
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/client/HdfsClientConfigKeys.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/HdfsConfiguration.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/HdfsConfigurationLoader.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSClient.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/HdfsConfiguration.java
* hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DistributedFileSystem.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java
, OK, I can verify that with this patch, my code compiles again.

However, I still think we ought to consider keeping hadoop-client pom depend on hadoop-hdfs, just as it pulls in other stuff (jets3t) that we don't really like. Then the hadoop-lean client can stay lean, and we could even have a policy for this "we can remove dependency JARs if we feel like it"]