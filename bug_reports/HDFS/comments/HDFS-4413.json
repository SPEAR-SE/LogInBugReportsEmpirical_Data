[Looking at the code this should only affect branch-1, since in trunk we secondary namenode calls NameNode.initializeGenericKeys(), which overwrites fs.default.name so it would work. I'll upload a patch for branch-1., Patch for this in branch-1., +1 for the patch.  Could a committer please commit this to both branch-1 and branch-1-win?  I applied the patch locally on both branches and ran {{TestCheckpoint}} for a quick regression test., Also, thank you Mostafa!, +1 for the patch., I have committed this patch to branch-1, 1.2 and 1-win. Thank you Mostafa.

Thank you Chris for reviewing the patch., Closed upon release of Hadoop 1.2.0., Changed the TargetVersion from 1.2.1 to 1.2.0, recognizing that it did in fact go out in 1.2.0, so should be consistent with FixVersion.]