[Also in "dfsadmin -help" there are only a couple of commands' help information mention that it "requires superuser permissions". Maybe we can move this phrase into the help summary., Attach a patch that fixed the issue with a commonUsageSummary string for both commands and misc minor fixes.
* add the missing "-metasave filename"
* add the "Note: Administrative commands can only be run with superuser permission.\n" to summary of PrintHelp() as Jing suggested.
* change "java DfsAdmin" to "hdfs DfsAdmin" in PrintUsage()

Not sure why quota and rolling upgrade commands have different for display format with two "+" instead of  "-" and extra spaces. I just keep it as is and guess maybe it is to differentiate as new features. 

"\t[" + SetQuotaCommand.USAGE + "]\n" +, Thanks [~xiaoyuyao] for the patch!
Would you change "hdfs DFSAdmin" to "hdfs dfsadmin"?, Update "hdfs DFSAdmin" to "hdfs dfsadmin" , +1 pending Jenkins., One more comment:
{code}
      "The full syntax is: \n\n" +
      "hadoop dfsadmin\n" +
      commonUsageSummary;
{code}
Would you change "hadoop dfsadmin" to "hdfs dfsadmin"? I'm +1 (non-binding) if that is included.
{code}
    String summary = "hadoop dfsadmin performs DFS administrative commands.\n" +
{code}
I'm thinking the above can be changed to "hdfs dfsadmin" also. [~arpitagarwal] and [~xyao], what do you think?
, Good catch. [~xyao] can you please update the patch with Akira's suggestions?, Update patch based on [~ajisakaa] and [~arpitagarwal]' feedback., Thanks [~xyao] for updating the patch. Would you please remove grouping the imports from the patch?, Thanks! The IntelliJ Optimize import on the fly and does not give a switch to disable it. I will remove the changes around imports from  HDFS-6831.2.patch., Figure out how to disable the import optimize on the fly option from IntelliJ and regenerate the patch. , +1 pending Jenkins. Not sure why the earlier builds didn't show results. This one is running at https://builds.apache.org/job/PreCommit-HDFS-Build/7911/, {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12666650/HDFS-6831.2.patch
  against trunk revision 6104520.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:

                  org.apache.hadoop.hdfs.server.namenode.TestBackupNode
                  org.apache.hadoop.hdfs.server.datanode.TestDeleteBlockPool
                  org.apache.hadoop.hdfs.web.TestWebHdfsFileSystemContract
                  org.apache.hadoop.hdfs.server.datanode.TestBPOfferService
                  org.apache.hadoop.hdfs.server.namenode.ha.TestPipelinesFailover

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/7906//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/7906//console

This message is automatically generated., +1 (non-binding), pending Jenkins to run tests with the v3 patch., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12666668/HDFS-6831.3.patch
  against trunk revision 772d1fb.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:

                  org.apache.hadoop.tools.TestTools
                  org.apache.hadoop.hdfs.server.namenode.ha.TestPipelinesFailover
                  org.apache.hadoop.hdfs.server.balancer.TestBalancer

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/7911//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/7911//console

This message is automatically generated., TestTools fails with v3 patch. Would you fix the test?
{code}
    String pattern = "Usage: java DFSAdmin";
    checkOutput(new String[] { "-cancel", "-renew" }, pattern, System.err,
        DFSAdmin.class);
{code}, Thanks [~ajisakaa], patch updated., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12666801/HDFS-6831.4.patch
  against trunk revision 45efc96.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:

                  org.apache.hadoop.hdfs.server.namenode.ha.TestPipelinesFailover

                                      The following test timeouts occurred in hadoop-hdfs-project/hadoop-hdfs:

org.apache.hadoop.hdfs.TestDFSInotifyEventInputStream

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/7914//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/7914//console

This message is automatically generated., I tired both tests on my machine twice and passed. 
org.apache.hadoop.hdfs.server.namenode.ha.TestPipelinesFailover
org.apache.hadoop.hdfs.TestDFSInotifyEventInputStream

, +1 I committed this to trunk and branch-2.

Thanks for the contribution [~xyao] and thanks [~ajisakaa] for reviewing., SUCCESS: Integrated in Hadoop-Yarn-trunk #672 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/672/])
HDFS-6831. Inconsistency between 'hdfs dfsadmin' and 'hdfs dfsadmin -help'. (Contributed by Xiaoyu Yao) (arp: rev 9e941d9f99168cae01f8d50622a616fc26c196d9)
* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/tools/TestTools.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/DFSAdmin.java
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #1888 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1888/])
HDFS-6831. Inconsistency between 'hdfs dfsadmin' and 'hdfs dfsadmin -help'. (Contributed by Xiaoyu Yao) (arp: rev 9e941d9f99168cae01f8d50622a616fc26c196d9)
* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/tools/TestTools.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/DFSAdmin.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
, SUCCESS: Integrated in Hadoop-Hdfs-trunk #1863 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1863/])
HDFS-6831. Inconsistency between 'hdfs dfsadmin' and 'hdfs dfsadmin -help'. (Contributed by Xiaoyu Yao) (arp: rev 9e941d9f99168cae01f8d50622a616fc26c196d9)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/DFSAdmin.java
* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/tools/TestTools.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
]