[Test with " -Dtest=TestXAttrCLI,TestXAttrWithSnapshot,TestNameNodeXAttr,TestFileContextXAttr,FSXAttrBaseTest,TestFSImageWithXAttr,TestXAttrConfigFlag,TestXAttrsWithHA,TestWebHDFSXAttr,TestXAttr,TestViewFileSystemWithXAttrs,TestViewFsWithXAttrs ", {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12707713/HDFS-7997-001.patch
  against trunk revision af618f2.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:

                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestOpenFilesWithSnapshot

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/10085//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/10085//console

This message is automatically generated., The failed test case is not related to the change.  I just verified that it cannot pass without the xattr changes., [~sinago], the example you gave is not correct, the xattr should be prefixed with user/trusted/security/system/raw. But the patch looks good., Thank you for pointing it out.  Actually we are using the name of "user.xxx", the pseudo code snippet here is just used to explain the issue., Committed to trunk and branch-2, FAILURE: Integrated in Hadoop-trunk-Commit #7475 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/7475/])
HDFS-7997. The first non-existing xattr should also throw IOException. (zhouyingchao via yliu) (yliu: rev 3df61f303a8c0f5105661dc86fc3a34a60c49066)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirXAttrOp.java
* hadoop-hdfs-project/hadoop-hdfs/src/test/resources/testXAttrConf.xml
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
, FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #150 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/150/])
HDFS-7997. The first non-existing xattr should also throw IOException. (zhouyingchao via yliu) (yliu: rev 3df61f303a8c0f5105661dc86fc3a34a60c49066)
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-hdfs-project/hadoop-hdfs/src/test/resources/testXAttrConf.xml
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirXAttrOp.java
, FAILURE: Integrated in Hadoop-Yarn-trunk #884 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/884/])
HDFS-7997. The first non-existing xattr should also throw IOException. (zhouyingchao via yliu) (yliu: rev 3df61f303a8c0f5105661dc86fc3a34a60c49066)
* hadoop-hdfs-project/hadoop-hdfs/src/test/resources/testXAttrConf.xml
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirXAttrOp.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
, FAILURE: Integrated in Hadoop-Hdfs-trunk #2082 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2082/])
HDFS-7997. The first non-existing xattr should also throw IOException. (zhouyingchao via yliu) (yliu: rev 3df61f303a8c0f5105661dc86fc3a34a60c49066)
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-hdfs-project/hadoop-hdfs/src/test/resources/testXAttrConf.xml
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirXAttrOp.java
, FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #150 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/150/])
HDFS-7997. The first non-existing xattr should also throw IOException. (zhouyingchao via yliu) (yliu: rev 3df61f303a8c0f5105661dc86fc3a34a60c49066)
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-hdfs-project/hadoop-hdfs/src/test/resources/testXAttrConf.xml
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirXAttrOp.java
, FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #141 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/141/])
HDFS-7997. The first non-existing xattr should also throw IOException. (zhouyingchao via yliu) (yliu: rev 3df61f303a8c0f5105661dc86fc3a34a60c49066)
* hadoop-hdfs-project/hadoop-hdfs/src/test/resources/testXAttrConf.xml
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirXAttrOp.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #2100 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2100/])
HDFS-7997. The first non-existing xattr should also throw IOException. (zhouyingchao via yliu) (yliu: rev 3df61f303a8c0f5105661dc86fc3a34a60c49066)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirXAttrOp.java
* hadoop-hdfs-project/hadoop-hdfs/src/test/resources/testXAttrConf.xml
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
]