[The exception:

{code}
2013-11-11 18:44:21,841 INFO org.apache.hadoop.security.authentication.server.KerberosAuthenticationHandler: Login using keytab /etc/security/keytabs/spnego.service.keytab, for principal HTTP/_HOST@EXAMPLE.COM
2013-11-11 18:44:21,845 WARN org.mortbay.log: failed authentication: javax.servlet.ServletException: javax.security.auth.login.LoginException: Unable to obtain password from user

2013-11-11 18:44:21,846 WARN org.mortbay.log: Failed startup of context org.mortbay.jetty.webapp.WebAppContext@1c33c658{/,file:/usr/lib/hadoop/webapps/hdfs}
javax.servlet.ServletException: javax.security.auth.login.LoginException: Unable to obtain password from user
        at org.apache.hadoop.security.authentication.server.KerberosAuthenticationHandler.init(KerberosAuthenticationHandler.java:178)
        at org.apache.hadoop.security.authentication.server.AuthenticationFilter.init(AuthenticationFilter.java:146)
        at org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:97)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:713)
        at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
        at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1282)
        at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:518)
        at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:499)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)
        at org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:156)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
        at org.mortbay.jetty.Server.doStart(Server.java:224)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.apache.hadoop.http.HttpServer.start(HttpServer.java:645)
        at org.apache.hadoop.hdfs.server.namenode.NameNode$1.run(NameNode.java:533)
        at org.apache.hadoop.hdfs.server.namenode.NameNode$1.run(NameNode.java:402)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1232)
        at org.apache.hadoop.hdfs.server.namenode.NameNode.startHttpServer(NameNode.java:402)
        at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:340)
        at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:585)
        at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1523)
        at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1532)
{code}, Initial patch. Just follow the trunk/branch-2 pattern, make sure {{SecurityUtil.getServerPrincipal}} is called in AuthenticationFilterInitializer., I tested the patch in a secured cluster and the patch can solve the issue., +1. The patch looks good to me. , Thanks for [~brandonli] for the review! I've committed this to branch-1.]