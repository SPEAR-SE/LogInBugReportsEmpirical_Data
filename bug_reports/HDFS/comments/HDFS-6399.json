[Hi, Charles.  Thanks for filing this.

The {{isPermissionEnabled}} checks were left out on purpose for consistency with the existing behavior of setting {{dfs.permissions.enabled}} to {{false}} as documented in the HDFS Permissions Guide.

http://hadoop.apache.org/docs/r2.4.0/hadoop-project-dist/hadoop-hdfs/HdfsPermissionsGuide.html

Quoting from near the bottom of that page:

{quote}
Regardless of whether permissions are on or off, chmod, chgrp and chown always check permissions. These functions are only useful in the permissions context, and so there is no backwards compatibility issue. Furthermore, this allows administrators to reliably set owners and permissions in advance of turning on regular permissions checking.
{quote}

In the implementation, this means that {{FSNamesystem#setPermissionInt}} skips the check for {{isPermissionEnabled}}.  The ACL modification operations are somewhat analogous to a chmod, so we followed the same pattern.

However, this may not have been clear enough, so I think it would be worthwhile to update that text in the HDFS Permissions Guide to mention that the same thing applies to setfacl., Here is a small patch that updates the documentation to mention setfacl., {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12648711/HDFS-6399.2.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation patch that doesn't require tests.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-hdfs-project/hadoop-hdfs.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/7051//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/7051//console

This message is automatically generated., +1 thanks chris, will commit shortly., Committed to trunk and branch-2, thanks Chris, Andrew, thank you for reviewing and committing., SUCCESS: Integrated in Hadoop-trunk-Commit #5669 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/5669/])
HDFS-6399. Add note about setfacl in HDFS permissions guide. Contributed by Chris Nauroth. (wang: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1601476)
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/site/apt/HdfsPermissionsGuide.apt.vm
, FAILURE: Integrated in Hadoop-Yarn-trunk #579 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/579/])
HDFS-6399. Add note about setfacl in HDFS permissions guide. Contributed by Chris Nauroth. (wang: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1601476)
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/site/apt/HdfsPermissionsGuide.apt.vm
, FAILURE: Integrated in Hadoop-Hdfs-trunk #1770 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1770/])
HDFS-6399. Add note about setfacl in HDFS permissions guide. Contributed by Chris Nauroth. (wang: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1601476)
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/site/apt/HdfsPermissionsGuide.apt.vm
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #1797 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1797/])
HDFS-6399. Add note about setfacl in HDFS permissions guide. Contributed by Chris Nauroth. (wang: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1601476)
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/site/apt/HdfsPermissionsGuide.apt.vm
]