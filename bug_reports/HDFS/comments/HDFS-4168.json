[The NPE is because the pendingReplications has not been created before the loadFSImage call. We thus can check if pendingReplications is null before calling its remove method. Will run test first to verify., All the following tests fail with the same NPE.
{noformat}
    [junit] Running org.apache.hadoop.hdfs.TestDFSUpgradeFromImage
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 3.459 sec
--
    [junit] Running org.apache.hadoop.hdfs.TestRestartDFS
    [junit] Tests run: 2, Failures: 0, Errors: 2, Time elapsed: 13.939 sec
--
    [junit] Running org.apache.hadoop.hdfs.TestSafeMode
    [junit] Tests run: 3, Failures: 0, Errors: 2, Time elapsed: 9.124 sec
--
    [junit] Running org.apache.hadoop.hdfs.server.namenode.TestCheckpoint
    [junit] Tests run: 3, Failures: 0, Errors: 3, Time elapsed: 6.36 sec
--
    [junit] Running org.apache.hadoop.hdfs.server.namenode.TestStartup
    [junit] Tests run: 3, Failures: 2, Errors: 0, Time elapsed: 7.259 sec
{noformat}, Patch uploaded. Have passed all the local unit tests., +1 patch looks good.  Thanks for fixing the bug promptly., I have committed this.  Thanks, Jing!, Closed upon release of Hadoop 1.2.0.]