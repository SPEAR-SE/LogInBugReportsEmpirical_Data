[Because of the way we launch with jsvc, I suspect the only way to fix this is to write the pid file when we launch the appropriate daemon. (Which, BTW, would also simplify the shell code if we can do this generically!) 

Based upon a quick search, there doesn't appear to be a particularly easy, cross-platform way to determine the process id from within Java.  Hopefully someone has an easily implementable solution for this issue., I've provided a workaround in HADOOP-9902.]