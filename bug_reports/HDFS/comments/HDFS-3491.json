[The permission param type in httpfs should be changed from a string with a regex to short., changed PermissionParam to be a subclass of ShortParam. ShortParam now supports radix (which PermissionParam sets to 8)., Change looks good, needs a test., updated patch adds testcase for octal shorts., The TestParam addition is good but what test covers that the values passed to the "permission" parameter get reflected when accessing the same file via FileSystem?, The bug was not exposed when using a client FileSystem implementation but when using the REST API directly. The client FileSystem did not see the issue as the string conversion of 1777 is not adding the '0' in front of it., So there's no test that covers that the REST API actually does the intended operation? Thought there was a test for that., The HTTP REST API is fully tested using webhdfs filesystem  client implementations. You don't see this issue there. This particular bug is exposed by using directly the HTTP REST API with curl. The type of the permission parameter was string with a regex mask that was not accounting for a leading zero for the '01777' mask. This patch changes the permission parameter to be a short radix 8 and the testcase verifies the parameter parsing handles the mask of the bug.
, Ah, that makes sense. +1 pending jenkins, reuploading same patch for our friend jenkins to take notice., +1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12533916/HDFS-3491.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 1 new or modified test files.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    +1 core tests.  The patch passed unit tests in hadoop-hdfs-project/hadoop-hdfs-httpfs.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/2721//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/2721//console

This message is automatically generated., committed to trunk and branch-2, This is still broken. Octal is correctly accepted but not applied when during a MKDIR:

romain@runreal:~/projects/hue$ curl -X PUT "http://localhost:14000/webhdfs/v1/tmp/test-perm-httpfs?permission=01777&op=MKDIRS&user.name=hue&doas=hue"
{"boolean":true}
romain@runreal:~/projects/hue$ curl "http://localhost:14000/webhdfs/v1/tmp/test-perm-httpfs?op=GETFILESTATUS&user.name=hue&doas=hue"
{"FileStatus":{"pathSuffix":"","type":"DIRECTORY","length":0,"owner":"hue","group":"supergroup","permission":"755","accessTime":0,"modificationTime":1345658456869,"blockSize":0,"replication":0}}
]