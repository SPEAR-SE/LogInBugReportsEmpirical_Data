[{quote}
since block is on pendingReplications, NN does not schedule another replication.
{quote}
After pending replication timed out , NN not scheduling for replication again? 
NN will add the blocks from pendingReplications to neededReplications if they timedout. On successful replication pendingReplications anyway will be removed.

Currently if replication and cluster size is same, then It won't replicate it as there is no new node to copy block as existing nodes already has blocks(corrupt or good). Until there are enough number of good replicas, it won't invalidate any block. See some details in HDFS-3586. I am not sure this issue is same or similar to it, please take a look once and confirm please., In step #4, why doesn't the DN receiving the corrupt replica simply receive it and flag it as corrupt?  Then the block will no longer be on pendingReplications, until the NN notices that the block needs to be re-replicated because 2 of its 3 replicas are corrupt.  No need for any special flags or fields?

If it takes us a long time to re-replicate blocks that have only 1 non-corrupt replica, that seems like a separate problem that we should fix, not hack around?  Unless I'm missing something here.]