[I'm sorry this is the first time I use this issue tracking system so the source code in my description was corrupted.  The numbers are originally the sharp sign for commenting shell scripts., Sounds like we should only export HADOOP_SLAVES if it's not set:
 
{noformat}
diff --git a/conf/hadoop-env.sh.template b/conf/hadoop-env.sh.template
index ce7ccc8..2eab90b 100644
--- a/conf/hadoop-env.sh.template
+++ b/conf/hadoop-env.sh.template
@@ -34,7 +34,7 @@ export HADOOP_JOBTRACKER_OPTS="-Dcom.sun.management.jmxremote 
 # export HADOOP_LOG_DIR=${HADOOP_HOME}/logs
 
 # File naming remote slave hosts.  $HADOOP_HOME/conf/slaves by default.
-# export HADOOP_SLAVES=${HADOOP_HOME}/conf/slaves
+# if [ "$HADOOP_SLAVES" == "" ]; then export HADOOP_SLAVES=${HADOOP_HOME}/conf/
 
 # host:path where hadoop code should be rsync'd from.  Unset by default.
 # export HADOOP_MASTER=master:/home/$USER/src/hadoop
{noformat}
]