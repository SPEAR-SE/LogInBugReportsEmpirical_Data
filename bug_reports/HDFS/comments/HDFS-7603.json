[{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12691738/HDFS-7603.patch
  against trunk revision b78b4a1.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:red}-1 core tests{color}.  The following test timeouts occurred in hadoop-hdfs-project/hadoop-hdfs:

org.apache.hadoop.hdfs.qjournal.client.TestQJMWithFaults

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/9188//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/9188//console

This message is automatically generated., The test failure is unrelated, but looks bad. Bus errors usually happen with a library mix-up. 

{noformat}
Results :
Tests run: 2428, Failures: 0, Errors: 0, Skipped: 13

...

Running org.apache.hadoop.hdfs.qjournal.client.TestQJMWithFaults
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGBUS (0x7) at pc=0x00007f8447de9982, pid=3045, tid=140206235416320
#
# JRE version: Java(TM) SE Runtime Environment (7.0_55-b13) (build 1.7.0_55-b13)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (24.55-b03 mixed mode linux-amd64 compressed oops)
# Problematic frame:
# C  [libzip.so+0x4982]  newEntry+0x62
#
# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try "ulimit -c unlimited" before starting Java again
#
# An error report file with more information is saved as:
# /home/jenkins/jenkins-slave/workspace/PreCommit-HDFS-Build@2/hadoop-hdfs-project/hadoop-hdfs/hs_err_pid3045.log
Compiled method (nm)  119738   46     n       java.util.zip.ZipFile::getEntry (native)
 total in heap  [0x00007f8444e5b450,0x00007f8444e5b7e8] = 920
 relocation     [0x00007f8444e5b570,0x00007f8444e5b5d0] = 96
 main code      [0x00007f8444e5b5e0,0x00007f8444e5b7e8] = 520
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#
Aborted
{noformat}
, Should we cap the sleep time to a maximum?  And bump 0 to 1?

Math.max(1,Math.min(numBlocksPerIteration/1000,10000)), {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12692626/HDFS-7603.patch
  against trunk revision 780a6bf.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:

                  org.apache.hadoop.hdfs.server.namenode.TestFileTruncate

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/9231//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/9231//console

This message is automatically generated., +1 Looks good, understood too hard to write a test to prove/disprove unfair lock starvation under large namespaces.  Tested internally., I've committed this to trunk and branch-2., FAILURE: Integrated in Hadoop-trunk-Commit #6962 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/6962/])
HDFS-7603. The background replication queue initialization may not let others run. Contributed by Kihwal Lee. (kihwal: rev 89b07490f8354bb83a67b7ffc917bfe99708e615)
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.java
, FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #89 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/89/])
HDFS-7603. The background replication queue initialization may not let others run. Contributed by Kihwal Lee. (kihwal: rev 89b07490f8354bb83a67b7ffc917bfe99708e615)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
, FAILURE: Integrated in Hadoop-Yarn-trunk #823 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/823/])
HDFS-7603. The background replication queue initialization may not let others run. Contributed by Kihwal Lee. (kihwal: rev 89b07490f8354bb83a67b7ffc917bfe99708e615)
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.java
, FAILURE: Integrated in Hadoop-Hdfs-trunk #2021 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2021/])
HDFS-7603. The background replication queue initialization may not let others run. Contributed by Kihwal Lee. (kihwal: rev 89b07490f8354bb83a67b7ffc917bfe99708e615)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
, FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #86 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/86/])
HDFS-7603. The background replication queue initialization may not let others run. Contributed by Kihwal Lee. (kihwal: rev 89b07490f8354bb83a67b7ffc917bfe99708e615)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #90 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/90/])
HDFS-7603. The background replication queue initialization may not let others run. Contributed by Kihwal Lee. (kihwal: rev 89b07490f8354bb83a67b7ffc917bfe99708e615)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #2040 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2040/])
HDFS-7603. The background replication queue initialization may not let others run. Contributed by Kihwal Lee. (kihwal: rev 89b07490f8354bb83a67b7ffc917bfe99708e615)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
]