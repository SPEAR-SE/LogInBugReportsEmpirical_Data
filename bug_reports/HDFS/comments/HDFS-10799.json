[v01: a quick fix. Need tests, and probably need to wrap NameNodeRpcServer#getCurrentEditLogTxid as well., If the client is expired, we shouldn't be giving it answers at all., Correct me if I am wrong, but wouldn't ugi.doAs() in Server$Handler.run at NameNode throw an PriviledgedActionException if the client expires?, I got pinged about this patch recently a few times, so I gave it a deeper thought.

I am convinced now that it's not entirely NameNode's responsibility. Even after applying this patch, the iNotify client still needs to ensure its Kerberos ticket is valid, otherwise the next iNotify request will fail. One of our internal projects bumped into this issue, and after adding code to renew tickets periodically, this issue went away.

The only correct thing that NN should do, is to distinguish a inotify request v.s. a edit log flush request. For the former, it shouldn't print that scary message., Close this jira because the proposed solution does not seem appropriate. As I explained earlier, the correct fix for this problem should be at the client side, which is supposed to renew Kerberos credential before it expires.]