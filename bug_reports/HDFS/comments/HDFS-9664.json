[Perhaps there is a fundamental problem in the rolling upgrade. Otherwise,
* If we don't really need check exit exception when shutdowning the cluster, we may ignore this exception by building a cluster with {{checkExitOnShutdown(false)}} option.
* Meanwhile, restarting NN/DN is not keep the RPC port. If the port is different, the NN may never leave safe mode because not enough DN registers (see [HDFS-9689]). Will this break the test? 
, https://builds.apache.org/job/PreCommit-HDFS-Build/18334/artifact/patchprocess/patch-unit-hadoop-hdfs-project_hadoop-hdfs.txt]