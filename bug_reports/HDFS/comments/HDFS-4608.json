[if the NN not restarted in such a senario, the problem would not be happened also, because NN would find the DN to do the recovery and then know there is actually no block. Just like the following logs behave:

2013-03-18 15:43:57,524 DEBUG ipc.ProtobufRpcEngine (ProtobufRpcEngine.java:invoke(192)) - Call: getBlockLocations 9
2013-03-18 15:43:57,531 DEBUG hdfs.DFSClient (DFSInputStream.java:fetchLocatedBlocksAndGetLastBlockLength(154)) - newInfo = LocatedBlocks{
  fileLength=0
  underConstruction=false
  blocks=[]
  lastLocatedBlock=null
  isLastBlockComplete=false}, duplated to HDFS-4516, resolved as duplicate of HDFS-4516. Thanks for reporting it.
]