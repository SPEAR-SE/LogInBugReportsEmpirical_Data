[Discussed with Uma about xattr.names parameter format:

*xattr.names=name1,name2,name3...*
Each name<1-n> is an xattr name, we are intended to use comma as delimiter. 
Because xattr name can be any string prefixed with (user\\.|trusted\\.|system\\.|security\\.), it may contain comma, we need to do some form of encoding for each xattr name.
To be convenient for user input, we choose URL encoding. If user knows the xattr name only contains [A-Za-z0-9._-], then he doesn't need to do URL encoding, because encoding result is the same.
For example, if the xattrs are user.a1, user.a2, user.a3, the parameter is {{xattr.names=user.a1,user.a2,user.a3}}

We need to document this and give an example., The patch supports multiple xattr.name parameters for WebHDFS GETXATTRS instead of above approach of using xattr.names. It's more convenient for user input (Don't need to do separate and additional URL encoding).

Get a xattr:
{code}curl -i 'http://<HOST>:<PORT>/webhdfs/v1/<PATH>?op=GETXATTRS&xattr.name=<XATTRNAME>&encoding=<ENCODING>'{code}

Get multiple xattrs (XATTRNAME1, XATTRNAME2, XATTRNAME3):
{code}curl -i 'http://<HOST>:<PORT>/webhdfs/v1/<PATH>?op=GETXATTRS&xattr.name=<XATTRNAME1>&xattr.name=<XATTRNAME2>&xattr.name=<XATTRNAME3>&encoding=<ENCODING>'{code}

Get all xattrs:
{code}curl -i 'http://<HOST>:<PORT>/webhdfs/v1/<PATH>?op=GETXATTRS&encoding=<ENCODING>'{code}, Hi [~yi.a.liu]

Thanks for handling this. A few comments:

The change to XAttrHelper.java is just white space so you can leave it out.

In NameNodeWebHdfsMethods, when would xattrName.getXAttrName be null in:

          if (xattrName.getXAttrName() != null) {
            names.add(xattrName.getXAttrName());

, {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12647771/HDFS-6464.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:

                  org.apache.hadoop.hdfs.server.datanode.TestBPOfferService

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/7023//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/7023//console

This message is automatically generated., Thanks [~clamb] for your comments.  BTW, the 2 tests failure are not related to the patch.

{quote}
The change to XAttrHelper.java is just white space so you can leave it out.
{quote}
It's tabs, so I modify it.

{quote}
In NameNodeWebHdfsMethods, when would xattrName.getXAttrName be null in:
if (xattrName.getXAttrName() != null) {
names.add(xattrName.getXAttrName());
{quote}
It happens when there is no value for some xattr.name parameter in HTTP request. For example
{code}xattr.name=<XATTRNAME1>&xattr.name=&xattr.name=<XATTRNAME3>{code}, bq. It happens when there is no value for some xattr.name parameter in HTTP request. For example xattr.name=<XATTRNAME1>&xattr.name=&xattr.name=<XATTRNAME3>

Then wouldn't the value be null in that case, not the name? The check in the code is for the name being null, not the value.
, Hi Charles, it's *the value* of xattr.name *parameter*, so it's an xattr name, not the meaning of xattr value., Oh, of course. Thanks for the clarification.

+1 from me then.

, Tiny nit:

{code}
 Map<?, ?> json = (Map<?, ?>)JSON.parse(jsonString);
 {code}
 need format

Also I did not see the documentation for it. Separate JIRA for using xattrs via webhdfs?, Thanks Uma and Charles for the review.
I will update the format.

About the user doc for XAttrs via WebHDFS, let's track it in HDFS-6486., The new patch includes update for the comments., {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12648313/HDFS-6464.1.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-hdfs-project/hadoop-hdfs.

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/7036//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/7036//console

This message is automatically generated., +1 patch looks good to me. I will commit the patch shortly., Thanks a lot Yi for fixing this. I have just committed this to trunk!, SUCCESS: Integrated in Hadoop-trunk-Commit #5653 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/5653/])
HDFS-6464. Support multiple xattr.name parameters for WebHDFS getXAttrs. Contributed by Yi Liu. (umamahesh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1600810)
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/XAttrHelper.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/web/JsonUtil.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/web/WebHdfsFileSystem.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/web/resources/GetOpParam.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/web/TestJsonUtil.java
, FAILURE: Integrated in Hadoop-Yarn-trunk #575 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/575/])
HDFS-6464. Support multiple xattr.name parameters for WebHDFS getXAttrs. Contributed by Yi Liu. (umamahesh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1600810)
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/XAttrHelper.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/web/JsonUtil.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/web/WebHdfsFileSystem.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/web/resources/GetOpParam.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/web/TestJsonUtil.java
, FAILURE: Integrated in Hadoop-Hdfs-trunk #1766 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1766/])
HDFS-6464. Support multiple xattr.name parameters for WebHDFS getXAttrs. Contributed by Yi Liu. (umamahesh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1600810)
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/XAttrHelper.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/web/JsonUtil.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/web/WebHdfsFileSystem.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/web/resources/GetOpParam.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/web/TestJsonUtil.java
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #1793 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1793/])
HDFS-6464. Support multiple xattr.name parameters for WebHDFS getXAttrs. Contributed by Yi Liu. (umamahesh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1600810)
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/XAttrHelper.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/web/JsonUtil.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/web/WebHdfsFileSystem.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/web/resources/GetOpParam.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/web/TestJsonUtil.java
, I have merged from trunk to branch-2., FAILURE: Integrated in Hadoop-trunk-Commit #5707 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/5707/])
Moved CHANGES.txt entries of MAPREDUCE-5898, MAPREDUCE-5920, HDFS-6464, HDFS-6375 from trunk to 2.5 section on merging HDFS-2006 to branch-2 (umamahesh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1602699)
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
, SUCCESS: Integrated in Hadoop-Yarn-trunk #585 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/585/])
Moved CHANGES.txt entries of MAPREDUCE-5898, MAPREDUCE-5920, HDFS-6464, HDFS-6375 from trunk to 2.5 section on merging HDFS-2006 to branch-2 (umamahesh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1602699)
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
, SUCCESS: Integrated in Hadoop-Hdfs-trunk #1776 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1776/])
Moved CHANGES.txt entries of MAPREDUCE-5898, MAPREDUCE-5920, HDFS-6464, HDFS-6375 from trunk to 2.5 section on merging HDFS-2006 to branch-2 (umamahesh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1602699)
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #1803 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1803/])
Moved CHANGES.txt entries of MAPREDUCE-5898, MAPREDUCE-5920, HDFS-6464, HDFS-6375 from trunk to 2.5 section on merging HDFS-2006 to branch-2 (umamahesh: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1602699)
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-mapreduce-project/CHANGES.txt
]