[In the attached patch, the test is changed to use FsNamesystem#fsLock., Updated patch., +1, +1, testpatch output:
     [exec] +1 overall.  
     [exec] 
     [exec]     +1 @author.  The patch does not contain any @author tags.
     [exec] 
     [exec]     +1 tests included.  The patch appears to include 3 new or modified tests.
     [exec] 
     [exec]     +1 javadoc.  The javadoc tool did not generate any warning messages.
     [exec] 
     [exec]     +1 javac.  The applied patch does not increase the total number of javac compiler warnings.
     [exec] 
     [exec]     +1 findbugs.  The patch does not introduce any new Findbugs warnings.
     [exec] 
     [exec]     +1 release audit.  The applied patch does not increase the total number of release audit warnings.
     [exec] 
     [exec]     +1 system tests framework.  The patch passed system tests framework compile.

TestComputeInvalidateWork does not fail with this patch.
, I committed the patch to trunk., Integrated in Hadoop-Hdfs-trunk-Commit #406 (See [https://hudson.apache.org/hudson/job/Hadoop-Hdfs-trunk-Commit/406/])
    HDFS-1440. Fix TestComputeInvalidateWork failure. Contributed by Suresh Srinvias.
]