[Is this dup of HDFS-1560?, Yes, but it needs porting to branch-1., In branch 0.23 the datanode, at startup, overrides actual data dir permissions with expected permissions from the conf, in case they differ. In 1.0 the datanode checks for these values to be the same and refuses to start if they are different. A fix needs to be made for this behavior too.
This code path in 0.23 has been refactored and so the change may not be a simple backport. Perhaps we could change the code in 1.0 to also override actual permissions with those from the config., No patch submitted in time for 1.0.3.  Please consider continuing this contribution in 1.1.  Thanks., Changed Target Version to 1.3.0 upon release of 1.2.0. Please change to 1.2.1 if you intend to submit a fix for branch-1.2.]