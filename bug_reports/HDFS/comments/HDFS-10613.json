[Hi Xiaohe,

Some initial tests show that this is related to a couple factors. For example, if I have replication factor 3 and block size 64MB, then when writing a file of 10MB, the system will try to creates 3 blocks, with total size being 64 * 3 = 192 MB. So your quota is less then 192 MB, this exception will occur, despite my file is only 10 MB.

But this being said, 384 MB consumption for 14 MB file still seems weird. Could you please list you settings here? e.g. replication factor, block size, etc.

Also, I believe open question would be, since currently the numbers are confusing, would it be better to include more information in the exception messages., Hi Liang,

In my settings:
replication factor: 3
block size: 128

Is this where 384M comes from ? 128M * 3 = 384M.

Thanks,
Xiaohe, Hi Xiaohe,

Yes! That's exactly how you got 384M : 3 block replications, each of size 128 M, 3 * 128 = 384.
]