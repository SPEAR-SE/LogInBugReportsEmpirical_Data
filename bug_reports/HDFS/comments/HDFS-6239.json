[I cannot reproduce it.

Do you have softlink on your Hadoop install path? maybe your bash is incompatible.

so can you try: search '-P' in the $HADOOP_HOME/libexec/hadoop-config.sh, and remove "-P".

, I don't have a softlink on my path, and removing -P in both the directory you've pointed to, and bin/ does not solve the issue. I've posted my version of bash in the environment, and I'm wondering if you tried reproducing the issue with the path depth above. I'm not sure what causes the ; to get quoted. It is 100% reproducible for me, and I assume that the issue will surface with increasing path depth., I had tried to bypass the problem by playing around with different types of quoting in the following line:

exec "$bin/slaves.sh" --config $HADOOP_CONF_DIR cd "$HADOOP_HOME" \; "$bin/hadoop-daemon.sh" --config $HADOOP_CONF_DIR "$@"

For example, I tried something like:

exec "$bin/slaves.sh" "--config $HADOOP_CONF_DIR cd $HADOOP_HOME ; $bin/hadoop-daemon.sh --config $HADOOP_CONF_DIR $@"

This causes the semi-colon to not get quoted, but when it executes the word 'datanode' (the last argument in the bash -x output in the description) gets unquoted. I'm pretty sure that there is some issue around quoting and escaping characters in this one line, and you hit the issue in some special cases (probably like the long path in my filesystem), I found a simple repro for quoting behavior:

xx@xx:~$ cat x 
exec "./y" "/u/s" \; "ls /u/s"

xx@xx:~$ cat y 
echo "y" $@

xx@xx:~$ bash -x x
+ exec ./y /u/s ';' 'ls /u/s'
y /u/s ; ls /u/s

You can see the ; gets quoted. , Hadoop 1.x is dead and trunk/3.x has completely different code for this now. Closing as won't fix.]