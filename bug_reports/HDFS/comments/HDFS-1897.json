[Thanks Ari. Topology is covered in the HDFS and Common docs: http://hadoop.apache.org/hdfs/docs/current/hdfs_user_guide.html#Rack+Awareness
http://hadoop.apache.org/common/docs/current/cluster_setup.html#Hadoop+Rack+Awareness

Both of these use out-dated config names ({{dfs.network.script}} and {{topology.script.file.name}}). The should be updated to use {{net.topology.script.file.name}}.

, cluster_setup.xml looks correct. Attached is the hdfs_user_guide change., Committed to trunk and 0.22, thanks Andrew!, Integrated in Hadoop-Hdfs-trunk-Commit #658 (See [https://builds.apache.org/hudson/job/Hadoop-Hdfs-trunk-Commit/658/])
    , Integrated in Hadoop-Hdfs-22-branch #49 (See [https://builds.apache.org/hudson/job/Hadoop-Hdfs-22-branch/49/])
    , Integrated in Hadoop-Hdfs-trunk #673 (See [https://builds.apache.org/hudson/job/Hadoop-Hdfs-trunk/673/])
    ]