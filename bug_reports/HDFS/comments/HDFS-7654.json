[Full story goes like that.
At the time of creation this jira was a duplicate of HDFS-7611.
The investigation of HDFS-7611 determined  that TestFileTruncate was failing because of the snapshot bug described there.
Then Nicholas suggested to fix TestFileTruncate in a way that it avoids this bug, which was achieved by HDFS-7676.
So closing this as a duplicate of HDFS-7676.]