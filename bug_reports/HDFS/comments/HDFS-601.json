[The patch addresses the problem.
Also, some unused variables were removed and the imports' list has been fixed accordingly., The trivial patch has been provided so let's see what Hudson has to say about it :-), -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12418957/HDFS-601.patch
  against trunk revision 812656.

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 3 new or modified tests.

    -1 patch.  The patch command could not apply the patch.

Console output: http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/16/console

This message is automatically generated., Oops, my bad - the previous patch has been made against Append branch which is slightly behind of the trunk.
This is one is for trunk and should apply cleanly., Need to re-apply the patch
, The patch is already attached (for the trunk), -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12418967/HDFS-601.patch
  against trunk revision 813101.

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 3 new or modified tests.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/20/testReport/
Findbugs warnings: http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/20/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Checkstyle results: http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/20/artifact/trunk/build/test/checkstyle-errors.html
Console output: http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/20/console

This message is automatically generated., The test failure is unrelated to the patch, obviously. It is a timeout someplace else
{{TestDatanodeBlockScanner.testBlockCorruptionPolicy: Timeout occurred. Please note the time in the report does not reflect the time until the timeout.}}
The patch seems to be good to go, +1, I just committed this to trunk. It will get into Append branch while merging.
Thank you Konstantin., Integrated in Hadoop-Hdfs-trunk-Commit #30 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-Hdfs-trunk-Commit/30/])
    . TestBlockReport obtains data directories directly from MiniHDFSCluster. Contributed by Konstantin Boudnik.
, Integrated in Hadoop-Hdfs-trunk #82 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-Hdfs-trunk/82/])
    . TestBlockReport obtains data directories directly from MiniHDFSCluster. Contributed by Konstantin Boudnik.
, Integrated in Hdfs-Patch-h5.grid.sp2.yahoo.net #26 (See [http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/26/])
    , Integrated in Hdfs-Patch-h2.grid.sp2.yahoo.net #6 (See [http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/6/])
    . TestBlockReport obtains data directories directly from MiniHDFSCluster. Contributed by Konstantin Boudnik.
]