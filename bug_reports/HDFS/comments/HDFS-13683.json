[Seems like very much a duplicated issue of HDFS-12857.
[~xiaochen], what do you think?, But the fix is missing from [branch-3.0|https://github.com/apache/hadoop/blob/d1dcc39222b6d1d8ba10f38a3f2fb69e4d6548b3/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/StoragePolicyAdmin.java#L156] (which is ok, since there will be no new upstream release from the branch), Thanks Gabor for the investigation. Yes this looks to be a dup of HDFS-12857 :)

branch-3.0 is still active, which will release to branch-3.0.x (latest is 3.0.3). More details at:Â http://hadoop.apache.org/versioning.html, Than maybe it would be a good idea to backport this to branch-3.0, Yup, will be done via HDFS-12857]