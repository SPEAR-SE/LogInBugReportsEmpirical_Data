[I also just run last hadoop trunk code for some tests and find the same block issue. Thanks for Arpit reporting it.
As described in description. This issue is caused by the LOG class cast exception in {{NameNode#main}}

Currently we use both {{org.apache.commons.logging.Log}} and {{org.slf4j.Logger}} interfaces for logging, and by default we use log4j implementation. By using slf4j, we can get some benefits, such as postpone string construction and it's a bit more efficient. So it's good to use slf4j especially for heavy access logic.

The only troublesome thing is {{StringUtils#startupShutdownMessage}} and {{SignalLogger}} class are used by different Hadoop services, ideally we can change all our code to use slf4j, but it requires refactor for much code. One option is we define overload methods for them but will duplicate some code logic.
In the patch, I choose another approach to define a {{LogAdapter}}., Attach the patch. {{LogAdapter}} is used internally, so I only adapt the necessary methods used by {{StringUtils#startupShutdownMessage}} and SignalLogger class., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12696378/HDFS-7734.001.patch
  against trunk revision 26dee14.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 2 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:red}-1 core tests{color}.  The following test timeouts occurred in hadoop-hdfs-project/hadoop-hdfs:

org.apache.hadoop.hdfs.server.balancer.TestBalancerWithSaslTests
org.apache.hadoop.hdfs.TestEncryptedTransfer

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/9425//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/9425//console

This message is automatically generated., Update the patch to keep methods in SignalLogger., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12696437/HDFS-7734.002.patch
  against trunk revision 26dee14.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-common hadoop-hdfs-project/hadoop-hdfs.

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/9428//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/9428//console

This message is automatically generated., Since {{MiniDFSCluster}} directly calls {{createNamenode()}}, existing unit tests didn't caught this bug.  We can either add a new test case or add a smoke test that brings up a pseudo distributed file system and runs simple tests during precommit., {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12696452/HDFS-7734.002.patch
  against trunk revision 42548f4.

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-common-project/hadoop-common hadoop-hdfs-project/hadoop-hdfs:

                  org.apache.hadoop.ipc.TestCallQueueManager

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/9429//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/9429//console

This message is automatically generated., Yi's patch looks good to me, should we just commit this for now, and figure out additional testing later? We rely on miniclusters pretty heavily for testing, and I'm sort of okay with the little gap between {{main}} and {{createNameNode}}., bq. Yi's patch looks good to me, should we just commit this for now, and figure out additional testing later?
+1 on this approach., Committed to trunk and branch-2, thanks for the patch Yi, and Arpit/Kihwal too for discussion., FAILURE: Integrated in Hadoop-trunk-Commit #7004 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/7004/])
HDFS-7734. Class cast exception in NameNode#main. Contributed by Yi Liu. (wang: rev 9175105eeaecf0a1d60b57989b73ce45cee4689b)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNode.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/LogAdapter.java
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/SignalLogger.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.java
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/StringUtils.java
, Thank you for picking this up [~hitliuyi] and the prompt fix. It was a blocker for any new development against trunk. :-), Thanks for Andrew, Kihwal and Arpit 's reviews and comments., FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #95 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/95/])
HDFS-7734. Class cast exception in NameNode#main. Contributed by Yi Liu. (wang: rev 9175105eeaecf0a1d60b57989b73ce45cee4689b)
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/LogAdapter.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/SignalLogger.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNode.java
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/StringUtils.java
, FAILURE: Integrated in Hadoop-Yarn-trunk #829 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/829/])
HDFS-7734. Class cast exception in NameNode#main. Contributed by Yi Liu. (wang: rev 9175105eeaecf0a1d60b57989b73ce45cee4689b)
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/StringUtils.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/LogAdapter.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNode.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.java
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/SignalLogger.java
, SUCCESS: Integrated in Hadoop-Hdfs-trunk #2027 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2027/])
HDFS-7734. Class cast exception in NameNode#main. Contributed by Yi Liu. (wang: rev 9175105eeaecf0a1d60b57989b73ce45cee4689b)
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/SignalLogger.java
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/LogAdapter.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/StringUtils.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNode.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.java
, SUCCESS: Integrated in Hadoop-Hdfs-trunk-Java8 #92 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/92/])
HDFS-7734. Class cast exception in NameNode#main. Contributed by Yi Liu. (wang: rev 9175105eeaecf0a1d60b57989b73ce45cee4689b)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNode.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.java
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/StringUtils.java
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/SignalLogger.java
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/LogAdapter.java
, FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #96 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/96/])
HDFS-7734. Class cast exception in NameNode#main. Contributed by Yi Liu. (wang: rev 9175105eeaecf0a1d60b57989b73ce45cee4689b)
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.java
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/StringUtils.java
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/LogAdapter.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNode.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/SignalLogger.java
, FAILURE: Integrated in Hadoop-Mapreduce-trunk #2046 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2046/])
HDFS-7734. Class cast exception in NameNode#main. Contributed by Yi Liu. (wang: rev 9175105eeaecf0a1d60b57989b73ce45cee4689b)
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/SignalLogger.java
* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.java
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/StringUtils.java
* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/util/LogAdapter.java
* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNode.java
]