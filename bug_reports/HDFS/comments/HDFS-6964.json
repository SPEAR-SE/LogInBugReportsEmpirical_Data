[More details about the case:
Because of node outages, there were a large number of under-replicated blocks. At the same time, space was not well balanced, so many nodes were full and  replication was slow due to HDFS-6965.  Many pending replications were timing out and placed back to the under-replacated block queue. These blocks were quickly rescheduled for replication by the replication monitor.  The block that eventually ended up missing was not scheduled for replication at all during this time. The only remaining source node did not get any such replication command and PendingReplicationMonitor never saw replication of this block expiring.  The source node had been replicating other blocks without any problem until the node was rest hours later.

There are few possibilities.
- The removal of the two nodes (heartbeat expiration) did not cause the block to be added to the under-replicated queue.
- The block was added to the queue, but somehow removed without generating a replication work., Retargetting for 2.7.0 for now. If the issue is reproduced and found to be critical, we may pull the fix to 2.6.x., This hasn't been updated in a while. [~daryn] / [~kihwal], do you see a proposal/patch in time for 2.7.0? If not, I propose we move this JIRA to not have a target-version till we see one., Moving this out of 2.7 as I see no activity here. Please revert back if you disagree., any updates?, I think this is a dupe of HDFS-11960.]