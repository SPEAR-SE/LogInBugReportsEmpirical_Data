[Reverts the Balancer() constructor to do nothing. Similar to what 0.20 used. This way, when ToolRunner.run() is called, creating a new Balancer() does not cause the NPE. , A more logical description of the proposed patch (cannot edit previous comment):

The attached file contains a patch that changes the behavior of the Balancer() constructor (with no parameters) to basically do nothing (like the 0.20 version), and a test in the TestBalancer class. , -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12424526/0001-corrected-balancer-constructor.patch
  against trunk revision 834377.

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 4 new or modified tests.

    -1 patch.  The patch command could not apply the patch.

Console output: http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/69/console

This message is automatically generated., If this is a real problem with the Balancer, then can we get it into 0.21?, New version of the patch. Changes:
1. correct patch format - svn diff instead of git patch
2. removes contents of public void Balancer()
3. adds new test in TestBalancer.java that calls Balancer() to initialize the balancer; the other tests only call Balancer(conf), +1. Code looks good., -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12426144/HDFS-762.patch
  against trunk revision 893039.

    +1 @author.  The patch does not contain any @author tags.

    +1 tests included.  The patch appears to include 3 new or modified tests.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed core unit tests.

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/155/testReport/
Findbugs warnings: http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/155/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Checkstyle results: http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/155/artifact/trunk/build/test/checkstyle-errors.html
Console output: http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/155/console

This message is automatically generated., The two failed tests are
 org.apache.hadoop.hdfs.TestClientProtocolForPipelineRecovery.testGetNewStamp 
 org.apache.hadoop.hdfs.server.datanode.TestBlockReport.blockReport

and the only change that this patch is to change the constructor of the Balancer. In no way is this test failure related to this patch. I a going to commit this patch., I just committed this. Thanks Cristian., Integrated in Hdfs-Patch-h5.grid.sp2.yahoo.net #159 (See [http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h5.grid.sp2.yahoo.net/159/])
    . Balancer causes Null Pointer Exception.
(Cristian Ivascu via dhruba)
. Balancer causes Null Pointer Exception. 
(Cristian Ivascu via dhruba)
, Integrated in Hadoop-Hdfs-trunk #182 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-Hdfs-trunk/182/])
    , Integrated in Hadoop-Hdfs-trunk-Commit #158 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-Hdfs-trunk-Commit/158/])
    , Integrated in Hdfs-Patch-h2.grid.sp2.yahoo.net #94 (See [http://hudson.zones.apache.org/hudson/job/Hdfs-Patch-h2.grid.sp2.yahoo.net/94/])
    ]