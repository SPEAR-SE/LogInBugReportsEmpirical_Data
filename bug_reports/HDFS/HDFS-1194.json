{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Dmytro Molkov",
            "key": "dms",
            "name": "dms",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=dms",
            "timeZone": "Etc/UTC"
        },
        "components": [],
        "created": "2010-06-08T23:20:08.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Dmytro Molkov",
            "key": "dms",
            "name": "dms",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=dms",
            "timeZone": "Etc/UTC"
        },
        "customfield_10010": null,
        "customfield_12310191": null,
        "customfield_12310192": null,
        "customfield_12310220": "2010-06-16T22:22:17.379+0000",
        "customfield_12310222": "1_*:*_1_*:*_103402897688_*|*_5_*:*_1_*:*_0",
        "customfield_12310230": null,
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "0.0",
        "customfield_12310320": null,
        "customfield_12310420": "15983",
        "customfield_12310920": "113381",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i0jrh3:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Aug 31 22:27:45 UTC 2010",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "We just hit the problem described in HDFS-1024 again.\nAfter more investigation of the underlying problems with CancelledKeyException there are some findings:\n\nOne of the symptoms: the transfer becomes really slow (it does 700 kb/s) when I am doing the fetch using wget. At the same time disk and network are OK since I can copy at 50 mb/s using scp.\nI was taking jstacks of the namenode while the transfer is in process and we found that every stack trace has one thread of jetty sitting in this place:\n\n{code}\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\n\tat java.lang.Thread.sleep(Native Method)\n\tat org.mortbay.io.nio.SelectorManager$SelectSet.doSelect(SelectorManager.java:452)\n\tat org.mortbay.io.nio.SelectorManager.doSelect(SelectorManager.java:185)\n\tat org.mortbay.jetty.nio.SelectChannelConnector.accept(SelectChannelConnector.java:124)\n\tat org.mortbay.jetty.AbstractConnector$Acceptor.run(AbstractConnector.java:707)\n\tat org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:522)\n{code}\n\nHere is a jetty code that corresponds to this:\n\n{code}\n// Look for JVM bug \n                    if (selected==0 && wait>0 && (now-before)<wait/2 && _selector.selectedKeys().size()==0)\n                    {\n                        if (_jvmBug++>5)  // TODO tune or configure this\n                        {\n                            // Probably JVM BUG!\n                            \n                            Iterator iter = _selector.keys().iterator();\n                            while(iter.hasNext())\n                            {\n                                key = (SelectionKey) iter.next();\n                                if (key.isValid()&&key.interestOps()==0)\n                                {\n                                    key.cancel();\n                                }\n                            }\n                            try\n                            {\n                                Thread.sleep(20);  // tune or configure this\n                            }\n                            catch (InterruptedException e)\n                            {\n                                Log.ignore(e);\n                            }\n                        } \n                    }\n{code}\n\nBased on this it is obvious we are hitting a jetty workaround for a JVM bug that doesn't handle select() properly.\n\nThere is a jetty JIRA for this http://jira.codehaus.org/browse/JETTY-937 (it actually introduces the workaround for the JVM bug that we are hitting)\n\nThey say that the problem was fixed in 6.1.22, there is a person on that JIRA also saying that switching to using SocketConnector instead of SelectChannelConnector helped in their case.\nSince we are hitting the same bug in our world we should either adopt the newer Jetty version where there is a better workaround, but it might not help if we are still hitting that bug constantly, the workaround might be better though.\nAnother approach is to switch to using SocketConnector which will eliminate the problem completely, although I am not sure what problems that will bring.\n\nThe java version we are running is in Environment\n\nAny thoughts",
        "duedate": null,
        "environment": "Java(TM) SE Runtime Environment (build 1.6.0_14-b08)\nJava HotSpot(TM) 64-Bit Server VM (build 14.0-b16, mixed mode)\n\nCentOS 5",
        "fixVersions": [],
        "issuelinks": [
            {
                "id": "12375376",
                "inwardIssue": {
                    "fields": {
                        "issuetype": {
                            "avatarId": 21133,
                            "description": "A problem which impairs or prevents the functions of the product.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                            "id": "1",
                            "name": "Bug",
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                            "subtask": false
                        },
                        "priority": {
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
                            "id": "1",
                            "name": "Blocker",
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/1"
                        },
                        "status": {
                            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                            "id": "6",
                            "name": "Closed",
                            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                            "statusCategory": {
                                "colorName": "green",
                                "id": 3,
                                "key": "done",
                                "name": "Done",
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
                            }
                        },
                        "summary": "Bump jetty to 6.1.26"
                    },
                    "id": "12513052",
                    "key": "HADOOP-7450",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/12513052"
                },
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12375376",
                "type": {
                    "id": "12310000",
                    "inward": "is duplicated by",
                    "name": "Duplicate",
                    "outward": "duplicates",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"
                }
            },
            {
                "id": "12332400",
                "outwardIssue": {
                    "fields": {
                        "issuetype": {
                            "avatarId": 21133,
                            "description": "A problem which impairs or prevents the functions of the product.",
                            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
                            "id": "1",
                            "name": "Bug",
                            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
                            "subtask": false
                        },
                        "priority": {
                            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/blocker.svg",
                            "id": "1",
                            "name": "Blocker",
                            "self": "https://issues.apache.org/jira/rest/api/2/priority/1"
                        },
                        "status": {
                            "description": "The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.",
                            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/closed.png",
                            "id": "6",
                            "name": "Closed",
                            "self": "https://issues.apache.org/jira/rest/api/2/status/6",
                            "statusCategory": {
                                "colorName": "green",
                                "id": 3,
                                "key": "done",
                                "name": "Done",
                                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
                            }
                        },
                        "summary": "SecondaryNamenode fails to checkpoint because namenode fails with CancelledKeyException"
                    },
                    "id": "12458299",
                    "key": "HDFS-1024",
                    "self": "https://issues.apache.org/jira/rest/api/2/issue/12458299"
                },
                "self": "https://issues.apache.org/jira/rest/api/2/issueLink/12332400",
                "type": {
                    "id": "12310010",
                    "inward": "is part of",
                    "name": "Incorporates",
                    "outward": "incorporates",
                    "self": "https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"
                }
            }
        ],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "id": "3",
            "name": "Major",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094"
            },
            "id": "12310942",
            "key": "HDFS",
            "name": "Hadoop HDFS",
            "projectCategory": {
                "description": "Scalable Distributed Computing",
                "id": "10292",
                "name": "Hadoop",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10292"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12310942"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Dmytro Molkov",
            "key": "dms",
            "name": "dms",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=dms",
            "timeZone": "Etc/UTC"
        },
        "resolution": {
            "description": "The problem is a duplicate of an existing issue.",
            "id": "3",
            "name": "Duplicate",
            "self": "https://issues.apache.org/jira/rest/api/2/resolution/3"
        },
        "resolutiondate": "2013-09-17T18:21:46.000+0000",
        "status": {
            "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png",
            "id": "5",
            "name": "Resolved",
            "self": "https://issues.apache.org/jira/rest/api/2/status/5",
            "statusCategory": {
                "colorName": "green",
                "id": 3,
                "key": "done",
                "name": "Done",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3"
            }
        },
        "subtasks": [],
        "summary": "Secondary namenode fails to fetch the image from the primary",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2013-09-17T18:21:46.000+0000",
        "versions": [
            {
                "archived": false,
                "description": "",
                "id": "12314048",
                "name": "0.20.1",
                "releaseDate": "2009-09-01",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12314048"
            },
            {
                "archived": false,
                "description": "",
                "id": "12314204",
                "name": "0.20.2",
                "releaseDate": "2010-02-16",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12314204"
            },
            {
                "archived": false,
                "description": "",
                "id": "12314046",
                "name": "0.21.0",
                "releaseDate": "2010-08-23",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12314046"
            },
            {
                "archived": false,
                "description": "",
                "id": "12314241",
                "name": "0.22.0",
                "releaseDate": "2011-12-10",
                "released": true,
                "self": "https://issues.apache.org/jira/rest/api/2/version/12314241"
            }
        ],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HDFS-1194/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HDFS-1194/watchers",
            "watchCount": 8
        },
        "workratio": -1
    },
    "id": "12466510",
    "key": "HDFS-1194",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/12466510"
}