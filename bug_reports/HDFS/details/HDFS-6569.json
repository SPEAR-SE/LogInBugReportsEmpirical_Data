{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12722560","self":"https://issues.apache.org/jira/rest/api/2/issue/12722560","key":"HDFS-6569","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327181","id":"12327181","description":"2.6.0 release","name":"2.6.0","archived":false,"released":true,"releaseDate":"2014-11-18"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-06-19T18:56:41.975+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Aug 20 00:01:05 UTC 2014","customfield_12310420":"400751","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_854877547_*|*_1_*:*_1_*:*_4339692096_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-08-18T21:27:28.814+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-6569/watchers","watchCount":5,"isWatching":false},"created":"2014-06-19T18:31:19.200+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326143","id":"12326143","description":"2.4.0 release","name":"2.4.0","archived":false,"released":true,"releaseDate":"2014-04-07"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335732","id":"12335732","description":"3.0.0-alpha1 release","name":"3.0.0-alpha1","archived":false,"released":true,"releaseDate":"2016-09-03"}],"issuelinks":[{"id":"12390538","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12390538","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12682166","key":"HDFS-5583","self":"https://issues.apache.org/jira/rest/api/2/issue/12682166","fields":{"summary":"Make DN send an OOB Ack on shutdown before restarting","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}},{"id":"12394309","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12394309","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12734547","key":"HDFS-6856","self":"https://issues.apache.org/jira/rest/api/2/issue/12734547","fields":{"summary":"Send an OOB ack asynchronously","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-05-12T18:12:36.008+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312927","id":"12312927","name":"datanode"}],"timeoriginalestimate":null,"description":"The socket is closed too early before the OOB message can be sent to client, which causes the write pipeline failure.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327181","id":"12327181","description":"2.6.0 release","name":"2.6.0","archived":false,"released":true,"releaseDate":"2014-11-18"}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12660761","id":"12660761","filename":"HDFS-6569.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-08T23:59:23.577+0000","size":11503,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12660761/HDFS-6569.001.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12660826","id":"12660826","filename":"HDFS-6569.002.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-09T23:09:53.530+0000","size":11566,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12660826/HDFS-6569.002.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12662194","id":"12662194","filename":"HDFS-6569.003.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-15T23:44:02.596+0000","size":12334,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12662194/HDFS-6569.003.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12653719","id":"12653719","filename":"test-hdfs-6569.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-07-02T23:15:05.811+0000","size":7586,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12653719/test-hdfs-6569.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"400843","customfield_12312823":null,"summary":"OOB message can't be sent to the client when DataNode shuts down for upgrade","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14037640","id":"14037640","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"The client stack trace:\n{noformat}\n14/06/19 11:26:23 WARN hdfs.DFSClient: DFSOutputStream ResponseProcessor exception  for block BP-1063118919-10.11.1.167-1403201799003:blk_1073741828_1004\njava.io.EOFException: Premature EOF: no length prefix available\n\tat org.apache.hadoop.hdfs.protocolPB.PBHelper.vintPrefixed(PBHelper.java:1997)\n\tat org.apache.hadoop.hdfs.protocol.datatransfer.PipelineAck.readFields(PipelineAck.java:176)\n\tat org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer$ResponseProcessor.run(DFSOutputStream.java:793)\n14/06/19 11:26:23 WARN hdfs.DFSClient: DataStreamer Exception\njava.io.IOException: Broken pipe\n\tat sun.nio.ch.FileDispatcher.write0(Native Method)\n\tat sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:29)\n\tat sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:69)\n\tat sun.nio.ch.IOUtil.write(IOUtil.java:40)\n\tat sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:336)\n\tat org.apache.hadoop.net.SocketOutputStream$Writer.performIO(SocketOutputStream.java:63)\n\tat org.apache.hadoop.net.SocketIOWithTimeout.doIO(SocketIOWithTimeout.java:142)\n\tat org.apache.hadoop.net.SocketOutputStream.write(SocketOutputStream.java:159)\n\tat org.apache.hadoop.net.SocketOutputStream.write(SocketOutputStream.java:117)\n\tat java.io.BufferedOutputStream.write(BufferedOutputStream.java:105)\n\tat java.io.DataOutputStream.write(DataOutputStream.java:90)\n\tat org.apache.hadoop.hdfs.DFSOutputStream$Packet.writeTo(DFSOutputStream.java:271)\n\tat org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.run(DFSOutputStream.java:574)\nput: All datanodes 127.0.0.1:50010 are bad. Aborting...\n{noformat}\n\nThe DataNode error:\n{noformat}\n2014-06-19 11:26:23,668 INFO org.apache.hadoop.hdfs.server.datanode.DataNode: Shutting down for restart (BP-1063118919-10.11.1.167-1403201799003:blk_1073741828_1004).\n2014-06-19 11:26:23,669 INFO org.apache.hadoop.hdfs.server.datanode.DataNode: Sending an out of band ack of type OOB_RESTART\n2014-06-19 11:26:23,669 INFO org.apache.hadoop.hdfs.server.datanode.DataNode: Error sending OOB Ack.\njava.io.IOException: The stream is closed\n        at org.apache.hadoop.net.SocketOutputStream.write(SocketOutputStream.java:118)\n        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\n        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)\n        at java.io.DataOutputStream.flush(DataOutputStream.java:106)\n        at org.apache.hadoop.hdfs.server.datanode.BlockReceiver$PacketResponder.sendAckUpstreamUnprotected(BlockReceiver.java:1339)\n        at org.apache.hadoop.hdfs.server.datanode.BlockReceiver$PacketResponder.sendOOBResponse(BlockReceiver.java:1041)\n        at org.apache.hadoop.hdfs.server.datanode.BlockReceiver.receiveBlock(BlockReceiver.java:802)\n        at org.apache.hadoop.hdfs.server.datanode.DataXceiver.writeBlock(DataXceiver.java:741)\n        at org.apache.hadoop.hdfs.protocol.datatransfer.Receiver.opWriteBlock(Receiver.java:124)\n        at org.apache.hadoop.hdfs.protocol.datatransfer.Receiver.processOp(Receiver.java:71)\n        at org.apache.hadoop.hdfs.server.datanode.DataXceiver.run(DataXceiver.java:234)\n        at java.lang.Thread.run(Thread.java:695)\n\n{noformat}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-06-19T18:33:30.068+0000","updated":"2014-06-19T18:33:30.068+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14037674","id":"14037674","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"body":"It is unclear who closed the connection. During the development, I fixed one multiple closure bug and exceptions caused by extra ones in datanode.  There may be other cases remaining.  Is it from a write using one replica?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"created":"2014-06-19T18:56:41.975+0000","updated":"2014-06-19T18:56:41.975+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14037812","id":"14037812","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"Yes. It's a single node cluster with replication factor as 1.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-06-19T20:17:22.979+0000","updated":"2014-06-19T20:17:22.979+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14037814","id":"14037814","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"Here is the steps to reproduce it:\n1. upload 1GB file using \"hadoop dfs -put\"\n2. during the file loading, do a \"hadoop dfsadmin -shutdownDatanode host:port upgrade\". \n\nThis will cause the write failure.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-06-19T20:19:39.637+0000","updated":"2014-06-19T20:19:39.637+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14043915","id":"14043915","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"The current code looks good logically and it tries not closing streams before the OOB is sent.\n\nI think problem is triggered by the NIO implementation. When DataNode is shutdown for restart, it interrupts all the DataXceiver threads.  The NIO channel in NioInetPeer are bound to these threads doing the block receiving. If these threads are interrupted, the stream / channel is closed due to IO safety issues.\n\nSo once the DataXceiver thread is interrupted, rarely the OOB can be sent before NIO channel is closed automatically. \nOne possible fix is to send OOB message before interrupting DataXceiver threads.\nThoughts?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-06-25T18:55:02.288+0000","updated":"2014-06-25T18:55:02.288+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14044680","id":"14044680","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"body":"{{TestClientProtocolForPipelineRecovery#testPipelineRecoveryOnOOB}} is supposed to test the case, but in this test case the thread will be in epoll_wait(), not read(). I guess that's the difference. \n\nbq. One possible fix is to send OOB message before interrupting DataXceiver threads.\nI explored this approach before, I will see what I can do.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"created":"2014-06-26T14:12:18.112+0000","updated":"2014-06-26T14:12:18.112+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14050855","id":"14050855","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"Uploaded some test code changes I used last week when debugging the problem. The test passed with it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-07-02T23:15:05.858+0000","updated":"2014-07-02T23:15:05.858+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14058836","id":"14058836","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"body":"Sorry for the delay.  I looked at the patch and the approach is similar to what I was thinking. I will work on it today.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"created":"2014-07-11T14:30:57.860+0000","updated":"2014-07-11T14:30:57.860+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14091648","id":"14091648","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12660761/HDFS-6569.001.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:\n\n                  org.apache.hadoop.hdfs.TestSafeMode\n                  org.apache.hadoop.hdfs.TestHFlush\n                  org.apache.hadoop.hdfs.TestModTime\n                  org.apache.hadoop.TestGenericRefresh\n                  org.apache.hadoop.hdfs.server.datanode.TestReadOnlySharedStorage\n                  org.apache.hadoop.hdfs.server.datanode.TestIncrementalBlockReports\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestFailoverWithBlockTokensEnabled\n                  org.apache.hadoop.hdfs.web.TestHttpsFileSystem\n                  org.apache.hadoop.cli.TestXAttrCLI\n                  org.apache.hadoop.hdfs.server.blockmanagement.TestRBWBlockInvalidation\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotRename\n                  org.apache.hadoop.hdfs.TestReplication\n                  org.apache.hadoop.hdfs.server.namenode.TestNameNodeAcl\n                  org.apache.hadoop.hdfs.server.datanode.TestDataNodeVolumeFailureReporting\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestStandbyIsHot\n                  org.apache.hadoop.hdfs.TestAbandonBlock\n                  org.apache.hadoop.hdfs.TestSetTimes\n                  org.apache.hadoop.hdfs.server.namenode.TestNameEditsConfigs\n                  org.apache.hadoop.net.TestNetworkTopology\n                  org.apache.hadoop.hdfs.TestDFSFinalize\n                  org.apache.hadoop.hdfs.web.TestFSMainOperationsWebHdfs\n                  org.apache.hadoop.hdfs.server.datanode.TestBlockRecovery\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestStandbyBlockManagement\n                  org.apache.hadoop.hdfs.server.namenode.TestAuditLogs\n                  org.apache.hadoop.hdfs.server.namenode.TestStorageRestore\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotDeletion\n                  org.apache.hadoop.hdfs.TestFSOutputSummer\n                  org.apache.hadoop.hdfs.server.blockmanagement.TestNodeCount\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestRenameWithSnapshots\n                  org.apache.hadoop.hdfs.TestAppendDifferentChecksum\n                  org.apache.hadoop.hdfs.server.namenode.TestEditLogRace\n                  org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.TestDatanodeRestart\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestPipelinesFailover\n                  org.apache.hadoop.hdfs.server.namenode.TestNameNodeResourceChecker\n                  org.apache.hadoop.hdfs.server.datanode.TestDataNodeVolumeFailureToleration\n                  org.apache.hadoop.hdfs.TestHDFSFileSystemContract\n                  org.apache.hadoop.hdfs.server.datanode.TestNNHandlesCombinedBlockReport\n                  org.apache.hadoop.hdfs.TestDFSShell\n                  org.apache.hadoop.hdfs.TestMissingBlocksAlert\n                  org.apache.hadoop.hdfs.server.balancer.TestBalancerWithHANameNodes\n                  org.apache.hadoop.hdfs.TestFileCreationClient\n                  org.apache.hadoop.hdfs.TestClientReportBadBlock\n                  org.apache.hadoop.fs.contract.hdfs.TestHDFSContractSeek\n                  org.apache.hadoop.fs.TestEnhancedByteBufferAccess\n                  org.apache.hadoop.hdfs.server.namenode.TestParallelImageWrite\n                  org.apache.hadoop.hdfs.web.TestWebHDFS\n                  org.apache.hadoop.hdfs.TestSmallBlock\n                  org.apache.hadoop.hdfs.server.namenode.TestStartup\n                  org.apache.hadoop.hdfs.server.namenode.TestDecommissioningStatus\n                  org.apache.hadoop.fs.TestFcHdfsCreateMkdir\n                  org.apache.hadoop.hdfs.server.namenode.TestAuditLogger\n                  org.apache.hadoop.hdfs.server.blockmanagement.TestComputeInvalidateWork\n                  org.apache.hadoop.hdfs.TestReadWhileWriting\n                  org.apache.hadoop.hdfs.web.TestWebHdfsTokens\n                  org.apache.hadoop.hdfs.server.namenode.TestMetadataVersionOutput\n                  org.apache.hadoop.hdfs.server.datanode.TestTransferRbw\n                  org.apache.hadoop.hdfs.TestFileCreation\n                  org.apache.hadoop.hdfs.TestRead\n                  org.apache.hadoop.hdfs.server.datanode.TestBlockHasMultipleReplicasOnSameDN\n                  org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.TestInterDatanodeProtocol\n                  org.apache.hadoop.fs.TestFcHdfsPermission\n                  org.apache.hadoop.hdfs.TestClientProtocolForPipelineRecovery\n                  org.apache.hadoop.hdfs.server.namenode.TestFSEditLogLoader\n                  org.apache.hadoop.hdfs.server.datanode.TestDataNodeMetrics\n                  org.apache.hadoop.hdfs.TestWriteConfigurationToDFS\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotDiffReport\n                  org.apache.hadoop.hdfs.server.namenode.TestFileContextAcl\n                  org.apache.hadoop.hdfs.TestParallelShortCircuitReadNoChecksum\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestSetQuotaWithSnapshot\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotStatsMXBean\n                  org.apache.hadoop.fs.shell.TestHdfsTextCommand\n                  org.apache.hadoop.hdfs.tools.offlineImageViewer.TestOfflineImageViewerForAcl\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestHAStateTransitions\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestDisallowModifyROSnapshot\n                  org.apache.hadoop.hdfs.TestRenameWhileOpen\n                  org.apache.hadoop.hdfs.TestDFSClientRetries\n                  org.apache.hadoop.hdfs.server.namenode.TestProcessCorruptBlocks\n                  org.apache.hadoop.hdfs.server.namenode.TestAddBlockRetry\n                  org.apache.hadoop.hdfs.server.namenode.TestNameNodeXAttr\n                  org.apache.hadoop.hdfs.TestSnapshotCommands\n                  org.apache.hadoop.hdfs.tools.TestDFSAdminWithHA\n                  org.apache.hadoop.hdfs.TestFileAppend\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestHASafeMode\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestHAAppend\n                  org.apache.hadoop.hdfs.TestLargeBlock\n                  org.apache.hadoop.hdfs.TestFileCorruption\n                  org.apache.hadoop.hdfs.TestQuota\n                  org.apache.hadoop.hdfs.server.namenode.TestNameNodeRetryCacheMetrics\n                  org.apache.hadoop.hdfs.server.namenode.TestDiskspaceQuotaUpdate\n                  org.apache.hadoop.cli.TestHDFSCLI\n                  org.apache.hadoop.hdfs.TestDFSShellGenericOptions\n                  org.apache.hadoop.hdfs.TestHDFSServerPorts\n                  org.apache.hadoop.hdfs.server.namenode.TestXAttrConfigFlag\n                  org.apache.hadoop.hdfs.server.balancer.TestBalancerWithNodeGroup\n                  org.apache.hadoop.fs.viewfs.TestViewFsWithAcls\n                  org.apache.hadoop.hdfs.server.namenode.TestSnapshotPathINodes\n                  org.apache.hadoop.fs.viewfs.TestViewFileSystemWithAcls\n                  org.apache.hadoop.hdfs.TestLocalDFS\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshot\n                  org.apache.hadoop.fs.TestSymlinkHdfsFileSystem\n                  org.apache.hadoop.hdfs.TestLease\n                  org.apache.hadoop.hdfs.server.datanode.TestStorageReport\n                  org.apache.hadoop.hdfs.web.TestWebHdfsWithMultipleNameNodes\n                  org.apache.hadoop.hdfs.server.blockmanagement.TestBlocksWithNotEnoughRacks\n                  org.apache.hadoop.hdfs.server.namenode.TestFSNamesystemMBean\n                  org.apache.hadoop.hdfs.TestIsMethodSupported\n                  org.apache.hadoop.hdfs.TestWriteRead\n                  org.apache.hadoop.hdfs.server.blockmanagement.TestPendingReplication\n                  org.apache.hadoop.hdfs.server.datanode.TestCachingStrategy\n                  org.apache.hadoop.hdfs.server.datanode.TestDataNodeMultipleRegistrations\n                  org.apache.hadoop.hdfs.TestFileAppend2\n                  org.apache.hadoop.hdfs.server.namenode.TestCheckpoint\n                  org.apache.hadoop.fs.TestUrlStreamHandler\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestDNFencing\n                  org.apache.hadoop.hdfs.TestSetrepIncreasing\n                  org.apache.hadoop.hdfs.server.namenode.metrics.TestNameNodeMetrics\n                  org.apache.hadoop.hdfs.TestDatanodeDeath\n                  org.apache.hadoop.hdfs.web.TestWebHdfsWithAuthenticationFilter\n                  org.apache.hadoop.security.TestRefreshUserMappings\n                  org.apache.hadoop.hdfs.server.namenode.metrics.TestNNMetricFilesInGetListingOps\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestOpenFilesWithSnapshot\n                  org.apache.hadoop.hdfs.TestBlockReaderFactory\n                  org.apache.hadoop.hdfs.server.namenode.TestCheckPointForSecurityTokens\n                  org.apache.hadoop.fs.viewfs.TestViewFileSystemHdfs\n                  org.apache.hadoop.hdfs.server.datanode.TestDataNodeMXBean\n                  org.apache.hadoop.hdfs.server.namenode.TestHostsFiles\n                  org.apache.hadoop.hdfs.server.namenode.TestBlockUnderConstruction\n                  org.apache.hadoop.hdfs.server.namenode.TestAddBlock\n                  org.apache.hadoop.fs.contract.hdfs.TestHDFSContractOpen\n                  org.apache.hadoop.hdfs.TestBlockReaderLocalLegacy\n                  org.apache.hadoop.hdfs.server.namenode.TestFSImage\n                  org.apache.hadoop.fs.viewfs.TestViewFsAtHdfsRoot\n                  org.apache.hadoop.hdfs.TestClose\n                  org.apache.hadoop.hdfs.TestFetchImage\n                  org.apache.hadoop.fs.contract.hdfs.TestHDFSContractDelete\n                  org.apache.hadoop.hdfs.TestDataTransferKeepalive\n                  org.apache.hadoop.hdfs.TestDatanodeLayoutUpgrade\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestXAttrsWithHA\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotListing\n                  org.apache.hadoop.hdfs.TestPersistBlocks\n                  org.apache.hadoop.fs.viewfs.TestViewFileSystemWithXAttrs\n                  org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.TestWriteToReplica\n                  org.apache.hadoop.hdfs.server.namenode.TestBackupNode\n                  org.apache.hadoop.hdfs.server.datanode.TestDiskError\n                  org.apache.hadoop.hdfs.TestBlockMissingException\n                  org.apache.hadoop.hdfs.server.blockmanagement.TestUnderReplicatedBlocks\n                  org.apache.hadoop.hdfs.TestFileAppend4\n                  org.apache.hadoop.TestRefreshCallQueue\n                  org.apache.hadoop.hdfs.TestHDFSTrash\n                  org.apache.hadoop.hdfs.server.datanode.TestDataNodeExit\n                  org.apache.hadoop.hdfs.TestPread\n                  org.apache.hadoop.hdfs.TestFileCreationEmpty\n                  org.apache.hadoop.hdfs.TestFileCreationDelete\n                  org.apache.hadoop.hdfs.server.datanode.TestMultipleNNDataBlockScanner\n                  org.apache.hadoop.hdfs.server.datanode.TestNNHandlesBlockReportPerStorage\n                  org.apache.hadoop.hdfs.TestListFilesInDFS\n                  org.apache.hadoop.hdfs.TestReplaceDatanodeOnFailure\n                  org.apache.hadoop.hdfs.TestDatanodeConfig\n                  org.apache.hadoop.security.TestPermissionSymlinks\n                  org.apache.hadoop.fs.contract.hdfs.TestHDFSContractMkdir\n                  org.apache.hadoop.hdfs.shortcircuit.TestShortCircuitLocalRead\n                  org.apache.hadoop.hdfs.server.balancer.TestBalancerWithEncryptedTransfer\n                  org.apache.hadoop.hdfs.server.balancer.TestBalancer\n                  org.apache.hadoop.hdfs.server.namenode.TestHDFSConcat\n                  org.apache.hadoop.hdfs.TestDFSStorageStateRecovery\n                  org.apache.hadoop.hdfs.server.datanode.TestIncrementalBrVariations\n                  org.apache.hadoop.hdfs.TestDFSUpgradeFromImage\n                  org.apache.hadoop.hdfs.server.namenode.TestNamenodeRetryCache\n                  org.apache.hadoop.hdfs.TestDisableConnCache\n                  org.apache.hadoop.hdfs.TestParallelRead\n                  org.apache.hadoop.hdfs.server.namenode.TestAclConfigFlag\n                  org.apache.hadoop.hdfs.server.blockmanagement.TestBlockTokenWithDFS\n                  org.apache.hadoop.hdfs.TestPipelines\n                  org.apache.hadoop.hdfs.TestCrcCorruption\n                  org.apache.hadoop.hdfs.server.namenode.TestSecurityTokenEditLog\n                  org.apache.hadoop.hdfs.TestDFSClientFailover\n                  org.apache.hadoop.hdfs.server.datanode.TestDirectoryScanner\n                  org.apache.hadoop.hdfs.server.namenode.TestNameNodeMXBean\n                  org.apache.hadoop.hdfs.security.token.block.TestBlockToken\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestDNFencingWithReplication\n                  org.apache.hadoop.fs.permission.TestStickyBit\n                  org.apache.hadoop.hdfs.server.namenode.TestFSImageWithSnapshot\n                  org.apache.hadoop.hdfs.TestClientBlockVerification\n                  org.apache.hadoop.hdfs.TestDFSClientExcludedNodes\n                  org.apache.hadoop.hdfs.TestMultiThreadedHflush\n                  org.apache.hadoop.hdfs.TestParallelShortCircuitReadUnCached\n                  org.apache.hadoop.fs.viewfs.TestViewFileSystemAtHdfsRoot\n                  org.apache.hadoop.hdfs.server.namenode.TestListCorruptFileBlocks\n                  org.apache.hadoop.fs.viewfs.TestViewFsHdfs\n                  org.apache.hadoop.hdfs.server.namenode.TestFSDirectory\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestINodeFileUnderConstructionWithSnapshot\n                  org.apache.hadoop.hdfs.TestFileLengthOnClusterRestart\n                  org.apache.hadoop.hdfs.TestMiniDFSCluster\n                  org.apache.hadoop.hdfs.TestFileConcurrentReader\n                  org.apache.hadoop.cli.TestAclCLI\n                  org.apache.hadoop.hdfs.TestDFSOutputStream\n                  org.apache.hadoop.fs.contract.hdfs.TestHDFSContractConcat\n                  org.apache.hadoop.fs.contract.hdfs.TestHDFSContractAppend\n                  org.apache.hadoop.hdfs.server.namenode.TestFSImageWithAcl\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotNameWithInvalidCharacters\n                  org.apache.hadoop.hdfs.server.namenode.TestNamenodeCapacityReport\n                  org.apache.hadoop.hdfs.TestDFSMkdirs\n                  org.apache.hadoop.hdfs.TestDecommission\n                  org.apache.hadoop.fs.contract.hdfs.TestHDFSContractRootDirectory\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestNestedSnapshots\n                  org.apache.hadoop.hdfs.TestListFilesInFileContext\n                  org.apache.hadoop.hdfs.protocol.datatransfer.sasl.TestSaslDataTransfer\n                  org.apache.hadoop.hdfs.TestRollingUpgrade\n                  org.apache.hadoop.hdfs.TestGetBlocks\n                  org.apache.hadoop.hdfs.TestRestartDFS\n                  org.apache.hadoop.hdfs.TestDFSStartupVersions\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotBlocksMap\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestPendingCorruptDnMessages\n                  org.apache.hadoop.hdfs.server.namenode.TestSecondaryNameNodeUpgrade\n                  org.apache.hadoop.hdfs.TestDFSRollback\n                  org.apache.hadoop.hdfs.TestDataTransferProtocol\n                  org.apache.hadoop.hdfs.TestDFSRename\n                  org.apache.hadoop.hdfs.shortcircuit.TestShortCircuitCache\n                  org.apache.hadoop.hdfs.TestRollingUpgradeDowngrade\n                  org.apache.hadoop.hdfs.tools.offlineEditsViewer.TestOfflineEditsViewer\n                  org.apache.hadoop.hdfs.TestDFSPermission\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestRetryCacheWithHA\n                  org.apache.hadoop.hdfs.server.namenode.TestFileContextXAttr\n                  org.apache.hadoop.hdfs.TestDatanodeReport\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotFileLength\n                  org.apache.hadoop.hdfs.server.datanode.TestDataNodeRollingUpgrade\n                  org.apache.hadoop.hdfs.server.namenode.TestSaveNamespace\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshottableDirListing\n                  org.apache.hadoop.hdfs.TestDFSAddressConfig\n                  org.apache.hadoop.cli.TestCacheAdminCLI\n                  org.apache.hadoop.hdfs.server.datanode.TestDnRespectsBlockReportSplitThreshold\n                  org.apache.hadoop.hdfs.server.datanode.TestDataNodeVolumeFailure\n                  org.apache.hadoop.hdfs.server.namenode.TestLargeDirectoryDelete\n                  org.apache.hadoop.hdfs.server.balancer.TestBalancerWithSaslDataTransfer\n                  org.apache.hadoop.hdfs.server.namenode.TestDeleteRace\n                  org.apache.hadoop.hdfs.server.datanode.TestRefreshNamenodes\n                  org.apache.hadoop.hdfs.security.TestDelegationToken\n                  org.apache.hadoop.fs.loadGenerator.TestLoadGenerator\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestHAMetrics\n                  org.apache.hadoop.hdfs.TestDatanodeBlockScanner\n                  org.apache.hadoop.hdfs.TestInjectionForSimulatedStorage\n                  org.apache.hadoop.hdfs.TestFileAppendRestart\n                  org.apache.hadoop.hdfs.server.namenode.TestSequentialBlockId\n                  org.apache.hadoop.hdfs.server.namenode.TestMetaSave\n                  org.apache.hadoop.hdfs.server.namenode.TestCacheDirectives\n                  org.apache.hadoop.hdfs.TestRollingUpgradeRollback\n                  org.apache.hadoop.hdfs.TestEncryptedTransfer\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestAclWithSnapshot\n                  org.apache.hadoop.hdfs.TestDatanodeRegistration\n                  org.apache.hadoop.hdfs.server.blockmanagement.TestHeartbeatHandling\n                  org.apache.hadoop.fs.TestFcHdfsSetUMask\n                  org.apache.hadoop.hdfs.TestFileAppend3\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestHarFileSystemWithHA\n                  org.apache.hadoop.hdfs.server.namenode.TestFsck\n                  org.apache.hadoop.fs.contract.hdfs.TestHDFSContractRename\n                  org.apache.hadoop.hdfs.TestBalancerBandwidth\n                  org.apache.hadoop.hdfs.server.blockmanagement.TestPendingInvalidateBlock\n                  org.apache.hadoop.hdfs.TestDFSRemove\n                  org.apache.hadoop.security.TestPermission\n                  org.apache.hadoop.fs.viewfs.TestViewFsWithXAttrs\n                  org.apache.hadoop.hdfs.server.datanode.TestBlockReplacement\n                  org.apache.hadoop.hdfs.TestDistributedFileSystem\n                  org.apache.hadoop.fs.TestResolveHdfsSymlink\n                  org.apache.hadoop.hdfs.TestSetrepDecreasing\n                  org.apache.hadoop.hdfs.TestFSInputChecker\n                  org.apache.hadoop.hdfs.server.namenode.TestFileLimit\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestUpdatePipelineWithSnapshots\n                  org.apache.hadoop.hdfs.server.blockmanagement.TestOverReplicatedBlocks\n                  org.apache.hadoop.hdfs.tools.offlineImageViewer.TestOfflineImageViewer\n                  org.apache.hadoop.hdfs.server.namenode.TestDeadDatanode\n                  org.apache.hadoop.fs.TestGlobPaths\n                  org.apache.hadoop.hdfs.TestFsShellPermission\n                  org.apache.hadoop.hdfs.web.TestWebHDFSXAttr\n                  org.apache.hadoop.hdfs.TestGetFileChecksum\n                  org.apache.hadoop.hdfs.TestLeaseRecovery\n                  org.apache.hadoop.hdfs.web.TestWebHDFSAcl\n                  org.apache.hadoop.fs.contract.hdfs.TestHDFSContractCreate\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestBootstrapStandbyWithQJM\n                  org.apache.hadoop.hdfs.TestParallelShortCircuitLegacyRead\n                  org.apache.hadoop.fs.TestHDFSFileContextMainOperations\n                  org.apache.hadoop.hdfs.server.namenode.TestFavoredNodesEndToEnd\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotMetrics\n                  org.apache.hadoop.hdfs.server.datanode.TestDataNodeInitStorage\n                  org.apache.hadoop.hdfs.server.namenode.web.resources.TestWebHdfsDataLocality\n                  org.apache.hadoop.hdfs.TestFileStatus\n                  org.apache.hadoop.hdfs.server.datanode.TestDeleteBlockPool\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestQuotasWithHA\n                  org.apache.hadoop.hdfs.server.namenode.TestFSImageWithXAttr\n                  org.apache.hadoop.hdfs.TestLeaseRecovery2\n                  org.apache.hadoop.hdfs.server.namenode.TestINodeFile\n                  org.apache.hadoop.hdfs.TestBlockReaderLocal\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestXAttrWithSnapshot\n                  org.apache.hadoop.hdfs.TestDFSUpgrade\n                  org.apache.hadoop.hdfs.web.TestWebHDFSForHA\n                  org.apache.hadoop.hdfs.server.namenode.TestNameNodeRpcServer\n                  org.apache.hadoop.hdfs.server.datanode.TestHSync\n                  org.apache.hadoop.hdfs.TestParallelUnixDomainRead\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotReplication\n                  org.apache.hadoop.hdfs.security.TestDelegationTokenForProxyUser\n                  org.apache.hadoop.hdfs.server.namenode.snapshot.TestCheckpointsWithSnapshots\n                  org.apache.hadoop.hdfs.server.datanode.TestFsDatasetCache\n                  org.apache.hadoop.hdfs.server.blockmanagement.TestReplicationPolicy\n                  org.apache.hadoop.hdfs.TestParallelShortCircuitRead\n                  org.apache.hadoop.fs.TestSymlinkHdfsFileContext\n                  org.apache.hadoop.hdfs.server.balancer.TestBalancerWithMultipleNameNodes\n                  org.apache.hadoop.hdfs.TestSeekBug\n                  org.apache.hadoop.hdfs.server.namenode.TestAllowFormat\n                  org.apache.hadoop.hdfs.server.namenode.TestCreateEditsLog\n\n                                      The following test timeouts occurred in hadoop-hdfs-project/hadoop-hdfs:\n\norg.apache.hadoop.tools.TestJMXGet\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/7598//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7598//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-09T04:44:11.842+0000","updated":"2014-08-09T04:44:11.842+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14091935","id":"14091935","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"Uploaded the patch to fix the unit tests.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-09T23:09:53.535+0000","updated":"2014-08-09T23:09:53.535+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14091972","id":"14091972","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12660826/HDFS-6569.002.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:\n\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestPipelinesFailover\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/7600//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7600//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-10T02:02:48.062+0000","updated":"2014-08-10T02:02:48.062+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14093039","id":"14093039","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"The test failure was not introduced by this patch. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-11T17:43:22.992+0000","updated":"2014-08-11T17:43:22.992+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14098582","id":"14098582","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"body":"The patch looks good in general. There are a couple of things that can be improved though.\n- Serial transmission of OOB. One bad client may block this and prevent the message from being sent to the rest of \"good\" clients.  Unless a new thread is created (during shutdown!) to send an OOB ack asynchrously, the blocking ack.readFields() call needs to be changed in order to delegate the message transmission to the responder thread.  I believe this is beyond the scope of this jira. I suggest filing a new jira for improving this.\n- Shutdown OOB can be sent twice. This does not affect the correctness, but DN log can become a bit messy. We can make it skip the OOB sending on interrupt, if it was already sent. If you want to address this in a separate jira, that is fine, since it is a minor issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"created":"2014-08-15T14:41:22.952+0000","updated":"2014-08-15T14:41:22.952+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14099355","id":"14099355","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"Thank you, Kihwal, for the review. I've created HDFS-6856 to track the effort of sending OOB ack asynchronously.\nUploaded a new patch to not send OOB twice.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-15T23:44:10.161+0000","updated":"2014-08-15T23:44:10.161+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14099523","id":"14099523","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12662194/HDFS-6569.003.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:\n\n                  org.apache.hadoop.hdfs.server.balancer.TestBalancer\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestPipelinesFailover\n\n                                      The following test timeouts occurred in hadoop-hdfs-project/hadoop-hdfs:\n\norg.apache.hadoop.hdfs.TestRollingUpgradeRollback\norg.apache.hadoop.hdfs.server.namenode.ha.TestStandbyCheckpoints\norg.apache.hadoop.hdfs.server.namenode.ha.TestHAMetrics\norg.apache.hadoop.hdfs.server.namenode.ha.TestDelegationTokensWithHA\norg.apache.hadoop.hdfs.server.namenode.ha.TestHAStateTransitions\norg.apache.hadoop.hdfs.server.namenode.TestValidateConfigurationSettings\norg.apache.hadoop.hdfs.server.blockmanagement.TestReplicationPolicyWithNodeGroup\norg.apache.hadoop.hdfs.TestHDFSServerPorts\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/7649//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7649//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-16T06:22:07.343+0000","updated":"2014-08-16T06:22:07.343+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14101067","id":"14101067","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"The test failure was not introduced by the patch and they passed in my local tests. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-18T18:48:43.957+0000","updated":"2014-08-18T18:48:43.957+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14101160","id":"14101160","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"body":"+1 ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"created":"2014-08-18T19:49:58.148+0000","updated":"2014-08-18T19:49:58.148+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14101338","id":"14101338","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"Thank you, Kihwal. I've committed the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-18T21:27:12.989+0000","updated":"2014-08-18T21:27:12.989+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14101585","id":"14101585","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-trunk-Commit #6086 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/6086/])\nHDFS-6569. OOB message can't be sent to the client when DataNode shuts down for upgrade. Contributed by Brandon Li (brandonli: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1618742)\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/BlockReceiver.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataNode.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataXceiver.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataXceiverServer.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/TestDataNodeRollingUpgrade.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-19T00:16:31.038+0000","updated":"2014-08-19T00:16:31.038+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14102392","id":"14102392","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Yarn-trunk #651 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/651/])\nHDFS-6569. OOB message can't be sent to the client when DataNode shuts down for upgrade. Contributed by Brandon Li (brandonli: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1618742)\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/BlockReceiver.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataNode.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataXceiver.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataXceiverServer.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/TestDataNodeRollingUpgrade.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-19T16:20:08.869+0000","updated":"2014-08-19T16:20:08.869+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14102641","id":"14102641","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Hdfs-trunk #1842 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1842/])\nHDFS-6569. OOB message can't be sent to the client when DataNode shuts down for upgrade. Contributed by Brandon Li (brandonli: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1618742)\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/BlockReceiver.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataNode.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataXceiver.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataXceiverServer.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/TestDataNodeRollingUpgrade.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-19T18:56:33.952+0000","updated":"2014-08-19T18:56:33.952+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12722560/comment/14103081","id":"14103081","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk #1868 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1868/])\nHDFS-6569. OOB message can't be sent to the client when DataNode shuts down for upgrade. Contributed by Brandon Li (brandonli: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1618742)\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/BlockReceiver.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataNode.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataXceiver.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataXceiverServer.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/TestDataNodeRollingUpgrade.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-20T00:01:05.586+0000","updated":"2014-08-20T00:01:05.586+0000"}],"maxResults":22,"total":22,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-6569/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1wzgf:"}}