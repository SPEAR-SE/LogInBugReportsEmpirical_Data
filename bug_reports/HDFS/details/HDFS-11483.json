{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13047511","self":"https://issues.apache.org/jira/rest/api/2/issue/13047511","key":"HDFS-11483","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2017-03-02T01:48:34.260+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Mar 02 01:48:34 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-11483/watchers","watchCount":2,"isWatching":false},"created":"2017-03-01T23:48:17.382+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-03-02T01:48:34.260+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12329603","id":"12329603","name":"hdfs"}],"timeoriginalestimate":null,"description":"**Changes after 1fbefe5  on May 8, 2015\nhave not been added to Release tags.**\n\n-Will explain by Specifically talking about \n\"hadoop-hdfs/src/main/bin/start-dfs.sh\"\nhttps://github.com/apache/hadoop/blob/0eb4b513b76bc944c31b15cd6558901ae44bf931/hadoop-hdfs-project/hadoop-hdfs/src/main/bin/start-dfs.sh\n\n- If we switch to Tag 2.7.3 or anything stable or even 3.0\nthis file has not been changed. \nIt has been commited ... but commits have not been tagged.\n\n-Result causes a file that is 5 years old to be included in Final release.\n-Affects many versions..\n\nTo reproduce: \nDownload the latest build from any apache hadoop mirrors and compare the file with the newer version avaliable on git.\n\nby the years, many corrections have been made for this file. \nAgain , look at \"SECONDARY_NAMENODE\" staring configuration.\n\nOn git its : \n\"\n# secondary namenodes (if any)\n\nSECONDARY_NAMENODES=$(\"${HADOOP_HDFS_HOME}/bin/hdfs\" getconf -secondarynamenodes 2>/dev/null)\n\nif [[ \"${SECONDARY_NAMENODES}\" == \"0.0.0.0\" ]]; then\n  SECONDARY_NAMENODES=$(hostname)\nfi\n\nif [[ -n \"${SECONDARY_NAMENODES}\" ]]; then\n  echo \"Starting secondary namenodes [${SECONDARY_NAMENODES}]\"\n  \n  \"${bin}/hadoop-daemons.sh\" \\\n  --config \"${HADOOP_CONF_DIR}\" \\\n  --hostnames \"${SECONDARY_NAMENODES}\" \\\n  start secondarynamenode\nfi\n\n\"\n\nBut on tag 2.7+ Its still : \n\"\nSECONDARY_NAMENODES=$($HADOOP_PREFIX/bin/hdfs getconf -secondarynamenodes 2>/dev/null)\n\nif [ -n \"$SECONDARY_NAMENODES\" ]; then\n  echo \"Starting secondary namenodes [$SECONDARY_NAMENODES]\"\n\n  \"$HADOOP_PREFIX/sbin/hadoop-daemons.sh\" \\\n      --config \"$HADOOP_CONF_DIR\" \\\n      --hostnames \"$SECONDARY_NAMENODES\" \\\n      --script \"$bin/hdfs\" start secondarynamenode\nfi\n\n\"\n\nCommits after May2015 have not been merged !!!\n\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"hdfs-bin files not selected in tags","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ninadpchaudhari","name":"ninadpchaudhari","key":"ninadpchaudhari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ninad Chaudhari","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ninadpchaudhari","name":"ninadpchaudhari","key":"ninadpchaudhari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ninad Chaudhari","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10431","value":"Important","id":"10431"}],"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13047511/comment/15891328","id":"15891328","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ninadpchaudhari","name":"ninadpchaudhari","key":"ninadpchaudhari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ninad Chaudhari","active":true,"timeZone":"Etc/UTC"},"body":"-When we run sbin/start-dfs.sh , even if the the secondary namenode is 0.0.0.0 Its instructed to start...\n\nTo avoid this, protection was added, which is there in recent version,\nbut this file was not tagged to release.\nHence if we download the hadoop tar from mirror and try to execute it,\nit starts secondarynamenode on 0.0.0.0\nwhen it is supposed to switch to localhost","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ninadpchaudhari","name":"ninadpchaudhari","key":"ninadpchaudhari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ninad Chaudhari","active":true,"timeZone":"Etc/UTC"},"created":"2017-03-01T23:52:17.141+0000","updated":"2017-03-01T23:52:17.141+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13047511/comment/15891446","id":"15891446","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"\nI'm not sure I follow.\n\nrelease-3.0.0-alpha2-RC0 s the tag for Apache Hadoop 3.0.0 alpha2.  Looking at https://github.com/apache/hadoop/blob/release-3.0.0-alpha2-RC0/hadoop-hdfs-project/hadoop-hdfs/src/main/bin/start-dfs.sh, it's clearly had changes since May 2015, including several of my own patches.  If we grab the 3.x source and binary distros from the ASF website, it matches.\n\nLooking at the release-2.7.3-RC2 tag and comparing it to branch-2, branch-2.7, and other (relatively) recent Apache Hadoop 2.x tag and branches, the code for start-dfs.sh all match.  \n\nSo this all looks normal, given:\n\n* Apache Hadoop 3.x alpha releases have the newer, incompatible-with-2.x bits.\n\n* There have been no changes made to start-dfs.sh in the branch-2 stream in a very long time, thus code from May 2015 is correct.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2017-03-02T01:48:34.260+0000","updated":"2017-03-02T01:48:34.260+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-11483/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3atov:"}}