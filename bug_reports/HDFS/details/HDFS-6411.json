{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12714605","self":"https://issues.apache.org/jira/rest/api/2/issue/12714605","key":"HDFS-6411","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326696","id":"12326696","description":"2.4.1 bug-fix release","name":"2.4.1","archived":false,"released":true,"releaseDate":"2014-06-30"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-05-20T00:34:41.249+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed May 28 15:16:29 UTC 2014","customfield_12310420":"392918","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_523096273_*|*_1_*:*_1_*:*_523107139_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-05-27T23:11:05.208+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-6411/watchers","watchCount":9,"isWatching":false},"created":"2014-05-15T20:34:21.823+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"6.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325049","id":"12325049","description":"2.2.0 release","name":"2.2.0","archived":false,"released":true,"releaseDate":"2013-10-15"}],"issuelinks":[{"id":"12409300","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12409300","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12716218","key":"HDFS-6445","self":"https://issues.apache.org/jira/rest/api/2/issue/12716218","fields":{"summary":"NFS: Add a log message 'Permission denied' while writing data from read only mountpoint","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12409286","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12409286","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12716219","key":"HDFS-6446","self":"https://issues.apache.org/jira/rest/api/2/issue/12716219","fields":{"summary":"NFS: Different error messages for appending/writing data from read only mount","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12389092","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12389092","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12717100","key":"HDFS-6458","self":"https://issues.apache.org/jira/rest/api/2/issue/12717100","fields":{"summary":"NFS: stale NFS file handle Error for previous mount point","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12388828","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12388828","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12716935","key":"HDFS-6451","self":"https://issues.apache.org/jira/rest/api/2/issue/12716935","fields":{"summary":"NFS should not return NFS3ERR_IO for AccessControlException ","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-02-27T21:15:12.251+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12320727","id":"12320727","name":"nfs"}],"timeoriginalestimate":null,"description":"We use the nfs-hdfs gateway to expose hdfs thru nfs.\n\n0) login as root, run nfs-hdfs gateway as a user, say, nfsserver. \n[root@zhongyi-test-cluster-desktop hdfs]# ls /hdfs\nbackups  hive  mr-history  system  tmp  user\n1) add a user nfs-test: adduser nfs-test(make sure that this user is not a proxyuser of nfsserver\n2) switch to test user: su - nfs-test\n3) access hdfs nfs gateway\n[nfs-test@zhongyi-test-cluster-desktop ~]$ ls /hdfs\nls: cannot open directory /hdfs: Input/output error\nretry:\n[nfs-test@zhongyi-test-cluster-desktop ~]$ ls /hdfs\nls: cannot access /hdfs: Stale NFS file handle\n4) switch back to root and access hdfs nfs gateway\n[nfs-test@zhongyi-test-cluster-desktop ~]$ exit\nlogout\n[root@zhongyi-test-cluster-desktop hdfs]# ls /hdfs\nls: cannot access /hdfs: Stale NFS file handle\n\n\nthe nfsserver log indicates we hit an authorization error in the rpc handler; org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.security.authorize.AuthorizationException): User: nfsserver is not allowed to impersonate nfs-test\nand NFS3ERR_IO is returned, which explains why we see input/output error. \nOne can catch the authorizationexception and return the correct error: NFS3ERR_ACCES to fix the error message on the client side but that doesn't seem to solve the mount hang issue though. When the mount hang happens, it stops printing nfsserver log which makes it more difficult to figure out the real cause of the hang. According to jstack and debugger, the nfsserver seems to be waiting for client requests","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12646622","id":"12646622","filename":"HDFS-6411.002.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-23T22:25:33.856+0000","size":2618,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12646622/HDFS-6411.002.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12646945","id":"12646945","filename":"HDFS-6411.003.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-27T17:33:07.900+0000","size":3331,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12646945/HDFS-6411.003.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12646956","id":"12646956","filename":"HDFS-6411.004.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-27T18:04:38.570+0000","size":4205,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12646956/HDFS-6411.004.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12646114","id":"12646114","filename":"HDFS-6411.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-21T21:52:39.472+0000","size":990,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12646114/HDFS-6411.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12646141","id":"12646141","filename":"HDFS-6411-branch-2.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-22T00:35:24.975+0000","size":3390,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12646141/HDFS-6411-branch-2.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12646582","id":"12646582","filename":"tcpdump-HDFS-6411-Brandon.out","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-23T19:44:23.911+0000","size":530,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12646582/tcpdump-HDFS-6411-Brandon.out"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"393088","customfield_12312823":null,"summary":"nfs-hdfs-gateway mount raises I/O error and hangs when a unauthorized user attempts to access it","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14000306","id":"14000306","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"body":"the probable cause of the bug is that when an unauthorized user attempts to access a file/dir, the namenode throws an authorizationexception, which is eventually caught by nfs server's rpc handler. The rpc handler simply returns an ACCESS3Response object with empty file attributes and non NFS3_OK status which violates the protocol between nfs server and client, causing the client to hang","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-16T21:08:23.223+0000","updated":"2014-05-16T21:08:23.223+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14002641","id":"14002641","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"Looks like the client attribute cache is massed up by the returned file attributes in the response. Remount can remove the stale handle issue, but we should fix the bug too.\n[~zhongyi-altiscale], which platform were you running the test? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-20T00:34:41.249+0000","updated":"2014-05-20T00:34:41.249+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14002714","id":"14002714","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashahab","name":"ashahab","key":"ashahab","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashahab&avatarId=18562","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashahab&avatarId=18562","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashahab&avatarId=18562","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashahab&avatarId=18562"},"displayName":"Abin Shahab","active":true,"timeZone":"America/Los_Angeles"},"body":"[~brandon] The test was run on centos 6.3 and 6.5. We saw the same issue on both.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ashahab","name":"ashahab","key":"ashahab","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ashahab&avatarId=18562","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ashahab&avatarId=18562","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ashahab&avatarId=18562","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ashahab&avatarId=18562"},"displayName":"Abin Shahab","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-20T02:21:47.454+0000","updated":"2014-05-20T02:21:47.454+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14005288","id":"14005288","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"Here is what happened:\n1. supported user mounted the export, say at /my-mount-point. Linux NFS client keeps the related file attributes in cache.\n2. non-supported user tried to access the export starting with an ACCESS call. As [~zhongyi-altiscale] noticed,  NFS gateway returned an empty file attributes for /my-mount-point as part of the ACCESS response when the request failed. \n3. Linux NFS client replaced the cached file attribute with the empty one. Note, the file handle is all zero now.\n4. when the supported user tried to access the mounted directory, Linux NFS client checked the cached file handle of /my-mount-point to see its all zeros and it returns stale-file-handle-error to caller. In this step, the Linux NFS client doesn't send request to NFS server. \n\nWe have no control in what happens in step 4 since it's up to NFS client implementation. Some client implementation might be more tolerate.  For example, I feel MacOS NFS client ignores the file attributes if the call failed (didn't look into its implementation so I could be wrong).\n\nHowever, we should fix step 3 by not sending the empty attribute when the call fails. This is compatible with NFSv3 protocol and could make some NFS clients happy. \n\nI will post a patch soon.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-21T21:51:37.090+0000","updated":"2014-05-21T21:51:37.090+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14005291","id":"14005291","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"[~zhongyi-altiscale] and [~ashahab], I've upload a patch for this issue. It worked for me in my tests. Please give it a try to see if it fixes the problem in your environment.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-21T21:54:03.345+0000","updated":"2014-05-21T21:54:03.345+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14005469","id":"14005469","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~brandonli], I tried your patch on our 2.2 branch but looks like the problem persists: \n[root@alexie-dt ~]# ls /hdfs\nbackups  hive  mr-history  system  tmp  user\n[root@alexie-dt ~]# su test-nfs \n[test-nfs@alexie-dt root]$ ls /hdfs\nls: cannot open directory /hdfs: Input/output error\n[test-nfs@alexie-dt root]$ ls /hdfs\nls: cannot access /hdfs: Stale file handle\n[test-nfs@alexie-dt root]$ ls /hdfs\nls: cannot access /hdfs: Stale file handle\n[test-nfs@alexie-dt root]$ exit\nexit\n[root@alexie-dt ~]# ls /hdfs\nls: cannot access /hdfs: Stale file handle\n[root@alexie-dt ~]# ls /hdfs\nls: cannot access /hdfs: Stale file handle\n\nI've uploaded my 2.2 patch, can you please take a look and try it in your env? \nAlso in your tests, I assume you are seeing \n\"ls: cannot open directory /hdfs: Input/output error\" and the NFS handle is still responding, right?\nI believe \"Permission denied\" is more appropriate here, what do you think?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-22T00:42:02.139+0000","updated":"2014-05-22T00:42:02.139+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007442","id":"14007442","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"That's interesting. Here is what I see on a CentOS6 VM after applying the patch.\n{noformat}\n[root@host2 brandon]# mount -t nfs -o vers=3,proto=tcp,nolock,soft,noacl 10.11.3.67:/ tmp\n[root@host2 brandon]# ls tmp\nforall\n[root@host2 brandon]# su brandon\n[brandon@host2 ~]$ ls tmp\nls: cannot open directory tmp: Input/output error\n[brandon@host2 ~]$ exit\nexit\n[root@host2 brandon]# ls tmp\nforall\n[root@host2 brandon]# \n{noformat}\n\n[~zhongyi-altiscale], could you collect and upload the network trace so we get more details?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-23T17:43:22.032+0000","updated":"2014-05-23T17:43:22.032+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007590","id":"14007590","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"body":"tcpdump on altiscale's 2.2 branch + Brandon's fix in ACCESS3Response\ntcpdump command used:\ntcpdump -i lo -w tcpdump-HDFS-6411-Brandon.out\n\nthe commands I used for test:\n[root@alexie-dt hdfs]# ls /hdfs\nbackups  hive  mr-history  system  tmp  user\n[root@alexie-dt hdfs]# su test-nfs \n[test-nfs@alexie-dt hdfs]$ ls /hdfs\nls: cannot open directory /hdfs: Input/output error\n[test-nfs@alexie-dt hdfs]$ ls /hdfs\nls: cannot access /hdfs: Stale file handle\n[test-nfs@alexie-dt hdfs]$ exit\nexit\n[root@alexie-dt hdfs]# ls /hdfs\nls: cannot access /hdfs: Stale file handle","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-23T19:44:23.915+0000","updated":"2014-05-23T19:44:23.915+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007700","id":"14007700","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"[~zhongyi-altiscale], I looked the trace you uploaded. According to the trace, the patch was in the build you tested.\nMaybe the test didn't take the new jar file?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-23T21:00:47.447+0000","updated":"2014-05-23T21:00:47.447+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007775","id":"14007775","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks Brandon, after updating the hadoop-nfs-2.2.0.jar the problem is now resolved. \nbut do you think the error message\n\"ls: cannot open directory /hdfs: Permission denied\" \nis better than the current message\n\"ls: cannot open directory /hdfs: Input/output error\" in this case?\nwith your fix, we can do this easily by examining the exception type and set the status to NFS3ERR_ACCES","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-23T22:09:54.156+0000","updated":"2014-05-23T22:09:54.156+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007790","id":"14007790","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"I agree that \"Permission denied\" is a better message than \"Input/output error\". I've uploaded a new patch which returns NFS3ERR_PERM. [~zhongyi-altiscale], please let me know if the new patch works as expected in your environment.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-23T22:27:13.564+0000","updated":"2014-05-23T22:27:13.564+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007818","id":"14007818","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Brandon, \n\nI think you missed \nimport org.apache.hadoop.ipc.RemoteException;\nbecause the patch doesn’t compile and complains about unable to find symbol at line 494\n\nThanks!\n-Zhongyi\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-23T22:47:03.317+0000","updated":"2014-05-23T22:47:03.317+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007833","id":"14007833","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"It compiled for me. This import statement is already in RpcProgramNfs3.java and the patch doesn't change that.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-23T22:55:27.537+0000","updated":"2014-05-23T22:55:45.077+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007845","id":"14007845","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12646622/HDFS-6411.002.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-nfs hadoop-hdfs-project/hadoop-hdfs-nfs.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/6962//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/6962//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-23T23:07:04.380+0000","updated":"2014-05-23T23:07:04.380+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007848","id":"14007848","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"body":"I guess it was added between 2.2 and trunk, sorry for the false alarm\nthe message is different though:I got \nls: cannot open directory /hdfs: Operation not permitted\nI think \"ls: cannot open directory /hdfs: Permission denied\" maps to NFS3ERR_ACCES","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-23T23:09:08.440+0000","updated":"2014-05-23T23:09:08.440+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007863","id":"14007863","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"{quote}I guess it was added between 2.2 and trunk{quote}\nsorry, I forgot you are using 2.2.\n\n{quote}ls: cannot open directory /hdfs: Permission denied\" maps to NFS3ERR_ACCES{quote}\nThe \"Permission denied\" is from the error status NFS3ERR_PERM.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-23T23:23:29.901+0000","updated":"2014-05-23T23:23:29.901+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007900","id":"14007900","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"body":"maybe it got changed as well between versions but after applying the new patch, I got \"Operation not permitted\" error\nand in my earlier tests using my 2.2 patch, I got \"Permission denied\" error msg","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-23T23:54:14.518+0000","updated":"2014-05-23T23:54:14.518+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007911","id":"14007911","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"At protocol level, we don't have much control about how error status is translated into user-readable error message. The two error messages both look ok to me, at lease better than \"..i/o error\" :-). ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-24T00:06:59.500+0000","updated":"2014-05-24T00:06:59.500+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007922","id":"14007922","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"body":"below are the definition in Nfs3Status.java\n\n  /**\n   * The operation was not allowed because the caller is either not a\n   * privileged user (root) or not the owner of the target of the operation.\n   */\n  public final static int NFS3ERR_PERM = 1;\n\n  /**\n   * Permission denied. The caller does not have the correct permission to\n   * perform the requested operation. Contrast this with NFS3ERR_PERM, which\n   * restricts itself to owner or privileged user permission failures.\n   */\n  public final static int NFS3ERR_ACCES = 13;\n\nlooks like the first one is more of the user privilege error but in our case, \nit's checking the user name against the proxy user/group list, \nwe don't have the standard privilege checking on the namenode, \nwhich leads me to think NFS3ERR_ACCES is a better choice here, \n\nbut like you said, this is more of a cosmetic thing, thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-24T00:22:35.045+0000","updated":"2014-05-24T00:22:35.045+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007935","id":"14007935","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"NFS3ERR_ACCES was originally used and the shell gives error message \"i/o error\" which is misleading.\n\nThe caller application may not respect the exact meaning of NFS error status. Looks like NFS3ERR_PERM could trigger a better error message to end user. \n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-24T00:47:45.812+0000","updated":"2014-05-24T00:47:45.812+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007939","id":"14007939","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"body":"\n\nactually the original error code was NFS3ERR_IO, which maps to “i/o error”\nNSF3ERR_PERM maps to \"Operation not permitted”\nand NFS3ERR_ACCES maps to “Permission denied”\nI guess in terms of language the two messages sound like synonyms  to each other, \nI was just wondering if there is any implicit meanings in the UNIX context between the two. If there is no such a thing then either is OK\n\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-24T00:55:03.447+0000","updated":"2014-05-24T00:55:03.447+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007978","id":"14007978","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"In general, the messages do have sort of specific meanings from an operations perspective:\n\n\"Permission denied\" = \"I might be able to chown or chmod this object and then get access.\"\n\n\"Operation not permitted\" = \"There is a system setting or control in the way such that even chown or chmod isn't going to fix this access problem.\"\n\nIf you reference the relevant RFCs (http://tools.ietf.org/html/rfc1813, specifically) , you'll note that it says that \"NFS3ERR_PERM, which restricts itself to owner or privileged user permission failures.\"\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2014-05-24T03:01:55.458+0000","updated":"2014-05-24T03:01:55.458+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14007994","id":"14007994","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12646622/HDFS-6411.002.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-nfs hadoop-hdfs-project/hadoop-hdfs-nfs.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/6968//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/6968//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-24T03:44:27.100+0000","updated":"2014-05-24T03:44:27.100+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14009971","id":"14009971","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"Thank you, [~aw] and [~zhongyi-altiscale]. \nThe error massage printed by shell is always \"permission denied\" in my tests with either NFS3ERR_ACCES or NFS3ERR_PERM.   \n\nRegardless, I agree that NFS3ERR_ACCES is a better error status than NFS3ERR_PERM in this case. I've updated a new patch for the update. \n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-27T17:50:37.626+0000","updated":"2014-05-27T17:50:37.626+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14009985","id":"14009985","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"body":"[~brandonli], can you please also add an \"else\" clause in the getattr function, like you did in access, just in case the unwrapped exception happens to be something other than AuthorizationException? \nthere is another related issue with fsstat where NFS3ERR_IO could also be replaced with NFS3_ACCESS","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-27T17:54:46.292+0000","updated":"2014-05-27T17:54:46.292+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14010008","id":"14010008","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12646945/HDFS-6411.003.patch\n  against trunk revision .\n\n    {color:red}-1 patch{color}.  Trunk compilation may be broken.\n\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/6984//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-27T18:04:02.334+0000","updated":"2014-05-27T18:04:02.334+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14010011","id":"14010011","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"Uploaded the patch to address Zhongyi's comments. Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-27T18:05:42.469+0000","updated":"2014-05-27T18:05:42.469+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14010034","id":"14010034","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12646945/HDFS-6411.003.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-nfs hadoop-hdfs-project/hadoop-hdfs-nfs.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/6982//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/6982//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-27T18:16:41.893+0000","updated":"2014-05-27T18:16:41.893+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14010090","id":"14010090","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12646956/HDFS-6411.004.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-common-project/hadoop-nfs hadoop-hdfs-project/hadoop-hdfs-nfs.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/6985//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/6985//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-27T18:42:08.317+0000","updated":"2014-05-27T18:42:08.317+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14010214","id":"14010214","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"[~zhongyi-altiscale], how does the new patch look?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-27T20:19:10.556+0000","updated":"2014-05-27T20:19:10.556+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14010217","id":"14010217","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"body":"[~brandonli], it looks good, but I haven't got a chance to test it out since my VM is broken today, will run the test cases once my VM is back to normal, will let you know by then, thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-27T20:23:03.716+0000","updated":"2014-05-27T20:23:03.716+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14010267","id":"14010267","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~brandonli], I've tested it on my VM and looks like the problem is fixed\n\nHowever I did see something interesting\n[alti-test-02@alexie-dt root]$ mkdir /hdfs/tmp/dir\nmkdir: cannot create directory `/hdfs/tmp/dir': Permission denied\n[alti-test-02@alexie-dt root]$ rmdir /hdfs/tmp\nrmdir: failed to remove `/hdfs/tmp': Permission denied\n[alti-test-02@alexie-dt root]$ rmdir /hdfs/\nrmdir: failed to remove `/hdfs/': Permission denied\n[alti-test-02@alexie-dt root]$ ls /hdfs\nls: cannot access /hdfs: Stale file handle\n\nbut once I log out of alti-test-02 user back to root, the NFS handle is still working\n[root@alexie-dt ~]# ls /hdfs\nbackups  hive  mr-history  system  tmp  user\n\nand I retried these steps, the problem goes away (i.e. I didn't see the Stale file handle again), \nso unless there is some consistent repro steps and if the handle is hang again, \nI won't worry about that","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-27T21:03:04.070+0000","updated":"2014-05-27T21:03:04.070+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14010439","id":"14010439","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"body":"The current patch looks good to me. +1\n\nOne issue of the current code is that we may also want to catch the AccessControlException from the HDFS calls, and return NFS3ERR_PERM instead of NFS3ERR_IO for it. But I guess we can do it in a separate jira.\n\nAnother possible future improvement is that we can have a single class/method for the common exception handling process, instead of repeating the same exception handling process in different NFS methods.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-27T22:41:23.677+0000","updated":"2014-05-27T22:41:23.677+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14010455","id":"14010455","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"Thank you, [~jingzhao] for the review. I've filed HDFS-6451 to track the improvement you described.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-27T22:51:35.581+0000","updated":"2014-05-27T22:51:35.581+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14010472","id":"14010472","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~jingzhao], it's definitely good to have a single exception handler instead of replicating the same code everywhere, but since each server procedure (ACCESS, GETATTR, FSSTAT, etc) might have their private data that needs to be written out, the child NFS3Response class still need to overload the writeHeaderAndResponse anyways\nfor AccessControlException, do you mean we need to catch it together with AuthorizationException in RpcProgramNfs3.java? \nor do you mean we need to examine the whole codebase looking for every function that could potentially throw AccessControlException, \nand make sure the error code is set correctly in the catch clause?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zhongyi-altiscale","name":"zhongyi-altiscale","key":"zhongyi-altiscale","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=zhongyi-altiscale&avatarId=19849","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=zhongyi-altiscale&avatarId=19849","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=zhongyi-altiscale&avatarId=19849","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=zhongyi-altiscale&avatarId=19849"},"displayName":"Zhongyi Xie","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-27T23:02:58.945+0000","updated":"2014-05-27T23:02:58.945+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14010479","id":"14010479","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"Thank you, guys. I've committed the patch.\nLet's move further discussions for the code optimization to HDFS-6451.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-27T23:10:34.317+0000","updated":"2014-05-27T23:10:34.317+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14010486","id":"14010486","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-trunk-Commit #5613 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/5613/])\nHDFS-6411. nfs-hdfs-gateway mount raises I/O error and hangs when a unauthorized user attempts to access it. Contributed by Brandon Li (brandonli: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1597895)\n* /hadoop/common/trunk/hadoop-common-project/hadoop-nfs/src/main/java/org/apache/hadoop/nfs/nfs3/response/ACCESS3Response.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs-nfs/src/main/java/org/apache/hadoop/hdfs/nfs/nfs3/RpcProgramNfs3.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-27T23:15:47.000+0000","updated":"2014-05-27T23:15:47.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14011023","id":"14011023","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Yarn-trunk #566 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/566/])\nHDFS-6411. nfs-hdfs-gateway mount raises I/O error and hangs when a unauthorized user attempts to access it. Contributed by Brandon Li (brandonli: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1597895)\n* /hadoop/common/trunk/hadoop-common-project/hadoop-nfs/src/main/java/org/apache/hadoop/nfs/nfs3/response/ACCESS3Response.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs-nfs/src/main/java/org/apache/hadoop/hdfs/nfs/nfs3/RpcProgramNfs3.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-28T11:20:53.589+0000","updated":"2014-05-28T11:20:53.589+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14011104","id":"14011104","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Hdfs-trunk #1757 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1757/])\nHDFS-6411. nfs-hdfs-gateway mount raises I/O error and hangs when a unauthorized user attempts to access it. Contributed by Brandon Li (brandonli: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1597895)\n* /hadoop/common/trunk/hadoop-common-project/hadoop-nfs/src/main/java/org/apache/hadoop/nfs/nfs3/response/ACCESS3Response.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs-nfs/src/main/java/org/apache/hadoop/hdfs/nfs/nfs3/RpcProgramNfs3.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-28T13:55:32.687+0000","updated":"2014-05-28T13:55:32.687+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12714605/comment/14011184","id":"14011184","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk #1784 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1784/])\nHDFS-6411. nfs-hdfs-gateway mount raises I/O error and hangs when a unauthorized user attempts to access it. Contributed by Brandon Li (brandonli: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1597895)\n* /hadoop/common/trunk/hadoop-common-project/hadoop-nfs/src/main/java/org/apache/hadoop/nfs/nfs3/response/ACCESS3Response.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs-nfs/src/main/java/org/apache/hadoop/hdfs/nfs/nfs3/RpcProgramNfs3.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-28T15:16:29.019+0000","updated":"2014-05-28T15:16:29.019+0000"}],"maxResults":40,"total":40,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-6411/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1vntr:"}}