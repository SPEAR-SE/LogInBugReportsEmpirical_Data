{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12596332","self":"https://issues.apache.org/jira/rest/api/2/issue/12596332","key":"HDFS-3579","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12322472","id":"12322472","description":"2.0.2-alpha release","name":"2.0.2-alpha","archived":false,"released":true,"releaseDate":"2012-10-09"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-07-19T18:52:51.016+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Aug 07 13:08:34 UTC 2012","customfield_12310420":"240971","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_1563428691_*|*_1_*:*_1_*:*_1802457970_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-08-06T21:07:20.429+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-3579/watchers","watchCount":8,"isWatching":false},"created":"2012-06-28T22:09:13.868+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12322465","id":"12322465","description":"2.0.1-alpha release","name":"2.0.1-alpha","archived":false,"released":true,"releaseDate":"2012-07-25"}],"issuelinks":[{"id":"12371992","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12371992","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12464504","key":"HDFS-1154","self":"https://issues.apache.org/jira/rest/api/2/issue/12464504","fields":{"summary":"libhdfs::hdfsExists should return different value in case of 1. error and 2. file does not exist","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12363937","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12363937","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12630627","key":"HDFS-4467","self":"https://issues.apache.org/jira/rest/api/2/issue/12630627","fields":{"summary":"Segmentation fault in libhdfs while connecting to HDFS, in an application populating Hive Tables","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12355304","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12355304","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12408281","key":"HDFS-465","self":"https://issues.apache.org/jira/rest/api/2/issue/12408281","fields":{"summary":"in branch-1, libhdfs makes jni lib calls after setting errno in some places","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12355667","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12355667","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12599921","key":"HDFS-3710","self":"https://issues.apache.org/jira/rest/api/2/issue/12599921","fields":{"summary":"libhdfs misuses O_RDONLY/WRONLY/RDWR","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12355668","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12355668","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12600756","key":"HDFS-3742","self":"https://issues.apache.org/jira/rest/api/2/issue/12600756","fields":{"summary":"libhdfs symbol visibility issues","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-07-12T22:54:32.085+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313126","id":"12313126","name":"libhdfs","description":"The C++ interface to HDFS."}],"timeoriginalestimate":null,"description":"libhdfs does not consistently handle exceptions.  Sometimes we don't free the memory associated with them (memory leak).  Sometimes we invoke JNI functions that are not supposed to be invoked when an exception is active.\n\nRunning a libhdfs test program with -Xcheck:jni shows the latter problem clearly:\n{code}\nWARNING in native method: JNI call made with exception pending\nWARNING in native method: JNI call made with exception pending\nWARNING in native method: JNI call made with exception pending\nWARNING in native method: JNI call made with exception pending\nWARNING in native method: JNI call made with exception pending\nException in thread \"main\" java.io.IOException: ...\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12322472","id":"12322472","description":"2.0.2-alpha release","name":"2.0.2-alpha","archived":false,"released":true,"releaseDate":"2012-10-09"}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12537225","id":"12537225","filename":"HDFS-3579.004.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-07-19T18:47:48.641+0000","size":141030,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12537225/HDFS-3579.004.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12537283","id":"12537283","filename":"HDFS-3579.005.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-07-20T01:29:27.662+0000","size":139811,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12537283/HDFS-3579.005.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12538632","id":"12538632","filename":"HDFS-3579.006.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-07-31T23:20:09.193+0000","size":142674,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12538632/HDFS-3579.006.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"4978","customfield_12312823":null,"summary":"libhdfs: fix exception handling","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13418568","id":"13418568","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"This change fixes exception handling in libhdfs.\n\nIt establishes the convention that we clear pending exceptions as soon as they are raised.  We never assume that the caller of the function will perform this cleanup-- the function itself must do it.  This is important to do because when exceptions are pending in a thread, most JNI calls cannot be made (with the exception of DeleteLocalReference and a few others).  The caller of the function is responsible for freeing the local reference to the exception, if one was returned.\n\nThis clears up the warnings about JNI calls being made while exceptions are pending.  It also fixes many, many cases where we create a local reference to an exception and then never dispose of it-- one source of memory leaks in long-running libhdfs-users like fuse_dfs.\n\nAlso fix some errno problems that could lead to errno not being set, or being set to something incorrect.  Most functions can clobber the value of errno.  So when returning errno from a libhdfs function, the assignment to errno should be literally the last statement executed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-07-19T18:47:48.669+0000","updated":"2012-07-19T18:47:48.669+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13418572","id":"13418572","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12537225/HDFS-3579.004.patch\n  against trunk revision .\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/2868//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-19T18:52:51.016+0000","updated":"2012-07-19T18:52:51.016+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13418861","id":"13418861","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"rebase on trunk","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-07-20T01:29:27.685+0000","updated":"2012-07-20T01:29:27.685+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13418929","id":"13418929","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12537283/HDFS-3579.005.patch\n  against trunk revision .\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:\n\n                  org.apache.hadoop.hdfs.server.blockmanagement.TestBlocksWithNotEnoughRacks\n                  org.apache.hadoop.hdfs.server.namenode.metrics.TestNameNodeMetrics\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/2874//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/2874//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2012-07-20T05:34:38.890+0000","updated":"2012-07-20T05:34:38.890+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13426166","id":"13426166","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"body":"{code}\n...\n+    jvalue jVal;\n+\n+    jthrowable jthr = classNameOfObject(exc, env, &className);\n+    if (jthr) {\n{code}\nthe blank line should be after the declaration of jthr.\n{code}\n+        fprintf(stderr, \"PrintExceptionAndFree: error determining class name \"\n+            \"of exception!\");\n{code}\nadd a \\n to this printf.  If it were me I would replace all the surprised \"!\"s with \".\" but I am not going to insist on unexcitifying the error messages.\n{code}\n+        fprintf(stderr, \" error: (no exception)\");\n{code}\nanother missing \\n.\n{code}\n-        constructNewObjectOfClass(env, NULL, \"org/apache/hadoop/fs/Path\",\n+    jthr = constructNewObjectOfClass(env, &jPath, \"org/apache/hadoop/fs/Path\",\n                                   \"(Ljava/lang/String;)V\", jPathString);\n{code}\nindent the continuation line to match the (.\n{code}\n+    jthr = newCStr(env, jRet, val);\n+    if (jthr)\n         goto done;\n done:\n{code}\nhaving a \"goto done\" on the line before \"done:\" is a bit confusing.  I'd just drop it.\n{code}\n--- hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/jni_helper.h\n+++ hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/jni_helper.h\n...\n+void destroyLocalReference(JNIEnv *env, jobject jObject);\n{code}\nSince this is external linkage C API, I think we need to use a reserved namespace prefix to avoid breaking outside code.  So, make this hdfsDestroyLocalReference perhaps?  This is a large change, and this is newly exposed code, so that change can be done in a separate jira.\n\nAn alternate fix, if we only support a .so and don't ship a .a, is to use a linker script to control symbol visibility.\n\nBut one way or another we need to make sure we have sanitary symbol table usage.\n\n{code}\n+    if (jthr) {\n+        ret = printExceptionAndFree(env, jthr, PRINT_EXC_ALL,\n+            \"hdfsDisconnect: org.apache.hadoop.fs.FileSystem::close\");\n{code}\nI don't think :: is right for Java?  I think it should be \"org.apache.hadoop.fs.FileSystem#close\".\n\nPlease check all the printExceptionAndFree calls and verify that they are consistent, I see some with and some without the org.class.path.  I don't care what standard, but I think \"cFuncName: org.class.path#method\" is the right string unless there's a better idea.\n\n{code}\n     //bufferSize\n     if (!bufferSize) {\n{code}\nPlease delete this useless comment. (Not your code, but you're editing right here, let's just fix it.)\n\n{code}\n     }  else if ((flags & O_WRONLY) && (flags & O_APPEND)) {\n+        // WRITE/APPEND?\n+       jthr = invokeMethod(env, &jVal, INSTANCE, jFS, HADOOP_FS,\n{code}\nThere's a bunch of funky whitespace here, let's fix it.  \"}  else\" has an extra space, and I think the \"// WRITE\" is indented one space too far.\n{code}\n+    file = calloc(1, sizeof(struct hdfsFile_internal));\n{code}\nI find {{file = calloc(1, sizeof *file);}} easier to convince myself of, but I don't know if we have a local style guideline on this point?\n{code}\n+    if ((flags & O_WRONLY) == 0) {\n{code}\nThis is wrong per HDFS-3710. (Many occurrences of this pattern.)  No need to fix the existing ones outside of the code you're touching, but please don't add more.\n\nmore to come in next comment...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-07-31T22:05:33.780+0000","updated":"2012-07-31T22:05:33.780+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13426212","id":"13426212","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"* rebase on trunk\n\n* fix whitespace\n\n* NOPRINT_EXC_ILLEGAL_ARGUMENT should be 0x10\n\n* get rid of \"typedef jvalue RetVal\"-- it provides no value beyond just using jvalue directly\n\n* Use # instead of :: to describe Java methods\n\n* don't restate the long name of java classes in error messages-- the exceptions themselves contain that information, so it's just visual clutter\n\n* newRuntimeError is declared in exception.h, so it doesn't need to also be declared in jni_helper.h","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-07-31T23:20:09.234+0000","updated":"2012-07-31T23:20:09.234+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13426214","id":"13426214","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the review, Andy.  I'm looking forward to the next comment.\n\nbq. [O_WRONLY discussion]\n\nI held off on the O_WRONLY fixes, since we have HDFS-3710 open for that.  What I've done here is just move the code, not add any new (mis)uses.\n\nbq. [linker script discussion]\n\nYeah, HDFS-3742 is open for this.\n\nI tried to fix as much whitespace as I could; I'm sure there's still funky stuff lingering somewhere.  We can always circle back on that later, though-- as long as this patch moves things in the right direction.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-07-31T23:23:55.217+0000","updated":"2012-07-31T23:23:55.217+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13426253","id":"13426253","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12538632/HDFS-3579.006.patch\n  against trunk revision .\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed unit tests in hadoop-hdfs-project/hadoop-hdfs.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/2932//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/2932//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-01T00:52:59.333+0000","updated":"2012-08-01T00:52:59.333+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13426262","id":"13426262","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"body":"{code}\n@@ -870,15 +812,12 @@ int hdfsCloseFile(hdfsFS fs, hdfsFile file)\n-    //Parameters\n-    jobject jStream = (jobject)(file ? file->file : NULL);\n...\n+    (*env)->DeleteGlobalRef(env, file->file);\n     free(file);\n-    (*env)->DeleteGlobalRef(env, jStream);\n{code}\nLet's preserve the interface that {{hdfsFile file}} can be NULL without causing SEGV. Just toss in a {{if (file == NULL) return -1;}} near the top.\n\n{code}\n+    jthr = invokeMethod(env, &jVal, INSTANCE, jInputStream, HADOOP_ISTRM,\n                                \"read\", \"([B)I\", jbRarray);\n...\n+    if (jVal.i < 0) {\n+        // EOF\n+        destroyLocalReference(env, jbRarray);\n+        return 0;\n+    } else if (jVal.i == 0) {\n+        destroyLocalReference(env, jbRarray);\n+        errno = EINTR;\n+        return -1;\n{code}\nIs this correct?  FSDataInputStream#read returns -1 on EOF and 0 on EINTR?  That's special.  I see docs for the -1 case, but I don't see anywhere that the 0 could come from?\n\n{code}\n tSize hdfsPread(hdfsFS fs, hdfsFile f, tOffset position,\n                 void* buffer, tSize length)\n {\n-    // JAVA EQUIVALENT:\n-    //  byte [] bR = new byte[length];\n-    //  fis.read(pos, bR, 0, length);\n{code}\n\nI find these JAVA EQUIVALENT comments to be very helpful, could we keep them around?  so long as they're accurate, I mean.  If they're misleading then deleting is correct.\n{code}\n+    if (jthr) {\n+        errno = printExceptionAndFree(env, jthr, PRINT_EXC_ALL,\n+            \"hdfsTell: org.apache.hadoop.fs.%s::getPos\",\n+            ((f->type == INPUT) ? \"FSDataInputStream\" :\n+                                 \"FSDataOutputStream\"));\n{code}\nPlease use {{interface}} here rather than recapitulating its ternary.\n\nmore review to come ... two-thirds done now ...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-01T01:12:55.050+0000","updated":"2012-08-01T01:12:55.050+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13426291","id":"13426291","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. I find these JAVA EQUIVALENT comments to be very helpful, could we keep them around? so long as they're accurate, I mean. If they're misleading then deleting is correct.\n\nok.\n\nbq. Please use interface here rather than recapitulating its ternary.\n\nIt was done to avoid printing out \"org/apache/hadoop/fs/FSDataInputStream\" etc. since- as you commeted above-- it's nicer to print something shorter.  I don't have a strong feeling about it either way, but I suspect it's easier just to redo the ternary here.\n\nbq. Is this correct? FSDataInputStream#read returns -1 on EOF and 0 on EINTR? That's special. I see docs for the -1 case, but I don't see anywhere that the 0 could come from?\n\nThe standard Java convention is that -1 means EOF, and 0 is just a short read.  hdfsRead, on the other hand, follows the UNIX convention.  See HADOOP-1582 for more details.\n\nbq. Let's preserve the interface that hdfsFile file can be NULL without causing SEGV. Just toss in a if (file == NULL) return -1; near the top.\n\nThe whole thing is kind of messy.  Passing a NULL pointer to hdfsClose is a user error, yet we check for it for some reason.\n\nThere's no way to actually *get* an hdfsFile which has file->type UNINITIALIZED.  Every hdfsOpen path either leads to returning null, or returning a file of type INPUT or OUTPUT.  There's no way to close a file that hasn't been opened either.  Similarly, there's no way to get a file where file->file is NULL.\n\nThe original code didn't check for file->file being NULL either (look at it carefully, you'll see what I mean).\n\ntl;dr:  I didn't change the behavior here.  But someone should eventually.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-01T02:42:39.568+0000","updated":"2012-08-01T02:42:39.568+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13426805","id":"13426805","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. There's no way to actually get an hdfsFile which has file->type UNINITIALIZED.\n\nThat's not what I was asking for. I want us to deal with {{file == NULL}}, it is a simple user error, no need to SEGV on it.\n\nIf {{file->file == NULL}} or {{file->type == UNINITIALIZED}} the data structures are corrupt and we can SEGV all we want.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-01T18:37:10.535+0000","updated":"2012-08-01T18:37:10.535+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13426932","id":"13426932","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq.  I want us to deal with file == NULL\n\nThe latest patch has this in hdfsClose:\n{code}\n    //Sanity check\n    if (!file || file->type == UNINITIALIZED) {\n        errno = EBADF;\n        return -1;\n    }\n{code}\n\nSo it should set errno = EBADF and return -1, just as before.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-01T21:41:44.197+0000","updated":"2012-08-01T21:41:44.197+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13429264","id":"13429264","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"body":"I've taken a look at the patch and it looks good to me. I agree that this is some good cleanup to do. Thanks a lot, Andy, for your very thorough review.\n\nOne question before I commit this patch, though: can you please describe what sort of testing you did to verify this change? Are the warnings about pending exceptions now gone from the logs? Were you able to ensure that memory is no longer leaked when exceptions are thrown?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-06T17:00:06.454+0000","updated":"2012-08-06T17:00:06.454+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13429408","id":"13429408","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Are the warnings about pending exceptions now gone from the logs? \n\nYes.  Running a before and after with LIBHDFS_OPTS=\"-Xcheck:jni -Xcheck:nabounds\" confirms that the messages about \"JNI call made with exception pending\" are gone after the patch.  The test I ran was test_libhdfs_threaded.\n\nI also ran test_fuse_dfs and verified that it passed successfully.  That test also exercises libhdfs, albeit in a slightly different way.\n\nWe need a longer running test that exercises more failure conditions to fully establish that all memory leaks are fixed.  I think writing such a test is a little bit of out scope for this JIRA, but it's definitely something we should do in the future.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-06T20:44:47.436+0000","updated":"2012-08-06T20:44:47.436+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13429422","id":"13429422","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. We need a longer running test that exercises more failure conditions to fully establish that all memory leaks are fixed. I think writing such a test is a little bit of out scope for this JIRA, but it's definitely something we should do in the future.\n\nDefinitely agree that writing such a test is well out of scope for this JIRA, but would it be possible to, for example, run test_fuse_dfs with valgrind? (No need to do that for this JIRA. This is good cleanup regardless, and we can fix any other memory leaks found in a different JIRA.)\n\n{quote}\nYes. Running a before and after with LIBHDFS_OPTS=\"-Xcheck:jni -Xcheck:nabounds\" confirms that the messages about \"JNI call made with exception pending\" are gone after the patch. The test I ran was test_libhdfs_threaded.\nI also ran test_fuse_dfs and verified that it passed successfully. That test also exercises libhdfs, albeit in a slightly different way.\n{quote}\n\nCool, thanks for doing that.\n\n+1, I'll go ahead and commit this patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-06T20:55:41.274+0000","updated":"2012-08-06T20:55:41.274+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13429427","id":"13429427","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks, atm.  I have tried running valgrind on fuse_dfs in the past.  It doesn't really work-- I get tons of false positives.  I think there's a general problem running valgrind with JNI code.  I did try adding more and more stuff to the \"exclude lists,\" but it didn't seem to work.  Maybe someone more knowledgeable on this topic can come up with a workaround.\n\nI'm also confused about whether valgrind can identify memory leaks of memory managed by the JVM.  I suspect that the answer is \"no,\" which would mean that the local reference leaks fixed by the patch would have been invisible to valgrind anyway.  As far as I know, valgrind only deals with memory allocated via {{malloc}}-- although I'm happy to be corrected on this topic if someone has more info ( ? )","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-06T21:03:02.253+0000","updated":"2012-08-06T21:03:02.253+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13429430","id":"13429430","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. I have tried running valgrind on fuse_dfs in the past. It doesn't really work-- <snip>\n\nGot it, thanks for the explanation.\n\nI've just committed this to trunk and branch-2. Thanks a lot for the contribution, Colin. Fixes like this are yeoman's work. Thanks for doing it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-06T21:07:08.209+0000","updated":"2012-08-06T21:07:08.209+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13429443","id":"13429443","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Hdfs-trunk-Commit #2621 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2621/])\n    Add two new files missed by last commit of HDFS-3579. (Revision 1370017)\nHDFS-3579. libhdfs: fix exception handling. Contributed by Colin Patrick McCabe. (Revision 1370015)\n\n     Result = SUCCESS\natm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1370017\nFiles : \n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/exception.c\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/exception.h\n\natm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1370015\nFiles : \n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/CMakeLists.txt\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/hdfs.c\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/hdfs.h\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/jni_helper.c\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/jni_helper.h\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/native_mini_dfs.c\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-06T21:17:15.460+0000","updated":"2012-08-06T21:17:15.460+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13429445","id":"13429445","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Common-trunk-Commit #2556 (See [https://builds.apache.org/job/Hadoop-Common-trunk-Commit/2556/])\n    Add two new files missed by last commit of HDFS-3579. (Revision 1370017)\nHDFS-3579. libhdfs: fix exception handling. Contributed by Colin Patrick McCabe. (Revision 1370015)\n\n     Result = SUCCESS\natm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1370017\nFiles : \n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/exception.c\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/exception.h\n\natm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1370015\nFiles : \n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/CMakeLists.txt\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/hdfs.c\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/hdfs.h\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/jni_helper.c\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/jni_helper.h\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/native_mini_dfs.c\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-06T21:17:56.467+0000","updated":"2012-08-06T21:17:56.467+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13429481","id":"13429481","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Mapreduce-trunk-Commit #2575 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/2575/])\n    Add two new files missed by last commit of HDFS-3579. (Revision 1370017)\nHDFS-3579. libhdfs: fix exception handling. Contributed by Colin Patrick McCabe. (Revision 1370015)\n\n     Result = FAILURE\natm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1370017\nFiles : \n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/exception.c\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/exception.h\n\natm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1370015\nFiles : \n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/CMakeLists.txt\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/hdfs.c\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/hdfs.h\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/jni_helper.c\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/jni_helper.h\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/native_mini_dfs.c\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-06T22:05:16.558+0000","updated":"2012-08-06T22:05:16.558+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12596332/comment/13430336","id":"13430336","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Hdfs-trunk #1128 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1128/])\n    Add two new files missed by last commit of HDFS-3579. (Revision 1370017)\nHDFS-3579. libhdfs: fix exception handling. Contributed by Colin Patrick McCabe. (Revision 1370015)\n\n     Result = SUCCESS\natm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1370017\nFiles : \n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/exception.c\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/exception.h\n\natm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1370015\nFiles : \n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/CMakeLists.txt\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/hdfs.c\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/hdfs.h\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/jni_helper.c\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/jni_helper.h\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/native/libhdfs/native_mini_dfs.c\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-07T13:08:34.656+0000","updated":"2012-08-07T13:08:34.656+0000"}],"maxResults":21,"total":21,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-3579/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i017gn:"}}