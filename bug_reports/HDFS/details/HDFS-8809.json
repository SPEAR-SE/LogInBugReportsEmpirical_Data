{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12848437","self":"https://issues.apache.org/jira/rest/api/2/issue/12848437","key":"HDFS-8809","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329057","id":"12329057","description":"2.8.0 release","name":"2.8.0","archived":false,"released":true,"releaseDate":"2017-03-22"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335732","id":"12335732","description":"3.0.0-alpha1 release","name":"3.0.0-alpha1","archived":false,"released":true,"releaseDate":"2016-09-03"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-07-23T16:16:34.621+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Aug 21 22:56:07 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_2394944952_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_103411146","customfield_12312321":null,"resolutiondate":"2015-08-20T23:33:48.512+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-8809/watchers","watchCount":14,"isWatching":false},"created":"2015-07-23T01:34:32.496+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327584","id":"12327584","description":"2.7.0 release","name":"2.7.0","archived":false,"released":true,"releaseDate":"2015-04-20"}],"issuelinks":[{"id":"12431911","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12431911","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12840322","key":"AMBARI-12135","self":"https://issues.apache.org/jira/rest/api/2/issue/12840322","fields":{"summary":"After HDP installation, hdfs fsck reporting CORRUPT status (Missing blocks)","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-08-30T01:30:57.362+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312944","id":"12312944","name":"tools"}],"timeoriginalestimate":null,"description":"Whenever HBase is running, the \"hdfs fsck /\"  reports four hbase-related files in the path \"hbase/data/WALs/\" as CORRUPT. Even after letting the cluster sit idle for a couple hours, it is still in the corrupt state.  If HBase is shut down, the problem goes away.  If HBase is then restarted, the problem recurs.  This was observed with Hadoop 2.7.1 and HBase 1.1.1, and did NOT happen with Hadoop 2.4 and HBase 0.98.\n\n{code}\nhades1:/var/opt/teradata/packages # su hdfs\nhdfs@hades1:/var/opt/teradata/packages> hdfs fsck /\nConnecting to namenode via http://hades1.labs.teradata.com:50070/fsck?ugi=hdfs&path=%2F\nFSCK started by hdfs (auth:SIMPLE) from /39.0.8.2 for path / at Wed Jun 24 20:40:17 GMT 2015\n...\n/apps/hbase/data/WALs/hades4.labs.teradata.com,16020,1435168292684/hades4.labs.teradata.com%2C16020%2C1435168292684.default.1435175500556: MISSING 1 blocks of total size 83 B.\n/apps/hbase/data/WALs/hades5.labs.teradata.com,16020,1435168290466/hades5.labs.teradata.com%2C16020%2C1435168290466..meta.1435175562144.meta: MISSING 1 blocks of total size 83 B.\n/apps/hbase/data/WALs/hades5.labs.teradata.com,16020,1435168290466/hades5.labs.teradata.com%2C16020%2C1435168290466.default.1435175498500: MISSING 1 blocks of total size 83 B.\n/apps/hbase/data/WALs/hades6.labs.teradata.com,16020,1435168292373/hades6.labs.teradata.com%2C16020%2C1435168292373.default.1435175500301: MISSING 1 blocks of total size 83 B..................................................................................................\n....................................................................................................\n....................................................................................................\n........................................................................................Status: CORRUPT\n Total size:    723977553 B (Total open files size: 332 B)\n Total dirs:    79\n Total files:   388\n Total symlinks:                0 (Files currently being written: 5)\n Total blocks (validated):      387 (avg. block size 1870743 B) (Total open file blocks (not validated): 4)\n  ********************************\n  UNDER MIN REPL'D BLOCKS:      4 (1.0335917 %)\n  dfs.namenode.replication.min: 1\n  CORRUPT FILES:        4\n  MISSING BLOCKS:       4\n  MISSING SIZE:         332 B\n  ********************************\n Minimally replicated blocks:   387 (100.0 %)\n Over-replicated blocks:        0 (0.0 %)\n Under-replicated blocks:       0 (0.0 %)\n Mis-replicated blocks:         0 (0.0 %)\n Default replication factor:    3\n Average block replication:     3.0\n Corrupt blocks:                0\n Missing replicas:              0 (0.0 %)\n Number of data-nodes:          3\n Number of racks:               1\nFSCK ended at Wed Jun 24 20:40:17 GMT 2015 in 7 milliseconds\n\n\nThe filesystem under path '/' is CORRUPT\nhdfs@hades1:/var/opt/teradata/packages>\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12751321","id":"12751321","filename":"HDFS-8809.000.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-19T18:50:09.767+0000","size":2782,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12751321/HDFS-8809.000.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"HDFS fsck reports under construction blocks as \"CORRUPT\"","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattf","name":"mattf","key":"mattf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Foley","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=heat23","name":"heat23","key":"heat23","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sudhir Prakash","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Hadoop 2.7.1 and HBase 1.1.1, on SUSE11sp3 (other Linuxes not tested, probably not platform-dependent).  This did NOT happen with Hadoop 2.4 and HBase 0.98.","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12848437/comment/14639069","id":"14639069","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=housejester","name":"housejester","key":"housejester","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=housejester&avatarId=24692","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=housejester&avatarId=24692","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=housejester&avatarId=24692","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=housejester&avatarId=24692"},"displayName":"James Estes","active":true,"timeZone":"Etc/UTC"},"body":"We are seeing very similar behavior with HBase 0.98.12 on Hadoop 2.6.0, though in our case, the CORRUPT blocks are only reported when using the -openforwrite flag. It is indicating missing blocks for WALs being written to, and the same 83 B you see here. Further, when we shut hbase down, the report is healthy again. We did not see this behavior on HBase 0.98.12 and Hadoop 2.2.0\n\nHere is our corrupt blocks report:\n\n{noformat}\nbin/hdfs fsck -openforwrite\nConnecting to namenode via http://prod-nn2:50070\nFSCK started by hadoop (auth:SIMPLE) from /10.73.3.15 for path / at Thu Jul 23 16:02:58 UTC 2015\n/data/hbase/WALs/prod-h1,60020,1437667330408/prod-h1%2C60020%2C1437667330408.1437667332462 83 bytes, 1 block(s), OPENFORWRITE:\n/data/hbase/WALs/prod-h1,60020,1437667330408/prod-h1%2C60020%2C1437667330408.1437667332462: MISSING 1 blocks of total size 83 B./data/hbase/WALs/prod-h2,60020,1437667330869/prod-h2%2C60020%2C1437667330869.1437667332991 83 bytes, 1 block(s), OPENFORWRITE:\n/data/hbase/WALs/prod-h2,60020,1437667330869/prod-h2%2C60020%2C1437667330869.1437667332991: MISSING 1 blocks of total size 83 B./data/hbase/WALs/prod-h3,60020,1437667330149/prod-h3%2C60020%2C1437667330149.1437667332298 83 bytes, 1 block(s), OPENFORWRITE:\n/data/hbase/WALs/prod-h3,60020,1437667330149/prod-h3%2C60020%2C1437667330149.1437667332298: MISSING 1 blocks of total size 83 B./data/hbase/WALs/prod-h4,60020,1437667330435/prod-h4%2C60020%2C1437667330435.1437667332567 83 bytes, 1 block(s), OPENFORWRITE:\n/data/hbase/WALs/prod-h4,60020,1437667330435/prod-h4%2C60020%2C1437667330435.1437667332567: MISSING 1 blocks of total size 83 B./data/hbase/WALs/prod-h5,60020,1437667330436/prod-h5%2C60020%2C1437667330436.1437667332928 83 bytes, 1 block(s), OPENFORWRITE:\n/data/hbase/WALs/prod-h5,60020,1437667330436/prod-h5%2C60020%2C1437667330436.1437667332928: MISSING 1 blocks of total size 83 B./data/hbase/WALs/prod-h6,60020,1437667330455/prod-h6%2C60020%2C1437667330455.1437667332532 83 bytes, 1 block(s), OPENFORWRITE:\n/data/hbase/WALs/prod-h6,60020,1437667330455/prod-h6%2C60020%2C1437667330455.1437667332532: MISSING 1 blocks of total size 83 B./data/hbase/WALs/prod-h6,60020,1437667330455/prod-h6%2C60020%2C1437667330455.1437667333025.meta 83 bytes, 1 block(s), OPENFORWRITE:\n/data/hbase/WALs/prod-h6,60020,1437667330455/prod-h6%2C60020%2C1437667330455.1437667333025.meta: MISSING 1 blocks of total size 83 B./data/hbase/WALs/prod-h7,60020,1437667330742/prod-h7%2C60020%2C1437667330742.1437667333075 83 bytes, 1 block(s), OPENFORWRITE:\n/data/hbase/WALs/prod-h7,60020,1437667330742/prod-h7%2C60020%2C1437667330742.1437667333075: MISSING 1 blocks of total size 83 B./data/hbase/WALs/prod-h8,60020,1437667330731/prod-h8%2C60020%2C1437667330731.1437667332978 83 bytes, 1 block(s), OPENFORWRITE:\n/data/hbase/WALs/prod-h8,60020,1437667330731/prod-h8%2C60020%2C1437667330731.1437667332978: MISSING 1 blocks of total size 83 B............................................................................................\n....................................................................................................\n....................................................................................................\n....................................................................................................\n....................................................................................................\n....................................................................................................\n.......................................Status: CORRUPT\n Total size:\t104358709960 B\n Total dirs:\t517\n Total files:\t639\n Total symlinks:\t\t0\n Total blocks (validated):\t1294 (avg. block size 80648152 B)\n  ********************************\n  CORRUPT FILES:\t9\n  MISSING BLOCKS:\t9\n  MISSING SIZE:\t\t747 B\n  ********************************\n Minimally replicated blocks:\t1285 (99.30448 %)\n Over-replicated blocks:\t0 (0.0 %)\n Under-replicated blocks:\t0 (0.0 %)\n Mis-replicated blocks:\t\t0 (0.0 %)\n Default replication factor:\t3\n Average block replication:\t2.9791346\n Corrupt blocks:\t\t0\n Missing replicas:\t\t0 (0.0 %)\n Number of data-nodes:\t\t8\n Number of racks:\t\t1\nFSCK ended at Thu Jul 23 16:02:58 UTC 2015 in 121 milliseconds\n\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=housejester","name":"housejester","key":"housejester","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=housejester&avatarId=24692","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=housejester&avatarId=24692","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=housejester&avatarId=24692","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=housejester&avatarId=24692"},"displayName":"James Estes","active":true,"timeZone":"Etc/UTC"},"created":"2015-07-23T16:16:34.621+0000","updated":"2015-07-23T16:16:34.621+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12848437/comment/14702257","id":"14702257","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"body":"Looks like this is an issue caused by HDFS-8215. Before, we skip the whole check if the block is under construction and \"showOpenFiles\" is disabled:\n{code}\n    isOpen = blocks.isUnderConstruction();\n    if (isOpen && !showOpenFiles) {\n      // We collect these stats about open files to report with default options\n      res.totalOpenFilesSize += fileLen;\n      res.totalOpenFilesBlocks += blocks.locatedBlockCount();\n      res.totalOpenFiles++;\n      return;\n    }\n{code}\n\nHDFS-8215 still includes this logic in {{collectFileSummary}} but not in {{collectBlocksSummary}}, where the UC blocks are reported as missing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-19T01:09:23.309+0000","updated":"2015-08-19T01:09:23.309+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12848437/comment/14703553","id":"14703553","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"body":"There is another issue here, which I think exists before HDFS-8215. When \"-OPENFORWRITE\" is enabled, an UC block is still treated as missing/corrupted, since {{countNodes}} only checks the triplets inside of the BlockInfo and thus the liveReplicas is usually 0 for a UC block.\n\nThe fix can be to ignore the check if the block is the last one and it's UC. Theoretically the penultimate block can also be in the committed state and with 0 reported replica yet, but maybe we do not need to handle this part here.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-19T18:50:09.770+0000","updated":"2015-08-19T18:50:09.770+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12848437/comment/14704088","id":"14704088","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:red}-1{color} | pre-patch |  16m 22s | Findbugs (version ) appears to be broken on trunk. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |\n| {color:green}+1{color} | javac |   8m 16s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |  10m 19s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 24s | The applied patch does not increase the total number of release audit warnings. |\n| {color:green}+1{color} | checkstyle |   0m 34s | There were no new checkstyle issues. |\n| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 42s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 37s | The patch built with eclipse:eclipse. |\n| {color:green}+1{color} | findbugs |   2m 47s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |\n| {color:green}+1{color} | native |   3m 23s | Pre-build of native portion |\n| {color:red}-1{color} | hdfs tests | 177m 26s | Tests failed in hadoop-hdfs. |\n| | | 221m 53s | |\n\\\\\n\\\\\n|| Reason || Tests ||\n| Failed unit tests | hadoop.hdfs.server.namenode.ha.TestBootstrapStandbyWithQJM |\n| Timed out tests | org.apache.hadoop.cli.TestHDFSCLI |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12751321/HDFS-8809.000.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / 3aac475 |\n| hadoop-hdfs test log | https://builds.apache.org/job/PreCommit-HDFS-Build/12048/artifact/patchprocess/testrun_hadoop-hdfs.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/12048/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf901.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/12048/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-20T01:10:09.791+0000","updated":"2015-08-20T01:10:09.791+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12848437/comment/14705948","id":"14705948","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-20T23:14:50.517+0000","updated":"2015-08-20T23:14:50.517+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12848437/comment/14705976","id":"14705976","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks Haohui for the review. I've committed this to trunk and branch-2.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-20T23:33:48.551+0000","updated":"2015-08-20T23:33:48.551+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12848437/comment/14705993","id":"14705993","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-trunk-Commit #8331 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/8331/])\nHDFS-8809. HDFS fsck reports under construction blocks as CORRUPT. Contributed by Jing Zhao. (jing9: rev c8bca62718203a1dad9b70d164bdf10cc71b40cd)\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/namenode/TestFsck.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NamenodeFsck.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-20T23:51:19.424+0000","updated":"2015-08-20T23:51:19.424+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12848437/comment/14707315","id":"14707315","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #291 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/291/])\nHDFS-8809. HDFS fsck reports under construction blocks as CORRUPT. Contributed by Jing Zhao. (jing9: rev c8bca62718203a1dad9b70d164bdf10cc71b40cd)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NamenodeFsck.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/namenode/TestFsck.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-21T19:29:45.286+0000","updated":"2015-08-21T19:29:45.286+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12848437/comment/14707345","id":"14707345","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Yarn-trunk #1024 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/1024/])\nHDFS-8809. HDFS fsck reports under construction blocks as CORRUPT. Contributed by Jing Zhao. (jing9: rev c8bca62718203a1dad9b70d164bdf10cc71b40cd)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NamenodeFsck.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/namenode/TestFsck.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-21T19:45:30.820+0000","updated":"2015-08-21T19:45:30.820+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12848437/comment/14707439","id":"14707439","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #294 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/294/])\nHDFS-8809. HDFS fsck reports under construction blocks as CORRUPT. Contributed by Jing Zhao. (jing9: rev c8bca62718203a1dad9b70d164bdf10cc71b40cd)\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/namenode/TestFsck.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NamenodeFsck.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-21T20:53:51.494+0000","updated":"2015-08-21T20:53:51.494+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12848437/comment/14707538","id":"14707538","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-Mapreduce-trunk #2240 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2240/])\nHDFS-8809. HDFS fsck reports under construction blocks as CORRUPT. Contributed by Jing Zhao. (jing9: rev c8bca62718203a1dad9b70d164bdf10cc71b40cd)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NamenodeFsck.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/namenode/TestFsck.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-21T22:10:48.439+0000","updated":"2015-08-21T22:10:48.439+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12848437/comment/14707585","id":"14707585","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #283 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/283/])\nHDFS-8809. HDFS fsck reports under construction blocks as CORRUPT. Contributed by Jing Zhao. (jing9: rev c8bca62718203a1dad9b70d164bdf10cc71b40cd)\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NamenodeFsck.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/namenode/TestFsck.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-21T22:47:06.375+0000","updated":"2015-08-21T22:47:06.375+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12848437/comment/14707601","id":"14707601","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-Hdfs-trunk #2221 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2221/])\nHDFS-8809. HDFS fsck reports under construction blocks as CORRUPT. Contributed by Jing Zhao. (jing9: rev c8bca62718203a1dad9b70d164bdf10cc71b40cd)\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/namenode/TestFsck.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NamenodeFsck.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-21T22:56:07.961+0000","updated":"2015-08-21T22:56:07.961+0000"}],"maxResults":13,"total":13,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-8809/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2hthj:"}}