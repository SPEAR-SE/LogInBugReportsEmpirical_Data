{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12965534","self":"https://issues.apache.org/jira/rest/api/2/issue/12965534","key":"HDFS-10373","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2016-05-06T16:17:48.156+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Jun 07 15:20:29 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_27220305_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2016-05-06T16:17:48.114+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-10373/watchers","watchCount":3,"isWatching":false},"created":"2016-05-06T08:44:07.867+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325049","id":"12325049","description":"2.2.0 release","name":"2.2.0","archived":false,"released":true,"releaseDate":"2013-10-15"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-06-07T15:20:29.853+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12317907","id":"12317907","name":"auto-failover","description":"Automatic failover"}],"timeoriginalestimate":null,"description":"HDFS ZKFC HealthMonitor Throw a Exception \n2016-05-05 02:00:59,475 WARN org.apache.hadoop.ha.HealthMonitor: Transport-level exception trying to monitor health of NameNode at XXX-XXX-XXX-hadoop.jd.local/172.22.17\n1.XX:8021: Failed on local exception: java.io.IOException: Connection reset by peer; Host Details : local host is: \"XXX-XXX-XXX-hadoop.jd.local/172.22.171.XX\"; destinat\nion host is: XXX-XXX-XXX-hadoop.jd.local\":8021;\n\nCause HA AutoFailOver","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12802638","id":"12802638","filename":"screenshot-1.png","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=piaoyu+zhang","name":"piaoyu zhang","key":"piaoyu zhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=piaoyu+zhang&avatarId=21665","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=piaoyu+zhang&avatarId=21665","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=piaoyu+zhang&avatarId=21665","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=piaoyu+zhang&avatarId=21665"},"displayName":"zhangyubiao","active":true,"timeZone":"Asia/Hong_Kong"},"created":"2016-05-06T08:54:36.898+0000","size":150867,"mimeType":"image/png","content":"https://issues.apache.org/jira/secure/attachment/12802638/screenshot-1.png"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12802640","id":"12802640","filename":"屏幕快照_2016-05-06_上午10.17.22.png","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=piaoyu+zhang","name":"piaoyu zhang","key":"piaoyu zhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=piaoyu+zhang&avatarId=21665","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=piaoyu+zhang&avatarId=21665","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=piaoyu+zhang&avatarId=21665","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=piaoyu+zhang&avatarId=21665"},"displayName":"zhangyubiao","active":true,"timeZone":"Asia/Hong_Kong"},"created":"2016-05-06T09:09:30.925+0000","size":155625,"mimeType":"image/png","content":"https://issues.apache.org/jira/secure/attachment/12802640/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7_2016-05-06_%E4%B8%8A%E5%8D%8810.17.22.png"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"HDFS ZKFC HealthMonitor Throw a Exception Cause AutoFailOver","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=piaoyu+zhang","name":"piaoyu zhang","key":"piaoyu zhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=piaoyu+zhang&avatarId=21665","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=piaoyu+zhang&avatarId=21665","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=piaoyu+zhang&avatarId=21665","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=piaoyu+zhang&avatarId=21665"},"displayName":"zhangyubiao","active":true,"timeZone":"Asia/Hong_Kong"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=piaoyu+zhang","name":"piaoyu zhang","key":"piaoyu zhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=piaoyu+zhang&avatarId=21665","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=piaoyu+zhang&avatarId=21665","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=piaoyu+zhang&avatarId=21665","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=piaoyu+zhang&avatarId=21665"},"displayName":"zhangyubiao","active":true,"timeZone":"Asia/Hong_Kong"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"CentOS6.5 Hadoop-2.2.0  ","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12965534/comment/15273810","id":"15273810","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=piaoyu+zhang","name":"piaoyu zhang","key":"piaoyu zhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=piaoyu+zhang&avatarId=21665","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=piaoyu+zhang&avatarId=21665","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=piaoyu+zhang&avatarId=21665","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=piaoyu+zhang&avatarId=21665"},"displayName":"zhangyubiao","active":true,"timeZone":"Asia/Hong_Kong"},"body":"And I find the RpcQueue and RpcAvgTime is very normal.\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=piaoyu+zhang","name":"piaoyu zhang","key":"piaoyu zhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=piaoyu+zhang&avatarId=21665","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=piaoyu+zhang&avatarId=21665","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=piaoyu+zhang&avatarId=21665","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=piaoyu+zhang&avatarId=21665"},"displayName":"zhangyubiao","active":true,"timeZone":"Asia/Hong_Kong"},"created":"2016-05-06T08:53:03.581+0000","updated":"2016-05-06T08:53:03.581+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12965534/comment/15274296","id":"15274296","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"Hello [~piaoyu zhang].  This doesn't look like a bug.  If ZKFC cannot contact its peer NameNode for a successful health check RPC, then an HA failover is the expected behavior.  This looks like an operational problem in this environment that needs further investigation.  \"Connection reset by peer\" means the remote end (the NameNode) closed out the socket before sending the expected response data.  I recommend looking at the NameNode logs to see if anything unusual happened during the timeframe of the HA failover.  If you need further assistance, then consider sending an email to user@hadoop.apache.org.  I hope this helps.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-05-06T16:17:48.156+0000","updated":"2016-05-06T16:17:48.156+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12965534/comment/15318664","id":"15318664","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=piaoyu+zhang","name":"piaoyu zhang","key":"piaoyu zhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=piaoyu+zhang&avatarId=21665","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=piaoyu+zhang&avatarId=21665","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=piaoyu+zhang&avatarId=21665","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=piaoyu+zhang&avatarId=21665"},"displayName":"zhangyubiao","active":true,"timeZone":"Asia/Hong_Kong"},"body":"Thank you very much  [~cnauroth].  I  will  sending an email to user@hadoop.apache.org.  I wonder to konw i set the network config right for the namenode. I have no  experience in operating system network.  \nBy the way is it we can use the  hdfs-audit.log by real time parse to see there has the  abnormal job? Thank you once again","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=piaoyu+zhang","name":"piaoyu zhang","key":"piaoyu zhang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=piaoyu+zhang&avatarId=21665","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=piaoyu+zhang&avatarId=21665","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=piaoyu+zhang&avatarId=21665","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=piaoyu+zhang&avatarId=21665"},"displayName":"zhangyubiao","active":true,"timeZone":"Asia/Hong_Kong"},"created":"2016-06-07T15:20:29.853+0000","updated":"2016-06-07T15:20:29.853+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-10373/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2x94n:"}}