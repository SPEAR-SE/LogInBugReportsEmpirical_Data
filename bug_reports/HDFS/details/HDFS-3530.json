{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12560426","self":"https://issues.apache.org/jira/rest/api/2/issue/12560426","key":"HDFS-3530","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2012-06-18T12:19:18.041+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sun Jul 22 21:48:27 UTC 2012","customfield_12310420":"257171","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-3530/watchers","watchCount":4,"isWatching":false},"created":"2012-06-13T02:21:01.887+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomohiko","name":"tomohiko","key":"tomohiko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohiko Kinebuchi","active":true,"timeZone":"Asia/Tokyo"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-07-22T21:48:27.798+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312916","id":"12312916","name":"test"}],"timeoriginalestimate":null,"description":"TestFileAppend2.testComplexAppend occasionally fails with the following:\n\njunit.framework.AssertionFailedError: testComplexAppend Worker encountered exceptions.\n\tat junit.framework.Assert.fail(Assert.java:47)\n\tat junit.framework.Assert.assertTrue(Assert.java:20)\n\tat org.apache.hadoop.hdfs.TestFileAppend2.testComplexAppend(TestFileAppend2.java:385)","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12537500","id":"12537500","filename":"HDFS-3530.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomohiko","name":"tomohiko","key":"tomohiko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohiko Kinebuchi","active":true,"timeZone":"Asia/Tokyo"},"created":"2012-07-22T14:27:57.298+0000","size":2898,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12537500/HDFS-3530.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12532500","id":"12532500","filename":"HDFS-3530-for-debug.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomohiko","name":"tomohiko","key":"tomohiko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohiko Kinebuchi","active":true,"timeZone":"Asia/Tokyo"},"created":"2012-06-19T03:30:31.746+0000","size":2203,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12532500/HDFS-3530-for-debug.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12531904","id":"12531904","filename":"PreCommit-HADOOP-Build #1116 test - testComplexAppend.html.gz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli2","name":"eli2","key":"eli2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"Etc/UTC"},"created":"2012-06-13T02:26:41.716+0000","size":901755,"mimeType":"application/x-gzip","content":"https://issues.apache.org/jira/secure/attachment/12531904/PreCommit-HADOOP-Build+%231116+test+-+testComplexAppend.html.gz"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"114235","customfield_12312823":null,"summary":"TestFileAppend2.testComplexAppend occasionally fails","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli2","name":"eli2","key":"eli2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli2","name":"eli2","key":"eli2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560426/comment/13294069","id":"13294069","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli2","name":"eli2","key":"eli2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"Etc/UTC"},"body":"Full test log attached.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli2","name":"eli2","key":"eli2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"Etc/UTC"},"created":"2012-06-13T02:26:41.769+0000","updated":"2012-06-13T02:26:41.769+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560426/comment/13395853","id":"13395853","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sho.shimauchi","name":"sho.shimauchi","key":"sho.shimauchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sho Shimauchi","active":true,"timeZone":"Asia/Tokyo"},"body":"The following log appears in the Jenkins log:\n\n{quote}\n2012-06-12 23:58:17,839 INFO  namenode.FileJournalManager (FileJournalManager.java:finalizeLogSegment(100)) - Finalizing edits file /home/jenkins/jenkins-slave/workspace/PreCommit-HADOOP-Build/trunk/hadoop-hdfs-project/hadoop-hdfs/target/test/data/dfs/name1/current/edits_inprogress_0000000000000000001 -> /home/jenkins/jenkins-slave/workspace/PreCommit-HADOOP-Build/trunk/hadoop-hdfs-project/hadoop-hdfs/target/test/data/dfs/name1/current/edits_0000000000000000001-0000000000000001003\n2012-06-12 23:58:17,839 ERROR namenode.NNStorage (NNStorage.java:reportErrorsOnDirectory(888)) - Error reported on storage directory Storage Directory /home/jenkins/jenkins-slave/workspace/PreCommit-HADOOP-Build/trunk/hadoop-hdfs-project/hadoop-hdfs/target/test/data/dfs/name1\n2012-06-12 23:58:17,840 WARN  namenode.NNStorage (NNStorage.java:reportErrorsOnDirectory(893)) - About to remove corresponding storage: /home/jenkins/jenkins-slave/workspace/PreCommit-HADOOP-Build/trunk/hadoop-hdfs-project/hadoop-hdfs/target/test/data/dfs/name1\n2012-06-12 23:58:17,840 ERROR namenode.FSEditLog (JournalSet.java:mapJournalsAndReportErrors(341)) - Error: finalize log segment 1, 1003 failed for (journal JournalAndStream(mgr=FileJournalManager(root=/home/jenkins/jenkins-slave/workspace/PreCommit-HADOOP-Build/trunk/hadoop-hdfs-project/hadoop-hdfs/target/test/data/dfs/name1), stream=null))\njava.lang.IllegalStateException: Unable to finalize edits file /home/jenkins/jenkins-slave/workspace/PreCommit-HADOOP-Build/trunk/hadoop-hdfs-project/hadoop-hdfs/target/test/data/dfs/name1/current/edits_inprogress_0000000000000000001\n\tat org.apache.hadoop.hdfs.server.namenode.FileJournalManager.finalizeLogSegment(FileJournalManager.java:107)\n\tat org.apache.hadoop.hdfs.server.namenode.JournalSet$3.apply(JournalSet.java:198)\n\tat org.apache.hadoop.hdfs.server.namenode.JournalSet.mapJournalsAndReportErrors(JournalSet.java:323)\n\tat org.apache.hadoop.hdfs.server.namenode.JournalSet.finalizeLogSegment(JournalSet.java:193)\n\tat org.apache.hadoop.hdfs.server.namenode.FSEditLog.endCurrentLogSegment(FSEditLog.java:980)\n\tat org.apache.hadoop.hdfs.server.namenode.FSEditLog.close(FSEditLog.java:324)\n\tat org.apache.hadoop.hdfs.server.namenode.FSNamesystem.stopActiveServices(FSNamesystem.java:676)\n\tat org.apache.hadoop.hdfs.server.namenode.NameNode$NameNodeHAContext.stopActiveServices(NameNode.java:1325)\n\tat org.apache.hadoop.hdfs.server.namenode.ha.ActiveState.exitState(ActiveState.java:70)\n\tat org.apache.hadoop.hdfs.server.namenode.NameNode.stop(NameNode.java:630)\n\tat org.apache.hadoop.hdfs.MiniDFSCluster.shutdown(MiniDFSCluster.java:1309)\n\tat org.apache.hadoop.hdfs.TestFileAppend2.testComplexAppend(TestFileAppend2.java:379)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat junit.framework.TestCase.runTest(TestCase.java:168)\n\tat junit.framework.TestCase.runBare(TestCase.java:134)\n\tat junit.framework.TestResult$1.protect(TestResult.java:110)\n\tat junit.framework.TestResult.runProtected(TestResult.java:128)\n\tat junit.framework.TestResult.run(TestResult.java:113)\n\tat junit.framework.TestCase.run(TestCase.java:124)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:243)\n\tat junit.framework.TestSuite.run(TestSuite.java:238)\n\tat org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:236)\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:134)\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:113)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)\n\tat org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)\n\tat org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74)\n{quote}\n\nThis exception looks similar to HDFS-2939.\nFileJournalManager.finalizeLogSegment() failed to rename an inprogress edits file to finalize file. \n\n{code}\n  @Override\n  synchronized public void finalizeLogSegment(long firstTxId, long lastTxId)\n      throws IOException {\n    File inprogressFile = NNStorage.getInProgressEditsFile(sd, firstTxId);\n\n    File dstFile = NNStorage.getFinalizedEditsFile(\n        sd, firstTxId, lastTxId);\n    LOG.info(\"Finalizing edits file \" + inprogressFile + \" -> \" + dstFile);\n    \n    Preconditions.checkState(!dstFile.exists(),\n        \"Can't finalize edits file \" + inprogressFile + \" since finalized file \" +\n        \"already exists\");\n    if (!inprogressFile.renameTo(dstFile)) {\n      storage.reportErrorsOnDirectory(sd);\n      throw new IllegalStateException(\"Unable to finalize edits file \" + inprogressFile);\n    }\n    if (inprogressFile.equals(currentInProgress)) {\n      currentInProgress = null;\n    }\n  }\n{code}\n\nOne of the probable cause of renaming failure is the inprogress file was not closed.\nIt is closed just before finalizedLogSegment() in JournalSet.JournalClosure.apply(), but the code block is not synchronized.\n\n{code}\n  @Override\n  public void finalizeLogSegment(final long firstTxId, final long lastTxId)\n      throws IOException {\n    mapJournalsAndReportErrors(new JournalClosure() {\n      @Override\n      public void apply(JournalAndStream jas) throws IOException {\n        if (jas.isActive()) {\n          jas.closeStream();\n          jas.getManager().finalizeLogSegment(firstTxId, lastTxId);\n        }\n      }\n    }, \"finalize log segment \" + firstTxId + \", \" + lastTxId);\n  }\n{code}\n\nSo I guess some race condition happens in the above part.\nIs it ok to just enclose  jas.closeStream() and jas.getManager().finalizeLogSegment() in synchronized block?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sho.shimauchi","name":"sho.shimauchi","key":"sho.shimauchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sho Shimauchi","active":true,"timeZone":"Asia/Tokyo"},"created":"2012-06-18T12:19:18.041+0000","updated":"2012-06-18T12:19:18.041+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560426/comment/13395963","id":"13395963","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sho.shimauchi","name":"sho.shimauchi","key":"sho.shimauchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sho Shimauchi","active":true,"timeZone":"Asia/Tokyo"},"body":"nvm, my guess is probably wrong. \nIt's probably not the race condition in the apply() method.\nI'll look through the code carefully.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sho.shimauchi","name":"sho.shimauchi","key":"sho.shimauchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sho Shimauchi","active":true,"timeZone":"Asia/Tokyo"},"created":"2012-06-18T15:34:52.244+0000","updated":"2012-06-18T15:34:52.244+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560426/comment/13396476","id":"13396476","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomohiko","name":"tomohiko","key":"tomohiko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohiko Kinebuchi","active":true,"timeZone":"Asia/Tokyo"},"body":"I created and attached a patch for debugging.\nCould someone apply this patch on the test class and run that many times?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomohiko","name":"tomohiko","key":"tomohiko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohiko Kinebuchi","active":true,"timeZone":"Asia/Tokyo"},"created":"2012-06-19T03:32:31.371+0000","updated":"2012-06-19T03:32:31.371+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560426/comment/13396477","id":"13396477","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomohiko","name":"tomohiko","key":"tomohiko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohiko Kinebuchi","active":true,"timeZone":"Asia/Tokyo"},"body":"Could someone give me contributor permission and assign to me?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomohiko","name":"tomohiko","key":"tomohiko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohiko Kinebuchi","active":true,"timeZone":"Asia/Tokyo"},"created":"2012-06-19T03:32:57.921+0000","updated":"2012-06-19T03:32:57.921+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560426/comment/13400532","id":"13400532","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomohiko","name":"tomohiko","key":"tomohiko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohiko Kinebuchi","active":true,"timeZone":"Asia/Tokyo"},"body":"It seems that this tests failed only once as far as I can track on the Jenkins test result history.\nI was trying to reproduce this failure, but have not been successful so far.\nThen, I am now inspecting log messages.\n\nDoes someone know what this test case tests?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomohiko","name":"tomohiko","key":"tomohiko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohiko Kinebuchi","active":true,"timeZone":"Asia/Tokyo"},"created":"2012-06-25T15:28:24.341+0000","updated":"2012-06-25T15:28:24.341+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560426/comment/13420181","id":"13420181","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomohiko","name":"tomohiko","key":"tomohiko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohiko Kinebuchi","active":true,"timeZone":"Asia/Tokyo"},"body":"Attached a patch and its intent is described below.\n\n\nThe first error message is \"Workload exception 4 testfile /15.dat java.io.EOFException: Premature EOF: no length prefix available\", and after this moment all other Workload threads failed.\n\nThe essential problem on this test failure is unclearness of the objective of this test case and difficulties to understand what ever happened.\nAt least we should clear what error case we want to capture, then we are prepared to implement a test case.\n\nSo, I propose to delete this test case.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomohiko","name":"tomohiko","key":"tomohiko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohiko Kinebuchi","active":true,"timeZone":"Asia/Tokyo"},"created":"2012-07-22T14:26:35.099+0000","updated":"2012-07-22T14:26:35.099+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560426/comment/13420182","id":"13420182","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomohiko","name":"tomohiko","key":"tomohiko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohiko Kinebuchi","active":true,"timeZone":"Asia/Tokyo"},"body":"a patch file for HDFS-3530","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tomohiko","name":"tomohiko","key":"tomohiko","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tomohiko Kinebuchi","active":true,"timeZone":"Asia/Tokyo"},"created":"2012-07-22T14:27:57.378+0000","updated":"2012-07-22T14:27:57.378+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560426/comment/13420345","id":"13420345","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"I agree it's not a great _unit_ test case for the reason you mentioned, but deleting it without understanding why it fails sometimes doesn't seem right. It acts as a decent stress-test/functional test, and it's still worrisome that it fails.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2012-07-22T21:48:27.753+0000","updated":"2012-07-22T21:48:27.753+0000"}],"maxResults":9,"total":9,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-3530/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0jwqv:"}}