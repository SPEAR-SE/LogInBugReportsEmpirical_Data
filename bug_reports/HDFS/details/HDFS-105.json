{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12428318","self":"https://issues.apache.org/jira/rest/api/2/issue/12428318","key":"HDFS-105","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_12312322":null,"customfield_12310220":"2011-12-29T14:30:56.333+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Dec 29 14:30:56 UTC 2011","customfield_12310420":"17127","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_79777835422_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-12-29T14:30:56.132+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-105/watchers","watchCount":2,"isWatching":false},"created":"2009-06-19T06:00:20.942+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-12-29T14:30:56.359+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Observed a streaming task stuck in MapTask$DirectMapOutputCollector.close","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12411189","id":"12411189","filename":"thread_dump.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"created":"2009-06-19T06:07:48.412+0000","size":7769,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12411189/thread_dump.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"108556","customfield_12312823":null,"summary":"Streaming task stuck in MapTask$DirectMapOutputCollector.close","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428318/comment/12721668","id":"12721668","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"body":"Task logs show :\nSyslog:\n2009-06-11 03:36:25,815 INFO org.apache.hadoop.streaming.PipeMapRed: PipeMapRed exec [/usr/local/bin/perl, ./hod-farm, node, -user=bolong, -dry=0, -exec_outdir=ascii/hk_ascii_usukin_data, -dfs_data=/projects/srelevance/modeling/data/hk/7.0/ascii/ASCII.TEST.UMLR.quj:ascii/ASCII.TEST.UMLR.quj,/projects/srelevance/modeling/data/hk/7.0/ascii/NON_ASCII.TEST.UMLR.quj:ascii/NON_ASCII.TEST.UMLR.quj,/projects/srelevance/modeling/data/hk/7.0.b/TEST.UMLR.quj:7.0.b/TEST.UMLR.quj,rslt:rslt,/projects/srelevance/modeling/data/um/4.0/train/tmp/usukin_hk_ascii.train.quj:tmp/usukin_hk_ascii.train.quj,/projects/srelevance/modeling/data/um/4.0/train/tmp/usukin_hk_ascii.train.fv:tmp/usukin_hk_ascii.train.fv,/projects/srelevance/modeling/data/hk/7.0/ascii/ASCII.TEST.UMLR.fv:ascii/ASCII.TEST.UMLR.fv,/projects/srelevance/modeling/data/hk/7.0/ascii/NON_ASCII.TEST.UMLR.fv:ascii/NON_ASCII.TEST.UMLR.fv,/projects/srelevance/modeling/data/hk/7.0.b/TEST.UMLR.fv:7.0.b/TEST.UMLR.fv,/projects/srelevance/modeling/data/um/4.0/train/tmp/hk_ascii_usukin.weight0:tmp/hk_ascii_usukin.weight0,/projects/srelevance/modeling/data/um/4.0/train/tmp/hk_ascii_usukin.weight1:tmp/hk_ascii_usukin.weight1,/projects/srelevance/modeling/data/um/4.0/train/tmp/hk_ascii_usukin.weight2:tmp/hk_ascii_usukin.weight2,/projects/srelevance/modeling/data/um/4.0/train/tmp/hk_ascii_usukin.weight3:tmp/hk_ascii_usukin.weight3,/projects/srelevance/modeling/data/um/4.0/train/tmp/hk_ascii_usukin.weight4:tmp/hk_ascii_usukin.weight4,/projects/srelevance/modeling/data/um/4.0/train/tmp/hk_ascii_usukin.weight5:tmp/hk_ascii_usukin.weight5,/projects/srelevance/modeling/data/um/4.0/train/tmp/hk_ascii_usukin.weight6:tmp/hk_ascii_usukin.weight6,/projects/srelevance/modeling/data/um/4.0/train/tmp/hk_ascii_usukin.weight7:tmp/hk_ascii_usukin.weight7,/projects/srelevance/modeling/data/um/4.0/train/tmp/hk_ascii_usukin.weight8:tmp/hk_ascii_usukin.weight8,/projects/srelevance/modeling/data/um/4.0/train/tmp/hk_ascii_usukin.weight9:tmp/hk_ascii_usukin.weight9,/projects/srelevance/modeling/data/um/4.0/train/tmp/hk_ascii_usukin.weight10:tmp/hk_ascii_usukin.weight10, -suicide]\n2009-06-11 03:36:25,843 INFO org.apache.hadoop.streaming.PipeMapRed: R/W/S=1/0/0 in:NA [rec/s] out:NA [rec/s]\n2009-06-12 03:41:08,775 INFO org.apache.hadoop.streaming.PipeMapRed: Records R/W=1/1\n2009-06-12 03:41:14,606 INFO org.apache.hadoop.streaming.PipeMapRed: MROutputThread done\n2009-06-12 03:41:14,606 INFO org.apache.hadoop.streaming.PipeMapRed: MRErrorThread done\n2009-06-12 03:41:14,657 INFO org.apache.hadoop.streaming.PipeMapRed: mapRedFinished\n\nStderr :\n/grid/0/gs/hadoop/current/bin/../bin/hadoop dfs -put hk_ascii_usukin314 /user/bolong/ascii/hk_ascii_usukin_data/hk_ascii_usukin314\n86689 === done copy\nA thread exited while 2 threads were running, <> line 1.\nException in thread \"IPC Client (47) connection to namenode.com/72.30.117.6:8020 from bolong\" java.lang.IllegalMonitorStateException\n\tat sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:183)\n\tat org.apache.hadoop.net.SocketInputStream$Reader.performIO(SocketInputStream.java:55)\n\tat org.apache.hadoop.net.SocketIOWithTimeout.doIO(SocketIOWithTimeout.java:142)\n\tat org.apache.hadoop.net.SocketInputStream.read(SocketInputStream.java:155)\n\tat org.apache.hadoop.net.SocketInputStream.read(SocketInputStream.java:128)\n\tat java.io.FilterInputStream.read(FilterInputStream.java:116)\n\tat org.apache.hadoop.ipc.Client$Connection$PingInputStream.read(Client.java:276)\n\tat java.io.BufferedInputStream.fill(BufferedInputStream.java:218)\n\tat java.io.BufferedInputStream.read(BufferedInputStream.java:237)\n\tat java.io.DataInputStream.readInt(DataInputStream.java:370)\n\tat org.apache.hadoop.ipc.Client$Connection.receiveResponse(Client.java:501)\n\tat org.apache.hadoop.ipc.Client$Connection.run(Client.java:446)\nlog4j:ERROR cleanUpRegex == null || !cleanUpRegex.contains(\"$fileName\")\nlog4j:ERROR cleanUpRegex == null || !cleanUpRegex.contains(\"$fileName\")\nlog4j:ERROR cleanUpRegex == null || !cleanUpRegex.contains(\"$fileName\")\nlog4j:ERROR cleanUpRegex == null || !cleanUpRegex.contains(\"$fileName\")\nlog4j:ERROR cleanUpRegex == null || !cleanUpRegex.contains(\"$fileName\")\nlog4j:ERROR cleanUpRegex == null || !cleanUpRegex.contains(\"$fileName\")\nlog4j:ERROR cleanUpRegex == null || !cleanUpRegex.contains(\"$fileName\")\n\nAttached complete stackTrace for the task .\nStackTrace contains :\n\"Thread-11\" daemon prio=10 tid=0xf559c000 nid=0x1a89 in Object.wait() [0xf51d7000..0xf51d81b0]\n   java.lang.Thread.State: WAITING (on object monitor)\n\tat java.lang.Object.wait(Native Method)\n\tat java.lang.Object.wait(Object.java:485)\n\tat org.apache.hadoop.ipc.Client.call(Client.java:725)\n\t- locked <0xcfcf4200> (a org.apache.hadoop.ipc.Client$Call)\n\tat org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:220)\n\tat $Proxy2.addBlock(Unknown Source)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)\n\tat org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)\n\tat $Proxy2.addBlock(Unknown Source)\n\tat org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.locateFollowingBlock(DFSClient.java:2873)\n\tat org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.nextBlockOutputStream(DFSClient.java:2755)\n\tat org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$2000(DFSClient.java:2046)\n\tat org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFSClient.java:2232)\n\t- locked <0xcfac2738> (a java.util.LinkedList)\n\nand \n\"main\" prio=10 tid=0x0805a800 nid=0x19f3 in Object.wait() [0xf7e70000..0xf7e71288]\n   java.lang.Thread.State: WAITING (on object monitor)\n\tat java.lang.Object.wait(Native Method)\n\tat java.lang.Object.wait(Object.java:485)\n\tat org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.flushInternal(DFSClient.java:3073)\n\t- locked <0xcfac2738> (a java.util.LinkedList)\n\t- locked <0xcfac4518> (a org.apache.hadoop.hdfs.DFSClient$DFSOutputStream)\n\tat org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.closeInternal(DFSClient.java:3164)\n\t- locked <0xcfac4518> (a org.apache.hadoop.hdfs.DFSClient$DFSOutputStream)\n\tat org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.close(DFSClient.java:3113)\n\tat org.apache.hadoop.fs.FSDataOutputStream$PositionCache.close(FSDataOutputStream.java:61)\n\tat org.apache.hadoop.fs.FSDataOutputStream.close(FSDataOutputStream.java:86)\n\tat org.apache.hadoop.mapred.TextOutputFormat$LineRecordWriter.close(TextOutputFormat.java:106)\n\t- locked <0xcfac46c0> (a org.apache.hadoop.mapred.TextOutputFormat$LineRecordWriter)\n\tat org.apache.hadoop.mapred.MapTask$DirectMapOutputCollector.close(MapTask.java:565)\n\tat org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:361)\n\tat org.apache.hadoop.mapred.MapTask.run(MapTask.java:305)\n\tat org.apache.hadoop.mapred.Child.main(Child.java:170)\n\nBoth Main thread and Thread-11 locked \t- locked <0xcfac2738> (a java.util.LinkedList) and WAITING (on object monitor). ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"created":"2009-06-19T06:05:15.267+0000","updated":"2009-06-19T06:05:15.267+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428318/comment/12721670","id":"12721670","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"body":"Complete thread dump for the task","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amareshwari","name":"amareshwari","key":"amareshwari","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amareshwari Sriramadasu","active":true,"timeZone":"Asia/Kolkata"},"created":"2009-06-19T06:07:48.451+0000","updated":"2009-06-19T06:07:48.451+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428318/comment/13177198","id":"13177198","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"body":"Hasn't had a similar failure report in two years now. Gone stale, so closing out as can't reproduce. Lets open a new one should we face this again (looks transient?)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-12-29T14:30:56.333+0000","updated":"2011-12-29T14:30:56.333+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-105/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ixpr:"}}