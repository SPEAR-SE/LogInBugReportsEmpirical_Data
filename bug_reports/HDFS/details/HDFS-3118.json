{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12547163","self":"https://issues.apache.org/jira/rest/api/2/issue/12547163","key":"HDFS-3118","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2015-05-02T04:19:41.580+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat May 02 04:20:36 UTC 2015","customfield_12310420":"232321","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-3118/watchers","watchCount":0,"isWatching":false},"created":"2012-03-20T08:49:42.701+0000","customfield_12310192":"Use DFS_PERMISSIONS_SUPERUSERGROUP_KEY in code and update documentation","customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":["BB2015-05-TBR"],"customfield_12312333":null,"customfield_12310230":"supergroup","customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12318243","id":"12318243","description":"1.0.0 release","name":"1.0.0","archived":false,"released":true,"releaseDate":"2011-12-27"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12319502","id":"12319502","description":"maintenance release on branch-1.0","name":"1.0.1","archived":false,"released":true,"releaseDate":"2012-02-22"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-05-06T03:31:03.228+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"components":[],"timeoriginalestimate":null,"description":"The hdfs-site template and the wiki: http://hadoop.apache.org/hdfs/docs/current/hdfs_permissions_guide.html#The+Super-User\nrefers to property dfs.permissions.superusergroup to define the group of superuser.\n\nHowever we must use the property dfs.permissions.supergroup, and not superusergroup, to make it work.\n\nIn file src/hdfs/org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java, supergroup is extracted from:\nthis.supergroup = conf.get(\"dfs.permissions.supergroup\", \"supergroup\");\n\nIt does not make use of DFS_PERMISSIONS_SUPERUSERGROUP_KEY","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12519052","id":"12519052","filename":"supergroup.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osallou","name":"osallou","key":"osallou","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Olivier Sallou","active":true,"timeZone":"Europe/Paris"},"created":"2012-03-20T09:08:06.325+0000","size":3328,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12519052/supergroup.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"114099","customfield_12312823":null,"summary":"wiki and hadoop templates provides wrong superusergroup property instead of supergroup","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osallou","name":"osallou","key":"osallou","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Olivier Sallou","active":true,"timeZone":"Europe/Paris"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osallou","name":"osallou","key":"osallou","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Olivier Sallou","active":true,"timeZone":"Europe/Paris"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Used Debian package install","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547163/comment/13233317","id":"13233317","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osallou","name":"osallou","key":"osallou","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Olivier Sallou","active":true,"timeZone":"Europe/Paris"},"body":"--- src/hdfs/org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java.orig\t2012-03-20 09:54:33.000000000 +0100\n+++ src/hdfs/org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java\t2012-03-20 09:55:13.000000000 +0100\n@@ -473,7 +473,7 @@\n     fsOwner = UserGroupInformation.getCurrentUser();\n     LOG.info(\"fsOwner=\" + fsOwner);\n \n-    this.supergroup = conf.get(\"dfs.permissions.supergroup\", \"supergroup\");\n+    this.supergroup = conf.get(DFSConfigKeys.DFS_PERMISSIONS_SUPERUSERGROUP_KEY, \"supergroup\");\n     this.isPermissionEnabled = conf.getBoolean(\"dfs.permissions\", true);\n     LOG.info(\"supergroup=\" + supergroup);\n     LOG.info(\"isPermissionEnabled=\" + isPermissionEnabled);\n--- src/test/org/apache/hadoop/mapred/TestMapredSystemDir.java.orig\t2012-03-20 09:56:37.000000000 +0100\n+++ src/test/org/apache/hadoop/mapred/TestMapredSystemDir.java\t2012-03-20 09:58:14.000000000 +0100\n@@ -30,6 +30,7 @@\n import org.apache.hadoop.fs.FileSystem;\n import org.apache.hadoop.fs.Path;\n import org.apache.hadoop.security.*;\n+import org.apache.hadoop.hdfs.DFSConfigKeys;\n \n /**\n  * Test if JobTracker is resilient to garbage in mapred.system.dir.\n@@ -49,7 +50,7 @@\n     MiniMRCluster mr = null;\n     try {\n       // start dfs\n-      conf.set(\"dfs.permissions.supergroup\", \"supergroup\");\n+      conf.set(DFSConfigKeys.DFS_PERMISSIONS_SUPERUSERGROUP_KEY, \"supergroup\");\n       conf.set(\"mapred.system.dir\", \"/mapred\");\n       dfs = new MiniDFSCluster(conf, 1, true, null);\n       FileSystem fs = dfs.getFileSystem();\n@@ -120,4 +121,4 @@\n       if (mr != null) { mr.shutdown();}\n     }\n   }\n-}\n\\ No newline at end of file\n+}\n\n--- src/hdfs/hdfs-default.xml.orig\t2012-03-20 10:00:53.000000000 +0100\n+++ src/hdfs/hdfs-default.xml\t2012-03-20 10:01:04.000000000 +0100\n@@ -184,7 +184,7 @@\n </property>\n \n <property>\n-  <name>dfs.permissions.supergroup</name>\n+  <name>dfs.permissions.superusergroup</name>\n   <value>supergroup</value>\n   <description>The name of the group of super-users.</description>\n </property>\n--- src/docs/src/documentation/content/xdocs/hdfs_permissions_guide.xml.orig\t2012-03-20 10:02:01.000000000 +0100\n+++ src/docs/src/documentation/content/xdocs/hdfs_permissions_guide.xml\t2012-03-20 10:02:14.000000000 +0100\n@@ -227,7 +227,7 @@\n \t\tonly those things visible using \"other\" permissions. Additional groups may be added to the comma-separated list.\n     </li>\n     \n-\t<li><code>dfs.permissions.supergroup = supergroup</code>\n+\t<li><code>dfs.permissions.superusergroup = supergroup</code>\n \t<br />The name of the group of super-users.\n \t</li>\n\n--- src/docs/cn/src/documentation/content/xdocs/hdfs_permissions_guide.xml.orig\t2012-03-20 10:03:17.000000000 +0100\n+++ src/docs/cn/src/documentation/content/xdocs/hdfs_permissions_guide.xml\t2012-03-20 10:03:30.000000000 +0100\n@@ -170,7 +170,7 @@\n \t<dd>\n \tWeb服务器使用的用户名。如果将这个参数设置为超级用户的名称，则所有Web客户就可以看到所有的信息。如果将这个参数设置为一个不使用的用户，则Web客户就只能访问到“other”权限可访问的资源了。额外的组可以加在后面，形成一个用逗号分隔的列表。\n \t</dd>\n-\t<dt><code>dfs.permissions.supergroup = supergroup</code></dt>\n+\t<dt><code>dfs.permissions.superusergroup = supergroup</code></dt>\n \t<dd>\n \t超级用户的组名。\n \t</dd>\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osallou","name":"osallou","key":"osallou","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Olivier Sallou","active":true,"timeZone":"Europe/Paris"},"created":"2012-03-20T09:07:06.369+0000","updated":"2012-03-20T09:07:06.369+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547163/comment/13233318","id":"13233318","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osallou","name":"osallou","key":"osallou","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Olivier Sallou","active":true,"timeZone":"Europe/Paris"},"body":"file attached","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=osallou","name":"osallou","key":"osallou","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Olivier Sallou","active":true,"timeZone":"Europe/Paris"},"created":"2012-03-20T09:08:24.964+0000","updated":"2012-03-20T09:08:24.964+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547163/comment/14524540","id":"14524540","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:red}-1{color} | patch |   0m  0s | The patch command could not apply the patch during dryrun. |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12519052/supergroup.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / f1a152c |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/10519/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-02T04:19:41.580+0000","updated":"2015-05-02T04:19:41.580+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547163/comment/14524548","id":"14524548","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:red}-1{color} | patch |   0m  0s | The patch command could not apply the patch during dryrun. |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12519052/supergroup.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / f1a152c |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/10520/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-05-02T04:20:36.321+0000","updated":"2015-05-02T04:20:36.321+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-3118/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0jvwn:"}}