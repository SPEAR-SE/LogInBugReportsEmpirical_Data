{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12724955","self":"https://issues.apache.org/jira/rest/api/2/issue/12724955","key":"HDFS-6621","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327181","id":"12327181","description":"2.6.0 release","name":"2.6.0","archived":false,"released":true,"releaseDate":"2014-11-18"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-07-02T17:26:12.193+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Sep 12 14:04:40 UTC 2014","customfield_12310420":"403138","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_5525120664_*|*_1_*:*_1_*:*_628142780_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-09-11T17:33:55.441+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-6621/watchers","watchCount":15,"isWatching":false},"created":"2014-07-02T12:19:32.037+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["balancer"],"customfield_12312333":null,"customfield_12310230":"balancer ","customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325049","id":"12325049","description":"2.2.0 release","name":"2.2.0","archived":false,"released":true,"releaseDate":"2013-10-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326143","id":"12326143","description":"2.4.0 release","name":"2.4.0","archived":false,"released":true,"releaseDate":"2014-04-07"}],"issuelinks":[{"id":"12399587","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12399587","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12740830","key":"HDFS-7048","self":"https://issues.apache.org/jira/rest/api/2/issue/12740830","fields":{"summary":"Incorrect Dispatcher#Source wait/notify leads to early termination","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}},{"id":"12394338","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12394338","type":{"id":"12310050","name":"Regression","inward":"is broken by","outward":"breaks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310050"},"inwardIssue":{"id":"12618630","key":"HDFS-4261","self":"https://issues.apache.org/jira/rest/api/2/issue/12618630","fields":{"summary":"TestBalancerWithNodeGroup times out","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravwojdyla","name":"ravwojdyla","key":"ravwojdyla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafal Wojdyla","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-12-01T03:09:01.202+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313153","id":"12313153","name":"balancer & mover"}],"timeoriginalestimate":null,"description":"I have been having an issue with the balancing being too slow.  The issue was not with the speed with which blocks were moved, but rather the balancer would prematurely exit out of it's balancing iterations.  It would move ~10 blocks or 100 MB then exit the current iteration (in which it said it was planning on moving about 10 GB). \n\nI looked in the Balancer.java code and believe I found and solved the issue.  In the dispatchBlocks() function there is a variable, \"noPendingBlockIteration\", which counts the number of iterations in which a pending block to move cannot be found.  Once this number gets to 5, the balancer exits the overall balancing iteration.  I believe the desired functionality is 5 consecutive no pending block iterations - however this variable is never reset to 0 upon block moves.  So once this number reaches 5 - even if there have been thousands of blocks moved in between these no pending block iterations  - the overall balancing iteration will prematurely end.  \n\nThe fix I applied was to set noPendingBlockIteration = 0 when a pending block is found and scheduled.  In this way, my iterations do not prematurely exit unless there is 5 consecutive no pending block iterations.   Below is a copy of my dispatchBlocks() function with the change I made.\n\n{code}\n    private void dispatchBlocks() {\n      long startTime = Time.now();\n      long scheduledSize = getScheduledSize();\n      this.blocksToReceive = 2*scheduledSize;\n      boolean isTimeUp = false;\n      int noPendingBlockIteration = 0;\n      while(!isTimeUp && getScheduledSize()>0 &&\n          (!srcBlockList.isEmpty() || blocksToReceive>0)) {\n        PendingBlockMove pendingBlock = chooseNextBlockToMove();\n        if (pendingBlock != null) {\n          noPendingBlockIteration = 0;\n          // move the block\n          pendingBlock.scheduleBlockMove();\n          continue;\n        }\n\n        /* Since we can not schedule any block to move,\n         * filter any moved blocks from the source block list and\n         * check if we should fetch more blocks from the namenode\n         */\n        filterMovedBlocks(); // filter already moved blocks\n        if (shouldFetchMoreBlocks()) {\n          // fetch new blocks\n          try {\n            blocksToReceive -= getBlockList();\n            continue;\n          } catch (IOException e) {\n            LOG.warn(\"Exception while getting block list\", e);\n            return;\n          }\n        } else {\n          // source node cannot find a pendingBlockToMove, iteration +1\n          noPendingBlockIteration++;\n          // in case no blocks can be moved for source node's task,\n          // jump out of while-loop after 5 iterations.\n          if (noPendingBlockIteration >= MAX_NO_PENDING_BLOCK_ITERATIONS) {\n            setScheduledSize(0);\n          }\n        }\n\n        // check if time is up or not\n        if (Time.now()-startTime > MAX_ITERATION_TIME) {\n          isTimeUp = true;\n          continue;\n        }\n\n        /* Now we can not schedule any block to move and there are\n         * no new blocks added to the source block list, so we wait.\n         */\n        try {\n          synchronized(Balancer.this) {\n            Balancer.this.wait(1000);  // wait for targets/sources to be idle\n          }\n        } catch (InterruptedException ignored) {\n        }\n      }\n    }\n  }\n{code}\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12667795","id":"12667795","filename":"HDFS-6621_problem1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravwojdyla","name":"ravwojdyla","key":"ravwojdyla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafal Wojdyla","active":true,"timeZone":"Etc/UTC"},"created":"2014-09-10T18:04:15.622+0000","size":825,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12667795/HDFS-6621_problem1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12653835","id":"12653835","filename":"HDFS-6621.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bbowman410","name":"bbowman410","key":"bbowman410","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benjamin Bowman","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-03T14:24:22.431+0000","size":730,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12653835/HDFS-6621.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12665572","id":"12665572","filename":"HDFS-6621.patch_2","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravwojdyla","name":"ravwojdyla","key":"ravwojdyla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafal Wojdyla","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-30T16:26:05.472+0000","size":1307,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12665572/HDFS-6621.patch_2"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12667080","id":"12667080","filename":"HDFS-6621.patch_3","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravwojdyla","name":"ravwojdyla","key":"ravwojdyla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafal Wojdyla","active":true,"timeZone":"Etc/UTC"},"created":"2014-09-07T14:01:01.593+0000","size":1691,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12667080/HDFS-6621.patch_3"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12667093","id":"12667093","filename":"HDFS-6621.patch_4","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravwojdyla","name":"ravwojdyla","key":"ravwojdyla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafal Wojdyla","active":true,"timeZone":"Etc/UTC"},"created":"2014-09-07T17:45:33.230+0000","size":1792,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12667093/HDFS-6621.patch_4"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"403196","customfield_12312823":null,"summary":"Hadoop Balancer prematurely exits iterations","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bbowman410","name":"bbowman410","key":"bbowman410","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benjamin Bowman","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bbowman410","name":"bbowman410","key":"bbowman410","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benjamin Bowman","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Red Hat Enterprise Linux Server release 5.8 with Hadoop 2.4.0","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14050367","id":"14050367","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=airbots","name":"airbots","key":"airbots","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=airbots&avatarId=34730","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=airbots&avatarId=34730","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=airbots&avatarId=34730","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=airbots&avatarId=34730"},"displayName":"Chen He","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~bbowman410], could you come up with a patch for this JIRA?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=airbots","name":"airbots","key":"airbots","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=airbots&avatarId=34730","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=airbots&avatarId=34730","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=airbots&avatarId=34730","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=airbots&avatarId=34730"},"displayName":"Chen He","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-07-02T17:26:12.193+0000","updated":"2014-07-02T17:26:12.193+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14056774","id":"14056774","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12653835/HDFS-6621.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-hdfs-project/hadoop-hdfs.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/7307//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7307//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-09T21:29:20.938+0000","updated":"2014-07-09T21:29:20.938+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14058496","id":"14058496","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravwojdyla","name":"ravwojdyla","key":"ravwojdyla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafal Wojdyla","active":true,"timeZone":"Etc/UTC"},"body":"We have also experience this problem with Balancer.\nThe problem in general is that balancer will prematurely finish iteration due to noPendingBlockIteration >= 5.\nI was about to create JIRA ticket for this - but I have noticed this ticket.\nThe solutions that, we have applied is to:\n 1. noPendingBlockIteration = 0 when pendingBlock != null, exactly the way you did\n 2. notify only on source object when block transfer finishes \n\nProblem/Solutions 1 is well described above.\nProblem/Solutions 2:\n\nIn org/apache/hadoop/hdfs/server/balancer/Balancer:\n{code}\nprivate void dispatch() {\n     ...\n     synchronized (Balancer.this) {\n         Balancer.this.notifyAll();\n     }\n}\n{code}\nthis will notify all scheduling threads, even the ones that are waiting and still have all 5 transfer threads occupied.\nWhen occupied task wakes up, it will try to get next block to move, but because all 5 transfer threads are occupied\nit will get null as next block to move - which will increase noPendingBlockIteration, and we are in the problem 1.\n\nThe solution is to notify threads waiting on source object and reset PendingBlockMove object afterwords.\nShould I provide patch in this ticket, or create a separate ticket?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravwojdyla","name":"ravwojdyla","key":"ravwojdyla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafal Wojdyla","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-11T07:02:33.580+0000","updated":"2014-07-11T07:02:33.580+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14069668","id":"14069668","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjeffrey","name":"bjeffrey","key":"bjeffrey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Jeffrey","active":true,"timeZone":"Etc/UTC"},"body":"I would suggest that you provide a patch in this ticket.  The approach sounds similar to our approach and would provide a more fully-formed solution.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bjeffrey","name":"bjeffrey","key":"bjeffrey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Jeffrey","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-22T01:31:25.327+0000","updated":"2014-07-22T01:31:25.327+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14099919","id":"14099919","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"body":"[~ravwojdyla] - If you are still working on this, would you be posting your patch for the issue here for review soon?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"created":"2014-08-17T09:13:03.864+0000","updated":"2014-08-17T09:13:03.864+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14104623","id":"14104623","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adamjshook","name":"adamjshook","key":"adamjshook","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Adam J Shook","active":true,"timeZone":"America/New_York"},"body":"I may be experiencing this as well.  Does the balancer process actually exit, or does it just hang?  It's moved around 900 blocks in the first iteration and stops.  A jstack shows it has been in the waitForMoveCompletion loop for 4+ hours.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adamjshook","name":"adamjshook","key":"adamjshook","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Adam J Shook","active":true,"timeZone":"America/New_York"},"created":"2014-08-20T21:24:00.260+0000","updated":"2014-08-20T21:24:00.260+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14109312","id":"14109312","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"HI [~ravwojdyla], \n\nThanks for your earlier work on this issue. Seems you already have the completed solution for both issues you described, would you mind post the patch here? Thanks a lot.\n\nBTW, thanks [~bbowman410] for reporting the issue here.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-25T16:58:57.219+0000","updated":"2014-08-25T16:58:57.219+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14109788","id":"14109788","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravwojdyla","name":"ravwojdyla","key":"ravwojdyla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafal Wojdyla","active":true,"timeZone":"Etc/UTC"},"body":"Hi [~yzhangal],\n\nThe patch is pretty simple - but it's hard to reproduce it unit tests in sane fashion.\nWorking on it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravwojdyla","name":"ravwojdyla","key":"ravwojdyla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafal Wojdyla","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-25T21:40:18.974+0000","updated":"2014-08-25T21:40:18.974+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14109815","id":"14109815","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Hello [~ravwojdyla],\n\nThanks for your quick response! Would you mind post a version without the unit test first? Thanks.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-25T21:55:10.516+0000","updated":"2014-08-25T21:55:10.516+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14115391","id":"14115391","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"HI [~ravwojdyla], \n\nI can see the challenge of writing a test for this one. My understanding is that, if writing a test is not feasible, the fix can still be committed, if it is tested locally to see the problem is fixed, and the code review looks good. Would you please post the patch without the test first? \n\nBTW, once you post the patch, I can think about how to test it too.\n\nthanks.\n\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-29T16:20:46.790+0000","updated":"2014-08-29T16:20:46.790+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14116531","id":"14116531","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12665572/HDFS-6621.patch_2\n  against trunk revision 0f34e6f.\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:red}-1 findbugs{color}.  The patch appears to introduce 1 new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:\n\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestPipelinesFailover\n                  org.apache.hadoop.hdfs.server.balancer.TestBalancerWithEncryptedTransfer\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/7862//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-HDFS-Build/7862//artifact/trunk/patchprocess/newPatchFindbugsWarningshadoop-hdfs.html\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7862//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-30T19:10:20.238+0000","updated":"2014-08-30T19:10:20.238+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14122492","id":"14122492","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"HI [~ravwojdyla],\n\nThanks for uploading the patch and sorry for getting back late. I studied the change you made, I certainly see the change you made for problem 1 is good. But I have some questions about problem/solution 2\n{quote} \n2. notify only on source object when block transfer finishes\n{quote}\n\nIn addition to the place you changed for problem 2,  I saw the threads that can block on the source object via Souce's parent class'  StorageGroup's synchronized methods:\n\n{code}\n     /** Decide if still need to move more bytes */\n      synchronized boolean hasSpaceForScheduling() {\n        return availableSizeToMove() > 0L;\n      }   \n          \n      /** @return the total number of bytes that need to be moved */\n      synchronized long availableSizeToMove() {\n        return maxSize2Move - scheduledSize;\n      }     \n          \n      /** increment scheduled size */\n      synchronized void incScheduledSize(long size) {\n        scheduledSize += size; \n      } \n          \n      /** @return scheduled size */\n      synchronized long getScheduledSize() {\n        return scheduledSize;\n      } \n        \n      /** Reset scheduled size to zero. */\n      synchronized void resetScheduledSize() {\n        scheduledSize = 0L;\n      }   \n{code}\n\nAll these methods are pretty small thus can be executed quickly. So it looks to me that not many threads would be blocked waiting on \"source\" object. My question is, will the change you made for 2 end up not to notify some threads that are blocked on Dispatcher.this but not on source, even if they need to be notified?\n\nThanks a lot.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-05T06:07:42.905+0000","updated":"2014-09-05T06:07:42.905+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14122501","id":"14122501","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"BTW,\nI wonder if it's a hole that some methods in {{class Source}}  like {{private void removeMovedBlocks()}} are not synchronized.\n\nHI [~szetszwo], I wonder if you could help explain a bit here? would you please also help taking a look at the posted patch and comment? it's a small one and hopefully it won't need too much of your time. Many thanks.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-05T06:20:15.937+0000","updated":"2014-09-05T06:20:15.937+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14123557","id":"14123557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"body":"I took a quick look at this, and I'm wondering about the change to {{notifyAll}} on a Source rather than Dispatcher. I don't see anything waiting on a Source, so this change essentially makes it into a no-op. I haven't looked into the Balancer deeply enough to figure out the right change though, so maybe someone else can comment.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-05T20:53:21.514+0000","updated":"2014-09-05T20:53:21.514+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14123618","id":"14123618","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~andrew.wang].\n\nHI [~ravwojdyla], couple of more questions, you said that the old code {{will notify all scheduling threads, even the ones that are waiting and still have all 5 transfer threads occupied}}.  Would you please explain how your fix  of problem 2 detects the scheduling threads that still have 5 transfer threads occupied so not to notify them?\n\nBTW, have you tried to test with the fix of problem 1 only? Or you have to apply fixes for both problem 1 and 2 to see it works?\n\nThanks.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-05T21:33:03.063+0000","updated":"2014-09-05T21:33:03.063+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14124812","id":"14124812","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~ravwojdyla],\n\nI studied it a bit more, and it seems to me that on top of the changes you made, we need to replace the {{Dispather.this}} in the following code with {{this}}, \n{code}\n        try {\n          synchronized (Dispatcher.this) {\n            Dispatcher.this.wait(1000); // wait for targets/sources to be idle\n          }\n        } catch (InterruptedException ignored) {\n        }\n{code}\nso to make the scheduling threads with all five transfer threads occupied/unfinished block on its {{source}}, then later if one transfer thread finishes, it would notify this blocked scheduling thread (by your change for problem 2) that a slot is available now.\n\nIf this makes sense to you, would please try it out with the testing you have done?\n\nAgain, the first problem seems to be important to fix, but I don't know how important the second one is (see question asked in my last comment). If the fix of problem 1 is good enough, then we can go with it alone. Otherwise, my above suggested change can be explored.\n\nWould you please comment?\n\nThanks a lot.\n\n\n\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-07T07:08:34.858+0000","updated":"2014-09-07T07:08:34.858+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14124903","id":"14124903","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravwojdyla","name":"ravwojdyla","key":"ravwojdyla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafal Wojdyla","active":true,"timeZone":"Etc/UTC"},"body":"Hi [~yzhangal]\n\nThanks for comments, sorry for delay.\n\nFirst of all - I agree that first problem is more important, and we should just merge it in.\n\nAbout solution to second problem, do we agree that the problem exists? Especially with big number of threads such waking up for some threads may be lethal even with fix for first problem. Is that correct?\n\nIt's been a while since I've made this change, and afair I tested both problems/solutions and it they were separate problems, both of them cause premature exists. First problem was more lethal tho.\n\nAbout your comment with waiting - your are completely right! I missed this in the patch. Now I see even more the value of pushing-patches/creating-tickets right away ... not waiting till you have a bunch of changes. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravwojdyla","name":"ravwojdyla","key":"ravwojdyla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafal Wojdyla","active":true,"timeZone":"Etc/UTC"},"created":"2014-09-07T13:52:01.124+0000","updated":"2014-09-07T13:52:01.124+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14124963","id":"14124963","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12667080/HDFS-6621.patch_3\n  against trunk revision d1fa582.\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:red}-1 findbugs{color}.  The patch appears to introduce 1 new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:\n\n                  org.apache.hadoop.hdfs.web.TestWebHdfsFileSystemContract\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestPipelinesFailover\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/7934//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-HDFS-Build/7934//artifact/trunk/patchprocess/newPatchFindbugsWarningshadoop-hdfs.html\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7934//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-09-07T16:43:05.726+0000","updated":"2014-09-07T16:43:05.726+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14124980","id":"14124980","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~ravwojdyla], \n\nThanks a lot for the info and new rev. I meant to change both occurrences of {{Dispather.this}} in the quoted code but seems you only changed one. The unchanged one is actually the key, because it's where the block is synchronized upon. Would you please make that change? \n\nSince you mentioned that both problems are real, I think it's worth pursuing both. It would be great if you could still reproduce and test the fix in real clusters. I hope this is still feasible, would you please comment?  Thanks.\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-07T17:32:59.075+0000","updated":"2014-09-07T17:32:59.075+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14124981","id":"14124981","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"BTW, thanks [~andrew.wang] for the review and comments, which helped me to look further.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-07T17:36:45.920+0000","updated":"2014-09-07T17:36:45.920+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14124982","id":"14124982","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravwojdyla","name":"ravwojdyla","key":"ravwojdyla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafal Wojdyla","active":true,"timeZone":"Etc/UTC"},"body":"[~yzhangal] you're correct :D Sorry.\nReproducing error on real cluster - that's still feasible, reproducing this in unit tests is kinda hard, I will try to come back with proof based on logs - is that fine?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravwojdyla","name":"ravwojdyla","key":"ravwojdyla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafal Wojdyla","active":true,"timeZone":"Etc/UTC"},"created":"2014-09-07T17:41:18.358+0000","updated":"2014-09-07T17:41:18.358+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14124997","id":"14124997","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Rafal, \n\nThanks for the quick response, and that's great to hear! What about we do this:\n\n1. Have a setup to see the problem with the fix at all, to demonstrate the symptom.\n2. Try the fix of problem 1 only, to see if there is still problem, and we should try to demonstrate the remaining problem\n3. Try the fix of both problems (rev 4), to see if all problems are gone\n\nThanks again!\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-07T18:29:13.246+0000","updated":"2014-09-07T18:29:13.246+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14125007","id":"14125007","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Sorry, one typo in item 1 of last comment: \"with\" meant \"without\".\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-07T18:53:30.088+0000","updated":"2014-09-07T18:53:30.088+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14125054","id":"14125054","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12667093/HDFS-6621.patch_4\n  against trunk revision a23144f.\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:red}-1 findbugs{color}.  The patch appears to introduce 1 new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:\n\n                  org.apache.hadoop.hdfs.server.blockmanagement.TestBlockTokenWithDFS\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/7942//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-HDFS-Build/7942//artifact/trunk/patchprocess/newPatchFindbugsWarningshadoop-hdfs.html\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7942//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-09-07T20:33:50.310+0000","updated":"2014-09-07T20:33:50.310+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14126848","id":"14126848","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~ravwojdyla],\n\nThanks for earlier discussion. Would you please providing a patch for problem 1 alone here as soon as possible? and then file a separate jira for problem 2 and we continue the discussion from there? thanks a lot.\n\nBTW, if you had luck reproducing the issue, I'd love to hear.\n\nHi [~andrew.wang], thanks for your earlier review. I think it would be a good idea to commit the problem 1 fix first. Need your help to review and commit problem 1 fix once Rafal uploads it. The credit of problem 1 fix should go to both [~bbowman410] and [~ravwojdyla]. Thanks Benjamin for filing this jira, and thanks both of them for the fix.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-09T10:43:01.522+0000","updated":"2014-09-09T10:43:01.522+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14127259","id":"14127259","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"HI [~szetszwo], \n\nNeed some of your help here. Rev 4 is a result of our discussion to address this issue. The change is pretty small, I wonder if you could quickly browse through and share some insight whether the fix makes sense to you? \n\nThanks a lot and really appreciate your help!\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-09T17:23:27.934+0000","updated":"2014-09-09T17:23:27.934+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14127716","id":"14127716","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"Sure, I will take a look.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-09T22:49:33.829+0000","updated":"2014-09-09T22:49:33.829+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14127737","id":"14127737","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Many thanks [~szetszwo], really appreciate it!\n\nHI [~ravwojdyla], I wonder if you had any luck reproducing the issue and verifying the fix as we discussed earlier? thanks a lot!\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-09T23:01:34.508+0000","updated":"2014-09-09T23:01:34.508+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14128572","id":"14128572","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"I agree with Yongjun that let's only fix problem 1 here.\n\nFor problem 2, let's create another JIRA for it.  It seems that the original wait-notify code is not very useful since the wait timeout is only 1 second.  How about simply replacing it with sleep(..)?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-10T15:01:14.533+0000","updated":"2014-09-10T15:01:14.533+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14128604","id":"14128604","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Thank you so much [~szetszwo]! \n\nHI [~ravwojdyla] and [~bbowman410], wonder if any of you could provide a patch for the first problem here soon? If you won't get to it soon, hope you don't mind that I put one on your behalf. And we will continue discussing what's the right approach for problem 2 in a new jira.  Thanks a lot.\n\n\n\n\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-10T15:35:38.690+0000","updated":"2014-09-10T15:35:38.690+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14128713","id":"14128713","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravwojdyla","name":"ravwojdyla","key":"ravwojdyla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafal Wojdyla","active":true,"timeZone":"Etc/UTC"},"body":"[~yzhangal] for problem 1 - patch is in [^HDFS-6621.patch]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ravwojdyla","name":"ravwojdyla","key":"ravwojdyla","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rafal Wojdyla","active":true,"timeZone":"Etc/UTC"},"created":"2014-09-10T16:50:27.432+0000","updated":"2014-09-10T16:50:27.432+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14128740","id":"14128740","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"HI [~ravwojdyla], thanks for your quick response, would you please rebase to latest trunk and submit new rev? it doesn't apply currently.\n\nHi [~szetszwo], since the fix is a quite intuitive one liner, and it's pretty challenging to write a test case, do you think we can just commit the fix after jenkins? thanks.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-10T17:10:55.300+0000","updated":"2014-09-10T17:10:55.300+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14128983","id":"14128983","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12667795/HDFS-6621_problem1.patch\n  against trunk revision b67d5ba.\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The test build failed in hadoop-hdfs-project/hadoop-hdfs \n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/7987//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7987//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-09-10T19:42:51.397+0000","updated":"2014-09-10T19:42:51.397+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14130337","id":"14130337","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"body":"+1 LGTM, I'll commit this shortly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-11T17:27:25.671+0000","updated":"2014-09-11T17:27:25.671+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14130347","id":"14130347","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"body":"Committed to trunk and branch-2. Thanks Rafal and Benjamin for code, Yongjun and Nicholas for reviewing. Let's file a follow-on for the second part of the problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-11T17:33:55.471+0000","updated":"2014-09-11T17:33:55.471+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14130355","id":"14130355","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"body":"Filed HDFS-7048 for problem 2, hopefully I captured the problem statement correctly in the JIRA description. Thanks again all.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-11T17:39:06.713+0000","updated":"2014-09-11T17:39:06.713+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14130381","id":"14130381","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~andrew.wang], and all of you!\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-11T17:49:28.448+0000","updated":"2014-09-11T17:49:28.448+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14131397","id":"14131397","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Yarn-trunk #678 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/678/])\nHDFS-6621. Hadoop Balancer prematurely exits iterations. Contributed by Rafal Wodjdyla and Benjamin Bowman. (wang: rev d1dab6cc63abf5d44533ad9b39e32c582327627b)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/balancer/Dispatcher.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-09-12T11:16:03.897+0000","updated":"2014-09-12T11:16:03.897+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14131534","id":"14131534","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk #1894 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1894/])\nHDFS-6621. Hadoop Balancer prematurely exits iterations. Contributed by Rafal Wodjdyla and Benjamin Bowman. (wang: rev d1dab6cc63abf5d44533ad9b39e32c582327627b)\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/balancer/Dispatcher.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-09-12T13:44:51.651+0000","updated":"2014-09-12T13:44:51.651+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12724955/comment/14131566","id":"14131566","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-Hdfs-trunk #1869 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1869/])\nHDFS-6621. Hadoop Balancer prematurely exits iterations. Contributed by Rafal Wodjdyla and Benjamin Bowman. (wang: rev d1dab6cc63abf5d44533ad9b39e32c582327627b)\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/balancer/Dispatcher.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-09-12T14:04:40.077+0000","updated":"2014-09-12T14:04:40.077+0000"}],"maxResults":40,"total":40,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-6621/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1xdxr:"}}