{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12560837","self":"https://issues.apache.org/jira/rest/api/2/issue/12560837","key":"HDFS-3540","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321657","id":"12321657","description":"1.2.0 release","name":"1.2.0","archived":false,"released":true,"releaseDate":"2013-05-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-06-15T22:12:12.407+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed May 15 05:15:50 UTC 2013","customfield_12310420":"245721","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_756403057_*|*_1_*:*_2_*:*_10401224946_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2012-10-23T01:11:51.236+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-3540/watchers","watchCount":14,"isWatching":false},"created":"2012-06-15T21:51:23.255+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321657","id":"12321657","description":"1.2.0 release","name":"1.2.0","archived":false,"released":true,"releaseDate":"2013-05-13"}],"issuelinks":[{"id":"12368476","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12368476","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12645519","key":"HDFS-4782","self":"https://issues.apache.org/jira/rest/api/2/issue/12645519","fields":{"summary":"backport edit log corruption toleration to branch-1-win","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12357121","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12357121","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12558667","key":"HDFS-3479","self":"https://issues.apache.org/jira/rest/api/2/issue/12558667","fields":{"summary":"backport HDFS-3335 (check for edit log corruption at the end of the log) to branch-1","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12357120","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12357120","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12559922","key":"HDFS-3521","self":"https://issues.apache.org/jira/rest/api/2/issue/12559922","fields":{"summary":"Allow namenode to tolerate edit log corruption","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-15T05:15:50.161+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312926","id":"12312926","name":"namenode"}],"timeoriginalestimate":null,"description":"*Recovery Mode*: HDFS-3479 backported HDFS-3335 to branch-1.  However, the recovery mode feature in branch-1 is dramatically different from the recovery mode in trunk since the edit log implementations in these two branch are different.  For example, there is UNCHECKED_REGION_LENGTH in branch-1 but not in trunk.\n\n*Edit Log Toleration*: HDFS-3521 added this feature to branch-1 to remedy UNCHECKED_REGION_LENGTH and to tolerate edit log corruption.\n\nThere are overlaps between these two features.  We study potential further improvement in this issue.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12546530","id":"12546530","filename":"h3540_20120925.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-25T15:22:51.922+0000","size":2333,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12546530/h3540_20120925.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12546701","id":"12546701","filename":"h3540_20120926.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-26T14:17:01.219+0000","size":3633,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12546701/h3540_20120926.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12548346","id":"12548346","filename":"h3540_20120927.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-10-09T01:27:00.285+0000","size":5184,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12548346/h3540_20120927.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12548691","id":"12548691","filename":"h3540_20121009.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-10-11T03:10:29.783+0000","size":6432,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12548691/h3540_20121009.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12545467","id":"12545467","filename":"HDFS-3540-b1.004.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-17T20:12:39.018+0000","size":31752,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12545467/HDFS-3540-b1.004.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"35045","customfield_12312823":null,"summary":"Further improvement on recovery mode and edit log toleration in branch-1","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13295955","id":"13295955","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Let's keep our discussion on JIRA so that other people could comment on it. I have filed HDFS-3540 for this purpose.\n\nOk. Since I noticed that there are a bunch of people watching HDFS-3521, but nobody watching HDFS-3540 (yet?), I hope you don't mind if I repost this comment twice. I do apologize for the potential inbox spam.\n\nI think rather than tolerating a configurable amount of edit log corruption, we should just never tolerate any corruption.\n\nBasically, what I am saying is that UNCHECKED_REGION_LENGTH was a mistake. It was my mistake, and I don't blame you for trying to fix it. However, the current fix still assumes that there is someone who would want UNCHECKED_REGION_LENGTH. I do not think any people like that exist!\n\nDoes that make sense? I can post a patch if that would be helpful.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-15T22:12:12.407+0000","updated":"2012-06-15T22:12:12.407+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13295962","id":"13295962","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Colin: ... I do not think any people like that exist!\nbq. Nicholas: As mentioned by Suresh, edit log toleration is a very useful [feature].\n\nUnder what circumstances would you turn this on?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-15T22:27:00.405+0000","updated":"2012-06-15T22:27:00.405+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13295972","id":"13295972","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. I think rather than tolerating a configurable amount of edit log corruption, we should just never tolerate any corruption.\nWhy and How does one recover from such condition?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-15T22:40:49.275+0000","updated":"2012-06-15T22:40:49.275+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13295975","id":"13295975","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Why and How does one recover from such condition?\n\nUsing recovery mode.\n\nWe've used this in the field with customer problems, and it has worked very well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-15T22:44:43.925+0000","updated":"2012-06-15T22:44:43.925+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13443002","id":"13443002","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"If the edit log is not corrupted, both recovery mode and edit log toleration are not useful.  Note that recovery mode here means recovery mode in branch-1 but not the one in trunk.\n\nWhen an edit log is corrupted, NN cannot start up normally.  We compare recovery mode and edit log toleration below.\n\n*Recovery Mode*\n- \"Recovery\" here means starting NN with a corrupted edit log.  It is unable to recover the corrupted edit log or transactions.\n- There is a namenode command option \"hadoop namenode -recover\" to enter recovery mode.\n- When reading the first corrupted transaction in the edit log, it prompts the admin to either \"stop reading\" or \"quit without saving\".\n- If \"stop reading\" is selected, NN ignores the remaining edit log (from the first corrupted transaction to the end of the edit log) and then starts up as usual.\n- There is a \"-force\" option to FORCE_FIRST_CHOICE, i.e. it is a non-interactive mode.\n- If there is a stray OP_INVALID byte, it could be misinterpreted as an end-of-log and lead to silent data loss.  Recovery Mode does not help.\n(Please help out if I have missed anything.)\n\n*Edit Log Toleration*\n- It has a conf property \"dfs.namenode.edits.toleration.length\" for setting the toleration length.\n- The default toleration length is -1, i.e. disable it.  The feature is enabled when the value >= 0.\n- When the feature is enabled, it always reads the entire edit log, computes read length, corruption length and padding length and shows the following summary\n{noformat}\n2012-08-27 22:04:38,625 INFO  - Checked the bytes after the end of edit log\n  (/Users/szetszwo/hadoop/b-1/build/test/data/dfs/name1/current/edits):\n2012-08-27 22:04:38,625 INFO  -   Padding position  = 876 (-1 means padding not found)\n2012-08-27 22:04:38,625 INFO  -   Edit log length   = 1065\n2012-08-27 22:04:38,625 INFO  -   Read length       = 168\n2012-08-27 22:04:38,625 INFO  -   Corruption length = 708\n2012-08-27 22:04:38,625 INFO  -   Toleration length = 1024 (= dfs.namenode.edits.toleration.length)\n2012-08-27 22:04:38,626 INFO  - Summary: |---------- Read=168 ----------|-- Corrupt=708 --|-- Pad=189 --|\n2012-08-27 22:04:38,626 WARN  - Edit log corruption detected:\n  corruption length = 708 <= toleration length = 1024; the corruption is tolerable.\n{noformat}\n- When toleration length is set to 0, it makes sure that there is no corruption in the entire log, including the padding.  A stray OP_INVALID byte won't be misinterpreted as an end-of-log.\n- When toleration length is set to >0, NN starts up only if corruption length <= toleration length.  If corruption length > toleration length, it throws an exception as below\n{noformat}\n2012-08-27 22:04:39,123 INFO  - Start checking end of edit log (/Users/szetszwo/hadoop/b-1/build/test/data/dfs/name1/current/edits) ...\n2012-08-27 22:04:39,123 DEBUG - found: bytes[0]=0xFF=pad, firstPadPos=169\n2012-08-27 22:04:39,123 DEBUG - reset: bytes[1410]=0xAB, pad=0xFF\n2012-08-27 22:04:39,124 DEBUG - found: bytes[1411]=0xFF=pad, firstPadPos=1580\n2012-08-27 22:04:39,124 INFO  - Checked the bytes after the end of edit log (/Users/szetszwo/hadoop/b-1/build/test/data/dfs/name1/current/edits):\n2012-08-27 22:04:39,124 INFO  -   Padding position  = 1580 (-1 means padding not found)\n2012-08-27 22:04:39,124 INFO  -   Edit log length   = 2638\n2012-08-27 22:04:39,124 INFO  -   Read length       = 169\n2012-08-27 22:04:39,124 INFO  -   Corruption length = 1411\n2012-08-27 22:04:39,124 INFO  -   Toleration length = 1024 (= dfs.namenode.edits.toleration.length)\n2012-08-27 22:04:39,125 INFO  - Summary: |---------- Read=169 ----------|-- Corrupt=1411 --|-- Pad=1058 --|\n2012-08-27 22:04:39,125 ERROR - FSNamesystem initialization failed.\njava.io.IOException: Edit log corruption detected:\n  corruption length = 1411 > toleration length = 1024; the corruption is intolerable.\n\tat org.apache.hadoop.hdfs.server.namenode.FSEditLog.checkEndOfLog(FSEditLog.java:609)\n\t...\n{noformat}\n- Therefore, the recommanded setting is to set the conf to 0 (or a small number).  When corruption is detected (i.e. NN cannot start up), the corruption length can be read from the log.  Then, admin could decide whether they are willing to tolerate the corruption or they could try to recover the edit log by other means.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-28T07:07:17.781+0000","updated":"2012-08-28T07:07:17.781+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13443375","id":"13443375","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Nicholas,\n\nYour summary seems reasonable to me overall.  I agree with you that the recommended setting for edit log toleration should be disabled.  Is there anything left to do for this JIRA?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-28T18:44:18.337+0000","updated":"2012-08-28T18:44:18.337+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13444659","id":"13444659","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"If I have not missed anything, there are two risks in the branch-1 Recovery Mode feature:\n# If there is a stray OP_INVALID byte, it could be misinterpreted as an end-of-log and lead to silent data loss.\n# Recovery Mode does not consider the corruption length.  If an edit log is corrupted in the beginning and the admin mistakenly selects \"stop reading\" in Recovery Mode, then a large portion of the edit log is ignored.  It could cause unnecessary data loss even if the edit log has been backed up since datanodes will delete data.  In many cases, such data loss could be prevented or reduced because the edit log could possibly be recovered by other means.  This case arguably is an operation mistake.  However, Recovery Mode enables such mistake.\n\nThe Edit Log Toleration feature does not have these two risks if the toleration length is set to 0 (or a small number).  Edit Log Toleration always checks all bytes in the edit log, so #1 won't happen.  For #2, the length of corrupted data being tolerated is limited by the toleration length.  If an edit log is corrupted in the beginning and the corrupted length is large, then it will throw an exception.\n\nTherefore, I suggest to remove Recovery Mode from branch-1 and change the default toleration length to 0.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-30T04:10:40.711+0000","updated":"2012-08-30T04:10:40.711+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13444776","id":"13444776","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. If I have not missed anything, there are two risks in the branch-1 Recovery Mode feature:  If there is a stray OP_INVALID byte, it could be misinterpreted as an end-of-log and lead to silent data loss.\n\nRecovery mode will always prompt before doing anything which could lead to data loss.  So no, stray {{OP_INVALID}} bytes will not lead to silent data loss.\n\nActually, looking at change 1349086, which was introduced by HDFS-3521, I see that it broke end-of-file checking by default.  Since {{dfs.namenode.edits.toleration.length}} is -1 by default, {{FSEditLog#checkEndOfLog}} is never invoked.  However, this is not a problem with Recovery Mode; it's a problem with change 1349086.\n\nbq. Recovery Mode does not consider the corruption length.\n\nRecovery Mode does consider the corruption length.  The location at which the problem occurred is printed out.  This is the message \"Failed to parse edit log (<file name>) at position <position>, edit log length is <length>...\"  This information is provided to allow the system administrator to make an informed decision.\n\nbq. Therefore, I suggest to remove Recovery Mode from branch-1 and change the default toleration length to 0.\n\nRecovery mode has already proven itself useful in the field in code lines derived from branch-1.  I don't see any reason to remove it.\n\nI agree that {{dfs.namenode.edits.toleration.length}} should be 0 by default.\n\nAt the end of the day, both edit log toleration and Recovery Mode can cause data loss.  The difference is that Recovery Mode will prompt the system administrator before hand, and edit log toleration will not.  This is the reason why I opposed edit log toleration originally, and it's the reason why I believe it should be off by default now.  Silent data loss is not a feature-- not one that we want, anyway.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-30T08:05:19.418+0000","updated":"2012-08-30T08:05:19.418+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13444890","id":"13444890","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vicaya","name":"vicaya","key":"vicaya","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luke Lu","active":true,"timeZone":"America/Los_Angeles"},"body":"It seems to me that recovery mode and edit log toleration serve different purposes. The latter is necessary for an HA setup, where admin explicitly set a small toleration length for tail corruption. The former is useless in an HA setup and suitable for manual recovery.\n\nEdit log toleration is adequate as is. Recovery mode needs more patches (more details of errors etc.) to serve the interactive recovery use case better.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vicaya","name":"vicaya","key":"vicaya","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luke Lu","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-30T11:47:58.385+0000","updated":"2012-08-30T11:47:58.385+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13444975","id":"13444975","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"{quote}\nRecovery mode will always prompt before doing anything which could lead to data loss. So no, stray OP_INVALID bytes will not lead to silent data loss.\n\nActually, looking at change 1349086, which was introduced by HDFS-3521, I see that it broke end-of-file checking by default. Since dfs.namenode.edits.toleration.length is -1 by default, FSEditLog#checkEndOfLog is never invoked. However, this is not a problem with Recovery Mode; it's a problem with change 1349086.\n{quote}\nBefore HDFS-3521, there is a UNCHECKED_REGION_LENGTH in Recovery Mode.  If a stray OP_INVALID byte is within the unchecked region, it will cause silent data loss.\n\n{quote}\nRecovery Mode does consider the corruption length. The location at which the problem occurred is printed out. This is the message \"Failed to parse edit log (<file name>) at position <position>, edit log length is <length>...\" This information is provided to allow the system administrator to make an informed decision.\n{quote}\nYou still do not know the corruption length since there may be padding at the end.  System admins won't know the padding length and so they won't be able to know the corruption length.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-30T14:22:43.014+0000","updated":"2012-08-30T14:22:43.014+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13445159","id":"13445159","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. It seems to me that recovery mode and edit log toleration serve different purposes. The latter is necessary for an HA setup, where admin explicitly set a small toleration length for tail corruption. The former is useless in an HA setup and suitable for manual recovery.\n\n\"Edit log toleration\" is not necessary for an HA setup.  In fact, it is impossible to configure \"edit log toleration\" together with an HA setup, because \"edit log toleration\" is only available in branch-1 (but not later branches), and HA is only available in branch-2 and later.\n\nbq. Edit log toleration is adequate as is. Recovery mode needs more patches (more details of errors etc.) to serve the interactive recovery use case better.\n\nPatches are welcome.  Check out the design doc for HDFS-3004, which gives an overview:\nhttps://issues.apache.org/jira/secure/attachment/12542798/recovery-mode.pdf","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-30T18:20:21.376+0000","updated":"2012-08-30T18:20:21.376+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13445179","id":"13445179","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Before HDFS-3521, there is a UNCHECKED_REGION_LENGTH in Recovery Mode. If a stray OP_INVALID byte is within the unchecked region, it will cause silent data loss.\n\nNicholas, you didn't address the main point of my comment, which is that after HDFS-3521, if a stray OP_INVALID byte is found anywhere in the log, it will cause silent data loss-- unless the sysadmin configures {{dfs.namenode.edits.toleration.length}} to something other than the default.  Based on your earlier comments, I think we both agree that this should not be the default.  Let's fix this (independently of everything else were discussing here.)\n\nbq. You still do not know the corruption length since there may be padding at the end. System admins won't know the padding length and so they won't be able to know the corruption length.\n\nThe padding length is going to be a megabyte at most.  Since the edit log files are fairly large, you should have a good idea of what percentage through the file you are.  If you have an idea for improving the error messages of {{FSEditLog.java}}, perhaps you should file a JIRA for that?  It's not directly relevant here, though, since all methods of manual recovery will face the same issues.\n\nbq. Before HDFS-3521, there is a UNCHECKED_REGION_LENGTH in Recovery Mode...\n\nI want to emphasize one thing here: {{UNCHECKED_REGION_LENGTH}} is *not* part of Recovery Mode.  If you look at the history {{FSEditLog.java}}, you'll see that change 1325075 (HDFS-3055) introduced Recovery mode, but not {{UNCHECKED_REGION_LENGTH}}.  This was introduced in HDFS-3479 (the backport of HDFS_3335 to branch-1).  Please see this comment, introduced by HDFS-3479:\n\n{code}\n+    /** The end of the edit log should contain only 0x00 or 0xff bytes.\n+     * If it contains other bytes, the log itself may be corrupt.\n+     * It is important to check this; if we don't, a stray OP_INVALID byte\n+     * could make us stop reading the edit log halfway through, and we'd never\n+     * know that we had lost data.\n+     *\n+     * We don't check the very last part of the edit log, in case the\n+     * NameNode crashed while writing to the edit log.\n+     */\n{code}\n\nI encourage anyone interested in this to check out the history of {{FSEditLog.java}}.  It's a very good guide and it will make understanding this discussion much easier.\n\nAs I said before, I still think we should get rid of the unchecked region altogether.  But this has nothing to do with Recovery Mode, it has to do with HDFS-3479.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-08-30T18:39:10.569+0000","updated":"2012-08-30T18:39:10.569+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13447093","id":"13447093","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"{quote}\nI want to emphasize one thing here: UNCHECKED_REGION_LENGTH is not part of Recovery Mode. If you look at the history FSEditLog.java, you'll see that change 1325075 (HDFS-3055) introduced Recovery mode, but not UNCHECKED_REGION_LENGTH. This was introduced in HDFS-3479 (the backport of HDFS_3335 to branch-1). ...\n{quote}\nCorrect me if I am wrong: Recovery Mode without HDFS-3479 means the entire end-of-log is not checked and, therefore, the silent data loss length is not limited.  It is even worst.\n\nThe only feature in branch-1 Recovery Mode is to let user to choose \"stop reading\" or \"quit without saving\".  \"Stop reading\" may lead to silent data loss.  \"Quit without saving\" is the same as NN failing to start up.  Thus, I suggest to remove branch-1 Recovery Mode\n\n{quote}  \nThe padding length is going to be a megabyte at most. Since the edit log files are fairly large, you should have a good idea of what percentage through the file you are. ...\n{quote}\nA megabyte could contain hundreds or thousands of edit log transactions.  It is catastrophic in production clusters.  Also, the percentage here may not be relevant since the transactions at the end are the latest transactions and, very likely, are the most important transactions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-03T02:49:32.658+0000","updated":"2012-09-03T02:49:32.658+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13447906","id":"13447906","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Correct me if I am wrong: Recovery Mode without HDFS-3479 means the entire end-of-log is not checked and, therefore, the silent data loss length is not limited. It is even worst.\n\nNo, that is incorrect.\n\nRecovery mode has always read up to the end of the log, and it always will.  The confusion arises because sometimes we are not very good at determining where the \"end of the log\" is.\n\nI filed and implemented HDFS-3479 because I noticed that in certain scenarios we would decide that the edit log ended before it really did because we spotted an {{OP_INVALID}}.\n\nThe unchecked region which we've been discussing only applied to HDFS-3479 corruption, not to any other type of corruption.  Frankly, the unchecked region was a mistake.\n\nHowever, none of this has *anything* to do with recovery mode.  HDFS-3004 and HDFS-3479 were separate JIRAs, that implemented separate features.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-04T18:30:09.715+0000","updated":"2012-09-04T18:30:09.715+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13448185","id":"13448185","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"{quote}\n>    Correct me if I am wrong: Recovery Mode without HDFS-3479 means the entire end-of-log is not checked and, therefore, the silent data loss length is not limited. It is even worst.\n\nNo, that is incorrect.\n\nRecovery mode has always read up to the end of the log, and it always will. The confusion arises because sometimes we are not very good at determining where the \"end of the log\" is.\n{quote}\n\nI should be more specific: For Recovery Mode without HDFS-3479, if there is corruption in the middle of the edit log and the user chooses \"stop reading\" in recovery mode, then the remaining data of the edit log will not be checked.  Is it correct?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-04T23:22:11.979+0000","updated":"2012-09-04T23:22:11.979+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13448277","id":"13448277","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. I should be more specific: For Recovery Mode without HDFS-3479, if there is corruption in the middle of the edit log and the user chooses \"stop reading\" in recovery mode, then the remaining data of the edit log will not be checked. Is it correct?\n\nYes, if the user chooses \"stop reading\" in Recovery Mode, the rest of the edit log will be discarded.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-05T00:44:09.167+0000","updated":"2012-09-05T00:44:09.167+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13448357","id":"13448357","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"Here's a table of the abilities of the two features (Recovery mode and edit log toleration):\n\n|| ||skip over edits||discard the end of the edit log||requires administrator intervention||\n|edit log toleration|no|yes|no|\n|edit log recovery mode|branch-2 and later|yes|yes|\n\nWe have considered enhancing RM in branch-1 so that it can skip over certain edits.  When handling corruptions caused by HDFS-3652, it would have been nice to have this capability.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-05T00:58:46.584+0000","updated":"2012-09-05T00:58:46.584+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13448673","id":"13448673","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"First of all, let's focus the discussion in branch-1 since edit log recovery mode feature in branch-1 and >= branch-2 are quite different.\n\nThe main issue of branch-1 recovery mode is silent data loss.  A minor issue is that it does not provide useful features: it only let admin to choose \"stop reading\" or \"quit without saving\".  \"Stop reading\" can be done by setting toleration length and \"quit without saving\" simply means that NN cannot start up.\n\nFor edit log toleration, admin could first set toleration length to zero.  If corruption is found, the admin could change the toleration length accordingly.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-05T12:35:19.961+0000","updated":"2012-09-05T12:35:19.961+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13448934","id":"13448934","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. The main issue of branch-1 recovery mode is silent data loss.\n\nRecovery Mode prompts the sysadmin before doing anything.  Edit Log Toleration never prompts.\n\nRecovery Mode can't be turned on in the configuration.  Edit Log Toleration can only be turned on in the configuration.\n\nIt is Edit Log Toleration that can lead to silent data loss.  Recovery Mode never does.\n\nbq. A minor issue is that it does not provide useful features: it only let admin to choose \"stop reading\" or \"quit without saving\". \"Stop reading\" can be done by setting toleration length and \"quit without saving\" simply means that NN cannot start up.\n\nIf we need to add more functionality, then let's add more functionality, not remove it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-05T18:00:23.990+0000","updated":"2012-09-05T18:00:23.990+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13448966","id":"13448966","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"Let me go into a little more detail here.\n\nWhen we were originally talking about Recovery Mode, one big concern we had was that system administrators would overuse Recovery Mode to fix issues that might be better addressed in a different way.  Of course, it's impossible to prevent all misuse-- human beings are not perfect, and any tool can be misused.  That's the reason why we made recovery mode a startup option, rather than a configuration.  It would be too easy for people to set the configuration and then leave it set even after the problem was gone.  That's also the reason why an NameNode in RM exits as soon as it has loaded the edit log and written a new FSImage.  This was all discussed in HDFS-3004.\n\nObviously edit log toleration goes against those assumptions, and in a way that frankly, I think is very dangerous.\n\nRecovery Mode is generally an extensible concept.  Since it has nothing to do with the physical structure of the edit log on-disk, it can be extended to handle arbitrary types of corruption.  For example, what if you encounter an edit that relies on a directory that doesn't exist (because of corruption earlier in the log)?  This is something that recovery mode could conceivably handle by displaying a prompt and asking \"would you like to create the parent directory for the directory this edit references?\"\n\nEdit Log Toleration is not extensible.  It can only ever handle one type of corruption: tail corruption.  But we rarely see tail corruption any more, since FSEditLog preallocation was improved in branch-1 (HDFS-3596).  I can't think of a single case of tail corruption we've seen in the past few months.  Many of the cases of corruption we've seen have been HDFS-3652, and edit log toleration is inherently useless for this purpose.  Missing features can be fixed; inherent uselessness cannot.\n\nAnd these are just the technical arguments.  There's many more convincing process-based arguments.  branch-1 is a stable branch.  We should be fixing bugs, not making major changes.  We should be trying to minimize the divergence between branch-1 and branch-2, not amplify it.  People already know how to use recovery mode.  We're not going to retrain people to use an (in my opinion more error-prone) system that does the same thing.\n\nLet's just fix the bugs we have (I have pointed out some in this thread), get stuff working, and focus our efforts on the future not the past.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-05T18:22:23.140+0000","updated":"2012-09-05T18:22:23.140+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13449369","id":"13449369","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Colin, you keep mentioning HDFS-3004 or the recovery mode feature in trunk.  However, we are talking about branch-1 recovery mode here.\n\n> ... There's many more convincing process-based arguments. branch-1 is a stable branch. We should be fixing bugs, not making major changes. We should be trying to minimize the divergence between branch-1 and branch-2, not amplify it. People already know how to use recovery mode. We're not going to retrain people to use an (in my opinion more error-prone) system that does the same thing.\n\nThe branch-1 recovery mode feature is not yet released.  If the new feature has problems, we should remove it.  It is not a point if people already know how to use it.  If there are people using development code, they have to get prepared that the un-released new feature may be changed or removed.\n\nAlso, we don't not have to minimize the divergence between branch-1 and branch-2.  We usually add new features to branch-2 but not branch-1.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-06T02:18:50.192+0000","updated":"2012-09-06T02:18:50.192+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13450182","id":"13450182","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Hi Colin, you keep mentioning HDFS-3004 or the recovery mode feature in trunk. However, we are talking about branch-1 recovery mode here.\n\nThe reason why I mentioned HDFS-3004 is because the original design doc contains a good explanation of why recovery mode should not be enabled in normal operation:\n\n{code}\nWhy can't we simply do recovery as part of normal NameNode operation?  Well,\nrecovery may involve destructive changes to the NameNode metadata.  Since the\nmetadata is corrupt, we will have to use guesswork to get back to a valid\nstate.\n{code}\n\nThis issue is the same in both branch-1 and later branches: if you have to guess, you shouldn't make the process automatic.\n\nbq. The branch-1 recovery mode feature is not yet released. If the new feature has problems, we should remove it. It is not a point if people already know how to use it. If there are people using development code, they have to get prepared that the un-released new feature may be changed or removed.\n\nIt would be inconvenient for us to remove RM for branch-1.  I am willing to consider it, but I just don't think the arguments presented here so far have been convincing.\n\nI think the first thing we need to answer is what is the use case for edit log toleration?  What are your guidelines for when edit log toleration should be turned on?  This has never been clear to me.  It seems to me if you wanted to get higher availability, you would be better off implementing edit log failover in branch-1.\n\nAt the very least, it would be nice to have a document explaining who the intended users are for edit log toleration, why they would use it rather than something else, and what the risks are.  At that point we could start to consider what the best resolution for this is-- whatever that may be.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-06T23:51:15.270+0000","updated":"2012-09-06T23:51:15.270+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13452697","id":"13452697","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"body":"Error toleration is a useful feature when namenode continues to function without manual intervention. This helps in HA setup. That said, I think recovery mode may be useful if a cluster admin choses to make it manual.\n\nFrom what I understand based on previous comments, it allows an operator to continue with corrupt editlog or abort. Not sure if abort is really a choice. What would one do after abort? To that end, Nicholas, some of the information you print such as the editlog length, corruption lenght and padding length etc. should be printed in recovery mode. This information will be useful when one wants to continue ignoring the corrupt part of the editlog.\n\nGiven this, I would leave recovery mode alone and not remove it. Perhaps we should consider printing more information during recovery to help an admin understand the state of the editlog. Is that possible?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-11T03:56:27.183+0000","updated":"2012-09-11T03:56:27.183+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13453222","id":"13453222","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. From what I understand based on previous comments, it allows an operator to continue with corrupt editlog or abort. Not sure if abort is really a choice. What would one do after abort?\n\nThe first thing to try is moving aside the edit log directory that had the problem and seeing if you can reload with another one of the directories.  If it's a random I/O corruption, normally only one of the copies of the edit log stored on disk will be bad.  Since there's no edit log failover in branch-1, you have to do it yourself.  If all the copies are corrupt, it may be necessary to use a hex editor on the edit log, or a similar technique.  The offset of the failure is provided so you can check it out manually.\n\nbq. Perhaps we should consider printing more information during recovery to help an admin understand the state of the editlog. Is that possible?\n\nNicholas mentioned earlier that it might be helpful to print out how many bytes are left in the log-- even though this can be computed from the information provided, it could be helpful to be more explicit about it.\n\nThere may be other information that can be printed out too-- I'll take a look.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-11T17:42:50.854+0000","updated":"2012-09-11T17:42:50.854+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13453547","id":"13453547","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"For the suggestion on printing the corruption/padding lengths, it may not be possible in recovery mode unless it has two passes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-11T23:25:12.338+0000","updated":"2012-09-11T23:25:12.338+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13454176","id":"13454176","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"Well, we do have access to the FileChannel, so seeking is possible.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-12T17:56:51.721+0000","updated":"2012-09-12T17:56:51.721+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13457276","id":"13457276","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"This patch integrates edit log toleration with Recovery Mode, so that both can be turned on at the same time without interfering with one another.  It also fixes a bug where we would not do HDFS-3335-style checking of the end of the log unless edit log toleration was enabled.\n\nThis patch also contains a small improvement to Recovery Mode: RM now prints out the approximate remaining length of the edit log file.  By this, I mean the length of the file that remains, minus the length of the padding bytes.  This should help the system administrator get a better idea of how many bytes of edits he is discarding if he chooses \"stop reading the edit log here.\"\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-17T20:12:39.020+0000","updated":"2012-09-17T20:12:39.020+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13457282","id":"13457282","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12545467/HDFS-3540-b1.004.patch\n  against trunk revision .\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/3199//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2012-09-17T20:22:45.701+0000","updated":"2012-09-17T20:22:45.701+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13462863","id":"13462863","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Colin, thanks for posting a patch.  As you mentioned, branch-1 is a stable branch so that it is better to minimize the change.  Let's change the default toleration length to 0.  Then, user could see all the length information before using recovery mode.  Does it sound good to you?\n\nh3540_20120925.patch: changes the default toleration length to 0.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-25T15:22:51.923+0000","updated":"2012-09-25T15:22:51.923+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13462880","id":"13462880","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12546530/h3540_20120925.patch\n  against trunk revision .\n\n    {color:red}-1 patch{color}.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/3230//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2012-09-25T15:34:23.683+0000","updated":"2012-09-25T15:34:23.683+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13463454","id":"13463454","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Hi Colin, thanks for posting a patch. As you mentioned, branch-1 is a stable branch so that it is better to minimize the change. Let's change the default toleration length to 0. Then, user could see all the length information before using recovery mode. Does it sound good to you?\n\nThis seems reasonable to me.  \n\nIt seems like if we're going to go this route, specifying {{\\-recover}} should also cause {{edit.log.toleration}} to be set to -1 automatically?.  Otherwise Recovery Mode will not work, and the user will probably be confused as to why.  Perhaps a change like this?\n\n{code}\ndiff --git a/src/hdfs/org/apache/hadoop/hdfs/server/namenode/FSImage.java b/src/hdfs/org/apache/hadoop/hdfs/server/namenode/FSImage.java\nindex e4e5045..82d70b4 100644\n--- a/src/hdfs/org/apache/hadoop/hdfs/server/namenode/FSImage.java\n+++ b/src/hdfs/org/apache/hadoop/hdfs/server/namenode/FSImage.java\n@@ -1031,7 +1031,8 @@ public class FSImage extends Storage {\n     int numEdits = 0;\n     EditLogFileInputStream edits = \n       new EditLogFileInputStream(getImageFile(sd, NameNodeFile.EDITS));\n-    numEdits = FSEditLog.loadFSEdits(edits, editsTolerationLength, recovery);\n+    numEdits = FSEditLog.loadFSEdits(edits, \n+        recovery == null ? editsTolerationLength : -1, recovery);\n     edits.close();\n     File editsNew = getImageFile(sd, NameNodeFile.EDITS_NEW);\n     if (editsNew.exists() && editsNew.length() > 0) {\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-26T01:41:59.233+0000","updated":"2012-09-26T01:41:59.233+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13463455","id":"13463455","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Hi Colin, thanks for posting a patch. As you mentioned, branch-1 is a stable branch so that it is better to minimize the change. Let's change the default toleration length to 0. Then, user could see all the length information before using recovery mode. Does it sound good to you?\n\nThis seems reasonable to me.  \n\nIt seems like if we're going to go this route, specifying {{\\-recover}} should also cause {{edit.log.toleration}} to be set to -1 automatically?.  Otherwise Recovery Mode will not work, and the user will probably be confused as to why.  Perhaps a change like this?\n\n{code}\ndiff --git a/src/hdfs/org/apache/hadoop/hdfs/server/namenode/FSImage.java b/src/hdfs/org/apache/hadoop/hdfs/server/namenode/FSImage.java\nindex e4e5045..82d70b4 100644\n--- a/src/hdfs/org/apache/hadoop/hdfs/server/namenode/FSImage.java\n+++ b/src/hdfs/org/apache/hadoop/hdfs/server/namenode/FSImage.java\n@@ -1031,7 +1031,8 @@ public class FSImage extends Storage {\n     int numEdits = 0;\n     EditLogFileInputStream edits = \n       new EditLogFileInputStream(getImageFile(sd, NameNodeFile.EDITS));\n-    numEdits = FSEditLog.loadFSEdits(edits, editsTolerationLength, recovery);\n+    numEdits = FSEditLog.loadFSEdits(edits, \n+        recovery == null ? editsTolerationLength : -1, recovery);\n     edits.close();\n     File editsNew = getImageFile(sd, NameNodeFile.EDITS_NEW);\n     if (editsNew.exists() && editsNew.length() > 0) {\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-26T01:41:59.250+0000","updated":"2012-09-26T01:41:59.250+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13463846","id":"13463846","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"h3540_20120926.patch: let's prompt the user.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-26T14:15:51.578+0000","updated":"2012-09-26T14:15:51.578+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13463849","id":"13463849","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"\"Cancel Patch\" since Jenkins could not test branch-1.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-26T14:19:28.830+0000","updated":"2012-09-26T14:19:28.830+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13464529","id":"13464529","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"The approach seems reasonable.  However, some changes may be necessary to get the unit tests running, especially TestNameNodeRecovery, which does not alter the default value for edit log toleration, and will not work if there are prompts during the startup process.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-27T07:41:44.208+0000","updated":"2012-09-27T07:41:44.208+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13464776","id":"13464776","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"Colin, thanks for the hint.  Will update the tests.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-09-27T14:31:07.035+0000","updated":"2012-09-27T14:31:07.035+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13472040","id":"13472040","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"Oops, forgot to upload the patch earlier.\n\nh3540_20120927.patch: updates TestNameNodeRecovery.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-10-09T01:27:00.287+0000","updated":"2012-10-09T01:27:00.287+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13472874","id":"13472874","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"It looks reasonable to me.  I think you need to update {{TestEditLogLoading}} to look for the right error message, since changing the default value of edit.log.toleration changes the IOException message that will be thrown.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-10-09T23:59:00.194+0000","updated":"2012-10-09T23:59:00.194+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13473798","id":"13473798","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"h3540_20121009.patch: updates TestEditLogLoading.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-10-11T03:10:29.785+0000","updated":"2012-10-11T03:10:29.785+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13475315","id":"13475315","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"body":"Looks good to me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cmccabe","name":"cmccabe","key":"cmccabe","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cmccabe&avatarId=29060","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cmccabe&avatarId=29060","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cmccabe&avatarId=29060","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cmccabe&avatarId=29060"},"displayName":"Colin P. McCabe","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-10-12T20:19:45.784+0000","updated":"2012-10-12T20:19:45.784+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13478603","id":"13478603","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"{noformat}\n     [exec] -1 overall.  \n     [exec] \n     [exec]     +1 @author.  The patch does not contain any @author tags.\n     [exec] \n     [exec]     +1 tests included.  The patch appears to include 6 new or modified tests.\n     [exec] \n     [exec]     +1 javadoc.  The javadoc tool did not generate any warning messages.\n     [exec] \n     [exec]     +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n     [exec] \n     [exec]     -1 findbugs.  The patch appears to introduce 9 new Findbugs (version 1.3.9) warnings.\n{noformat}\n\nI also have run the unit tests.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-10-18T02:15:41.568+0000","updated":"2012-10-18T02:15:41.568+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13481983","id":"13481983","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"body":"+1 for the patch. Are there any tests for DFS_NAMENODE_EDITS_TOLERATION_LENGTH_KEY set to 0?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-10-23T00:29:47.942+0000","updated":"2012-10-23T00:29:47.942+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13481992","id":"13481992","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"After the default is changed, all existing tests except TestEditLogToleration run with DFS_NAMENODE_EDITS_TOLERATION_LENGTH_KEY==0.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-10-23T00:44:14.688+0000","updated":"2012-10-23T00:44:14.688+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13482009","id":"13482009","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"I have committed this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-10-23T01:11:51.251+0000","updated":"2012-10-23T01:11:51.251+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13482013","id":"13482013","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"> After the default is changed, all existing tests except TestEditLogToleration ...\n\nI should say \"except for a few\" instead since some Recovery Mode tests run with DFS_NAMENODE_EDITS_TOLERATION_LENGTH_KEY == -1.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-10-23T01:14:10.370+0000","updated":"2012-10-23T01:14:10.370+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12560837/comment/13657941","id":"13657941","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattf","name":"mattf","key":"mattf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Foley","active":true,"timeZone":"America/Los_Angeles"},"body":"Closed upon release of Hadoop 1.2.0.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattf","name":"mattf","key":"mattf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Foley","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-05-15T05:15:50.158+0000","updated":"2013-05-15T05:15:50.158+0000"}],"maxResults":46,"total":46,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-3540/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06d13:"}}