{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12851465","self":"https://issues.apache.org/jira/rest/api/2/issue/12851465","key":"HDFS-8855","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329057","id":"12329057","description":"2.8.0 release","name":"2.8.0","archived":false,"released":true,"releaseDate":"2017-03-22"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335732","id":"12335732","description":"3.0.0-alpha1 release","name":"3.0.0-alpha1","archived":false,"released":true,"releaseDate":"2016-09-03"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-08-11T00:10:27.631+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Feb 18 00:07:57 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_2_*:*_1219972374_*|*_4_*:*_1_*:*_535016145_*|*_5_*:*_2_*:*_1908342433_*|*_10002_*:*_3_*:*_6022451643","customfield_12312321":null,"resolutiondate":"2015-11-24T20:59:51.984+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-8855/watchers","watchCount":24,"isWatching":false},"created":"2015-08-04T18:30:09.428+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"10.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12442611","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12442611","type":{"id":"10032","name":"Blocker","inward":"is blocked by","outward":"blocks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"},"inwardIssue":{"id":"12888706","key":"HADOOP-12424","self":"https://issues.apache.org/jira/rest/api/2/issue/12888706","fields":{"summary":"Add a function to build unique cache key for Token.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12450116","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12450116","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12910173","key":"HDFS-9370","self":"https://issues.apache.org/jira/rest/api/2/issue/12910173","fields":{"summary":"TestDataNodeUGIProvider fails intermittently due to non-deterministic cache expiry.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12476331","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12476331","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12993311","key":"HADOOP-13436","self":"https://issues.apache.org/jira/rest/api/2/issue/12993311","fields":{"summary":"RPC connections are leaking due to not overriding hashCode and equals","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-08-30T01:30:18.294+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12319200","id":"12319200","name":"webhdfs","description":"WebHDFS: HTTP REST API for HDFS"}],"timeoriginalestimate":null,"description":"The attached script simulates a process opening ~50 files via webhdfs and performing random reads.  Note that there are at most 50 concurrent reads, and all webhdfs sessions are kept open.  Each read is ~64k at a random position.  \n\nThe script periodically (once per second) shells into the NameNode and produces a summary of the socket states.  For my test cluster with 5 nodes, it took ~30 seconds for the NameNode to have ~25000 active connections and fails.\n\nIt appears that each request to the webhdfs client is opening a new connection to the NameNode and keeping it open after the request is complete.  If the process continues to run, eventually (~30-60 seconds), all of the open connections are closed and the NameNode recovers.  \n\nThis smells like SoftReference reaping.  Are we using SoftReferences in the webhdfs client to cache NameNode connections but never re-using them?","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12751266","id":"12751266","filename":"HDFS_8855.prototype.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"created":"2015-08-19T12:59:20.104+0000","size":4714,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12751266/HDFS_8855.prototype.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12762178","id":"12762178","filename":"HDFS-8855.005.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-24T17:05:16.873+0000","size":20175,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12762178/HDFS-8855.005.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12764121","id":"12764121","filename":"HDFS-8855.006.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-28T22:23:56.180+0000","size":20290,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12764121/HDFS-8855.006.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12764342","id":"12764342","filename":"HDFS-8855.007.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-29T23:23:26.735+0000","size":20669,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12764342/HDFS-8855.007.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12771648","id":"12771648","filename":"HDFS-8855.008.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-10T23:01:12.832+0000","size":21650,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12771648/HDFS-8855.008.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12773565","id":"12773565","filename":"HDFS-8855.009.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-20T18:59:19.427+0000","size":21648,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12773565/HDFS-8855.009.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12751122","id":"12751122","filename":"HDFS-8855.1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-18T21:21:04.129+0000","size":3172,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12751122/HDFS-8855.1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12752882","id":"12752882","filename":"HDFS-8855.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-27T22:48:43.762+0000","size":8661,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12752882/HDFS-8855.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12753053","id":"12753053","filename":"HDFS-8855.3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-28T19:12:13.744+0000","size":8657,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12753053/HDFS-8855.3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12754998","id":"12754998","filename":"HDFS-8855.4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-09T20:52:55.314+0000","size":18780,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12754998/HDFS-8855.4.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Webhdfs client leaks active NameNode connections","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14654107","id":"14654107","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"body":"Reproducer script:\n\n{code}\n#!/bin/bash\n\n# Check that the hadoop command is available\nhadoop fs -help > /dev/null 2> /dev/null\nif [ $? != 0 ]; then\n\techo \"The hadoop command must be in your path\"\n\texit 1\nfi\n\n# segment, op=OPEN and offset are added to url_base                   \nfile_size=${file_size:-$[ 1024 * 1024 * 1024 ]}\ncount=${count:-1000000}\nreads_per_pass=${reads_per_pass:-1000}\nwebhdfs_namenode=${webhdfs_namenode:-\"localhost:50070\"}\nread_size=${read_size:-64000}\nconcurrent_reads=${concurrent_reads:-50}\n\nurl_base=\"http://\"$webhdfs_namenode\"/webhdfs/v1/tmp/bigfile_$$\"\npasses=$[ $count / $reads_per_pass ]\nurl_list_file=/tmp/file_list_$$.txt\nnamenode=${namenode:-`echo $url_base | grep -Po \"(?<=http://)[^:/]*\"`}\n\necho \"Environment settings:\"\necho \"  file_size=$file_size\"\necho \"  count=$count\"\necho \"  reads_per_pass=$reads_per_pass\"\necho \"  webhdfs_namenode=$webhdfs_namenode\"\necho \"  read_size=$read_size\"\necho \"  concurrent_reads=$concurrent_reads\"\necho \"Outputs in /tmp/curl_[out|err]_$$\"\necho \"Computed values:\"\necho \"  url_base=$url_base\"\necho \"  passes=$passes\"\necho \"  url_list_file=$url_list_file\"\necho \"  namenode=$namenode\"\necho\necho \"Copying temp data...\"\nblocks_to_copy=$[ ( $file_size + 1023 ) / 1024 ]\ndd count=$blocks_to_copy bs=1024 if=/dev/zero | tr \"\\0\" \"+\" | hadoop fs -copyFromLocal - /tmp/bigfile_$$\n\necho \"Generating URL list...\"\n# Generate the load profile\nrm -f $url_list_file\nfor j in `seq 1 $reads_per_pass`; do\n  rand=$(od -N 4 -t uL -An /dev/urandom | tr -d \" \")\n  offset=$[ ( $rand % (file_size / read_size) * read_size )]\n  url=$url_base?op=OPEN\\&user.name=$USER\\&offset=$offset\\&length=$read_size\n  echo url = \\\"$url\\\" >> $url_list_file\ndone\n\n# Open $concurrent_reads files and do $reads_per_pass random reads of $read_size \nfor i in `seq 1 $passes` ; do\n  # Kick off concurrent random reads\n  for k in `seq 1 $concurrent_reads`; do\n\tcurl -v -L -K $url_list_file > /tmp/curl_out_$$-$k.txt 2>/tmp/curl_err_$$-$k.txt &\n  done\n  \n  # Wait for all curl jobs to finish\n  while [ `jobs | grep \"Running.*curl\" | wc -l` != 0 ]; do\n    sleep 1s\n\n    # Every second, count the connections on the webhdfs_namenode\n\tssh $namenode \"file=/tmp/netstat.out_\\$\\$ ; netstat -an > \\$file ; echo -n 'ESTABLISHED: '; echo -n \\`grep -c ESTABLISHED \\$file\\` ; echo -n '  TIME_WAIT: '; echo -n \\`grep -c TIME_WAIT \\$file\\` ; echo -n '  CLOSE_WAIT: '; grep -c CLOSE_WAIT \\$file; rm \\$file\"&\n\techo `grep \"HTTP/1.1 [^23]\" /tmp/curl_err_$$-* | wc -l` errors, \"`grep \"HTTP/1.1 200\" /tmp/curl_err_$$-* | wc -l`\" successes\n  done\n\n  # Display the completion time\n  echo -n \"Pass $i   \";\n  date +%H:%M:%S.%N\n  echo Total: `grep \"HTTP/1.1 [^23]\" /tmp/curl_err_$$-* | wc -l` errors, \"`grep \"HTTP/1.1 200\" /tmp/curl_err_$$-* | wc -l`\" successes\n    \n#  sleep $delay\ndone\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"created":"2015-08-04T18:33:07.522+0000","updated":"2015-08-04T18:33:07.522+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14654206","id":"14654206","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"body":"Note: to exacerbate the test-case set the environment to have file_size=1 and read_size=1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"created":"2015-08-04T19:26:12.465+0000","updated":"2015-08-04T19:26:12.465+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14658298","id":"14658298","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"body":"This has the same description as HDFS-7597, although the patch is in the UGI space, which surprises me.  It speaks of the RPC layer caching the NN connection but that cache not being re-used because the UGI is created anew for each webhdfs request.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"created":"2015-08-05T14:34:07.850+0000","updated":"2015-08-05T14:34:07.850+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14660012","id":"14660012","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"body":"I tried running this script against an HDFS-2.6.0 patched with [~daryn]'s original HDFS-7597 patch (just to ensure that my refactoring wasn't a confounding factor), and the issue seems to persist.  It is entirely possible that I messed up my configuration and was accidentally running unpatched code, so take that with a grain of salt.\n\nLooking at the source, my inclination would be to have an LRU (much like the HDFS-7597 patch) attached to the WebHDFS session that would map ugi->HDFS client.  This would keep the client's information and connection state around for re-use, but shut it down once the HTTP session ended.  What do you think, [~xiaobingo]?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"created":"2015-08-06T13:38:46.698+0000","updated":"2015-08-06T13:38:46.698+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14680988","id":"14680988","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"[~bobhansen] This looks good to me. Let's work on this to reduce connections unnecessarily created.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-11T00:10:27.631+0000","updated":"2015-08-11T00:10:27.631+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14692650","id":"14692650","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"Tested HDFS-7597 patch, it’s working well for HDFS-8855.  In my 3 nodes of local VMs, the ESTABLISHED connection varies from 1400 to 2200 as load generator is running.\nThe code path is different in two cases. HDFS-8855 case goes to cache in org.apache.hadoop.ipc.connection. Let’s investigate on that cache.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-12T00:33:02.312+0000","updated":"2015-08-12T00:33:02.312+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14692805","id":"14692805","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"body":"Does 2200 DN->NN connections seem a bit... excessive... for 50 concurrent reads?  If you set the concurrent_reads environment variable to 500, do you end up with 22000 connections (and start running the NN out of ports very quickly)?  If the load scales up linearly with the cluster size (a process on each node reading 50 files), will your NN run out of ports and fail?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"created":"2015-08-12T02:30:52.598+0000","updated":"2015-08-12T02:30:52.598+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14694104","id":"14694104","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"[~bobhansen]\nI was using the sequential work load for results above.\n{noformat}\n#!/bin/bash\n# segment, op=OPEN and offset are added to url_base                   \ncount=${count:-1000000}\n#echo $count\nurl_base=${url_base:-\"http://c6401.ambari.apache.org:50070/webhdfs/v1/tmp/bigfile\"}\n#echo $url_base\nread_size=${read_size:-1}\n#echo $read_size\nfile_size=${file_size:-$[ 1024 * 1024 * 1024 ]}\n#echo $file_size\n#namenode=${namenode:-`echo $url_base | grep -Po \"(?<=http://)[^:/]*\"`}\nnamenode=\"c6401.ambari.apache.org\"\n#echo $namenode\n\nfor i in `seq 1 $count` ; do\n  rand=$(od -N 4 -t uL -An /dev/urandom | tr -d \" \")\n  #echo $rand\n  offset=$[ ( $rand % (file_size / read_size) * read_size )]\n  #echo $offset\n  url=$url_base?op=OPEN\\&offset=$offset\\&length=$read_size\n  #echo $url\n  \n  curl -L \"$url\" > url.blah 2>/dev/null\n  #curl -L \"$url\"\n  if (( $i % 100 == 0 )) ; then\n    # Display the time\n    echo -n \"$i   \";\n    date +%H:%M:%S.%N\n    \n    # Count the connections on the NameNode\n    ssh vagrant@$namenode \"file=/tmp/netstat.out ; netstat -a > \\$file ; echo -n 'ESTABLISHED: '; echo -n \\`grep -c ESTABLISHED \\$file\\` ; echo -n '  TIME_WAIT: '; echo -n \\`grep -c TIME_WAIT \\$file\\` ; echo -n '  CLOSE_WAIT: '; grep -c CLOSE_WAIT \\$file\"&\n  fi\n#  sleep $delay\ndone\n{noformat}\n\nBy running one load generator, I got up to 2200 connections, two to 3200.\n\nAlso ran the concurrent workload, there's up to 7000 connections. Making file_size=1 and read_size=1 does not necessarily exacerbate it. I think it has something to do with my cluster. Three nodes being local VMs. NN/DN/SNN is equally deployed to 3 nodes.\n\nLet's first try to work on the cache of org.apache.hadoop.ipc.connection to have a test again.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-12T20:18:24.800+0000","updated":"2015-08-12T20:18:24.800+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14702003","id":"14702003","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"Made a patch for review. Idea's been to avoid creating brand new DFSClient per webhdfs request, which will create a new NN connection.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-18T21:21:04.139+0000","updated":"2015-08-18T21:21:04.139+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14702025","id":"14702025","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"body":"I don't think this is correct as ugi / dt should be considered when caching connections.\n\nThe connections to NN are supposed to be cached as the RPC layer. That's being said, that this is the wrong place to fix. If the caching is not working then it's a serious bug. We need to dig into the DFSClient / RPC layer to understand what really happened.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-18T21:33:03.294+0000","updated":"2015-08-18T21:33:03.294+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14702169","id":"14702169","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:red}-1{color} | patch |   0m  1s | The patch command could not apply the patch during dryrun. |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12751122/HDFS-8855.1.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / 71aedfa |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/12029/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-18T23:35:22.995+0000","updated":"2015-08-18T23:35:22.995+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14702188","id":"14702188","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"body":"Jitendra and [~daryn] both hypothesized that there is a missed equality check for the UserGroupInfo in the RPC lookup. I believe the theory is that the DataNodeUGIProvider is creating a new ugi each time, and something is checking if newUgi==oldUgi rather than newUgi.equals(oldUgi).  That might be a good place to look, [~wheat9]\n\n[~xiaobingo]: rather than having a static cache of clients, perhaps we should match the client lifecycle to the http session.  We can store the client reference in ChannelHandlerContext attributes, and catch the channelInactive event in the WebHdfsHandler to close the client.  Of course, we need to check that the UGIs match and make sure that the operations don't close the client before the session ends.\n\nI have a prototype of that, but haven't been able to test it yet.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"created":"2015-08-18T23:51:30.123+0000","updated":"2015-08-18T23:51:30.123+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14702964","id":"14702964","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"body":"This patch (which compiles, but hasn't actually been \"tested\" or \"validated\" or \"run\") outlines the integration points that seemed like good places to poke at.  It caches the client in the Netty context, doesn't close it for op=OPEN calls, and explicitly closes it when the session ends.\n\nIt might be useful as the basis for further work, or simply as a strawman to discuss.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"created":"2015-08-19T12:59:20.117+0000","updated":"2015-08-19T12:59:20.117+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14703313","id":"14703313","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:red}-1{color} | patch |   0m  0s | The patch command could not apply the patch during dryrun. |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12751266/HDFS_8855.prototype.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / 2da5aaa |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/12042/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-19T16:39:01.696+0000","updated":"2015-08-19T16:39:01.696+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14703480","id":"14703480","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"body":"This basically shows that the RPC connection cache is not working, but again this is the wrong place to fix.\n\nWe should dig into in this case why RPC connection cache is not working instead of putting a band aid in WebHDFS.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-19T18:00:55.802+0000","updated":"2015-08-19T18:00:55.802+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14703505","id":"14703505","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"body":"Agreed that the RPC cache not working is a bug that should be fixed independently.  It can be argued that caching the whole client object is an additional optimization that has some value here.\n\nBut yes, we should track down why the RPC cache is failing us.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"created":"2015-08-19T18:18:19.809+0000","updated":"2015-08-19T18:18:19.809+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14704102","id":"14704102","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~wheat9] and [~bobhansen] for review. Tracing down to ProtobufRpcEngine that calls Client.getConnection which fetches connection from cache(com.google.common.cache.Cache) by using ConnectionId as key. ConnectionId is different for every webhdfs request even if the url and user are same. That's why the NN connection is constantly created by DN in this case. Need to refactor ConnectionId(hashCode or equals) somehow to meet comparison invariant assumed by cache(com.google.common.cache.Cache) to make it work properly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-20T01:16:29.300+0000","updated":"2015-08-20T01:16:29.300+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14717691","id":"14717691","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"Made patch V2. The proposed fix is to cache UGI in webhdfs to avoid creating brand new UGI for every web request.\n1. In insecure case, remote-user+proxy-user is the key for cache. \n2. In secure case, token is the key. UGI is constructed based on token. It’s necessary to ensure different UGI instance, and thus different connection, given token is changed.\n\nConnection cache is designed to be keyed on UGI instances. Actually, the connection cache is keyed on the 'UGI#Subject' instance instead of the UGI instance, which seems to be the right choice because subject contains the security credentials of the users, and we should allow connection re-use in the same authentication context only.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-27T22:48:43.766+0000","updated":"2015-08-27T22:48:43.766+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14717960","id":"14717960","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:red}-1{color} | pre-patch |  17m 34s | Findbugs (version 3.0.0) appears to be broken on trunk. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |\n| {color:green}+1{color} | javac |   7m 58s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |  10m 19s | There were no new javadoc warning messages. |\n| {color:red}-1{color} | release audit |   0m 21s | The applied patch generated 1 release audit warnings. |\n| {color:red}-1{color} | checkstyle |   1m 20s | The applied patch generated  2 new checkstyle issues (total was 417, now 418). |\n| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 38s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 35s | The patch built with eclipse:eclipse. |\n| {color:red}-1{color} | findbugs |   2m 38s | The patch appears to introduce 3 new Findbugs (version 3.0.0) warnings. |\n| {color:green}+1{color} | native |   3m 20s | Pre-build of native portion |\n| {color:red}-1{color} | hdfs tests | 195m 18s | Tests failed in hadoop-hdfs. |\n| | | 241m  5s | |\n\\\\\n\\\\\n|| Reason || Tests ||\n| FindBugs | module:hadoop-hdfs |\n| Failed unit tests | hadoop.hdfs.TestHDFSTrash |\n|   | hadoop.hdfs.server.namenode.TestFileTruncate |\n|   | hadoop.hdfs.server.blockmanagement.TestComputeInvalidateWork |\n|   | hadoop.hdfs.TestLeaseRecovery2 |\n|   | hadoop.hdfs.server.blockmanagement.TestNodeCount |\n|   | hadoop.hdfs.TestRollingUpgrade |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12752882/HDFS-8855.2.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / a9c8ea7 |\n| Release Audit | https://builds.apache.org/job/PreCommit-HDFS-Build/12179/artifact/patchprocess/patchReleaseAuditProblems.txt |\n| checkstyle |  https://builds.apache.org/job/PreCommit-HDFS-Build/12179/artifact/patchprocess/diffcheckstylehadoop-hdfs.txt |\n| Findbugs warnings | https://builds.apache.org/job/PreCommit-HDFS-Build/12179/artifact/patchprocess/newPatchFindbugsWarningshadoop-hdfs.html |\n| hadoop-hdfs test log | https://builds.apache.org/job/PreCommit-HDFS-Build/12179/artifact/patchprocess/testrun_hadoop-hdfs.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/12179/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf908.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/12179/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-28T02:50:41.814+0000","updated":"2015-08-28T02:50:41.814+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14720070","id":"14720070","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"body":"Xiaobing - is there a race condition in initializing the ugiCache?  If two threads make simultaneous requests, one of them will succeed in the CAS for ugiCacheInit, and the other will proceed ahead.  If the latter thread immediately tries to reference the ugiCache while the first is still initializing it, we will get an NPE or a partially-constructed object.\n\nSee http://www.journaldev.com/1377/java-singleton-design-pattern-best-practices-with-examples for a nice little discussion of idiomatic singletons in Java; if we're supporting JRE <= 1.5, the Pugh construction is clean and works well for concurrent access.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"created":"2015-08-28T16:07:02.462+0000","updated":"2015-08-28T16:07:02.462+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14720421","id":"14720421","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"[~bobthansen] Thanks for review. Although that's called by bootstrap only, it should be thread safe. See patch V3.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-28T19:12:13.748+0000","updated":"2015-08-28T19:12:13.748+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14720493","id":"14720493","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"body":"[~xiaobingo]  Sterling.  Is this something that you can build tests over?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"created":"2015-08-28T20:12:32.582+0000","updated":"2015-08-28T20:12:32.582+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14720646","id":"14720646","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  19m 23s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |\n| {color:green}+1{color} | javac |   9m  7s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |  12m  3s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 23s | The applied patch does not increase the total number of release audit warnings. |\n| {color:red}-1{color} | checkstyle |   1m 30s | The applied patch generated  2 new checkstyle issues (total was 418, now 420). |\n| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 35s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 36s | The patch built with eclipse:eclipse. |\n| {color:red}-1{color} | findbugs |   3m 23s | The patch appears to introduce 1 new Findbugs (version 3.0.0) warnings. |\n| {color:green}+1{color} | native |   3m 40s | Pre-build of native portion |\n| {color:red}-1{color} | hdfs tests |  96m 24s | Tests failed in hadoop-hdfs. |\n| | | 148m  8s | |\n\\\\\n\\\\\n|| Reason || Tests ||\n| FindBugs | module:hadoop-hdfs |\n| Failed unit tests | hadoop.hdfs.server.namenode.TestDeleteRace |\n| Timed out tests | org.apache.hadoop.hdfs.TestBlockReaderFactory |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12753053/HDFS-8855.3.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / cbb2495 |\n| checkstyle |  https://builds.apache.org/job/PreCommit-HDFS-Build/12203/artifact/patchprocess/diffcheckstylehadoop-hdfs.txt |\n| Findbugs warnings | https://builds.apache.org/job/PreCommit-HDFS-Build/12203/artifact/patchprocess/newPatchFindbugsWarningshadoop-hdfs.html |\n| hadoop-hdfs test log | https://builds.apache.org/job/PreCommit-HDFS-Build/12203/artifact/patchprocess/testrun_hadoop-hdfs.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/12203/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf900.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/12203/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-08-28T21:47:11.529+0000","updated":"2015-08-28T21:47:11.529+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14737566","id":"14737566","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"Patch V4. Added some UTs. Can anyone review it? Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-09T20:52:55.318+0000","updated":"2015-09-09T20:52:55.318+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14737936","id":"14737936","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  17m 52s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |\n| {color:green}+1{color} | javac |   8m 15s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |  11m 53s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 27s | The applied patch does not increase the total number of release audit warnings. |\n| {color:red}-1{color} | checkstyle |   1m 29s | The applied patch generated  2 new checkstyle issues (total was 412, now 414). |\n| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 46s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 37s | The patch built with eclipse:eclipse. |\n| {color:red}-1{color} | findbugs |   3m  0s | The patch appears to introduce 1 new Findbugs (version 3.0.0) warnings. |\n| {color:green}+1{color} | native |   3m 47s | Pre-build of native portion |\n| {color:red}-1{color} | hdfs tests | 135m  4s | Tests failed in hadoop-hdfs. |\n| | | 184m 13s | |\n\\\\\n\\\\\n|| Reason || Tests ||\n| FindBugs | module:hadoop-hdfs |\n| Failed unit tests | hadoop.hdfs.TestDFSInputStream |\n|   | hadoop.hdfs.server.namenode.TestNameNodeMetricsLogger |\n| Timed out tests | org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.TestLazyWriter |\n|   | org.apache.hadoop.hdfs.TestLargeBlock |\n|   | org.apache.hadoop.hdfs.tools.TestDFSAdmin |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12754998/HDFS-8855.4.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / 4014ce5 |\n| checkstyle |  https://builds.apache.org/job/PreCommit-HDFS-Build/12363/artifact/patchprocess/diffcheckstylehadoop-hdfs.txt |\n| Findbugs warnings | https://builds.apache.org/job/PreCommit-HDFS-Build/12363/artifact/patchprocess/newPatchFindbugsWarningshadoop-hdfs.html |\n| hadoop-hdfs test log | https://builds.apache.org/job/PreCommit-HDFS-Build/12363/artifact/patchprocess/testrun_hadoop-hdfs.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/12363/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf905.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/12363/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-09-10T01:09:46.891+0000","updated":"2015-09-10T01:09:46.891+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14803351","id":"14803351","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=owen.omalley","name":"owen.omalley","key":"owen.omalley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=owen.omalley&avatarId=29697","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=owen.omalley&avatarId=29697","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=owen.omalley&avatarId=29697","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=owen.omalley&avatarId=29697"},"displayName":"Owen O'Malley","active":true,"timeZone":"America/Los_Angeles"},"body":"I'm looking at the patch, but you'll need to resolve the checkstyle, findbugs, and test case failures.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=owen.omalley","name":"owen.omalley","key":"owen.omalley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=owen.omalley&avatarId=29697","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=owen.omalley&avatarId=29697","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=owen.omalley&avatarId=29697","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=owen.omalley&avatarId=29697"},"displayName":"Owen O'Malley","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-17T18:23:35.695+0000","updated":"2015-09-17T18:23:35.695+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14804547","id":"14804547","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=owen.omalley","name":"owen.omalley","key":"owen.omalley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=owen.omalley&avatarId=29697","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=owen.omalley&avatarId=29697","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=owen.omalley&avatarId=29697","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=owen.omalley&avatarId=29697"},"displayName":"Owen O'Malley","active":true,"timeZone":"America/Los_Angeles"},"body":"A few points:\n* You need to use the Token.getKind(), Token.getIdentifier(), and Token.getPassword() as the key for the cache. The patch currently uses Token.toString, which uses the identifier, kind, and service. The service is set by the client so it shouldn't be part of the match. The password on the other hand must be part of the match so that guessing the identifier doesn't allow a hacker to impersonate the user.\n* The timeout should default to 10 minutes instead of 10 seconds.\n* Please fix the checkstyle and findbugs warnings.\n* Determine what is wrong with the test case.\n\nOther than that, it looks good.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=owen.omalley","name":"owen.omalley","key":"owen.omalley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=owen.omalley&avatarId=29697","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=owen.omalley&avatarId=29697","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=owen.omalley&avatarId=29697","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=owen.omalley&avatarId=29697"},"displayName":"Owen O'Malley","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-17T21:29:52.038+0000","updated":"2015-09-17T21:29:52.038+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14804721","id":"14804721","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~owen.omalley] for the review!\nI made patch V5 to address the issues. There are no specific warnings in findbugs report. The flakey UT failures are irrelevant. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-18T00:05:00.488+0000","updated":"2015-09-18T00:05:00.488+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14804861","id":"14804861","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  19m 53s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |\n| {color:green}+1{color} | javac |   7m 50s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |  10m 23s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 23s | The applied patch does not increase the total number of release audit warnings. |\n| {color:green}+1{color} | checkstyle |   2m 10s | There were no new checkstyle issues. |\n| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 38s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 33s | The patch built with eclipse:eclipse. |\n| {color:red}-1{color} | findbugs |   2m 17s | Post-patch findbugs hadoop-hdfs-project/hadoop-hdfs compilation is broken. |\n| {color:green}+1{color} | findbugs |   2m 17s | The patch does not introduce any new Findbugs (version ) warnings. |\n| {color:red}-1{color} | common tests |   0m 24s | Tests failed in hadoop-common. |\n| {color:red}-1{color} | hdfs tests |   0m 25s | Tests failed in hadoop-hdfs. |\n| | |  46m  2s | |\n\\\\\n\\\\\n|| Reason || Tests ||\n| Failed build | hadoop-common |\n|   | hadoop-hdfs |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12757177/HDFS-8855.005.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / 6b97fa6 |\n| hadoop-common test log | https://builds.apache.org/job/PreCommit-HDFS-Build/12526/artifact/patchprocess/testrun_hadoop-common.txt |\n| hadoop-hdfs test log | https://builds.apache.org/job/PreCommit-HDFS-Build/12526/artifact/patchprocess/testrun_hadoop-hdfs.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/12526/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf909.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/12526/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-09-18T02:16:13.274+0000","updated":"2015-09-18T02:16:13.274+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14876710","id":"14876710","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"Build failures from V5 are due to hadoop-common changes invisible to hdfs. HADOOP-12424 is used to separate the changes. Patch V6 will be posted then.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-18T23:47:49.779+0000","updated":"2015-09-18T23:47:49.779+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14901200","id":"14901200","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"body":"Revisiting the use case  -- how much benefits are we getting from the cache? Is making a connection from DN to NN necessary at all?\n\nThere are two issues that we have experienced in production here:\n\n* DN creates too many connections to the NN when serving WebHDFS requests. It happens when doing distcp over webhdfs in a large cluster (~4,000 nodes)\n* There are a lot of TIME_WAIT connections when DN serves a large mount of concurrent, burst reads. The application sees high variances of latency when there are a lot of TIME_WAIT connections on the NN.\n\nThe current workflow is the following:\n\n1. NN generates a 307 to redirect the client to the DN that is closet to the client\n2. DN receives the request from the client. It creates a new {{DFSClient}}, connects to the NN and creates a {{DFSInputStream}}\n3. It streams the {{DFSInputStream}} to the client as HTTP streams\n\nMy argument argument is that steps (2) and (3) are unnecessary if the DN exposes a {{GET_BLOCK}} call that directly streams the contents of the block. The problem is eliminated at the very beginning.\n\nMy proposal are:\n\n1. Expose a {{GET_BLOCK}} call in the current DN to return the content of a block on the DN.\n2. Create a {{WebBlockReader}} that reads the block from {{GET_BLOCK}}\n3. {{WebHdfsFileSystem}} can use both {{GET_BLOCK_LOCATIONS}} and the {{GET_BLOCK}} to serve the data.\n\nFrom an implementation prospective, there are implementation in the HDFS-7966 branch for (1) already. It is straightforward to implement (2) (it's just a HTTP GET). And (3) can be done by augmenting the responses of {{GET_BLOCK_LOCATIONS}} on whether the DN supports the {{GET_BLOCK}} call.\n\nThoughts?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-21T19:00:50.286+0000","updated":"2015-09-21T19:00:50.286+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14901284","id":"14901284","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"body":"There are two separable issues; this is a performance bug in existing deployments, and your comment is a good outline for a new and improved architecture.\n\nHDFS-7966 and the rest of your proposal could be a very good solution in future versions, but doesn't obviate the performance issue with deployed systems, nor does it answer the current use case of having a bog-simple path to get hdfs data via a \"curl -L http:/....\" call.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"created":"2015-09-21T19:53:00.529+0000","updated":"2015-09-21T19:53:00.529+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14905365","id":"14905365","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"I agree with moving [~wheat9]'s proposal to separate ticket. It'd better to fix this performance issue first.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-23T21:50:59.058+0000","updated":"2015-09-23T21:50:59.058+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14907115","id":"14907115","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  19m 37s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |\n| {color:green}+1{color} | javac |   8m  2s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |  10m  9s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 24s | The applied patch does not increase the total number of release audit warnings. |\n| {color:green}+1{color} | checkstyle |   2m 13s | There were no new checkstyle issues. |\n| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 37s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 34s | The patch built with eclipse:eclipse. |\n| {color:red}-1{color} | findbugs |   4m 32s | The patch appears to introduce 1 new Findbugs (version 3.0.0) warnings. |\n| {color:green}+1{color} | common tests |  23m 32s | Tests passed in hadoop-common. |\n| {color:red}-1{color} | hdfs tests | 207m 39s | Tests failed in hadoop-hdfs. |\n| | | 278m 25s | |\n\\\\\n\\\\\n|| Reason || Tests ||\n| FindBugs | module:hadoop-hdfs |\n| Failed unit tests | hadoop.hdfs.server.blockmanagement.TestBlockManager |\n|   | hadoop.hdfs.server.blockmanagement.TestUnderReplicatedBlocks |\n|   | hadoop.hdfs.TestReplaceDatanodeOnFailure |\n|   | hadoop.hdfs.TestDistributedFileSystem |\n|   | hadoop.hdfs.TestLeaseRecovery2 |\n| Timed out tests | org.apache.hadoop.hdfs.TestFileCreation |\n|   | org.apache.hadoop.hdfs.TestRemoteBlockReader |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12762178/HDFS-8855.005.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / 71a81b6 |\n| Findbugs warnings | https://builds.apache.org/job/PreCommit-HDFS-Build/12662/artifact/patchprocess/newPatchFindbugsWarningshadoop-hdfs.html |\n| hadoop-common test log | https://builds.apache.org/job/PreCommit-HDFS-Build/12662/artifact/patchprocess/testrun_hadoop-common.txt |\n| hadoop-hdfs test log | https://builds.apache.org/job/PreCommit-HDFS-Build/12662/artifact/patchprocess/testrun_hadoop-hdfs.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/12662/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf905.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/12662/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-09-24T22:04:35.389+0000","updated":"2015-09-24T22:04:35.389+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14907204","id":"14907204","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"UT failures are irrelevant. All passed in local env with the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-24T22:58:21.698+0000","updated":"2015-09-24T22:58:21.698+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14908540","id":"14908540","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=owen.omalley","name":"owen.omalley","key":"owen.omalley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=owen.omalley&avatarId=29697","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=owen.omalley&avatarId=29697","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=owen.omalley&avatarId=29697","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=owen.omalley&avatarId=29697"},"displayName":"Owen O'Malley","active":true,"timeZone":"America/Los_Angeles"},"body":"This is ok. +1\n\nI'm a little concerned about the runtime performance of generating the string of the identifier on every connection to the datanode, but this should be correct.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=owen.omalley","name":"owen.omalley","key":"owen.omalley","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=owen.omalley&avatarId=29697","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=owen.omalley&avatarId=29697","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=owen.omalley&avatarId=29697","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=owen.omalley&avatarId=29697"},"displayName":"Owen O'Malley","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-25T19:08:11.455+0000","updated":"2015-09-25T19:08:11.455+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14908715","id":"14908715","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"body":"Given that this is in response to an HTTP request, there's already plenty of string manipulation and network I/O going on.  It will be a long time until the string construction is our bottleneck.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"created":"2015-09-25T21:42:32.041+0000","updated":"2015-09-25T21:42:32.041+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14933931","id":"14933931","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"body":"+1, I will commit this today.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"created":"2015-09-28T20:32:54.021+0000","updated":"2015-09-28T20:32:54.021+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14934204","id":"14934204","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"006 patch used computed hash code as cache key. Thanks [~owen.omalley] and [~bobthansen] for review.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-09-28T22:23:56.184+0000","updated":"2015-09-28T22:23:56.184+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14934521","id":"14934521","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:red}-1{color} | pre-patch |  19m 32s | Pre-patch trunk has 2 extant Findbugs (version 3.0.0) warnings. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |\n| {color:green}+1{color} | javac |   8m  0s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |  10m  1s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 22s | The applied patch does not increase the total number of release audit warnings. |\n| {color:green}+1{color} | checkstyle |   2m  8s | There were no new checkstyle issues. |\n| {color:green}+1{color} | whitespace |   0m  1s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 36s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 32s | The patch built with eclipse:eclipse. |\n| {color:red}-1{color} | findbugs |   4m 32s | The patch appears to introduce 2 new Findbugs (version 3.0.0) warnings. |\n| {color:red}-1{color} | common tests |   7m 37s | Tests failed in hadoop-common. |\n| {color:red}-1{color} | hdfs tests | 162m 47s | Tests failed in hadoop-hdfs. |\n| | | 217m 12s | |\n\\\\\n\\\\\n|| Reason || Tests ||\n| FindBugs | module:hadoop-hdfs |\n| Failed unit tests | hadoop.metrics2.impl.TestGangliaMetrics |\n|   | hadoop.hdfs.TestSetrepIncreasing |\n|   | hadoop.hdfs.web.TestWebHdfsTokens |\n|   | hadoop.hdfs.server.datanode.web.webhdfs.TestDataNodeUGIProvider |\n|   | hadoop.cli.TestAclCLI |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12764121/HDFS-8855.006.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / 9f53a95 |\n| Pre-patch Findbugs warnings | https://builds.apache.org/job/PreCommit-HDFS-Build/12722/artifact/patchprocess/trunkFindbugsWarningshadoop-common.html |\n| Pre-patch Findbugs warnings | https://builds.apache.org/job/PreCommit-HDFS-Build/12722/artifact/patchprocess/trunkFindbugsWarningshadoop-hdfs.html |\n| Findbugs warnings | https://builds.apache.org/job/PreCommit-HDFS-Build/12722/artifact/patchprocess/newPatchFindbugsWarningshadoop-hdfs.html |\n| hadoop-common test log | https://builds.apache.org/job/PreCommit-HDFS-Build/12722/artifact/patchprocess/testrun_hadoop-common.txt |\n| hadoop-hdfs test log | https://builds.apache.org/job/PreCommit-HDFS-Build/12722/artifact/patchprocess/testrun_hadoop-hdfs.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/12722/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf903.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/12722/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-09-29T02:36:18.044+0000","updated":"2015-09-29T02:36:18.044+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14936255","id":"14936255","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  19m 32s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:green}+1{color} | tests included |   0m  0s | The patch appears to include 1 new or modified test files. |\n| {color:green}+1{color} | javac |   7m 57s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |  10m  6s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 24s | The applied patch does not increase the total number of release audit warnings. |\n| {color:red}-1{color} | checkstyle |   1m 48s | The applied patch generated  1 new checkstyle issues (total was 10, now 11). |\n| {color:green}+1{color} | whitespace |   0m  1s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 34s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 35s | The patch built with eclipse:eclipse. |\n| {color:red}-1{color} | findbugs |   4m 26s | The patch appears to introduce 1 new Findbugs (version 3.0.0) warnings. |\n| {color:green}+1{color} | common tests |   7m 53s | Tests passed in hadoop-common. |\n| {color:red}-1{color} | hdfs tests |  68m  5s | Tests failed in hadoop-hdfs. |\n| | | 122m 47s | |\n\\\\\n\\\\\n|| Reason || Tests ||\n| FindBugs | module:hadoop-hdfs |\n| Failed unit tests | hadoop.hdfs.server.namenode.ha.TestStandbyCheckpoints |\n|   | hadoop.hdfs.TestParallelShortCircuitReadUnCached |\n|   | hadoop.hdfs.qjournal.TestNNWithQJM |\n|   | hadoop.hdfs.server.datanode.web.webhdfs.TestDataNodeUGIProvider |\n| Timed out tests | org.apache.hadoop.hdfs.server.namenode.TestFsck |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12764342/HDFS-8855.007.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / 6f335e4 |\n| checkstyle |  https://builds.apache.org/job/PreCommit-HDFS-Build/12749/artifact/patchprocess/diffcheckstylehadoop-common.txt |\n| Findbugs warnings | https://builds.apache.org/job/PreCommit-HDFS-Build/12749/artifact/patchprocess/newPatchFindbugsWarningshadoop-hdfs.html |\n| hadoop-common test log | https://builds.apache.org/job/PreCommit-HDFS-Build/12749/artifact/patchprocess/testrun_hadoop-common.txt |\n| hadoop-hdfs test log | https://builds.apache.org/job/PreCommit-HDFS-Build/12749/artifact/patchprocess/testrun_hadoop-hdfs.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/12749/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf901.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/12749/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-09-30T02:13:45.485+0000","updated":"2015-09-30T02:13:45.485+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14943744","id":"14943744","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"Only glanced at the patch, but did you figure out why  HDFS-7597 doesn't address the problem?  It has for us and it's trivial compared to this patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2015-10-05T17:56:04.184+0000","updated":"2015-10-05T17:56:04.184+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14943802","id":"14943802","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"This issue is from DataNodeUGIProvider#tokenUGI\n{code}\nToken<DelegationTokenIdentifier> token = params.delegationToken();\n    ByteArrayInputStream buf =\n      new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream in = new DataInputStream(buf);\n    DelegationTokenIdentifier id = new DelegationTokenIdentifier();\n    id.readFields(in);\n    UserGroupInformation ugi = id.getUser();\n    ugi.addToken(token);\n    return ugi;\n{code}\n\nfor every request, a brand new UGI will be created even with HDFS-7597 patch, because DelegationTokenIdentifier is initialized per request, although HDFS-7597 returns the same UGI for the same DelegationTokenIdentifier instance.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-10-05T18:39:43.191+0000","updated":"2015-10-05T18:39:43.191+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14950388","id":"14950388","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"body":"[~jnp] - did this patch ever get landed on trunk?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bobhansen","name":"bobhansen","key":"bobhansen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=bobhansen&avatarId=25532","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=bobhansen&avatarId=25532","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=bobhansen&avatarId=25532","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=bobhansen&avatarId=25532"},"displayName":"Bob Hansen","active":true,"timeZone":"America/New_York"},"created":"2015-10-09T13:34:21.483+0000","updated":"2015-10-09T13:34:21.483+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14950578","id":"14950578","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"body":"[~bobhansen] I couldn't commit earlier, because there was another version of the patch posted. Did you get a chance to review the latest patch? I will try to review by this weekend.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-09T15:48:34.186+0000","updated":"2015-10-09T15:48:34.186+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14950832","id":"14950832","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"There's patch 007 that uses UUID as cache key.\n{code}\n345\t  public String buildCacheKey() {\n346\t    return UUID.nameUUIDFromBytes(\n347\t        Bytes.concat(kind.getBytes(), identifier, password)).toString();\n348\t  }\n{code}\n\nInstead, 006 needs address addition overflow that leads to more potential hash collision.\n{code}\n341\t  public int buildCacheKey() {\n342\t    return\n343\t        (kind.hashCode() +\n344\t        WritableComparator.hashBytes(identifier, identifier.length) +\n345\t        WritableComparator.hashBytes(password, password.length));\n346\t  }\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-10-09T17:34:28.593+0000","updated":"2015-10-09T17:34:28.593+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14951113","id":"14951113","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"We need unique cache key to ensure semantics of one token corresponding to one distinct UGI within a given period of time.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-10-09T20:08:56.671+0000","updated":"2015-10-09T20:08:56.671+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14951276","id":"14951276","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"Benchmarked the two approaches based on real token at 1 million calls scale, building cache key in Patch-007 is one time  faster than that of patch-005, namely, 2457ms vs. 4023ms as total for 1M calls. So let's stick to 007.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-10-09T22:00:56.009+0000","updated":"2015-10-09T22:00:56.009+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14953947","id":"14953947","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"body":"+1 for the latest patch. I will commit today, if there are no objections.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-12T22:57:49.200+0000","updated":"2015-10-12T22:57:49.200+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14955210","id":"14955210","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"body":"I have committed this to trunk and branch-2. Thanks to Xiaobing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-13T16:17:41.551+0000","updated":"2015-10-13T16:17:41.551+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14955262","id":"14955262","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-trunk-Commit #8620 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/8620/])\nHDFS-8855. Webhdfs client leaks active NameNode connections. Contributed (jitendra: rev 84cbd72afda6344e220526fac5c560f00f84e374)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/WebHdfsHandler.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-13T16:53:06.582+0000","updated":"2015-10-13T16:53:06.582+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14955270","id":"14955270","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #521 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/521/])\nHDFS-8855. Webhdfs client leaks active NameNode connections. Contributed (jitendra: rev 84cbd72afda6344e220526fac5c560f00f84e374)\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/WebHdfsHandler.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-13T16:58:47.078+0000","updated":"2015-10-13T16:58:47.078+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14955330","id":"14955330","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk #2467 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2467/])\nHDFS-8855. Webhdfs client leaks active NameNode connections. Contributed (jitendra: rev 84cbd72afda6344e220526fac5c560f00f84e374)\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/WebHdfsHandler.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-13T17:39:00.153+0000","updated":"2015-10-13T17:39:00.153+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14955433","id":"14955433","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #532 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/532/])\nHDFS-8855. Webhdfs client leaks active NameNode connections. Contributed (jitendra: rev 84cbd72afda6344e220526fac5c560f00f84e374)\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/WebHdfsHandler.java\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-13T18:35:57.910+0000","updated":"2015-10-13T18:35:57.910+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14955450","id":"14955450","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Yarn-trunk #1257 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/1257/])\nHDFS-8855. Webhdfs client leaks active NameNode connections. Contributed (jitendra: rev 84cbd72afda6344e220526fac5c560f00f84e374)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/WebHdfsHandler.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-13T18:46:22.773+0000","updated":"2015-10-13T18:46:22.773+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14955639","id":"14955639","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #490 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/490/])\nHDFS-8855. Webhdfs client leaks active NameNode connections. Contributed (jitendra: rev 84cbd72afda6344e220526fac5c560f00f84e374)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/WebHdfsHandler.java\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-13T20:47:44.811+0000","updated":"2015-10-13T20:47:44.811+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14955777","id":"14955777","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Hdfs-trunk #2428 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2428/])\nHDFS-8855. Webhdfs client leaks active NameNode connections. Contributed (jitendra: rev 84cbd72afda6344e220526fac5c560f00f84e374)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/WebHdfsHandler.java\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-10-13T21:58:24.808+0000","updated":"2015-10-13T21:58:24.808+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14984485","id":"14984485","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"body":"The patch has introduced findbugs warnings in trunk for more than 2 weeks. The findbug warning is tracked in HDFS-9242.\n\nPlease fix it as soon as possible.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-01T18:36:08.775+0000","updated":"2015-11-01T18:36:08.775+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14988449","id":"14988449","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"{{TestDataNodeUGIProvider}}, introduced in this patch, has been failing intermittently.  The root cause is reliance on hard-coded sleep times to trigger cache expiration, which is non-deterministic.  I've filed a patch on HDFS-9370 to make the test work consistently.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-03T23:23:29.053+0000","updated":"2015-11-03T23:23:29.053+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14988895","id":"14988895","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"body":"Given the current state, maybe we should consider reverting this patch and bring it back when it's ready?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-04T05:09:05.463+0000","updated":"2015-11-04T05:09:05.463+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14990092","id":"14990092","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"body":"This patch breaks Jenkins around 2 weeks. I reverted this patch in trunk and branch-2 for now to keep Jenkins happy.\n\n[~xiaobingo], can you please consolidate the effort of all the follow up jiras and post a new patch? Thanks.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-04T18:24:24.235+0000","updated":"2015-11-04T18:24:24.235+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14990124","id":"14990124","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~wheat9]. Waiting for HDFS-9242 and HDFS-9370 to get good reviews and will merge them to a new patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-04T18:32:54.563+0000","updated":"2015-11-04T18:32:54.563+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14990134","id":"14990134","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"HDFS-9370 has +1's from multiple committers and contributors now.  That one is ready.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-04T18:39:38.160+0000","updated":"2015-11-04T18:39:38.160+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14990258","id":"14990258","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-trunk-Commit #8757 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/8757/])\nRevert \"HDFS-8855. Webhdfs client leaks active NameNode connections. (wheat9: rev 88beb46cf6e6fd3e51f73a411a2750de7595e326)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/WebHdfsHandler.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T19:41:50.063+0000","updated":"2015-11-04T19:41:50.063+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14990446","id":"14990446","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-Yarn-trunk-Java8 #639 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/639/])\nRevert \"HDFS-8855. Webhdfs client leaks active NameNode connections. (wheat9: rev 88beb46cf6e6fd3e51f73a411a2750de7595e326)\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/WebHdfsHandler.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T21:21:26.044+0000","updated":"2015-11-04T21:21:26.044+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14990595","id":"14990595","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk #2569 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2569/])\nRevert \"HDFS-8855. Webhdfs client leaks active NameNode connections. (wheat9: rev 88beb46cf6e6fd3e51f73a411a2750de7595e326)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/WebHdfsHandler.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T22:38:51.271+0000","updated":"2015-11-04T22:38:51.271+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14990652","id":"14990652","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-Yarn-trunk #1362 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/1362/])\nRevert \"HDFS-8855. Webhdfs client leaks active NameNode connections. (wheat9: rev 88beb46cf6e6fd3e51f73a411a2750de7595e326)\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/WebHdfsHandler.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T23:02:07.529+0000","updated":"2015-11-04T23:02:07.529+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14990728","id":"14990728","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #628 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/628/])\nRevert \"HDFS-8855. Webhdfs client leaks active NameNode connections. (wheat9: rev 88beb46cf6e6fd3e51f73a411a2750de7595e326)\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/WebHdfsHandler.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-04T23:40:47.167+0000","updated":"2015-11-04T23:40:47.167+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14990939","id":"14990939","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #572 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/572/])\nRevert \"HDFS-8855. Webhdfs client leaks active NameNode connections. (wheat9: rev 88beb46cf6e6fd3e51f73a411a2750de7595e326)\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/WebHdfsHandler.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-05T01:54:48.114+0000","updated":"2015-11-05T01:54:48.114+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14990996","id":"14990996","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-Hdfs-trunk #2510 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2510/])\nRevert \"HDFS-8855. Webhdfs client leaks active NameNode connections. (wheat9: rev 88beb46cf6e6fd3e51f73a411a2750de7595e326)\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/WebHdfsHandler.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-05T02:38:17.696+0000","updated":"2015-11-05T02:38:17.696+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14999534","id":"14999534","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"Patch v008 to merge follow-up work, kindly review. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-10T23:01:12.836+0000","updated":"2015-11-10T23:01:12.836+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/14999826","id":"14999826","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 0m 7s {color} | {color:blue} docker + precommit patch detected. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green} 0m 0s {color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green} 0m 0s {color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 3m 16s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 4m 44s {color} | {color:green} trunk passed with JDK v1.8.0_60 {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 4m 18s {color} | {color:green} trunk passed with JDK v1.7.0_79 {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 1m 0s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 27s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 3m 37s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 2m 3s {color} | {color:green} trunk passed with JDK v1.8.0_60 {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 2m 56s {color} | {color:green} trunk passed with JDK v1.7.0_79 {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 2m 18s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 4m 41s {color} | {color:green} the patch passed with JDK v1.8.0_60 {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 4m 41s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 4m 24s {color} | {color:green} the patch passed with JDK v1.7.0_79 {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 4m 24s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 1m 7s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 28s {color} | {color:green} the patch passed {color} |\n| {color:red}-1{color} | {color:red} whitespace {color} | {color:red} 0m 0s {color} | {color:red} The patch has 2 line(s) that end in whitespace. Use git apply --whitespace=fix. {color} |\n| {color:green}+1{color} | {color:green} xml {color} | {color:green} 0m 0s {color} | {color:green} The patch has no ill-formed XML file. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 3m 48s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 1m 59s {color} | {color:green} the patch passed with JDK v1.8.0_60 {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 2m 47s {color} | {color:green} the patch passed with JDK v1.7.0_79 {color} |\n| {color:green}+1{color} | {color:green} unit {color} | {color:green} 6m 34s {color} | {color:green} hadoop-common in the patch passed with JDK v1.8.0_60. {color} |\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 52m 31s {color} | {color:red} hadoop-hdfs in the patch failed with JDK v1.8.0_60. {color} |\n| {color:green}+1{color} | {color:green} unit {color} | {color:green} 7m 16s {color} | {color:green} hadoop-common in the patch passed with JDK v1.7.0_79. {color} |\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 55m 31s {color} | {color:red} hadoop-hdfs in the patch failed with JDK v1.7.0_79. {color} |\n| {color:red}-1{color} | {color:red} asflicense {color} | {color:red} 0m 20s {color} | {color:red} Patch generated 58 ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 167m 28s {color} | {color:black} {color} |\n\\\\\n\\\\\n|| Reason || Tests ||\n| JDK v1.8.0_60 Failed junit tests | hadoop.hdfs.web.TestWebHdfsWithMultipleNameNodes |\n|   | hadoop.hdfs.TestDFSStripedOutputStreamWithFailure050 |\n|   | hadoop.hdfs.server.namenode.ha.TestEditLogTailer |\n|   | hadoop.hdfs.TestDFSStripedOutputStreamWithFailure |\n| JDK v1.7.0_79 Failed junit tests | hadoop.hdfs.TestDFSClientRetries |\n|   | hadoop.hdfs.server.blockmanagement.TestNodeCount |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker | Client=1.7.1 Server=1.7.1 Image:test-patch-base-hadoop-date2015-11-10 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12771648/HDFS-8855.008.patch |\n| JIRA Issue | HDFS-8855 |\n| Optional Tests |  asflicense  javac  javadoc  mvninstall  unit  findbugs  checkstyle  compile  xml  |\n| uname | Linux 4f3af3d401ba 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /home/jenkins/jenkins-slave/workspace/PreCommit-HDFS-Build@2/patchprocess/apache-yetus-ee5baeb/precommit/personality/hadoop.sh |\n| git revision | trunk / a06e6b8 |\n| Default Java | 1.7.0_79 |\n| Multi-JDK versions |  /usr/lib/jvm/java-8-oracle:1.8.0_60 /usr/lib/jvm/java-7-openjdk-amd64:1.7.0_79 |\n| findbugs | v3.0.0 |\n| whitespace | https://builds.apache.org/job/PreCommit-HDFS-Build/13465/artifact/patchprocess/whitespace-eol.txt |\n| unit | https://builds.apache.org/job/PreCommit-HDFS-Build/13465/artifact/patchprocess/patch-unit-hadoop-hdfs-project_hadoop-hdfs-jdk1.8.0_60.txt |\n| unit | https://builds.apache.org/job/PreCommit-HDFS-Build/13465/artifact/patchprocess/patch-unit-hadoop-hdfs-project_hadoop-hdfs-jdk1.7.0_79.txt |\n| unit test logs |  https://builds.apache.org/job/PreCommit-HDFS-Build/13465/artifact/patchprocess/patch-unit-hadoop-hdfs-project_hadoop-hdfs-jdk1.8.0_60.txt https://builds.apache.org/job/PreCommit-HDFS-Build/13465/artifact/patchprocess/patch-unit-hadoop-hdfs-project_hadoop-hdfs-jdk1.7.0_79.txt |\n| JDK v1.7.0_79  Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/13465/testReport/ |\n| asflicense | https://builds.apache.org/job/PreCommit-HDFS-Build/13465/artifact/patchprocess/patch-asflicense-problems.txt |\n| modules | C: hadoop-common-project/hadoop-common hadoop-hdfs-project/hadoop-hdfs U: . |\n| Max memory used | 226MB |\n| Powered by | Apache Yetus   http://yetus.apache.org |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/13465/console |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-11T02:23:06.994+0000","updated":"2015-11-11T02:23:06.994+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/15018534","id":"15018534","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"Posted a new patch v009 to remove white spaces. The UT failures are not related.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-20T18:59:19.431+0000","updated":"2015-11-20T18:59:19.431+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/15019077","id":"15019077","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue} 0m 9s {color} | {color:blue} docker + precommit patch detected. {color} |\n| {color:green}+1{color} | {color:green} @author {color} | {color:green} 0m 0s {color} | {color:green} The patch does not contain any @author tags. {color} |\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green} 0m 0s {color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 10m 17s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 13m 36s {color} | {color:green} trunk passed with JDK v1.8.0_66 {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 11m 41s {color} | {color:green} trunk passed with JDK v1.7.0_85 {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 1m 15s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 2m 32s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 34s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 4m 59s {color} | {color:green} trunk passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 2m 53s {color} | {color:green} trunk passed with JDK v1.8.0_66 {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 4m 5s {color} | {color:green} trunk passed with JDK v1.7.0_85 {color} |\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 3m 18s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 14m 17s {color} | {color:green} the patch passed with JDK v1.8.0_66 {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 14m 17s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 12m 14s {color} | {color:green} the patch passed with JDK v1.7.0_85 {color} |\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 12m 14s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green} 1m 19s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green} 2m 40s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} mvneclipse {color} | {color:green} 0m 37s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green} 0m 0s {color} | {color:green} Patch has no whitespace issues. {color} |\n| {color:green}+1{color} | {color:green} xml {color} | {color:green} 0m 1s {color} | {color:green} The patch has no ill-formed XML file. {color} |\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green} 5m 34s {color} | {color:green} the patch passed {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 3m 1s {color} | {color:green} the patch passed with JDK v1.8.0_66 {color} |\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green} 4m 5s {color} | {color:green} the patch passed with JDK v1.7.0_85 {color} |\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 9m 49s {color} | {color:red} hadoop-common in the patch failed with JDK v1.8.0_66. {color} |\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 84m 11s {color} | {color:red} hadoop-hdfs in the patch failed with JDK v1.8.0_66. {color} |\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 8m 56s {color} | {color:red} hadoop-common in the patch failed with JDK v1.7.0_85. {color} |\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 67m 25s {color} | {color:red} hadoop-hdfs in the patch failed with JDK v1.7.0_85. {color} |\n| {color:red}-1{color} | {color:red} asflicense {color} | {color:red} 0m 23s {color} | {color:red} Patch generated 56 ASF License warnings. {color} |\n| {color:black}{color} | {color:black} {color} | {color:black} 271m 25s {color} | {color:black} {color} |\n\\\\\n\\\\\n|| Reason || Tests ||\n| JDK v1.8.0_66 Failed junit tests | hadoop.ipc.TestDecayRpcScheduler |\n|   | hadoop.fs.shell.find.TestFind |\n|   | hadoop.test.TestTimedOutTestsListener |\n|   | hadoop.fs.shell.find.TestPrint |\n|   | hadoop.ipc.TestIPC |\n|   | hadoop.hdfs.TestSafeModeWithStripedFile |\n|   | hadoop.hdfs.TestPread |\n|   | hadoop.hdfs.security.TestDelegationTokenForProxyUser |\n|   | hadoop.hdfs.TestDFSStripedOutputStreamWithFailure110 |\n|   | hadoop.hdfs.server.balancer.TestBalancerWithMultipleNameNodes |\n|   | hadoop.hdfs.server.namenode.ha.TestEditLogTailer |\n|   | hadoop.hdfs.TestCrcCorruption |\n|   | hadoop.hdfs.TestWriteReadStripedFile |\n|   | hadoop.hdfs.TestClientReportBadBlock |\n|   | hadoop.hdfs.server.namenode.ha.TestFailureToReadEdits |\n| JDK v1.7.0_85 Failed junit tests | hadoop.ipc.TestDecayRpcScheduler |\n|   | hadoop.fs.shell.find.TestFind |\n|   | hadoop.hdfs.TestEncryptionZonesWithKMS |\n|   | hadoop.fs.TestSWebHdfsFileContextMainOperations |\n|   | hadoop.hdfs.server.blockmanagement.TestPendingReplication |\n|   | hadoop.hdfs.TestDistributedFileSystem |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Docker |  Image:yetus/hadoop:date2015-11-20 |\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12773565/HDFS-8855.009.patch |\n| JIRA Issue | HDFS-8855 |\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  xml  |\n| uname | Linux 052cc876209c 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Build tool | maven |\n| Personality | /home/jenkins/jenkins-slave/workspace/PreCommit-HDFS-Build@2/patchprocess/apache-yetus-3f4279a/precommit/personality/hadoop.sh |\n| git revision | trunk / 4539131 |\n| findbugs | v3.0.0 |\n| unit | https://builds.apache.org/job/PreCommit-HDFS-Build/13580/artifact/patchprocess/patch-unit-hadoop-common-project_hadoop-common-jdk1.8.0_66.txt |\n| unit | https://builds.apache.org/job/PreCommit-HDFS-Build/13580/artifact/patchprocess/patch-unit-hadoop-hdfs-project_hadoop-hdfs-jdk1.8.0_66.txt |\n| unit | https://builds.apache.org/job/PreCommit-HDFS-Build/13580/artifact/patchprocess/patch-unit-hadoop-common-project_hadoop-common-jdk1.7.0_85.txt |\n| unit | https://builds.apache.org/job/PreCommit-HDFS-Build/13580/artifact/patchprocess/patch-unit-hadoop-hdfs-project_hadoop-hdfs-jdk1.7.0_85.txt |\n| unit test logs |  https://builds.apache.org/job/PreCommit-HDFS-Build/13580/artifact/patchprocess/patch-unit-hadoop-common-project_hadoop-common-jdk1.8.0_66.txt https://builds.apache.org/job/PreCommit-HDFS-Build/13580/artifact/patchprocess/patch-unit-hadoop-hdfs-project_hadoop-hdfs-jdk1.8.0_66.txt https://builds.apache.org/job/PreCommit-HDFS-Build/13580/artifact/patchprocess/patch-unit-hadoop-common-project_hadoop-common-jdk1.7.0_85.txt https://builds.apache.org/job/PreCommit-HDFS-Build/13580/artifact/patchprocess/patch-unit-hadoop-hdfs-project_hadoop-hdfs-jdk1.7.0_85.txt |\n| JDK v1.7.0_85  Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/13580/testReport/ |\n| asflicense | https://builds.apache.org/job/PreCommit-HDFS-Build/13580/artifact/patchprocess/patch-asflicense-problems.txt |\n| modules | C: hadoop-common-project/hadoop-common hadoop-hdfs-project/hadoop-hdfs U: . |\n| Max memory used | 76MB |\n| Powered by | Apache Yetus   http://yetus.apache.org |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/13580/console |\n\n\nThis message was automatically generated.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-20T23:40:51.828+0000","updated":"2015-11-20T23:40:51.828+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/15022580","id":"15022580","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"body":"The failures are not related. Kindly review and commit it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-23T17:45:57.314+0000","updated":"2015-11-23T17:45:57.314+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/15023292","id":"15023292","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xyao","name":"xyao","key":"xyao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaoyu Yao","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~xiaobingo] for updating the patch. \n+1 for the latest patch. I will commit it shortly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xyao","name":"xyao","key":"xyao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaoyu Yao","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-23T23:05:38.101+0000","updated":"2015-11-23T23:05:38.101+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/15025394","id":"15025394","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xyao","name":"xyao","key":"xyao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaoyu Yao","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~xiaobingo]  and [~cnauroth] for the contribution and all for the reviews. I've committed the patch to trunk and branch-2.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xyao","name":"xyao","key":"xyao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaoyu Yao","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-24T20:59:52.011+0000","updated":"2015-11-24T20:59:52.011+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/15025443","id":"15025443","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-trunk-Commit #8880 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/8880/])\nHDFS-8855. Webhdfs client leaks active NameNode connections. Contributed (xyao: rev fe5624b85d71720ae9da90a01cad9a3d1ea41160)\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/DatanodeHttpServer.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-24T21:27:05.070+0000","updated":"2015-11-24T21:27:05.070+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/15025511","id":"15025511","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #727 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/727/])\nHDFS-8855. Webhdfs client leaks active NameNode connections. Contributed (xyao: rev fe5624b85d71720ae9da90a01cad9a3d1ea41160)\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/DatanodeHttpServer.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-24T21:57:51.743+0000","updated":"2015-11-24T21:57:51.743+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/15025530","id":"15025530","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #717 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/717/])\nHDFS-8855. Webhdfs client leaks active NameNode connections. Contributed (xyao: rev fe5624b85d71720ae9da90a01cad9a3d1ea41160)\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/DatanodeHttpServer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-24T22:07:34.807+0000","updated":"2015-11-24T22:07:34.807+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/15025665","id":"15025665","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk #2659 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2659/])\nHDFS-8855. Webhdfs client leaks active NameNode connections. Contributed (xyao: rev fe5624b85d71720ae9da90a01cad9a3d1ea41160)\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/DatanodeHttpServer.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-24T23:13:26.797+0000","updated":"2015-11-24T23:13:26.797+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/15025785","id":"15025785","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Yarn-trunk #1450 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/1450/])\nHDFS-8855. Webhdfs client leaks active NameNode connections. Contributed (xyao: rev fe5624b85d71720ae9da90a01cad9a3d1ea41160)\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/DatanodeHttpServer.java\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-25T00:15:42.905+0000","updated":"2015-11-25T00:15:42.905+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/15025808","id":"15025808","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Hdfs-trunk-Java8 #639 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/639/])\nHDFS-8855. Webhdfs client leaks active NameNode connections. Contributed (xyao: rev fe5624b85d71720ae9da90a01cad9a3d1ea41160)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/DatanodeHttpServer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-25T00:26:08.239+0000","updated":"2015-11-25T00:26:08.239+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/15025870","id":"15025870","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Hdfs-trunk #2576 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2576/])\nHDFS-8855. Webhdfs client leaks active NameNode connections. Contributed (xyao: rev fe5624b85d71720ae9da90a01cad9a3d1ea41160)\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/TestDataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/Token.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/DatanodeHttpServer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-11-25T00:52:20.274+0000","updated":"2015-11-25T00:52:20.274+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12851465/comment/15151467","id":"15151467","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"I cherry-picked this to branch-2 and branch-2.8.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-02-18T00:07:57.083+0000","updated":"2016-02-18T00:07:57.083+0000"}],"maxResults":85,"total":85,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-8855/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2ibsf:"}}