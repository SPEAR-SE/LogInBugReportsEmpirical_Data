{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12628514","self":"https://issues.apache.org/jira/rest/api/2/issue/12628514","key":"HDFS-4424","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12319502","id":"12319502","description":"maintenance release on branch-1.0","name":"1.0.1","archived":false,"released":true,"releaseDate":"2012-02-22"}],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2013-01-21T07:32:11.267+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Thu Feb 07 02:40:33 UTC 2013","customfield_12310420":"306440","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-4424/watchers","watchCount":6,"isWatching":false},"created":"2013-01-21T06:54:55.119+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12319502","id":"12319502","description":"maintenance release on branch-1.0","name":"1.0.1","archived":false,"released":true,"releaseDate":"2012-02-22"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-02-21T16:16:04.064+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312927","id":"12312927","name":"datanode"}],"timeoriginalestimate":null,"description":"File: /hadoop-1.0.1/hdfs/org/apache/hadoop/hdfs/server/datanode/FSDataset.java\n\nfrom line 205:\n{code}\n      if (children == null || children.length == 0) {\n        children = new FSDir[maxBlocksPerDir];\n        for (int idx = 0; idx < maxBlocksPerDir; idx++) {\n          children[idx] = new FSDir(new File(dir, DataStorage.BLOCK_SUBDIR_PREFIX+idx));\n        }\n      }\n{code}\nin FSDir constructer method if faild (  space full,so mkdir fails    ), but  the children still in use !\n\n\nthe the write comes(after I run balancer ) , when choose FSDir \n\nline 192:\n    File file = children[idx].addBlock(b, src, false, resetIdx);\n\ncause exceptions like this\n{code}\njava.lang.NullPointerException\n        at org.apache.hadoop.hdfs.server.datanode.FSDataset$FSDir.addBlock(FSDataset.java:192)\n        at org.apache.hadoop.hdfs.server.datanode.FSDataset$FSDir.addBlock(FSDataset.java:192)\n        at org.apache.hadoop.hdfs.server.datanode.FSDataset$FSDir.addBlock(FSDataset.java:158)\n        at org.apache.hadoop.hdfs.server.datanode.FSDataset$FSVolume.addBlock(FSDataset.java:495)\n{code}\n\n\n\n------------------------------------------------\nshould it like this \n\n{code}\n      if (children == null || children.length == 0) {\n          List childrenList = new ArrayList();\n        \n        for (int idx = 0; idx < maxBlocksPerDir; idx++) {\n          try{\n           childrenList .add( new FSDir(new File(dir, DataStorage.BLOCK_SUBDIR_PREFIX+idx)));\n          }catch(Exception e){\n          }\n          children = childrenList.toArray();\n        }\n      }\n{code}\n\n\n\n----------------------------\nbad consequence , in my cluster ,this datanode's num blocks became 0 .\n\n\n\n\n\n\n\n\n\n\n\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12566894","id":"12566894","filename":"patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"created":"2013-01-29T03:00:18.224+0000","size":1097,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12566894/patch.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"264613","customfield_12312823":null,"summary":"fsdataset  Mkdirs failed  cause  nullpointexception and many files in bbw","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628514/comment/13558586","id":"13558586","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=10210240089%40fudan.edu.cn","name":"10210240089@fudan.edu.cn","key":"10210240089@fudan.edu.cn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gongsuochen","active":true,"timeZone":"Asia/Shanghai"},"body":"\nhow could I subscribe from this mailing list??\n\nthank you.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=10210240089%40fudan.edu.cn","name":"10210240089@fudan.edu.cn","key":"10210240089@fudan.edu.cn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gongsuochen","active":true,"timeZone":"Asia/Shanghai"},"created":"2013-01-21T07:32:11.267+0000","updated":"2013-01-21T07:32:11.267+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628514/comment/13558598","id":"13558598","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"body":"I don't know , i'm a new hand too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"created":"2013-01-21T07:52:45.978+0000","updated":"2013-01-21T07:52:45.978+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628514/comment/13560205","id":"13560205","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"body":"@gschen, you can subscribe the mailing list here: http://hadoop.apache.org/mailing_lists.html ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandonli","name":"brandonli","key":"brandonli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brandon Li","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-01-23T00:02:29.279+0000","updated":"2013-01-23T00:02:29.279+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628514/comment/13562134","id":"13562134","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"Does this problem still exist in branch-1?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-01-24T23:29:18.951+0000","updated":"2013-01-24T23:29:18.951+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628514/comment/13562197","id":"13562197","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"body":"\nhttps://svn.apache.org/repos/asf/hadoop/common/branches/branch-1/src/hdfs/org/apache/hadoop/hdfs/server/datanode/FSDataset.java\n\nline 205 ,  same  as above\n\nand also  branch-1.0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"created":"2013-01-25T00:27:06.849+0000","updated":"2013-01-25T00:27:06.849+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628514/comment/13562350","id":"13562350","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks Junjun, could you post a patch as well?\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-01-25T04:04:54.938+0000","updated":"2013-01-25T04:04:54.938+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628514/comment/13562365","id":"13562365","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"body":"OK,I'll try,\n\n{code}\n  if (children == null || children.length == 0) {\n        List childrenList = new ArrayList();\n        for (int idx = 0; idx < maxBlocksPerDir; idx++) {\n           childrenList .add( new FSDir(new File(dir, DataStorage.BLOCK_SUBDIR_PREFIX+idx)));\n        }\n        children = childrenList.toArray();\n  }\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"created":"2013-01-25T04:35:12.646+0000","updated":"2013-01-25T04:35:12.646+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628514/comment/13562368","id":"13562368","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"body":"OK,I'll try,\n\n{code}\n  if (children == null || children.length == 0) {\n        List childrenList = new ArrayList();\n        for (int idx = 0; idx < maxBlocksPerDir; idx++) {\n           childrenList .add( new FSDir(new File(dir, DataStorage.BLOCK_SUBDIR_PREFIX+idx)));\n        }\n        children = childrenList.toArray();\n  }\n{code}\n\nto not change the exception throw , I remove the try catch .\n\nhow do you think?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"created":"2013-01-25T04:41:56.122+0000","updated":"2013-01-25T04:41:56.122+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628514/comment/13565034","id":"13565034","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12566894/patch.txt\n  against trunk revision .\n\n    {color:red}-1 patch{color}.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/3898//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-01-29T03:22:06.699+0000","updated":"2013-01-29T03:22:06.699+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628514/comment/13565039","id":"13565039","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"body":"this patch for  branch1 .  why qa apply it to   hadoop v2 ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"created":"2013-01-29T03:27:19.234+0000","updated":"2013-01-29T03:27:19.234+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628514/comment/13567163","id":"13567163","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"For branch-1 patch, we don't have to submit since QA won't be able to test it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-01-31T00:39:21.495+0000","updated":"2013-01-31T00:39:21.495+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628514/comment/13567164","id":"13567164","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"If the FSDir constructor throws an exception, then children won't be initialized.  Would it be a problem?\n\nAlso, could you try to add a new test for it?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-01-31T00:39:25.525+0000","updated":"2013-01-31T00:39:25.525+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628514/comment/13567242","id":"13567242","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"body":"there may be two situtions cause mkdir failed\n1,too deep   , we should tag  this dir as a final dir , do not try to create subdir .\n2,space full , do nothing\n\n\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"created":"2013-01-31T01:49:59.927+0000","updated":"2013-01-31T01:49:59.927+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628514/comment/13567247","id":"13567247","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"body":"there may be two situtions cause mkdir failed\n1,too deep , we should tag this dir as a final dir , do not try to create subdir .   so next time it return null .\n   and should we catch this exception to choose another not so deep dir to addblock ?\n2,space full , do nothing?\n\nand how to know which situtions  is ?\n\nthis should be think over.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=nice2mu","name":"nice2mu","key":"nice2mu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Li Junjun","active":true,"timeZone":"Asia/Shanghai"},"created":"2013-01-31T02:05:56.282+0000","updated":"2013-01-31T02:05:56.282+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628514/comment/13573115","id":"13573115","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"How about try-catch inside the loop and the have a finally-block for the assignment statement?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-07T02:40:33.200+0000","updated":"2013-02-07T02:40:33.200+0000"}],"maxResults":15,"total":15,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-4424/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i19ok7:"}}