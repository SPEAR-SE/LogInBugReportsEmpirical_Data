{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12740621","self":"https://issues.apache.org/jira/rest/api/2/issue/12740621","key":"HDFS-7040","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2014-09-11T00:32:03.377+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Dec 24 15:43:18 UTC 2014","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_9040507033_*|*_1_*:*_1_*:*_9313474_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-12-24T15:43:18.409+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-7040/watchers","watchCount":7,"isWatching":false},"created":"2014-09-10T21:52:58.136+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":["beta","deprecated","guava"],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326143","id":"12326143","description":"2.4.0 release","name":"2.4.0","archived":false,"released":true,"releaseDate":"2014-04-07"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326264","id":"12326264","description":"2.5.0 release","name":"2.5.0","archived":false,"released":true,"releaseDate":"2014-08-11"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326696","id":"12326696","description":"2.4.1 bug-fix release","name":"2.4.1","archived":false,"released":true,"releaseDate":"2014-06-30"}],"issuelinks":[{"id":"12396563","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12396563","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12679376","key":"HDFS-5518","self":"https://issues.apache.org/jira/rest/api/2/issue/12679376","fields":{"summary":"HDFS doesn't compile/run against Guava 1.5","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12396564","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12396564","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12679226","key":"HADOOP-10101","self":"https://issues.apache.org/jira/rest/api/2/issue/12679226","fields":{"summary":"Update guava dependency to the latest version","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12404201","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12404201","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12739507","key":"ACCUMULO-3100","self":"https://issues.apache.org/jira/rest/api/2/issue/12739507","fields":{"summary":"Accumulo fails to test against recent Hadoop 2.6.0-SNAPSHOT","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12396667","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12396667","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12741018","key":"PHOENIX-1250","self":"https://issues.apache.org/jira/rest/api/2/issue/12741018","fields":{"summary":"guava dependency out-dated causing NoSuchMethod error","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12397660","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12397660","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12670844","key":"HBASE-9667","self":"https://issues.apache.org/jira/rest/api/2/issue/12670844","fields":{"summary":"NullOutputStream removed from Guava 15","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12396524","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12396524","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12740623","key":"HADOOP-11286","self":"https://issues.apache.org/jira/rest/api/2/issue/12740623","fields":{"summary":"Map/Reduce dangerously adds Guava @Beta class to CryptoUtils","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12396536","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12396536","type":{"id":"12310050","name":"Regression","inward":"is broken by","outward":"breaks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310050"},"outwardIssue":{"id":"12709800","key":"ACCUMULO-2714","self":"https://issues.apache.org/jira/rest/api/2/issue/12709800","fields":{"summary":"Integration test classpath issues with Guava","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-12-24T15:43:18.472+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"HDFS uses LimitInputStream from Guava. This was introduced as @Beta and is risky for any application to use.\n\nThe problem is further exacerbated by Hadoop's dependency on Guava version 11.0.2, which is quite old for an active project (Feb. 2012).\n\nBecause Guava is very stable, projects which depend on Hadoop and use Guava themselves, can use up through Guava version 14.x\n\nHowever, in version 14, Guava deprecated LimitInputStream and provided a replacement. Because they make no guarantees about compatibility about @Beta classes, they removed it in version 15.\n\nWhat should be done: Hadoop should updated its dependency on Guava to at least version 14 (currently Guava is on version 19). This should have little impact on users, because Guava is so stable.\n\nHDFS should then be patched to use the provided alternative to LimitInputStream, so that downstream packagers, users, and application developers requiring more recent versions of Guava (to fix bugs, to use new features, etc.) will be able to swap out the Guava dependency without breaking Hadoop.\n\nAlternative: While Hadoop cannot predict the marking and removal of deprecated code, it can, and should, avoid the use of @Beta classes and methods that do not offer guarantees. If the dependency cannot be bumped, then it should be relatively trivial to provide an internal class with the same functionality, that does not rely on the older version of Guava.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12667911","id":"12667911","filename":"0001-HDFS-7040-Avoid-beta-LimitInputStream-in-Guava.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii","name":"ctubbsii","key":"ctubbsii","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"},"displayName":"Christopher Tubbs","active":true,"timeZone":"America/New_York"},"created":"2014-09-11T00:28:00.865+0000","size":6144,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12667911/0001-HDFS-7040-Avoid-beta-LimitInputStream-in-Guava.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"HDFS dangerously uses @Beta methods from very old versions of Guava","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii","name":"ctubbsii","key":"ctubbsii","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"},"displayName":"Christopher Tubbs","active":true,"timeZone":"America/New_York"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii","name":"ctubbsii","key":"ctubbsii","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"},"displayName":"Christopher Tubbs","active":true,"timeZone":"America/New_York"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12740621/comment/14129435","id":"14129435","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii","name":"ctubbsii","key":"ctubbsii","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"},"displayName":"Christopher Tubbs","active":true,"timeZone":"America/New_York"},"body":"Patch attached to remove use of LimitInputStream: [^0001-HDFS-7040-Avoid-beta-LimitInputStream-in-Guava.patch] for use in 2.4 branch and later. (See MAPREDUCE-6083 for corresponding change in the MAPREDUCE component that affects the client API.)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii","name":"ctubbsii","key":"ctubbsii","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"},"displayName":"Christopher Tubbs","active":true,"timeZone":"America/New_York"},"created":"2014-09-11T00:28:00.870+0000","updated":"2014-09-11T00:28:00.870+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12740621/comment/14129440","id":"14129440","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12667911/12667911_0001-HDFS-7040-Avoid-beta-LimitInputStream-in-Guava.patch\n  against trunk revision 5ec7fcd.\n\n    {color:red}-1 patch{color}.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7993//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-09-11T00:32:03.377+0000","updated":"2014-09-11T00:32:03.377+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12740621/comment/14129575","id":"14129575","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii","name":"ctubbsii","key":"ctubbsii","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"},"displayName":"Christopher Tubbs","active":true,"timeZone":"America/New_York"},"body":"This patch needs manual QA testing, as it is intended to be applied to the 2.4 branch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii","name":"ctubbsii","key":"ctubbsii","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"},"displayName":"Christopher Tubbs","active":true,"timeZone":"America/New_York"},"created":"2014-09-11T03:30:31.719+0000","updated":"2014-09-11T03:30:31.719+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12740621/comment/14129853","id":"14129853","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"body":"This is the long-standing \"hadoop branch-2 guava is way out of date\" problem, seen in HDFS-5518 and addressed in HADOOP-10101.\n\nI think Hadoop does have to bite the bullet and update Guava, and think the 2.7 \"java 7+ only\" release is the time to do it. It may break some downstream code (the argument for holding back), but  staying on 11.x is breaking code anyway.\n\nChristopher .. .is there any easy way to switch off the missing methods in the hadoop code while still having it build against 11.02? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org","name":"stevel@apache.org","key":"stevel@apache.org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"},"displayName":"Steve Loughran","active":true,"timeZone":"Europe/London"},"created":"2014-09-11T10:25:09.670+0000","updated":"2014-09-11T10:25:09.670+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12740621/comment/14130970","id":"14130970","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii","name":"ctubbsii","key":"ctubbsii","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"},"displayName":"Christopher Tubbs","active":true,"timeZone":"America/New_York"},"body":"bq. .is there any easy way to switch off the missing methods in the hadoop code while still having it build against 11.02\n\nSure, the easiest would be to (re-)implement the LimitInputStream functionality internally within HDFS code. (Minimally, copy the private inner class implementation of ByteStreams.limit() from a newer version, which is called LimitedInputStream. A small note in the NOTICE file to give credit to that project should suffice (it's already Apache License v2.0)). I'd do this myself and provide a patch, but I'm having a very hard time getting Hadoop to build out of the box (I think I need to track down a protobuf dependency).\n\nThat said, I think bumping the dependency is probably pretty low risk (also, this JAPI checker chart I found might help in evaluating risk: http://upstream-tracker.org/java/versions/guava.html).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii","name":"ctubbsii","key":"ctubbsii","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"},"displayName":"Christopher Tubbs","active":true,"timeZone":"America/New_York"},"created":"2014-09-12T01:12:52.592+0000","updated":"2014-09-12T01:12:52.592+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12740621/comment/14130979","id":"14130979","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii","name":"ctubbsii","key":"ctubbsii","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"},"displayName":"Christopher Tubbs","active":true,"timeZone":"America/New_York"},"body":"To the comment about bumping the Guava version in 2.7, I think that's reasonable, but I really hope something can be done about the MAPREDUCE-6083 for 2.6.0, because that's a much more serious manifestation of this same issue (because it shows up in client code paths, and not just server/MiniDFS code paths). Whatever action is taken for that issue, could be applied here as well, at least in 2.6.0, if not all the way back to 2.4.0.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii","name":"ctubbsii","key":"ctubbsii","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"},"displayName":"Christopher Tubbs","active":true,"timeZone":"America/New_York"},"created":"2014-09-12T01:15:44.816+0000","updated":"2014-09-12T01:15:44.816+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12740621/comment/14131641","id":"14131641","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=busbey","name":"busbey","key":"busbey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=busbey&avatarId=13233","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=busbey&avatarId=13233","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=busbey&avatarId=13233","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=busbey&avatarId=13233"},"displayName":"Sean Busbey","active":true,"timeZone":"America/Chicago"},"body":"FWIW, HBase currently has a copied reimplementation of LimitedInputStream (since HBASE-9667) for this same reason.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=busbey","name":"busbey","key":"busbey","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=busbey&avatarId=13233","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=busbey&avatarId=13233","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=busbey&avatarId=13233","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=busbey&avatarId=13233"},"displayName":"Sean Busbey","active":true,"timeZone":"America/Chicago"},"created":"2014-09-12T15:01:28.148+0000","updated":"2014-09-12T15:01:28.148+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12740621/comment/14202856","id":"14202856","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii","name":"ctubbsii","key":"ctubbsii","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"},"displayName":"Christopher Tubbs","active":true,"timeZone":"America/New_York"},"body":"I added a patch to fix this under MAPREDUCE-6083 for versions 2.6.0 and later which doesn't change the Guava version dependency. I suppose it could be back-ported to earlier versions (2.4/2.5), but it's probably not worth it since those versions are really only affected by {{MiniDFSCluster}}, and that's very limited.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii","name":"ctubbsii","key":"ctubbsii","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"},"displayName":"Christopher Tubbs","active":true,"timeZone":"America/New_York"},"created":"2014-11-07T22:39:41.389+0000","updated":"2014-11-07T22:39:41.389+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12740621/comment/14258198","id":"14258198","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12667911/12667911_0001-HDFS-7040-Avoid-beta-LimitInputStream-in-Guava.patch\n  against trunk revision 4f18018.\n\n    {color:red}-1 patch{color}.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/9123//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-12-24T11:50:28.490+0000","updated":"2014-12-24T11:50:28.490+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12740621/comment/14258339","id":"14258339","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii","name":"ctubbsii","key":"ctubbsii","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"},"displayName":"Christopher Tubbs","active":true,"timeZone":"America/New_York"},"body":"This issue is essentially fixed with HADOOP-11286 for 2.6 and later, so there's no reason to keep it open, unless somebody intends to fix versions 2.4 and 2.5, which I would argue is probably not worth the effort. So, I'm going to close it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ctubbsii","name":"ctubbsii","key":"ctubbsii","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ctubbsii&avatarId=15840","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ctubbsii&avatarId=15840","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ctubbsii&avatarId=15840","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ctubbsii&avatarId=15840"},"displayName":"Christopher Tubbs","active":true,"timeZone":"America/New_York"},"created":"2014-12-24T15:43:18.458+0000","updated":"2014-12-24T15:43:18.458+0000"}],"maxResults":10,"total":10,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-7040/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1zwgn:"}}