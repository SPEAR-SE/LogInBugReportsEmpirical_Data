{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12916848","self":"https://issues.apache.org/jira/rest/api/2/issue/12916848","key":"HDFS-9477","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-11-30T15:44:05.426+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Nov 28 11:16:04 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_63017529797_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2017-11-28T11:16:04.165+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-9477/watchers","watchCount":10,"isWatching":false},"created":"2015-11-30T02:23:54.497+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327584","id":"12327584","description":"2.7.0 release","name":"2.7.0","archived":false,"released":true,"releaseDate":"2015-04-20"}],"issuelinks":[{"id":"12542555","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12542555","type":{"id":"12310361","name":"Blocked","inward":"Blocked","outward":"Blocked","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310361"},"inwardIssue":{"id":"13183391","key":"HDFS-13901","self":"https://issues.apache.org/jira/rest/api/2/issue/13183391","fields":{"summary":"INode access time is ignored because of race between open and rename","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12521010","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12521010","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12824378","key":"HDFS-8269","self":"https://issues.apache.org/jira/rest/api/2/issue/12824378","fields":{"summary":"getBlockLocations() does not resolve the .reserved path and generates incorrect edit logs when updating the atime","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aplee","name":"aplee","key":"aplee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"aplee","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-09-06T13:18:38.730+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312926","id":"12312926","name":"namenode"}],"timeoriginalestimate":null,"description":"backup namenode start failed, log below:\n2015-11-28 14:09:13,462 ERROR org.apache.hadoop.hdfs.server.namenode.FSEditLogLoader: Encountered exception on operation TimesOp [length=0, path=/.reserved/.inodes/2346114, mtime=-1, atime=1448692924700, opCode=OP_TIMES, txid=14774180]\njava.lang.NullPointerException\n\tat org.apache.hadoop.hdfs.server.namenode.FSDirAttrOp.unprotectedSetTimes(FSDirAttrOp.java:473)\n\tat org.apache.hadoop.hdfs.server.namenode.FSDirAttrOp.unprotectedSetTimes(FSDirAttrOp.java:299)\n\tat org.apache.hadoop.hdfs.server.namenode.FSEditLogLoader.applyEditLogOp(FSEditLogLoader.java:629)\n\tat org.apache.hadoop.hdfs.server.namenode.FSEditLogLoader.loadEditRecords(FSEditLogLoader.java:234)\n\tat org.apache.hadoop.hdfs.server.namenode.FSEditLogLoader.loadFSEdits(FSEditLogLoader.java:143)\n\tat org.apache.hadoop.hdfs.server.namenode.FSImage.loadEdits(FSImage.java:832)\n\tat org.apache.hadoop.hdfs.server.namenode.FSImage.loadEdits(FSImage.java:813)\n\tat org.apache.hadoop.hdfs.server.namenode.ha.EditLogTailer.doTailEdits(EditLogTailer.java:232)\n\tat org.apache.hadoop.hdfs.server.namenode.ha.EditLogTailer$EditLogTailerThread.doWork(EditLogTailer.java:331)\n\tat org.apache.hadoop.hdfs.server.namenode.ha.EditLogTailer$EditLogTailerThread.access$200(EditLogTailer.java:284)\n\tat org.apache.hadoop.hdfs.server.namenode.ha.EditLogTailer$EditLogTailerThread$1.run(EditLogTailer.java:301)\n\tat org.apache.hadoop.security.SecurityUtil.doAsLoginUserOrFatal(SecurityUtil.java:415)\n\tat org.apache.hadoop.hdfs.server.namenode.ha.EditLogTailer$EditLogTailerThread.run(EditLogTailer.java:297)\n2015-11-28 14:09:13,572 FATAL org.apache.hadoop.hdfs.server.namenode.ha.EditLogTailer: Unknown error encountered while tailing edits. Shutting down standby NN.\njava.io.IOException: java.lang.NullPointerException\n\tat org.apache.hadoop.hdfs.server.namenode.FSEditLogLoader.loadEditRecords(FSEditLogLoader.java:244)\n\tat org.apache.hadoop.hdfs.server.namenode.FSEditLogLoader.loadFSEdits(FSEditLogLoader.java:143)\n\tat org.apache.hadoop.hdfs.server.namenode.FSImage.loadEdits(FSImage.java:832)\n\tat org.apache.hadoop.hdfs.server.namenode.FSImage.loadEdits(FSImage.java:813)\n\tat org.apache.hadoop.hdfs.server.namenode.ha.EditLogTailer.doTailEdits(EditLogTailer.java:232)\n\tat org.apache.hadoop.hdfs.server.namenode.ha.EditLogTailer$EditLogTailerThread.doWork(EditLogTailer.java:331)\n\tat org.apache.hadoop.hdfs.server.namenode.ha.EditLogTailer$EditLogTailerThread.access$200(EditLogTailer.java:284)\n\tat org.apache.hadoop.hdfs.server.namenode.ha.EditLogTailer$EditLogTailerThread$1.run(EditLogTailer.java:301)\n\tat org.apache.hadoop.security.SecurityUtil.doAsLoginUserOrFatal(SecurityUtil.java:415)\n\tat org.apache.hadoop.hdfs.server.namenode.ha.EditLogTailer$EditLogTailerThread.run(EditLogTailer.java:297)\nCaused by: java.lang.NullPointerException\n\tat org.apache.hadoop.hdfs.server.namenode.FSDirAttrOp.unprotectedSetTimes(FSDirAttrOp.java:473)\n\tat org.apache.hadoop.hdfs.server.namenode.FSDirAttrOp.unprotectedSetTimes(FSDirAttrOp.java:299)\n\tat org.apache.hadoop.hdfs.server.namenode.FSEditLogLoader.applyEditLogOp(FSEditLogLoader.java:629)\n\tat org.apache.hadoop.hdfs.server.namenode.FSEditLogLoader.loadEditRecords(FSEditLogLoader.java:234)\n\t... 9 more\n2015-11-28 14:09:13,574 INFO org.apache.hadoop.util.ExitUtil: Exiting with status 1\n2015-11-28 14:09:13,575 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: SHUTDOWN_MSG: \n\nI found record in Edits, but I don't know how this record generated\n\n<RECORD>\n    <OPCODE>OP_TIMES</OPCODE>\n    <DATA>\n      <TXID>14774180</TXID>\n      <LENGTH>0</LENGTH>\n      <PATH>/.reserved/.inodes/2346114</PATH>\n      <MTIME>-1</MTIME>\n      <ATIME>1448692924700</ATIME>\n    </DATA>\n  </RECORD>","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"namenode starts failed:FSEditLogLoader: Encountered exception on operation TimesOp","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aplee","name":"aplee","key":"aplee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"aplee","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aplee","name":"aplee","key":"aplee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"aplee","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Ubuntu 12.04.1 LTS, java version \"1.7.0_79\"","customfield_12313520":null,"customfield_12311020":null,"duedate":"2015-11-30","customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12916848/comment/15031973","id":"15031973","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"body":"Notice that it's occurring because of an atime update - probably from opening the file.  This appears to be caused by the file descriptor-ish feature added awhile back.  Anyhow, I believe /.reserved paths should probably never occur in the edits.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=daryn","name":"daryn","key":"daryn","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daryn Sharp","active":true,"timeZone":"America/Chicago"},"created":"2015-11-30T15:44:05.426+0000","updated":"2015-11-30T15:44:05.426+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12916848/comment/15033010","id":"15033010","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aplee","name":"aplee","key":"aplee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"aplee","active":true,"timeZone":"Etc/UTC"},"body":"Thanks for your reply.\nWhich file do you mean by opening the file? /.reserved/.inodes/2346114?\nI mounted HDFS on linux using nfs gateway, and then shared it with samba. So we can open the files in HDFS without downloading it on windows.\nAbout thirty records of OP_TIMES of /.reserved/.inodes/xxxx occurs in edits in about a week after that.I think that may be related.\nI know little about the file descriptor-ish feature, and will learn something about it\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aplee","name":"aplee","key":"aplee","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"aplee","active":true,"timeZone":"Etc/UTC"},"created":"2015-12-01T03:27:51.361+0000","updated":"2015-12-01T03:27:51.361+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12916848/comment/16268580","id":"16268580","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yuanbo","name":"yuanbo","key":"yuanbo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=yuanbo&avatarId=25581","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yuanbo&avatarId=25581","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yuanbo&avatarId=25581","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yuanbo&avatarId=25581"},"displayName":"Yuanbo Liu","active":true,"timeZone":"Asia/Shanghai"},"body":"I believe that HDFS-8269 has solved this issue, please check it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yuanbo","name":"yuanbo","key":"yuanbo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=yuanbo&avatarId=25581","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=yuanbo&avatarId=25581","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=yuanbo&avatarId=25581","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=yuanbo&avatarId=25581"},"displayName":"Yuanbo Liu","active":true,"timeZone":"Asia/Shanghai"},"created":"2017-11-28T11:16:04.219+0000","updated":"2017-11-28T11:16:04.219+0000"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-9477/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2p1pj:"}}