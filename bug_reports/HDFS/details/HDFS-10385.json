{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12966743","self":"https://issues.apache.org/jira/rest/api/2/issue/12966743","key":"HDFS-10385","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/7","id":"7","description":"Later","name":"Later"},"customfield_12312322":null,"customfield_12310220":"2016-05-10T20:15:34.915+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue May 24 14:39:04 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_6313241000_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2016-07-22T15:32:10.608+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-10385/watchers","watchCount":6,"isWatching":false},"created":"2016-05-10T13:51:29.803+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327181","id":"12327181","description":"2.6.0 release","name":"2.6.0","archived":false,"released":true,"releaseDate":"2014-11-18"}],"issuelinks":[{"id":"12515514","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12515514","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"13103467","key":"HIVE-17563","self":"https://issues.apache.org/jira/rest/api/2/issue/13103467","fields":{"summary":"CodahaleMetrics.JsonFileReporter is not updating hive.service.metrics.file.location","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaobingo","name":"xiaobingo","key":"xiaobingo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaobing Zhou","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-09-21T23:54:30.206+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12327021","id":"12327021","name":"fs"}],"timeoriginalestimate":null,"description":"Currently rename() of LocalFileSystem returns true and renames successfully when the destination file exists. That seems to have different behavior from DFSFileSystem. \n\nIf they can have the same behavior, then we can use one call to do rename rather than checking if destination exists and then making rename() call.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"LocalFileSystem rename() function should return false when destination file exists","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aihuaxu","name":"aihuaxu","key":"aihuaxu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Aihua Xu","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12966743/comment/15278785","id":"15278785","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=liuml07","name":"liuml07","key":"liuml07","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=liuml07&avatarId=29203","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=liuml07&avatarId=29203","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=liuml07&avatarId=29203","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=liuml07&avatarId=29203"},"displayName":"Mingliang Liu","active":true,"timeZone":"America/Los_Angeles"},"body":"For {{ChecksumFileSystem}}, the rename operation succeeds iff both the file and checksum files are renamed successfully. However, in {{RawLocalFileSystem#rename}}, the employed Java rename API does not have a strongly defined behavior, which is largely platform-dependent. Specifically, the Javadoc states,\n{quote}\n* Many aspects of the behavior of this method are inherently\n* platform-dependent: The rename operation might not be able to move a\n* file from one filesystem to another, it might not be atomic, and it\n* might not succeed if a file with the destination abstract pathname\n* already exists.  The return value should always be checked to make sure\n* that the rename operation was successful.\n{quote}\n\nIt's good to wrap rename() logic here. +1 for the proposal.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=liuml07","name":"liuml07","key":"liuml07","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=liuml07&avatarId=29203","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=liuml07&avatarId=29203","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=liuml07&avatarId=29203","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=liuml07&avatarId=29203"},"displayName":"Mingliang Liu","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-05-10T20:15:34.915+0000","updated":"2016-05-10T20:15:34.915+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12966743/comment/15283084","id":"15283084","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"I'm wary of changing this behavior, especially in branch-2, because of backwards-compatibility concerns.  Even though the behavior differs from HDFS semantics, applications often have different expectations of the local file system.  There is a risk that downstream ecosystem components or user applications will start encountering errors, where previously the same calls to the local file system succeeded.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-05-13T20:12:45.895+0000","updated":"2016-05-13T20:12:45.895+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12966743/comment/15291630","id":"15291630","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=boky01","name":"boky01","key":"boky01","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=boky01&avatarId=29244","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=boky01&avatarId=29244","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=boky01&avatarId=29244","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=boky01&avatarId=29244"},"displayName":"Andras Bokor","active":true,"timeZone":"Europe/Budapest"},"body":"Previously, I had a discussion with [~cnauroth] and [~stevel@apache.org] about changing rename behaviors and finally that JIRA was resolved with \"Later\" resolution. Please check the HADOOP-13082 for details. Even if we change behaviors it should be part of a bigger and more complex change because there are lot of differences between rename behaviors in different FS implementations. \nBased on that this should be closed either. What do you guys think?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=boky01","name":"boky01","key":"boky01","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=boky01&avatarId=29244","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=boky01&avatarId=29244","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=boky01&avatarId=29244","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=boky01&avatarId=29244"},"displayName":"Andras Bokor","active":true,"timeZone":"Europe/Budapest"},"created":"2016-05-19T17:43:42.633+0000","updated":"2016-05-19T17:43:42.633+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12966743/comment/15293881","id":"15293881","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"body":"[~boky01], I agree.  I'm generally reluctant to change behavior of the local file system classes in the 2.x line.  If it's helpful, we could consider possible changes for trunk/3.x and mark them as backwards-incompatible.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cnauroth","name":"cnauroth","key":"cnauroth","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cnauroth&avatarId=11432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cnauroth&avatarId=11432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cnauroth&avatarId=11432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cnauroth&avatarId=11432"},"displayName":"Chris Nauroth","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-05-20T18:06:41.723+0000","updated":"2016-05-20T18:06:41.723+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12966743/comment/15298267","id":"15298267","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=boky01","name":"boky01","key":"boky01","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=boky01&avatarId=29244","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=boky01&avatarId=29244","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=boky01&avatarId=29244","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=boky01&avatarId=29244"},"displayName":"Andras Bokor","active":true,"timeZone":"Europe/Budapest"},"body":"Who can/should resolve this?\n\n[~cnauroth],\nI have a similar one. HADOOP-9819 also changes a rename behavior but it seems as a real bug.\nCould you please check. I am confused whether we should do that change or not.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=boky01","name":"boky01","key":"boky01","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=boky01&avatarId=29244","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=boky01&avatarId=29244","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=boky01&avatarId=29244","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=boky01&avatarId=29244"},"displayName":"Andras Bokor","active":true,"timeZone":"Europe/Budapest"},"created":"2016-05-24T14:39:04.175+0000","updated":"2016-05-24T14:39:04.175+0000"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-10385/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2xgj3:"}}