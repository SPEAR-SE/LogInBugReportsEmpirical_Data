{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12919568","self":"https://issues.apache.org/jira/rest/api/2/issue/12919568","key":"HDFS-9513","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/10005","id":"10005","description":"Workaround","name":"Workaround"},"customfield_12312322":null,"customfield_12310220":"2015-12-07T13:56:50.717+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sun Sep 03 02:44:34 UTC 2017","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_3_*:*_76696721441_*|*_3_*:*_2_*:*_2042052776_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2018-06-05T12:14:44.491+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-9513/watchers","watchCount":7,"isWatching":false},"created":"2015-12-07T04:21:50.331+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325049","id":"12325049","description":"2.2.0 release","name":"2.2.0","archived":false,"released":true,"releaseDate":"2013-10-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12331979","id":"12331979","description":"2.7.1 release","name":"2.7.1","archived":false,"released":true,"releaseDate":"2015-07-06"}],"issuelinks":[{"id":"12451096","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12451096","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12718187","key":"HDFS-6481","self":"https://issues.apache.org/jira/rest/api/2/issue/12718187","fields":{"summary":"DatanodeManager#getDatanodeStorageInfos() should check the length of storageIDs","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-06-05T12:14:44.535+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312928","id":"12312928","name":"hdfs-client"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312926","id":"12312926","name":"namenode"}],"timeoriginalestimate":null,"description":"We is upgraded our new HDFS cluster to 2.7.1,but we YARN cluster is 2.2.0(8000+,it's too hard to upgrade as soon as HDFS cluster).\nThe compatible case happened  datasteamer do pipeline recovery, the NN need DN's storageInfo to update pipeline, and the storageIds is pair of pipleline's DN,but HDFS support storage type feature from 2.3.0 [HDFS-2832|https://issues.apache.org/jira/browse/HDFS-2832], older version not have storageId ,although the protobuf serialization make the protocol compatible,but the client  will throw remote exception as ArrayIndexOutOfBoundsException.\n----\nthe exception stack is below:\n{noformat}\n2015-12-05 20:26:38,291 ERROR [Thread-4] org.apache.hadoop.hdfs.DFSClient: Failed to close file XXX\norg.apache.hadoop.ipc.RemoteException(java.lang.ArrayIndexOutOfBoundsException): 0\n\tat org.apache.hadoop.hdfs.server.blockmanagement.DatanodeManager.getDatanodeStorageInfos(DatanodeManager.java:513)\n\tat org.apache.hadoop.hdfs.server.namenode.FSNamesystem.updatePipelineInternal(FSNamesystem.java:6439)\n\tat org.apache.hadoop.hdfs.server.namenode.FSNamesystem.updatePipeline(FSNamesystem.java:6404)\n\tat org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.updatePipeline(NameNodeRpcServer.java:892)\n\tat org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.updatePipeline(ClientNamenodeProtocolServerSideTranslatorPB.java:997)\n\tat org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)\n\tat org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:616)\n\tat org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1066)\n\tat org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:2049)\n\tat org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:2045)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:415)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1844)\n\tat org.apache.hadoop.ipc.Server$Handler.run(Server.java:2043)\n\n\tat org.apache.hadoop.ipc.Client.call(Client.java:1347)\n\tat org.apache.hadoop.ipc.Client.call(Client.java:1300)\n\tat org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:206)\n\tat com.sun.proxy.$Proxy10.updatePipeline(Unknown Source)\n\tat org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.updatePipeline(ClientNamenodeProtocolTranslatorPB.java:801)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:186)\n\tat org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:102)\n\tat com.sun.proxy.$Proxy11.updatePipeline(Unknown Source)\n\tat org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.setupPipelineForAppendOrRecovery(DFSOutputStream.java:1047)\n\tat org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.processDatanodeError(DFSOutputStream.java:823)\n\tat org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.run(DFSOutputStream.java:475)\n{noformat}\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12812166","id":"12812166","filename":"HDFS-9513-20160621.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"created":"2016-06-21T12:37:02.006+0000","size":7292,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12812166/HDFS-9513-20160621.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12776078","id":"12776078","filename":"patch.HDFS-9513.20151207","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-12-07T11:58:07.133+0000","size":6057,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12776078/patch.HDFS-9513.20151207"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12778020","id":"12778020","filename":"patch.HDFS-9513.20151216-2.7.2","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-12-16T15:22:47.644+0000","size":14750,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12778020/patch.HDFS-9513.20151216-2.7.2"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"DataNodeManager#getDataNodeStorageInfos not backward compatibility","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":" 2.2.0 HDFS Client &2.7.1 HDFS Cluster","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12919568/comment/15044717","id":"15044717","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"body":"  usually,can get the storageInfo by block,but in the case,it's seems to not work.\n  the DatanodeManager#getDatanodeStorageInfos called by \n    1. FSNameSystem#commitBlockSynchronization\n    2. FSNameSystem#getAdditionalDataNode\n    3. FSNameSystem#updatePipelingInternal\n  the first method is called from datanodes,it's compatibility. \n  when add a new block,the block with storageInfo will store at inodefile/blockMap/editLog,but if add new datanode for the pipeline,the addtional datanode and storageInfo not store,because the client need to try transfer the RWB block.\n   so when call FSNameSystem#updatePipelingInternal,the old block's storageInfo is not enough,so can't recovery the storageInfo anyway.\n   and if client is older than 2.3.0,the storageInfo is not useful,although the NN choose  locatedBlock with storageInfo ,but client wirte to DN not pass the storageInfoId\n\n  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-12-07T10:27:54.665+0000","updated":"2015-12-07T10:27:54.665+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12919568/comment/15044978","id":"15044978","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brahmareddy","name":"brahmareddy","key":"brahmareddy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=brahmareddy&avatarId=24624","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brahmareddy&avatarId=24624","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brahmareddy&avatarId=24624","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brahmareddy&avatarId=24624"},"displayName":"Brahma Reddy Battula","active":true,"timeZone":"Asia/Kolkata"},"body":"This issue is already reported in HDFS-6481 and its throwing HadoopIllegalArgmentException instead of AIOBException.\n\nI think it would be good to provide a way to workaround this problem for the older clients rather than rejecting their requests straightway considering the cluster size (8000+) mentioned here to upgrade.\nPatch provided might work as workaround for older clients. Any thoughts [~szetszwo]/[~arpitagarwal]\n\n[~Deng FEI],I have few comments about the patch.\n\n1. DatanodeDescriptor#getPerferedStorageInfo(), might not be required. instead one DUMMY storage, May be first storage of DN, can be chosen.\n\nCurrently {{DatanodeManager#getDatanodeStorageInfos(..)}} is used for 3 calls, getAdditionalDatanode(), updatePipeline(), commitBlockSynchronization(). In all these operations, Might get the same problem in case of old clients. Since client dont understand storages, we need not worry to select storage.\n   a. getAdditionalDatanode(), updatePipeline() will be calls from clients directly. But only updatePipeline results will be stored as is. Even then, once the Incremental Block reports is received, these storage will be updated to have proper details in namenode.\n   b. commitBlockSynchronization() will be from datanodes, and even in this case, it might not lead to this workaround as it will have new targets.\n\nUpdated code can look like this\n{code}\nif (old) {\n// CHOOSE First storage as dummy for writing support of Old client as a\n// workaround for HDFS-9513.\n// Later when the block report comes, actual storage Id will be\n// restored in blocks map.\nstorages[i] = dd.getStorageInfos()[0];\n} else {\nstorages[i] = dd.getStorageInfo(storageIDs[i]);\n}\n{code}\n2. Also, may be we can have a config for this workaround and only use when required. ? \n\n3. Can you post a patch for trunk and latest branch-2.7, with HDFS-6481 included? Can throw exception, in case of config disabled, or request is not from old client.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brahmareddy","name":"brahmareddy","key":"brahmareddy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=brahmareddy&avatarId=24624","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brahmareddy&avatarId=24624","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brahmareddy&avatarId=24624","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brahmareddy&avatarId=24624"},"displayName":"Brahma Reddy Battula","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-12-07T13:56:50.717+0000","updated":"2015-12-07T13:56:50.717+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12919568/comment/15046042","id":"15046042","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for reporting the problem and working on it.\n\nFor commitBlockSynchronization and getAdditionalDatanode, NN has storageIDs stored in BlockUnderConstructionFeature.  So we should be able to get storageIDs from there.\n\nFor updatePipeline, NN has storageIDs stored in BlockUnderConstructionFeature except the newly added storageID.  We may choose a random storageID or the first storageID for this case.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-08T00:22:05.397+0000","updated":"2015-12-08T00:22:05.397+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12919568/comment/15049936","id":"15049936","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"body":"yes, i will work on it,later upload new patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-12-10T03:08:09.480+0000","updated":"2015-12-10T03:08:09.480+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12919568/comment/15049937","id":"15049937","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"body":"yes, i will work on it,later upload new patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-12-10T03:08:09.915+0000","updated":"2015-12-10T03:08:09.915+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12919568/comment/15049938","id":"15049938","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"body":"yes, i will work on it,later upload new patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-12-10T03:08:14.202+0000","updated":"2015-12-10T03:08:14.202+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12919568/comment/15060128","id":"15060128","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"body":" DataNode#commitBlockSynchronization has storageInfos in old version which lower than 2.3.0,it's compatible.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"created":"2015-12-16T15:22:47.648+0000","updated":"2015-12-16T15:22:47.648+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12919568/comment/15341682","id":"15341682","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"body":"upload for trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"created":"2016-06-21T12:37:02.019+0000","updated":"2016-06-21T12:37:02.019+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12919568/comment/15341692","id":"15341692","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"body":"[~szetszwo]please do a review if you have time,it's run our cluster for some months.And normally, datanodes will follow namenode's version,it's compatible yet.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"created":"2016-06-21T12:42:16.226+0000","updated":"2016-06-21T12:42:16.226+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12919568/comment/16116012","id":"16116012","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=duyanghao","name":"duyanghao","key":"duyanghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=duyanghao&avatarId=32072","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=duyanghao&avatarId=32072","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=duyanghao&avatarId=32072","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=duyanghao&avatarId=32072"},"displayName":"duyanghao","active":true,"timeZone":"Asia/Hong_Kong"},"body":"[~Deng FEI] [~szetszwo] [~brahmareddy]  i got similar problem,our hdfs client has been using 2.2.0 but hdfs cluster version is 2.6.0,is there any progress for this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=duyanghao","name":"duyanghao","key":"duyanghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=duyanghao&avatarId=32072","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=duyanghao&avatarId=32072","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=duyanghao&avatarId=32072","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=duyanghao&avatarId=32072"},"displayName":"duyanghao","active":true,"timeZone":"Asia/Hong_Kong"},"created":"2017-08-07T02:24:40.191+0000","updated":"2017-08-07T02:24:40.191+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12919568/comment/16148540","id":"16148540","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"body":"[~duyanghao] You can refer to the latest patch,it works  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=Deng+FEI","name":"Deng FEI","key":"deng fei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"DENG FEI","active":true,"timeZone":"Asia/Shanghai"},"created":"2017-08-31T06:54:17.805+0000","updated":"2017-08-31T06:54:17.805+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12919568/comment/16151650","id":"16151650","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=duyanghao","name":"duyanghao","key":"duyanghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=duyanghao&avatarId=32072","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=duyanghao&avatarId=32072","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=duyanghao&avatarId=32072","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=duyanghao&avatarId=32072"},"displayName":"duyanghao","active":true,"timeZone":"Asia/Hong_Kong"},"body":"[~Deng FEI]  What do you mean by latest patch?Could you directly give the url?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=duyanghao","name":"duyanghao","key":"duyanghao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=duyanghao&avatarId=32072","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=duyanghao&avatarId=32072","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=duyanghao&avatarId=32072","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=duyanghao&avatarId=32072"},"displayName":"duyanghao","active":true,"timeZone":"Asia/Hong_Kong"},"created":"2017-09-03T02:44:34.055+0000","updated":"2017-09-03T02:44:34.055+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-9513/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2pihb:"}}