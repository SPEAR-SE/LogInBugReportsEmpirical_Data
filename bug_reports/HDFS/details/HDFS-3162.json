{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12548632","self":"https://issues.apache.org/jira/rest/api/2/issue/12548632","key":"HDFS-3162","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2012-03-29T09:49:25.091+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Fri Jun 15 12:18:59 UTC 2012","customfield_12310420":"233729","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_6751073334_*|*_5_*:*_2_*:*_34951_*|*_4_*:*_1_*:*_12944","customfield_12312321":null,"resolutiondate":"2012-06-15T12:20:11.167+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-3162/watchers","watchCount":6,"isWatching":false},"created":"2012-03-29T09:01:30.055+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=umamaheswararao","name":"umamaheswararao","key":"umamaheswararao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Uma Maheswara Rao G","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-10-17T22:22:15.955+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312926","id":"12312926","name":"namenode"}],"timeoriginalestimate":null,"description":"Even after invalidating the block, continuosly below log is coming\n \nInconsistent number of corrupt replicas for blk_1332906029734_1719blockMap has 0 but corrupt replicas map has 1","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317959","id":"12317959","description":"1.1.0 release","name":"1.1.0","archived":false,"released":true,"releaseDate":"2012-10-13"}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"57597","customfield_12312823":null,"summary":"BlockMap's corruptNodes count and CorruptReplicas map count is not matching.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=suja","name":"suja","key":"suja","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"suja s","active":true,"timeZone":"Asia/Kolkata"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=suja","name":"suja","key":"suja","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"suja s","active":true,"timeZone":"Asia/Kolkata"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548632/comment/13241089","id":"13241089","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=suja","name":"suja","key":"suja","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"suja s","active":true,"timeZone":"Asia/Kolkata"},"body":"Here is the grepped logs with the block:\n\n11:35:02,926 INFO  hdfs.StateChange (FSNamesystem.java:addStoredBlock(3912)) - BLOCK* NameSystem.addStoredBlock: blockMap updated: xx.xx.xx.55:50086 is added to blk_1332906029734_1719 size 30\n11:37:00,818 INFO  hdfs.StateChange (FSNamesystem.java:processReport(3773)) - BLOCK* NameSystem.processReport: block blk_1332906029734_1490 on xx.xx.xx.55:50086 size 30 does not belong to any file.\n11:37:00,818 INFO  hdfs.StateChange (FSNamesystem.java:addToInvalidates(2002)) - BLOCK* NameSystem.addToInvalidates: blk_1332906029734 to xx.xx.xx.55:50086\n11:37:02,777 INFO  hdfs.StateChange (FSNamesystem.java:invalidateWorkForOneNode(3459)) - BLOCK* ask xx.xx.xx.55:50086 to delete  blk_1332906029758_1514 blk_1332906029734_1490 blk_1332906029745_1501 blk_1332906029703_1459 blk_1332906029746_1502 blk_1332906029704_1460 blk_1332906029693_1449 blk_1332906029761_1517\n12:36:59,865 INFO  hdfs.StateChange (FSNamesystem.java:computeReplicationWorkForBlock(3321)) - BLOCK* ask xx.xx.xx.102:50086 to replicate blk_1332906029734_1719 to datanode(s) xx.xx.xx.102:50010\n12:37:01,416 INFO  hdfs.StateChange (FSNamesystem.java:addStoredBlock(3912)) - BLOCK* NameSystem.addStoredBlock: blockMap updated: xx.xx.xx.102:50010 is added to blk_1332906029734_1719 size 30\n14:30:15,537 INFO  hdfs.StateChange (CorruptReplicasMap.java:addToCorruptReplicasMap(55)) - BLOCK NameSystem.addToCorruptReplicasMap: blk_1332906029734 added as corrupt on xx.xx.xx.55:50086 by /xx.xx.xx.55\n14:30:15,537 INFO  hdfs.StateChange (FSNamesystem.java:invalidateBlock(2125)) - DIR* NameSystem.invalidateBlock: blk_1332906029734_1719 on xx.xx.xx.55:50086\n14:30:15,537 INFO  hdfs.StateChange (FSNamesystem.java:addToInvalidates(2002)) - BLOCK* NameSystem.addToInvalidates: blk_1332906029734 to xx.xx.xx.55:50086\n14:30:18,156 INFO  hdfs.StateChange (FSNamesystem.java:invalidateWorkForOneNode(3459)) - BLOCK* ask xx.xx.xx.55:50086 to delete  blk_1332906029734_1719\n14:38:47,685 WARN  namenode.FSNamesystem (FSNamesystem.java:getBlockLocationsInternal(1119)) - Inconsistent number of corrupt replicas for blk_1332906029734_1719blockMap has 0 but corrupt replicas map has 1\n14:44:34,542 WARN  namenode.FSNamesystem (FSNamesystem.java:getBlockLocationsInternal(1119)) - Inconsistent number of corrupt replicas for blk_1332906029734_1719blockMap has 0 but corrupt replicas map has 1\n14:44:46,937 WARN  namenode.FSNamesystem (FSNamesystem.java:getBlockLocationsInternal(1119)) - Inconsistent number of corrupt replicas for blk_1332906029734_1719blockMap has 0 but corrupt replicas map has 1\n14:45:15,794 WARN  namenode.FSNamesystem (FSNamesystem.java:getBlockLocationsInternal(1119)) - Inconsistent number of corrupt replicas for blk_1332906029734_1719blockMap has 0 but corrupt replicas map has 1\n14:45:37,893 WARN  namenode.FSNamesystem (FSNamesystem.java:getBlockLocationsInternal(1119)) - Inconsistent number of corrupt replicas for blk_1332906029734_1719blockMap has 0 but corrupt replicas map has 1\n14:53:43,656 WARN  namenode.FSNamesystem (FSNamesystem.java:getBlockLocationsInternal(1119)) - Inconsistent number of corrupt replicas for blk_1332906029734_1719blockMap has 0 but corrupt replicas map has 1\n14:57:31,448 WARN  namenode.FSNamesystem (FSNamesystem.java:getBlockLocationsInternal(1119)) - Inconsistent number of corrupt replicas for blk_1332906029734_1719blockMap has 0 but corrupt replicas map has 1\n15:17:22,642 WARN  namenode.FSNamesystem (FSNamesystem.java:getBlockLocationsInternal(1119)) - Inconsistent number of corrupt replicas for blk_1332906029734_1719blockMap has 0 but corrupt replicas map has 1\n15:21:20,961 WARN  namenode.FSNamesystem (FSNamesystem.java:getBlockLocationsInternal(1119)) - Inconsistent number of corrupt replicas for blk_1332906029734_1719blockMap has 0 but corrupt replicas map has 1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=suja","name":"suja","key":"suja","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"suja s","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-03-29T09:02:30.036+0000","updated":"2012-03-29T09:02:30.036+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548632/comment/13241119","id":"13241119","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"body":"Do you use append on 1.0? It would cause such a thing. Refrain from using append() on the 1.0/0.20-append release as its buggy in some ways.\n\nAlthough thanks for opening this. We can investigate (but problem may already be fixed in 0.23+ HDFS)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-03-29T09:49:25.091+0000","updated":"2012-03-29T09:49:25.091+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548632/comment/13243281","id":"13243281","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=umamaheswararao","name":"umamaheswararao","key":"umamaheswararao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Uma Maheswara Rao G","active":true,"timeZone":"America/Los_Angeles"},"body":"I don't this problem because of append usage.\n\nLooks like this a race between markBlockAsCorrupt and processOverReplicatedBlocks.\n\n1) NN detects over replicated block and added to invalidates list for DNn.\n2) Before processing invalidates list, BlockScanner found that block corrupted in DNn and reported to NN. \n3) Before acquiring lock, Invalidates list got processed and removed the block from blocksMap from DNn.\n4) Now markBlockAsCorrupt started processing. \n   {code}\n // Add this replica to corruptReplicas Map \n      corruptReplicas.addToCorruptReplicasMap(storedBlockInfo, node);\n      if (countNodes(storedBlockInfo).liveReplicas()>inode.getReplication()) {\n        // the block is over-replicated so invalidate the replicas immediately\n        invalidateBlock(storedBlockInfo, node);\n      } else {\n        // add the block to neededReplication \n        updateNeededReplications(storedBlockInfo, -1, 0);\n      }\n{code}\n since it found the enough replication and invalidateBlock. It will try to remove the storedBlock if line Replicas are more than one.\n This call will just return, because it was already removed blocksMap.\n\nBut it was already added to corruptReplicas Map(shown in the above peice of code).\n\nSo, now the counts of corruptReplicas map and blockMap are different about corrupt replicas.\n\nMostly this exists only on branch-1. \n\nI think this problem already addressed in Trunk.\n\ncode from trunk.\n{code}\n// Add replica to the data-node if it is not already there\n    node.addBlock(storedBlock);\n\n    // Add this replica to corruptReplicas Map\n    corruptReplicas.addToCorruptReplicasMap(storedBlock, node, reason);\n    if (countNodes(storedBlock).liveReplicas() >= inode.getReplication()) {\n      // the block is over-replicated so invalidate the replicas immediately\n      invalidateBlock(storedBlock, node);\n    } \n{code}\n\nsee the first line above. If the block is not already there it is adding to it. I think this should have solve the problem in trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=umamaheswararao","name":"umamaheswararao","key":"umamaheswararao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Uma Maheswara Rao G","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-03-31T20:37:35.566+0000","updated":"2012-03-31T20:37:35.566+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548632/comment/13243286","id":"13243286","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=umamaheswararao","name":"umamaheswararao","key":"umamaheswararao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Uma Maheswara Rao G","active":true,"timeZone":"America/Los_Angeles"},"body":"I don't think this problem because of append usage.\n\nLooks like this is a race between markBlockAsCorrupt and processOverReplicatedBlocks.\n\n1) NN detects over replicated block and added to invalidates list for DNn.\n2) Before processing invalidates list, BlockScanner found that block corrupted in DNn and reported to NN.\n3) Before acquiring lock, Invalidates list got processed and removed the block from blocksMap for DNn.\n4) Now markBlockAsCorrupt started processing.\n\n// Add this replica to corruptReplicas Map \n      corruptReplicas.addToCorruptReplicasMap(storedBlockInfo, node);\n      if (countNodes(storedBlockInfo).liveReplicas()>inode.getReplication()) {\n        // the block is over-replicated so invalidate the replicas immediately\n        invalidateBlock(storedBlockInfo, node);\n      } else {\n        // add the block to neededReplication \n        updateNeededReplications(storedBlockInfo, -1, 0);\n      }\n\nsince it found the enough replication and invalidateBlock. It will try to remove the storedBlock if line Replicas are more than one.\nThis call will just return, because it was already removed blocksMap.\n\nBut it was already added to corruptReplicas Map(shown in the above peice of code).\n\nSo, now the counts of corruptReplicas map and blockMap are different about corrupt replicas.\n\nMostly this issue exists only on branch-1.\n\nI think this problem already addressed in Trunk.\n\ncode from trunk.\n\n// Add replica to the data-node if it is not already there\n    node.addBlock(storedBlock);\n\n    // Add this replica to corruptReplicas Map\n    corruptReplicas.addToCorruptReplicasMap(storedBlock, node, reason);\n    if (countNodes(storedBlock).liveReplicas() >= inode.getReplication()) {\n      // the block is over-replicated so invalidate the replicas immediately\n      invalidateBlock(storedBlock, node);\n    }\n\nsee the first line above. If the block is not already there, it is adding to it. I think this should have solved the problem in trunk.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=umamaheswararao","name":"umamaheswararao","key":"umamaheswararao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Uma Maheswara Rao G","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-03-31T20:42:49.561+0000","updated":"2012-03-31T20:42:49.561+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548632/comment/13269279","id":"13269279","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattf","name":"mattf","key":"mattf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Foley","active":true,"timeZone":"America/Los_Angeles"},"body":"No patch submitted in 1.0.3 time frame.  Please consider contributing in 1.1 context (branch-1).  Thank you.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattf","name":"mattf","key":"mattf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Foley","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-05-06T20:46:48.514+0000","updated":"2012-05-06T20:46:48.514+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548632/comment/13295604","id":"13295604","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"body":"Uma,\n\nExcellent analysis, thanks! That line was added by https://issues.apache.org/jira/browse/HDFS-265 btw, which does indeed make it related to the old append as well?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"created":"2012-06-15T11:49:10.319+0000","updated":"2012-06-15T11:49:10.319+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12548632/comment/13295620","id":"13295620","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=umamaheswararao","name":"umamaheswararao","key":"umamaheswararao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Uma Maheswara Rao G","active":true,"timeZone":"America/Los_Angeles"},"body":"Yep, \n\nActaully Suja has got this issue in our internal branch based on 20.x version. There was one merge in that HDFS-2290. That is added below change\nliveReplicas() > inode.getReplication()) ---> liveReplicas() >= inode.getReplication())\n\nAnd node addition was not there in older versions. \nnode.addBlock(storedBlock);\n\nSo, This issue will not be there in any of the apache versions. We have corrected it intenally as well.\n\nI will close this issue. If any one facing it, feel free to reopen.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=umamaheswararao","name":"umamaheswararao","key":"umamaheswararao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Uma Maheswara Rao G","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-15T12:18:59.728+0000","updated":"2012-06-15T12:18:59.728+0000"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-3162/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0a867:"}}