{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12422074","self":"https://issues.apache.org/jira/rest/api/2/issue/12422074","key":"HDFS-62","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2009-05-21T23:42:40.449+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jun 09 23:39:17 UTC 2010","customfield_12310420":"17138","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_1142990188_*|*_1_*:*_2_*:*_36027913486_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2010-06-09T23:39:17.269+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-62/watchers","watchCount":5,"isWatching":false},"created":"2009-04-05T18:24:13.595+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12332358","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12332358","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12461191","key":"HDFS-1080","self":"https://issues.apache.org/jira/rest/api/2/issue/12461191","fields":{"summary":"SecondaryNameNode image transfer should use the defined http address rather than local ip address","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12324895","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12324895","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"inwardIssue":{"id":"12426070","key":"HADOOP-5888","self":"https://issues.apache.org/jira/rest/api/2/issue/12426070","fields":{"summary":"Improve test run time by avoiding 0.0.0.0 lookups","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-02T02:29:24.668+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"I have set up {{dfs.secondary.http.address}} like this:\n\n{code}\n<property>\n  <name>dfs.secondary.http.address</name>\n  <value>secondary.example.com:50090</value>\n</property>\n{code}\n\nIn my setup {{secondary.example.com}} resolves to an IP address (say, 192.168.0.10) which is not the same as the host's name (as returned by {{InetAddress.getLocalHost().getHostAddress()}}, say 192.168.0.1).\n\nIn this situation, edit log related transfers fail. From the namenode log:\n\n{code}\n2009-04-05 13:32:39,128 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Roll Edit Log from 192.168.0.10\n2009-04-05 13:32:39,168 WARN org.mortbay.log: /getimage: java.io.IOException: GetImage failed. java.net.ConnectException: Connection refused\n        at java.net.PlainSocketImpl.socketConnect(Native Method)\n        at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)\n        at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)\n        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)\n        at java.net.Socket.connect(Socket.java:519)\n        at java.net.Socket.connect(Socket.java:469)\n        at sun.net.NetworkClient.doConnect(NetworkClient.java:163)\n        at sun.net.www.http.HttpClient.openServer(HttpClient.java:394)\n        at sun.net.www.http.HttpClient.openServer(HttpClient.java:529)\n        at sun.net.www.http.HttpClient.<init>(HttpClient.java:233)\n        at sun.net.www.http.HttpClient.New(HttpClient.java:306)\n        at sun.net.www.http.HttpClient.New(HttpClient.java:323)\n        at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:837)\n        at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:778)\n        at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:703)\n        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1026)\n        at org.apache.hadoop.hdfs.server.namenode.TransferFsImage.getFileClient(TransferFsImage.java:151)\n        ...\n{code}\n\nFrom the secondary namenode log:\n\n{code}\n2009-04-05 13:42:39,238 ERROR org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode: Exception in doCheckpoint: \n2009-04-05 13:42:39,238 ERROR org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode: java.io.FileNotFoundException: http://nn.example.com:50070/getimage?putimage=1&port=50090&machine=\n192.168.0.1&token=-19:1243068779:0:1238929357000:1238929031783\n        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1288)\n        at org.apache.hadoop.hdfs.server.namenode.TransferFsImage.getFileClient(TransferFsImage.java:151)\n        at org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode.putFSImage(SecondaryNameNode.java:294)\n        at org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode.doCheckpoint(SecondaryNameNode.java:333)\n        at org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode.run(SecondaryNameNode.java:239)\n        at java.lang.Thread.run(Thread.java:619)\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12404674","id":"12404674","filename":"HADOOP-5626.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=carlos.valiente","name":"carlos.valiente","key":"carlos.valiente","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=carlos.valiente&avatarId=20337","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=carlos.valiente&avatarId=20337","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=carlos.valiente&avatarId=20337","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=carlos.valiente&avatarId=20337"},"displayName":"Carlos Valiente","active":true,"timeZone":"Etc/UTC"},"created":"2009-04-05T18:24:55.084+0000","size":944,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12404674/HADOOP-5626.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12408757","id":"12408757","filename":"hadoop-5626.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2009-05-21T23:46:18.073+0000","size":3078,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12408757/hadoop-5626.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"108381","customfield_12312823":null,"summary":"SecondaryNamenode may report incorrect info host name","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=carlos.valiente","name":"carlos.valiente","key":"carlos.valiente","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=carlos.valiente&avatarId=20337","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=carlos.valiente&avatarId=20337","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=carlos.valiente&avatarId=20337","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=carlos.valiente&avatarId=20337"},"displayName":"Carlos Valiente","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=carlos.valiente","name":"carlos.valiente","key":"carlos.valiente","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=carlos.valiente&avatarId=20337","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=carlos.valiente&avatarId=20337","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=carlos.valiente&avatarId=20337","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=carlos.valiente&avatarId=20337"},"displayName":"Carlos Valiente","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12422074/comment/12711864","id":"12711864","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"This is the issue that prevented TestCheckpoint from passing in HADOOP-3694.\n\nMy patch is the same spirit as Carlos's but uses InetAddress.isAnyLocalAddress instead of a string compare. Uploading shortly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2009-05-21T23:42:40.449+0000","updated":"2009-05-21T23:42:40.449+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12422074/comment/12711866","id":"12711866","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"Fixes the behavior described in this ticket. Modifications to test improve the speed (100 seconds to 30 seconds on my machine where 0.0.0.0 lookup is very slow) and also verify the new behavior (this test fails with the old behavior as noted in HADOOP-3694)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2009-05-21T23:46:18.088+0000","updated":"2009-05-21T23:46:18.088+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12422074/comment/12712217","id":"12712217","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"body":"Todd, \n\n-can you use the code in DNS to get localhost reliably on more systems?  \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"created":"2009-05-22T19:11:02.310+0000","updated":"2009-05-22T19:11:02.310+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12422074/comment/12712221","id":"12712221","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"Steve: that would require the name of the local interface. In the default configuration, that isn't defined, unless I'm missing something.\n\nHere's an alternate solution that I like better: I don't see any reason why the 2NN specifies its own IP address as the machine=<ip> parameter to the putimage request. There are two other options:\n  - The NN could simply use the requester address of the HTTP request to determine the 2NN's IP.\n  - The 2NN could simply use an HTTP PUT or POST to upload the checkpoint rather than requesting a GET callback. I don't know a lot about the Java HTTP facilities, but I assume this isn't too difficult.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2009-05-22T19:21:28.926+0000","updated":"2009-05-22T19:21:28.926+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12422074/comment/12712235","id":"12712235","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"body":"I think we could tease out the code that caches the local hostname and make it more public; that would save the 30s hangs whenever something tries to look it up on one of my badly configured boxes.\n\nFor Java upload, POST is good, goes through firewalls too. HttpClient is the best way to do this -it is already part of the hadoop core library dependencies. Don't waste time trying to understand java.net if you can help it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"created":"2009-05-22T20:18:19.544+0000","updated":"2009-05-22T20:18:19.544+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12422074/comment/12712625","id":"12712625","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12408757/hadoop-5626.txt\n  against trunk revision 778182.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs warnings.\n\n    +1 Eclipse classpath. The patch retains Eclipse classpath integrity.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed core unit tests.\n\n    -1 contrib tests.  The patch failed contrib unit tests.\n\nTest results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-vesta.apache.org/394/testReport/\nFindbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-vesta.apache.org/394/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nCheckstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-vesta.apache.org/394/artifact/trunk/build/test/checkstyle-errors.html\nConsole output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch-vesta.apache.org/394/console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2009-05-25T02:39:21.606+0000","updated":"2009-05-25T02:39:21.606+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12422074/comment/12712859","id":"12712859","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"The test failures are unrelated (job history and capacity scheduler, both mapred whereas this only touches hdfs)\n\nWhile I think the discussion above is valuable, since this blocks HADOOP-5888 I'd like for this to be committed and we can continue work on making image transfer more sane in another JIRA.\n\nAs for switching to POST rather than the \"GET with a callback to another GET\", I looked into this today and, while easy, I'm not sure it's a great idea. I think there are some people who are relying on the GetImageServlet on the 2NN for backup purposes, so removing the Jetty from the 2NN would break that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2009-05-26T05:12:25.125+0000","updated":"2009-05-26T05:12:25.125+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12422074/comment/12713005","id":"12713005","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhruba","name":"dhruba","key":"dhruba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhruba&avatarId=30636","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhruba&avatarId=30636","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhruba&avatarId=30636","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhruba&avatarId=30636"},"displayName":"dhruba borthakur","active":true,"timeZone":"America/Tijuana"},"body":"> As for switching to POST rather than the \"GET with a callback to another GET\", I \n\nI remember that when this was being designed the first time, I was told that there could be \"permission\" related issues to do a POST vs a GET. The POST is like a \"write\" somewhat, whereas a GET is more like a \"read\".","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhruba","name":"dhruba","key":"dhruba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhruba&avatarId=30636","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhruba&avatarId=30636","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhruba&avatarId=30636","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhruba&avatarId=30636"},"displayName":"dhruba borthakur","active":true,"timeZone":"America/Tijuana"},"created":"2009-05-26T13:26:15.897+0000","updated":"2009-05-26T13:26:15.897+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12422074/comment/12713190","id":"12713190","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jghoman","name":"jghoman","key":"jghoman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jghoman&avatarId=10318","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jghoman&avatarId=10318","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jghoman&avatarId=10318","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jghoman&avatarId=10318"},"displayName":"Jakob Homan","active":true,"timeZone":"America/Los_Angeles"},"body":"In BackupNode::getHttpServerAddress this issue also arises and is handled by using the rpcAddress, which has already been resolved to a real address.  It would be good to move your solution to NetUtils and access it from both the SecondaryNameNode and the BackupNode, to avoid code duplication.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jghoman","name":"jghoman","key":"jghoman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jghoman&avatarId=10318","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jghoman&avatarId=10318","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jghoman&avatarId=10318","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jghoman&avatarId=10318"},"displayName":"Jakob Homan","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-05-26T19:01:21.195+0000","updated":"2009-05-26T19:01:21.195+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12422074/comment/12713211","id":"12713211","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"body":"+1 to having something common\n\nI think we also ought to spell out the minimum requirements of hadoop on a network, something like\n\n/etc/hosts is well configured (local hostname doesnt map to 127.0.0.1 or ::1)\ndns works\nrDNS works\n..etc\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_l","name":"steve_l","key":"steve_l","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Loughran","active":true,"timeZone":"Etc/UTC"},"created":"2009-05-26T19:50:58.395+0000","updated":"2009-05-26T19:50:58.395+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12422074/comment/12713318","id":"12713318","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"Jakob and Steve: I definitely agree that we need a more centralized common way of doing this. I think HADOOP-4383 is a good place to suggest doing a more general overhaul of how services locate each other. I wrote up a brief proposal to Steve in a private email which I'll copy paste into that JIRA.\n\nFor now, I think making some small concrete steps is the best route. History has shown that it's difficult (and takes a lot of time) to get larger sweeping changes through the development pipeline, so we should work towards some small achievable goals while planning out the better solution.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2009-05-26T23:08:03.345+0000","updated":"2009-05-26T23:08:03.345+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12422074/comment/12713657","id":"12713657","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jghoman","name":"jghoman","key":"jghoman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jghoman&avatarId=10318","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jghoman&avatarId=10318","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jghoman&avatarId=10318","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jghoman&avatarId=10318"},"displayName":"Jakob Homan","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. For now, I think making some small concrete steps is the best route. History has shown that it's difficult (and takes a lot of time) to get larger sweeping changes through the development pipeline, so we should work towards some small achievable goals while planning out the better solution.\n\nService location issues are certainly worth looking at and you're right that HADOOP-4383 is a good place to start.  My comment dealt with your specific patch, which as it stands, is introducing a bit of code duplication in terms of resolving the full hostname of the backup node and secondary namenode.  I'd recommend updating your patch to avoid this by utilizing the net utils package as a repository of this rather generic function.  No need to introduce two ways of doing the same thing. :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jghoman","name":"jghoman","key":"jghoman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jghoman&avatarId=10318","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jghoman&avatarId=10318","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jghoman&avatarId=10318","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jghoman&avatarId=10318"},"displayName":"Jakob Homan","active":true,"timeZone":"America/Los_Angeles"},"created":"2009-05-27T17:47:35.353+0000","updated":"2009-05-27T17:47:35.353+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12422074/comment/12716158","id":"12716158","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"Removing \"Patch available\" status to incorporate feedback and refactor the change into a static method in NetUtils.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2009-06-04T05:29:03.684+0000","updated":"2009-06-04T05:29:03.684+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12422074/comment/12876377","id":"12876377","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jghoman","name":"jghoman","key":"jghoman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jghoman&avatarId=10318","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jghoman&avatarId=10318","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jghoman&avatarId=10318","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jghoman&avatarId=10318"},"displayName":"Jakob Homan","active":true,"timeZone":"America/Los_Angeles"},"body":"Seeing as there hasn't been any movement on this in more than a year, and that HDFS-1080 also solves this issue, I'd like to close this as won't fix.  I think I prefer the 1080 approach for two reasons: it relies on user-provided configuration to guarantee the hostname is reported as expected, rather than how we may be able to decipher, and also it's a smaller change with fewer moving parts.  \n\nThoughts?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jghoman","name":"jghoman","key":"jghoman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jghoman&avatarId=10318","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jghoman&avatarId=10318","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jghoman&avatarId=10318","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jghoman&avatarId=10318"},"displayName":"Jakob Homan","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-07T19:31:42.714+0000","updated":"2010-06-07T19:31:42.714+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12422074/comment/12877267","id":"12877267","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jghoman","name":"jghoman","key":"jghoman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jghoman&avatarId=10318","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jghoman&avatarId=10318","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jghoman&avatarId=10318","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jghoman&avatarId=10318"},"displayName":"Jakob Homan","active":true,"timeZone":"America/Los_Angeles"},"body":"Not hearing any objections, I'm resolving this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jghoman","name":"jghoman","key":"jghoman","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jghoman&avatarId=10318","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jghoman&avatarId=10318","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jghoman&avatarId=10318","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jghoman&avatarId=10318"},"displayName":"Jakob Homan","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-06-09T23:39:17.241+0000","updated":"2010-06-09T23:39:17.241+0000"}],"maxResults":15,"total":15,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-62/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0iwmv:"}}