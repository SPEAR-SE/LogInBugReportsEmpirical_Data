{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13150200","self":"https://issues.apache.org/jira/rest/api/2/issue/13150200","key":"HDFS-13401","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":null,"customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Mon Apr 09 09:25:22 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-13401/watchers","watchCount":2,"isWatching":false},"created":"2018-04-05T02:26:52.699+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12342129","id":"12342129","name":"3.0.1","archived":false,"released":true,"releaseDate":"2018-03-25"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-04-09T23:00:20.823+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12318801","id":"12318801","name":"federation","description":"Multiple Namenode Federation"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12329603","id":"12329603","name":"hdfs"}],"timeoriginalestimate":null,"description":"In federation cases, if we have a config like below:\r\n\r\n<property>\r\n <name>fs.viewfs.mounttable.ClusterX.link./foo</name>\r\n <value>hdfs://nn2-clusterx.example.com:8020/footarget</value>\r\n </property>\r\n\r\nWhen the folder hdfs://nn2-clusterx.example.com:8020/projects/footarget is not actually exist, the command {{hdfs dfs ls /}} can still see the folder, but the folder is not actually exist. then we try to use mkdir command to create the viewfs folder {{hdfs dfs mkdir /foo}}, the return code is true, but the folder is not created. However, when we use {{hdfs dfs mkdir -p /foo/xxx}} which have a deeper location to create folder, the folder is successfully created. The results in these two cases may be ambigiuous.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12918055","id":"12918055","filename":"HDFS-13401.000.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiangjianfei","name":"jiangjianfei","key":"jiangjianfei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jianfei Jiang","active":true,"timeZone":"Etc/UTC"},"created":"2018-04-09T09:21:05.429+0000","size":4282,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12918055/HDFS-13401.000.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Different behavior in mkdir when the target folder of mount table is uncreated","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiangjianfei","name":"jiangjianfei","key":"jiangjianfei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jianfei Jiang","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiangjianfei","name":"jiangjianfei","key":"jiangjianfei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jianfei Jiang","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13150200/comment/16430282","id":"16430282","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiangjianfei","name":"jiangjianfei","key":"jiangjianfei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jianfei Jiang","active":true,"timeZone":"Etc/UTC"},"body":"No exception or other hints show that the hdfs folder which mounted to viewfs MUST exist and we cannot created by mkdir command. Is it necessary to make the mount viewfs folder be creatable? Or throw a exception when mkdir command under a viewfs path which is actually not exist?\r\n\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiangjianfei","name":"jiangjianfei","key":"jiangjianfei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jianfei Jiang","active":true,"timeZone":"Etc/UTC"},"created":"2018-04-09T08:58:16.223+0000","updated":"2018-04-09T23:00:20.818+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13150200/comment/16430306","id":"16430306","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiangjianfei","name":"jiangjianfei","key":"jiangjianfei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jianfei Jiang","active":true,"timeZone":"Etc/UTC"},"body":"As InternalDirOfViewFs is readonly, The path of a mount path cannot be created if no deeper path is givern. I made a prospective in patch 000, mkdir function for ViewFileSystem is changed when resolving the path. I wonder if it is necessary to make this change and if this change is proper.\r\n\r\nTry to change mkdir function in FileContext as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jiangjianfei","name":"jiangjianfei","key":"jiangjianfei","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jianfei Jiang","active":true,"timeZone":"Etc/UTC"},"created":"2018-04-09T09:25:22.436+0000","updated":"2018-04-09T09:26:52.340+0000"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-13401/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3s63j:"}}