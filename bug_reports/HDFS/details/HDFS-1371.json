{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12473250","self":"https://issues.apache.org/jira/rest/api/2/issue/12473250","key":"HDFS-1371","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315571","id":"12315571","description":"","name":"0.23.0","archived":false,"released":true,"releaseDate":"2011-11-11"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-09-03T16:18:02.392+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat May 21 12:38:14 UTC 2011","customfield_12310420":"15602","customfield_12312320":null,"customfield_12310222":"10002_*:*_6_*:*_407890415_*|*_1_*:*_6_*:*_21906336158_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-05-19T22:34:35.653+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-1371/watchers","watchCount":9,"isWatching":false},"created":"2010-09-03T16:10:49.100+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"8.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314048","id":"12314048","description":"","name":"0.20.1","archived":false,"released":true,"releaseDate":"2009-09-01"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315571","id":"12315571","description":"","name":"0.23.0","archived":false,"released":true,"releaseDate":"2011-11-11"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-05-21T12:38:14.342+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312928","id":"12312928","name":"hdfs-client"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312926","id":"12312926","name":"namenode"}],"timeoriginalestimate":null,"description":"On our cluster, 12 files were reported as corrupt by fsck even though the replicas on the datanodes were healthy.\nTurns out that all the replicas (12 files x 3 replicas per file) were reported corrupt from one node.\n\nSurprisingly, these files were still readable/accessible from dfsclient (-get/-cat) without any problems.\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12477335","id":"12477335","filename":"HDFS-1371.04252011.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-04-25T20:53:49.357+0000","size":25363,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12477335/HDFS-1371.04252011.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12478008","id":"12478008","filename":"HDFS-1371.0503.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-03T00:43:34.679+0000","size":21450,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12478008/HDFS-1371.0503.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12479061","id":"12479061","filename":"HDFS-1371.0513.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-13T05:38:49.546+0000","size":27823,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12479061/HDFS-1371.0513.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12479352","id":"12479352","filename":"HDFS-1371.0515.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-16T17:59:37.150+0000","size":27530,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12479352/HDFS-1371.0515.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12479533","id":"12479533","filename":"HDFS-1371.0517.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-17T23:31:10.494+0000","size":27597,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12479533/HDFS-1371.0517.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12479526","id":"12479526","filename":"HDFS-1371.0517.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-17T22:23:06.236+0000","size":27608,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12479526/HDFS-1371.0517.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12479689","id":"12479689","filename":"HDFS-1371.0518.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-18T23:38:31.610+0000","size":27609,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12479689/HDFS-1371.0518.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12479660","id":"12479660","filename":"HDFS-1371.0518.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-18T21:37:23.113+0000","size":12933,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12479660/HDFS-1371.0518.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"53413","customfield_12312823":null,"summary":"One bad node can incorrectly flag many files as corrupt","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knoguchi","name":"knoguchi","key":"knoguchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Koji Noguchi","active":true,"timeZone":"America/New_York"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knoguchi","name":"knoguchi","key":"knoguchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Koji Noguchi","active":true,"timeZone":"America/New_York"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"yahoo internal version \n[knoguchi@gwgd4003 ~]$ hadoop version\nHadoop 0.20.104.3.1007030707\n","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/12905949","id":"12905949","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"Just to clarify, when you say \"reported corrupt\" you mean from client nodes, right?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2010-09-03T16:18:02.392+0000","updated":"2010-09-03T16:18:02.392+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/12905950","id":"12905950","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"I have checked the code and discussed it with Koji.\n\n(a) When DFSClient detects a corrupt replica, it reports to NN.  Then, NN will blindly mark the replica as corrupted in the BlocksMap.\n\n(b) When NN receives a ClientProtocol.getBlockLocations(..) rpc call, it gets all the replicas from the BlocksMap.  If there are one or more good replicas, NN returns the good replicas only.  If all replicas are corrupted, it returns all (corrupted) replicas and set LocatedBlock.corrupt = true.\n\n(c) When DFSClient gets a LocatedBlock from NN, it does not care whether LocatedBlock.corrupt is true or false.\n\nThe flaws are in (a) and (c).  The problem here is that if the DFSClient in (a) is bad (e.g. bad machine), NN may incorrectly mark the replicas as corrupted.  Then, when another DFSClient tries to read the block, it receives a LocatedBlock with LocatedBlock.corrupt = true but it still keeps using them because of (c).  Luckily, the double negative cancels out, therefore, the read successes.  However, the NN BlocksMap information is incorrect and will not be fixed until NN restarts.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-09-03T16:20:24.985+0000","updated":"2010-09-03T16:20:24.985+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/12905952","id":"12905952","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knoguchi","name":"knoguchi","key":"knoguchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Koji Noguchi","active":true,"timeZone":"America/New_York"},"body":"(you guys are too fast.  I wanted the description to be short and was going to paste the logs afterwards... )\n\nPicking one such file: /myfile/part-00145.gz blk_-1426587446408804113_970819282\n\nNamenode log showing\n{noformat}\n2010-08-31 10:47:56,258 INFO org.apache.hadoop.hdfs.StateChange: BLOCK NameSystem.addToCorruptReplicasMap: blk_-1426587446408804113 added as corrupt on ZZ.YY.XX..220:1004 by /ZZ.YY.XX.246\n2010-08-31 10:47:56,290 INFO org.apache.hadoop.hdfs.StateChange: BLOCK NameSystem.addToCorruptReplicasMap: blk_-1426587446408804113 added as corrupt on ZZ.YY.XX..252:1004 by /ZZ.YY.XX.246\n2010-08-31 10:47:56,489 INFO org.apache.hadoop.hdfs.StateChange: BLOCK NameSystem.addToCorruptReplicasMap: blk_-1426587446408804113 added as corrupt on ZZ.YY.XX..107:1004 by /ZZ.YY.XX.246\n2010-08-31 10:49:00,508 INFO org.apache.hadoop.hdfs.StateChange: BLOCK NameSystem.addToCorruptReplicasMap: duplicate requested for blk_-1426587446408804113 to add as corrupt on ZZ.YY.XX.252:1004 by /ZZ.YY.XX.246\n2010-08-31 10:49:00,554 INFO org.apache.hadoop.hdfs.StateChange: BLOCK NameSystem.addToCorruptReplicasMap: duplicate requested for blk_-1426587446408804113 to add as corrupt on ZZ.YY.XX.107:1004 by /ZZ.YY.XX.246\n2010-08-31 10:49:03,934 INFO org.apache.hadoop.hdfs.StateChange: BLOCK NameSystem.addToCorruptReplicasMap: duplicate requested for blk_-1426587446408804113 to add as corrupt on ZZ.YY.XX.220:1004 by /ZZ.YY.XX.246\n2010-08-31 10:49:03,949 INFO org.apache.hadoop.hdfs.StateChange: BLOCK NameSystem.addToCorruptReplicasMap: duplicate requested for blk_-1426587446408804113 to add as corrupt on ZZ.YY.XX.252:1004 by /ZZ.YY.XX.246\n2010-08-31 10:49:03,971 INFO org.apache.hadoop.hdfs.StateChange: BLOCK NameSystem.addToCorruptReplicasMap: duplicate requested for blk_-1426587446408804113 to add as corrupt on ZZ.YY.XX.107:1004 by /ZZ.YY.XX.246\n2010-08-31 10:49:07,986 INFO org.apache.hadoop.hdfs.StateChange: BLOCK NameSystem.addToCorruptReplicasMap: duplicate requested for blk_-1426587446408804113 to add as corrupt on ZZ.YY.XX.252:1004 by /ZZ.YY.XX.246\n2010-08-31 10:49:08,257 INFO org.apache.hadoop.hdfs.StateChange: BLOCK NameSystem.addToCorruptReplicasMap: duplicate requested for blk_-1426587446408804113 to add as corrupt on ZZ.YY.XX.220:1004 by /ZZ.YY.XX.246\n2010-08-31 10:49:08,895 INFO org.apache.hadoop.hdfs.StateChange: BLOCK NameSystem.addToCorruptReplicasMap: duplicate requested for blk_-1426587446408804113 to add as corrupt on ZZ.YY.XX.107:1004 by /ZZ.YY.XX.246\n{noformat}\n\nUser Tasklogs on ZZ.YY.XX.246 showing\n{noformat}\n[root@ZZ.YY.XX.246 ~]# find /my/mapred/userlogs/ -type f -exec grep 1426587446408804113 \\{\\} \\; -print\norg.apache.hadoop.fs.ChecksumException: Checksum error: /blk_-1426587446408804113:of:/myfile/part-00145.gz at 222720\n2010-08-31 10:47:56,256 WARN org.apache.hadoop.hdfs.DFSClient: Found Checksum error for blk_-1426587446408804113_970819282 from ZZ.YY.XX.220:1004 at 222720\norg.apache.hadoop.fs.ChecksumException: Checksum error: /blk_-1426587446408804113:of:/myfile/part-00145.gz at 103936\n2010-08-31 10:47:56,284 WARN org.apache.hadoop.hdfs.DFSClient: Found Checksum error for blk_-1426587446408804113_970819282 from ZZ.YY.XX.252:1004 at 103936\norg.apache.hadoop.fs.ChecksumException: Checksum error: /blk_-1426587446408804113:of:/myfile/part-00145.gz at 250368\n2010-08-31 10:47:56,464 WARN org.apache.hadoop.hdfs.DFSClient: Found Checksum error for blk_-1426587446408804113_970819282 from ZZ.YY.XX.107:1004 at 250368\n2010-08-31 10:47:56,490 INFO org.apache.hadoop.hdfs.DFSClient: Could not obtain block blk_-1426587446408804113_970819282 from any node: java.io.IOException: No live nodes contain current block. Will get new block locations from namenode and retry...\n{noformat}\n\nThis was consistent among all the 12 files reported as corrupt.  All from the same node ZZ.YY.XX.246.\n\n\nWhen trying to pull this file from other healthy node, to my surprise it didn't fail.\n\n{noformat}\n[knoguchi@gwgd4003 ~]$ hadoop dfs -ls /myfile/part-00145.gz\nFound 1 items\n-rw-r--r--   3 user1 users   67771377 2010-08-31 06:46 /myfile/part-00145.gz\n\n[knoguchi@gwgd4003 ~]$ hadoop fsck /myfile/part-00145.gz\n.\n/myfile/part-00145.gz: CORRUPT block blk_-1426587446408804113\nStatus: CORRUPT\n Total size:    67771377 B\n Total dirs:    0\n Total files:   1\n Total blocks (validated):      1 (avg. block size 67771377 B)\n  ********************************\n  CORRUPT FILES:        1\n  CORRUPT BLOCKS:       1\n  ********************************\n Minimally replicated blocks:   1 (100.0 %)\n Over-replicated blocks:        0 (0.0 %)\n Under-replicated blocks:       0 (0.0 %)\n Mis-replicated blocks:         0 (0.0 %)\n Default replication factor:    3\n Average block replication:     3.0\n Corrupt blocks:                1\n Missing replicas:              0 (0.0 %)\n\n\nThe filesystem under path '/myfile/part-00145.gz' is CORRUPT\n[knoguchi@gwgd4003 ~]$\n[knoguchi@gwgd4003 ~]$ hadoop dfs -get /myfile/part-00145.gz /tmp\n[knoguchi@gwgd4003 ~]$ echo $?\n0\n[knoguchi@gwgd4003 ~]$ ls -l /tmp/part-00145.gz\n-rw-r--r-- 1 knoguchi users 67771377 Sep  2 21:04 /tmp/part-00145.gz\n[knoguchi@gwgd4003 ~]$\n{noformat}\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knoguchi","name":"knoguchi","key":"knoguchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Koji Noguchi","active":true,"timeZone":"America/New_York"},"created":"2010-09-03T16:25:12.067+0000","updated":"2010-09-03T16:25:12.067+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/12905954","id":"12905954","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"Is this actually apache hadoop 0.20 or 0.21 or trunk or what?\n\nYahoo!'s internal hadoop versioning doesn't really match up to what everyone else is using... :( ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2010-09-03T16:29:09.676+0000","updated":"2010-09-03T16:29:09.676+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/12905962","id":"12905962","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"> Is this actually apache hadoop 0.20 or 0.21 or trunk or what? \n\nI have not checked the codes in details.  I believe this problem exists in all Apache Hadoop 0.20, 0.21, trunk and even some earlier versions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-09-03T16:53:24.820+0000","updated":"2010-09-03T16:53:24.820+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/12905973","id":"12905973","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hairong","name":"hairong","key":"hairong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hairong Kuang","active":true,"timeZone":"Etc/UTC"},"body":"I think the readers does not check corrupt flag is done on purpose and I like it.\n\nWhat's problematic is to let client to report corruption to NameNode. I think a better solution could be client notify the datanode of the possible corruption and let  DN to doublecheck and report to NN. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hairong","name":"hairong","key":"hairong","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hairong Kuang","active":true,"timeZone":"Etc/UTC"},"created":"2010-09-03T17:29:19.785+0000","updated":"2010-09-03T17:29:19.785+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/12905992","id":"12905992","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"> I think the readers does not check corrupt flag is done on purpose and I like it.\n\nI agree that the behavior is okay.  It probably is better to add a warning message when LocatedBlock.corrupt == true.  Or the client should report \"non-corrupted block\" to the NN after the client successfully read the block.\n\nIf this was really done on purpose but not a bug, do we have documentation about this \"feature\"?  I have not found any javadoc mentioning it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-09-03T18:01:09.428+0000","updated":"2010-09-03T18:01:09.428+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/12906031","id":"12906031","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"I agree that \"c\" seems like an \"incorrect feature\". The DFSClient should have to have\na configuration set to say \"allow reading corrupt blocks\" in my opinion.\n\nAlso I think Hairong's solution makes sense - the client should send\nOP_STATUS_ERROR_CHECKSUM back to the DN, and the DN could then add it\nto the front of the DatanodeBlockScanner queue.\n\nIt would be even better if the client reported the *offset* of the supposed checksum error\nso we could verify it immediately rather than scanning the full 64M block, but that's\nmore of a protocol change.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2010-09-03T19:22:17.803+0000","updated":"2010-09-03T19:22:17.803+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/12906197","id":"12906197","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"body":"We discussed this with Rob and Nicholas.\n- We should rather leave the notification logic in place as as. \nI think that if there is any suspicion that some data is bad it is better that NN knows about it right away. \nRather than first going through an additional verification procedure with data-nodes.\nBad clients are rare and we should optimize for the regular case.\n- We should still do something with bad clients marking good blocks as corrupt.\nThe proposal is to add the verification logic to the name-node.\nWhen the NN encounters that *all* replicas of a block are corrupt it requests the respective data-nodes \nto verify their replicas. DNs verify and either confirm the corruptness or repair the replica state on the name-node.\n- NN should not worry until all replicas are corrupt as the general replication logic should recover the block.\n- This will minimize changes and utilize existing replica verification and restoration procedures.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"created":"2010-09-04T01:05:06.721+0000","updated":"2010-09-04T01:05:06.721+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/12906202","id":"12906202","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"body":"Is it possible to DoS the NN by declaring all blocks and their replicas as corrupt?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=aw","name":"aw","key":"aw","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=aw&avatarId=23681","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=aw&avatarId=23681","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=aw&avatarId=23681","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=aw&avatarId=23681"},"displayName":"Allen Wittenauer","active":true,"timeZone":"America/Tijuana"},"created":"2010-09-04T01:23:25.880+0000","updated":"2010-09-04T01:23:25.880+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/12906315","id":"12906315","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhruba","name":"dhruba","key":"dhruba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhruba&avatarId=30636","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhruba&avatarId=30636","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhruba&avatarId=30636","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhruba&avatarId=30636"},"displayName":"dhruba borthakur","active":true,"timeZone":"America/Tijuana"},"body":"> e. I think a better solution could be client notify the datanode of the possible corruption and let DN to doublecheck and report to NN.\n\nany drawbacks of this approach? Keeps namenode complexity down, prevents DOS, etc.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhruba","name":"dhruba","key":"dhruba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhruba&avatarId=30636","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhruba&avatarId=30636","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhruba&avatarId=30636","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhruba&avatarId=30636"},"displayName":"dhruba borthakur","active":true,"timeZone":"America/Tijuana"},"created":"2010-09-05T00:41:50.651+0000","updated":"2010-09-05T00:41:50.651+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13015686","id":"13015686","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"body":"I am working on this bug.  I will take Konstantin's last comment as my approach to fix this bug:\n\n1) Add a new validate block DatanodeCommand for data node.  \n2) Namenode sends the validation request to data node via heartbeat.\n{code}\npublic DatanodeCommand[] sendHeartbeat(...)\n{code}\n3) data node receives the validate block command, process it and ask block scanner to validate the block.\n{code}\n  private boolean processCommand(DatanodeCommand cmd)\n  switch(cmd.getAction()) {\n      case DatanodeProtocol.DNA_VALIDATE:\n       if (blockScanner != null) {\n          blockScanner.verifyBlock(toVerify);\n        }\n  }\n{code}\n4) If the block is corrupted, repair the block.  If the block is good, tell name node to mark the block as good.\n\nAny comments?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-04-04T23:49:49.919+0000","updated":"2011-04-04T23:49:49.919+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13019650","id":"13019650","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"body":"> any drawbacks of this approach? Keeps namenode complexity down, prevents DOS, etc.\n\n  The only drawback I can think of is that the namenode will continue to serve this replica to clients until datanode reports that it is corrupt. But, there is already a window of time when multiple clients can try to read a corrupt replica. This approach will increase that window (probably by a few seconds). It seems to be a justified cost to avoid DOS and additional complexity in namenode.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"created":"2011-04-14T01:04:25.908+0000","updated":"2011-04-14T01:04:25.908+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13019658","id":"13019658","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhruba","name":"dhruba","key":"dhruba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhruba&avatarId=30636","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhruba&avatarId=30636","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhruba&avatarId=30636","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhruba&avatarId=30636"},"displayName":"dhruba borthakur","active":true,"timeZone":"America/Tijuana"},"body":"I agree with Jitendra. I think a good solution could be client directly notify the datanode of the possible corruption and let DN to doublecheck and report to NN","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dhruba","name":"dhruba","key":"dhruba","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dhruba&avatarId=30636","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dhruba&avatarId=30636","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dhruba&avatarId=30636","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dhruba&avatarId=30636"},"displayName":"dhruba borthakur","active":true,"timeZone":"America/Tijuana"},"created":"2011-04-14T01:41:12.926+0000","updated":"2011-04-14T01:41:12.926+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13019930","id":"13019930","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"body":"I also agree with client directly notify the data node is a good solution.  I will implement this accordingly.  Client will send OP_STATUS_CHECKSUM_ERROR to datanode to inform that there was potential checksum error.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-04-14T17:28:45.775+0000","updated":"2011-04-14T17:28:45.775+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13019943","id":"13019943","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"body":"Just to correct myself, Client will send DataTransferProtocol.Status.ERROR_CHECKSUM to data node to inform that there was potential checksum error.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-04-14T17:52:28.481+0000","updated":"2011-04-14T17:52:28.481+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13020365","id":"13020365","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knoguchi","name":"knoguchi","key":"knoguchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Koji Noguchi","active":true,"timeZone":"America/New_York"},"body":"Can we take a similar approach to mapred blacklisting?\nJobTracker only considers blacklisting TaskTrackers when retry attempt is successful on the other node.\nHere, can we change the logic on the dfsclient side so that it would only report a corrupted block when retry pull from another datanode is successful? \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knoguchi","name":"knoguchi","key":"knoguchi","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Koji Noguchi","active":true,"timeZone":"America/New_York"},"created":"2011-04-15T17:25:52.312+0000","updated":"2011-04-15T17:25:52.312+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13020400","id":"13020400","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"body":"Just to summaries, we have multiple options to solve this problem now\n1) After DFSClient detects a bad block from one data node, DN1, it reads from the next data node, DN2.  If client can ever read one good replica of the block, it reports to NN that DN1 has a bad replica of the block.  If client can not successfully read any replica of the block, it does not report anything to NN.  If all the replicas of the block are bad, there is nothing we can do to recover this anyways.  This is a simple change that only happens on DFSClient. \n\n2) after DFSclient detects a bad block replica, it reports back to that DN directly by sending a OP_STATUS_CHECKSUM_ERROR message.  The DN puts these blocks to the head of block scanner to verify.  If the replica is bad, repair as how block scanner is now doing.   This way no traffic driven to NN.  Logic changes are in block scanner and adding communication of echo message between DN and client.  \n\n3) client reports to NN, once NN finds that *ALL* replicas are bad, NN asks DNs to verify.  One drawback would be a bad client can keep reporting to NN.  NN can be overwored.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-04-15T19:10:05.530+0000","updated":"2011-04-15T19:10:05.530+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13020512","id":"13020512","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"body":"Had a discussion with multiple people, after a thoughtful debate, the conclusion we draw at the end is that we will take the solution that Koji suggested: \n\n1) With replica number that is great than 1, if DFS client detects corruption of a block replica, it continuities to try to get another replica from another data node.  If DFS client can at least read one good replica of the block, client reports to name node with all the bad block replicas with their data nodes information. If DFS client can not even read one block replica, it does not report anything to name node.   \n\n2) with replica number that is 1, DFS reports back to the name node if it detects a block corruption.\n\nThis is change only happens on the client side.  The existing logic remains the same on the server end.\n\nWe take this approach because\n1)we consider a bad client is a client who has \"good wish\" but handicapped with some physical difficulties (such as memory problem), not a malicious client.\n2) If a client can not even read one good replica, it could be a handicapped client.  In the worst case scenario, if all the replicas of the block are corrupted, even reporting this back to the name node, there is no repairing work can be done.  More over, based on Koji's experience, it has never been a case that all the replicas of a block are all corrupted in our production environment in the past years.\n3)Handicapped client is extremely rare.  We do not want to put in heavy verification logic on the name/data node end and neither want to have protocol change to just verify blocks for this extremely rare case of handicapped client.\n\nWith that said, having change only on the client reading logic takes care of handicapped clients. It is a light weighted solution with no need of protocol change.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-04-16T01:36:42.573+0000","updated":"2011-04-16T01:36:42.573+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13027965","id":"13027965","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"body":"Disable block scanner in TestFsck#testCorruptBlock by adding\n    conf.setInt(DFSConfigKeys.DFS_DATANODE_SCAN_PERIOD_HOURS_KEY, -1);\nto avoid interfere of block scan to report corrupted blocks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-03T00:43:34.696+0000","updated":"2011-05-03T00:43:34.696+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13029542","id":"13029542","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"body":"TestClientReportBadBlock\n1. Is there a specific reason for creating a dfsClient instead of using dfs.dfs? dfs.dfs is also used at a place, though.\n2. No need to separately call cluster.shutdownDataNodes, cluster.shutdown calls it.\n3. Please don't use System.out.println. You can use LOG instead.\n\nTestFsck.java\n1. testCorruptBlock has become kind of useless as it doesn't test whether fsck can catch corrupt blocks or not. Please try to see if it is possible to actually update the namenode with corrupt blocks which fsck can detect.\n\nDFSInputStream.java\n1. Instead of storing a new field dataNodeCount, we could just store currentLocatedBlock. We can also remove currentBlock and get both\ncurrentBlock and dataNodeCount from currentLocatedBlock. Does that make sense?\n2. Is it possible to avoid declaring corruptedBlockMap as a field in DFSInputStream; because we are checking corrupt replicas for each block and reporting them, but this map has a lifecycle spanning entire DFSInputStream?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-05T19:58:06.006+0000","updated":"2011-05-05T19:58:06.006+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13031555","id":"13031555","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"body":"Projecting JT/TT blacklisting logic to replicas doesn't work very well when all replicas are corrupt. The client will not report in this case, although it is critical. The argument that it never happened in practice is not very strong as it can happen any time.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-05-11T06:05:00.432+0000","updated":"2011-05-11T06:05:00.432+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13031853","id":"13031853","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"body":"In the case of all replicas are corrupted, there is nothing cluster can do to recover. Reporting this to the name node or not would not make a difference. We can argue that if a operator knows about the block corruption, he can choose to physically copy the file from somewhere else. However, in real life, based on Koji's experience, in the past couple years, this has never been a case on Yahoo's clusters that all block replicas are corrupted. Beyond this point, we do not want to too rely on a client to report block corruption and want to restrict the solution to just deal with a handicapped client.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-11T17:10:40.714+0000","updated":"2011-05-11T17:10:40.714+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13032263","id":"13032263","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"body":"I understand you are trying to avoid writing verification logic on the NN, and you don't want to trust clients, as they can be wrong. I agree with the first part of your design, which reports a bad replica if the client can read at least one. I disagree that failure of all replicas should be concealed from the NN.\nCan we do this: if a client reports all replicas corrupt, then NN chooses one of the remaining, which is presumed healthy, and adds it to corrupt. In this case one bad client cannot immediately corrupt the entire block, but if the block is really corrupt then eventually all replicas will be marked corrupt by different clients reading it.\nAs I said not seeing something in the past doesn't mean you should not plan for it. In real life things may change quickly. You can get a shipment of faulty drives or get buggy software (not necessarily in Hadoop). With your solution you will not even know there is a problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shv","name":"shv","key":"shv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Konstantin Shvachko","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-05-12T06:02:05.073+0000","updated":"2011-05-12T06:02:05.073+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13032771","id":"13032771","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"body":"Regarding to the scenario mentioned that if a client reports all replicas corrupted and let NN mark one of the healthy replicas as corrupted, if a client retries reading the same file, it can easily makes all block replicas corrupted.  It is a good idea to completely solve the problem by either adding NN verification logic or let client notify DN and let DN verify it.  What about solving it in a separate jira, but keep this solution as it for now?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-13T00:38:17.133+0000","updated":"2011-05-13T00:38:17.133+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13032830","id":"13032830","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"body":"Upload a patch to address the review comments.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-13T05:38:49.568+0000","updated":"2011-05-13T05:38:49.568+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13032948","id":"13032948","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12479061/HDFS-1371.0513.patch\n  against trunk revision 1102513.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 11 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed these core unit tests:\n                  org.apache.hadoop.cli.TestHDFSCLI\n                  org.apache.hadoop.hdfs.TestDFSStorageStateRecovery\n                  org.apache.hadoop.hdfs.TestFileConcurrentReader\n                  org.apache.hadoop.tools.TestJMXGet\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\n    +1 system test framework.  The patch passed system test framework compile.\n\nTest results: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/514//testReport/\nFindbugs warnings: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/514//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/514//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-13T10:34:08.473+0000","updated":"2011-05-13T10:34:08.473+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13033299","id":"13033299","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"body":"DFSInputStream.java :\n1. Please don't remove the public method getCurrentBlock. Change in DFSClient won't be required if we don't change the method. Also, there is no need to introduce the public method getCurrentLocatedBlock().\n2. javadoc comment for reportCheckSumFailure and addIntoCorruptedBlockMap doesn't list all parameters.\n3. The corruptedBlockMap is created outside the loop in read methods, therefore after reporting the checksum you should still clear the map.\n4. TestClientReportBadBlock : The comment \"The order of data nodes...\" should be moved before the loop.\n\nMinor:\n5. TestFsck.java: Indentation starting at comment \"// corrupt replicas\" has two extra spaces.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-13T21:12:29.572+0000","updated":"2011-05-13T21:12:29.572+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13034155","id":"13034155","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"body":"Upload a new patch to address review comments.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-16T17:59:37.170+0000","updated":"2011-05-16T17:59:37.170+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13035141","id":"13035141","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"body":"+1 for the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-17T23:34:22.639+0000","updated":"2011-05-17T23:34:22.639+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13035151","id":"13035151","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12479526/HDFS-1371.0517.patch\n  against trunk revision 1104579.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 11 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed these core unit tests:\n                  org.apache.hadoop.hdfs.TestDFSStorageStateRecovery\n                  org.apache.hadoop.hdfs.TestFileConcurrentReader\n                  org.apache.hadoop.tools.TestJMXGet\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\n    +1 system test framework.  The patch passed system test framework compile.\n\nTest results: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/548//testReport/\nFindbugs warnings: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/548//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/548//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-18T00:17:30.896+0000","updated":"2011-05-18T00:17:30.896+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13035163","id":"13035163","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12479533/HDFS-1371.0517.2.patch\n  against trunk revision 1104579.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 11 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed these core unit tests:\n                  org.apache.hadoop.hdfs.TestDFSStorageStateRecovery\n                  org.apache.hadoop.hdfs.TestFileConcurrentReader\n                  org.apache.hadoop.tools.TestJMXGet\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\n    +1 system test framework.  The patch passed system test framework compile.\n\nTest results: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/550//testReport/\nFindbugs warnings: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/550//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/550//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-18T01:26:19.192+0000","updated":"2011-05-18T01:26:19.192+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13035704","id":"13035704","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"body":"Fix the warning.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-18T21:37:23.140+0000","updated":"2011-05-18T21:37:23.140+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13035860","id":"13035860","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12479660/HDFS-1371.0518.patch\n  against trunk revision 1124364.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 4 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed these core unit tests:\n                  org.apache.hadoop.cli.TestHDFSCLI\n                  org.apache.hadoop.hdfs.server.datanode.TestBlockRecovery\n                  org.apache.hadoop.hdfs.server.namenode.TestMetaSave\n                  org.apache.hadoop.hdfs.TestDFSStorageStateRecovery\n                  org.apache.hadoop.hdfs.TestFileConcurrentReader\n                  org.apache.hadoop.hdfs.TestInjectionForSimulatedStorage\n                  org.apache.hadoop.tools.TestJMXGet\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\n    +1 system test framework.  The patch passed system test framework compile.\n\nTest results: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/566//testReport/\nFindbugs warnings: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/566//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/566//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-18T23:45:42.699+0000","updated":"2011-05-18T23:45:42.699+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13036430","id":"13036430","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12479689/HDFS-1371.0518.2.patch\n  against trunk revision 1125057.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 11 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed these core unit tests:\n                  org.apache.hadoop.hdfs.TestDFSStorageStateRecovery\n                  org.apache.hadoop.hdfs.TestFileConcurrentReader\n                  org.apache.hadoop.hdfs.TestHDFSTrash\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\n    +1 system test framework.  The patch passed system test framework compile.\n\nTest results: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/588//testReport/\nFindbugs warnings: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/588//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/588//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-19T20:25:04.273+0000","updated":"2011-05-19T20:25:04.273+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13036444","id":"13036444","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"body":"These three tests are already failing on trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tanping","name":"tanping","key":"tanping","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tanping Wang","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-19T20:43:29.117+0000","updated":"2011-05-19T20:43:29.117+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13036491","id":"13036491","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-19T21:28:59.752+0000","updated":"2011-05-19T21:28:59.752+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13036542","id":"13036542","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"body":"I have committed this. Thanks to Tanping!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jnp","name":"jnp","key":"jnp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jitendra Nath Pandey","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-19T22:34:19.715+0000","updated":"2011-05-19T22:34:19.715+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13037203","id":"13037203","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Hdfs-trunk-Commit #677 (See [https://builds.apache.org/hudson/job/Hadoop-Hdfs-trunk-Commit/677/])\n    ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-21T00:44:02.884+0000","updated":"2011-05-21T00:44:02.884+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12473250/comment/13037374","id":"13037374","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Hdfs-trunk #673 (See [https://builds.apache.org/hudson/job/Hadoop-Hdfs-trunk/673/])\n    ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-21T12:38:14.342+0000","updated":"2011-05-21T12:38:14.342+0000"}],"maxResults":40,"total":40,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-1371/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i09ie7:"}}