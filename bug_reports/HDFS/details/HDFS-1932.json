{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12507062","self":"https://issues.apache.org/jira/rest/api/2/issue/12507062","key":"HDFS-1932","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314241","id":"12314241","description":"","name":"0.22.0","archived":false,"released":true,"releaseDate":"2011-12-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-05-15T22:02:01.375+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat May 21 12:38:08 UTC 2011","customfield_12310420":"15374","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_604654428_*|*_1_*:*_1_*:*_86966817_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-05-21T00:16:25.158+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-1932/watchers","watchCount":2,"isWatching":false},"created":"2011-05-13T00:09:23.994+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":["newbie"],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314241","id":"12314241","description":"","name":"0.22.0","archived":false,"released":true,"releaseDate":"2011-12-10"}],"issuelinks":[{"id":"12339054","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12339054","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12507067","key":"HADOOP-7287","self":"https://issues.apache.org/jira/rest/api/2/issue/12507067","fields":{"summary":"Configuration deprecation mechanism doesn't work properly for GenericOptionsParser/Tools","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jolly","name":"jolly","key":"jolly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jolly&avatarId=18442","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jolly&avatarId=18442","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jolly&avatarId=18442","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jolly&avatarId=18442"},"displayName":"Jolly Chen","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-12-12T06:19:39.889+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Currently we have code blocks like the following in lots of places:\n{code}\n  static{\n    Configuration.addDefaultResource(\"hdfs-default.xml\");\n    Configuration.addDefaultResource(\"hdfs-site.xml\");\n  }\n{code}\nThis is dangerous since, if we don't remember to also classload HdfsConfiguration, the config key deprecations won't work. We should add a method like HdfsConfiguration.init() which would load the default resources as well as ensure that deprecation gets initialized properly.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12479196","id":"12479196","filename":"hdfs-1932.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jolly","name":"jolly","key":"jolly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jolly&avatarId=18442","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jolly&avatarId=18442","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jolly&avatarId=18442","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jolly&avatarId=18442"},"displayName":"Jolly Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-05-14T00:18:29.571+0000","size":7226,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12479196/hdfs-1932.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12479285","id":"12479285","filename":"hdfs-1932-2.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jolly","name":"jolly","key":"jolly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jolly&avatarId=18442","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jolly&avatarId=18442","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jolly&avatarId=18442","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jolly&avatarId=18442"},"displayName":"Jolly Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-05-16T01:26:14.430+0000","size":7494,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12479285/hdfs-1932-2.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"53157","customfield_12312823":null,"summary":"Ensure that HDFS configuration deprecations are set up in every spot that HDFS configurations are loaded.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507062/comment/13033831","id":"13033831","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"body":"{noformat}\n+   * this method is here so that when invoked, the static initializer block above\n+   * is executed to add the deprecated keys and to add the default resources\n{noformat}\n\nIs this correct? IIUC the point of calling the empty static method HdfsConfiguration#init is to force the jvm to load the HdfsConfiguration class (if it has not already) and therefore execute the static block (which is executed when the class is loaded, not when init() is invoked).  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-05-15T22:02:01.375+0000","updated":"2011-05-15T22:02:01.375+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507062/comment/13033857","id":"13033857","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jolly","name":"jolly","key":"jolly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jolly&avatarId=18442","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jolly&avatarId=18442","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jolly&avatarId=18442","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jolly&avatarId=18442"},"displayName":"Jolly Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"Per Eli's feedback, updated comments to be more accurate.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jolly","name":"jolly","key":"jolly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jolly&avatarId=18442","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jolly&avatarId=18442","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jolly&avatarId=18442","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jolly&avatarId=18442"},"displayName":"Jolly Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-05-16T01:26:59.771+0000","updated":"2011-05-16T01:26:59.771+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507062/comment/13033881","id":"13033881","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks Jolly.  Do we need to call HdfsConfiguration#init in these n places to make sure it's loaded? If so, is there 1 place that would suffice?  The latest patch looks good, I'm just wondering if there's a better way to implement it.\n\nIn terms of testing does the test in HADOOP-7287 fail w/o this patch and succeed with it?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-05-16T05:30:42.915+0000","updated":"2011-05-16T05:30:42.915+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507062/comment/13034559","id":"13034559","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12479285/hdfs-1932-2.txt\n  against trunk revision 1103987.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    -1 core tests.  The patch failed these core unit tests:\n                  org.apache.hadoop.hdfs.TestDFSStorageStateRecovery\n                  org.apache.hadoop.hdfs.TestFileConcurrentReader\n                  org.apache.hadoop.tools.TestJMXGet\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\n    +1 system test framework.  The patch passed system test framework compile.\n\nTest results: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/533//testReport/\nFindbugs warnings: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/533//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/hudson/job/PreCommit-HDFS-Build/533//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-17T05:11:09.550+0000","updated":"2011-05-17T05:11:09.550+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507062/comment/13037179","id":"13037179","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"Unfortunately there isn't one central place that suffices. I think once HADOOP-7287 is fixed it will be less important to call this in every Tool. Also, in debugging HADOOP-7287 we just noticed that DistributedFileSystem doesn't instantiate HdfsConfiguration at all - so we'll have to add this there. For now, I'm all for being more cautious and having this in too-many spots rather than too-few.\n\nbq. In terms of testing does the test in HADOOP-7287 fail w/o this patch and succeed with it?\n\nThis is just a cleanup JIRA. I'll open another one to make sure we initialize it in the right spots (DistributedFileSystem in particular)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-05-21T00:05:58.444+0000","updated":"2011-05-21T00:05:58.444+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507062/comment/13037185","id":"13037185","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-05-21T00:08:39.330+0000","updated":"2011-05-21T00:08:39.330+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507062/comment/13037188","id":"13037188","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. In terms of testing does the test in HADOOP-7287 fail w/o this patch and succeed with it?\n\nThe test case provided in the patch for HADOOP-7287 does not fail without this patch, since the bug here is really just that the calls to {{addDeprecation(...)}} never occur without this patch.\n\nHowever, the manual test case described in HADOOP-7287 (i.e. `hadoop fs -Ddfs.blocksize=4096 -touchz f1 ;  hadoop fs -stat \"%o\" f1') does indeed fail without this patch, but succeed with it. I just tested this manually.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-05-21T00:12:53.693+0000","updated":"2011-05-21T00:12:53.693+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507062/comment/13037189","id":"13037189","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"body":"Sorry, that should've been `hadoop fs -Ddfs.block.size=4096 -touchz f1 ; hadoop fs -stat \"%o\" f1'","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-05-21T00:15:17.465+0000","updated":"2011-05-21T00:15:17.465+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507062/comment/13037190","id":"13037190","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"It turns out that I was wrong about this just being a cleanup JIRA. It in fact fixes a bug since a couple of the cases that loaded the DFS configs didn't set up the deprecations. I committed it to trunk and 22 and made the commit message reflect this fact.\n\nThanks, Jolly!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2011-05-21T00:15:42.525+0000","updated":"2011-05-21T00:15:42.525+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507062/comment/13037200","id":"13037200","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Hdfs-trunk-Commit #677 (See [https://builds.apache.org/hudson/job/Hadoop-Hdfs-trunk-Commit/677/])\n    ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-21T00:44:02.466+0000","updated":"2011-05-21T00:44:02.466+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507062/comment/13037307","id":"13037307","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Hdfs-22-branch #53 (See [https://builds.apache.org/hudson/job/Hadoop-Hdfs-22-branch/53/])\n    HDFS-1932. Ensure that HDFS configuration deprecations are set up in every spot that HDFS configurations are loaded. Contributed by Jolly Chen.\n\ntodd : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1125600\nFiles : \n* /hadoop/hdfs/branches/branch-0.22/src/java/org/apache/hadoop/fs/Hdfs.java\n* /hadoop/hdfs/branches/branch-0.22/src/java/org/apache/hadoop/hdfs/server/datanode/DataNode.java\n* /hadoop/hdfs/branches/branch-0.22/src/java/org/apache/hadoop/hdfs/server/namenode/NameNode.java\n* /hadoop/hdfs/branches/branch-0.22/src/java/org/apache/hadoop/hdfs/tools/DFSAdmin.java\n* /hadoop/hdfs/branches/branch-0.22/src/java/org/apache/hadoop/hdfs/tools/DFSck.java\n* /hadoop/hdfs/branches/branch-0.22/CHANGES.txt\n* /hadoop/hdfs/branches/branch-0.22/src/java/org/apache/hadoop/hdfs/DistributedFileSystem.java\n* /hadoop/hdfs/branches/branch-0.22/src/java/org/apache/hadoop/hdfs/HdfsConfiguration.java\n* /hadoop/hdfs/branches/branch-0.22/src/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-21T11:23:33.637+0000","updated":"2011-05-21T11:23:33.637+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12507062/comment/13037337","id":"13037337","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Hdfs-trunk #673 (See [https://builds.apache.org/hudson/job/Hadoop-Hdfs-trunk/673/])\n    HDFS-1932. Ensure that HDFS configuration deprecations are set up in every spot that HDFS configurations are loaded. Contributed by Jolly Chen.\n\ntodd : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1125601\nFiles : \n* /hadoop/hdfs/trunk/src/java/org/apache/hadoop/hdfs/tools/GetConf.java\n* /hadoop/hdfs/trunk/src/java/org/apache/hadoop/hdfs/tools/GetGroups.java\n* /hadoop/hdfs/trunk/src/java/org/apache/hadoop/hdfs/tools/DFSck.java\n* /hadoop/hdfs/trunk/src/java/org/apache/hadoop/fs/Hdfs.java\n* /hadoop/hdfs/trunk/src/java/org/apache/hadoop/hdfs/server/namenode/NameNode.java\n* /hadoop/hdfs/trunk/src/java/org/apache/hadoop/hdfs/server/datanode/DataNode.java\n* /hadoop/hdfs/trunk/src/java/org/apache/hadoop/hdfs/tools/DFSAdmin.java\n* /hadoop/hdfs/trunk/src/java/org/apache/hadoop/hdfs/DistributedFileSystem.java\n* /hadoop/hdfs/trunk/src/java/org/apache/hadoop/hdfs/HdfsConfiguration.java\n* /hadoop/hdfs/trunk/src/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java\n* /hadoop/hdfs/trunk/CHANGES.txt\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-05-21T12:38:08.238+0000","updated":"2011-05-21T12:38:08.238+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-1932/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i09gtb:"}}