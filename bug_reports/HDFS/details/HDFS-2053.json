{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12509701","self":"https://issues.apache.org/jira/rest/api/2/issue/12509701","key":"HDFS-2053","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316392","id":"12316392","description":"Merge append/sync support with security","name":"0.20.205.0","archived":false,"released":true,"releaseDate":"2011-10-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315571","id":"12315571","description":"","name":"0.23.0","archived":false,"released":true,"releaseDate":"2011-11-11"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-06-09T12:02:43.725+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Oct 19 00:26:13 UTC 2011","customfield_12310420":"15199","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_1659096262_*|*_1_*:*_2_*:*_2964262403_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-08-02T00:00:30.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-2053/watchers","watchCount":6,"isWatching":false},"created":"2011-06-09T11:44:42.210+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314814","id":"12314814","description":"","name":"0.20.3","archived":true,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12316319","id":"12316319","description":"","name":"0.20.204.0","archived":false,"released":true,"releaseDate":"2011-09-02"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12316392","id":"12316392","description":"Merge append/sync support with security","name":"0.20.205.0","archived":false,"released":true,"releaseDate":"2011-10-06"}],"issuelinks":[{"id":"12349015","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12349015","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12545579","key":"HDFS-3061","self":"https://issues.apache.org/jira/rest/api/2/issue/12545579","fields":{"summary":"Backport HDFS-1487 to branch-1","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-03-08T02:10:13.131+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312926","id":"12312926","name":"namenode"}],"timeoriginalestimate":null,"description":"*How to reproduce*\n\n{code}\n# create test directories\n$ hadoop fs -mkdir /hdfs-1377/A\n$ hadoop fs -mkdir /hdfs-1377/B\n$ hadoop fs -mkdir /hdfs-1377/C\n\n# ...add some test data (few kB or MB) to all three dirs...\n\n# set space quota for subdir C only\n$ hadoop dfsadmin -setSpaceQuota 1g /hdfs-1377/C\n\n# the following two commands _on the parent dir_ trigger the warning\n$ hadoop fs -dus /hdfs-1377\n$ hadoop fs -count -q /hdfs-1377\n{code}\n\nWarning message in the namenode logs:\n\n{code}\n2011-06-09 09:42:39,817 WARN org.apache.hadoop.hdfs.server.namenode.NameNode: Inconsistent diskspace for directory C. Cached: 433872320 Computed: 438465355\n{code}\n\nNote that the commands are run on the _parent directory_ but the warning is shown for the _subdirectory_ with space quota.\n\n*Background*\nThe bug was introduced by the HDFS-1377 patch, which is currently committed to at least branch-0.20, branch-0.20-security, branch-0.20-security-204, branch-0.20-security-205 and release-0.20.3-rc2.  In the patch, {{src/hdfs/org/apache/hadoop/hdfs/server/namenode/INodeDirectory.java}} was updated to trigger the warning above if the cached and computed diskspace values are not the same for a directory with quota.\n\nThe warning is written by {{computecontentSummary(long[] summary)}} in {{INodeDirectory}}. In the method an inode's children are recursively walked through while the {{summary}} parameter is passed and updated along the way.\n\n{code}\n  /** {@inheritDoc} */\n  long[] computeContentSummary(long[] summary) {\n    if (children != null) {\n      for (INode child : children) {\n        child.computeContentSummary(summary);\n      }\n    }\n{code}\n\nThe condition that triggers the warning message compares the current node's cached diskspace (via {{node.diskspaceConsumed()}}) with the corresponding field in {{summary}}.\n\n{code}\n      if (-1 != node.getDsQuota() && space != summary[3]) {\n        NameNode.LOG.warn(\"Inconsistent diskspace for directory \"\n          +getLocalName()+\". Cached: \"+space+\" Computed: \"+summary[3]);\n{code}\n\nHowever {{summary}} may already include diskspace information from other inodes at this point (i.e. from different subtrees than the subtree of the node for which the warning message is shown; in our example for the tree at {{/hdfs-1377}}, {{summary}} can already contain information from {{/hdfs-1377/A}} and {{/hdfs-1377/B}} when it is passed to inode {{/hdfs-1377/C}}).  Hence the cached value for {{C}} can incorrectly be different from the computed value.\n\n*How to fix*\n\nThe supplied patch creates a fresh summary array for the subtree of the current node.  The walk through the children passes and updates this {{subtreeSummary}} array, and the condition is checked against {{subtreeSummary}} instead of the original {{summary}}.  The original {{summary}} is updated with the values of {{subtreeSummary}} before it returns.\n\n*Unit Tests*\n\nI have run \"ant test\" on my patched build without any errors*.  However the existing unit tests did not catch this issue for the original HDFS-1377 patch, so this might not mean anything. ;-)\n\nThat said I am unsure what the most appropriate way to unit test this issue would be.  A straight-forward approach would be to automate the steps in the _How to reproduce section_ above and check whether the NN logs an incorrect warning message.  But I'm not sure how this check could be implemented.  Feel free to provide some pointers if you have some ideas.\n\n*Note about Fix Version/s*\n\nThe patch _should_ apply to all branches where the HDFS-1377 patch has committed to.  In my environment, the build was Hadoop 0.20.203.0 release with a (trivial) backport of HDFS-1377 (0.20.203.0 release does not ship with the HDFS-1377 fix).  I could apply the patch successfully to {{branch-0.20-security}}, {{branch-0.20-security-204}} and {{release-0.20.3-rc2}}, for instance.  Since I'm a bit confused regarding the upcoming 0.20.x release versions (0.20.x vs. 0.20.20x.y) I have been so bold and added 0.20.203.0 to the list of affected versions even though it is actually only affected when HDFS-1377 is applied to it...\n\nBest,\nMichael\n\n\n*Well, I get one error for {{TestRumenJobTraces}} but first this seems to be completely unrelated and second I get the same test error when running the tests on the stock 0.20.203.0 release build.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12481915","id":"12481915","filename":"HDFS-2053_v1.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"created":"2011-06-09T11:48:24.967+0000","size":1901,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12481915/HDFS-2053_v1.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12481918","id":"12481918","filename":"HDFS-2053_v2.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"created":"2011-06-09T12:16:38.188+0000","size":1893,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12481918/HDFS-2053_v2.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12483937","id":"12483937","filename":"HDFS-2053_v3.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"created":"2011-06-27T11:44:26.736+0000","size":4488,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12483937/HDFS-2053_v3.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12484473","id":"12484473","filename":"hdfs-2053_v3-b20.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-06-28T16:31:45.440+0000","size":4386,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12484473/hdfs-2053_v3-b20.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"53084","customfield_12312823":null,"summary":"Bug in INodeDirectory#computeContentSummary warning","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Hadoop release 0.20.203.0 with the HDFS-1377 patch applied.\n\nMy impression is that the same issue exists also in the other branches where the HDFS-1377 patch has been applied to (see description).","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13046483","id":"13046483","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"body":"Patch version 1 for HDFS-2053.\n\nThe patch should apply to all branches to which the original HDFS-1377 patch has been applied to. See the ticket description for more details regarding \"Fix Version/s\".","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"created":"2011-06-09T11:48:25.001+0000","updated":"2011-06-09T11:48:25.001+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13046486","id":"13046486","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"body":"Again, I am not sure how to properly identify the correct names of the versions.  For instance, the patch successfully applies to branch-0.20-security-204 but I am not sure whether this translates to version \"0.20.204.0\" in the dropdown list.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"created":"2011-06-09T11:51:46.750+0000","updated":"2011-06-09T11:51:46.750+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13046490","id":"13046490","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12481915/HDFS-2053_v1.txt\n  against trunk revision 1133476.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/750//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-06-09T12:02:43.725+0000","updated":"2011-06-09T12:02:43.725+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13046498","id":"13046498","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"body":"New patch version, no properly using 'git diff --no-prefix' to generate it. Doh!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"created":"2011-06-09T12:16:38.206+0000","updated":"2011-06-09T12:16:38.206+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13046499","id":"13046499","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12481918/HDFS-2053_v2.txt\n  against trunk revision 1133476.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    -1 tests included.  The patch doesn't appear to include any new or modified tests.\n                        Please justify why no new tests are needed for this patch.\n                        Also please list what manual steps were performed to verify this patch.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/751//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-06-09T12:22:47.785+0000","updated":"2011-06-09T12:22:47.785+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13046783","id":"13046783","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"body":"Hey Michael - thank you for the excellent report!\n\nIn summary, the condition used to warn in FSDirectory#computeContentSummary has a bug, it compares the cached value for the directory not to a computed value for that directory but to a computed value that includes the directory and it's siblings. \n\nThe bug results in a spurious warning, it doesn't impact eg the correctness of quotas. Given this I think two things are reasonable:\n# Remove the warning (which removes the bug)\n# Compute the correct summary for just that directory (your patch)\n\nThe latter sounds good to me. Allocating a 4 long array for each level in the directory hierarchy isn't bad and this method isn't on a hot path.\n\nNit, I'd change array allocation to the following since we assume summary has len 4 and should be faster.\n\n{noformat}\nassert 4 == summary.length;\nlong[] subtreeSummary = new long[]{0,0,0,0}\n{noformat}\n\nWrt testing how about right after space is calculated adding the following:\n\n{noformat}\nassert -1 == node.getDsQuota() || space == subtreeSummary[3];\n{noformat}\n\nAsserts are enabled by default when the tests are run, if TestQuota doesn't trigger this assert then add a test similar to what you did manullay which will trigger it.\n\nAlso, please generate a patch against trunk (HDFS-2053_v2.txt doesn't apply for me).\n\nThanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-06-09T20:06:34.918+0000","updated":"2011-06-09T20:06:34.918+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13049206","id":"13049206","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"body":"Hi Eli, many thanks for your quick reply and feedback!\n\nFYI: I have integrated your suggestions into the patch. Currently I am waiting for \"ant test\" to finish to see whether {{TestQuota}} does indeed trigger this assert, and thus whether I actually need to add any special test to it.\n\n@unit testing:\nFrom what I have seen {{TestQuota#testSpaceCommands()}} would be the place to add a test for this issue, and {{dfs.getContentSummary().getSpaceConsumed(Path)}} would be the way to \"indirectly\" check the diskspace consumed by a directory and its children. It seems to be semantically equivalent to the actual {{INodeDirectory#computeContentSummary(long[])}} method I want to test but it appears to be several layers up the call stack [1]. Is this correct?\n\nIf so my test case using {{dfs.getContentSummary()}} would be basically:\n\n1. Create parent dir + 3 subdirs {{A,B,C}}.\n2. {{DFSTestUtil.createFile()}} a file of {a,b,c} * {{fileLength}} in {{A,B,C}}, respectively.\n3. Test whether {{getSpaceConsumed()}} of {{A,B,C}} equals the expected value, i.e. {a,b,c} * {{fileLength}} * {{replication}}.\n4. Test whether {{getSpaceConsumed()}} of the parent dir equals {a+b+c} * {{fileLength}} * {{replication}}.\n\nI'm just asking since I'm not fully sure whether {{dfs.getContentSummary()}} would not mask etc. any hidden issues in the \"lower level\" method {{INodeDirectory.computeContentSummary()}}.\n\nBest,\nMichael\n\n\n\n[1] {{FSDirectory#getContentSummary(String)}} seems to be the method that actually calls {{InodeDirectory#computeContentSummary(long[])}} at some point.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"created":"2011-06-14T14:46:11.459+0000","updated":"2011-06-14T14:46:11.459+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13054763","id":"13054763","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"body":"Apologies for the slow reply!  You are correct about the test case, I think what you suggest would catch it. Will review the new patch when you post it.  Thanks, Eli ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-06-25T00:00:32.301+0000","updated":"2011-06-25T00:00:32.301+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13055483","id":"13055483","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"body":"New version of the patch based on trunk, integrating Eli's feedback and unit test.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"created":"2011-06-27T11:44:26.755+0000","updated":"2011-06-27T11:44:26.755+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13055523","id":"13055523","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"+1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12483937/HDFS-2053_v3.txt\n  against trunk revision 1140030.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    +1 javadoc.  The javadoc tool did not generate any warning messages.\n\n    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n    +1 core tests.  The patch passed core unit tests.\n\n    +1 contrib tests.  The patch passed contrib unit tests.\n\n    +1 system test framework.  The patch passed system test framework compile.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/847//testReport/\nFindbugs warnings: https://builds.apache.org/job/PreCommit-HDFS-Build/847//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/847//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-06-27T13:08:29.726+0000","updated":"2011-06-27T13:08:29.726+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13056607","id":"13056607","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"body":"+1  looks good","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-06-28T16:18:20.426+0000","updated":"2011-06-28T16:18:20.426+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13056612","id":"13056612","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"body":"Patch for branch-20 attached.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-06-28T16:31:45.487+0000","updated":"2011-06-28T16:31:45.487+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13056622","id":"13056622","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"-1 overall.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12484473/hdfs-2053_v3-b20.patch\n  against trunk revision 1140707.\n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    -1 patch.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/861//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2011-06-28T16:42:12.870+0000","updated":"2011-06-28T16:42:12.870+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13056623","id":"13056623","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Hdfs-trunk-Commit #763 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/763/])\n    HDFS-2053. Bug in INodeDirectory#computeContentSummary warning. Contributed by Michael Noll\n\neli : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1140707\nFiles : \n* /hadoop/common/trunk/hdfs/CHANGES.txt\n* /hadoop/common/trunk/hdfs/src/test/hdfs/org/apache/hadoop/hdfs/TestQuota.java\n* /hadoop/common/trunk/hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/INodeDirectory.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-06-28T16:44:06.008+0000","updated":"2011-06-28T16:44:06.008+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13056789","id":"13056789","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"body":"I've committed this to trunk and branch-20 (after running the tests). Thanks Micahel!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-06-28T21:13:31.533+0000","updated":"2011-06-28T21:13:31.533+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13056822","id":"13056822","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"body":"You're welcome.  Thanks for the quick integration, Eli!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=miguno","name":"miguno","key":"miguno","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=miguno&avatarId=26959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=miguno&avatarId=26959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=miguno&avatarId=26959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=miguno&avatarId=26959"},"displayName":"Michael Noll","active":true,"timeZone":"Europe/Amsterdam"},"created":"2011-06-28T22:18:02.599+0000","updated":"2011-06-28T22:18:02.599+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13057205","id":"13057205","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Hdfs-trunk #710 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/710/])\n    HDFS-2053. Bug in INodeDirectory#computeContentSummary warning. Contributed by Michael Noll\n\neli : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1140707\nFiles : \n* /hadoop/common/trunk/hdfs/CHANGES.txt\n* /hadoop/common/trunk/hdfs/src/test/hdfs/org/apache/hadoop/hdfs/TestQuota.java\n* /hadoop/common/trunk/hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/INodeDirectory.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2011-06-29T12:45:26.855+0000","updated":"2011-06-29T12:45:26.855+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13071256","id":"13071256","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"body":"Eli, can you please commit this to 0.20.s. This will be picked up when 0.20.205 branch is created.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-07-26T18:20:16.989+0000","updated":"2011-07-26T18:20:16.989+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13075968","id":"13075968","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"body":"I've merged this to branch-0.20-security.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eli","name":"eli","key":"eli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eli Collins","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-08-02T00:00:40.244+0000","updated":"2011-08-02T00:00:40.244+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12509701/comment/13130258","id":"13130258","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattf","name":"mattf","key":"mattf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Foley","active":true,"timeZone":"America/Los_Angeles"},"body":"Closed upon release of 0.20.205.0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mattf","name":"mattf","key":"mattf","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Foley","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-10-19T00:26:13.245+0000","updated":"2011-10-19T00:26:13.245+0000"}],"maxResults":20,"total":20,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-2053/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i09gd3:"}}