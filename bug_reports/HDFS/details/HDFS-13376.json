{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13149116","self":"https://issues.apache.org/jira/rest/api/2/issue/13149116","key":"HDFS-13376","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2018-03-30T19:29:05.892+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Apr 11 08:37:06 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_2_*:*_256948451_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_2_*:*_643036967","customfield_12312321":null,"resolutiondate":"2018-04-09T17:51:17.929+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-13376/watchers","watchCount":4,"isWatching":false},"created":"2018-03-30T07:51:32.532+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12341434","id":"12341434","description":"3.1.0 release","name":"3.1.0","archived":false,"released":true,"releaseDate":"2018-04-06"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=GeLiXin","name":"GeLiXin","key":"gelixin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gelixin&avatarId=31833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gelixin&avatarId=31833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gelixin&avatarId=31833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gelixin&avatarId=31833"},"displayName":"LiXin Ge","active":true,"timeZone":"Asia/Shanghai"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-04-11T08:37:06.141+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312925","id":"12312925","name":"build"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312918","id":"12312918","name":"documentation"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12324906","id":"12324906","name":"native"}],"timeoriginalestimate":null,"description":"mvn --projects hadoop-hdfs-project/hadoop-hdfs-native-client clean package -Pdist,native -DskipTests -Dtar\r\n{noformat}\r\n[exec] CMake Error at main/native/libhdfspp/CMakeLists.txt:64 (message):\r\n     [exec]   FATAL ERROR: The required feature thread_local storage is not supported by\r\n     [exec]   your compiler.  Known compilers that support this feature: GCC, Visual\r\n     [exec]   Studio, Clang (community version), Clang (version for iOS 9 and later).\r\n     [exec]\r\n     [exec]\r\n     [exec] -- Performing Test THREAD_LOCAL_SUPPORTED - Failed\r\n     [exec] -- Configuring incomplete, errors occurred!\r\n{noformat}\r\n\r\nMy environment:\r\nLinux: Red Hat 4.4.7-3\r\ncmake: 3.8.2\r\njava: 1.8.0_131\r\ngcc: 4.4.7\r\nmaven: 3.5.0\r\n\r\nSeems this is because the low version of gcc, will report after confirming it. \r\nMaybe the {{BUILDING.txt}} needs update to explain the supported lowest gcc version.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12917166","id":"12917166","filename":"HDFS-13376.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=GeLiXin","name":"GeLiXin","key":"gelixin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gelixin&avatarId=31833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gelixin&avatarId=31833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gelixin&avatarId=31833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gelixin&avatarId=31833"},"displayName":"LiXin Ge","active":true,"timeZone":"Asia/Shanghai"},"created":"2018-04-02T07:12:02.219+0000","size":573,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12917166/HDFS-13376.001.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12917474","id":"12917474","filename":"HDFS-13376.002.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=GeLiXin","name":"GeLiXin","key":"gelixin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gelixin&avatarId=31833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gelixin&avatarId=31833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gelixin&avatarId=31833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gelixin&avatarId=31833"},"displayName":"LiXin Ge","active":true,"timeZone":"Asia/Shanghai"},"created":"2018-04-04T01:24:02.487+0000","size":711,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12917474/HDFS-13376.002.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Specify minimum GCC version to avoid TLS support error in Build of hadoop-hdfs-native-client","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=GeLiXin","name":"GeLiXin","key":"gelixin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gelixin&avatarId=31833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gelixin&avatarId=31833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gelixin&avatarId=31833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gelixin&avatarId=31833"},"displayName":"LiXin Ge","active":true,"timeZone":"Asia/Shanghai"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=GeLiXin","name":"GeLiXin","key":"gelixin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gelixin&avatarId=31833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gelixin&avatarId=31833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gelixin&avatarId=31833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gelixin&avatarId=31833"},"displayName":"LiXin Ge","active":true,"timeZone":"Asia/Shanghai"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13149116/comment/16420267","id":"16420267","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=GeLiXin","name":"GeLiXin","key":"gelixin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gelixin&avatarId=31833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gelixin&avatarId=31833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gelixin&avatarId=31833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gelixin&avatarId=31833"},"displayName":"LiXin Ge","active":true,"timeZone":"Asia/Shanghai"},"body":"Hi [~James C], this may relate to HDFS-8707. Seems like HDFS-13338, but SASL libraries is installed in my environment:\r\n{noformat}\r\nrpm -aq|grep cyrus-sasl\r\ncyrus-sasl-devel-2.1.23-13.el6_3.1.x86_64\r\ncyrus-sasl-gssapi-2.1.23-13.el6_3.1.x86_64\r\ncyrus-sasl-lib-2.1.23-13.el6_3.1.x86_64\r\ncyrus-sasl-2.1.23-13.el6_3.1.x86_64\r\ncyrus-sasl-plain-2.1.23-13.el6_3.1.x86_64\r\n{noformat}\r\n\r\nMy guess this is something about the gcc version, will check it out next week.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=GeLiXin","name":"GeLiXin","key":"gelixin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gelixin&avatarId=31833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gelixin&avatarId=31833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gelixin&avatarId=31833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gelixin&avatarId=31833"},"displayName":"LiXin Ge","active":true,"timeZone":"Asia/Shanghai"},"created":"2018-03-30T08:01:09.541+0000","updated":"2018-03-30T08:01:09.541+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13149116/comment/16420854","id":"16420854","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=James+C","name":"James C","key":"james c","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Clampffer","active":true,"timeZone":"America/New_York"},"body":"[~GeLiXin] I agree that it's a gcc version issue.  Here's the chunk of code that cmake is trying to build to determine if you have C++11 style thread local support.  \r\n\r\n{code}\r\n    #include <thread>\r\n    int main(void) {\r\n      thread_local int s;\r\n      return 0;\r\n    }\r\n{code}\r\n\r\nI've built the library without too many issues on various RHEL 6.x versions (and removed the bits that caused issues).  RHEL 4.4 most likely won't have a new enough stdlibc++ to support the some of the C++11 features this uses unless you're willing to build a toolchain from source.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=James+C","name":"James C","key":"james c","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Clampffer","active":true,"timeZone":"America/New_York"},"created":"2018-03-30T19:29:05.892+0000","updated":"2018-03-30T19:29:05.892+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13149116/comment/16421988","id":"16421988","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=GeLiXin","name":"GeLiXin","key":"gelixin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gelixin&avatarId=31833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gelixin&avatarId=31833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gelixin&avatarId=31833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gelixin&avatarId=31833"},"displayName":"LiXin Ge","active":true,"timeZone":"Asia/Shanghai"},"body":"[~James C] Thanks for your quick response and test code.\r\n\r\nThis is indeed a GCC version issue as we guess, the hadoop-hdfs-native-client build success after I upgrade my GCC version to 4.8.5 from source code. \r\n\r\nAs described in the [GNU website|https://gcc.gnu.org/projects/cxx-status.html#cxx11], GCC 4.8.1 was the first feature-complete implementation of the 2011 C++ standard. I have attached a patch which upgraded the {{BUILDING.txt}} to explain this, [~James C] could you please help to review it? Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=GeLiXin","name":"GeLiXin","key":"gelixin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gelixin&avatarId=31833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gelixin&avatarId=31833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gelixin&avatarId=31833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gelixin&avatarId=31833"},"displayName":"LiXin Ge","active":true,"timeZone":"Asia/Shanghai"},"created":"2018-04-02T07:12:25.521+0000","updated":"2018-04-02T07:12:25.521+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13149116/comment/16422003","id":"16422003","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (/) *{color:green}+1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 19s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 11m 38s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 11m 33s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 23s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 24m 19s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:8620d2b |\r\n| JIRA Issue | HDFS-13376 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12917166/HDFS-13376.001.patch |\r\n| Optional Tests |  asflicense  |\r\n| uname | Linux e2e51334bdf2 3.13.0-143-generic #192-Ubuntu SMP Tue Feb 27 10:45:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / dc8e343 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Max. process+thread count | 303 (vs. ulimit of 10000) |\r\n| modules | C: . U: . |\r\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/23744/console |\r\n| Powered by | Apache Yetus 0.8.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2018-04-02T07:45:03.113+0000","updated":"2018-04-02T07:45:03.113+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13149116/comment/16422952","id":"16422952","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=James+C","name":"James C","key":"james c","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Clampffer","active":true,"timeZone":"America/New_York"},"body":"Thanks for finding the right version of GCC to document [~GeLiXin]!\r\n\r\nFor completeness could you also update the error message in native/libhdfspp/CMakeLists.txt where the check is done?  It says what versions of Clang work but should most likely say GCC needs to be >= 4.8.1 to help out others who run into this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=James+C","name":"James C","key":"james c","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Clampffer","active":true,"timeZone":"America/New_York"},"created":"2018-04-02T18:42:59.425+0000","updated":"2018-04-02T18:42:59.425+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13149116/comment/16423640","id":"16423640","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=GeLiXin","name":"GeLiXin","key":"gelixin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gelixin&avatarId=31833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gelixin&avatarId=31833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gelixin&avatarId=31833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gelixin&avatarId=31833"},"displayName":"LiXin Ge","active":true,"timeZone":"Asia/Shanghai"},"body":"[~James C] Thanks for reviewing this.\r\n\r\nI have reverted my GCC to 4.4.7 and get these message below, I'm not sure if this is what you want.\r\nWhich would be the better one of the two choices?\r\n1.We just leave these message in this jira for others to search\r\n2.update the patch to add more information in {{BUILDING.txt}}\r\n\r\nMessages:\r\nFrom {{native/libhdfspp/CMakeLists.txt}}\r\n{noformat}\r\n# Check if thread_local is supported\r\nunset (THREAD_LOCAL_SUPPORTED CACHE)\r\nset (CMAKE_REQUIRED_DEFINITIONS \"-std=c++11\")\r\nset (CMAKE_REQUIRED_LIBRARIES ${CMAKE_THREAD_LIBS_INIT})\r\ncheck_cxx_source_compiles(\r\n    \"#include <thread>\r\n    int main(void) {\r\n      thread_local int s;\r\n      return 0;\r\n    }\"\r\n    THREAD_LOCAL_SUPPORTED)\r\nif (NOT THREAD_LOCAL_SUPPORTED)\r\n  message(FATAL_ERROR\r\n  \"FATAL ERROR: The required feature thread_local storage is not supported by your compiler. \\\r\n  Known compilers that support this feature: GCC, Visual Studio, Clang (community version), \\\r\n  Clang (version for iOS 9 and later).\")\r\nendif (NOT THREAD_LOCAL_SUPPORTED)\r\n{noformat}\r\n\r\nFrom {{CMakeError.log}}\r\n{noformat}\r\nPerforming C++ SOURCE FILE Test THREAD_LOCAL_SUPPORTED failed with the following output:\r\nChange Dir: /home/glx/hadoop/hadoop-hdfs-project/hadoop-hdfs-native-client/target/CMakeFiles/CMakeTmp\r\n\r\nRun Build Command:\"/usr/bin/gmake\" \"cmTC_0c6ac/fast\"\r\n/usr/bin/gmake -f CMakeFiles/cmTC_0c6ac.dir/build.make CMakeFiles/cmTC_0c6ac.dir/build\r\ngmake[1]: Entering directory `/home/glx/hadoop/hadoop-hdfs-project/hadoop-hdfs-native-client/target/CMakeFiles/CMakeTmp'\r\nBuilding CXX object CMakeFiles/cmTC_0c6ac.dir/src.cxx.o\r\n/usr/bin/c++    -g -O2 -Wall -pthread -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -DTHREAD_LOCAL_SUPPORTED   -std=c++11 -o CMakeFiles/cmTC_0c6ac.dir/src.cxx.o -c /home/glx/hadoop/hadoop-hdfs-project/hadoop-hdfs-native-client/target/CMakeFiles/CMakeTmp/src.cxx\r\ncc1plus: error: unrecognized command line option \"-std=c++11\"\r\ngmake[1]: *** [CMakeFiles/cmTC_0c6ac.dir/src.cxx.o] Error 1\r\ngmake[1]: Leaving directory `/home/glx/hadoop/hadoop-hdfs-project/hadoop-hdfs-native-client/target/CMakeFiles/CMakeTmp'\r\ngmake: *** [cmTC_0c6ac/fast] Error 2\r\n\r\nSource file was:\r\n#include <thread>\r\n    int main(void) {\r\n      thread_local int s;\r\n      return 0;\r\n    }\r\n{noformat}\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=GeLiXin","name":"GeLiXin","key":"gelixin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gelixin&avatarId=31833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gelixin&avatarId=31833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gelixin&avatarId=31833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gelixin&avatarId=31833"},"displayName":"LiXin Ge","active":true,"timeZone":"Asia/Shanghai"},"created":"2018-04-03T08:18:55.925+0000","updated":"2018-04-03T08:18:55.925+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13149116/comment/16424278","id":"16424278","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=James+C","name":"James C","key":"james c","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Clampffer","active":true,"timeZone":"America/New_York"},"body":"[~GeLiXin] I just meant that the warning below could be a little more specific.  Instead of GCC it could say \"GCC 4.8.1 or later\".\r\n\r\n{code}\r\n\"FATAL ERROR: The required feature thread_local storage is not supported by your compiler.  Known compilers that support this feature: GCC, Visual Studio, Clang (community version), \\ Clang (version for iOS 9 and later).\")\r\n{code}\r\n\r\n \r\n\r\nThat said I think the patch you have now looks good, +1.  Let me know if you want to extend this and I can check that out too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=James+C","name":"James C","key":"james c","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Clampffer","active":true,"timeZone":"America/New_York"},"created":"2018-04-03T16:55:19.909+0000","updated":"2018-04-03T16:55:19.909+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13149116/comment/16424841","id":"16424841","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=GeLiXin","name":"GeLiXin","key":"gelixin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gelixin&avatarId=31833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gelixin&avatarId=31833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gelixin&avatarId=31833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gelixin&avatarId=31833"},"displayName":"LiXin Ge","active":true,"timeZone":"Asia/Shanghai"},"body":"[~James C] Thanks for the explication, I think I get the point now :)\r\n{quote}Let me know if you want to extend this and I can check that out too.\r\n{quote}\r\nYes, willing to make it more helpful. I have updated the patch to contain more information now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=GeLiXin","name":"GeLiXin","key":"gelixin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gelixin&avatarId=31833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gelixin&avatarId=31833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gelixin&avatarId=31833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gelixin&avatarId=31833"},"displayName":"LiXin Ge","active":true,"timeZone":"Asia/Shanghai"},"created":"2018-04-04T01:31:47.861+0000","updated":"2018-04-04T01:31:47.861+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13149116/comment/16424854","id":"16424854","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (/) *{color:green}+1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 16s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 11m 58s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 11m 55s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 23s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black} 24m 58s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:8620d2b |\r\n| JIRA Issue | HDFS-13376 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12917474/HDFS-13376.002.patch |\r\n| Optional Tests |  asflicense  |\r\n| uname | Linux c80fc942c523 3.13.0-143-generic #192-Ubuntu SMP Tue Feb 27 10:45:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / 2d06d88 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Max. process+thread count | 302 (vs. ulimit of 10000) |\r\n| modules | C: . U: . |\r\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/23767/console |\r\n| Powered by | Apache Yetus 0.8.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2018-04-04T01:56:39.698+0000","updated":"2018-04-04T01:56:39.698+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13149116/comment/16425530","id":"16425530","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=James+C","name":"James C","key":"james c","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Clampffer","active":true,"timeZone":"America/New_York"},"body":"The new patch looks good to me, thanks for making it more specific! +1\r\n\r\nI can commit it tomorrow unless others have feedback.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=James+C","name":"James C","key":"james c","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Clampffer","active":true,"timeZone":"America/New_York"},"created":"2018-04-04T13:45:55.381+0000","updated":"2018-04-04T13:45:55.381+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13149116/comment/16430962","id":"16430962","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=James+C","name":"James C","key":"james c","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Clampffer","active":true,"timeZone":"America/New_York"},"body":"I've committed this to trunk.  Thanks for your contribution [~GeLiXin]!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=James+C","name":"James C","key":"james c","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Clampffer","active":true,"timeZone":"America/New_York"},"created":"2018-04-09T17:51:17.946+0000","updated":"2018-04-09T17:51:17.946+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13149116/comment/16430999","id":"16430999","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #13945 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/13945/])\nHDFS-13376. Specify minimum GCC version to avoid TLS support error in (james.clampffer: rev 905937678577fc0deb57489590863464562088ad)\n* (edit) BUILDING.txt\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2018-04-09T18:13:57.350+0000","updated":"2018-04-09T18:13:57.350+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13149116/comment/16433569","id":"16433569","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=GeLiXin","name":"GeLiXin","key":"gelixin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gelixin&avatarId=31833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gelixin&avatarId=31833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gelixin&avatarId=31833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gelixin&avatarId=31833"},"displayName":"LiXin Ge","active":true,"timeZone":"Asia/Shanghai"},"body":"[~James C] Thanks for your reviewing and committing this!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=GeLiXin","name":"GeLiXin","key":"gelixin","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gelixin&avatarId=31833","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gelixin&avatarId=31833","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gelixin&avatarId=31833","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gelixin&avatarId=31833"},"displayName":"LiXin Ge","active":true,"timeZone":"Asia/Shanghai"},"created":"2018-04-11T08:37:06.141+0000","updated":"2018-04-11T08:37:06.141+0000"}],"maxResults":13,"total":13,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-13376/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3rzfz:"}}