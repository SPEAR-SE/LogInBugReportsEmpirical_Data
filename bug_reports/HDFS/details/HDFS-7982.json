{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12785169","self":"https://issues.apache.org/jira/rest/api/2/issue/12785169","key":"HDFS-7982","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327584","id":"12327584","description":"2.7.0 release","name":"2.7.0","archived":false,"released":true,"releaseDate":"2015-04-20"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2015-04-13T21:11:00.716+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sun Sep 06 10:43:32 UTC 2015","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1756794011_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-04-13T21:12:59.622+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-7982/watchers","watchCount":6,"isWatching":false},"created":"2015-03-24T13:13:05.653+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327181","id":"12327181","description":"2.6.0 release","name":"2.6.0","archived":false,"released":true,"releaseDate":"2014-11-18"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-09-06T10:43:32.240+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312927","id":"12312927","name":"datanode"}],"timeoriginalestimate":null,"description":"Hi...\n\nI'm trying to load an external textfile table into a internal orc table using hive. My process failed with the following error :\nCaused by: org.apache.hadoop.hive.ql.metadata.HiveException: org.apache.hadoop.ipc.RemoteException(java.io.IOException): File /tmp/hive/blablabla.... could only be replicated to 0 nodes instead of minReplication (=1).  There are 3 datanode(s) running and no node(s) are excluded in this operation.\n\nAfter investigation, I saw that the quantity of \"non dfs space\" grows more and more, until the job fails.\nJust before failing, the \"non dfs used space\" reaches 54.GB on each datanode. I still have space in \"remaining DFS\".\n\nHere the dfsadmin report just before the issue :\n\n[hdfs@hadoop-01 data]$ hadoop dfsadmin -report\nDEPRECATED: Use of this script to execute hdfs command is deprecated.\nInstead use the hdfs command for it.\n\nConfigured Capacity: 475193597952 (442.56 GB)\nPresent Capacity: 290358095182 (270.42 GB)\nDFS Remaining: 228619903369 (212.92 GB)\nDFS Used: 61738191813 (57.50 GB)\nDFS Used%: 21.26%\nUnder replicated blocks: 38\nBlocks with corrupt replicas: 0\nMissing blocks: 0\n\n-------------------------------------------------\nLive datanodes (3):\n\nName: 192.168.3.36:50010 (hadoop-04.XXXXX.local)\nHostname: hadoop-04.XXXXX.local\nDecommission Status : Normal\nConfigured Capacity: 158397865984 (147.52 GB)\nDFS Used: 20591481196 (19.18 GB)\nNon DFS Used: 61522602976 (57.30 GB)\nDFS Remaining: 76283781812 (71.04 GB)\nDFS Used%: 13.00%\nDFS Remaining%: 48.16%\nConfigured Cache Capacity: 0 (0 B)\nCache Used: 0 (0 B)\nCache Remaining: 0 (0 B)\nCache Used%: 100.00%\nCache Remaining%: 0.00%\nXceivers: 182\nLast contact: Tue Mar 24 10:56:05 CET 2015\n\n\nName: 192.168.3.35:50010 (hadoop-03.XXXXX.local)\nHostname: hadoop-03.XXXXX.local\nDecommission Status : Normal\nConfigured Capacity: 158397865984 (147.52 GB)\nDFS Used: 20555853589 (19.14 GB)\nNon DFS Used: 61790296136 (57.55 GB)\nDFS Remaining: 76051716259 (70.83 GB)\nDFS Used%: 12.98%\nDFS Remaining%: 48.01%\nConfigured Cache Capacity: 0 (0 B)\nCache Used: 0 (0 B)\nCache Remaining: 0 (0 B)\nCache Used%: 100.00%\nCache Remaining%: 0.00%\nXceivers: 184\nLast contact: Tue Mar 24 10:56:05 CET 2015\n\n\nName: 192.168.3.37:50010 (hadoop-05.XXXXX.local)\nHostname: hadoop-05.XXXXX.local\nDecommission Status : Normal\nConfigured Capacity: 158397865984 (147.52 GB)\nDFS Used: 20590857028 (19.18 GB)\nNon DFS Used: 61522603658 (57.30 GB)\nDFS Remaining: 76284405298 (71.05 GB)\nDFS Used%: 13.00%\nDFS Remaining%: 48.16%\nConfigured Cache Capacity: 0 (0 B)\nCache Used: 0 (0 B)\nCache Remaining: 0 (0 B)\nCache Used%: 100.00%\nCache Remaining%: 0.00%\nXceivers: 182\nLast contact: Tue Mar 24 10:56:05 CET 2015\n\nI was expected to find a temporary space used within my filesystem (ie /data).\nI found the DFS usage under /data/hadoop/hdfs/data (19GB) but no trace of 57GB for non DFS...\n\n[root@hadoop-05 hadoop]# df -h /data\nFilesystem            Size  Used Avail Use% Mounted on\n/dev/sdb1             148G   20G  121G  14% /data\n\nI also checked dfs.datanode.du.reserved that is set to zero.\n[root@hadoop-05 hadoop]# hdfs getconf -confkey dfs.datanode.du.reserved\n0\n\nDid I miss something ? Where is non DFS space on linux ? Why did I get this message \"could only be replicated to 0 nodes instead of minReplication (=1).  There are 3 datanode(s) running and no node(s) are excluded in this operation.\" knowing that datanodes were up and running with still remaining DFS space.\n\nThis error is blocking us.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"huge non dfs space used","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=easyoups","name":"easyoups","key":"easyoups","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"regis le bretonnic","active":true,"timeZone":"Europe/Paris"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=easyoups","name":"easyoups","key":"easyoups","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"regis le bretonnic","active":true,"timeZone":"Europe/Paris"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785169/comment/14493099","id":"14493099","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xyao","name":"xyao","key":"xyao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaoyu Yao","active":true,"timeZone":"America/Los_Angeles"},"body":"[~regis], this looks like a dup of HDFS-8072 that [~arpitagarwal] has recently fixed.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xyao","name":"xyao","key":"xyao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaoyu Yao","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-13T21:11:00.716+0000","updated":"2015-04-13T21:11:00.716+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785169/comment/14493111","id":"14493111","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arpitagarwal","name":"arpitagarwal","key":"arpitagarwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arpit Agarwal","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the heads up [~xyao]. This does look like HDFS-8072.\n\n[~easyoups], let us know if it resolves your issue. Thanks for the detailed bug report.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=arpitagarwal","name":"arpitagarwal","key":"arpitagarwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Arpit Agarwal","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-13T21:13:27.497+0000","updated":"2015-04-13T21:13:27.497+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785169/comment/14607820","id":"14607820","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"body":"Closing tickets that are already part of a release.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=vinodkv","name":"vinodkv","key":"vinodkv","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Vinod Kumar Vavilapalli","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-30T07:25:19.417+0000","updated":"2015-06-30T07:25:19.417+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12785169/comment/14732342","id":"14732342","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dengkanghua","name":"dengkanghua","key":"dengkanghua","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"dengkanghua","active":true,"timeZone":"Etc/UTC"},"body":"Hi,regis le bretonnic,do you resolves this issue in you environment,and I hive the same problem in hadoop 2.6.0.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dengkanghua","name":"dengkanghua","key":"dengkanghua","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"dengkanghua","active":true,"timeZone":"Etc/UTC"},"created":"2015-09-06T10:43:32.240+0000","updated":"2015-09-06T10:43:32.240+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-7982/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i27a1r:"}}