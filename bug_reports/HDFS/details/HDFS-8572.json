{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12836911","self":"https://issues.apache.org/jira/rest/api/2/issue/12836911","key":"HDFS-8572","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329057","id":"12329057","description":"2.8.0 release","name":"2.8.0","archived":false,"released":true,"releaseDate":"2017-03-22"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12331979","id":"12331979","description":"2.7.1 release","name":"2.7.1","archived":false,"released":true,"releaseDate":"2015-07-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335732","id":"12335732","description":"3.0.0-alpha1 release","name":"3.0.0-alpha1","archived":false,"released":true,"releaseDate":"2016-09-03"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2015-06-11T00:18:00.760+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed Jan 06 02:26:48 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_100421424_*|*_1_*:*_1_*:*_15292343_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2015-06-12T02:31:52.153+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-8572/watchers","watchCount":6,"isWatching":false},"created":"2015-06-10T18:23:18.489+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[{"id":"12427785","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12427785","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12837483","key":"HDFS-8588","self":"https://issues.apache.org/jira/rest/api/2/issue/12837483","fields":{"summary":"DN should not support SPNEGO authenticator","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12437055","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12437055","type":{"id":"12310050","name":"Regression","inward":"is broken by","outward":"breaks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310050"},"outwardIssue":{"id":"12863057","key":"HDFS-9045","self":"https://issues.apache.org/jira/rest/api/2/issue/12863057","fields":{"summary":"DatanodeHttpServer is not setting Endpoint based on configured policy and not loading ssl configuration.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12427887","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12427887","type":{"id":"12310050","name":"Regression","inward":"is broken by","outward":"breaks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310050"},"outwardIssue":{"id":"12837658","key":"HDFS-8596","self":"https://issues.apache.org/jira/rest/api/2/issue/12837658","fields":{"summary":"TestDistributedFileSystem et al tests are broken in branch-2 due to incorrect setting of \"datanode\" attribute","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12427781","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12427781","type":{"id":"12310050","name":"Regression","inward":"is broken by","outward":"breaks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310050"},"inwardIssue":{"id":"12749936","key":"HDFS-7279","self":"https://issues.apache.org/jira/rest/api/2/issue/12749936","fields":{"summary":"Use netty to implement DatanodeWebHdfsMethods","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2017-01-05T22:43:11.201+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"In HDFS-7279 the Netty server in DN proxies all servlet requests to the local Jetty instance.\n\nThe Jetty server is configured incorrectly so that it always uses {{HTTP/locahost@REALM}} to authenticate spnego requests. As a result, servlets like JMX are no longer accessible in secure deployments.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12331979","id":"12331979","description":"2.7.1 release","name":"2.7.1","archived":false,"released":true,"releaseDate":"2015-07-06"}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12738937","id":"12738937","filename":"HDFS-8572.000.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-10T22:38:05.099+0000","size":9470,"content":"https://issues.apache.org/jira/secure/attachment/12738937/HDFS-8572.000.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12738989","id":"12738989","filename":"HDFS-8572.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-11T04:28:15.477+0000","size":9289,"content":"https://issues.apache.org/jira/secure/attachment/12738989/HDFS-8572.001.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12739011","id":"12739011","filename":"HDFS-8572.002.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-11T08:09:17.319+0000","size":9201,"content":"https://issues.apache.org/jira/secure/attachment/12739011/HDFS-8572.002.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"DN always uses HTTP/localhost@REALM principals in SPNEGO","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14581272","id":"14581272","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  18m  0s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |\n| {color:green}+1{color} | javac |   7m 40s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |   9m 39s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 24s | The applied patch does not increase the total number of release audit warnings. |\n| {color:red}-1{color} | checkstyle |   2m 11s | The applied patch generated  2 new checkstyle issues (total was 154, now 147). |\n| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 32s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 36s | The patch built with eclipse:eclipse. |\n| {color:green}+1{color} | findbugs |   3m 16s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |\n| {color:green}+1{color} | native |   3m 12s | Pre-build of native portion |\n| {color:red}-1{color} | hdfs tests |  50m 53s | Tests failed in hadoop-hdfs. |\n| | |  97m 26s | |\n\\\\\n\\\\\n|| Reason || Tests ||\n| Failed unit tests | hadoop.hdfs.TestFileStatus |\n|   | hadoop.hdfs.server.balancer.TestBalancerWithHANameNodes |\n|   | hadoop.hdfs.server.namenode.TestINodeFile |\n|   | hadoop.fs.contract.hdfs.TestHDFSContractOpen |\n|   | hadoop.hdfs.server.datanode.TestFsDatasetCache |\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestDatanodeRestart |\n|   | hadoop.hdfs.TestFileCreationDelete |\n|   | hadoop.hdfs.server.namenode.ha.TestHASafeMode |\n|   | hadoop.hdfs.TestEncryptionZonesWithHA |\n|   | hadoop.fs.contract.hdfs.TestHDFSContractMkdir |\n|   | hadoop.hdfs.TestDFSShell |\n|   | hadoop.hdfs.server.namenode.TestNameNodeXAttr |\n|   | hadoop.hdfs.shortcircuit.TestShortCircuitCache |\n|   | hadoop.hdfs.TestDecommission |\n|   | hadoop.hdfs.TestDatanodeDeath |\n|   | hadoop.hdfs.server.namenode.TestFSEditLogLoader |\n|   | hadoop.hdfs.server.balancer.TestBalancerWithMultipleNameNodes |\n|   | hadoop.hdfs.server.blockmanagement.TestNameNodePrunesMissingStorages |\n|   | hadoop.hdfs.server.datanode.TestCachingStrategy |\n|   | hadoop.hdfs.server.datanode.TestDirectoryScanner |\n|   | hadoop.cli.TestXAttrCLI |\n|   | hadoop.hdfs.server.namenode.TestDeleteRace |\n|   | hadoop.hdfs.server.namenode.TestParallelImageWrite |\n|   | hadoop.hdfs.server.namenode.TestSaveNamespace |\n|   | hadoop.hdfs.TestReplaceDatanodeOnFailure |\n|   | hadoop.hdfs.TestDFSRename |\n|   | hadoop.hdfs.server.namenode.TestFsck |\n|   | hadoop.hdfs.server.namenode.ha.TestHarFileSystemWithHA |\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestLazyPersistReplicaPlacement |\n|   | hadoop.hdfs.TestFileCreationEmpty |\n|   | hadoop.hdfs.server.datanode.TestDataNodeVolumeFailureToleration |\n|   | hadoop.hdfs.server.datanode.TestDeleteBlockPool |\n|   | hadoop.hdfs.TestRemoteBlockReader2 |\n|   | hadoop.hdfs.server.namenode.TestStorageRestore |\n|   | hadoop.hdfs.server.namenode.TestFileLimit |\n|   | hadoop.hdfs.server.blockmanagement.TestNodeCount |\n|   | hadoop.hdfs.TestEncryptionZones |\n|   | hadoop.hdfs.server.namenode.snapshot.TestCheckpointsWithSnapshots |\n|   | hadoop.hdfs.web.TestWebHdfsFileSystemContract |\n|   | hadoop.hdfs.TestDFSFinalize |\n|   | hadoop.hdfs.server.namenode.TestFileContextAcl |\n|   | hadoop.hdfs.TestDatanodeRegistration |\n|   | hadoop.hdfs.server.namenode.ha.TestRetryCacheWithHA |\n|   | hadoop.hdfs.TestDataTransferProtocol |\n|   | hadoop.fs.viewfs.TestViewFsWithXAttrs |\n|   | hadoop.hdfs.server.datanode.TestDiskError |\n|   | hadoop.hdfs.TestFsShellPermission |\n|   | hadoop.hdfs.server.namenode.TestMalformedURLs |\n|   | hadoop.hdfs.TestBalancerBandwidth |\n|   | hadoop.hdfs.TestReadWhileWriting |\n|   | hadoop.hdfs.TestDisableConnCache |\n|   | hadoop.hdfs.TestIsMethodSupported |\n|   | hadoop.hdfs.TestDFSClientExcludedNodes |\n|   | hadoop.hdfs.TestParallelShortCircuitReadNoChecksum |\n|   | hadoop.hdfs.TestFileCreationClient |\n|   | hadoop.cli.TestAclCLI |\n|   | hadoop.hdfs.TestFSOutputSummer |\n|   | hadoop.fs.TestHDFSFileContextMainOperations |\n|   | hadoop.hdfs.TestDFSStartupVersions |\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotNameWithInvalidCharacters |\n|   | hadoop.hdfs.TestParallelShortCircuitLegacyRead |\n|   | hadoop.hdfs.server.blockmanagement.TestBlockManager |\n|   | hadoop.hdfs.TestFileAppend2 |\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestLazyPersistLockedMemory |\n|   | hadoop.hdfs.TestParallelUnixDomainRead |\n|   | hadoop.hdfs.server.datanode.TestTransferRbw |\n|   | hadoop.fs.contract.hdfs.TestHDFSContractSeek |\n|   | hadoop.hdfs.TestLocalDFS |\n|   | hadoop.hdfs.server.mover.TestStorageMover |\n|   | hadoop.hdfs.TestGetFileChecksum |\n|   | hadoop.hdfs.server.namenode.TestMetadataVersionOutput |\n|   | hadoop.hdfs.server.namenode.ha.TestHAAppend |\n|   | hadoop.hdfs.server.namenode.TestFSImageWithAcl |\n|   | hadoop.fs.TestUnbuffer |\n|   | hadoop.hdfs.TestDFSPermission |\n|   | hadoop.hdfs.TestParallelRead |\n|   | hadoop.hdfs.server.blockmanagement.TestBlocksWithNotEnoughRacks |\n|   | hadoop.hdfs.server.namenode.TestAddBlock |\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestScrLazyPersistFiles |\n|   | hadoop.hdfs.server.datanode.TestDnRespectsBlockReportSplitThreshold |\n|   | hadoop.hdfs.server.namenode.TestMetaSave |\n|   | hadoop.hdfs.TestSmallBlock |\n|   | hadoop.hdfs.server.blockmanagement.TestUnderReplicatedBlocks |\n|   | hadoop.hdfs.web.TestHttpsFileSystem |\n|   | hadoop.tracing.TestTracing |\n|   | hadoop.hdfs.TestListFilesInDFS |\n|   | hadoop.hdfs.TestFileAppendRestart |\n|   | hadoop.hdfs.TestBlockReaderLocal |\n|   | hadoop.hdfs.server.datanode.TestTriggerBlockReport |\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestLazyWriter |\n|   | hadoop.fs.contract.hdfs.TestHDFSContractConcat |\n|   | hadoop.hdfs.TestReplication |\n|   | hadoop.hdfs.server.namenode.TestEditLog |\n|   | hadoop.security.TestRefreshUserMappings |\n|   | hadoop.hdfs.server.namenode.snapshot.TestFileContextSnapshot |\n|   | hadoop.hdfs.server.mover.TestMover |\n|   | hadoop.hdfs.TestSafeMode |\n|   | hadoop.hdfs.server.namenode.TestHDFSConcat |\n|   | hadoop.hdfs.server.namenode.snapshot.TestAclWithSnapshot |\n|   | hadoop.hdfs.server.blockmanagement.TestBlockTokenWithDFS |\n|   | hadoop.hdfs.server.namenode.TestFSImageWithXAttr |\n|   | hadoop.hdfs.tools.offlineEditsViewer.TestOfflineEditsViewer |\n|   | hadoop.hdfs.TestDatanodeStartupFixesLegacyStorageIDs |\n|   | hadoop.security.TestPermissionSymlinks |\n|   | hadoop.hdfs.TestRollingUpgrade |\n|   | hadoop.hdfs.TestHFlush |\n|   | hadoop.hdfs.server.namenode.TestDecommissioningStatus |\n|   | hadoop.fs.TestSymlinkHdfsDisable |\n|   | hadoop.hdfs.server.namenode.TestQuotaByStorageType |\n|   | hadoop.hdfs.TestFileCreation |\n|   | hadoop.hdfs.server.namenode.snapshot.TestDisallowModifyROSnapshot |\n|   | hadoop.hdfs.server.blockmanagement.TestComputeInvalidateWork |\n|   | hadoop.hdfs.server.namenode.ha.TestQuotasWithHA |\n|   | hadoop.fs.TestSymlinkHdfsFileContext |\n|   | hadoop.hdfs.qjournal.TestSecureNNWithQJM |\n|   | hadoop.hdfs.server.datanode.TestDataNodeVolumeFailureReporting |\n|   | hadoop.hdfs.server.namenode.ha.TestHAStateTransitions |\n|   | hadoop.hdfs.server.namenode.snapshot.TestSetQuotaWithSnapshot |\n|   | hadoop.hdfs.server.namenode.metrics.TestNNMetricFilesInGetListingOps |\n|   | hadoop.hdfs.TestBlockReaderFactory |\n|   | hadoop.hdfs.TestRemoteBlockReader |\n|   | hadoop.hdfs.TestFetchImage |\n|   | hadoop.hdfs.TestDFSOutputStream |\n|   | hadoop.fs.TestUrlStreamHandler |\n|   | hadoop.fs.viewfs.TestViewFileSystemAtHdfsRoot |\n|   | hadoop.hdfs.TestModTime |\n|   | hadoop.hdfs.TestLeaseRecovery2 |\n|   | hadoop.fs.viewfs.TestViewFileSystemWithXAttrs |\n|   | hadoop.hdfs.TestAppendSnapshotTruncate |\n|   | hadoop.hdfs.TestRestartDFS |\n|   | hadoop.hdfs.TestDistributedFileSystem |\n|   | hadoop.hdfs.server.datanode.TestDataNodeRollingUpgrade |\n|   | hadoop.hdfs.TestInjectionForSimulatedStorage |\n|   | hadoop.hdfs.TestMiniDFSCluster |\n|   | hadoop.hdfs.server.datanode.TestFsDatasetCacheRevocation |\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshot |\n|   | hadoop.hdfs.server.namenode.snapshot.TestRenameWithSnapshots |\n|   | hadoop.hdfs.TestLease |\n|   | hadoop.hdfs.server.namenode.snapshot.TestXAttrWithSnapshot |\n|   | hadoop.hdfs.server.balancer.TestBalancer |\n|   | hadoop.hdfs.server.namenode.TestAuditLogs |\n|   | hadoop.hdfs.server.namenode.TestFileTruncate |\n|   | hadoop.hdfs.server.namenode.ha.TestStandbyCheckpoints |\n|   | hadoop.hdfs.TestDFSAddressConfig |\n|   | hadoop.fs.TestSymlinkHdfsFileSystem |\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestRbwSpaceReservation |\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotMetrics |\n|   | hadoop.tools.TestJMXGet |\n|   | hadoop.hdfs.TestDFSMkdirs |\n|   | hadoop.hdfs.TestWriteRead |\n|   | hadoop.hdfs.TestClientBlockVerification |\n|   | hadoop.fs.viewfs.TestViewFsDefaultValue |\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestLazyPersistFiles |\n|   | hadoop.hdfs.server.namenode.ha.TestPendingCorruptDnMessages |\n|   | hadoop.hdfs.TestDatanodeConfig |\n|   | hadoop.hdfs.server.namenode.TestNameNodeResourceChecker |\n|   | hadoop.hdfs.server.datanode.TestDataNodeECN |\n|   | hadoop.hdfs.server.namenode.TestDiskspaceQuotaUpdate |\n|   | hadoop.hdfs.server.datanode.TestDataNodeMXBean |\n|   | hadoop.hdfs.server.namenode.TestAclConfigFlag |\n|   | hadoop.hdfs.server.namenode.TestFavoredNodesEndToEnd |\n|   | hadoop.hdfs.server.namenode.ha.TestXAttrsWithHA |\n|   | hadoop.hdfs.server.namenode.TestBackupNode |\n|   | hadoop.cli.TestHDFSCLI |\n|   | hadoop.hdfs.server.namenode.ha.TestStandbyIsHot |\n|   | hadoop.hdfs.server.namenode.TestAllowFormat |\n|   | hadoop.hdfs.server.namenode.TestBlockPlacementPolicyRackFaultTolerant |\n|   | hadoop.hdfs.server.namenode.TestNameNodeRpcServer |\n|   | hadoop.hdfs.server.blockmanagement.TestRBWBlockInvalidation |\n|   | hadoop.hdfs.server.datanode.TestNNHandlesCombinedBlockReport |\n|   | hadoop.fs.contract.hdfs.TestHDFSContractDelete |\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestLazyPersistReplicaRecovery |\n|   | hadoop.hdfs.server.namenode.TestCheckpoint |\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotListing |\n|   | hadoop.hdfs.server.namenode.TestDeadDatanode |\n|   | hadoop.hdfs.web.TestWebHdfsWithAuthenticationFilter |\n|   | hadoop.hdfs.TestDatanodeReport |\n|   | hadoop.hdfs.server.namenode.ha.TestPipelinesFailover |\n|   | hadoop.hdfs.TestClientReportBadBlock |\n|   | hadoop.hdfs.server.namenode.TestAuditLogger |\n|   | hadoop.hdfs.server.datanode.TestDatanodeProtocolRetryPolicy |\n|   | hadoop.hdfs.TestDFSShellGenericOptions |\n|   | hadoop.security.TestPermission |\n|   | hadoop.hdfs.web.TestWebHDFSAcl |\n|   | hadoop.hdfs.TestMissingBlocksAlert |\n|   | hadoop.fs.viewfs.TestViewFsHdfs |\n|   | hadoop.hdfs.TestClose |\n|   | hadoop.hdfs.tools.TestDebugAdmin |\n|   | hadoop.hdfs.TestFileCorruption |\n|   | hadoop.hdfs.server.namenode.TestFsckWithMultipleNameNodes |\n|   | hadoop.fs.TestFcHdfsCreateMkdir |\n|   | hadoop.hdfs.server.namenode.snapshot.TestUpdatePipelineWithSnapshots |\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshottableDirListing |\n|   | hadoop.hdfs.server.datanode.TestDataNodeUUID |\n|   | hadoop.hdfs.server.namenode.snapshot.TestOpenFilesWithSnapshot |\n|   | hadoop.hdfs.server.balancer.TestBalancerWithSaslDataTransfer |\n|   | hadoop.hdfs.server.namenode.TestXAttrConfigFlag |\n|   | hadoop.hdfs.server.namenode.ha.TestDNFencingWithReplication |\n|   | hadoop.fs.permission.TestStickyBit |\n|   | hadoop.fs.viewfs.TestViewFsWithAcls |\n|   | hadoop.hdfs.tools.TestStoragePolicyCommands |\n|   | hadoop.hdfs.server.datanode.TestDataNodeMultipleRegistrations |\n|   | hadoop.hdfs.server.namenode.TestStartup |\n|   | hadoop.hdfs.TestMultiThreadedHflush |\n|   | hadoop.TestGenericRefresh |\n|   | hadoop.hdfs.server.namenode.metrics.TestNameNodeMetrics |\n|   | hadoop.hdfs.server.datanode.TestBlockReplacement |\n|   | hadoop.hdfs.shortcircuit.TestShortCircuitLocalRead |\n|   | hadoop.hdfs.TestQuota |\n|   | hadoop.hdfs.server.blockmanagement.TestOverReplicatedBlocks |\n|   | hadoop.hdfs.security.TestDelegationTokenForProxyUser |\n|   | hadoop.hdfs.TestConnCache |\n|   | hadoop.fs.viewfs.TestViewFsAtHdfsRoot |\n|   | hadoop.hdfs.server.blockmanagement.TestHeartbeatHandling |\n|   | hadoop.hdfs.server.blockmanagement.TestPendingReplication |\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotDeletion |\n|   | hadoop.hdfs.TestCrcCorruption |\n|   | hadoop.hdfs.server.namenode.TestSecurityTokenEditLog |\n|   | hadoop.tracing.TestTracingShortCircuitLocalRead |\n|   | hadoop.fs.TestFcHdfsPermission |\n|   | hadoop.hdfs.server.blockmanagement.TestReplicationPolicy |\n|   | hadoop.hdfs.TestLeaseRecovery |\n|   | hadoop.hdfs.server.namenode.TestNameNodeRetryCacheMetrics |\n|   | hadoop.hdfs.TestFileLengthOnClusterRestart |\n|   | hadoop.fs.contract.hdfs.TestHDFSContractRootDirectory |\n|   | hadoop.fs.contract.hdfs.TestHDFSContractCreate |\n|   | hadoop.hdfs.server.datanode.TestBlockHasMultipleReplicasOnSameDN |\n|   | hadoop.hdfs.TestFileAppend |\n|   | hadoop.hdfs.web.TestWebHDFS |\n|   | hadoop.hdfs.TestGetBlocks |\n|   | hadoop.hdfs.server.namenode.TestProcessCorruptBlocks |\n|   | hadoop.fs.TestResolveHdfsSymlink |\n|   | hadoop.hdfs.server.datanode.TestStorageReport |\n|   | hadoop.hdfs.tools.offlineImageViewer.TestOfflineImageViewerForAcl |\n|   | hadoop.hdfs.TestDFSUpgrade |\n|   | hadoop.hdfs.server.blockmanagement.TestPendingInvalidateBlock |\n|   | hadoop.hdfs.TestPread |\n|   | hadoop.hdfs.server.namenode.TestCacheDirectives |\n|   | hadoop.hdfs.server.namenode.TestNameNodeMXBean |\n|   | hadoop.hdfs.server.namenode.TestLargeDirectoryDelete |\n|   | hadoop.hdfs.server.namenode.TestFSImageWithSnapshot |\n|   | hadoop.tracing.TestTraceAdmin |\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotBlocksMap |\n|   | hadoop.hdfs.server.balancer.TestBalancerWithEncryptedTransfer |\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotRename |\n|   | hadoop.hdfs.server.namenode.TestNameEditsConfigs |\n|   | hadoop.cli.TestCacheAdminCLI |\n|   | hadoop.hdfs.server.datanode.TestDataNodeExit |\n|   | hadoop.hdfs.server.datanode.TestNNHandlesBlockReportPerStorage |\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotReplication |\n|   | hadoop.hdfs.server.datanode.TestRefreshNamenodes |\n|   | hadoop.hdfs.web.TestWebHDFSForHA |\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotDiffReport |\n|   | hadoop.hdfs.server.namenode.TestHostsFiles |\n|   | hadoop.hdfs.server.namenode.snapshot.TestNestedSnapshots |\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotFileLength |\n|   | hadoop.hdfs.web.TestFSMainOperationsWebHdfs |\n|   | hadoop.hdfs.server.namenode.TestEditLogRace |\n|   | hadoop.hdfs.TestReservedRawPaths |\n|   | hadoop.TestRefreshCallQueue |\n|   | hadoop.hdfs.TestSetTimes |\n|   | hadoop.hdfs.TestDFSUpgradeFromImage |\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestWriteToReplica |\n|   | hadoop.hdfs.server.namenode.ha.TestFailoverWithBlockTokensEnabled |\n|   | hadoop.hdfs.server.datanode.TestDataNodeMetrics |\n|   | hadoop.fs.TestEnhancedByteBufferAccess |\n|   | hadoop.cli.TestCryptoAdminCLI |\n|   | hadoop.hdfs.TestClientProtocolForPipelineRecovery |\n|   | hadoop.hdfs.TestDFSStorageStateRecovery |\n|   | hadoop.hdfs.TestPersistBlocks |\n|   | hadoop.hdfs.server.namenode.TestDefaultBlockPlacementPolicy |\n|   | hadoop.hdfs.TestListFilesInFileContext |\n|   | hadoop.hdfs.server.namenode.TestNamenodeCapacityReport |\n|   | hadoop.hdfs.TestBlockMissingException |\n|   | hadoop.hdfs.server.namenode.TestSnapshotPathINodes |\n|   | hadoop.hdfs.server.datanode.web.dtp.TestDtpHttp2 |\n|   | hadoop.hdfs.server.namenode.TestSecondaryNameNodeUpgrade |\n|   | hadoop.fs.viewfs.TestViewFileSystemHdfs |\n|   | hadoop.hdfs.server.datanode.TestBlockRecovery |\n|   | hadoop.hdfs.security.TestDelegationToken |\n|   | hadoop.hdfs.server.namenode.TestBlockUnderConstruction |\n|   | hadoop.hdfs.TestFileConcurrentReader |\n|   | hadoop.hdfs.TestDFSClientRetries |\n|   | hadoop.hdfs.server.namenode.TestINodeAttributeProvider |\n|   | hadoop.hdfs.server.namenode.TestCheckPointForSecurityTokens |\n|   | hadoop.hdfs.TestParallelShortCircuitReadUnCached |\n|   | hadoop.hdfs.tools.TestDFSAdmin |\n|   | hadoop.hdfs.TestEncryptionZonesWithKMS |\n|   | hadoop.hdfs.crypto.TestHdfsCryptoStreams |\n|   | hadoop.hdfs.TestRead |\n|   | hadoop.hdfs.TestDFSInotifyEventInputStream |\n|   | hadoop.hdfs.server.datanode.TestDataNodeInitStorage |\n|   | hadoop.hdfs.server.namenode.TestFSNamesystemMBean |\n|   | hadoop.fs.loadGenerator.TestLoadGenerator |\n|   | hadoop.fs.contract.hdfs.TestHDFSContractAppend |\n|   | hadoop.fs.viewfs.TestViewFileSystemWithAcls |\n|   | hadoop.hdfs.web.TestWebHDFSXAttr |\n|   | hadoop.hdfs.server.datanode.TestIncrementalBlockReports |\n|   | hadoop.hdfs.web.TestWebHdfsTokens |\n|   | hadoop.hdfs.TestSetrepIncreasing |\n|   | hadoop.fs.TestFcHdfsSetUMask |\n|   | hadoop.hdfs.TestLargeBlock |\n|   | hadoop.hdfs.TestFileAppend3 |\n|   | hadoop.hdfs.server.blockmanagement.TestSequentialBlockId |\n|   | hadoop.hdfs.TestDFSClientFailover |\n|   | hadoop.hdfs.server.datanode.TestDataNodeHotSwapVolumes |\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotStatsMXBean |\n|   | hadoop.hdfs.server.datanode.TestReadOnlySharedStorage |\n|   | hadoop.hdfs.protocol.datatransfer.sasl.TestSaslDataTransfer |\n|   | hadoop.hdfs.server.namenode.ha.TestHAMetrics |\n|   | hadoop.hdfs.server.namenode.TestFSDirectory |\n|   | hadoop.hdfs.server.namenode.TestFSImage |\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestLazyPersistPolicy |\n|   | hadoop.hdfs.server.namenode.TestAddBlockRetry |\n|   | hadoop.hdfs.server.datanode.TestBlockScanner |\n|   | hadoop.hdfs.TestPipelines |\n|   | hadoop.hdfs.TestSetrepDecreasing |\n|   | hadoop.hdfs.TestAppendDifferentChecksum |\n|   | hadoop.hdfs.TestSeekBug |\n|   | hadoop.hdfs.TestFileAppend4 |\n|   | hadoop.hdfs.TestDFSRemove |\n|   | hadoop.hdfs.tools.offlineImageViewer.TestOfflineImageViewer |\n|   | hadoop.hdfs.TestBlockReaderLocalLegacy |\n|   | hadoop.hdfs.TestBlocksScheduledCounter |\n|   | hadoop.fs.viewfs.TestViewFsFileStatusHdfs |\n|   | hadoop.hdfs.TestSnapshotCommands |\n|   | hadoop.fs.shell.TestHdfsTextCommand |\n|   | hadoop.hdfs.TestWriteConfigurationToDFS |\n|   | hadoop.hdfs.TestDFSRollback |\n|   | hadoop.hdfs.TestBlockStoragePolicy |\n|   | hadoop.hdfs.TestFSInputChecker |\n|   | hadoop.hdfs.TestParallelShortCircuitRead |\n|   | hadoop.hdfs.server.namenode.ha.TestStandbyBlockManagement |\n|   | hadoop.hdfs.TestAbandonBlock |\n|   | hadoop.fs.TestGlobPaths |\n|   | hadoop.hdfs.TestDataTransferKeepalive |\n|   | hadoop.hdfs.TestHDFSTrash |\n|   | hadoop.hdfs.server.namenode.TestNameNodeAcl |\n|   | hadoop.fs.contract.hdfs.TestHDFSContractRename |\n|   | hadoop.hdfs.TestDFSInputStream |\n|   | hadoop.hdfs.TestHDFSServerPorts |\n|   | hadoop.hdfs.TestRenameWhileOpen |\n|   | hadoop.hdfs.server.namenode.snapshot.TestINodeFileUnderConstructionWithSnapshot |\n|   | hadoop.hdfs.TestEncryptedTransfer |\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestInterDatanodeProtocol |\n|   | hadoop.hdfs.TestHDFSFileSystemContract |\n|   | hadoop.hdfs.web.TestWebHdfsWithMultipleNameNodes |\n|   | hadoop.net.TestNetworkTopology |\n|   | hadoop.hdfs.security.token.block.TestBlockToken |\n|   | hadoop.hdfs.server.datanode.TestIncrementalBrVariations |\n|   | hadoop.hdfs.server.datanode.TestHSync |\n|   | hadoop.hdfs.server.namenode.TestNamenodeRetryCache |\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestFsDatasetImpl |\n|   | hadoop.hdfs.TestDatanodeLayoutUpgrade |\n|   | hadoop.hdfs.TestWriteBlockGetsBlockLengthHint |\n|   | hadoop.hdfs.server.datanode.TestDataNodeVolumeFailure |\n|   | hadoop.hdfs.server.balancer.TestBalancerWithNodeGroup |\n|   | hadoop.hdfs.server.namenode.web.resources.TestWebHdfsDataLocality |\n|   | hadoop.hdfs.server.namenode.TestListCorruptFileBlocks |\n|   | hadoop.hdfs.server.namenode.ha.TestDNFencing |\n|   | hadoop.hdfs.server.namenode.TestCreateEditsLog |\n|   | hadoop.hdfs.server.namenode.TestFileContextXAttr |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12738937/HDFS-8572.000.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / a7a7768 |\n| checkstyle |  https://builds.apache.org/job/PreCommit-HDFS-Build/11306/artifact/patchprocess/diffcheckstylehadoop-hdfs.txt |\n| hadoop-hdfs test log | https://builds.apache.org/job/PreCommit-HDFS-Build/11306/artifact/patchprocess/testrun_hadoop-hdfs.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/11306/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf900.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/11306/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-11T00:18:00.760+0000","updated":"2015-06-11T00:18:00.760+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14581336","id":"14581336","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"HI [~wheat9],\n\nThanks for reporting the issue and the patch. Coincidentally I am investigating this issue this couple of days and identified that HDFS-7279 caused the problem.\n\nI briefly looked at the patch, found that the test failure of your patch is because it always set the cluster to secure in the following code:\n\n{code}\n HttpServer2.Builder builder = new HttpServer2.Builder()\n        .setName(\"datanode\")\n        .setConf(confForInfoServer)\n        .setACL(new AccessControlList(conf.get(DFS_ADMIN, \" \")))\n        .setSecurityEnabled(true) <============================================\n        .setUsernameConfKey(DFS_WEB_AUTHENTICATION_KERBEROS_PRINCIPAL_KEY)\n        .setKeytabConfKey(DFS_WEB_AUTHENTICATION_KERBEROS_KEYTAB_KEY)\n        .hostName(getHostnameForSpnegoPrincipal(confForInfoServer))\n        .addEndpoint(URI.create(\"http://localhost:0\"))\n        .setFindPort(true);\n{code}\n\nSuggest to change it to \n{code}\nboolean isSecure = UserGroupInformation.isSecurityEnabled();\n        .setSecurityEnabled(isSecure)\n{code}\n\nThanks.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-11T01:51:47.082+0000","updated":"2015-06-11T01:51:47.082+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14581353","id":"14581353","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"One question\n{code}\n  private static String getHostnameForSpnegoPrincipal(Configuration conf) {\n    String addr = conf.getTrimmed(DFS_DATANODE_HTTP_ADDRESS_KEY, null);\n    if (addr == null) {\n      addr = conf.getTrimmed(DFS_DATANODE_HTTPS_ADDRESS_KEY,\n                             DFS_DATANODE_HTTPS_ADDRESS_DEFAULT);\n    }\n    InetSocketAddress inetSocker = NetUtils.createSocketAddr(addr);\n    String hostName = inetSocker.getHostString();\n    return hostName;\n  }\n{code}\nShouldn't this code check whether it's secure cluster or not then read the corresponding config property, instead of checking \"==nul\" with one then try the other?\n\nThanks.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-11T02:24:01.849+0000","updated":"2015-06-11T02:24:01.849+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14581543","id":"14581543","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~wheat9],\n\nThanks for the new rev. Two comments here:\n\n1. I noticed that your new rev removed the call to \n{code}\n        .setSecurityEnabled(...)\n        .setUsernameConfKey(DFS_WEB_AUTHENTICATION_KERBEROS_PRINCIPAL_KEY)\n        .setKeytabConfKey(DFS_WEB_AUTHENTICATION_KERBEROS_KEYTAB_KEY)\n{code}\nSo the datanode http server's {{securityEnabled}} is the default value {{false}} and the following code is not executed:\n{code}\n   if (this.securityEnabled) {\n      server.initSpnego(conf, hostName, usernameConfKey, keytabConfKey);\n   }\n{code}\nIs this expected? if so, why we don't need to set securityEnabled here? when do we need to set it?\n\n2. There is a redundant line to be removed:\n{code}\nimport static org.apache.hadoop.hdfs.DFSConfigKeys.*;\n{code}\n\nThanks.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-11T06:47:12.027+0000","updated":"2015-06-11T06:47:12.027+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14581625","id":"14581625","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  18m 13s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |\n| {color:green}+1{color} | javac |   7m 48s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |  10m  6s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 23s | The applied patch does not increase the total number of release audit warnings. |\n| {color:red}-1{color} | checkstyle |   2m 17s | The applied patch generated  2 new checkstyle issues (total was 154, now 147). |\n| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 36s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 33s | The patch built with eclipse:eclipse. |\n| {color:green}+1{color} | findbugs |   3m 17s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |\n| {color:green}+1{color} | native |   3m 23s | Pre-build of native portion |\n| {color:green}+1{color} | hdfs tests | 162m 13s | Tests passed in hadoop-hdfs. |\n| | | 209m 53s | |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12738989/HDFS-8572.001.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / a7a7768 |\n| checkstyle |  https://builds.apache.org/job/PreCommit-HDFS-Build/11308/artifact/patchprocess/diffcheckstylehadoop-hdfs.txt |\n| hadoop-hdfs test log | https://builds.apache.org/job/PreCommit-HDFS-Build/11308/artifact/patchprocess/testrun_hadoop-hdfs.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/11308/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf904.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/11308/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-11T08:00:20.333+0000","updated":"2015-06-11T08:00:20.333+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14581646","id":"14581646","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Is this expected? if so, why we don't need to set securityEnabled here? when do we need to set it?\n\nThis is expected. DN is not supposed to support SPNEGO authentication at all. This patch is to quickly restore the old behavior before HDFS-7279 which will unblock the release. I defer the correct fix in a separate jira.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-11T08:08:28.811+0000","updated":"2015-06-11T08:08:28.811+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14581840","id":"14581840","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"\\\\\n\\\\\n| (x) *{color:red}-1 overall{color}* |\n\\\\\n\\\\\n|| Vote || Subsystem || Runtime || Comment ||\n| {color:blue}0{color} | pre-patch |  17m 51s | Pre-patch trunk compilation is healthy. |\n| {color:green}+1{color} | @author |   0m  0s | The patch does not contain any @author tags. |\n| {color:red}-1{color} | tests included |   0m  0s | The patch doesn't appear to include any new or modified tests.  Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. |\n| {color:green}+1{color} | javac |   7m 29s | There were no new javac warning messages. |\n| {color:green}+1{color} | javadoc |   9m 39s | There were no new javadoc warning messages. |\n| {color:green}+1{color} | release audit |   0m 24s | The applied patch does not increase the total number of release audit warnings. |\n| {color:red}-1{color} | checkstyle |   2m 12s | The applied patch generated  2 new checkstyle issues (total was 154, now 147). |\n| {color:green}+1{color} | whitespace |   0m  0s | The patch has no lines that end in whitespace. |\n| {color:green}+1{color} | install |   1m 33s | mvn install still works. |\n| {color:green}+1{color} | eclipse:eclipse |   0m 33s | The patch built with eclipse:eclipse. |\n| {color:green}+1{color} | findbugs |   3m 14s | The patch does not introduce any new Findbugs (version 3.0.0) warnings. |\n| {color:green}+1{color} | native |   3m 12s | Pre-build of native portion |\n| {color:green}+1{color} | hdfs tests | 161m  6s | Tests passed in hadoop-hdfs. |\n| | | 207m 17s | |\n\\\\\n\\\\\n|| Subsystem || Report/Notes ||\n| Patch URL | http://issues.apache.org/jira/secure/attachment/12739011/HDFS-8572.002.patch |\n| Optional Tests | javadoc javac unit findbugs checkstyle |\n| git revision | trunk / 95c73d4 |\n| checkstyle |  https://builds.apache.org/job/PreCommit-HDFS-Build/11310/artifact/patchprocess/diffcheckstylehadoop-hdfs.txt |\n| hadoop-hdfs test log | https://builds.apache.org/job/PreCommit-HDFS-Build/11310/artifact/patchprocess/testrun_hadoop-hdfs.txt |\n| Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/11310/testReport/ |\n| Java | 1.7.0_55 |\n| uname | Linux asf909.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux |\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/11310/console |\n\n\nThis message was automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-11T11:37:44.605+0000","updated":"2015-06-11T11:37:44.605+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14582036","id":"14582036","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~wheat9],\n\nThanks for the new rev to address my comment. \n{quote}\nIs this expected? if so, why we don't need to set securityEnabled here? when do we need to set it?\nThis is expected. DN is not supposed to support SPNEGO authentication at all. This patch is to quickly restore the old behavior before HDFS-7279 which will unblock the release. I defer the correct fix in a separate jira.\n{quote}\n\nI can see that your change restored old behavior and I agree that we can defer any other fixes to separate jira. So I agree with rev 002 solution here. Two comments:\n- Based on your explanation, the jira title here may not be accurate. Would you please update it if so?\n- Would you please create new jira with some description of the correct fix you referred to? \n\nBTW, we have a similar case that we hope can get a fix and defer other issues to separate jiras. [~atm] had a long standing comment here\nhttps://issues.apache.org/jira/browse/HDFS-7037?focusedCommentId=14484301&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14484301\nwaiting for you to reply. We keep having use issues without the fix even as of yesterdaty. Would you please kindly revisit and reply to [~atm]'s comment?\n\nThanks much.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-11T15:05:15.132+0000","updated":"2015-06-11T15:05:15.132+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14582527","id":"14582527","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi [~wheat9],\n\nI both checked that the patch restored the old behavior, and tested in a real cluster. Since now that you have addressed my review comments. I'm +1 on 002 pending your addressing my questions in my last comment.\n\nThanks much.\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-11T21:14:43.633+0000","updated":"2015-06-11T21:14:43.633+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14582852","id":"14582852","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"body":"I've committed the patch to trunk and branch-2. Thanks Yongjun for the reviews.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-12T02:31:52.209+0000","updated":"2015-06-12T02:31:52.209+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14582906","id":"14582906","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"body":"Hi Haohui,\n\nThanks again for the solution. As we discussed, would you please create a follow-up jira? Thanks.\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yzhangal","name":"yzhangal","key":"yzhangal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yongjun Zhang","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-12T04:12:28.097+0000","updated":"2015-06-12T04:12:28.097+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14584150","id":"14584150","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-trunk-Commit #8013 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/8013/])\nHDFS-8572. DN always uses HTTP/localhost@REALM principals in SPNEGO. Contributed by Haohui Mai. (wheat9: rev eef7b50e23f9960e4bb61d9db6754a2300bc06eb)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/DatanodeHttpServer.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataNode.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-12T21:53:49.555+0000","updated":"2015-06-12T21:53:49.555+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14584557","id":"14584557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Yarn-trunk-Java8 #227 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk-Java8/227/])\nHDFS-8572. DN always uses HTTP/localhost@REALM principals in SPNEGO. Contributed by Haohui Mai. (wheat9: rev eef7b50e23f9960e4bb61d9db6754a2300bc06eb)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataNode.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/DatanodeHttpServer.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-13T10:42:10.068+0000","updated":"2015-06-13T10:42:10.068+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14584562","id":"14584562","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Yarn-trunk #957 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/957/])\nHDFS-8572. DN always uses HTTP/localhost@REALM principals in SPNEGO. Contributed by Haohui Mai. (wheat9: rev eef7b50e23f9960e4bb61d9db6754a2300bc06eb)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataNode.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/DatanodeHttpServer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-13T10:45:28.038+0000","updated":"2015-06-13T10:45:28.038+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14584619","id":"14584619","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-Hdfs-trunk #2155 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/2155/])\nHDFS-8572. DN always uses HTTP/localhost@REALM principals in SPNEGO. Contributed by Haohui Mai. (wheat9: rev eef7b50e23f9960e4bb61d9db6754a2300bc06eb)\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataNode.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/DatanodeHttpServer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-13T14:30:02.366+0000","updated":"2015-06-13T14:30:02.366+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14584627","id":"14584627","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-Hdfs-trunk-Java8 #216 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Java8/216/])\nHDFS-8572. DN always uses HTTP/localhost@REALM principals in SPNEGO. Contributed by Haohui Mai. (wheat9: rev eef7b50e23f9960e4bb61d9db6754a2300bc06eb)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataNode.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/DatanodeHttpServer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-13T14:43:01.512+0000","updated":"2015-06-13T14:43:01.512+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14584650","id":"14584650","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk-Java8 #225 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Java8/225/])\nHDFS-8572. DN always uses HTTP/localhost@REALM principals in SPNEGO. Contributed by Haohui Mai. (wheat9: rev eef7b50e23f9960e4bb61d9db6754a2300bc06eb)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataNode.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/DatanodeHttpServer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-13T15:12:58.125+0000","updated":"2015-06-13T15:12:58.125+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/14584660","id":"14584660","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk #2173 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/2173/])\nHDFS-8572. DN always uses HTTP/localhost@REALM principals in SPNEGO. Contributed by Haohui Mai. (wheat9: rev eef7b50e23f9960e4bb61d9db6754a2300bc06eb)\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/DatanodeHttpServer.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DataNode.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-13T15:31:30.096+0000","updated":"2015-06-13T15:31:30.096+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/15028757","id":"15028757","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brahmareddy","name":"brahmareddy","key":"brahmareddy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=brahmareddy&avatarId=24624","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brahmareddy&avatarId=24624","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brahmareddy&avatarId=24624","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brahmareddy&avatarId=24624"},"displayName":"Brahma Reddy Battula","active":true,"timeZone":"Asia/Kolkata"},"body":"HI [~wheat9]\n\nwhile committing this patch,do you remove following purposefully in branch-2..? \n\n{code}\n-    this.infoServer.addInternalServlet(null, \"/streamFile/*\", StreamFile.class);\n-    this.infoServer.addInternalServlet(null, \"/getFileChecksum/*\",\n-        FileChecksumServlets.GetServlet.class);\n{code}\n\nI think ,distcp will fail when we use hftp since it expect streamFile and throw following error..am I correct..? if you agree with me,would like raise separate jira and add back...\n\n{noformat}\nCaused by: org.apache.hadoop.tools.mapred.RetriableFileCopyCommand$CopyReadException: java.io.IOException: HTTP_OK expected, received 404\nat org.apache.hadoop.tools.mapred.RetriableFileCopyCommand.getInputStream(RetriableFileCopyCommand.java:302)\nat org.apache.hadoop.tools.mapred.RetriableFileCopyCommand.copyBytes(RetriableFileCopyCommand.java:247)\nat org.apache.hadoop.tools.mapred.RetriableFileCopyCommand.copyToFile(RetriableFileCopyCommand.java:183)\nat org.apache.hadoop.tools.mapred.RetriableFileCopyCommand.doCopy(RetriableFileCopyCommand.java:123)\nat org.apache.hadoop.tools.mapred.RetriableFileCopyCommand.doExecute(RetriableFileCopyCommand.java:99)\nat org.apache.hadoop.tools.util.RetriableCommand.execute(RetriableCommand.java:87)\n... 11 more\nCaused by: java.io.IOException: HTTP_OK expected, received 404\nat org.apache.hadoop.hdfs.web.HftpFileSystem$RangeHeaderUrlOpener.connect(HftpFileSystem.java:367)\nat org.apache.hadoop.hdfs.web.ByteRangeInputStream.openInputStream(ByteRangeInputStream.java:133)\nat org.apache.hadoop.hdfs.web.ByteRangeInputStream.getInputStream(ByteRangeInputStream.java:115)\nat org.apache.hadoop.hdfs.web.ByteRangeInputStream.<init>(ByteRangeInputStream.java:100)\nat org.apache.hadoop.hdfs.web.HftpFileSystem$RangeHeaderInputStream.<init>(HftpFileSystem.java:376)\nat org.apache.hadoop.hdfs.web.HftpFileSystem$RangeHeaderInputStream.<init>(HftpFileSystem.java:381)\nat org.apache.hadoop.hdfs.web.HftpFileSystem.open(HftpFileSystem.java:397)\nat org.apache.hadoop.fs.FileSystem.open(FileSystem.java:769)\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brahmareddy","name":"brahmareddy","key":"brahmareddy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=brahmareddy&avatarId=24624","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brahmareddy&avatarId=24624","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brahmareddy&avatarId=24624","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brahmareddy&avatarId=24624"},"displayName":"Brahma Reddy Battula","active":true,"timeZone":"Asia/Kolkata"},"created":"2015-11-26T13:20:18.357+0000","updated":"2015-11-26T13:20:18.357+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12836911/comment/15084557","id":"15084557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brahmareddy","name":"brahmareddy","key":"brahmareddy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=brahmareddy&avatarId=24624","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brahmareddy&avatarId=24624","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brahmareddy&avatarId=24624","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brahmareddy&avatarId=24624"},"displayName":"Brahma Reddy Battula","active":true,"timeZone":"Asia/Kolkata"},"body":"[~wheat9] can I raise separate jira to track this..?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brahmareddy","name":"brahmareddy","key":"brahmareddy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=brahmareddy&avatarId=24624","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brahmareddy&avatarId=24624","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brahmareddy&avatarId=24624","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brahmareddy&avatarId=24624"},"displayName":"Brahma Reddy Battula","active":true,"timeZone":"Asia/Kolkata"},"created":"2016-01-06T02:26:48.465+0000","updated":"2016-01-06T02:26:48.465+0000"}],"maxResults":20,"total":20,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-8572/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2fw5r:"}}