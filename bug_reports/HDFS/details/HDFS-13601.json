{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13160853","self":"https://issues.apache.org/jira/rest/api/2/issue/13160853","key":"HDFS-13601","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12341705","id":"12341705","description":"2.10.0 release","name":"2.10.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12342772","id":"12342772","description":"","name":"3.2.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12342983","id":"12342983","description":"3.1.1 release","name":"3.1.1","archived":false,"released":true,"releaseDate":"2018-08-07"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12343020","id":"12343020","description":"3.0.3 release","name":"3.0.3","archived":false,"released":true,"releaseDate":"2018-06-08"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2018-05-22T02:35:11.089+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Wed May 23 07:21:17 UTC 2018","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_362949_*|*_5_*:*_1_*:*_0_*|*_10002_*:*_1_*:*_113172214","customfield_12312321":null,"resolutiondate":"2018-05-23T07:02:39.924+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-13601/watchers","watchCount":8,"isWatching":false},"created":"2018-05-21T23:30:24.804+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12341434","id":"12341434","description":"3.1.0 release","name":"3.1.0","archived":false,"released":true,"releaseDate":"2018-04-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12341761","id":"12341761","description":"2.9.1 release","name":"2.9.1","archived":false,"released":true,"releaseDate":"2018-05-03"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2018-05-23T07:21:17.064+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"While doing some profiling of the NN with JMC, I saw a lot of time being spent on String->ByteString conversions. These are often the same strings being converted over and over again, meaning there's room for optimization.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12924441","id":"12924441","filename":"HDFS-13601.001.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-05-21T23:31:25.835+0000","size":11674,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12924441/HDFS-13601.001.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12924471","id":"12924471","filename":"HDFS-13601.002.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-05-22T03:31:30.378+0000","size":11922,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12924471/HDFS-13601.002.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12924625","id":"12924625","filename":"HDFS-13601.003.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-05-22T20:59:09.549+0000","size":12280,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12924625/HDFS-13601.003.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12924676","id":"12924676","filename":"HDFS-13601.004.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-05-23T02:10:41.675+0000","size":12739,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12924676/HDFS-13601.004.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"Optimize ByteString conversions in PBHelper","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160853/comment/16483210","id":"16483210","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"body":"I've attached a patch for some flavor and a precommit run. The basic idea is to cache what are likely to be fixed strings, or strings coming from a limited set.\r\n\r\nI tested this on CDH 5, but the same findings should also apply to trunk. For a pure listing-with-locations workload, JMC shows a reduction of TLAB allocation from 499MB/s to 384MB/s after applying this patch. Previously, 13% of stacks showed up in StringEncoder.encode (converting from String to byte array for PB), and now that's reduced to 5.6%. The hotspot is now creating the LocatedBlocks and adding all the StorageIDs, which is something separate to tackle.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-05-21T23:36:17.291+0000","updated":"2018-05-21T23:36:17.291+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160853/comment/16483423","id":"16483423","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 37s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 10s{color} | {color:blue} Maven dependency ordering for branch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 25m 48s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 16m 41s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  1m  6s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m 46s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 13m 14s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  3m 35s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 15s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 11s{color} | {color:blue} Maven dependency ordering for patch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  1m 42s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 16m 32s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 16m 32s{color} | {color:green} the patch passed {color} |\r\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 59s{color} | {color:orange} hadoop-hdfs-project: The patch generated 2 new + 51 unchanged - 0 fixed = 53 total (was 51) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m 40s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:red}-1{color} | {color:red} shadedclient {color} | {color:red} 11m  2s{color} | {color:red} patch has errors when building and testing our client artifacts. {color} |\r\n| {color:red}-1{color} | {color:red} findbugs {color} | {color:red}  1m 46s{color} | {color:red} hadoop-hdfs-project/hadoop-hdfs-client generated 5 new + 0 unchanged - 0 fixed = 5 total (was 0) {color} |\r\n| {color:red}-1{color} | {color:red} findbugs {color} | {color:red}  2m  4s{color} | {color:red} hadoop-hdfs-project/hadoop-hdfs generated 1 new + 0 unchanged - 0 fixed = 1 total (was 0) {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 13s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} unit {color} | {color:green}  1m 31s{color} | {color:green} hadoop-hdfs-client in the patch passed. {color} |\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 71m 54s{color} | {color:red} hadoop-hdfs in the patch failed. {color} |\r\n| {color:red}-1{color} | {color:red} asflicense {color} | {color:red}  0m 28s{color} | {color:red} The patch generated 1 ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black}174m 18s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| FindBugs | module:hadoop-hdfs-project/hadoop-hdfs-client |\r\n|  |  Found reliance on default encoding in new org.apache.hadoop.hdfs.protocol.DatanodeID(String, String, String, int, int, int, int):in new org.apache.hadoop.hdfs.protocol.DatanodeID(String, String, String, int, int, int, int): String.getBytes()  At DatanodeID.java:[line 99] |\r\n|  |  Found reliance on default encoding in org.apache.hadoop.hdfs.protocolPB.PBHelperClient.getFixedByteString(String):in org.apache.hadoop.hdfs.protocolPB.PBHelperClient.getFixedByteString(String): String.getBytes()  At PBHelperClient.java:[line 258] |\r\n|  |  Return value of putIfAbsent is ignored, but value is reused in org.apache.hadoop.hdfs.protocolPB.PBHelperClient.getFixedByteString(String)  At PBHelperClient.java:ignored, but value is reused in org.apache.hadoop.hdfs.protocolPB.PBHelperClient.getFixedByteString(String)  At PBHelperClient.java:[line 259] |\r\n|  |  Return value of putIfAbsent is ignored, but value is reused in org.apache.hadoop.hdfs.protocolPB.PBHelperClient.getFixedByteString(Text)  At PBHelperClient.java:ignored, but value is reused in org.apache.hadoop.hdfs.protocolPB.PBHelperClient.getFixedByteString(Text)  At PBHelperClient.java:[line 250] |\r\n|  |  Found reliance on default encoding in org.apache.hadoop.hdfs.protocolPB.PBHelperClient$1.load(String):in org.apache.hadoop.hdfs.protocolPB.PBHelperClient$1.load(String): String.getBytes()  At PBHelperClient.java:[line 274] |\r\n| FindBugs | module:hadoop-hdfs-project/hadoop-hdfs |\r\n|  |  Found reliance on default encoding in new org.apache.hadoop.hdfs.server.protocol.DatanodeRegistration(String, DatanodeRegistration):in new org.apache.hadoop.hdfs.server.protocol.DatanodeRegistration(String, DatanodeRegistration): String.getBytes()  At DatanodeRegistration.java:[line 48] |\r\n| Failed junit tests | hadoop.hdfs.TestParallelShortCircuitRead |\r\n|   | hadoop.fs.contract.hdfs.TestHDFSContractMkdir |\r\n|   | hadoop.hdfs.TestBlockStoragePolicy |\r\n|   | hadoop.hdfs.TestEncryptedTransfer |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotMetrics |\r\n|   | hadoop.hdfs.TestDFSInotifyEventInputStream |\r\n|   | hadoop.hdfs.TestSnapshotCommands |\r\n|   | hadoop.hdfs.TestFileLengthOnClusterRestart |\r\n|   | hadoop.hdfs.TestAppendSnapshotTruncate |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshottableDirListing |\r\n|   | hadoop.hdfs.TestRead |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestUpdatePipelineWithSnapshots |\r\n|   | hadoop.hdfs.TestBlocksScheduledCounter |\r\n|   | hadoop.hdfs.server.namenode.TestDiskspaceQuotaUpdate |\r\n|   | hadoop.cli.TestHDFSCLI |\r\n|   | hadoop.hdfs.TestDFSPermission |\r\n|   | hadoop.hdfs.server.datanode.TestBatchIbr |\r\n|   | hadoop.hdfs.server.namenode.TestCheckpoint |\r\n|   | hadoop.hdfs.TestReplaceDatanodeOnFailure |\r\n|   | hadoop.hdfs.server.namenode.TestStartup |\r\n|   | hadoop.hdfs.server.namenode.TestNestedEncryptionZones |\r\n|   | hadoop.hdfs.TestDFSStorageStateRecovery |\r\n|   | hadoop.hdfs.TestDFSStripedOutputStreamWithRandomECPolicy |\r\n|   | hadoop.hdfs.TestMultiThreadedHflush |\r\n|   | hadoop.fs.contract.hdfs.TestHDFSContractRename |\r\n|   | hadoop.hdfs.TestDFSClientFailover |\r\n|   | hadoop.hdfs.server.mover.TestMover |\r\n|   | hadoop.hdfs.server.blockmanagement.TestOverReplicatedBlocks |\r\n|   | hadoop.hdfs.TestErasureCodingPoliciesWithRandomECPolicy |\r\n|   | hadoop.hdfs.server.namenode.web.resources.TestWebHdfsDataLocality |\r\n|   | hadoop.hdfs.TestLeaseRecovery2 |\r\n|   | hadoop.fs.loadGenerator.TestLoadGenerator |\r\n|   | hadoop.hdfs.TestDataStream |\r\n|   | hadoop.hdfs.server.namenode.TestLargeDirectoryDelete |\r\n|   | hadoop.hdfs.TestWriteConfigurationToDFS |\r\n|   | hadoop.fs.TestFcHdfsSetUMask |\r\n|   | hadoop.hdfs.TestPread |\r\n|   | hadoop.hdfs.server.namenode.TestFSEditLogLoader |\r\n|   | hadoop.hdfs.server.datanode.TestFsDatasetCacheRevocation |\r\n|   | hadoop.hdfs.server.namenode.ha.TestQuotasWithHA |\r\n|   | hadoop.hdfs.crypto.TestHdfsCryptoStreams |\r\n|   | hadoop.fs.viewfs.TestViewFsFileStatusHdfs |\r\n|   | hadoop.hdfs.server.datanode.TestReadOnlySharedStorage |\r\n|   | hadoop.hdfs.tools.offlineImageViewer.TestOfflineImageViewerForAcl |\r\n|   | hadoop.hdfs.web.TestHttpsFileSystem |\r\n|   | hadoop.tracing.TestTracingShortCircuitLocalRead |\r\n|   | hadoop.hdfs.TestDecommissionWithStriped |\r\n|   | hadoop.hdfs.web.TestWebHdfsUrl |\r\n|   | hadoop.hdfs.server.namenode.TestFSDirectory |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeFaultInjector |\r\n|   | hadoop.hdfs.TestApplyingStoragePolicy |\r\n|   | hadoop.hdfs.server.datanode.TestBlockScanner |\r\n|   | hadoop.hdfs.server.namenode.TestNameNodeMetadataConsistency |\r\n|   | hadoop.tracing.TestTracing |\r\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestInterDatanodeProtocol |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestNestedSnapshots |\r\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestLazyPersistFiles |\r\n|   | hadoop.hdfs.TestParallelRead |\r\n|   | hadoop.hdfs.TestDFSStripedInputStream |\r\n|   | hadoop.hdfs.tools.TestDelegationTokenFetcher |\r\n|   | hadoop.hdfs.TestRestartDFS |\r\n|   | hadoop.fs.TestWebHdfsFileContextMainOperations |\r\n|   | hadoop.hdfs.TestParallelShortCircuitReadNoChecksum |\r\n|   | hadoop.hdfs.server.blockmanagement.TestSequentialBlockId |\r\n|   | hadoop.hdfs.TestDFSOutputStream |\r\n|   | hadoop.hdfs.server.namenode.TestNamenodeStorageDirectives |\r\n|   | hadoop.hdfs.server.blockmanagement.TestNameNodePrunesMissingStorages |\r\n|   | hadoop.hdfs.TestSetTimes |\r\n|   | hadoop.hdfs.TestParallelShortCircuitLegacyRead |\r\n|   | hadoop.hdfs.server.blockmanagement.TestPendingInvalidateBlock |\r\n|   | hadoop.hdfs.server.blockmanagement.TestBlockTokenWithDFS |\r\n|   | hadoop.hdfs.TestReadStripedFileWithMissingBlocks |\r\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestLazyPersistLockedMemory |\r\n|   | hadoop.hdfs.TestDatanodeDeath |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeVolumeMetrics |\r\n|   | hadoop.hdfs.server.namenode.ha.TestDelegationTokensWithHA |\r\n|   | hadoop.hdfs.server.namenode.ha.TestPipelinesFailover |\r\n|   | hadoop.hdfs.tools.offlineEditsViewer.TestOfflineEditsViewer |\r\n|   | hadoop.hdfs.server.diskbalancer.TestDiskBalancer |\r\n|   | hadoop.fs.TestFcHdfsCreateMkdir |\r\n|   | hadoop.hdfs.TestHFlush |\r\n|   | hadoop.hdfs.server.namenode.ha.TestFailoverWithBlockTokensEnabled |\r\n|   | hadoop.hdfs.server.namenode.ha.TestDNFencingWithReplication |\r\n|   | hadoop.hdfs.server.namenode.ha.TestDNFencing |\r\n|   | hadoop.hdfs.TestDFSRollback |\r\n|   | hadoop.hdfs.TestDFSUpgrade |\r\n|   | hadoop.fs.TestFcHdfsPermission |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotBlocksMap |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeVolumeFailureToleration |\r\n|   | hadoop.hdfs.tools.offlineImageViewer.TestOfflineImageViewerWithStripedBlocks |\r\n|   | hadoop.hdfs.server.namenode.TestNamenodeRetryCache |\r\n|   | hadoop.hdfs.server.datanode.TestFsDatasetCache |\r\n|   | hadoop.hdfs.server.namenode.TestAddStripedBlockInFBR |\r\n|   | hadoop.hdfs.server.datanode.TestBlockHasMultipleReplicasOnSameDN |\r\n|   | hadoop.hdfs.TestMissingBlocksAlert |\r\n|   | hadoop.hdfs.server.namenode.TestNNThroughputBenchmark |\r\n|   | hadoop.hdfs.server.namenode.ha.TestHAMetrics |\r\n|   | hadoop.hdfs.TestQuota |\r\n|   | hadoop.hdfs.server.balancer.TestBalancerWithEncryptedTransfer |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestFileContextSnapshot |\r\n|   | hadoop.hdfs.TestReplaceDatanodeFailureReplication |\r\n|   | hadoop.hdfs.server.namenode.TestQuotaByStorageType |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotDeletion |\r\n|   | hadoop.hdfs.server.namenode.TestParallelImageWrite |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeTcpNoDelay |\r\n|   | hadoop.hdfs.tools.TestDebugAdmin |\r\n|   | hadoop.hdfs.server.datanode.TestDiskError |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestRenameWithSnapshots |\r\n|   | hadoop.hdfs.server.namenode.TestNameEditsConfigs |\r\n|   | hadoop.hdfs.TestErasureCodingExerciseAPIs |\r\n|   | hadoop.hdfs.server.namenode.TestSnapshotPathINodes |\r\n|   | hadoop.hdfs.server.namenode.TestFavoredNodesEndToEnd |\r\n|   | hadoop.hdfs.tools.offlineImageViewer.TestOfflineImageViewer |\r\n|   | hadoop.hdfs.server.namenode.TestGetContentSummaryWithPermission |\r\n|   | hadoop.hdfs.shortcircuit.TestShortCircuitCache |\r\n|   | hadoop.hdfs.server.balancer.TestBalancerWithNodeGroup |\r\n|   | hadoop.hdfs.server.datanode.TestDnRespectsBlockReportSplitThreshold |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotNameWithInvalidCharacters |\r\n|   | hadoop.hdfs.TestModTime |\r\n|   | hadoop.hdfs.server.blockmanagement.TestBlockManager |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeMultipleRegistrations |\r\n|   | hadoop.hdfs.TestSetrepIncreasing |\r\n|   | hadoop.hdfs.TestDFSStripedInputStreamWithRandomECPolicy |\r\n|   | hadoop.hdfs.TestGetBlocks |\r\n|   | hadoop.hdfs.TestDFSStartupVersions |\r\n|   | hadoop.hdfs.TestReadWhileWriting |\r\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestFsDatasetImpl |\r\n|   | hadoop.hdfs.TestRenameWhileOpen |\r\n|   | hadoop.tools.TestJMXGet |\r\n|   | hadoop.hdfs.shortcircuit.TestShortCircuitLocalRead |\r\n|   | hadoop.hdfs.TestHDFSFileSystemContract |\r\n|   | hadoop.hdfs.web.TestWebHdfsWithRestCsrfPreventionFilter |\r\n|   | hadoop.hdfs.TestFileAppend4 |\r\n|   | hadoop.hdfs.TestReconstructStripedFileWithRandomECPolicy |\r\n|   | hadoop.hdfs.server.namenode.TestAddBlock |\r\n|   | hadoop.hdfs.TestDataTransferKeepalive |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeMetrics |\r\n|   | hadoop.hdfs.server.balancer.TestBalancerWithHANameNodes |\r\n|   | hadoop.security.TestPermissionSymlinks |\r\n|   | hadoop.hdfs.server.namenode.ha.TestRetryCacheWithHA |\r\n|   | hadoop.hdfs.server.namenode.TestINodeFile |\r\n|   | hadoop.hdfs.server.balancer.TestBalancerWithSaslDataTransfer |\r\n|   | hadoop.hdfs.TestFileAppend2 |\r\n|   | hadoop.hdfs.TestErasureCodeBenchmarkThroughput |\r\n|   | hadoop.hdfs.TestSetrepDecreasing |\r\n|   | hadoop.hdfs.server.namenode.TestProcessCorruptBlocks |\r\n|   | hadoop.hdfs.security.TestDelegationTokenForProxyUser |\r\n|   | hadoop.hdfs.server.namenode.TestAuditLogs |\r\n|   | hadoop.fs.TestSWebHdfsFileContextMainOperations |\r\n|   | hadoop.hdfs.TestInjectionForSimulatedStorage |\r\n|   | hadoop.hdfs.server.namenode.TestFsck |\r\n|   | hadoop.hdfs.TestErasureCodingPolicyWithSnapshot |\r\n|   | hadoop.fs.contract.hdfs.TestHDFSContractDelete |\r\n|   | hadoop.hdfs.TestLocalDFS |\r\n|   | hadoop.hdfs.server.namenode.TestListCorruptFileBlocks |\r\n|   | hadoop.hdfs.TestCrcCorruption |\r\n|   | hadoop.hdfs.TestListFilesInFileContext |\r\n|   | hadoop.hdfs.TestDataTransferProtocol |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestRandomOpsWithSnapshots |\r\n|   | hadoop.hdfs.TestConnCache |\r\n|   | hadoop.hdfs.server.namenode.TestStripedINodeFile |\r\n|   | hadoop.hdfs.TestGetFileChecksum |\r\n|   | hadoop.hdfs.server.blockmanagement.TestBlocksWithNotEnoughRacks |\r\n|   | hadoop.hdfs.TestFileAppend |\r\n|   | hadoop.hdfs.TestReservedRawPaths |\r\n|   | hadoop.hdfs.server.blockmanagement.TestPendingReconstruction |\r\n|   | hadoop.hdfs.TestReadStripedFileWithDecoding |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeRollingUpgrade |\r\n|   | hadoop.hdfs.TestDisableConnCache |\r\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestLazyPersistReplicaPlacement |\r\n|   | hadoop.hdfs.server.datanode.TestIncrementalBrVariations |\r\n|   | hadoop.hdfs.server.blockmanagement.TestBlockTokenWithDFSStriped |\r\n|   | hadoop.hdfs.TestParallelShortCircuitReadUnCached |\r\n|   | hadoop.hdfs.TestDecommission |\r\n|   | hadoop.fs.TestUrlStreamHandler |\r\n|   | hadoop.hdfs.server.namenode.TestNameNodeMXBean |\r\n|   | hadoop.hdfs.TestSeekBug |\r\n|   | hadoop.hdfs.server.namenode.TestReconstructStripedBlocks |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestSetQuotaWithSnapshot |\r\n|   | hadoop.fs.TestEnhancedByteBufferAccess |\r\n|   | hadoop.hdfs.TestDFSFinalize |\r\n|   | hadoop.hdfs.server.blockmanagement.TestReconstructStripedBlocksWithRackAwareness |\r\n|   | hadoop.hdfs.TestDFSMkdirs |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotRename |\r\n|   | hadoop.hdfs.TestDFSClientExcludedNodes |\r\n|   | hadoop.hdfs.server.datanode.TestTransferRbw |\r\n|   | hadoop.hdfs.server.namenode.TestAuditLogger |\r\n|   | hadoop.hdfs.TestRollingUpgrade |\r\n|   | hadoop.hdfs.server.namenode.TestFSImage |\r\n|   | hadoop.hdfs.server.balancer.TestBalancer |\r\n|   | hadoop.hdfs.server.datanode.TestNNHandlesBlockReportPerStorage |\r\n|   | hadoop.hdfs.server.namenode.TestReencryptionWithKMS |\r\n|   | hadoop.hdfs.TestSafeModeWithStripedFile |\r\n|   | hadoop.fs.TestHDFSFileContextMainOperations |\r\n|   | hadoop.hdfs.TestSafeMode |\r\n|   | hadoop.hdfs.protocolPB.TestPBHelper |\r\n|   | hadoop.hdfs.server.namenode.TestBackupNode |\r\n|   | hadoop.hdfs.server.namenode.ha.TestStandbyCheckpoints |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeHotSwapVolumes |\r\n|   | hadoop.hdfs.server.namenode.ha.TestStandbyBlockManagement |\r\n|   | hadoop.hdfs.TestReadStripedFileWithDecodingCorruptData |\r\n|   | hadoop.hdfs.TestWriteRead |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotFileLength |\r\n|   | hadoop.hdfs.TestWriteReadStripedFile |\r\n|   | hadoop.hdfs.TestErasureCodingMultipleRacks |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotDiffReport |\r\n|   | hadoop.hdfs.server.namenode.TestMetaSave |\r\n|   | hadoop.fs.contract.hdfs.TestHDFSContractAppend |\r\n|   | hadoop.hdfs.TestReconstructStripedFile |\r\n|   | hadoop.hdfs.TestDFSStripedOutputStream |\r\n|   | hadoop.hdfs.TestReadStripedFileWithDecodingDeletedData |\r\n|   | hadoop.hdfs.TestHdfsAdmin |\r\n|   | hadoop.fs.contract.hdfs.TestHDFSContractOpen |\r\n|   | hadoop.hdfs.server.namenode.TestAddStripedBlocks |\r\n|   | hadoop.hdfs.TestFileCreation |\r\n|   | hadoop.hdfs.TestErasureCodingPolicyWithSnapshotWithRandomECPolicy |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshot |\r\n|   | hadoop.hdfs.server.mover.TestStorageMover |\r\n|   | hadoop.hdfs.TestClientReportBadBlock |\r\n|   | hadoop.hdfs.TestDistributedFileSystem |\r\n|   | hadoop.hdfs.TestFileCorruption |\r\n|   | hadoop.hdfs.server.namenode.TestHDFSConcat |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeMXBean |\r\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestSpaceReservation |\r\n|   | hadoop.hdfs.web.TestWebHdfsFileSystemContract |\r\n|   | hadoop.hdfs.server.datanode.TestBlockReplacement |\r\n|   | hadoop.hdfs.client.impl.TestBlockReaderRemote |\r\n|   | hadoop.hdfs.TestClose |\r\n|   | hadoop.hdfs.server.namenode.metrics.TestNameNodeMetrics |\r\n|   | hadoop.hdfs.TestAbandonBlock |\r\n|   | hadoop.hdfs.TestDFSShell |\r\n|   | hadoop.hdfs.client.impl.TestBlockReaderLocal |\r\n|   | hadoop.hdfs.server.datanode.TestBlockRecovery |\r\n|   | hadoop.hdfs.TestDFSInputStream |\r\n|   | hadoop.hdfs.TestLeaseRecovery |\r\n|   | hadoop.hdfs.server.namenode.ha.TestSeveralNameNodes |\r\n|   | hadoop.hdfs.server.namenode.TestListOpenFiles |\r\n|   | hadoop.metrics2.sink.TestRollingFileSystemSinkWithSecureHdfs |\r\n|   | hadoop.hdfs.server.datanode.TestTriggerBlockReport |\r\n|   | hadoop.hdfs.TestTrashWithEncryptionZones |\r\n|   | hadoop.hdfs.server.diskbalancer.command.TestDiskBalancerCommand |\r\n|   | hadoop.hdfs.tools.TestDFSAdmin |\r\n|   | hadoop.hdfs.TestWriteBlockGetsBlockLengthHint |\r\n|   | hadoop.hdfs.TestLeaseRecoveryStriped |\r\n|   | hadoop.hdfs.server.blockmanagement.TestRBWBlockInvalidation |\r\n|   | hadoop.hdfs.server.namenode.ha.TestPendingCorruptDnMessages |\r\n|   | hadoop.fs.viewfs.TestViewFsHdfs |\r\n|   | hadoop.hdfs.TestFSInputChecker |\r\n|   | hadoop.fs.contract.hdfs.TestHDFSContractConcat |\r\n|   | hadoop.hdfs.server.namenode.TestFileLimit |\r\n|   | hadoop.fs.viewfs.TestViewFileSystemAtHdfsRoot |\r\n|   | hadoop.hdfs.server.balancer.TestBalancerWithMultipleNameNodes |\r\n|   | hadoop.hdfs.TestHDFSTrash |\r\n|   | hadoop.hdfs.server.datanode.TestCachingStrategy |\r\n|   | hadoop.hdfs.TestSmallBlock |\r\n|   | hadoop.hdfs.TestFileCreationDelete |\r\n|   | hadoop.hdfs.tools.TestWebHDFSStoragePolicyCommands |\r\n|   | hadoop.hdfs.TestReplication |\r\n|   | hadoop.hdfs.server.namenode.ha.TestHAAppend |\r\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestScrLazyPersistFiles |\r\n|   | hadoop.cli.TestAclCLI |\r\n|   | hadoop.fs.TestSymlinkHdfsFileContext |\r\n|   | hadoop.hdfs.TestSafeModeWithStripedFileWithRandomECPolicy |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestINodeFileUnderConstructionWithSnapshot |\r\n|   | hadoop.hdfs.TestFileAppendRestart |\r\n|   | hadoop.fs.TestSymlinkHdfsFileSystem |\r\n|   | hadoop.hdfs.TestFileAppend3 |\r\n|   | hadoop.hdfs.server.blockmanagement.TestProvidedStorageMap |\r\n|   | hadoop.hdfs.server.namenode.TestFileContextXAttr |\r\n|   | hadoop.hdfs.TestDatanodeReport |\r\n|   | hadoop.hdfs.TestMiniDFSCluster |\r\n|   | hadoop.hdfs.server.blockmanagement.TestBlockStatsMXBean |\r\n|   | hadoop.fs.TestUnbuffer |\r\n|   | hadoop.hdfs.TestPipelines |\r\n|   | hadoop.hdfs.TestErasureCodingPolicies |\r\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestProvidedImpl |\r\n|   | hadoop.hdfs.server.namenode.TestDecommissioningStatus |\r\n|   | hadoop.hdfs.tools.TestViewFSStoragePolicyCommands |\r\n|   | hadoop.hdfs.server.namenode.ha.TestHASafeMode |\r\n|   | hadoop.hdfs.web.TestWebHdfsWithMultipleNameNodes |\r\n|   | hadoop.hdfs.server.namenode.metrics.TestNNMetricFilesInGetListingOps |\r\n|   | hadoop.hdfs.server.namenode.TestNamenodeCapacityReport |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapshotReplication |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestSnapRootDescendantDiff |\r\n|   | hadoop.hdfs.server.namenode.ha.TestStandbyIsHot |\r\n|   | hadoop.hdfs.server.namenode.TestFileTruncate |\r\n|   | hadoop.hdfs.TestFSOutputSummer |\r\n|   | hadoop.hdfs.TestDistributedFileSystemWithECFile |\r\n|   | hadoop.hdfs.server.blockmanagement.TestSequentialBlockGroupId |\r\n|   | hadoop.hdfs.server.namenode.TestFSImageWithSnapshot |\r\n|   | hadoop.hdfs.TestFsShellPermission |\r\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestLazyWriter |\r\n|   | hadoop.hdfs.TestSecureEncryptionZoneWithKMS |\r\n|   | hadoop.hdfs.client.impl.TestBlockReaderFactory |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeVolumeFailureReporting |\r\n|   | hadoop.hdfs.server.namenode.ha.TestHAStateTransitions |\r\n|   | hadoop.hdfs.TestEncryptionZones |\r\n|   | hadoop.hdfs.server.namenode.TestAuditLoggerWithCommands |\r\n|   | hadoop.fs.TestResolveHdfsSymlink |\r\n|   | hadoop.hdfs.server.blockmanagement.TestUnderReplicatedBlocks |\r\n|   | hadoop.hdfs.client.impl.TestClientBlockVerification |\r\n|   | hadoop.hdfs.TestFileConcurrentReader |\r\n|   | hadoop.hdfs.server.blockmanagement.TestNodeCount |\r\n|   | hadoop.fs.viewfs.TestViewFsDefaultValue |\r\n|   | hadoop.hdfs.web.TestWebHDFSForHA |\r\n|   | hadoop.hdfs.TestMaintenanceState |\r\n|   | hadoop.hdfs.TestAppendDifferentChecksum |\r\n|   | hadoop.hdfs.TestEncryptionZonesWithHA |\r\n|   | hadoop.hdfs.server.namenode.TestCacheDirectives |\r\n|   | hadoop.fs.contract.hdfs.TestHDFSContractGetFileStatus |\r\n|   | hadoop.hdfs.server.namenode.TestUpgradeDomainBlockPlacementPolicy |\r\n|   | hadoop.hdfs.server.namenode.ha.TestHarFileSystemWithHA |\r\n|   | hadoop.hdfs.tools.offlineImageViewer.TestOfflineImageViewerForContentSummary |\r\n|   | hadoop.hdfs.TestFileStatus |\r\n|   | hadoop.hdfs.web.TestWebHDFSXAttr |\r\n|   | hadoop.hdfs.server.namenode.TestNameNodeXAttr |\r\n|   | hadoop.hdfs.server.datanode.TestHSync |\r\n|   | hadoop.hdfs.protocol.datatransfer.sasl.TestSaslDataTransfer |\r\n|   | hadoop.hdfs.TestTrashWithSecureEncryptionZones |\r\n|   | hadoop.fs.viewfs.TestViewFileSystemHdfs |\r\n|   | hadoop.hdfs.TestParallelUnixDomainRead |\r\n|   | hadoop.cli.TestAclCLIWithPosixAclInheritance |\r\n|   | hadoop.fs.viewfs.TestViewFileSystemLinkMergeSlash |\r\n|   | hadoop.hdfs.client.impl.TestBlockReaderLocalLegacy |\r\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestLazyPersistReplicaRecovery |\r\n|   | hadoop.hdfs.tools.TestStoragePolicyCommands |\r\n|   | hadoop.hdfs.TestDFSRemove |\r\n|   | hadoop.fs.viewfs.TestViewFsAtHdfsRoot |\r\n|   | hadoop.hdfs.TestDistributedFileSystemWithECFileWithRandomECPolicy |\r\n|   | hadoop.hdfs.server.datanode.TestNNHandlesCombinedBlockReport |\r\n|   | hadoop.hdfs.server.datanode.TestDeleteBlockPool |\r\n|   | hadoop.hdfs.TestDFSClientRetries |\r\n|   | hadoop.hdfs.server.blockmanagement.TestComputeInvalidateWork |\r\n|   | hadoop.metrics2.sink.TestRollingFileSystemSinkWithHdfs |\r\n|   | hadoop.hdfs.TestUnsetAndChangeDirectoryEcPolicy |\r\n|   | hadoop.hdfs.server.namenode.TestReencryption |\r\n|   | hadoop.hdfs.TestListFilesInDFS |\r\n|   | hadoop.hdfs.server.diskbalancer.TestDiskBalancerRPC |\r\n|   | hadoop.hdfs.server.namenode.TestAddOverReplicatedStripedBlocks |\r\n|   | hadoop.hdfs.server.namenode.TestHostsFiles |\r\n|   | hadoop.fs.viewfs.TestViewFileSystemWithTruncate |\r\n|   | hadoop.hdfs.TestFileChecksum |\r\n|   | hadoop.fs.contract.hdfs.TestHDFSContractCreate |\r\n|   | hadoop.fs.permission.TestStickyBit |\r\n|   | hadoop.hdfs.web.TestFSMainOperationsWebHdfs |\r\n|   | hadoop.hdfs.TestEncryptionZonesWithKMS |\r\n|   | hadoop.fs.TestSymlinkHdfsDisable |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestOpenFilesWithSnapshot |\r\n|   | hadoop.hdfs.TestDFSRename |\r\n|   | hadoop.hdfs.server.balancer.TestBalancerRPCDelay |\r\n|   | hadoop.hdfs.server.namenode.TestDeleteRace |\r\n|   | hadoop.hdfs.TestLease |\r\n|   | hadoop.fs.viewfs.TestViewFileSystemLinkFallback |\r\n|   | hadoop.hdfs.TestLargeBlock |\r\n|   | hadoop.hdfs.server.namenode.TestFsckWithMultipleNameNodes |\r\n|   | hadoop.fs.contract.hdfs.TestHDFSContractPathHandle |\r\n|   | hadoop.hdfs.security.TestDelegationToken |\r\n|   | hadoop.hdfs.TestClientProtocolForPipelineRecovery |\r\n|   | hadoop.hdfs.server.datanode.TestDataXceiverBackwardsCompat |\r\n|   | hadoop.security.TestPermission |\r\n|   | hadoop.hdfs.server.datanode.TestDirectoryScanner |\r\n|   | hadoop.hdfs.web.TestWebHDFS |\r\n|   | hadoop.fs.contract.hdfs.TestHDFSContractSeek |\r\n|   | hadoop.hdfs.server.datanode.fsdataset.impl.TestDatanodeRestart |\r\n|   | hadoop.fs.shell.TestHdfsTextCommand |\r\n|   | hadoop.hdfs.server.namenode.snapshot.TestGetContentSummaryWithSnapshot |\r\n|   | hadoop.hdfs.TestBlockMissingException |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:abb62dd |\r\n| JIRA Issue | HDFS-13601 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12924441/HDFS-13601.001.patch |\r\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux b88317be6d79 3.13.0-143-generic #192-Ubuntu SMP Tue Feb 27 10:45:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / 5e88126 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_162 |\r\n| findbugs | v3.1.0-RC1 |\r\n| checkstyle | https://builds.apache.org/job/PreCommit-HDFS-Build/24271/artifact/out/diff-checkstyle-hadoop-hdfs-project.txt |\r\n| findbugs | https://builds.apache.org/job/PreCommit-HDFS-Build/24271/artifact/out/new-findbugs-hadoop-hdfs-project_hadoop-hdfs-client.html |\r\n| findbugs | https://builds.apache.org/job/PreCommit-HDFS-Build/24271/artifact/out/new-findbugs-hadoop-hdfs-project_hadoop-hdfs.html |\r\n| unit | https://builds.apache.org/job/PreCommit-HDFS-Build/24271/artifact/out/patch-unit-hadoop-hdfs-project_hadoop-hdfs.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/24271/testReport/ |\r\n| asflicense | https://builds.apache.org/job/PreCommit-HDFS-Build/24271/artifact/out/patch-asflicense-problems.txt |\r\n| Max. process+thread count | 2368 (vs. ulimit of 10000) |\r\n| modules | C: hadoop-hdfs-project/hadoop-hdfs-client hadoop-hdfs-project/hadoop-hdfs U: hadoop-hdfs-project |\r\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/24271/console |\r\n| Powered by | Apache Yetus 0.8.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2018-05-22T02:35:11.089+0000","updated":"2018-05-22T02:35:11.089+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160853/comment/16483545","id":"16483545","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaochen","name":"xiaochen","key":"xiaochen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=xiaochen&avatarId=24893","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=xiaochen&avatarId=24893","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=xiaochen&avatarId=24893","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=xiaochen&avatarId=24893"},"displayName":"Xiao Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks Andrew for the work here.\r\n\r\nLooks pretty good to me overall. Some minors:\r\n - {{DatanodeID}} constructor: it seems a {{DatanodeID(String datanodeUuid, DatanodeID from)}} overload can still be used so no changes to TestComputeInvalidateWork / DatanodeRegistration necessary\r\n - Can we make the var name {{fixedBytestringCache}} {{bytestringCache}} to be camel case (ByteString instead of Bytestring)? At one point I saw that as 'by test ring' and get myself confused for a nanosecond. :)\r\n - Do you think it's helpful to add some comments in DatanodeId to explain the perf motivation of saving the ByteString's?\r\n\r\nFor the extra memory increase, since this only applies to a few fields which should have a small set of values, it should be ok. (linux user/group names have max length of 32 chars, bpid/kind/service are smaller).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaochen","name":"xiaochen","key":"xiaochen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=xiaochen&avatarId=24893","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=xiaochen&avatarId=24893","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=xiaochen&avatarId=24893","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=xiaochen&avatarId=24893"},"displayName":"Xiao Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-05-22T06:12:15.475+0000","updated":"2018-05-22T06:12:15.475+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160853/comment/16483607","id":"16483607","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 35s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 11s{color} | {color:blue} Maven dependency ordering for branch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 27m 58s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 17m 51s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  1m  2s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m 48s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 12m 43s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  3m 51s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 22s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 10s{color} | {color:blue} Maven dependency ordering for patch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  2m  3s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 17m 54s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 17m 54s{color} | {color:green} the patch passed {color} |\r\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  1m  1s{color} | {color:orange} hadoop-hdfs-project: The patch generated 1 new + 51 unchanged - 0 fixed = 52 total (was 51) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m 44s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 11m 16s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:red}-1{color} | {color:red} findbugs {color} | {color:red}  2m  2s{color} | {color:red} hadoop-hdfs-project/hadoop-hdfs-client generated 2 new + 0 unchanged - 0 fixed = 2 total (was 0) {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 23s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} unit {color} | {color:green}  1m 42s{color} | {color:green} hadoop-hdfs-client in the patch passed. {color} |\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red}122m  8s{color} | {color:red} hadoop-hdfs in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 40s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black}231m  7s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| FindBugs | module:hadoop-hdfs-project/hadoop-hdfs-client |\r\n|  |  Sequence of calls to java.util.concurrent.ConcurrentHashMap may not be atomic in org.apache.hadoop.hdfs.protocolPB.PBHelperClient.getFixedByteString(String)  At PBHelperClient.java:may not be atomic in org.apache.hadoop.hdfs.protocolPB.PBHelperClient.getFixedByteString(String)  At PBHelperClient.java:[line 259] |\r\n|  |  Sequence of calls to java.util.concurrent.ConcurrentHashMap may not be atomic in org.apache.hadoop.hdfs.protocolPB.PBHelperClient.getFixedByteString(Text)  At PBHelperClient.java:may not be atomic in org.apache.hadoop.hdfs.protocolPB.PBHelperClient.getFixedByteString(Text)  At PBHelperClient.java:[line 250] |\r\n| Failed junit tests | hadoop.hdfs.tools.TestDelegationTokenFetcher |\r\n|   | hadoop.hdfs.server.namenode.ha.TestDelegationTokensWithHA |\r\n|   | hadoop.hdfs.server.namenode.ha.TestFailoverWithBlockTokensEnabled |\r\n|   | hadoop.hdfs.server.namenode.TestNNThroughputBenchmark |\r\n|   | hadoop.hdfs.server.namenode.ha.TestRetryCacheWithHA |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeVolumeFailure |\r\n|   | hadoop.hdfs.TestSafeModeWithStripedFile |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeVolumeFailureReporting |\r\n|   | hadoop.hdfs.server.namenode.TestAuditLoggerWithCommands |\r\n|   | hadoop.fs.TestResolveHdfsSymlink |\r\n|   | hadoop.fs.viewfs.TestViewFileSystemLinkFallback |\r\n|   | hadoop.hdfs.security.TestDelegationToken |\r\n|   | hadoop.hdfs.server.datanode.TestDataXceiverBackwardsCompat |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:abb62dd |\r\n| JIRA Issue | HDFS-13601 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12924471/HDFS-13601.002.patch |\r\n| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux 2def25daff77 3.13.0-143-generic #192-Ubuntu SMP Tue Feb 27 10:45:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / 5e88126 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_162 |\r\n| findbugs | v3.1.0-RC1 |\r\n| checkstyle | https://builds.apache.org/job/PreCommit-HDFS-Build/24273/artifact/out/diff-checkstyle-hadoop-hdfs-project.txt |\r\n| findbugs | https://builds.apache.org/job/PreCommit-HDFS-Build/24273/artifact/out/new-findbugs-hadoop-hdfs-project_hadoop-hdfs-client.html |\r\n| unit | https://builds.apache.org/job/PreCommit-HDFS-Build/24273/artifact/out/patch-unit-hadoop-hdfs-project_hadoop-hdfs.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/24273/testReport/ |\r\n| Max. process+thread count | 2987 (vs. ulimit of 10000) |\r\n| modules | C: hadoop-hdfs-project/hadoop-hdfs-client hadoop-hdfs-project/hadoop-hdfs U: hadoop-hdfs-project |\r\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/24273/console |\r\n| Powered by | Apache Yetus 0.8.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2018-05-22T07:49:29.777+0000","updated":"2018-05-22T07:49:29.777+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160853/comment/16486537","id":"16486537","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 20s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 33s{color} | {color:blue} Maven dependency ordering for branch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 26m 48s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 18m 42s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  1m  5s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  2m  1s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 14m 34s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  4m 37s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 26s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 11s{color} | {color:blue} Maven dependency ordering for patch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  2m 11s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 19m 17s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 19m 17s{color} | {color:green} the patch passed {color} |\r\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  1m  8s{color} | {color:orange} hadoop-hdfs-project: The patch generated 4 new + 45 unchanged - 2 fixed = 49 total (was 47) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  2m  4s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} xml {color} | {color:green}  0m  3s{color} | {color:green} The patch has no ill-formed XML file. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 11m 46s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:red}-1{color} | {color:red} findbugs {color} | {color:red}  1m 41s{color} | {color:red} hadoop-hdfs-project/hadoop-hdfs-client generated 1 new + 0 unchanged - 0 fixed = 1 total (was 0) {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 11s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} unit {color} | {color:green}  1m 29s{color} | {color:green} hadoop-hdfs-client in the patch passed. {color} |\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 85m 25s{color} | {color:red} hadoop-hdfs in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 29s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black}198m  1s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| FindBugs | module:hadoop-hdfs-project/hadoop-hdfs-client |\r\n|  |  Found reliance on default encoding in org.apache.hadoop.hdfs.protocolPB.PBHelperClient.getFixedByteString(Text):in org.apache.hadoop.hdfs.protocolPB.PBHelperClient.getFixedByteString(Text): String.getBytes()  At PBHelperClient.java:[line 249] |\r\n| Failed junit tests | hadoop.hdfs.qjournal.server.TestJournalNodeSync |\r\n|   | hadoop.hdfs.server.datanode.TestDataXceiverBackwardsCompat |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeVolumeFailureReporting |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:abb62dd |\r\n| JIRA Issue | HDFS-13601 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12924625/HDFS-13601.003.patch |\r\n| Optional Tests |  asflicense  xml  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux 09a7e5d1d8b8 3.13.0-139-generic #188-Ubuntu SMP Tue Jan 9 14:43:09 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / 43be9ab |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_162 |\r\n| findbugs | v3.1.0-RC1 |\r\n| checkstyle | https://builds.apache.org/job/PreCommit-HDFS-Build/24279/artifact/out/diff-checkstyle-hadoop-hdfs-project.txt |\r\n| findbugs | https://builds.apache.org/job/PreCommit-HDFS-Build/24279/artifact/out/new-findbugs-hadoop-hdfs-project_hadoop-hdfs-client.html |\r\n| unit | https://builds.apache.org/job/PreCommit-HDFS-Build/24279/artifact/out/patch-unit-hadoop-hdfs-project_hadoop-hdfs.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/24279/testReport/ |\r\n| Max. process+thread count | 4243 (vs. ulimit of 10000) |\r\n| modules | C: hadoop-hdfs-project/hadoop-hdfs-client hadoop-hdfs-project/hadoop-hdfs U: hadoop-hdfs-project |\r\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/24279/console |\r\n| Powered by | Apache Yetus 0.8.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2018-05-23T01:00:09.648+0000","updated":"2018-05-23T01:00:09.648+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160853/comment/16486602","id":"16486602","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"body":"I think this latest rev will pass precommit, and also incorporates Xiao's review comments.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-05-23T02:11:10.176+0000","updated":"2018-05-23T02:11:10.176+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160853/comment/16486759","id":"16486759","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"body":"| (x) *{color:red}-1 overall{color}* |\r\n\\\\\r\n\\\\\r\n|| Vote || Subsystem || Runtime || Comment ||\r\n| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 36s{color} | {color:blue} Docker mode activated. {color} |\r\n|| || || || {color:brown} Prechecks {color} ||\r\n| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |\r\n| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |\r\n|| || || || {color:brown} trunk Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 34s{color} | {color:blue} Maven dependency ordering for branch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 28m 27s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 20m 34s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  1m 17s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  2m 27s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 15m 33s{color} | {color:green} branch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  4m 23s{color} | {color:green} trunk passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 31s{color} | {color:green} trunk passed {color} |\r\n|| || || || {color:brown} Patch Compile Tests {color} ||\r\n| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 13s{color} | {color:blue} Maven dependency ordering for patch {color} |\r\n| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  2m 10s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} compile {color} | {color:green} 20m 57s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javac {color} | {color:green} 20m 57s{color} | {color:green} the patch passed {color} |\r\n| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  1m 12s{color} | {color:orange} hadoop-hdfs-project: The patch generated 4 new + 45 unchanged - 2 fixed = 49 total (was 47) {color} |\r\n| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  2m 12s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |\r\n| {color:green}+1{color} | {color:green} xml {color} | {color:green}  0m  2s{color} | {color:green} The patch has no ill-formed XML file. {color} |\r\n| {color:green}+1{color} | {color:green} shadedclient {color} | {color:green} 12m 21s{color} | {color:green} patch has no errors when building and testing our client artifacts. {color} |\r\n| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  4m  2s{color} | {color:green} the patch passed {color} |\r\n| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  1m 14s{color} | {color:green} the patch passed {color} |\r\n|| || || || {color:brown} Other Tests {color} ||\r\n| {color:green}+1{color} | {color:green} unit {color} | {color:green}  1m 30s{color} | {color:green} hadoop-hdfs-client in the patch passed. {color} |\r\n| {color:red}-1{color} | {color:red} unit {color} | {color:red} 98m 48s{color} | {color:red} hadoop-hdfs in the patch failed. {color} |\r\n| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 29s{color} | {color:green} The patch does not generate ASF License warnings. {color} |\r\n| {color:black}{color} | {color:black} {color} | {color:black}218m 57s{color} | {color:black} {color} |\r\n\\\\\r\n\\\\\r\n|| Reason || Tests ||\r\n| Failed junit tests | hadoop.hdfs.server.namenode.TestNameNodeMetadataConsistency |\r\n|   | hadoop.hdfs.server.datanode.TestDataNodeVolumeFailure |\r\n|   | hadoop.hdfs.TestReconstructStripedFile |\r\n|   | hadoop.hdfs.client.impl.TestBlockReaderLocal |\r\n|   | hadoop.hdfs.server.namenode.ha.TestHASafeMode |\r\n\\\\\r\n\\\\\r\n|| Subsystem || Report/Notes ||\r\n| Docker | Client=17.05.0-ce Server=17.05.0-ce Image:yetus/hadoop:abb62dd |\r\n| JIRA Issue | HDFS-13601 |\r\n| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12924676/HDFS-13601.004.patch |\r\n| Optional Tests |  asflicense  xml  compile  javac  javadoc  mvninstall  mvnsite  unit  shadedclient  findbugs  checkstyle  |\r\n| uname | Linux de693d0cae51 3.13.0-143-generic #192-Ubuntu SMP Tue Feb 27 10:45:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux |\r\n| Build tool | maven |\r\n| Personality | /testptch/patchprocess/precommit/personality/provided.sh |\r\n| git revision | trunk / 68c7fd8 |\r\n| maven | version: Apache Maven 3.3.9 |\r\n| Default Java | 1.8.0_162 |\r\n| findbugs | v3.1.0-RC1 |\r\n| checkstyle | https://builds.apache.org/job/PreCommit-HDFS-Build/24283/artifact/out/diff-checkstyle-hadoop-hdfs-project.txt |\r\n| unit | https://builds.apache.org/job/PreCommit-HDFS-Build/24283/artifact/out/patch-unit-hadoop-hdfs-project_hadoop-hdfs.txt |\r\n|  Test Results | https://builds.apache.org/job/PreCommit-HDFS-Build/24283/testReport/ |\r\n| Max. process+thread count | 3063 (vs. ulimit of 10000) |\r\n| modules | C: hadoop-hdfs-project/hadoop-hdfs-client hadoop-hdfs-project/hadoop-hdfs U: hadoop-hdfs-project |\r\n| Console output | https://builds.apache.org/job/PreCommit-HDFS-Build/24283/console |\r\n| Powered by | Apache Yetus 0.8.0-SNAPSHOT   http://yetus.apache.org |\r\n\r\n\r\nThis message was automatically generated.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=genericqa","name":"genericqa","key":"genericqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=genericqa&avatarId=33630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=genericqa&avatarId=33630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=genericqa&avatarId=33630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=genericqa&avatarId=33630"},"displayName":"genericqa","active":true,"timeZone":"Etc/UTC"},"created":"2018-05-23T05:59:55.565+0000","updated":"2018-05-23T05:59:55.565+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160853/comment/16486766","id":"16486766","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaochen","name":"xiaochen","key":"xiaochen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=xiaochen&avatarId=24893","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=xiaochen&avatarId=24893","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=xiaochen&avatarId=24893","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=xiaochen&avatarId=24893"},"displayName":"Xiao Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks Andrew.\r\n\r\n+1 pending:\r\nI think poolId could be null ({{ExtendedBlock}} handles null at least), in which case {{PBHelperClient#getFixedByteString}} may NPE.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaochen","name":"xiaochen","key":"xiaochen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=xiaochen&avatarId=24893","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=xiaochen&avatarId=24893","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=xiaochen&avatarId=24893","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=xiaochen&avatarId=24893"},"displayName":"Xiao Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-05-23T06:11:10.690+0000","updated":"2018-05-23T06:11:10.690+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160853/comment/16486777","id":"16486777","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for reviewing Xiao! I think this current behavior is actually no different than the existing PBHelperClient, since it calls \\{{setPoolId(b.getBlockPoolId())}} without a null check, and setPoolId will throw an NPE if the value is null. I can add the null check if you want, but since the behavior is the same as the existing code I think it's okay.\r\n\r\nI also ran the failed tests locally and they passed, so I think they're flakes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-05-23T06:20:23.639+0000","updated":"2018-05-23T06:20:23.639+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160853/comment/16486786","id":"16486786","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaochen","name":"xiaochen","key":"xiaochen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=xiaochen&avatarId=24893","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=xiaochen&avatarId=24893","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=xiaochen&avatarId=24893","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=xiaochen&avatarId=24893"},"displayName":"Xiao Chen","active":true,"timeZone":"America/Los_Angeles"},"body":"{quote}setPoolId will throw an NPE if the value is null\r\n{quote}\r\nI'm okay with patch 4 as-is then. :) ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaochen","name":"xiaochen","key":"xiaochen","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=xiaochen&avatarId=24893","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=xiaochen&avatarId=24893","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=xiaochen&avatarId=24893","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=xiaochen&avatarId=24893"},"displayName":"Xiao Chen","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-05-23T06:28:58.657+0000","updated":"2018-05-23T06:28:58.657+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160853/comment/16486813","id":"16486813","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks Xiao! I committed this to trunk, branch-3.1, branch-3.0, and branch-2. I think it's safe for the older branch-2's also if we want to do that. LMK.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2018-05-23T07:02:39.943+0000","updated":"2018-05-23T07:02:39.943+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13160853/comment/16486837","id":"16486837","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #14260 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/14260/])\nHDFS-13601. Optimize ByteString conversions in PBHelper. (wang: rev 1d2640b6132e8308c07476badd2d1482be68a298)\n* (edit) hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/protocol/DatanodeID.java\n* (edit) hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/protocolPB/PBHelperClient.java\n* (edit) hadoop-hdfs-project/hadoop-hdfs-client/dev-support/findbugsExcludeFile.xml\n* (edit) hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/TestDataXceiverBackwardsCompat.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2018-05-23T07:21:17.064+0000","updated":"2018-05-23T07:21:17.064+0000"}],"maxResults":12,"total":12,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-13601/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i3tz27:"}}