{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12625389","self":"https://issues.apache.org/jira/rest/api/2/issue/12625389","key":"HDFS-4344","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323274","id":"12323274","description":"2.0.3-alpha release","name":"2.0.3-alpha","archived":false,"released":true,"releaseDate":"2013-02-14"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-01-22T20:55:41.869+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Feb 05 14:05:32 UTC 2013","customfield_12310420":"301931","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_1149288016_*|*_1_*:*_1_*:*_2215742592_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-02-05T04:10:41.160+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-4344/watchers","watchCount":7,"isWatching":false},"created":"2012-12-28T05:26:50.626+0000","customfield_12310192":null,"customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12322472","id":"12322472","description":"2.0.2-alpha release","name":"2.0.2-alpha","archived":false,"released":true,"releaseDate":"2012-10-09"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335732","id":"12335732","description":"3.0.0-alpha1 release","name":"3.0.0-alpha1","archived":false,"released":true,"releaseDate":"2016-09-03"}],"issuelinks":[{"id":"12363149","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12363149","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12607487","key":"HDFS-3934","self":"https://issues.apache.org/jira/rest/api/2/issue/12607487","fields":{"summary":"duplicative dfs_hosts entries handled wrong","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-05-12T18:16:35.871+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312926","id":"12312926","name":"namenode"}],"timeoriginalestimate":null,"description":"dfs.hosts and dfs.hosts.exclude files cannot contain a port number of host.\nIf contained, and access a dfshealth.jsp on a webui, we got a NumberFormatException.\n\nHow to reproduce:\n{noformat}\n$ cat /tmp/include.txt\nsalve-host1:9999\n\n$ cat /tmp/exclude.txt\nslave-host1:9999\n\n$ hdfs namenode -Ddfs.hosts=/tmp/include.txt -Ddfs.hosts.exclude=/tmp/exclude.txt\n{noformat}\n\nError:\n{noformat}\nProblem accessing /dfshealth.jsp. Reason:\n\n    For input string: \":9999\"\nCaused by:\n\njava.lang.NumberFormatException: For input string: \":9999\"\n     at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)\n     at java.lang.Integer.parseInt(Integer.java:449)\n     at java.lang.Integer.valueOf(Integer.java:554)\n     at org.apache.hadoop.hdfs.server.blockmanagement.DatanodeManager.parseDNFromHostsEntry(DatanodeManager.java:970)\n     at org.apache.hadoop.hdfs.server.blockmanagement.DatanodeManager.getDatanodeListForReport(DatanodeManager.java:1039)\n     at org.apache.hadoop.hdfs.server.blockmanagement.DatanodeManager.fetchDatanodes(DatanodeManager.java:892)\n     at org.apache.hadoop.hdfs.server.namenode.NamenodeJspHelper$HealthJsp.generateHealthReport(NamenodeJspHelper.java:288)\n     at org.apache.hadoop.hdfs.server.namenode.dfshealth_jsp._jspService(dfshealth_jsp.java:109)\n     at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)\n     at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)\n     at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)\n     at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1221)\n     at org.apache.hadoop.http.lib.StaticUserWebFilter$StaticUserFilter.doFilter(StaticUserWebFilter.java:109)\n     at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)\n     at org.apache.hadoop.http.HttpServer$QuotingInputFilter.doFilter(HttpServer.java:1071)\n     at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)\n     at org.apache.hadoop.http.NoCacheFilter.doFilter(NoCacheFilter.java:45)\n     at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)\n     at org.apache.hadoop.http.NoCacheFilter.doFilter(NoCacheFilter.java:45)\n     at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)\n     at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)\n     at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)\n     at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)\n     at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)\n     at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)\n     at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)\n     at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)\n     at org.mortbay.jetty.Server.handle(Server.java:326)\n     at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)\n     at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928)\n     at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)\n     at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)\n     at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)\n     at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)\n     at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)\n{noformat}\n\nIt's probably because DatanodeManager.parseDNFromHostsEntry() doesn't parse host:port string correctly.\n\n{noformat}\n  private DatanodeID parseDNFromHostsEntry(String hostLine) {\n    DatanodeID dnId;\n    String hostStr;\n    int port;\n    int idx = hostLine.indexOf(':');\n\n    if (-1 == idx) {\n      hostStr = hostLine;\n      port = DFSConfigKeys.DFS_DATANODE_DEFAULT_PORT;\n    } else {\n      hostStr = hostLine.substring(0, idx);\n      port = Integer.valueOf(hostLine.substring(idx)); // <- HERE!!\n    }\n{noformat}\n\ncorrect it as the below.\n\n{noformat}\nport = Integer.valueOf(hostLine.substring(idx + 1));\n{noformat}\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12566011","id":"12566011","filename":"hdfs4344.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-01-22T20:55:41.865+0000","size":8452,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12566011/hdfs4344.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12566448","id":"12566448","filename":"hdfs4344-1.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-01-25T02:39:32.791+0000","size":8213,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12566448/hdfs4344-1.txt"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"248559","customfield_12312823":null,"summary":"dfshealth.jsp throws NumberFormatException when dfs.hosts/dfs.hosts.exclude includes port number","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tamtam180","name":"tamtam180","key":"tamtam180","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tamtam180&avatarId=13540","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tamtam180&avatarId=13540","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tamtam180&avatarId=13540","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tamtam180&avatarId=13540"},"displayName":"tamtam180","active":true,"timeZone":"Asia/Tokyo"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tamtam180","name":"tamtam180","key":"tamtam180","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tamtam180&avatarId=13540","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tamtam180&avatarId=13540","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tamtam180&avatarId=13540","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tamtam180&avatarId=13540"},"displayName":"tamtam180","active":true,"timeZone":"Asia/Tokyo"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12625389/comment/13540328","id":"13540328","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tamtam180","name":"tamtam180","key":"tamtam180","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tamtam180&avatarId=13540","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tamtam180&avatarId=13540","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tamtam180&avatarId=13540","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tamtam180&avatarId=13540"},"displayName":"tamtam180","active":true,"timeZone":"Asia/Tokyo"},"body":"\nfollow-up information:\nAlso dfsadmin -report command raised error.\n\n{noformat}\n$ hdfs dfsadmin -report\nConfigured Capacity: 161714774016 (150.61 GB)\nPresent Capacity: 41448161280 (38.6 GB)\nDFS Remaining: 41447890944 (38.6 GB)\nDFS Used: 270336 (264 KB)\nDFS Used%: 0%\nUnder replicated blocks: 0\nBlocks with corrupt replicas: 0\nMissing blocks: 0\n\n-------------------------------------------------\nreport: For input string: \":9999\"\n{noformat}\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tamtam180","name":"tamtam180","key":"tamtam180","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tamtam180&avatarId=13540","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tamtam180&avatarId=13540","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tamtam180&avatarId=13540","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tamtam180&avatarId=13540"},"displayName":"tamtam180","active":true,"timeZone":"Asia/Tokyo"},"created":"2012-12-28T05:42:54.666+0000","updated":"2012-12-28T05:42:54.666+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12625389/comment/13560010","id":"13560010","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"body":"Fix bug, add tests and some new asserts.\n\n - DatanodeManager.java: correctly parse int from \"hostname:port\"\n - DFSTestUtil: assert, rather than returning empty result, when a HTTP request returns a non-200 result.\n - TestHostsFiles: new test file, currently containing just one test verifying that this bug is fixed.\n\nPasses tests, and testHostsExcludeDfshealthJsp fails without the parsing fix.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-01-22T20:55:41.869+0000","updated":"2013-01-22T20:55:41.869+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12625389/comment/13562038","id":"13562038","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"body":"Patch looks pretty good to me. test-patch hasn't run successfully yet, but it looks like that's due to some environmental issue on hadoop6. I've just kicked jenkins again, and I'm hopeful that [this build|https://builds.apache.org/view/G-L/view/Hadoop/job/PreCommit-HDFS-Build/3881/] will complete successfully.\n\nA few comments:\n# Most of the constants at the top of TestHostsFiles seem to be unused. Perhaps this was copied from somewhere else?\n# Is it actually necessary to configure multiple racks, write a file, decommission a host, etc. to trigger this bug? From my understanding of the bug, I thought just the mere presence of the port in the file would trigger an error on the NN web UI.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-01-24T22:03:09.747+0000","updated":"2013-01-24T22:03:09.747+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12625389/comment/13562100","id":"13562100","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:green}+1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12566011/hdfs4344.txt\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 2 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-hdfs-project/hadoop-hdfs.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/3881//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/3881//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-01-24T22:58:20.598+0000","updated":"2013-01-24T22:58:20.598+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12625389/comment/13562224","id":"13562224","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. Most of the constants at the top of TestHostsFiles seem to be unused. Perhaps this was copied from somewhere else?\n\nYes, it was copied from another test, and I looked for eclipse squiggles but since the constants are public Eclipse didn't mark them as unused. Thanks for noticing!\n\nbq. Is it actually necessary to configure multiple racks, write a file, decommission a host, etc. to trigger this bug? From my understanding of the bug, I thought just the mere presence of the port in the file would trigger an error on the NN web UI.\n\nJust the trivial setup doesn't trigger the failure because we don't hit the parsing code in the simple case. We need a DN that has checked in and then failed to check in, if I remember the repro conditions correctly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-01-25T00:48:27.845+0000","updated":"2013-01-25T00:48:27.845+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12625389/comment/13562303","id":"13562303","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"body":"Remove unused variables per ATM.  I found that the test complexity is difficult to remove without breaking the reproduction.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=adi2","name":"adi2","key":"adi2","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andy Isaacson","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-01-25T02:39:32.795+0000","updated":"2013-01-25T02:39:32.795+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12625389/comment/13562357","id":"13562357","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:green}+1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12566448/hdfs4344-1.txt\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 2 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-hdfs-project/hadoop-hdfs.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/3882//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/3882//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-01-25T04:16:46.409+0000","updated":"2013-01-25T04:16:46.409+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12625389/comment/13571014","id":"13571014","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"body":"+1, the patch looks good to me. I'm going to commit this momentarily.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-05T04:03:50.722+0000","updated":"2013-02-05T04:03:50.722+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12625389/comment/13571018","id":"13571018","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"body":"I've just committed this to trunk and branch-2.\n\nThanks a lot for the contribution, Andy.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-05T04:10:41.199+0000","updated":"2013-02-05T04:10:41.199+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12625389/comment/13571022","id":"13571022","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-trunk-Commit #3322 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/3322/])\n    HDFS-4344. dfshealth.jsp throws NumberFormatException when dfs.hosts/dfs.hosts.exclude includes port number. Contributed by Andy Isaacson. (Revision 1442465)\n\n     Result = SUCCESS\natm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1442465\nFiles : \n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/DatanodeManager.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/DFSTestUtil.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/namenode/TestHostsFiles.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-02-05T04:14:43.618+0000","updated":"2013-02-05T04:14:43.618+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12625389/comment/13571216","id":"13571216","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Yarn-trunk #118 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/118/])\n    HDFS-4344. dfshealth.jsp throws NumberFormatException when dfs.hosts/dfs.hosts.exclude includes port number. Contributed by Andy Isaacson. (Revision 1442465)\n\n     Result = FAILURE\natm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1442465\nFiles : \n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/DatanodeManager.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/DFSTestUtil.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/namenode/TestHostsFiles.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-02-05T10:40:16.228+0000","updated":"2013-02-05T10:40:16.228+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12625389/comment/13571272","id":"13571272","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Hdfs-trunk #1307 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1307/])\n    HDFS-4344. dfshealth.jsp throws NumberFormatException when dfs.hosts/dfs.hosts.exclude includes port number. Contributed by Andy Isaacson. (Revision 1442465)\n\n     Result = FAILURE\natm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1442465\nFiles : \n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/DatanodeManager.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/DFSTestUtil.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/namenode/TestHostsFiles.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-02-05T12:54:55.999+0000","updated":"2013-02-05T12:54:55.999+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12625389/comment/13571311","id":"13571311","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"Integrated in Hadoop-Mapreduce-trunk #1335 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1335/])\n    HDFS-4344. dfshealth.jsp throws NumberFormatException when dfs.hosts/dfs.hosts.exclude includes port number. Contributed by Andy Isaacson. (Revision 1442465)\n\n     Result = SUCCESS\natm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1442465\nFiles : \n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/DatanodeManager.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/DFSTestUtil.java\n* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/namenode/TestHostsFiles.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2013-02-05T14:05:32.495+0000","updated":"2013-02-05T14:05:32.495+0000"}],"maxResults":13,"total":13,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-4344/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i16xhz:"}}