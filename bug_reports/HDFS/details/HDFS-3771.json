{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12602034","self":"https://issues.apache.org/jira/rest/api/2/issue/12602034","key":"HDFS-3771","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2012-08-07T17:01:44.040+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Apr 02 19:30:13 UTC 2013","customfield_12310420":"252711","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_20573721494_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-04-02T19:30:13.097+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-3771/watchers","watchCount":9,"isWatching":false},"created":"2012-08-07T16:34:51.649+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320052","id":"12320052","description":"0.23.3","name":"0.23.3","archived":false,"released":true,"releaseDate":"2012-09-20"}],"issuelinks":[{"id":"12359799","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12359799","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12539319","key":"HDFS-2824","self":"https://issues.apache.org/jira/rest/api/2/issue/12539319","fields":{"summary":"HA: failover does not succeed if prior NN died just after creating an edit log segment","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}}],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-04-02T19:30:13.140+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312926","id":"12312926","name":"namenode"}],"timeoriginalestimate":null,"description":"Our 0.23.3 nightly HDFS regression suite encountered a particularly nasty issue recently, which resulted in the cluster's default Namenode being unable to restart, this was on a 20 node Federated cluster with security. The cause appears to be that the NN was just starting to roll its edit log when a shutdown occurred, the shutdown was intentional to restart the cluster as part of an automated test.\n\nThe tests that were running do not appear to be the issue in themselves, the cluster was just wrapping up an adminReport subset and this failure case has not reproduce so far, nor was it failing previously. It looks like a chance occurrence of sending the shutdown just as the edit log roll was begun.\n\nFrom the NN log, the following sequence is noted:\n\n1. an InvalidateBlocks operation had completed\n2. FSNamesystem: Roll Edit Log from [Secondary Namenode IPaddr]\n3. FSEditLog: Ending log segment 23963\n4. FSEditLog: Starting log segment at 23967\n4. NameNode: SHUTDOWN_MSG\n=> the NN shuts down and then is restarted...\n5. FSImageTransactionalStorageInspector: Logs beginning at txid 23967 were are all in-progress\n6. FSImageTransactionalStorageInspector: Marking log at /grid/[PATH]/edits_inprogress_0000000000000023967 as corrupt since it has no transactions in it.\n7. NameNode: Exception in namenode join [main]java.lang.IllegalStateException: No non-corrupt logs for txid 23967\n=> NN start attempts continue to cycle trying to restart but can't, failing on the same exception due to lack of non-corrupt edit logs\n\nIf observations are correct and issue is from shutdown happening as edit logs are rolling, does the NN have an equivalent to the conventional fs 'sync' blocking action that should be called, or perhaps has a timing hole?","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"74420","customfield_12312823":null,"summary":"Namenode can't restart due to corrupt edit logs, timing issue with shutdown and edit log rolling","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patwhitey2007","name":"patwhitey2007","key":"patwhitey2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"patrick white","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patwhitey2007","name":"patwhitey2007","key":"patwhitey2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"patrick white","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"QE, 20 node Federated cluster with 3 NNs and 15 DNs, using Kerberos based security","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13430432","id":"13430432","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"The following is interesting:\n{quote}\n3. FSEditLog: Ending log segment 23963\n4. FSEditLog: Starting log segment at 23967\n{quote}\nThat's not a typo? i.e there's a gap between the end of the previous segment and the start of the next? Perhaps it's just an unrelated logging error, though.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2012-08-07T17:01:44.040+0000","updated":"2012-08-07T17:01:44.040+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13430561","id":"13430561","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patwhitey2007","name":"patwhitey2007","key":"patwhitey2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"patrick white","active":true,"timeZone":"Etc/UTC"},"body":"Hi Todd, right, the TXIDs are correct (unlike my line item numbering in the Description) here's the verbatim log snippet with classpath removed for clarity, hostnames and ipaddr generalized;\n\n[org.apache.hadoop.hdfs.server.blockmanagement.BlockManager$ReplicationMonitor@3ecec78d]2012-08-06 13:02:52,216 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Roll Edit Log from [Secondary NN]\n[IPC Server handler 70 on 8020]2012-08-06 13:02:52,217 INFO org.apache.hadoop.hdfs.server.namenode.FSEditLog: Rolling edit logs.\n[IPC Server handler 70 on 8020]2012-08-06 13:02:52,217 INFO org.apache.hadoop.hdfs.server.namenode.FSEditLog: Ending log segment 23963\n[IPC Server handler 70 on 8020]2012-08-06 13:02:52,218 INFO org.apache.hadoop.hdfs.server.namenode.FSEditLog: Number of transactions: 4 Total time for transactions(ms): 1Number of transactions batched in Syncs: 0 Number of syncs: 5       SyncTimes(ms): 23\n[IPC Server handler 70 on 8020]2012-08-06 13:02:52,220 INFO org.apache.hadoop.hdfs.server.namenode.FSEditLog: Starting log segment at 23967\n[IPC Server handler 70 on 8020]2012-08-06 13:02:52,234 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: SHUTDOWN_MSG:\n/************************************************************\nSHUTDOWN_MSG: Shutting down NameNode at [HOSTNAME/IPADDR]\n************************************************************/\n[Thread-1]2012-08-06 13:03:39,287 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: STARTUP_MSG:\n/************************************************************\nSTARTUP_MSG: Starting NameNode\nSTARTUP_MSG:   host = [HOSTNAME/IPADDR]\nSTARTUP_MSG:   args = []\nSTARTUP_MSG:   version = 0.23.3.1208042202\n\nSTARTUP_MSG:   classpath = << CLASSPATH REMOVED >>\n\nSTARTUP_MSG:   build = http://svn.apache.org/repos/asf/hadoop/common/branches/branch-0.23/hadoop-common-project/hadoop-common -r 1368004; compiled by '[QEUSER]' on Sat Aug  4 22:15:58 PDT 2012\n ************************************************************/\n  [main]2012-08-06 13:03:39,506 INFO org.apache.hadoop.metrics2.impl.MetricsConfig: loaded properties from hadoop-metrics2.properties\n  [main]2012-08-06 13:03:39,725 INFO org.apache.hadoop.metrics2.impl.MetricsSinkAdapter: Sink simon_jvm started\n  [main]2012-08-06 13:03:39,753 INFO org.apache.hadoop.metrics2.impl.MetricsSinkAdapter: Sink simon_rpc started\n  [main]2012-08-06 13:03:39,800 INFO org.apache.hadoop.metrics2.impl.MetricsSinkAdapter: Sink simon_dfs started\n  [main]2012-08-06 13:03:39,861 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s).\n  [main]2012-08-06 13:03:39,861 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: NameNode metrics system started\n  [main]2012-08-06 13:03:40,342 INFO org.apache.hadoop.security.UserGroupInformation: Login successful for user hdfs/HOSTNAME@DOMAIN using keytab file [KEYTAB]\n  [main]2012-08-06 13:03:40,464 INFO org.apache.hadoop.util.HostsFileReader: Refreshing hosts (include/exclude) list\n  [main]2012-08-06 13:03:40,469 INFO org.apache.hadoop.hdfs.server.blockmanagement.DatanodeManager: dfs.block.invalidate.limit=1000\n  [main]2012-08-06 13:03:40,472 INFO org.apache.hadoop.hdfs.util.GSet: VM type       = 64-bit\n  [main]2012-08-06 13:03:40,472 INFO org.apache.hadoop.hdfs.util.GSet: 2% max memory = 273.85625 MB\n  [main]2012-08-06 13:03:40,472 INFO org.apache.hadoop.hdfs.util.GSet: capacity      = 2^25 = 33554432 entries\n  [main]2012-08-06 13:03:40,472 INFO org.apache.hadoop.hdfs.util.GSet: recommended=33554432, actual=33554432\n  [main]2012-08-06 13:03:40,674 INFO org.apache.hadoop.hdfs.server.blockmanagement.BlockManager: dfs.block.access.token.enable=true\n  [main]2012-08-06 13:03:40,674 INFO org.apache.hadoop.hdfs.server.blockmanagement.BlockManager: dfs.block.access.key.update.interval=600 min(s), dfs.block.access.token.lifetime=600 min(s)\n  [main]2012-08-06 13:03:40,683 INFO org.apache.hadoop.hdfs.server.blockmanagement.BlockManager: defaultReplication = 3\n  [main]2012-08-06 13:03:40,683 INFO org.apache.hadoop.hdfs.server.blockmanagement.BlockManager: maxReplication     = 50\n  [main]2012-08-06 13:03:40,684 INFO org.apache.hadoop.hdfs.server.blockmanagement.BlockManager: minReplication     = 1\n  [main]2012-08-06 13:03:40,684 INFO org.apache.hadoop.hdfs.server.blockmanagement.BlockManager: maxReplicationStreams      = 2\n  [main]2012-08-06 13:03:40,684 INFO org.apache.hadoop.hdfs.server.blockmanagement.BlockManager: shouldCheckForEnoughRacks  = true\n  [main]2012-08-06 13:03:40,684 INFO org.apache.hadoop.hdfs.server.blockmanagement.BlockManager: replicationRecheckInterval = 3000\n  [main]2012-08-06 13:03:40,684 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: fsOwner=hdfs/[HOSTNAME@DOMAIN] (auth:KERBEROS)\n  [main]2012-08-06 13:03:40,684 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: supergroup=hdfs\n  [main]2012-08-06 13:03:40,684 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isPermissionEnabled=true\n  [main]2012-08-06 13:03:40,692 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Registered FSNamesystemState MBean\n  [main]2012-08-06 13:03:40,732 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: Caching file names occuring more than 10 times\n  [main]2012-08-06 13:03:40,810 WARN org.apache.hadoop.hdfs.server.namenode.FSImageTransactionalStorageInspector: Logs beginning at txid  were are all in-progress (probably truncated due to a previous NameNode crash)\n  [main]2012-08-06 13:03:40,817 WARN org.apache.hadoop.hdfs.server.namenode.FSImageTransactionalStorageInspector: Marking log at /grid/[PATH]/edits_inprogress_0000000000000023967 as corrupt since it has no tra      nsactions in it.\n  [main]2012-08-06 13:03:40,818 ERROR org.apache.hadoop.hdfs.server.namenode.NameNode: Exception in namenode join\n  [main]java.lang.IllegalStateException: No non-corrupt logs for txid 23967\n         at org.apache.hadoop.hdfs.server.namenode.FSImageTransactionalStorageInspector$LogGroup.getBestNonCorruptLog(FSImageTransactionalStorageInspector.java:302)\n         at org.apache.hadoop.hdfs.server.namenode.FSImageTransactionalStorageInspector.createLogLoadPlan(FSImageTransactionalStorageInspector.java:230)\n         at org.apache.hadoop.hdfs.server.namenode.FSImageTransactionalStorageInspector.createLoadPlan(FSImageTransactionalStorageInspector.java:178)\n         at org.apache.hadoop.hdfs.server.namenode.FSImage.loadFSImage(FSImage.java:592)\n         at org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:276)\n         at org.apache.hadoop.hdfs.server.namenode.FSDirectory.loadFSImage(FSDirectory.java:175)\n         at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.initialize(FSNamesystem.java:333)\n         at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:305)\n         at org.apache.hadoop.hdfs.server.namenode.NameNode.loadNamesystem(NameNode.java:299)\n         at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:333)\n         at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:459)\n         at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:451)\n         at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:752)\n         at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:800)\n2012-08-06 13:03:40,820 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: SHUTDOWN_MSG:\n/************************************************************\nSHUTDOWN_MSG: Shutting down NameNode at [HOSTNAME/IPADDR]\n************************************************************/\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patwhitey2007","name":"patwhitey2007","key":"patwhitey2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"patrick white","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-07T19:35:17.444+0000","updated":"2012-08-07T19:35:17.444+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13430575","id":"13430575","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"Ah, OK, I think the log message thing I mentioned above was a red herring. The previous segment _started_ at 23963, and that's what it was logging. Not a problem.\n\nCan you upload /grid/[PATH]/edits_inprogress_0000000000000023967 which may now be renamed with a \".corrupt\" suffix of some kind? I want to make sure it is in fact empty and not some kind of strange corruption.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2012-08-07T19:52:02.067+0000","updated":"2012-08-07T19:52:02.067+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13430584","id":"13430584","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patwhitey2007","name":"patwhitey2007","key":"patwhitey2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"patrick white","active":true,"timeZone":"Etc/UTC"},"body":"Sorry, wished i could, i got the nn log but didn't get the edit log. i initially thought this was coming from a namespace corruption bug and redeployed trying to reproduce the issue before narrowing it down to the edit logs. If i can reproduce this, i'll be sure to grab the edits.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patwhitey2007","name":"patwhitey2007","key":"patwhitey2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"patrick white","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-07T20:02:22.714+0000","updated":"2012-08-07T20:02:22.714+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13432883","id":"13432883","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patwhitey2007","name":"patwhitey2007","key":"patwhitey2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"patrick white","active":true,"timeZone":"Etc/UTC"},"body":"Hi Todd, do you mind if i ask your opinion on the potential impact of this issue, and possible mitigation for it? So far we've not been able to reproduce the issue, either in the nightly regression testing or in specific tests. That, combined with regression history, would tend to indicate this is very unlikely to occur operationally, however if it would occur the affects could be severe. The NN restart should not be difficult once the cause is identified as corrupt edits, it should come up once the corrupt logs are cleared. Is that true or am i missing an event sequence tracking that would need to be corrected? \n\nThe larger concern should be for data loss. Based on what happened in this case it appears that any pending txids would be lost, unless the edit logs could be manually repaired. The filesystem would be intact, only minus the changes from the outstanding edit events, does that sound correct?\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patwhitey2007","name":"patwhitey2007","key":"patwhitey2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"patrick white","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-13T01:51:25.544+0000","updated":"2012-08-13T01:51:25.544+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13433466","id":"13433466","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"Hey Patrick. I think this behavior might have been fixed in 2.0.0 already -- the empty file should get properly ignored and the NN should start up.\n\nPerhaps you can instigate this failure again by adding \"System.exit(0)\" right before where {{START_LOG_SEGMENT}} is logged in {{startLogSegmentAndWriteHeaderTxn}}. That would allow you to see what the right recovery steps are.\n\nThe issue seems to be described in HDFS-2093... I think the following comment may be relevant:\n{quote}\nThus in the situation above, where the only log we have is this corrupted one, it will refuse to let the NN start, with a nice message explaining that the logs starting at this txid are corrupt with no txns. The operator can then double-check whether a different storage drive which possibly went missing might have better logs, etc, before starting NN.\n{quote}\n\nLooking at your logs, it seems like you have only one edits directory. So the above probably applies, and you could successfully start by removing that last (empty) log segment.\n\nbq. The larger concern should be for data loss. Based on what happened in this case it appears that any pending txids would be lost, unless the edit logs could be manually repaired. The filesystem would be intact, only minus the changes from the outstanding edit events, does that sound correct?\n\nOnly \"in-flight\" transactions could be lost -- ie those that were never ACKed to a client. Anything that has been ACKed would have been fsynced to the log, and thus not lost. So, after inspecting the segment to make sure there are truly no transactions, you should be able to remove it and start with no data loss or corruption whatsoever.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2012-08-13T19:47:41.561+0000","updated":"2012-08-13T19:47:41.561+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13434392","id":"13434392","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patwhitey2007","name":"patwhitey2007","key":"patwhitey2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"patrick white","active":true,"timeZone":"Etc/UTC"},"body":"Thanks very much Todd, appreciate the feedback and references, and the suggestion on using exit to try to reproduce this. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patwhitey2007","name":"patwhitey2007","key":"patwhitey2007","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"patrick white","active":true,"timeZone":"Etc/UTC"},"created":"2012-08-14T19:01:50.244+0000","updated":"2012-08-14T19:01:50.244+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13438898","id":"13438898","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bachbui","name":"bachbui","key":"bachbui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bach Bui","active":true,"timeZone":"America/Chicago"},"body":"I reproduced this case by simulating the described NN shutdown situation with an exit(0) right after jas.startLogSegment(segmentTxId) in org.apache.hadoop.hdfs.server.namenode.FSEditLog.startLogSegment(long, boolean)\n\nThis action in effect created an edit_inprogress file that has no transaction in it. NN will now fail to restart, because the error handling code can not handle this case.\n\nAn easy work around is to delete the edit_inprogress file. As Todd mentioned, there will be no loss in data when we do this, am I right Todd?\n\nUltimately, we need to fix the error handling code in org.apache.hadoop.hdfs.server.namenode.FSImageTransactionalStorageInspector.LogGroup.planAllInProgressRecovery() so that it can detect this situation. It does not seem to be very complicated as this is only a conner case. Please correct me if I am wrong.\n\nCould someone also tell me how the NN is shutdown? It seems to me this situation only occur if the NN threads are killed without waiting for them to cleanup themselves.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bachbui","name":"bachbui","key":"bachbui","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bach Bui","active":true,"timeZone":"America/Chicago"},"created":"2012-08-21T17:38:15.518+0000","updated":"2012-08-21T17:38:15.518+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13489196","id":"13489196","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"If there is no transaction in edit_inprogress, it can be safely deleted.  However, how to tell if it does not have transactions if the file is not empty?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-11-02T01:44:02.372+0000","updated":"2012-11-02T01:44:02.372+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13489630","id":"13489630","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"bq. However, how to tell if it does not have transactions if the file is not empty?\n\nWhat do you mean by this? If it's not empty but has a valid header and an OP_INVALID, then it is the same as bytewise empty, and can be deleted. If it has a partial transaction in it, it should be handled the same way that any partial transaction is handled at the end of a file.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2012-11-02T18:25:27.134+0000","updated":"2012-11-02T18:25:27.134+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13489709","id":"13489709","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"{quote}\n> However, how to tell if it does not have transactions if the file is not empty?\n\nWhat do you mean by this? ...\n{quote}\nIt is a typo.  It should read as \".. but the files is not empty\".\n\n{quote}\n... If it's not empty but has a valid header and an OP_INVALID, ...\n{quote}\nDo you mean that the operator need to use a hex editor to check the editlog?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-11-02T20:00:07.217+0000","updated":"2012-11-02T20:00:07.217+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13489730","id":"13489730","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"bq. Do you mean that the operator need to use a hex editor to check the editlog?\n\nNo, this should happen automatically with the current trunk code - it would validate as an empty log (no transactions) and thus would be moved aside.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2012-11-02T20:33:25.223+0000","updated":"2012-11-02T20:33:25.223+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13489758","id":"13489758","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"> No, this should happen automatically with the current trunk code ...\n\nDo you mean HDFS-2093?  HDFS-2093 is also in 0.23.  It seems that HDFS-2093 does not solve the problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-11-02T21:12:52.909+0000","updated":"2012-11-02T21:12:52.909+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13489791","id":"13489791","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"HDFS-2824 is what fixed this in 2.x","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2012-11-02T22:13:15.395+0000","updated":"2012-11-02T22:13:15.395+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13489901","id":"13489901","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"It does look like that HDFS-2824 should fix this.  Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-11-03T01:53:11.332+0000","updated":"2012-11-03T01:53:11.332+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13562470","id":"13562470","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"body":"Is this bug still needed. Can this be closed?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sureshms","name":"sureshms","key":"sureshms","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Suresh Srinivas","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-01-25T06:52:53.387+0000","updated":"2013-01-25T06:52:53.387+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13569660","id":"13569660","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"body":"This isn't needed in 2.x - perhaps the 0.23.x maintainers want to keep this open for 0.23.x? Otherwise feel free to close. (I removed the 2.x affects version)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","key":"tlipcon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tlipcon&avatarId=26804","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tlipcon&avatarId=26804","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tlipcon&avatarId=26804","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tlipcon&avatarId=26804"},"displayName":"Todd Lipcon","active":true,"timeZone":"America/Tijuana"},"created":"2013-02-02T22:51:39.991+0000","updated":"2013-02-02T22:51:39.991+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12602034/comment/13620164","id":"13620164","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"body":"I'm resolving this as WONTFIX. It is not an issue in 2.0 and there is a workaround for 0.23 if this rare condition occurs.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kihwal","name":"kihwal","key":"kihwal","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kihwal&avatarId=34594","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kihwal&avatarId=34594","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kihwal&avatarId=34594","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kihwal&avatarId=34594"},"displayName":"Kihwal Lee","active":true,"timeZone":"America/Chicago"},"created":"2013-04-02T19:30:13.115+0000","updated":"2013-04-02T19:30:13.115+0000"}],"maxResults":18,"total":18,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-3771/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0d3z3:"}}