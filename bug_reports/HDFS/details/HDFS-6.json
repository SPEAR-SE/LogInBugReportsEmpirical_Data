{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12414640","self":"https://issues.apache.org/jira/rest/api/2/issue/12414640","key":"HDFS-6","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12312322":null,"customfield_12310220":"2011-11-19T20:51:05.203+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sat Nov 19 20:51:05 UTC 2011","customfield_12310420":"17146","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_87312356801_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-11-19T20:51:05.067+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-6/watchers","watchCount":1,"isWatching":false},"created":"2009-02-12T07:25:08.426+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":1800,"aggregatetimeoriginalestimate":1800,"customfield_12311120":null,"customfield_12312330":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-11-19T20:51:05.222+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":1800,"description":"In FSNamesystem.java registerDatanode(), if the datanode address cannot be\ngot from the RPC Server, it will use that from the datanode report:\n\n    String dnAddress = Server.getRemoteAddress();\n    if (dnAddress == null) {\n      // Mostly called inside an RPC.\n      // But if not, use address passed by the data-node.\n      dnAddress = nodeReg.getHost();\n    }      \n\nThe getHost() may return the hostname or address, while the Server.getRemoteAddress() \nwill return the IP address, which is the dnAddress should be. Thus I think the it should be\n\n    if (dnAddress == null) {\n      // Mostly called inside an RPC.\n      // But if not, use address passed by the data-node.\n      dnAddress = InetAddress.getByName(nodeReg.getHost()).getHostAddress();\n    }      \n\nI know it should not be called in most situation, but I indeed use that, and I suppose the \ndnAddress should be an IP address.\n\n","customfield_10010":null,"timetracking":{"originalEstimate":"0.5h","remainingEstimate":"0.5h","originalEstimateSeconds":1800,"remainingEstimateSeconds":1800},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":1800,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"108298","customfield_12312823":null,"summary":"in FSNamesystem.registerDatanode, dnAddress should be resolved (rarely occured)","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnawux","name":"gnawux","key":"gnawux","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gnawux&avatarId=22895","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gnawux&avatarId=22895","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gnawux&avatarId=22895","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gnawux&avatarId=22895"},"displayName":"Wang Xu","active":true,"timeZone":"Asia/Shanghai"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnawux","name":"gnawux","key":"gnawux","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gnawux&avatarId=22895","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gnawux&avatarId=22895","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gnawux&avatarId=22895","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gnawux&avatarId=22895"},"displayName":"Wang Xu","active":true,"timeZone":"Asia/Shanghai"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":1800,"percent":0},"customfield_12311024":null,"environment":"CentOS 5.2, JDK 1.6","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":1800,"percent":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12414640/comment/13153586","id":"13153586","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"body":"This is mostly caused by improper host resolution environments (I see this cause disallowed exceptions a lot of time on Cloudera's scm-users list, for example, where the users have badly formed /etc/hosts files [FQDN second instead of first, etc.]).\n\nThe most easy fix is to fix your environment to have saner resolution that does not lead to this, than having the code resolve it.\n\nI do not see this problem with consistent host resolution setups.\n\nResolving as Won't Fix, but do reopen if there's a strong point of argument here, of why the workaround _has_ to be necessarily done. Patches would be welcome in that case too :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=qwertymaniac","name":"qwertymaniac","key":"qwertymaniac","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=qwertymaniac&avatarId=16780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=qwertymaniac&avatarId=16780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=qwertymaniac&avatarId=16780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=qwertymaniac&avatarId=16780"},"displayName":"Harsh J","active":true,"timeZone":"Asia/Kolkata"},"created":"2011-11-19T20:51:05.203+0000","updated":"2011-11-19T20:51:05.203+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-6/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0iw4f:"}}