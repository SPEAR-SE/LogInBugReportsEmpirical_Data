{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12669356","self":"https://issues.apache.org/jira/rest/api/2/issue/12669356","key":"HDFS-5227","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2013-09-19T01:10:37.285+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sun Sep 22 21:31:30 UTC 2013","customfield_12310420":"349288","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_78796803_*|*_1_*:*_2_*:*_262102988_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2013-09-22T21:31:30.912+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-5227/watchers","watchCount":4,"isWatching":false},"created":"2013-09-18T22:49:51.142+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324809","id":"12324809","description":"2.1.1-beta release","name":"2.1.1-beta","archived":false,"released":true,"releaseDate":"2013-09-16"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12335732","id":"12335732","description":"3.0.0-alpha1 release","name":"3.0.0-alpha1","archived":false,"released":true,"releaseDate":"2016-09-03"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chuanliu","name":"chuanliu","key":"chuanliu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chuan Liu","active":true,"timeZone":"America/Los_Angeles"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-05-12T18:12:42.470+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Currently, {{Namenode.getAddress(Configuration conf)}} will return default file system address as its result. The correct behavior should be returning config value of \"dfs.namenode.rpc-address\" if it presents in the configurations. Otherwise namenode will fail to start if the default file system is configured to another file system other than the one running in the cluster. We have a similar issue in 1.0 code base. The JIRA is HDFS-4320. The previous JIRA is closed and we cannot open it. Thus create a new one to track the issue in trunk.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12603934","id":"12603934","filename":"HDFS-5227-trunk.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chuanliu","name":"chuanliu","key":"chuanliu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chuan Liu","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-18T22:51:04.158+0000","size":1521,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12603934/HDFS-5227-trunk.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"349586","customfield_12312823":null,"summary":"Namenode.getAddress() should return namenode rpc-address","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chuanliu","name":"chuanliu","key":"chuanliu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chuan Liu","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chuanliu","name":"chuanliu","key":"chuanliu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chuan Liu","active":true,"timeZone":"America/Los_Angeles"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12669356/comment/13771347","id":"13771347","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chuanliu","name":"chuanliu","key":"chuanliu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chuan Liu","active":true,"timeZone":"America/Los_Angeles"},"body":"Attach a patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chuanliu","name":"chuanliu","key":"chuanliu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chuan Liu","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-18T22:51:04.160+0000","updated":"2013-09-18T22:51:04.160+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12669356/comment/13771486","id":"13771486","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12603934/HDFS-5227-trunk.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:\n\n                  org.apache.hadoop.hdfs.server.datanode.TestDeleteBlockPool\n                  org.apache.hadoop.hdfs.TestDFSShell\n                  org.apache.hadoop.hdfs.server.balancer.TestBalancerWithNodeGroup\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/4999//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/4999//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2013-09-19T01:10:37.285+0000","updated":"2013-09-19T01:10:37.285+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12669356/comment/13772293","id":"13772293","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chuanliu","name":"chuanliu","key":"chuanliu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chuan Liu","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. -1 core tests. The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:\nI will take a look at the failures.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chuanliu","name":"chuanliu","key":"chuanliu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chuan Liu","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-19T20:44:21.459+0000","updated":"2013-09-19T20:44:21.459+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12669356/comment/13774094","id":"13774094","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chuanliu","name":"chuanliu","key":"chuanliu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chuan Liu","active":true,"timeZone":"America/Los_Angeles"},"body":"I noticed we have the following code in {{Namenode.initializeGenericKeys()}} method. This method is executed before {{Namenode.initialize()}} method in the namenode constructor. Our problem should be fixed with the following code. I think we run into failure previously because \"dfs.namenode.rpc-address\" is not properly configured.\n{code:java}\n    // If the RPC address is set use it to (re-)configure the default FS\n    if (conf.get(DFS_NAMENODE_RPC_ADDRESS_KEY) != null) {\n      URI defaultUri = URI.create(HdfsConstants.HDFS_URI_SCHEME + \"://\"\n          + conf.get(DFS_NAMENODE_RPC_ADDRESS_KEY));\n      conf.set(FS_DEFAULT_NAME_KEY, defaultUri.toString());\n      LOG.debug(\"Setting \" + FS_DEFAULT_NAME_KEY + \" to \" + defaultUri.toString());\n    }\n{code}\nAs for the unit test failure above, the federated namenode addresses of MiniDFSCluster will be wrong in TestDeleteBlockPool if the {{getAddress()}} is modified according to the patch.\n\nResolve this one as \"not a problem\" because the behavior is the same as desired, i.e. getAddress() will return \"dfs.namenode.rpc-address\" if namenode is initialized and \"dfs.namenode.rpc-address\" is configured. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chuanliu","name":"chuanliu","key":"chuanliu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chuan Liu","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-22T21:31:30.929+0000","updated":"2013-09-22T21:31:30.929+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-5227/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1o86v:"}}