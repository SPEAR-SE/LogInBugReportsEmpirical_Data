{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12515856","self":"https://issues.apache.org/jira/rest/api/2/issue/12515856","key":"HDFS-2216","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/6","id":"6","description":"The problem isn't valid and it can't be fixed.","name":"Invalid"},"customfield_12312322":null,"customfield_12310220":"2011-07-31T01:32:00.918+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Sun Jul 31 01:32:00 UTC 2011","customfield_12310420":"15053","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_6401750_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2011-07-31T01:32:00.910+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-2216/watchers","watchCount":0,"isWatching":false},"created":"2011-07-30T23:45:19.207+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":"hdfs dfs block size","customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314204","id":"12314204","description":"","name":"0.20.2","archived":false,"released":true,"releaseDate":"2010-02-16"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-07-31T01:32:00.952+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312927","id":"12312927","name":"datanode"}],"timeoriginalestimate":null,"description":"Hi everybody, \nI have a big problem with the blocksize configuration I tried different configurations at the hdfs-site config (datanodes and namenodes have the same configuration)\n\ni tried \n<property>\n  <name>dfs.block.size</name>\n  <value>128m</value>\n  <final>true</final>\n</property>\n-----------------------\n<property>\n  <name>dfs.blocksize</name>\n  <value>128m</value>\n  <final>true</final>\n</property>\n<property>\n  <name>dfs.block.size</name>\n  <value>134217728</value>\n  <final>true</final>\n</property>\n-----------------------\n<property>\n  <name>dfs.blocksize</name>\n  <value>134217728</value>\n  <final>true</final>\n</property>\n\nBut in all cases when I run a map-reduce job i found that the amount of slots is proportional to 64M blocks and if a run a du -hs in all datanode a found that the block files are 65M\n\nFor example \n\n65M\tblk_720821373677199742\n520K\tblk_720821373677199742_13833.meta\n65M\tblk_-7294849724164540020\n520K\tblk_-7294849724164540020_7314.meta\n65M\tblk_7468624346905314857\n520K\tblk_7468624346905314857_7312.meta\n65M\tblk_7638666943543421576\n520K\tblk_7638666943543421576_7312.meta\n65M\tblk_7830551307355288414\n520K\tblk_7830551307355288414_7314.meta\n65M\tblk_7844142950685471855\n520K\tblk_7844142950685471855_7312.meta\n65M\tblk_7978753697206960302\n520K\tblk_7978753697206960302_7312.meta\n65M\tblk_-7997715050017508513\n520K\tblk_-7997715050017508513_7313.meta\n65M\tblk_-8085168141075809653\n520K\tblk_-8085168141075809653_7314.meta\n65M\tblk_8250324684742742886\n520K\tblk_8250324684742742886_7314.meta\n65M\tblk_839132493383742510\n520K\tblk_839132493383742510_7312.meta\n65M\tblk_847712434829366950\n520K\tblk_847712434829366950_7314.meta\n65M\tblk_-8735461258629196142\n\nbut if I run \"hadoop fs -stat %o file\" I get 134217728\n\nDo yo know if I am doing same wrong? or It's souns a bug\n\nThanks","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"113817","customfield_12312823":null,"summary":"dfs.blocksize and dfs.block.size are ignored","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=geisbruch","name":"geisbruch","key":"geisbruch","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gabriel Eisbruch","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=geisbruch","name":"geisbruch","key":"geisbruch","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Gabriel Eisbruch","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Linux Ubuntu ","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12515856/comment/13073276","id":"13073276","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"body":"Hey Gabriel, Apache JIRA is for tracking confirmed bugs/improvements/features, not for answering user questions like this one. This question would be better asked on a mailing list like hdfs-user@hadoop.apache.org.\n\nThat said, you should know that the dfs.blocksize configuration option is, perhaps surprisingly, only read by HDFS clients. Can you confirm that this setting was set on the client machine from where you were uploading the file(s) into HDFS?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=atm","name":"atm","key":"atm","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=atm&avatarId=14136","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=atm&avatarId=14136","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=atm&avatarId=14136","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=atm&avatarId=14136"},"displayName":"Aaron T. Myers","active":true,"timeZone":"America/Los_Angeles"},"created":"2011-07-31T01:32:00.918+0000","updated":"2011-07-31T01:32:00.918+0000"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-2216/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0ju5z:"}}