{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12713762","self":"https://issues.apache.org/jira/rest/api/2/issue/12713762","key":"HDFS-6376","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327181","id":"12327181","description":"2.6.0 release","name":"2.6.0","archived":false,"released":true,"releaseDate":"2014-11-18"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-05-12T23:00:12.964+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue May 24 20:14:46 UTC 2016","customfield_12310420":"392078","customfield_12312320":null,"customfield_12310222":"10002_*:*_8_*:*_10005173885_*|*_1_*:*_8_*:*_2469788_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2014-09-05T17:50:26.411+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-6376/watchers","watchCount":17,"isWatching":false},"created":"2014-05-12T21:56:22.788+0000","customfield_12310192":"Allow distcp to copy data between HA clusters. Users can use a new configuration property \"dfs.internal.nameservices\" to explicitly specify the name services belonging to the local cluster, while continue using the configuration property \"dfs.nameservices\" to specify all the name services in the local and remote clusters.","customfield_12310191":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10343","value":"Reviewed","id":"10343"}],"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"13.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325049","id":"12325049","description":"2.2.0 release","name":"2.2.0","archived":false,"released":true,"releaseDate":"2013-10-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12325255","id":"12325255","description":"2.3.0 release","name":"2.3.0","archived":false,"released":true,"releaseDate":"2014-02-20"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326143","id":"12326143","description":"2.4.0 release","name":"2.4.0","archived":false,"released":true,"releaseDate":"2014-04-07"}],"issuelinks":[{"id":"12458739","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12458739","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12945273","key":"HDFS-9868","self":"https://issues.apache.org/jira/rest/api/2/issue/12945273","fields":{"summary":"Add ability for DistCp to run between 2 clusters","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/10002","description":"A patch for this issue has been uploaded to JIRA by a contributor.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/document.png","name":"Patch Available","id":"10002","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/4","id":4,"key":"indeterminate","colorName":"yellow","name":"In Progress"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12447639","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12447639","type":{"id":"12310050","name":"Regression","inward":"is broken by","outward":"breaks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310050"},"outwardIssue":{"id":"12909880","key":"HDFS-9365","self":"https://issues.apache.org/jira/rest/api/2/issue/12909880","fields":{"summary":"Balancer does not work with the HDFS-6376 HA setup","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-05-24T20:14:46.033+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312927","id":"12312927","name":"datanode"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12318801","id":"12318801","name":"federation","description":"Multiple Namenode Federation"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12312928","id":"12312928","name":"hdfs-client"}],"timeoriginalestimate":null,"description":"User has to create a third set of configuration files for distcp when transferring data between two HA clusters.\n\nConsider the scenario in [1]. You cannot put all of the required properties in core-site.xml and hdfs-site.xml for the client to resolve the location of both active namenodes. If you do, then the datanodes from cluster A may join cluster B. I can not find a configuration option that tells the datanodes to federate blocks for only one of the clusters in the configuration.\n\n\n[1] http://mail-archives.apache.org/mod_mbox/hadoop-user/201404.mbox/%3CBAY172-W2133964E0C283968C161DD1520%40phx.gbl%3E","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12327181","id":"12327181","description":"2.6.0 release","name":"2.6.0","archived":false,"released":true,"releaseDate":"2014-11-18"}],"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12663801","id":"12663801","filename":"HDFS-6376.000.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-23T00:10:19.149+0000","size":16885,"content":"https://issues.apache.org/jira/secure/attachment/12663801/HDFS-6376.000.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12663768","id":"12663768","filename":"HDFS-6376.008.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-22T22:04:36.958+0000","size":14027,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12663768/HDFS-6376.008.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12664219","id":"12664219","filename":"HDFS-6376.009.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-25T21:30:06.182+0000","size":16817,"content":"https://issues.apache.org/jira/secure/attachment/12664219/HDFS-6376.009.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12664225","id":"12664225","filename":"HDFS-6376.010.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-25T21:46:36.416+0000","size":16948,"content":"https://issues.apache.org/jira/secure/attachment/12664225/HDFS-6376.010.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12664710","id":"12664710","filename":"HDFS-6376.011.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-27T18:57:10.488+0000","size":17538,"content":"https://issues.apache.org/jira/secure/attachment/12664710/HDFS-6376.011.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12644758","id":"12644758","filename":"HDFS-6376-2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-05-14T01:58:34.277+0000","size":7717,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12644758/HDFS-6376-2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12646826","id":"12646826","filename":"HDFS-6376-3-branch-2.4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-05-26T23:43:51.157+0000","size":7765,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12646826/HDFS-6376-3-branch-2.4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12647011","id":"12647011","filename":"HDFS-6376-4-branch-2.4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-05-27T23:02:28.738+0000","size":7717,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12647011/HDFS-6376-4-branch-2.4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12647824","id":"12647824","filename":"HDFS-6376-5-trunk.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-06-01T18:37:24.594+0000","size":6340,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12647824/HDFS-6376-5-trunk.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12649984","id":"12649984","filename":"HDFS-6376-6-trunk.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-06-12T02:09:48.432+0000","size":9824,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12649984/HDFS-6376-6-trunk.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12655460","id":"12655460","filename":"HDFS-6376-7-trunk.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-07-13T15:30:28.359+0000","size":6340,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12655460/HDFS-6376-7-trunk.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12646823","id":"12646823","filename":"HDFS-6376-branch-2.4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-05-26T22:52:59.072+0000","size":7717,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12646823/HDFS-6376-branch-2.4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12644500","id":"12644500","filename":"HDFS-6376-patch-1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-05-12T22:06:29.563+0000","size":7986,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12644500/HDFS-6376-patch-1.patch"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"392273","customfield_12312823":null,"summary":"Distcp data between two HA clusters requires another configuration","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Hadoop 2.3.0","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/13995706","id":"13995706","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"Patch 1 adds a new hdfs-site property which allows the user to specify which nameservices are *not* part of the cluster. This allows configuration information to be supplied for other clusters so that clients can resolve their locations.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-05-12T22:06:29.568+0000","updated":"2014-05-12T22:06:29.568+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/13995707","id":"13995707","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"Note that the patch was developed against CDH5 source.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-05-12T22:07:34.947+0000","updated":"2014-05-12T22:07:34.947+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/13995773","id":"13995773","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12644500/HDFS-6376-patch-1.patch\n  against trunk revision .\n\n    {color:red}-1 patch{color}.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/6881//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-12T23:00:12.964+0000","updated":"2014-05-12T23:00:12.964+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/13997183","id":"13997183","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"Patch 2 against the 2.4 branch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-05-14T01:58:34.288+0000","updated":"2014-05-14T01:58:34.288+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/13997490","id":"13997490","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"Cancelling patch-1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-05-14T12:11:43.660+0000","updated":"2014-05-14T12:11:43.660+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14009115","id":"14009115","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"renamed patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-05-26T22:52:59.077+0000","updated":"2014-05-26T22:52:59.077+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14009119","id":"14009119","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12646823/HDFS-6376-branch-2.4.patch\n  against trunk revision .\n\n    {color:red}-1 patch{color}.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/6977//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-26T23:04:23.030+0000","updated":"2014-05-26T23:04:23.030+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14009132","id":"14009132","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"This is becoming laborious.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-05-26T23:21:13.361+0000","updated":"2014-05-26T23:21:13.361+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14009147","id":"14009147","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"Built locally with\n{noformat}\ndev-support/test-patch.sh ../hadoop-patches/HDFS-6376-3-branch-2.4.patch\n{noformat}\n\nresulted in:\n{noformat}\n-1 overall.  \n\n    +1 @author.  The patch does not contain any @author tags.\n\n    +1 tests included.  The patch appears to include 3 new or modified tests.\n\n    -1 javadoc.  The javadoc tool appears to have generated 11 warning messages.\n\n    -1 javac.  The patch appears to cause tar ant target to fail.\n\n    -1 eclipse:eclipse.  The patch failed to build with eclipse:eclipse.\n\n    +1 findbugs.  The patch does not introduce any new Findbugs (version ) warnings.\n\n    +1 release audit.  The applied patch does not increase the total number of release audit warnings.\n\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-05-26T23:43:51.163+0000","updated":"2014-05-26T23:43:51.163+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14009153","id":"14009153","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12646826/HDFS-6376-3-branch-2.4.patch\n  against trunk revision .\n\n    {color:red}-1 patch{color}.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/6978//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-26T23:54:19.953+0000","updated":"2014-05-26T23:54:19.953+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14009201","id":"14009201","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"Jenkins build failing with:\nHDFS-6376 patch is being downloaded at Mon May 26 23:54:17 UTC 2014 from\nhttp://issues.apache.org/jira/secure/attachment/12646826/HDFS-6376-3-branch-2.4.patch\ncp: cannot stat `/home/jenkins/buildSupport/lib/*': No such file or directory\nThe patch does not appear to apply with p0 to p2\nPATCH APPLICATION FAILED\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-05-27T01:41:10.817+0000","updated":"2014-05-27T01:41:10.817+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14010470","id":"14010470","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"forgot --no-prefix in patch 3","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-05-27T23:02:04.335+0000","updated":"2014-05-27T23:02:04.335+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14010471","id":"14010471","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"fix patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-05-27T23:02:28.748+0000","updated":"2014-05-27T23:02:28.748+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14010480","id":"14010480","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12647011/HDFS-6376-4-branch-2.4.patch\n  against trunk revision .\n\n    {color:red}-1 patch{color}.  The patch command could not apply the patch.\n\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/6989//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-05-27T23:12:49.780+0000","updated":"2014-05-27T23:12:49.780+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14015058","id":"14015058","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"New patch against trunk","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-06-01T18:37:24.598+0000","updated":"2014-06-01T18:37:24.598+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14015093","id":"14015093","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12647824/HDFS-6376-5-trunk.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:\n\n                  org.apache.hadoop.hdfs.TestClientReportBadBlock\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/7025//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7025//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-06-01T21:24:11.426+0000","updated":"2014-06-01T21:24:11.426+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14015367","id":"14015367","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"Test failed due to read timeout on socket. Don't think my patch caused this. Also, I had a fix for the ClusterJSPHelper in the 2.x branch, but this appears to be gone in 3.x. If someone can tell me where this was moved to, then I will patch it also.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-06-02T13:18:53.640+0000","updated":"2014-06-02T13:18:53.640+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14028737","id":"14028737","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"Realized that I need to make a change in DFSUtil also.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-06-12T02:09:06.161+0000","updated":"2014-06-12T02:09:06.161+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14028738","id":"14028738","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"Includes change to DFSUtils.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-06-12T02:09:48.447+0000","updated":"2014-06-12T02:09:48.447+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14028824","id":"14028824","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:green}+1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12649984/HDFS-6376-6-trunk.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 2 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-hdfs-project/hadoop-hdfs.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/7092//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7092//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-06-12T04:55:12.192+0000","updated":"2014-06-12T04:55:12.192+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14032610","id":"14032610","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"ready for review.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-06-16T16:30:52.035+0000","updated":"2014-06-16T16:30:52.035+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14058686","id":"14058686","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"I don't like the behavior of the change in DFSUtil in Patch 6. I will be reverting to patch 5","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-07-11T11:51:05.009+0000","updated":"2014-07-11T11:51:05.009+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14060144","id":"14060144","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"Backed out changes to DFSUtil.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-07-13T15:30:28.370+0000","updated":"2014-07-13T15:30:28.370+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14060196","id":"14060196","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:green}+1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12655460/HDFS-6376-7-trunk.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:green}+1 core tests{color}.  The patch passed unit tests in hadoop-hdfs-project/hadoop-hdfs.\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/7333//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7333//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-07-13T18:10:17.078+0000","updated":"2014-07-13T18:10:17.078+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14104521","id":"14104521","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ccondit","name":"ccondit","key":"ccondit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ccondit&avatarId=36345","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ccondit&avatarId=36345","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ccondit&avatarId=36345","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ccondit&avatarId=36345"},"displayName":"Craig Condit","active":true,"timeZone":"America/Chicago"},"body":"In the case of secured clusters, even a separate configuration is not sufficient to allow distcp to function -- Yarn is unable to resolve the namespace as it uses it's own local configuraiton (at least for delegation tokens). This makes distcp between secure HA clusters impossible without this issue being fixed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ccondit","name":"ccondit","key":"ccondit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ccondit&avatarId=36345","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ccondit&avatarId=36345","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ccondit&avatarId=36345","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ccondit&avatarId=36345"},"displayName":"Craig Condit","active":true,"timeZone":"America/Chicago"},"created":"2014-08-20T20:36:35.779+0000","updated":"2014-08-20T20:36:35.779+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14104814","id":"14104814","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"body":"[~dlmarion], have you tested your patch for distcp between real clusters? It will be great if you can generally mention how you patch works for  both secured and insecure HA clusters.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-20T23:52:38.215+0000","updated":"2014-08-20T23:52:38.215+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14104819","id":"14104819","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"body":"Besides the comment about testing in real clusters, the patch looks good to me. Maybe we can rename the new configuration from \"dfs.nameservice.cluster.excludes\" to something like \"dfs.nameservices.cluster.outside\"? Another nit is that we need to fix indents in the new unit test.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-20T23:56:39.527+0000","updated":"2014-08-20T23:56:39.527+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14105586","id":"14105586","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"Thanks for reviewing this. I thought this was dead and that I would forever have to patch Hadoop for our application. Out of curiosity, have others started running into this issue?\n\nbq. have you tested your patch for distcp between real clusters?\n\nYes. I have been running a version of this patch for about 2 months on a test cluster. We are using Hadoop 2 so the patch that I am applying is a little different. My Hadoop 2 patch also includes a change in the dfsclusterhealth.jsp file so that only NameNodes in \"this\" cluster are shown. I could not find the same jsp file in the Hadoop 3 source. Generally speaking, I think I have fixed all locations in the code that need to be fixed, but I could be missing something that I don't know about. As you can see from the patch history, I thought I had to make a change DFSUtil, but it broke some things and I had to revert those changes.\n\nbq. It will be great if you can generally mention how you patch works for both secured and insecure HA clusters.\n\nWe are not using secured HA, it has not been tested in that manner\n\nbq.  Another nit is that we need to fix indents in the new unit test.\n\nI'm happy to fix.\n\nbq. Maybe we can rename the new configuration from \"dfs.nameservice.cluster.excludes\" to something like \"dfs.nameservices.cluster.outside\"\n\nI have no issues with changing the name. In my situation I have multiple HDFS nameservices defined in hdfs-site.xml and I want to explicitly state which ones are not part of \"this\" cluster. Exclude seemed like a good term for that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-08-21T16:57:20.811+0000","updated":"2014-08-21T16:57:20.811+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14105966","id":"14105966","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for the response, [~dlmarion].\n\nbq. I have been running a version of this patch for about 2 months on a test cluster. We are using Hadoop 2 so the patch that I am applying is a little different. \n\nCool. Then could you also post an updated patch for hadoop 2 since we will finally merge the patch to branch-2?\n\nbq. Exclude seemed like a good term for that.\n\nSounds good to me. Let's keep the current name then.\n\nSome other comments (sorry I should have posted them yesterday...):\n# Minor: it may be better to wrap the logic of the following code into a new method in DFSUtil since we use it in multiple places.\n{code}\n+    Map<String, Map<String, InetSocketAddress>> newAddressMap =\n+        DFSUtil.getNNServiceRpcAddresses(conf);\n+\n+    for (String exclude : nameServiceExcludes)\n+      newAddressMap.remove(exclude);\n{code}\n# Currently DFSUtil#getOnlyNameServiceIdOrNull returns null if there are more than two nameservices specified. There are a couple of places called this method, and looks like DFSHAAdmin#resolveTarget may hit some issue if no -ns option is specified by HAAdmin. Thus I think we may also need to add the exclude logic in DFSUtil#getOnlyNameServiceIdOrNull. And we need to add more tests for this new feature, e.g., to cover its usage in DFSHAAdmin.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-21T21:09:50.163+0000","updated":"2014-08-21T21:09:50.163+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14106301","id":"14106301","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ccondit","name":"ccondit","key":"ccondit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ccondit&avatarId=36345","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ccondit&avatarId=36345","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ccondit&avatarId=36345","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ccondit&avatarId=36345"},"displayName":"Craig Condit","active":true,"timeZone":"America/Chicago"},"body":"Tested slightly modified version of patch against 2.2.0. Verified that distcp between two secure HA clusters works as expected.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ccondit","name":"ccondit","key":"ccondit","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ccondit&avatarId=36345","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ccondit&avatarId=36345","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ccondit&avatarId=36345","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ccondit&avatarId=36345"},"displayName":"Craig Condit","active":true,"timeZone":"America/Chicago"},"created":"2014-08-22T01:26:11.209+0000","updated":"2014-08-22T01:26:11.209+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14107593","id":"14107593","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"body":"Since the remaining work is trivial, I will just update the patch for [~dlmarion]. The changes included:\n# Wrap the exclusion logic in DFSUtil#getNNServiceRpcAddressesIncluded, # Use {{getTrimmedStringCollection}} instead of {{getStringCollection}}\n# Rename the new conf property to \"dfs.remote.cluster.nameservices\"\n# Add more unit tests\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-22T22:04:36.963+0000","updated":"2014-08-22T22:04:36.963+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14107623","id":"14107623","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"body":"I think it might make more sense to explicitly specify the name service that the DNs should report to. Since the changes are trivial, I'll provide another patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-22T22:37:26.177+0000","updated":"2014-08-22T22:37:26.177+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14107734","id":"14107734","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12663768/HDFS-6376.008.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 3 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The following test timeouts occurred in hadoop-hdfs-project/hadoop-hdfs:\n\norg.apache.hadoop.fs.TestEnhancedByteBufferAccess\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/7729//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7729//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-23T00:01:38.338+0000","updated":"2014-08-23T00:01:38.338+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14107821","id":"14107821","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12663801/HDFS-6376.000.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 3 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:\n\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestPipelinesFailover\n                  org.apache.hadoop.hdfs.TestFileCreation\n                  org.apache.hadoop.hdfs.web.TestWebHdfsFileSystemContract\n                  org.apache.hadoop.security.TestRefreshUserMappings\n                  org.apache.hadoop.hdfs.server.datanode.TestBlockPoolManager\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/7733//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7733//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-23T02:54:02.861+0000","updated":"2014-08-23T02:54:02.861+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14108093","id":"14108093","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"body":"Comments on the new 000 patch:\n# In the following code, when {{parentNameServices}} is empty, there is no need to compare {{parentNameServices}} and {{availableNameServices}}.\n{code}\n+    Collection<String> parentNameServices = conf.getTrimmedStringCollection\n+            (DFSConfigKeys.DFS_INTERNAL_NAMESERVICES_KEY);\n+\n+    if (parentNameServices.isEmpty()) {\n+      parentNameServices = conf.getTrimmedStringCollection\n+              (DFSConfigKeys.DFS_NAMESERVICES);\n+    }\n+\n+    Set<String> availableNameServices = Sets.newHashSet(conf\n+            .getTrimmedStringCollection(DFSConfigKeys.DFS_NAMESERVICES));\n+    for (String nsId : parentNameServices) {\n+      if (!availableNameServices.contains(nsId)) {\n+        throw new IOException(\"Unknown nameservice: \" + nsId);\n+      }\n+    }\n{code}\n# Please generally describe your system test results (when applying the 000 patch for distcp between two HA clusters).\n# Some code needs to fix indent.\n\nbq. I think it might make more sense to explicitly specify the name service that the DNs should report to. \nI do not have a strong feeling between the \"include\" and the \"exclude\" logic here. Actually the original exclusive logic looks even simpler to me, since it does not need to handle the incompatibility issue (i.e., no extra handling when the new configuration property is not specified).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-23T18:56:14.135+0000","updated":"2014-08-23T18:56:14.135+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14108094","id":"14108094","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"body":"Besides, we may need a better name for {{getNNServiceRpcAddressesForMyCluster}}.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-23T18:58:46.936+0000","updated":"2014-08-23T18:58:46.936+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14108150","id":"14108150","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"It looks like some folks have picked this up and moved it forward, is there a need for me to do anything? From my earlier comments, there are some changes in dfsclusterhealth.jsp in the Hadoop2 branch so that only NN's associated with \"this\" cluster are listed. Not sure where that jsp file is for Hadoop 3.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-08-23T21:14:08.378+0000","updated":"2014-08-23T21:14:08.378+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14108155","id":"14108155","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"bq. I think it might make more sense to explicitly specify the name service that the DNs should report to. Since the changes are trivial, I'll provide another patch.\n\nI agree. I think there is a deficiency in the configuration properties. With federation, an HDFS cluster is a set of nameservices (ns1, ns2, ns3, ns4). However, I don't think you can define an alias for the overall cluster such that cluster1 contains ns1 and ns2, and cluster2 contains n3 and ns4. In hdfs-site.xml, all of the nameservices are listed and the DN tries to connect to all of them, with the downside that the first one that responds to the DN assigns the cluster id. My patch took the non-invasive approach as I am not familiar with the code base and all of the affected components. I think a better long term implementation would be to specify the clusters (cluster1, cluster2) and their associated nameservices and specify which cluster is \"this\" cluster.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-08-23T21:28:23.933+0000","updated":"2014-08-23T21:28:23.933+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14108157","id":"14108157","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"bq. Currently DFSUtil#getOnlyNameServiceIdOrNull returns null if there are more than two nameservices specified. There are a couple of places called this method, and looks like DFSHAAdmin#resolveTarget may hit some issue if no -ns option is specified by HAAdmin. Thus I think we may also need to add the exclude logic in DFSUtil#getOnlyNameServiceIdOrNull. And we need to add more tests for this new feature, e.g., to cover its usage in DFSHAAdmin.\n\nI tried a change in DFSUtil in my patch6 (see below). I had to back it out as it caused problems. I have had to use -ns in the admin commands and am use to using it now. My point here is that if you have a complex configuration, then you may need to be more specific in the commands that you execute. I think its fair to force the user to specify the -ns argument.\n\n{code}\n+++ hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java\n@@ -527,7 +527,12 @@ public static String path2String(final Object path) {\n    * @return collection of nameservice Ids, or null if not specified\n    */\n   public static Collection<String> getNameServiceIds(Configuration conf) {\n-    return conf.getTrimmedStringCollection(DFS_NAMESERVICES);\n+    Collection<String> nameServices =\n+      conf.getTrimmedStringCollection(DFSConfigKeys.DFS_NAMESERVICES);\n+    Collection<String> nameServiceExcludes =\n+      conf.getTrimmedStringCollection(DFSConfigKeys.DFS_NAMESERVICE_CLUSTER_EXCLUDES_KEY);\n+    nameServices.removeAll(nameServiceExcludes);\n+    return nameServices;\n   }\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-08-23T21:37:06.060+0000","updated":"2014-08-23T21:37:06.060+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14109783","id":"14109783","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. My point here is that if you have a complex configuration, then you may need to be more specific in the commands that you execute. I think its fair to force the user to specify the -ns argument.\n\nThis makes sense to me. Let's require admins to explicitly specify the NS name.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-25T21:35:47.577+0000","updated":"2014-08-25T21:35:47.577+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14109785","id":"14109785","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"body":"The v9 patch addresses Jing's comments. I have tested the patch on two insecure HA clusters and it worked as expected.\n\nThe configuration needs to make the following changes:\n\n# {{dfs.nameservices}} to include both clusters\n# {{dfs.internal.nameservices}} to specify the nameservice that the DN belongs to.\n# {{dfs.namenode.rpc-address.<cluster>.<nn>}} to specify the address of the NN for both clusters.\n# {{dfs.client.failover.proxy.provider.<cluster>}} for both clusters.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-25T21:37:20.949+0000","updated":"2014-08-25T21:37:20.949+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14109787","id":"14109787","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. It looks like some folks have picked this up and moved it forward, is there a need for me to do anything? From my earlier comments, there are some changes in dfsclusterhealth.jsp in the Hadoop2 branch so that only NN's associated with \"this\" cluster are listed. Not sure where that jsp file is for Hadoop 3.\n\nIt would be great if you can test the patch in your environment as well. The JSP UI has been deprecated in hadoop 2 and removed from trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-25T21:38:38.858+0000","updated":"2014-08-25T21:38:38.858+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14109793","id":"14109793","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"body":"bq. My patch took the non-invasive approach as I am not familiar with the code base and all of the affected components. I think a better long term implementation would be to specify the clusters (cluster1, cluster2) and their associated nameservices and specify which cluster is \"this\" cluster.\n\nThere are no fundamental differences between having an exclude and include lists for the clusters. It is somewhat easier to predict what NNs that the DNs are going to report just based on the configuration. I agree that having the ability to specify what a cluster is will simplify the configuration.\n\nbq. I tried a change in DFSUtil in my patch6 (see below). I had to back it out as it caused problems. I have had to use -ns in the admin commands and am use to using it now. My point here is that if you have a complex configuration, then you may need to be more specific in the commands that you execute. I think its fair to force the user to specify the -ns argument.\n\nAgree. I think it is fair to require the users to specify the nameservice in this complex settings.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=wheat9","name":"wheat9","key":"wheat9","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Haohui Mai","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-25T21:44:34.578+0000","updated":"2014-08-25T21:44:34.578+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14109804","id":"14109804","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"body":"The latest 010 patch looks good to me. +1. Thanks for the contribution, [~dlmarion] and [~wheat9]!\n\n[~dlmarion], do you want to try the current patch in your cluster?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-25T21:50:23.111+0000","updated":"2014-08-25T21:50:23.111+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14109992","id":"14109992","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"I don't see an entry in hdfs-site.xml for this new property. This is useful for users and integrators. I will start applying the patch to our Hadoop distribution tomorrow and hope to test it on the cluster in the next few days. Thanks to both of you for help in getting this committed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-08-25T23:43:30.099+0000","updated":"2014-08-25T23:43:30.099+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14110036","id":"14110036","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12664225/HDFS-6376.010.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 3 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:\n\n                  org.apache.hadoop.hdfs.server.balancer.TestBalancerWithSaslDataTransfer\n                  org.apache.hadoop.security.TestRefreshUserMappings\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestPipelinesFailover\n                  org.apache.hadoop.hdfs.server.datanode.TestBlockPoolManager\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/7755//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7755//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-26T00:14:21.133+0000","updated":"2014-08-26T00:14:21.133+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14110037","id":"14110037","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12664219/HDFS-6376.009.patch\n  against trunk revision .\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 3 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:\n\n                  org.apache.hadoop.hdfs.web.TestWebHdfsFileSystemContract\n                  org.apache.hadoop.hdfs.server.namenode.ha.TestPipelinesFailover\n                  org.apache.hadoop.hdfs.server.datanode.TestBlockPoolManager\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/7752//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7752//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-26T00:14:21.138+0000","updated":"2014-08-26T00:14:21.138+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14115218","id":"14115218","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"I was going to apply the latest patch to CDH 5.1.0, but I noticed that 5.1.2 has been released. I'll start on that. Curious if the TestBlockPoolManager failure is caused by the new patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-08-29T12:57:49.582+0000","updated":"2014-08-29T12:57:49.582+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14115898","id":"14115898","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"body":"{color:red}-1 overall{color}.  Here are the results of testing the latest attachment \n  http://issues.apache.org/jira/secure/attachment/12664710/HDFS-6376.011.patch\n  against trunk revision b03653f.\n\n    {color:green}+1 @author{color}.  The patch does not contain any @author tags.\n\n    {color:green}+1 tests included{color}.  The patch appears to include 3 new or modified test files.\n\n    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.\n\n    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.\n\n    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.\n\n    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.\n\n    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.\n\n    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:\n\n                  org.apache.hadoop.security.TestRefreshUserMappings\n\n    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.\n\nTest results: https://builds.apache.org/job/PreCommit-HDFS-Build/7858//testReport/\nConsole output: https://builds.apache.org/job/PreCommit-HDFS-Build/7858//console\n\nThis message is automatically generated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hadoopqa","name":"hadoopqa","key":"hadoopqa","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hadoopqa&avatarId=10393","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hadoopqa&avatarId=10393","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hadoopqa&avatarId=10393","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hadoopqa&avatarId=10393"},"displayName":"Hadoop QA","active":true,"timeZone":"Etc/UTC"},"created":"2014-08-29T21:50:34.488+0000","updated":"2014-08-29T21:50:34.488+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14122241","id":"14122241","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"[~jingzhao] Manually applied patch 11 to CDH 5.1.2 and deployed to our test cluster. Everything came up fine, which is a really good sign. We will see what it looks like tomorrow.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-09-05T01:08:54.793+0000","updated":"2014-09-05T01:08:54.793+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14122879","id":"14122879","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"body":"Patch 11 appears to be working fine. I am happy with it. Will this make it into 2.6? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlmarion","name":"dlmarion","key":"dlmarion","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dave Marion","active":true,"timeZone":"America/New_York"},"created":"2014-09-05T12:46:32.575+0000","updated":"2014-09-05T12:46:32.575+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14123194","id":"14123194","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks for testing the patch, [~dlmarion]! Yes, we will commit it into 2.6.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-05T17:26:20.463+0000","updated":"2014-09-05T17:26:20.463+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14123241","id":"14123241","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"body":"I've committed this into trunk and branch-2. Thanks for the contribution, [~dlmarion] and [~wheat9]!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jingzhao","name":"jingzhao","key":"jingzhao","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jing Zhao","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-05T17:50:26.437+0000","updated":"2014-09-05T17:50:26.437+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14124435","id":"14124435","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-Yarn-trunk #672 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/672/])\nHDFS-6376. Distcp data between two HA clusters requires another configuration. Contributed by Dave Marion and Haohui Mai. (jing: rev c6107f566ff01e9bfee9052f86f6e5b21d5e89f3)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/TestDFSUtil.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/BlockPoolManager.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/TestBlockPoolManager.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/GetConf.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/tools/TestGetConf.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-09-06T11:28:31.182+0000","updated":"2014-09-06T11:28:31.182+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14124475","id":"14124475","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Hadoop-Mapreduce-trunk #1888 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1888/])\nHDFS-6376. Distcp data between two HA clusters requires another configuration. Contributed by Dave Marion and Haohui Mai. (jing: rev c6107f566ff01e9bfee9052f86f6e5b21d5e89f3)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/TestDFSUtil.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/BlockPoolManager.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/tools/TestGetConf.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/TestBlockPoolManager.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/GetConf.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-09-06T13:44:39.607+0000","updated":"2014-09-06T13:44:39.607+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/14124494","id":"14124494","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-Hdfs-trunk #1863 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1863/])\nHDFS-6376. Distcp data between two HA clusters requires another configuration. Contributed by Dave Marion and Haohui Mai. (jing: rev c6107f566ff01e9bfee9052f86f6e5b21d5e89f3)\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java\n* hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/TestDFSUtil.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/datanode/TestBlockPoolManager.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/GetConf.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/BlockPoolManager.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/tools/TestGetConf.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2014-09-06T14:06:24.951+0000","updated":"2014-09-06T14:06:24.951+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/15007804","id":"15007804","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"> ... Users can use a new configuration property \"dfs.internal.nameservices\" to explicitly specify the name services belonging to the local cluster, while continue using the configuration property \"dfs.nameservices\" to specify all the name services in the local and remote clusters. \n\nIs this an incompatible change?  Balancer does not work with such setting since it will use all the NN specified in dfs.nameservices.  As a result, it will try to balance both the local and the remote clusters.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-17T01:50:57.087+0000","updated":"2015-11-17T01:50:57.087+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12713762/comment/15298811","id":"15298811","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"SUCCESS: Integrated in Hadoop-trunk-Commit #9849 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/9849/])\nHDFS-9365. Balaner does not work with the HDFS-6376 HA setup. (szetszwo: rev 15ed080e3610b7526eff12391de780948a75fa7b)\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/balancer/TestBalancerWithNodeGroup.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/TestDFSUtil.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/mover/Mover.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/mover/TestMover.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/balancer/TestBalancerWithHANameNodes.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/mover/TestStorageMover.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/balancer/TestBalancerWithMultipleNameNodes.java\n* hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/server/balancer/TestBalancer.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java\n* hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/balancer/Balancer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2016-05-24T20:14:46.033+0000","updated":"2016-05-24T20:14:46.033+0000"}],"maxResults":58,"total":58,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-6376/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|hzzziv:"}}