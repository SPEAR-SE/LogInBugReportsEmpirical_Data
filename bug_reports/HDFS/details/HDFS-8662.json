{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12840362","self":"https://issues.apache.org/jira/rest/api/2/issue/12840362","key":"HDFS-8662","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310942","id":"12310942","key":"HDFS","name":"Hadoop HDFS","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10292","id":"10292","description":"Scalable Distributed Computing","name":"Hadoop"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/8","id":"8","description":"The described issue is not actually a problem - it is as designed.","name":"Not A Problem"},"customfield_12312322":null,"customfield_12310220":"2015-06-30T23:38:58.386+0000","customfield_12312520":null,"customfield_12312323":null,"customfield_12312521":"Tue Oct 18 00:32:28 UTC 2016","customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_41565720551_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"resolutiondate":"2016-10-18T00:32:26.611+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312923":null,"customfield_12312326":null,"customfield_12312920":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312921":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-8662/watchers","watchCount":5,"isWatching":false},"created":"2015-06-24T22:30:28.052+0000","customfield_12310192":null,"customfield_12310191":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12310230":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325255","id":"12325255","description":"2.3.0 release","name":"2.3.0","archived":false,"released":true,"releaseDate":"2014-02-20"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2016-10-18T00:32:28.599+0000","customfield_12312335":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12316609","id":"12316609","name":"ha","description":"High Availability"}],"timeoriginalestimate":null,"description":"Steps (on a 3M cluster):\n1. Poweroff master1.\n2. Failover to master2.\n3. On HDFS commands, there are messages indicating failed attempt to connect to master1, though namenode is active and running on master2.\n{code}\ninfinity2:~ # su - hdfs -c \"hdfs haadmin -getServiceState nn2\"\nactive\ninfinity2:~ # su hdfs -c \"hdfs dfs -ls /\"\n15/06/24 15:28:15 INFO ipc.Client: Retrying connect to server: infinity1.labs.teradata.com/39.0.24.1:8020. Already tried 0 time(s); retry policy is RetryPolicy[MultipleLinearRandomRetry[6x10000ms, 10x60000ms], TryOnceThenFail]\n15/06/24 15:28:31 INFO ipc.Client: Retrying connect to server: infinity1.labs.teradata.com/39.0.24.1:8020. Already tried 1 time(s); retry policy is RetryPolicy[MultipleLinearRandomRetry[6x10000ms, 10x60000ms], TryOnceThenFail]\nFound 7 items\ndrwxrwxrwx   - yarn   hadoop          0 2015-06-24 14:42 /app-logs\ndrwxr-xr-x   - hdfs   hdfs            0 2015-06-24 06:16 /apps\ndrwxr-xr-x   - hdfs   hdfs            0 2015-06-24 06:14 /hdp\ndrwxr-xr-x   - mapred hdfs            0 2015-06-24 06:15 /mapred\ndrwxrwxrwx   - mapred hadoop          0 2015-06-24 06:15 /mr-history\ndrwxrwxrwx   - hdfs   hdfs            0 2015-06-24 06:16 /tmp\ndrwxr-xr-x   - hdfs   hdfs            0 2015-06-24 06:17 /user\ninfinity2:~ # ps -fu hdfs\nUID        PID  PPID  C STIME TTY          TIME CMD\nhdfs     16318     1  0 06:25 ?        00:00:40 /opt/teradata/jvm64/jdk8/bin/java -Dproc_journalnode -Xmx4096m -Dhdp.version=2.3.0.0-2462 -Djava.net.prefe\nhdfs     16859     1  0 06:26 ?        00:00:29 /opt/teradata/jvm64/jdk8/bin/java -Dproc_zkfc -Xmx4096m -Dhdp.version=2.3.0.0-2462 -Djava.net.preferIPv4St\nhdfs     17791     1  0 06:26 ?        00:02:34 /opt/teradata/jvm64/jdk8/bin/java -Dproc_namenode -Xmx4096m -Dhdp.version=2.3.0.0-2462 -Djava.net.preferIP\ninfinity2:~ #\n{code}\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12310320":null,"customfield_12312024":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12741964","id":"12741964","filename":"hadoop-hdfs-journalnode-infinity2.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lakshmivs","name":"lakshmivs","key":"lakshmivs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lakshmi VS","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-25T22:20:07.327+0000","size":543387,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12741964/hadoop-hdfs-journalnode-infinity2.log"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12741965","id":"12741965","filename":"hadoop-hdfs-namenode-infinity2.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lakshmivs","name":"lakshmivs","key":"lakshmivs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lakshmi VS","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-25T22:20:07.332+0000","size":2491407,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12741965/hadoop-hdfs-namenode-infinity2.log"}],"aggregatetimeestimate":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"summary":"In failover state, HDFS commands fail on \"Retrying connect to server:<master1>\"","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lakshmivs","name":"lakshmivs","key":"lakshmivs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lakshmi VS","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lakshmivs","name":"lakshmivs","key":"lakshmivs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lakshmi VS","active":true,"timeZone":"Etc/UTC"},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"3-master cluster with 3 data nodes and 1 edge node.\n","customfield_12313520":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12840362/comment/14609260","id":"14609260","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iwasakims","name":"iwasakims","key":"iwasakims","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=iwasakims&avatarId=18289","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=iwasakims&avatarId=18289","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=iwasakims&avatarId=18289","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=iwasakims&avatarId=18289"},"displayName":"Masatake Iwasaki","active":true,"timeZone":"Asia/Tokyo"},"body":"2.3.0 does not support more than 2 NN. The feature was added very recently by HDFS-6440 and not merged in branch-2. Are you applied the patch by yourself?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=iwasakims","name":"iwasakims","key":"iwasakims","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=iwasakims&avatarId=18289","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=iwasakims&avatarId=18289","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=iwasakims&avatarId=18289","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=iwasakims&avatarId=18289"},"displayName":"Masatake Iwasaki","active":true,"timeZone":"Asia/Tokyo"},"created":"2015-06-30T23:38:58.386+0000","updated":"2015-06-30T23:38:58.386+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12840362/comment/14609272","id":"14609272","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lakshmivs","name":"lakshmivs","key":"lakshmivs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lakshmi VS","active":true,"timeZone":"Etc/UTC"},"body":"This issue is with only 2 NN.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lakshmivs","name":"lakshmivs","key":"lakshmivs","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lakshmi VS","active":true,"timeZone":"Etc/UTC"},"created":"2015-06-30T23:48:03.107+0000","updated":"2015-06-30T23:48:03.107+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12840362/comment/15023715","id":"15023715","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"body":"{code}\ninfinity2:~ # su hdfs -c \"hdfs dfs -ls /\"\n15/06/24 15:28:15 INFO ipc.Client: Retrying connect to server: infinity1.labs.teradata.com/39.0.24.1:8020. Already tried 0 time(s); retry policy is RetryPolicy[MultipleLinearRandomRetry[6x10000ms, 10x60000ms], TryOnceThenFail]\n15/06/24 15:28:31 INFO ipc.Client: Retrying connect to server: infinity1.labs.teradata.com/39.0.24.1:8020. Already tried 1 time(s); retry policy is RetryPolicy[MultipleLinearRandomRetry[6x10000ms, 10x60000ms], TryOnceThenFail]\nFound 7 items\ndrwxrwxrwx   - yarn   hadoop          0 2015-06-24 14:42 /app-logs\ndrwxr-xr-x   - hdfs   hdfs            0 2015-06-24 06:16 /apps\ndrwxr-xr-x   - hdfs   hdfs            0 2015-06-24 06:14 /hdp\ndrwxr-xr-x   - mapred hdfs            0 2015-06-24 06:15 /mapred\ndrwxrwxrwx   - mapred hadoop          0 2015-06-24 06:15 /mr-history\ndrwxrwxrwx   - hdfs   hdfs            0 2015-06-24 06:16 /tmp\ndrwxr-xr-x   - hdfs   hdfs            0 2015-06-24 06:17 /user\n{code}\nFrom the above output, the command did not fail.  It just said that it would retry.  It indeed succeeded and printed out the listing.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=szetszwo","name":"szetszwo","key":"szetszwo","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=szetszwo&avatarId=23156","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=szetszwo&avatarId=23156","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=szetszwo&avatarId=23156","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=szetszwo&avatarId=23156"},"displayName":"Tsz Wo Nicholas Sze","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-11-24T03:36:35.903+0000","updated":"2015-11-24T03:36:35.903+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12840362/comment/15583961","id":"15583961","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"body":"Resolving per Nicholas' comment, this looks like it's working as intended.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.wang","name":"andrew.wang","key":"andrew.wang","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.wang&avatarId=19230","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.wang&avatarId=19230","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.wang&avatarId=19230","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.wang&avatarId=19230"},"displayName":"Andrew Wang","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-18T00:32:28.404+0000","updated":"2016-10-18T00:32:28.404+0000"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/HDFS-8662/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i2ggnb:"}}