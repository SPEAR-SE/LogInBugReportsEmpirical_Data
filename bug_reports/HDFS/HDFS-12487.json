{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": 0,
        "aggregatetimeoriginalestimate": 0,
        "aggregatetimespent": null,
        "assignee": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10445",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10445",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10445",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10445"
            },
            "displayName": "liumi",
            "key": "liumihust",
            "name": "liumihust",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=liumihust",
            "timeZone": "Etc/UTC"
        },
        "components": [
            {
                "id": "12313153",
                "name": "balancer & mover",
                "self": "https://issues.apache.org/jira/rest/api/2/component/12313153"
            },
            {
                "id": "12330206",
                "name": "diskbalancer",
                "self": "https://issues.apache.org/jira/rest/api/2/component/12330206"
            }
        ],
        "created": "2017-09-19T07:25:29.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10445",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10445",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10445",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10445"
            },
            "displayName": "liumi",
            "key": "liumihust",
            "name": "liumihust",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=liumihust",
            "timeZone": "Etc/UTC"
        },
        "customfield_10010": null,
        "customfield_12310191": null,
        "customfield_12310192": null,
        "customfield_12310220": "2017-09-19T16:38:16.200+0000",
        "customfield_12310222": null,
        "customfield_12310230": null,
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "2.0",
        "customfield_12310320": [{
            "archived": false,
            "description": "",
            "id": "12342772",
            "name": "3.2.0",
            "released": false,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12342772"
        }],
        "customfield_12310420": "9223372036854775807",
        "customfield_12310920": "9223372036854775807",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i3k80v:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Tue Mar 20 22:49:32 UTC 2018",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "BlockIteratorImpl.nextBlock() will look for the blocks in the source volume, if there are no blocks any more, it will return null up to DiskBalancer.getBlockToCopy(). However, the DiskBalancer.getBlockToCopy() will check whether it's a valid block.\nWhen I look into the FsDatasetSpi.isValidBlock(), I find that it doesn't check the null pointer! In fact, we firstly need to check whether it's null or not, or exception will occur.\nThis bug is hard to find, because the DiskBalancer hardly copy all the data of one volume to others. Even if some times we may copy all the data of one volume to other volumes, when the bug occurs, the copy process has already done.\nHowever, when we try to copy all the data of two or more volumes to other volumes in more than one step, the thread will be shut down, which is caused by the bug above.\nThe bug can fixed by two ways:\n1)Before the call of FsDatasetSpi.isValidBlock(), we check the null pointer\n2)Check the null pointer inside the implementation of FsDatasetSpi.isValidBlock()",
        "duedate": null,
        "environment": "CentOS 6.8 x64\nCPU:4 core\nMemory:16GB\nHadoop: Release 3.0.0-alpha4\n",
        "fixVersions": [],
        "issuelinks": [],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "id": "3",
            "name": "Major",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094"
            },
            "id": "12310942",
            "key": "HDFS",
            "name": "Hadoop HDFS",
            "projectCategory": {
                "description": "Scalable Distributed Computing",
                "id": "10292",
                "name": "Hadoop",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10292"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12310942"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10445",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10445",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10445",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10445"
            },
            "displayName": "liumi",
            "key": "liumihust",
            "name": "liumihust",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=liumihust",
            "timeZone": "Etc/UTC"
        },
        "resolution": null,
        "resolutiondate": null,
        "status": {
            "description": "A patch for this issue has been uploaded to JIRA by a contributor.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/document.png",
            "id": "10002",
            "name": "Patch Available",
            "self": "https://issues.apache.org/jira/rest/api/2/status/10002",
            "statusCategory": {
                "colorName": "yellow",
                "id": 4,
                "key": "indeterminate",
                "name": "In Progress",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/4"
            }
        },
        "subtasks": [],
        "summary": "FsDatasetSpi.isValidBlock() lacks null pointer check inside and neither do the callers",
        "timeestimate": 0,
        "timeoriginalestimate": 0,
        "timespent": null,
        "updated": "2018-03-20T22:49:32.000+0000",
        "versions": [{
            "archived": false,
            "description": "3.0.0 GA release",
            "id": "12341433",
            "name": "3.0.0",
            "releaseDate": "2017-12-13",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12341433"
        }],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HDFS-12487/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HDFS-12487/watchers",
            "watchCount": 4
        },
        "workratio": 0
    },
    "id": "13103161",
    "key": "HDFS-12487",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/13103161"
}