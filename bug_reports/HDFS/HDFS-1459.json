{
    "expand": "operations,versionedRepresentations,editmeta,changelog,renderedFields",
    "fields": {
        "aggregateprogress": {
            "progress": 0,
            "total": 0
        },
        "aggregatetimeestimate": null,
        "aggregatetimeoriginalestimate": null,
        "aggregatetimespent": null,
        "assignee": null,
        "components": [],
        "created": "2010-10-17T18:07:50.000+0000",
        "creator": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Hajo Nils Krabbenhöft",
            "key": "fxtentacle",
            "name": "fxtentacle",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fxtentacle",
            "timeZone": "Etc/UTC"
        },
        "customfield_10010": null,
        "customfield_12310191": null,
        "customfield_12310192": null,
        "customfield_12310220": "2010-10-20T18:21:05.115+0000",
        "customfield_12310222": null,
        "customfield_12310230": "NullPointerException, NPE, HDFS, readInt, read, blockSeekTo",
        "customfield_12310250": null,
        "customfield_12310290": null,
        "customfield_12310291": null,
        "customfield_12310300": null,
        "customfield_12310310": "0.0",
        "customfield_12310320": null,
        "customfield_12310420": "15433",
        "customfield_12310920": "113558",
        "customfield_12310921": null,
        "customfield_12311020": null,
        "customfield_12311024": null,
        "customfield_12311120": null,
        "customfield_12311820": "0|i0jskf:",
        "customfield_12312022": null,
        "customfield_12312023": null,
        "customfield_12312024": null,
        "customfield_12312026": null,
        "customfield_12312220": null,
        "customfield_12312320": null,
        "customfield_12312321": null,
        "customfield_12312322": null,
        "customfield_12312323": null,
        "customfield_12312324": null,
        "customfield_12312325": null,
        "customfield_12312326": null,
        "customfield_12312327": null,
        "customfield_12312328": null,
        "customfield_12312329": null,
        "customfield_12312330": null,
        "customfield_12312331": null,
        "customfield_12312332": null,
        "customfield_12312333": null,
        "customfield_12312334": null,
        "customfield_12312335": null,
        "customfield_12312336": null,
        "customfield_12312337": null,
        "customfield_12312338": null,
        "customfield_12312339": null,
        "customfield_12312340": null,
        "customfield_12312341": null,
        "customfield_12312520": null,
        "customfield_12312521": "Sun Oct 24 10:54:15 UTC 2010",
        "customfield_12312720": null,
        "customfield_12312823": null,
        "customfield_12312920": null,
        "customfield_12312921": null,
        "customfield_12312923": null,
        "customfield_12313422": "false",
        "customfield_12313520": null,
        "description": "First, here's my source code accessing the HDFS:\n\n\nfinal FSDataInputStream indexFile = getFile(bucketPathStr, Integer.toString(hashTableId) + \".index\");\nindexFile.seek(bucketId * 4);\nint bucketStart = ByteSwapper.swap(indexFile.readInt());\nint bucketEnd = ByteSwapper.swap(indexFile.readInt());\n\nfinal FSDataInputStream dataFile = getFile(bucketPathStr, Integer.toString(hashTableId) + \".data\");\ndataFile.seek(bucketStart * (2 + Hasher.getConfigHashLength()) * 4);\n\nfor (int hash = bucketStart; hash < bucketEnd; hash++) {\n\tint RimageIdA = ByteSwapper.swap(dataFile.readInt());\n\tint RimageIdB = ByteSwapper.swap(dataFile.readInt());\n\t....... read hash of length Hasher.getConfigHashLength() and work with it ....\n}\n\n\nAs you can see, i am reading the range to be read from an X.index file and then read these rows from X.data. The index file is always exactly 6.710.888 bytes in length.\n\nAs for the data file, everything works fine with 50 different 1.35 GB (22 blocks) data files and it fails every time i tried with 50 different 2.42 GB (39 blocks) data files. So the cause of the bug is clearly dependent on the file size.\n\nI checked for ulimit and for the number of network connections and they are both not maxed out when the error occurs. The stack trace i get is:\n\njava.lang.NullPointerException\n\tat org.apache.hadoop.hdfs.DFSClient$DFSInputStream.readBuffer(DFSClient.java:1703)\n\tat org.apache.hadoop.hdfs.DFSClient$DFSInputStream.read(DFSClient.java:1755)\n\tat org.apache.hadoop.hdfs.DFSClient$DFSInputStream.read(DFSClient.java:1680)\n\tat java.io.DataInputStream.readInt(DataInputStream.java:370)\n...\n\tat org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)\n\tat org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:358)\n\tat org.apache.hadoop.mapred.MapTask.run(MapTask.java:307)\n\tat org.apache.hadoop.mapred.Child.main(Child.java:170)\n\nwhich leads me to believe that DFSClient.blockSeekTo returns with a non-null chosenNode but with blockReader = null.\n\nSince the exact same jar works flawlessly with small data files and fails reliably with big data files, i'm wondering how this could possibly dependent on the file's size or block count (DFSClient.java line 1628+):\n\ns = socketFactory.createSocket();\nNetUtils.connect(s, targetAddr, socketTimeout);\ns.setSoTimeout(socketTimeout);\nBlock blk = targetBlock.getBlock();\n\nblockReader = BlockReader.newBlockReader(s, src, blk.getBlockId(), \n    blk.getGenerationStamp(),\n    offsetIntoBlock, blk.getNumBytes() - offsetIntoBlock,\n    buffersize, verifyChecksum, clientName);\nreturn chosenNode;\n",
        "duedate": null,
        "environment": "Debian 64 bit\nCloudera Hadoop",
        "fixVersions": [],
        "issuelinks": [],
        "issuetype": {
            "avatarId": 21133,
            "description": "A problem which impairs or prevents the functions of the product.",
            "iconUrl": "https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype",
            "id": "1",
            "name": "Bug",
            "self": "https://issues.apache.org/jira/rest/api/2/issuetype/1",
            "subtask": false
        },
        "labels": [],
        "lastViewed": null,
        "priority": {
            "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg",
            "id": "3",
            "name": "Major",
            "self": "https://issues.apache.org/jira/rest/api/2/priority/3"
        },
        "progress": {
            "progress": 0,
            "total": 0
        },
        "project": {
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310942&avatarId=10094",
                "24x24": "https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310942&avatarId=10094",
                "32x32": "https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310942&avatarId=10094",
                "48x48": "https://issues.apache.org/jira/secure/projectavatar?pid=12310942&avatarId=10094"
            },
            "id": "12310942",
            "key": "HDFS",
            "name": "Hadoop HDFS",
            "projectCategory": {
                "description": "Scalable Distributed Computing",
                "id": "10292",
                "name": "Hadoop",
                "self": "https://issues.apache.org/jira/rest/api/2/projectCategory/10292"
            },
            "self": "https://issues.apache.org/jira/rest/api/2/project/12310942"
        },
        "reporter": {
            "active": true,
            "avatarUrls": {
                "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452",
                "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452",
                "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452",
                "48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452"
            },
            "displayName": "Hajo Nils Krabbenhöft",
            "key": "fxtentacle",
            "name": "fxtentacle",
            "self": "https://issues.apache.org/jira/rest/api/2/user?username=fxtentacle",
            "timeZone": "Etc/UTC"
        },
        "resolution": null,
        "resolutiondate": null,
        "status": {
            "description": "The issue is open and ready for the assignee to start work on it.",
            "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png",
            "id": "1",
            "name": "Open",
            "self": "https://issues.apache.org/jira/rest/api/2/status/1",
            "statusCategory": {
                "colorName": "blue-gray",
                "id": 2,
                "key": "new",
                "name": "To Do",
                "self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2"
            }
        },
        "subtasks": [],
        "summary": "NullPointerException in DataInputStream.readInt caused by reaching xceiverCount",
        "timeestimate": null,
        "timeoriginalestimate": null,
        "timespent": null,
        "updated": "2010-10-24T10:54:15.000+0000",
        "versions": [{
            "archived": false,
            "description": "",
            "id": "12314048",
            "name": "0.20.1",
            "releaseDate": "2009-09-01",
            "released": true,
            "self": "https://issues.apache.org/jira/rest/api/2/version/12314048"
        }],
        "votes": {
            "hasVoted": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HDFS-1459/votes",
            "votes": 0
        },
        "watches": {
            "isWatching": false,
            "self": "https://issues.apache.org/jira/rest/api/2/issue/HDFS-1459/watchers",
            "watchCount": 1
        },
        "workratio": -1
    },
    "id": "12477575",
    "key": "HDFS-1459",
    "self": "https://issues.apache.org/jira/rest/api/2/issue/12477575"
}